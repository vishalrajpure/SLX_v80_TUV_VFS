//>>built
require({cache:{"Sage/TaskPane/_BaseTaskPaneTasklet":function(){define("Sage/TaskPane/_BaseTaskPaneTasklet",["Sage/UI/Dialogs","dojo/i18n!./nls/_BaseTaskPaneTasklet","dojo/_base/declare"],function(_1,_2,_3){var _4=_3("Sage.TaskPane._BaseTaskPaneTasklet",null,{currentEntityId:"",currentEntityTableName:"",currentEntityType:"",contextService:null,selectedRecordActionCallback:"",selectionContainer:"_hfSelections",selectRecordsTitle:"Invalid Selection",selectRecords:"Please select a record before continuing.",selectSingleRecord:"Please select a single record before continuing.",noRecordsSelectedProcessAll:"No records selected. The full group, ${0} record(s), will be processed.  Proceed?",invalidSelectionTitle:"Invalid Selection",errorSelectionInfo:"There was an error retrieving information about the selected records.",errorNoData:"No data available.",yesButtonText:"Yes",noButtonText:"No",salesLogixPageTitle:"SalesLogix",constructor:function(_5){dojo.mixin(this,_5);dojo.mixin(this,_2);},getSelectionInfo:function(){try{return Sage.Utility.getSelectionInfo();}catch(e){_1.alert(this.errorNoData);return null;}},prepareSelectedRecords:function(_6){this.selectedRecordActionCallback=_6;var _7=this;try{this.selectionInfo=this.getSelectionInfo();}catch(e){_1.showInfo(this.errorNoData);}if(this.selectionInfo.selectionCount==0&&this.selectionInfo.recordCount>0){var _8=dojo.string.substitute(this.noRecordsSelectedProcessAll,[this.selectionInfo.recordCount]);_1.raiseQueryDialog(this.salesLogixPageTitle,_8,function(_9){_7.storeAllSelectionsOrCancel(_9,_7.selectionInfo);},this.yesButtonText,this.noButtonText);}else{if(this.selectionInfo.recordCount>0){this.saveSelections(this.selectedRecordActionCallback,this.selectionInfo);}else{_1.showInfo(this.errorNoData);}}},storeAllSelectionsOrCancel:function(_a,_b){if(_a){_b.mode="selectAll";this.saveSelections(this.selectedRecordActionCallback,_b);}else{var _c=dojo.byId([this.clientId,this.selectionContainer].join(""));if(_c){_c.value="cancel";}}},saveSelections:function(_d,_e){if(_e!=null){var _f=Sage.Services.getService("SelectionContextService");_f.setSelectionContext(_e.key,_e,_d);var _10=dojo.byId([this.clientId,this.selectionContainer].join(""));if(_10){_10.value=_e.key;}}},verifySelection:function(_11){if(_11!=null){return (_11.selectionCount!=0);}return false;},verifySingleSelection:function(_12){if(_12!=null){return (_12.selectionCount===1);}return false;},getCurrentEntity:function(){if(Sage.Services.hasService("ClientEntityContext")){this.contextService=Sage.Services.getService("ClientEntityContext");this.context=this.contextService.getContext();this.currentEntityId=this.context.EntityId;this.currentEntityType=this.context.EntityType;this.currentEntityTableName=this.context.EntityTableName;}},setSelectionCount:function(){try{var _13=dijit.byId("list");if(_13){dojo.byId("selectionCount").text(_13.getTotalSelectionCount());}}catch(e){}},getSelectionCount:function(){return Sage.Services.getService("ClientGroupContext").getContext().CurrentGroupCount;}});return _4;});},"Sage/UI/Columns/OwnerType":function(){define("Sage/UI/Columns/OwnerType",["dojo/i18n","dojo/i18n!../nls/OwnerType","dojo/_base/declare"],function(_14,_15,_16){var _17=_16("Sage.UI.Columns.OwnerType",dojox.grid.cells._Base,{constructor:function(){var _18=_14.getLocalization("Sage.UI","OwnerType");dojo.mixin(this,_18);this.inherited(arguments);},formatter:function(val,_19){var _1a={"G":this.teamText,"D":this.departmentText,"S":this.systemText,"U":this.userText};return _1a[val]?Sage.Utility.htmlEncode(_1a[val]):val;},styles:"text-align: right;"});return _17;});},"Sage/Utility/File/nls/FallbackFilePicker":function(){define("Sage/Utility/File/nls/FallbackFilePicker",["Sage/LanguageList","dojo/_base/lang"],function(_1b,_1c){var nls={root:{addLibraryFileText:"Add Library File",attachFileText:"Attach File",descriptionText:"Description",uploadFileText:"Attachment",okText:"OK",cancelText:"Cancel",invalidContext:"The file(s) cannot be uploaded outside of the Sales Library."}};return _1c.mixin(_1b,nls);});},"Sage/UI/nls/Boolean":function(){define("Sage/UI/nls/Boolean",["Sage/LanguageList","dojo/_base/lang"],function(_1d,_1e){var nls={root:{yesText:"Yes",noText:"No"}};return _1e.mixin(_1d,nls);});},"Sage/Utility/Dashboard":function(){define("Sage/Utility/Dashboard",["dojo/i18n","dojox/grid/DataGrid","Sage/Groups/GroupManager","Sage/UI/Dialogs","dojo/data/ItemFileReadStore","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n!./nls/Dashboard","dojo/i18n!../UI/Dashboard/nls/WidgetDefinition","dojo/i18n!dijit/nls/common"],function(_1f,_20,_21,_22,_23,_24,_25,_26,_27){Sage.namespace("Utility.Dashboard");dojo.mixin(Sage.Utility.Dashboard,{promoteGroupToDashboard:function(){var _28="<Widget name=\"Group List\" family=\"System\"><options><name>Group List</name><title>{0}</title><entity>{1}</entity><resource>{7}</resource><groupname>{2}</groupname><limit>{3}</limit><visiblerows>{6}</visiblerows><datasource>slxdata.ashx/slx/crm/-/analytics?entity=Sage.Entity.Interfaces.I{4}&amp;groupname={5}</datasource></options></Widget>";var _29=new Simplate(["<div>","<div\">{%= $.headerText %}</div>","<div id=\"{%= $.id %}-grid\" style=\"width:auto;height:150px;\"></div>","<div align=\"right\"><button data-dojo-type=\"dijit.form.Button\" type=\"submit\" class=\"okButton\" ","style=\"margin-top:5px;\" data-dojo-props=\"onClick:function(){dijit.byId('promoteDialog').promote();}\"",">{%= $.okText %}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" class=\"cancelButton\" ","style=\"margin-top:5px; margin-left:10px;\" data-dojo-props=\"onClick:function(){dijit.byId('promoteDialog').hide();}\"",">{%= $.cancelText %}</button></div>","</div> "]);var _2a=null;if(dijit.byId("promoteDialog")){_2a=dijit.byId("promoteDialog");}else{_2a=new dijit.Dialog({id:"promoteDialog",title:MasterPageLinks.PromoteTitle,promote:function(a,b,c){var cgi=_21.GetCurrentGroupInfo();var _2b=dijit.byId("promoteDialog-grid");var _2c=_2b.selection.getSelected();if(_2c.length===0){_22.showInfo(MasterPageLinks.PromotePageNoneSelected,MasterPageLinks.PromoteTitle);return;}else{var _2d=[],_2e=_2c[0].Name,_2f=dijit.byId(cgi.Id);if(_26.My_Dashboard==_2c[0].Name){_2e="My Dashboard";}else{if(_26.Sales==_2c[0].Name){_2e="Sales";}}var _30=String.format(_28,_2f?_2f.title:cgi.Name,"Sage.Entity.Interfaces.I"+cgi.Entity,cgi.Name,10,$("<div/>").text(cgi.Entity).html(),$("<div/>").text(cgi.Name).html(),10,cgi.Entity);dojo.xhrPost({url:String.format("slxdata.ashx/slx/crm/-/dashboard/page?action=addwidget&name={0}&family={1}",encodeURIComponent(_2e),encodeURIComponent(_2c[0].Family)),headers:{"Content-Type":"application/json"},postData:_30,error:function(_31,_32,_33){_22.showInfo(MasterPageLinks.Warning,_31.responseText);},load:function(_34,_35){_22.showInfo(String.format(MasterPageLinks.PromotionNotification,_2c[0].Name,_2f?_2f.title:cgi.Name));if(typeof callback==="function"){callback(_34,_35);}}});}this.destroyRecursive();}});dojo.mixin(_2a,new _24());_2a.createHelpIconByTopic("PromoteGroup");}var _36=null;_36=new _20({id:"promoteDialog-grid",structure:[{field:"Name",name:_25.pageText,width:"200px"}],selectionMode:"single",height:"100px"},document.createElement("div"));var _37=function(){dojo.disconnect(_38);setTimeout((function(_39){return function(){_39.destroyDescendants();_39.destroy(false);};})(_2a),1);};var _38=dojo.connect(_2a,"hide",this,_37);dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/dashboard/page",cache:false,preventCache:true,handleAs:"json",load:function(_3a,xhr){var _3b={items:_3a};var _3c=new _23({data:_3b});_2a.set("content",_29.apply({id:_2a.id,okText:_27.buttonOk,cancelText:_27.buttonCancel,headerText:MasterPageLinks.PromoteDescription}));_2a.show();dojo.place(_36.domNode,"promoteDialog-grid","replace");_36.setStore(_3c);},error:function(e){alert(MasterPageLinks.Warning+e.responseText);if(console.log){}}});}});return Sage.Utility.Dashboard;});},"Sage/Services/nls/ActivityService":function(){define("Sage/Services/nls/ActivityService",["Sage/LanguageList","dojo/_base/lang"],function(_3d,_3e){var nls={root:{txtErrorActionMsg:"I'm sorry, the action was not successful an error occurred.",txtActivity:"activity",txtActivities:"activities",txtActionDeleteActivites:"Delete Activities",txtActionDeleteActivitiesQuestion:"Only activities that you have permission to delete will be deleted. <P> Are you sure you want to delete the {0} selected {1}?",txtAlarm:"alarm",txtAlarms:"alarms",txtActionSnoozeAlarm:"Snooze Alarm",txtActionSnoozeQuestion:"Are you sure you want to snooze the {0} selected {1} for {2} ?",txtActionSnoozeAllQuestion:"Are you sure you want to snooze all {0} for {1} ?",txtActionDismissAlarms:"Dismiss Alarms",txtActionDismissAlarmsQuestion:"Are you sure you want to dismiss the {0} selected {1}?",txtEvent:"event",txtEvents:"events",txtActionDeleteEvents:"Delete Events",txtActionDeleteEventsQuestion:"Only events that you have permission to delete will be deleted. <P> Are you sure you want to delete the {0} selected {1}?",txtConfirmation:"confirmation",txtConfirmations:"confirmations",txtActionAcceptConfirmations:"Accept Confirmations",txtActionAcceptConfirmQuestion:"Are you sure you want to accept the {0} selected {1}? This action can only be performed on New or Chnaged confirmations. All others will be ignored.",txtDeclineConfirmations:"Decline Confirmations",txtActionDeclineConfrimQuestion:"Are you sure you want to decline the {0} selected {1}? This action can only be performed on New or Chnaged confirmations. All others will be ignored.",txtActionRemoveConfirmations:"Delete Confirmations",txtActionRemoveConfirmationsQuestion:"Are you sure you want to delete the {0} selected {1}? This action can only be performed on Leader, Declined or Deleted confirmations. All others will be ignored.",txtLiteratureRequest:"literature request",txtLiteratureRequests:"literature requests",txtActionDeleteLiteratureRequests:"Delete Literature Requests",txtActionDeleteLiteratureRequestsQuestion:"Only literature request that you have permission to delete will be deleted. <P> Are you sure you want to delete the {0} selected {1}?"}};return _3e.mixin(_3d,nls);});},"Sage/UI/Controls/nls/CopyToClipboard":function(){define("Sage/UI/Controls/nls/CopyToClipboard",["Sage/LanguageList","dojo/_base/lang"],function(_3f,_40){var nls={root:{closeText:"Close",dialogTitle:"Copy Text To Clipboard",helpText:"Select desired text and press Control-C (Command-C on Mac) to copy to your clipboard.",textTab:"Text",sourceTab:"Source"}};return _40.mixin(_3f,nls);});},"Sage/UI/Dashboard/WidgetDefinition":function(){define("Sage/UI/Dashboard/WidgetDefinition",["Sage/UI/widgetEditorLookup","Sage/UI/EditorContainer","dijit/form/ValidationTextBox","dijit/form/NumberTextBox","dijit/form/FilteringSelect","dojo/data/ItemFileReadStore","dojo/data/ItemFileWriteStore","dojox/grid/DataGrid","dojo/i18n","dojo/i18n!./nls/WidgetDefinition"],function(_41,_42,_43,_44,_45,_46,_47,_48,_49){return function(def,_4a){if(!def.type){def.type="BaseWidget";}require(["Sage/UI/Dashboard/"+def.type],function(T){_4a(new T(def));});};});},"url:Sage/UI/Controls/templates/DropDownSelectPickList.html":"<div>\r\n    <select id=\"${id}-Select\" data-dojo-type=\"Sage.UI.ComboBox\" shouldPublishMarkDirty=\"false\" dojoAttachPoint=\"comboBox\" value=\"${value}\" dojoAttachEvent=\"onBlur: _onBlur,onChange:_onChange\">\r\n    </select>\r\n</div>\r\n","url:Sage/MainView/ActivityMgr/templates/HistoryEditor.html":"\r\n[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"historyDialog\" title=\"\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onDlgHide\">',\r\n        '<div class=\"activity-dialog\">',  //body\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\">',\r\n                '<select label=\"{%= $.regardingText %}\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_pk_Regarding\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Regarding\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\"></select>',\r\n                '<div dojoType=\"Sage.UI.Controls.TextBox\" shouldPublishMarkDirty=\"false\" label=\"{%= $.locationText %}\" id=\"{%= $.id %}_tb_Location\" dojoAttachPoint=\"tb_Location\" maxLength=\"255\" ></div>',\r\n            '</div>', //first tablecontainer 1 col\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\">',\r\n                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_CompletetdDate\" dojoAttachPoint=\"dtp_completedDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.completedDateText %}\"></div>',\r\n                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_StartDate\" dojoAttachPoint=\"dtp_startDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.startTimeText %}\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"{%= $.timeLessText %}\" id=\"{%= $.id %}_cb_Timeless\" dojoAttachPoint=\"cb_Timeless\" ></div>',\r\n                    '<label class=\"checkbox-label\" for=\"cb_Timeless\">{%= $.timeLessText %}</label>',\r\n                '</div>',\r\n                 '<div dojoType=\"Sage.UI.Controls.DurationSelect\" shouldPublishMarkDirty=\"false\" label=\"{%= $.durationText %}\" id=\"{%= $.id %}_sel_Duration\" dojoAttachPoint=\"sel_Duration\" includeDisablingCheckbox=\"false\" valuesAreAfterStart=\"true\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    \r\n                '</div>',\r\n            '</div>', //second tablecontainer 2 col\r\n\r\n            '<div dojoType=\"dijit.layout.TabContainer\" id=\"{%= $.id %}_tc_EditHistory\"  dojoAttachPoint=\"tc_EditHistory\" class=\"tab-container\">',\r\n/*  General Tab   */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_General\" title=\"{%= $.tabNameGeneralText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_General\">',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"result_Section\" class=\"bottom-border-section\">',\r\n                        '<select label=\"{%= $.resultText %}\" id=\"{%= $.id %}_tb_Result\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Result\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\"></select>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"4\" labelWidth=\"4\" baseClass=\"contact-lead-radios\" >',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.contactText %}\" value=\"contact\" id=\"{%= $.id %}_rdo_Contact\" dojoAttachPoint=\"rdo_Contact\" dojoAttachEvent=\"onChange:_setContactLeadVisibility\" checked=\"true\" />',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.leadText %}\" value=\"lead\" id=\"{%= $.id %}_rdo_Lead\" dojoAttachPoint=\"rdo_Lead\" />',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"contactContainer\" baseClass=\"bottom-border-section\">',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_ContactLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.opportunityText %}\" dojoAttachPoint=\"container_OppLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.accountText %}\" dojoAttachPoint=\"container_AccountLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.ticketText %}\" dojoAttachPoint=\"container_TicketLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"leadContainer\"  baseClass=\"bottom-border-section\" class=\"display-none\">',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_LeadLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_tb_LeadCompanyName\" label=\"{%= $.companyText %}\" dojoAttachPoint=\"tb_LeadCompanyName\" readonly=\"true\" />',\r\n                    '</div>',                       \r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\"  class=\"bottom-border-section\">',\r\n                        '<select label=\"{%= $.categoryText %}\" id=\"{%= $.id %}_pk_Category\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Category\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\"  style=\"width: {%= 472 - $.labelWidth %}px;\" ></select>', \r\n                         '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.leaderText %}\" dojoAttachPoint=\"container_LeaderLup\" class=\"remove-padding lookup-container\" style=\"width: {%= 472 - $.labelWidth %}px;\"></div>',\r\n                         '<select label=\"{%= $.priorityText %}\" id=\"{%= $.id %}_pk_Priority\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Priority\" canEditText=\"true\" itemMustExist=\"false\" pickListName=\"Priorities\" sort=\"false\" maxLength=\"64\" style=\"width: {%= 472 - $.labelWidth %}px;\"></select>',                          \r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\"  class=\"valigntop\">',\r\n                        '<textarea dojoType=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_ta_Notes\" label=\"{%= $.notesText %}\" dojoAttachPoint=\"ta_Notes\" class=\"notes-text\" ></textarea>',\r\n                    '</div>',\r\n                '</div>',  // end general tab\r\n\r\n              /* Attachments Tab  */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Attachments\" title=\"{%= $.tabNameAttachmentsText %}\" class=\"tabContent\" dojoAttachPoint=\"cp_Attachments\" dojoAttachEvent=\"onShow:_showAttachmentsTab\">',\r\n                    '<div id=\"{%= $.id %}_attachmentsGridPlaceholder\" dojoAttachPoint=\"_attachmentGridPlaceholder\" style=\"width:100%;height:100%;\" ></div>',\r\n                '</div>',  //end attachments tab\r\n            '</div>', //end tab container\r\n            '<table class=\"button-bar\">',\r\n                '<col width=\"50%\" /><col width=\"50%\" />',\r\n                 '<tr>',\r\n                    '<td class=\"alignleft\">',\r\n                        //followUp section\r\n                        '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"followUp_Section\" >',\r\n                            '<select label=\"{%= $.followupText %}\" id=\"{%= $.id %}_followUpSelect\" dojoType=\"dijit.form.ComboBox\" dojoAttachPoint=\"sel_Followup\">',\r\n                                '<option value=\"none\" selected=\"selected\">{%= $.noneText %}</option>',\r\n                                '<option value=\"atPhoneCall\">{%= Sage.Utility.Activity.getActivityTypeName(\"atPhoneCall\") %}</option>',\r\n                                '<option value=\"atAppointment\">{%= Sage.Utility.Activity.getActivityTypeName(\"atAppointment\") %}</option>',\r\n                                '<option value=\"atToDo\">{%= Sage.Utility.Activity.getActivityTypeName(\"atToDo\") %}</option>',\r\n                            '</select>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"{%= $.id %}_ck_coAttachments\" dojoAttachPoint=\"ck_coAttachments\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coAttachments\">{%= $.carryOverAttachmentsText %}</label>',\r\n                            '</div>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"{%= $.id %}_ck_coNotes\" dojoAttachPoint=\"ck_coNotes\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coNotes\">{%= $.carryOverNotesText %}</label>',\r\n                            '</div>',\r\n                        '</div>',//end followUp section                         \r\n                    '</td>',\r\n                    '<td class=\"alignright valignbottom\" rowspan=\"2\">',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnDelete\" name=\"btn_Delete\" dojoAttachPoint=\"btn_Delete\" dojoAttachEvent=\"onClick:_deleteClick\">{%= $.deleteText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $. cancelText %}</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                   '<td class=\"alignleft\">',\r\n                      '<div class=\"scheduled-by-label\" dojoAttachPoint=\"lbl_ScheduledBy\"></div>',\r\n                   '</td>',                 \r\n                '</tr>',\r\n            '</table>',\r\n        '</div>', //body\r\n    '</div>',  //dialog\r\n'</div>' //root node\r\n]\r\n","Sage/UI/SDataLookup":function(){define("Sage/UI/SDataLookup",["dojo/_base/html","dojox/grid/DataGrid","dijit/Dialog","dijit/form/Button","Sage/UI/ComboBox","Sage/Data/BaseSDataStore","Sage/UI/ConditionManager","Sage/Utility","Sage/_Templated","Sage/UI/Columns/DateTime","Sage/UI/Columns/Phone","Sage/UI/Columns/PickList","dijit/_Widget","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/i18n!./nls/SDataLookup","dojo/_base/declare"],function(_4b,_4c,_4d,_4e,_4f,_50,_51,_52,_53,_54,_55,_56,_57,_58,_59,_5a,_5b){(function(){if(!_52){Sage.namespace("Utility");}_52.addToListUnique=function(_5c,_5d){for(var i=0;i<_5d.length;i++){if(_5c===_5d[i]){return;}}_5d.push(_5c);};_52.SDataLookupChildObjectFormatter=function(_5e){var _5f=_5e.grid.grid._by_idx[_5e.rowIdx].item,res,i;if(!_5f||!_5f[_5e.childentity]||_5f[_5e.childentity].$resources.length===0){return dojo.string.substitute("<div style=\"text-indent:16px\">${0}</div>",[_5e.value||"&nbsp;"]);}_5e.value=_5e.value||"&nbsp;";res=[];if(_5e.includeButton){res.push(dojo.string.substitute(["<input type=button id=\"SOPshow${1}\" style=\"height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:''});dojo.query('#SOPshow${1}').style({display:'none'});dojo.query('#SOPhide${1}').style({display:''})\" value=\"+\">","<input type=button id=\"SOPhide${1}\" style=\"display:none;height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:'none'});dojo.query('#SOPshow${1}').style({display:''});dojo.query('#SOPhide${1}').style({display:'none'})\" value=\"-\"> "].join(""),[_5e.value,_5e.rowIdx]));}res.push(dojo.string.substitute("${0}<div class=SOProw${1} style=\"display:none\">",[_5e.value,_5e.rowIdx]));for(i=0;i<_5f[_5e.childentity].$resources.length;i++){res.push(dojo.string.substitute("<div style=\"text-indent:2em\">${0}</div>",[_5f[_5e.childentity].$resources[i][_5e.fieldName]||"&nbsp;"]));}res.push("</div>");return res.join("");};}());var _60=_5b("Sage.UI.SDataLookup",[_57,_53],{config:null,grid:null,sdataStore:null,conditionMgr:null,structure:null,displayMode:5,lookupDialog:null,dialogTitle:"",dialogWidth:675,dialogHeight:500,seedOnRowEntity:false,seedOnRelatedEntity:"",seedProperty:"",seedValue:"",overrideSeedValueOnSearch:false,preFilters:null,initializeLookup:true,rowEntityId:"",relatedEntityId:"",returnObject:true,addEmptyListItem:false,fields:null,query:null,callerId:null,widgetsInTemplate:true,storeOptions:null,gridOptions:null,sortColumn:"",displayModes:{"DropDownList":0,"Dialog":1,"HyperText":2,"Text":3,"ButtonOnly":4,"ButtonOnlyClient":5},btnIcon:"images/icons/plus_16x16.gif",isModal:false,cancelText:"Cancel",closeText:"Close",loadingText:"Loading...",noDataText:"No records returned",_initialized:false,_addCondHandle:null,_removeCondHandle:null,_originalQueryConditions:"",id:"lookupControl",dialogContent:new Simplate(["<div >","<div style=\"padding:5px;\" id=\"{%= $.id %}-Condition-container\"></div>","<div id=\"{%= $.id %}-Grid-container\" style=\"width:auto;height:{%= $.gridHeight %}px;\"></div>","<div class=\"lookupButtonWrapper\">","{% if($.dialogButtonText){ %}","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" id=\"{%= $.id %}-GridSelectButton\" ","onClick=\"dijit.byId('{%= $.id %}').getGridSelections(); \">","{%= $.dialogButtonText %} </button>","{% } %}","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" id=\"{%= $.id %}-CloseButton\" ","onClick=\"dijit.byId('{%= $.id %}-Dialog').hide();\">{%= $.hideText %}</button>","</div>","</div> "]),constructor:function(){this.gridOptions={};this.storeOptions={pagesize:15,include:[],select:["Id"],orderby:""};this.preFilters=[];this.query={};this.config={};this.fields=[];this.structure=[];this.grid=[];this.sdataStore=[];},postMixInProperties:function(){var _61,i,_62,_63;this._initialized=false;_59.mixin(this,dojo.i18n.getLocalization("Sage.UI","SDataLookup"));if(typeof this.displayMode==="string"){this.displayMode=this.displayModes[this.displayMode];}if(this.structure&&this.structure[0]&&this.structure[0].cells){_61=this.structure[0].cells;for(i=0;i<_61.length;i++){if(_61[i]&&_61[i].type&&(typeof _61[i].type==="string")){switch(_61[i].type){case "Sage.UI.Columns.DateTime":_61[i].type=_54;break;case "Sage.UI.Columns.Phone":_61[i].type=_55;break;case "Sage.UI.Columns.PickList":_61[i].type=_56;break;default:delete _61[i].type;break;}}}}_62={pagesize:15,include:[],orderby:"",select:["Id"]};if(this.displayMode===0){this.initSDataStore();this.buildSDataStoreQueryConditions();}else{if(typeof this.gridOptions.contextualCondition==="function"){this.query={fn:this.gridOptions.contextualCondition,scope:this};}else{if(typeof this.gridOptions.contextualCondition==="object"){if(this.gridOptions.contextualCondition.fn){this.ensureValue(this.gridOptions.contextualCondition,"scope",this);this.query=this.gridOptions.contextualCondition;}}}this.buildSDataStoreQueryForSeeding();}_63={rowsPerPage:15,loadingMessage:this.loadingText,noDataMessage:this.noDataText,query:this.query};this._originalQueryConditions=this.query.conditions;this.storeOptions=_52.extend(true,_62,this.storeOptions);this.gridOptions=_52.extend(false,_63,this.gridOptions);this.widgetTemplate=new Simplate(this.setTemplate(this.displayMode));},setTemplate:function(_64){var _65=["<div id=\"{%= $.id %}\" style=\"width:inherit;\" > ","<select style=\"width:inherit;\"  id=\"{%= $.id %}_select\" searchAttr=\"{%= $.field %}\" labelAttr=\"{%= $.field %}\" "," dojoAttachPoint=\"focusNode\" autoComplete=\"true\" required=\"{%= $.required %}\" data-dojo-type=\"Sage.UI.ComboBox\" value=\"{%= $.setSelectedValue() %}\" "," store=\"dijit.byId('{%= $.id %}').sdataStore\" name=\"{%= $.field %}\">","</select>","</div>"],_66=["<img style=\"cursor: pointer; padding-right: 4px;\" "," onclick=\"dijit.byId('{%= $.id %}').showLookup();\" ","src=\"{%= $.btnIcon %}\" alt=\"{%= $.btnToolTip %}\" title=\"{%= $.btnToolTip %}\" >"];switch(_64){case 0:return _65;case 5:return _66;default:return _66;}},initDialog:function(){this.initConditionManager();this.initSDataStore();this._setQueryForLoad();this.initGrid(this.initializeLookup);},_setQueryForLoad:function(){var _67=this.conditionMgr.getConditionsAsUrlWhereString(),_68=this._originalQueryConditions,_69="",_6a=[];_6a.push(_67);_6a.push(_68);_6a=dojo.filter(_6a,function(_6b,_6c,_6d){return _6b&&_6b!=="";});_69=_6a.join(" and ");if(_69){this.gridOptions.query.conditions=_69;}},_setQueryForSearch:function(){var _6e=this.conditionMgr.getConditionsAsUrlWhereString(),_6f=this._originalQueryConditions,_70="",_71=[];if(this.isSeeded()&&this.overrideSeedValueOnSearch===false){_71.push(_6e);_71.push(_6f);}else{if(this.isSeeded()){_71.push(_6e);}else{_71.push(_6e);_71.push(_6f);}}_71=dojo.filter(_71,function(_72,_73,_74){return _72&&_72!=="";});_70=_71.join(" and ");this.gridOptions.query.conditions=_70;},doLookup:function(){this.grid.destroy(false);this._setQueryForSearch();this.initGrid(true);},setSelectedValue:function(){var _75=(this.value!==null)?this.value:"",_76,_77,i;if(this.returnObject&&this.value!==null){_76=this.field.split(".");_77=this.value;for(i=0;i<_76.length;i++){if(_77){_77=_77[_76[i]];}}_75=_77;}return _75;},getGridSelections:function(){var _78=this.grid.selection.getSelected();if(_78.length<=0&&this.grid._by_idx.length===1){_78.push(this.grid._by_idx[0].item);}if(_78.length===0){return;}this.doSelected(_78);this.grid.selection.deselectAll();},initConditionManager:function(){var _79,_7a,_7b,_7c,_7d,_7e,_7f,i,_80,_81,_82,_83,_84,_85,op,_86,_87;if(this.conditionMgr){return;}_79=function(_88,_89,_8a,_8b,_8c,_8d){var i;for(i=0;i<_8d.length;i++){if(_88===_8d[i].fieldname){return;}}_8d.push({fieldName:_88,displayName:_89,propertyType:_8a,pickListName:_8b,pickListStorageMode:_8c});};_7a=this.structure[0];_7b=this.fields;for(i=0;i<_7a.cells.length;i++){if(_7a.cells[i].excludeFromFilters!==true){if(_7a.cells[i].field){_80=_7a.cells[i];_7c=_80.field;_7e=_80.propertyType;_7d=_80.displayField||_80.name;_7f=_80.pickListName;pickListStorageMode=_80.pickListStorageMode;_79(_7c,_7d,_7e,_7f,pickListStorageMode,_7b);}}}_81={fields:_7b,fieldNameProperty:"fieldName",fieldDisplayNameProperty:"displayName",fieldTypeProperty:"propertyType",id:this.id+"-ConditionManager"};this.conditionMgr=new _51(_81);_82=this;this._addCondHandle=dojo.subscribe("onAddLookupCondition",_82,function(mgr){this._increaseDialogHeight();});this._removeCondHandle=dojo.subscribe("onRemoveLookupCondition",_82,function(mgr){this._decreaseDialogHeight();});if(this.preFilters.length>0){this.conditionMgr.setFirstConditionValue("","=","");}for(_83=0;_83<this.preFilters.length;_83++){_84=this.preFilters[_83];_85=_84.propertyName.trim();op=_84.conditionOperator.trim();_86=_84.filterValue.trim();_87=_84.visible;this.conditionMgr.addCondition(_85,op,_86,_87);if(_87){this._increaseDialogHeight();}}dojo.place(this.conditionMgr.domNode,dojo.byId(this.id+"-Condition-container"),"only");this._doSearchConnection=dojo.connect(this.conditionMgr,"onDoSearch",this,"doLookup");},_increaseDialogHeight:function(){if(this.dialogHeight){this.dialogHeight+=30;dojo.style([this.id,"-Dialog"].join(""),"height",this.dialogHeight+"px");}},_decreaseDialogHeight:function(){if(this.dialogHeight){this.dialogHeight-=30;dojo.style([this.id,"-Dialog"].join(""),"height",this.dialogHeight+"px");}},onDoubleClick:function(_8e){this.getGridSelections();if(this.lookupDialog){}},initGrid:function(_8f){var _90=dijit.byId([this.id,"-Grid"].join(""));if(!_90){this.gridOptions.store=this.sdataStore;this.gridOptions.structure=this.structure;this.gridOptions.id=[this.id,"-Grid"].join("");this.grid=new _4c(this.gridOptions);this.grid.canSort=function(_91){var _92=this.structure[0];return _92.cells[Math.abs(_91)-1].sortable;};dojo.connect(this.grid,"onDblClick",this,this.onDoubleClick);dojo.place(this.grid.domNode,[this.id,"-Grid-container"].join(""),"only");if(_8f){this.grid.startup();}else{this.grid.query.conditions="Id like '_hack_'";this.grid.startup();}}else{if(this.query.conditions!==_90.query.conditions){_90.destroy();this.initGrid();}else{this.grid=_90;}}},initSDataStore:function(){var _93=this.structure[0],sel=this.storeOptions.select||[],inc=this.storeOptions.include||[],_94,i,_95,_96,p;for(i=0;i<_93.cells.length;i++){if(_93.cells[i].field){_94=_93.cells[i].field;if(_93.cells[i].displayField){_94=_94+"."+_93.cells[i].displayField;}_52.addToListUnique(_94.replace(/\./g,"/"),sel);if(_93.cells[i].field.indexOf(".")>0){_95=_93.cells[i].field.split(".");_96="";for(p=0;p<_95.length-1;p++){_96+=_95[p];_52.addToListUnique(_96,inc);_96+="/";}}}}this.storeOptions.include=inc;this.storeOptions.select=sel;this.sdataStore=new _50(this.storeOptions);},isSeeded:function(){var _97=(this.seedValue&&this.seedValue!==""&&this.seedProperty!=="");return _97;},buildSDataStoreQueryForSeeding:function(){var _98,_99,_9a;if(this.isSeeded()){_99=dojo.string.substitute("${0} eq \"${1}\"",[this.seedProperty,this.seedValue]);_9a=this.query.conditions;if(_9a&&_9a!==""){_98=_9a+" and "+_99;}else{_98=_99;}this.sdataStore.query={conditions:_98};this.query.conditions=_98;}},buildSDataStoreQueryConditions:function(){var _9b;if(this.seedOnRowEntity){this.sdataStore.directQuery=dojo.string.substitute("Id eq \"${0}\"",[this.rowEntityId]);}if(this.seedOnRelatedEntity!==""){this.sdataStore.directQuery={conditions:dojo.string.substitute(" ${0}.Id eq \"${1}\" ",[this.seedOnRelatedEntity,this.relatedEntityId])};}if(typeof this.gridOptions.contextualCondition==="function"){_9b={fn:this.gridOptions.contextualCondition,scope:this};this.sdataStore.directQuery=_52.extend(true,this.sdataStore.directQuery,_9b);}},render:function(){dojo.place(this.domNode,this.renderTo);},canShowLookup:function(){if(typeof this.gridOptions.contextualShow==="function"){return this.gridOptions.contextualShow();}return {result:true,reason:""};},showLookup:function(){var _9c="The lookup cannot be displayed because one or more conditions have not been met.",_9d=this.canShowLookup(),_9e=this,_9f,_a0,_a1="";if(typeof _9d!=="object"){Sage.UI.Dialogs.showError("The call to the function canShowLookup() returned an invalid result.");return;}if(typeof _9d.result==="boolean"&&_9d.result){_9f=(_9e.dialogHeight>0)?_9e.dialogHeight:450;_a0=(_9e.dialogWidth>0)?_9e.dialogWidth:700;_9e.lookupDialog=dijit.byId([_9e.id,"-Dialog"].join(""));if(!_9e.lookupDialog){_9e.lookupDialog=new _4d({title:_9e.dialogTitle,id:[_9e.id,"-Dialog"].join(""),style:["height:",_9f,"px;width:",_a0,"px;"].join(""),refreshOnShow:false,_onKey:this._onKey});_9e.dialogHeight=_9f;_9e.dialogWidth=_a0;if(_9e.isModal){_a1=_9e.cancelText;}else{_a1=_9e.closeText;}_9e.lookupDialog.set("content",_9e.dialogContent.apply({hideText:_a1,dialogButtonText:_9e.dialogButtonText,id:_9e.id,gridHeight:_9f-150}));_59.mixin(_9e.lookupDialog,new _58());_9e.lookupDialog.createHelpIconByTopic("findlookup");}else{_9e.dialogHeight=_9f;dojo.style([_9e.id,"-Dialog"].join(""),"height",_9f+"px");}_9e.lookupDialog.show();if(!this.isModal){dojo.destroy([_9e.id,"-Dialog_underlay"].join(""));}dojo.style([_9e.id,"-Dialog"].join(""),"top","60px");dojo.style([_9e.id,"-Dialog"].join(""),"left","300px");_9e.initDialog();}else{if(typeof _9d.reason==="string"&&_9d.reason.length!==0){_9c=_9d.reason;}Sage.UI.Dialogs.showError(_9c);}},doSelected:function(_a2){},_onKey:function(evt){var _a3=this,_a4=arguments;dojo.query("*",this.domNode).forEach(function(_a5,_a6,arr){if(_a5===evt.target){_a3.inherited(_a4);}});},destroy:function(){var _a7=dijit.byId([this.id,"-Dialog"].join(""));if(this.btnIcon){dojo.destroy(this.btnIcon);}dojo.disconnect(this._doSearchConnection);dojo.unsubscribe(this._addCondHandle);dojo.unsubscribe(this._removeCondHandle);if(this.conditionMgr){this.conditionMgr.destroy(false);}if(_a7){_a7.uninitialize();}this.inherited(arguments);}});return _60;});},"Sage/UI/EditorContainer":function(){define("Sage/UI/EditorContainer",["dojo/i18n","dijit/form/Button","dojo/_base/declare"],function(_a8,_a9,_aa){var _ab=_aa("Sage.UI.EditorContainer",null,{constructor:function(_ac){dojo.safeMixin(this,_ac);dojo.mixin(this,_a8.getLocalization("dijit","common"));},textCell:new Simplate("<td class=\"editor-text\">{%= $[0] %}</td>"),textCellWithLoading:new Simplate("<td class=\"editor-text\">{%= $.label %}<span style=\"display:none; float:right;\" id=\"{%= $.id %}_loading\">{%= $.loadingLabel %}</span></td>"),ctrlCell:new Simplate("<td class=\"editor-ctrl\">{%= $[0] %}</td>"),rowTpl:new Simplate("<tr>{%= $.cells %}</tr>"),btnRow:new Simplate("<tr><td></td><td id=\"{%= $.id %}_editor_tools\"><table width=\"100%\"><tr><td id=\"{%= $.id %}_custom_tools\" align=\"left\"></td><td align=\"right\">{%= $.btn %}</td></tr></table></td></tr>"),tableTpl:new Simplate(["<table class=\"editor-table\">","<tbody>{%= $.rows %}</tbody></table>"]),btnOk:new Simplate(["<button style=\"align:right;\" data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"{%= $.id %}_btnOK\" title=\"{%= $.buttonOk %}\">{%= $.buttonOk %}</button>"]),btnCancel:new Simplate(["<button style=\"align:right;\" data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"{%= $.id %}_btnCancel\" title=\"{%= $.buttonCancel %}\">{%= $.buttonCancel %}</button>"]),doTemplate:function(){var _ad=[];for(var p in this.rows){if(this.rows.hasOwnProperty(p)){var _ae=[];if(this.rows[p].loading){_ae.push(this.textCellWithLoading.apply({label:this.rows[p].title,id:this._pcid,loadingLabel:this.rows[p].loading}),this.ctrlCell.apply([this.rows[p].control]));}else{_ae.push(this.textCell.apply([this.rows[p].title]),this.ctrlCell.apply([this.rows[p].control]));}_ad.push(this.rowTpl.apply({cells:_ae.join("")}));}}var _af=[this.btnOk.apply({id:this._pcid,buttonOk:this.buttonOk}),this.btnCancel.apply({id:this._pcid,buttonCancel:this.buttonCancel})];_ad.push(this.btnRow.apply({btn:_af.join(""),id:this._pcid}));return this.tableTpl.apply({rows:_ad.join("")});}});return _ab;});},"Sage/QuickForms/Design/FormDesigner":function(){define("Sage/QuickForms/Design/FormDesigner",["dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_WidgetBase","./ControlDesignerRegistry","./RowDesigner","./ColumnDesigner","./Editors/FormBasicPropertyEditor","./Editors/FormAdvancedPropertyEditor","./Editors/FormUsagesPropertyEditor","dojo/i18n!./nls/FormDesigner"],function(_b0,_b1,_b2,_b3,_b4,_b5,_b6,_b7,_b8,_b9,_ba,_bb,_bc){return _b2("Sage.QuickForms.Design.FormDesigner",[_b5],{entry:null,editors:[_b9,_ba,_bb],helpTopicName:"Form_properties",_controls:null,_rows:null,_columns:null,displayNameText:"Form",constructor:function(){_b3.mixin(this,_bc);},uninitialize:function(){this.inherited(arguments);_b4.forEach(this._controls,function(_bd){_bd.destroyRecursive();});_b4.forEach(this._rows,function(_be){_be.destroyRecursive();});_b4.forEach(this._columns,function(_bf){_bf.destroyRecursive();});},set:function(_c0,_c1){var _c2=this.inherited(arguments);var _c3=this._getAttrNames(_c0),_c4=this[_c3.s];if(_b3.isFunction(_c4)){_b1.publish("/quickforms/design/designerModified",this,_c0,_c1,_c2,this);}return _c2;},_getNameAttr:function(){return _b3.getObject("entity.Name",false,this.entry);},_setNameAttr:function(_c5){_b3.setObject("entity.Name",_c5,this.entry);},_getDescriptionAttr:function(){return _b3.getObject("entity.Description",false,this.entry);},_setDescriptionAttr:function(_c6){_b3.setObject("entity.Description",_c6,this.entry);},_getActiveControlAttr:function(){return _b3.getObject("entity.ActiveControl",false,this.entry);},_setActiveControlAttr:function(_c7){_b3.setObject("entity.ActiveControl",_c7,this.entry);},_getUseEntityNameAsTitleAttr:function(){return _b3.getObject("entity.UseEntityNameAsTitle",false,this.entry);},_setUseEntityNameAsTitleAttr:function(_c8){_b3.setObject("entity.UseEntityNameAsTitle",_c8,this.entry);},_getEtagAttr:function(){return _b3.getObject("etag",false,this.entry);},_setEtagAttr:function(_c9){_b3.setObject("etag",_c9,this.entry);},_getRowsAttr:function(){return this._rows||(this._rows=this._createRowDesigners());},_getRowCountAttr:function(){return this.get("rows").length;},_createRowDesigners:function(){var raw=_b3.getObject("entity.Rows",false,this.entry),_ca=[];_b4.forEach(raw,function(row,_cb){var _cc=new _b7({entry:row,form:this,index:_cb});_ca.push(_cc);},this);return _ca;},_getColumnsAttr:function(){return this._columns||(this._columns=this._createColumnDesigners());},_getColumnCountAttr:function(){return this.get("columns").length;},_createColumnDesigners:function(){var raw=_b3.getObject("entity.Columns",false,this.entry),_cd=[];_b4.forEach(raw,function(_ce,_cf){var _d0=new _b8({entry:_ce,form:this,index:_cf});_cd.push(_d0);},this);return _cd;},_getControlsAttr:function(){return this._controls||(this._controls=this._createControlDesigners());},_createControlDesigners:function(){var raw=_b3.getObject("entity.Controls",false,this.entry),_d1=[];_b4.forEach(raw,function(_d2){var _d3=_b6.getDesignerFor(_d2);if(_d3){var _d4=new _d3({entry:_d2,form:this});_d1.push(_d4);}else{throw new Error("Could not find designer for type: \""+_d2["$type"]+"\".");}},this);return _d1;},addControl:function(_d5){var _d6=this.get("controls"),raw=_b3.getObject("entity.Controls",false,this.entry)||[];_d6.push(_d5);raw.push(_d5.get("entry"));_b3.setObject("entity.Controls",raw,this.entry);},addRow:function(_d7,at){var _d8=this.get("rows"),raw=_b3.getObject("entity.Rows",false,this.entry)||[];_d7.index=at||_d7.index||_d8.length;for(var i=_d7.index;i<_d8.length;i++){_d8[i].index+=1;}_d8.splice(_d7.index,0,_d7);raw.splice(_d7.index,0,_d7.get("entry"));_b3.setObject("entity.Rows",raw,this.entry);},removeRow:function(at){var _d9=this.get("rows"),raw=_b3.getObject("entity.Rows",false,this.entry)||[];for(var i=at;i<_d9.length;i++){_d9[i].index-=1;}_d9.splice(at,1);raw.splice(at,1);},addColumn:function(_da,at){var _db=this.get("columns"),raw=_b3.getObject("entity.Columns",false,this.entry)||[];_da.index=at||_da.index||_db.length;for(var i=_da.index;i<_db.length;i++){_db[i].index+=1;}_db.splice(_da.index,0,_da);raw.splice(_da.index,0,_da.get("entry"));_b3.setObject("entity.Columns",raw,this.entry);},removeColumn:function(at){var _dc=this.get("columns"),raw=_b3.getObject("entity.Columns",false,this.entry)||[];for(var i=at;i<_dc.length;i++){_dc[i].index-=1;}_dc.splice(at,1);raw.splice(at,1);},createUniqueId:function(_dd){var _de={},_df=_dd,_e0=1;_b4.forEach(this.get("controls"),function(_e1){var id=_e1.get("controlId");if(_df==id){do{_df=_dd+_e0++;}while(_de[_df]);}_de[id]=true;});return _df;}});});},"Sage/Utility/nls/Activity":function(){define("Sage/Utility/nls/Activity",["Sage/LanguageList","dojo/_base/lang"],function(_e2,_e3){var nls={root:{ToDo:"To-Do",PhoneCall:"Phone Call",Meeting:"Meeting",Personal:"Personal Activity",Literature:"Literature",Fax:"Fax",Letter:"Letter",Note:"Note",Email:"E-mail",Document:"Document",DatabaseChange:"Database Change",Event:"Event",ScheduledEvent:"Scheduled Event",Contact:"Contact",Lead:"Lead",New:"New",Change:"Change",Deleted:"Deleted",Confirm:"Confirm",Decline:"Decline",Unknown:"Unknown",Leader:"Leader",Complete:"Complete",confirmTypeChanged:"Changed",confirmTypeConfirmed:"Confirmed",confirmTypeDeleted:"Deleted"}};return _e3.mixin(_e2,nls);});},"Sage/QuickForms/Design/nls/DesignPanel":function(){define("Sage/QuickForms/Design/nls/DesignPanel",["Sage/LanguageList","dojo/_base/lang"],function(_e4,_e5){var nls={root:{cultureListText:{iv:"[invariant]",de_DE:"de-DE",fr_FR:"fr-FR",it_IT:"it-IT",ru_RU:"ru-RU"},helpText:"Help",saveText:"Save",cultureText:"Culture:",loadingText:"Loading...",savingText:"Saving...",saveErrorText:"An error occurred saving the form.",readErrorText:"Could not load the requested form.",cultureReloadConfirmText:"You have unsaved changes.  Are you sure you want to reload the form with a different culture?"}};return _e5.mixin(_e4,nls);});},"Sage/UI/Dashboard/ChartingWidget":function(){define("Sage/UI/Dashboard/ChartingWidget",["Sage/UI/Dashboard/BaseWidget","Sage/Utility","dojo/i18n","dojo/_base/declare","dojo/i18n!./nls/WidgetDefinition","dojo/number"],function(_e6,_e7,_e8,_e9){var _ea=_e9("Sage.UI.Dashboard.ChartingWidget",[_e6],{_chartTpl:new Simplate(["<table border=\"0\" style=\"width:100%; height:100%\">","<tr>","<td id=\"{%= $.id %}_chart\" style=\"width:{%= $.chartWidth %}\"></td>","<td style=\"display:{%= $.legendDisplay %};font-size:10px;\"><div class=\"dojoxGridScrollbox\" style=\"height:{%= $.chartHeight %};overflow-y:auto;\"><span id=\"{%= $.id %}_legend\"></span></div></td>","</tr>","</table>"]),_noDataTable:new Simplate(["<table border=\"0\" style=\"width:100%; height:100%\">","<tr>","<td>{%= $.NoDataMessage %}</td>","</tr>","</table>"]),_baseEditor:function(_eb,_ec){var _ed=this._getEditorString(_ec,_eb.id);var _ee=_e7.fragger(_ed);var _ef=_e7.fragToDijits(_ee);_eb.addChild(_ef[0],0);if(_eb.isNew){_eb._editorAdded();}},_getPaneSize:function(){return {w:dojo.style(this.pane,"width"),h:dojo.style(this.pane,"height")};},html:function(_f0,_f1){this.paneId=_f0.id+"_pane";this.parentCellId=_f0.id;this.pane=dojo.byId(this.paneId);this.chartId=_f0.id+"_chart";this.legendId=_f0.id+"_legend";this.options=_f0.widgetOptions;this.showLegend=this.options.showLegend==="true";this.showLabels=this.options.showLabels==="true";var _f2=this._getPaneSize();this.paneWidth=_f2.w;var h=Math.floor(_f2.w*this.prefHeight)+"px";dojo.style(this.pane,"height",h);if(_f1){this.values=[];this._labels=[];if(this.name==="Pie Chart"){this.cumulativeValues=0;for(var i=0;i<_f1.total_count;i++){_f1.items[i].value=Math.max(0,_f1.items[i].value);this.cumulativeValues+=Math.floor(_f1.items[i].value);}}for(var i=0;i<_f1.total_count;i++){var _f3=_f1.items[i];var _f4=Math.floor(_f3.value);var tmp={};if(this.showLabels){tmp.text=this.options.truncLabels==="true"?this.truncate(_f3.displayName,this.options.truncNum||7):_f3.displayName;}if(this.name==="Pie Chart"){if(_f4<=0){continue;}tmp.y=_f4;var _f5=0;if(this.cumulativeValues>0){_f5=_f4/this.cumulativeValues*100;}tmp.tooltip=_f3.displayName+", "+dojo.number.format(_f5,{places:2})+"%";var _f6=_f4;if(_f6>=1000000){_f6=dojo.number.format((_f6/1000000),{places:1})+"M";}else{_f6=dojo.number.format(_f4);}tmp.legend="<label>"+_f3.displayName+"</label><label style=\"float:right; margin-left:10px; margin-top:2px;\">"+_f6+"</label>";}else{var _f6=_f4;if(_f6>=1000000){_f6=dojo.number.format((_f6/1000000),{places:1})+"M";}else{_f6=dojo.number.format(_f4);}tmp.value=i+1;tmp.y=_f4;tmp.tooltip=_f3.displayName+", "+_f6;}this._labels.push(tmp);this.values.push(_f4);}if(_f1.total_count>0){_f0.set("content",this._chartTpl.apply({id:_f0.id,chartWidth:_f0.chartWidth,legendDisplay:_f0.legendDisplay,chartHeight:h}));this._doChart(_f0,_f1);}else{var _f7=Sage.UI.DataStore.Dashboard.WidgetResources;dojo.style(this.pane,"height","20px");_f0.set("content",this._noDataTable.apply({NoDataMessage:_f7.noDataToDisplay}));this.editor(_f0);}}else{var _f7=Sage.UI.DataStore.Dashboard.WidgetResources;dojo.style(this.pane,"height","20px");_f0.set("content",this._noDataTable.apply({NoDataMessage:_f7.noDataToDisplay}));this.editor(_f0);}this._addFooter();},_addFooter:function(){var _f8=_e8.getLocalization("Sage.UI.Dashboard","WidgetDefinition");var _f9=["#",this.parentCellId," .dijitTitlePaneContentOuter"].join("");if(this.options.groupname&&this.options.resource){var _fa=String.format("<div class=\"dijitTitlePaneTitle\" id=\"{0}\" style=\"border:0;font-weight:normal;\">",this.parentCellId+"_footer");if(this.options.entity!=="Sage.Entity.Interfaces.IHistory"&&this.options.groupname&&this.options.resource){_fa+=String.format("<span style=\"float:left; margin-top:3px;\"><a href=\"{0}.aspx?modeid=list&gname={1}\">{2}</a></span>",this.options.resource,this.options.groupname,_f8.viewGroupText||"View Group");}_fa+="<span style=\"float:right; margin-top:3px;\">"+dojo.date.locale.format(new Date(),{fullYear:true})+"</span>";_fa+="</div>";var _fb=dojo.byId(this.parentCellId+"_footer");if(!_fb){dojo.place(_fa,dojo.query(_f9)[0],"last");}else{dojo.place(_fa,_fb,"replace");}}},truncate:function(str,n){return str.length>n?str.slice(0,n)+"...":str;}});return _ea;});},"Sage/Data/WritableSDataStore":function(){define("Sage/Data/WritableSDataStore",["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/_base/array","dojo/_base/lang"],function(_fc,_fd,_fe,_ff,lang){var _100=_fe("Sage.Data.WritableSDataStore",_fc,{newItemParentReferenceProperty:false,constructor:function(o){this.features["dojo.data.api.Write"]=true;this.features["dojo.data.api.Notification"]=true;this.dirtyDataCache={isDirty:false};this.singleResourceRequest=null;dojo.connect(this,"clearCache",this,this._clearCache);this.onComplete=o.onComplete;},getSingleResourceRequest:function(key){this.verifyService();if(this.singleResourceRequest===null){this.singleResourceRequest=new Sage.SData.Client.SDataSingleResourceRequest(this.service);this.singleResourceRequest.setResourceKind(this.resourceKind);if(this.select&&this.select.length>0){this.singleResourceRequest.setQueryArg("select",this.select.join(","));}if(this.include&&this.include.length>0){this.singleResourceRequest.setQueryArg("include",this.include.join(","));}}if(key){this.singleResourceRequest.setResourceSelector("'"+key+"'");}return this.singleResourceRequest;},onSuccess:function(_101,feed){if(_101.onBegin){_101.onBegin.call(_101.scope||this,feed.$totalResults,_101);}if(this.onComplete){this.onComplete.call(_101.scope||this,feed.$resources,_101);}if(_101.onComplete){_101.onComplete.call(_101.scope||this,feed.$resources,_101);}this.addToCache(_101,feed);},_clearCache:function(){this.clearDirtyDataCache();},clearDirtyDataCache:function(){for(var key in this.dirtyDataCache){if(key!=="isDirty"){delete this.dirtyDataCache[key];}}this.dirtyDataCache.isDirty=false;},isItem:function(_102){var id=this.getIdentity(_102);if(id&&id!==""){return this.dataCache.hasOwnProperty(id);}return false;},isItemLoaded:function(_103){return this.isItem(_103);},loadItem:function(_104){if(!this.isItem(_104.item)){throw new Error("Unable to load "+_104.item);}},getValues:function(item,_105){if(this.isItem(item)&&(typeof _105==="string")){return (item[_105]||[]).slice(0);}return [];},hasAttribute:function(item,_106){if(this.isItem(item)&&(typeof _106==="string")){return _106 in item;}return false;},close:function(){this.clearCache();},deleteItem:function(item,_107){var _108={};_108.scope=_107||this;_108.ignoreETag=true;var _109=this.getSingleResourceRequest(this.getIdentity(item));if(_107&&typeof _107.onResponse==="function"){_108.success=_107.onResponse;_108.aborted=_107.onResponse;_108.failure=_107.onResponse;}_109["delete"](item,_108);},isDirty:function(item){if(item){var id=this.getIdentity(item);if(id&&id!==""){return this.dirtyDataCache.hasOwnPropery(id);}}return this.dirtyDataCache.isDirty;},_checkPageExitWarningMessage:function(){var _10a=true;if(this.dirtyDataCache.isDirty){var _10b=Sage.Services.getService("ClientBindingManagerService");_10a=confirm(_10b._PageExitWarningMessage);}return _10a;},newItem:function(args){if(!this._checkPageExitWarningMessage()){return;}var _10c=this.createTemplateRequest();if(_10c){_10c.read({success:function(_10d){this._newItemCreated(args,_10d);this.onNew(_10d);},failure:this.requestTemplateFailure,scope:this});}},_newItemCreated:function(_10e,_10f){if(this.newItemParentReferenceProperty){var _110=Sage.Utility.getCurrentEntityId();if(_10f.hasOwnProperty(this.newItemParentReferenceProperty)&&_110){_10f[this.newItemParentReferenceProperty]={"$key":_110};}}if((_10e)&&(_10e.onComplete)&&(typeof _10e.onComplete==="function")){_10e.onComplete.call(_10e.scope||this,_10f);}},createTemplateRequest:function(){var _111=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);if((this.resourceKind)&&(this.resourceKind!=="")){_111.setResourceKind(this.resourceKind);}return _111;},requestTemplateFailure:function(){},saveNewEntity:function(_112,_113,_114,_115){var _116=new Sage.SData.Client.SDataSingleResourceRequest(this.service);if(_116){if((this.resourceKind)&&(this.resourceKind!=="")){_116.setResourceKind(this.resourceKind);}_116.create(_112,{success:_113||function(_117){if(typeof console!=="undefined"){}},failure:_114||function(_118,o){if(typeof console!=="undefined"){}},scope:_115||this});}},createItem:function(item,_119){var _11a=new Sage.SData.Client.SDataSingleResourceRequest(this.service);if(_11a){if((this.resourceKind)&&(this.resourceKind!=="")){_11a.setResourceKind(this.resourceKind);}var _11b={};_11b.scope=_119||this;_11b.scope.store=this;var _11c=function(_11d){if(typeof console!=="undefined"){}if(typeof this.onResponse==="function"){this.onResponse.call(this,_11d);}};_11b.success=_11c;var _11e=function(_11f,o){if(typeof this.onResponse==="function"){this.onResponse.call(this,_11f,o);}else{if(typeof console!=="undefined"&&_11f&&typeof _11f!=="undefined"&&_11f.status){}}};_11b.failure=_11e;_11b.aborted=_11e;_11a.create(item,_11b);}},revert:function(){this.clearDirtyDataCache();this.onDataReset();},save:function(_120){var _121,_122;if(!this.dirtyDataCache.isDirty){if(_120&&typeof _120.onComplete==="function"){_120.onComplete.call(_120);}return;}for(var key in this.dirtyDataCache){if(key!=="isDirty"){_121=this.dirtyDataCache[key];if(this.isItem(_121)){_122=this.getSingleResourceRequest(key);var _123={};_123.scope=_120||this;_123.scope.store=this;if(!this.isSecurityManager){_123.ignoreETag=true;}var _124=function(_125){if(this.store.dataCache[_125.$key]){this.store.dataCache[_125.$key].$etag=_125.$etag;}if(typeof this.onResponse==="function"){this.onResponse.call(this,_125);}};_123.success=_124;var _126=function(_127,o){if(typeof console!=="undefined"){if(_127&&typeof _127!=="undefined"&&_127.responseText){var _128=dojo.fromJson(_127.responseText);if(_128&&typeof _128!=="undefined"&&_128.$key){var obj=this.store.dataCache[_128.$key];if(obj&&obj.$etag){}}}}if(typeof this.onResponse==="function"){this.onResponse.call(this,_127,o);}};_123.failure=_126;_123.aborted=_126;_122.update(_121,_123);}delete this.dirtyDataCache[key];}}this.dirtyDataCache.isDirty=false;if(_120&&typeof _120.onResponse!=="function"&&typeof _120.onComplete==="function"){_120.onComplete.call(_120);}},setValue:function(item,_129,_12a){var _12b=this.getValue(item,_129,"");_fd.setValue(item,_129,_12a);this.onSet(item,_129,_12b,_12a);if(_12b!=_12a){this.dirtyDataCache[this.getIdentity(item)]=item;this.dirtyDataCache.isDirty=true;}return true;},setValues:function(item,_12c,_12d){_ff.forEach(_12d,lang.hitch(this,function(val){this.setValue(item,_12c,val);}));},unsetAttribute:function(item,_12e){alert("not implemented - unsetAttribute");},onSet:function(item,_12f,_130,_131){},onNew:function(_132){},onDelete:function(_133){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(_134,_135){},onItemNotSaved:function(_136,_137){}});return _100;});},"Sage/MainView/Opportunity/OpportunityStatistics":function(){require({cache:{"url:Sage/MainView/Opportunity/templates/OpportunityStatistics.html":" [\r\n    '<div>',\r\n        '<div data-dojo-type=\"dijit.Dialog\" id=\"{%= $.id%}_dlgOpportunityStatistics\" title=\"{%= $.opportunityStatistics_Caption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">',\r\n            '<div dojoAttachPoint=\"loadingContainer\">',\r\n                '<br />',\r\n                '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingMessge %}</label>',\r\n                '<br />',\r\n                '<br />',\r\n            '</div>',\r\n            '<table cellspacing=\"20\" dojoAttachPoint=\"statisticsContentsContainer\" class=\"display-none\">',\r\n                '<tr>',\r\n                    '<td >',\r\n                        '<label>{%= $.opportunityCount %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"opportunityCount\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.salesPotentialTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"salesPotential\" dojoAttachPoint=\"salesPotentialTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"salesPotentialAverage\" dojoAttachPoint=\"salesPotentialAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.weightedPotentialTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"weightedPotential\" dojoAttachPoint=\"weightedPotentialTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"weightedPotentialAverage\" dojoAttachPoint=\"weightedPotentialAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.averageCloseProbability %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div dojoType=\"Sage.UI.Controls.Numeric\" constraints=\"{ places: 2, maxPlaces: 2, type: \\'percent\\' }\" dojoAttachPoint=\"closeProbability_Container\" readonly=\"readonly\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.actualAmountTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"actualAmount\" dojoAttachPoint=\"actualAmountTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"actualAmountAverage\" dojoAttachPoint=\"actualAmountAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.averageDaysOpen %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"daysOpen_Container\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.rangeEstClose %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"rangeEstClose_Container\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n            '<div class=\"button-bar alignright\">',\r\n                '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" type=\"button\" dojoAttachEvent=\"onClick:_close\">{%= $.btnClose_Caption %}</button>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>'\r\n]"}});define("Sage/MainView/Opportunity/OpportunityStatistics",["dojo/_base/declare","dojo/i18n!./nls/OpportunityStatistics","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","Sage/UI/Controls/Currency","Sage/UI/Controls/Numeric","Sage/Data/SDataServiceRegistry","dojo/date/locale","Sage/Utility","dojo/text!./templates/OpportunityStatistics.html","dojo/html","dijit/form/Form","dijit/form/Select","dijit/form/Textarea","dijit/layout/ContentPane","dojox/layout/TableContainer"],function(_138,_139,_13a,_13b,_13c,_13d,_13e,_13f,_140,_141,_142,_143,_144,_145,html){var _146=_138("Sage.MainView.Opportunity.OpportunityStatistics",[_13d,_13e],{_dialog:false,_selectionInfo:false,selectedCount:0,resource:"",currencyDecimalDigits:2,currencyCode:"USD",locale:Sys.CultureInfo.CurrentCulture.name,isMultiCurrencyEnabled:false,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_145)),constructor:function(_147){this._selectionInfo=_147;this.currencyDecimalDigits=Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalDigits;this.isMultiCurrencyEnabled=isMultiCurrencyEnabled();dojo.mixin(this,_139);},show:function(){this._dialog.show();if(!this._dialog.helpIcon){_13b.mixin(this._dialog,new _13a());this._dialog.createHelpIconByTopic("opportunitystatistics");}var _148=_142.getSDataService("mashups");var _149=new Sage.SData.Client.SDataNamedQueryRequest(_148);_149.setApplicationName("$app");_149.setResourceKind("mashups");_149.uri.setCollectionPredicate("'OpportunityStatistics'");_149.setQueryName("execute");_149.setQueryArg("_resultName","OpportunityStatisticsMashup");_149.setQueryArg("_selectionKey",this._selectionInfo.key);var self=this;_149.read({success:function(data){self.resource=data.$resources[0];self.selectedCount=self.resource.RecordCount;self.currencyCode=self.resource.CurrencyCode;html.set(self.opportunityCount,self.selectedCount);self.createControls();var _14a=self.resource.DaysOpened;if(self.selectedCount>1){_14a=Math.round(self.resource.DaysOpened/self.selectedCount);}html.set(self.daysOpen_Container,_14a.toString());dojo.addClass(self.loadingContainer,"display-none");dojo.removeClass(self.statisticsContentsContainer,"display-none");},failure:function(_14b,_14c,_14d){_13f.showError(self.errorRequestingStatistics);}});},formatCurrency:function(val){val=val.replace(" ","","gi");val=val.replace(Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalSeparator,".","gi");return val;},createControls:function(){this.createSalesPotential();this.createCloseProbability();this.createWeightedPotential();this.createActualAmount();this.createRangeEstClose();},createSalesPotential:function(){this.salesPotentialTotal=new _140({id:"cur_SalesPotentialTotal",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.formatCurrency(this.resource.SalesPotential)});dojo.place(this.salesPotentialTotal.domNode,this.salesPotentialTotal_Container,"replace");this.salesPotentialAverage=new _140({id:"cur_SalesPotentialAverage",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.formatCurrency(this.resource.SalesPotential)/this.selectedCount});dojo.place(this.salesPotentialAverage.domNode,this.salesPotentialAverage_Container,"replace");},createCloseProbability:function(){this.closeProbability=new _141({id:"num_CloseProbability",constraints:{places:2},formatType:"percent",disabled:true,value:this.resource.CloseProbability/this.selectedCount});dojo.place(this.closeProbability.domNode,this.closeProbability_Container.domNode,"only");this.closeProbability_Container.value=this.resource.CloseProbability/this.selectedCount;},createWeightedPotential:function(){this.weightedPotentialTotal=new _140({id:"cur_WeightedPotentialTotal",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.resource.CloseProbability});dojo.place(this.weightedPotentialTotal.domNode,this.weightedPotentialTotal_Container,"only");this.weightedPotentialAverage=new _140({id:"cur_WeightedPotentialAverage",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.resource.CloseProbability/this.selectedCount});dojo.place(this.weightedPotentialAverage.domNode,this.weightedPotentialAverage_Container,"only");},createActualAmount:function(){this.actualAmountTotal=new _140({id:"cur_ActualAmount",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.formatCurrency(this.resource.ActualAmount)});dojo.place(this.actualAmountTotal.domNode,this.actualAmountTotal_Container,"only");this.actualAmountAverage=new _140({id:"cur_ActualAmountAverage",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.formatCurrency(this.resource.ActualAmount)/this.selectedCount});dojo.place(this.actualAmountAverage.domNode,this.actualAmountAverage_Container,"only");},createRangeEstClose:function(){var _14e=_143.format(_144.Convert.toDateFromString(this.resource.MinDateEstClosed,true),{fullYear:true,selector:"date"});var _14f=_143.format(_144.Convert.toDateFromString(this.resource.MaxDateEstClosed,true),{fullYear:true,selector:"date"});html.set(this.rangeEstClose_Container,dojo.string.substitute("${0} - ${1}",[_14e,_14f]));},_close:function(){this._dialog.hide();this._dialog.destroyRecursive();this.destroyRecursive();this.salesPotentialTotal.destroy();this.salesPotentialAverage.destroy();this.closeProbability.destroy();this.weightedPotentialTotal.destroy();this.weightedPotentialAverage.destroy();this.actualAmountTotal.destroy();this.actualAmountAverage.destroy();}});return _146;});},"Sage/UI/Columns/TextBox":function(){define("Sage/UI/Columns/TextBox",["Sage/UI/Controls/TextBox","Sage/UI/Columns/Cell","dojo/_base/declare"],function(_150,Cell,_151){var _152=_151("Sage.UI.Columns.TextBox",Cell,{defaultValue:"",widgetClass:_150,getWidgetProps:function(_153){var _154=this._getControlId();this.defaultValue=_153;return dojo.mixin({},this.widgetProps||{},{value:"",maxLength:this.maxLength,regExp:this.regExp,shouldPublishMarkDirty:false});},getValue:function(_155){var _156=this.widget.focusNode.value;var _157=dijit.byId(this.widget.focusNode.id);if(!_157.isValid()||(typeof _156==="undefined")||(_156==="")){_157.undo();_156=this.defaultValue;}else{defaultValue=_156;}return _156;}});return _152;});},"Sage/UI/widgetEditorLookup":function(){define("Sage/UI/widgetEditorLookup",["dijit/form/ValidationTextBox","dijit/form/RadioButton","dijit/form/ComboBox","dojo/data/ItemFileReadStore","dijit/form/NumberTextBox"],function(_158,_159,_15a,_15b,_15c){var _15d={};_15d.txtField=function(_15e){var _15f=new Simplate(["<div data-dojo-type=\"dijit.form.ValidationTextBox\" id=\"{%= $.id %}\""," regExp=\"[^<>;]*\" invalidMessage=\"{%= $.invMess %}\" style=\"width:100%;\"></div>"]);return _15f.apply(_15e);};_15d.rdoGroup=function(_160){var _161=new Simplate(["<table width=\"100%\"><tr><td align=\"left\" width=\"50%\"><input type=\"radio\" id=\"{%= $.idOne %}\" data-dojo-type=\"dijit.form.RadioButton\""," value=\"{%= $.valOne %}\" name=\"{%= $.name %}\"/><label for=\"${idOne}\">{%= $.lblOne %}","</label></td><td align=\"left\" width=\"50%\"><input type=\"radio\" id=\"{%= $.idTwo %}\"data-dojo-type=\"dijit.form.RadioButton\""," value=\"{%= $.valTwo %}\" name=\"{%= $.name %}\"/><label for=\"{%= $.idTwo %}\">{%= $.lblTwo %}","</label></td></tr></table>"]);return _161.apply(_160);};_15d.comboField=function(_162){var _163=new Simplate(["<input data-dojo-type=\"dijit.form.ComboBox\" id=\"{%= $.id %}\" style=\"width:100%;\""," required=\"true\" searchAttr=\"{%= $.searchAttr %}\"/>"]);return _163.apply(_162);};_15d.numberField=function(_164){var _165=new Simplate(["<input data-dojo-type=\"dijit.form.NumberTextBox\" id=\"{%= $.id %}\" style=\"width:100%;\""," invalidMessage=\"{%= $.invMess %}\"/>"]);return _165.apply(_164);};_15d.wholeNumberField=function(_166){var _167=new Simplate(["<input data-dojo-type=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}\""," invalidMessage=\"{%= $.invMess %}\" constraints=\"{places:0}\" style=\"width:100%;\" formatType=\"Number\"/>"]);return _167.apply(_166);};_15d._myEditRow=function(_168){var _169=new Simplate(["<div data-dojo-type=\"{%= $.type %}\" id=\"{%= $.id %}\" shouldPublishMarkDirty=\"false\" style=\"height:{%= $.height %};width:100%;\" ></div>"]);return _169.apply(_168);};Sage.UI.widgetEditorLookup=_15d;return _15d;});},"Sage/_Templated":function(){define("Sage/_Templated",["dojo/dom-construct","dojo/_base/declare","dojo/query","dojo/parser","dojo/_base/array","dojo/_base/lang","dijit/registry","dijit/_base/wai"],function(_16a,_16b,_16c,_16d,_16e,lang,_16f,wai){var _170=_16b("Sage._Templated",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[];},buildRendering:function(){if(this.widgetTemplate&&this.contentTemplate){throw new Error("Both \"widgetTemplate\" and \"contentTemplate\" cannot be specified at the same time.");}if(this.contentTemplate){this.inherited(arguments);var root=_16a.toDom(["<div>",this.contentTemplate.apply(this),"</div>"].join(""));this._attachTemplateNodes(root);}else{if(this.widgetTemplate){var root=_16a.toDom(this.widgetTemplate.apply(this));if(root.nodeType!==1){throw new Error("Invalid template.");}this.domNode=root;this._attachTemplateNodes(root);}else{return;}}if(this.widgetsInTemplate){var _171=_16d.parse(root,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"});this._startupWidgets=this._startupWidgets||[];this._startupWidgets=this._startupWidgets.concat(_171);this._supportingWidgets=this._supportingWidgets||[];this._supportingWidgets=this._supportingWidgets.concat(_16f.findWidgets(root));this._attachTemplateNodes(_171,function(n,p){return n[p];});}if(this.contentTemplate){_16c("> *",root).place(this.domNode);}else{this._fillContent(this.srcNodeRef);}},_fillContent:function(_172){var dest,frag,_173;dest=this.containerNode;frag=document.createDocumentFragment();_173=false;if(_172&&dest){while(_172.hasChildNodes()){frag.appendChild(_172.firstChild);_173=true;}if(_173){dest.appendChild(frag);}}},_attachTemplateNodes:function(_174,_175){_175=_175||function(n,p){return n.getAttribute(p);};var _176=(_174 instanceof Array)?_174:(_174.all||_174.getElementsByTagName("*"));var x=(_174 instanceof Array)?0:-1;for(;x<_176.length;x++){var _177=(x==-1)?_174:_176[x];if(this.widgetsInTemplate&&(_175(_177,"dojoType")||_175(_177,"data-dojo-type"))){continue;}var _178=_175(_177,"dojoAttachPoint")||_175(_177,"data-dojo-attach-point");if(_178){var _179,_17a=_178.split(/\s*,\s*/);while((_179=_17a.shift())){if(this[_179] instanceof Array){this[_179].push(_177);}else{this[_179]=_177;}this._attachPoints.push(_179);}}var _17b=_175(_177,"dojoAttachEvent")||_175(_177,"data-dojo-attach-event");if(_17b){var _17c,_17d=_17b.split(/\s*,\s*/);var trim=lang.trim;while((_17c=_17d.shift())){if(_17c){var _17e=null;if(_17c.indexOf(":")!=-1){var _17f=_17c.split(":");_17c=trim(_17f[0]);_17e=trim(_17f[1]);}else{_17c=trim(_17c);}if(!_17e){_17e=_17c;}this._attachEvents.push(this.connect(_177,_17c,_17e));}}}var role=_175(_177,"waiRole");if(role){wai.setWaiRole(_177,role);}var _180=_175(_177,"waiState");if(_180){_16e.forEach(_180.split(/\s*,\s*/),function(_181){if(_181.indexOf("-")!=-1){var pair=_181.split("-");wai.setWaiState(_177,pair[0],pair[1]);}});}}},startup:function(){_16e.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){_16e.forEach(this._attachPoints,function(_182){delete this[_182];},this);this._attachPoints=[];_16e.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});return _170;});},"Sage/UI/nls/TimelessActivitiesPane":function(){define("Sage/UI/nls/TimelessActivitiesPane",["Sage/LanguageList","dojo/_base/lang"],function(_183,lang){var nls={root:{header_complete:"Complete",header_type:"Type",header_contact:"Name",header_regarding:"Regarding",tooltip_type:"Type",tooltip_contact:"Contact",tooltip_account:"Account",tooltip_lead:"Lead",tooltip_phone:"Phone",tooltip_leader:"Leader",tooltip_regarding:"Regarding",tooltip_location:"Location",tooltip_notes:"Notes",tooltip_company:"Company"}};return lang.mixin(_183,nls);});},"Sage/UI/MenuItem":function(){require({cache:{"url:Sage/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-event=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n        <div class=\"dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}\" data-dojo-attach-point=\"iconNodeSprite\"></div>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n\n"}});define("Sage/UI/MenuItem",["dijit/MenuItem","dijit/_Widget","dojo/dom-style","dojo/_base/declare","dojo/text!../templates/MenuItem.html"],function(_184,_185,_186,_187,_188){var _189=_187("Sage.UI.MenuItem",_184,{templateString:_188,iconClass:"",_setIconClassAttr:{node:"iconNode",type:"class"},label:"",_setLabelAttr:{node:"containerNode",type:"innerHTML"},icon:"",_setIconAttr:{node:"iconNode",type:"attribute",attribute:"src"},imageClass:"noIcon",iconStyle:"",_setIconStyleAttr:{node:"iconNode",type:"style"},ref:"",postMixInProperties:function(){if(this.hasImageClass()&&this.hasIcon()){this.icon=this._blankGif;}else{this.icon=this.icon||this._blankGif;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.hasImageClass()){this.set("icon",this._blankGif);_186.set(this.iconNode,"display","none");}else{_186.set(this.iconNodeSprite,"display","none");}},hasImageClass:function(){if(this.imageClass&&this.imageClass!=="noIcon"){return true;}return false;},hasIcon:function(){if(this.icon&&this.icon!==this._blankGif){return true;}return false;},destroy:function(){this._setSelected=function(){};this.inherited(arguments);}});return _189;});},"Sage/MainView/ActivityMgr/nls/ActivityEditor":function(){define("Sage/MainView/ActivityMgr/nls/ActivityEditor",["Sage/LanguageList","dojo/_base/lang"],function(_18a,lang){var nls={root:{labelWidth:"100",tabNameGeneralText:"General",tabNameAvailabilityText:"Availability",tabNameAssociationsText:"Associations",tabNameRecurringText:"Recurring",tabNameAttachmentsText:"Attachments",tabNameNotesText:"Notes",scheduleText:"Schedule",startTimeText:"Start Time",timeLessText:"Timeless",alarmText:"Alarm",durationText:"Duration",rolloverText:"Auto rollover to next day",contactText:"Contact",accountText:"Account",leadText:"Lead",opportunityText:"Opportunity",ticketText:"Ticket",companyText:"Company",regardingText:"Regarding",notesText:"Notes",priorityText:"Priority",leaderText:"Leader",categoryText:"Category",locationText:"Location",dialogHeaderFormatText:"${actionText} ${activityType} - ${description}",scheduledByFormatText:"Scheduled by ${user} on ${date}",completeScheduledByFormatText:"Scheduled by ${user} on ${date} originally for ${startDate}",newConfirmationHeaderFormatText:"Confirm ${activityType} Scheduled by ${user}",otherConfimationHeaderFormatText:"${activityType} ${actionText} by ${user}",acceptedText:"Accepted",declinedText:"Declined",scheduledText:"Scheduled",updatedText:"Updated",deletedText:"Deleted",cancelText:"Cancel",okText:"OK",completeText:"Complete",completeBtnText:"Complete...",completedText:"Completed",deleteText:"Delete",lookupActText:"Lookup Account",lookupContactText:"Lookup Contact",lookupOpportunityText:"Lookup Opportunity",lookupTicketText:"Lookup Ticket",lookupLeadText:"Lookup Lead",lookupLeaderText:"Lookup Leader",lookupResourcesText:"Add Members and Resources",addResourceText:"Add",mainPhoneText:"Main Phone",typeText:"Type",subTypeText:"Sub-Type",nameText:"Name",cityText:"City",stateText:"State",workphoneText:"Work Phone",emailText:"Email",acctMgrText:"Acct Manager",descriptionText:"Description",stageText:"Stage",statusText:"Status",ownerText:"Owner",ticketNumberText:"Ticket Number",phoneText:"Phone",urgencyText:"Urgency",areaText:"Area",recurringText:"Recurring",resultText:"Result",followupText:"Follow-up",noneText:"None",carryOverAttachmentsText:"Carry Over Attachments",carryOverNotesText:"Carry Over Notes",asScheduledText:"As Scheduled",nowText:"Now",responseText:"Response",acceptText:"Accept",declineText:"Decline",deleteConfText:"Delete Confirmation",closeText:"Close",leadFullNameText:"Name",postalText:"Postal Code",failedLoadingDataMsg:"An error occurred loading data.",removeText:"Remove",noText:"No",yesText:"Yes",areYouSureText:"You are about to permanently delete this record.",couldNotSaveErrorText:"We're sorry, the activity could not be saved because an error occurred.",couldNotDeleteErrorText:"We're sorry, the activity could not be deleted because an error occurred.",couldNotCompleteErrorText:"We're sorry, the activity could not be completed because an error occurred.",scheduleFollowUpErrorText:"The follow up could not be scheduled because the HistoryId could not be determined."}};return lang.mixin(_18a,nls);});},"Sage/QuickForms/Design/DataSourceDesigner":function(){define("Sage/QuickForms/Design/DataSourceDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/NonVisibleAdvancedPropertyEditor","dojo/i18n!./nls/DesignPanel"],function(_18b,_18c,lang,_18d,_18e,_18f,_190,_191,_192){return _18b("Sage.QuickForms.Design.DataSourceDesigner",[_18e,_18f,_18d,_190],{designSupport:{visible:false},editors:[_191],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div data-dojo-attach-point=\"containerNode\">","<span data-dojo-attach-point=\"designCaptionNode\"></span>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},helpTopicName:"Data_Source_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFDataSource, Sage.Platform.QuickForms.QFControls",displayNameText:"Data Source",constructor:function(){lang.mixin(this,_192);},_setControlIdAttr:function(_193){this.inherited(arguments);this.set("designCaption",_193);},startup:function(){this.inherited(arguments);this.set("designCaption",this.get("controlId"));}});});},"Sage/Services/main":function(){define("Sage/Services/main",["Sage/Services/_ServiceMixin","Sage/Services/ActivityAction","Sage/Services/UserOptions","Sage/Services/ActivityActionProcessor","Sage/Services/ActivityService","Sage/Services/CalendarSecurityService","Sage/Services/ClientBindingManagerService","Sage/Services/ClientContextService","Sage/Services/ClientEntityContext","Sage/Services/RoleSecurityService","Sage/Services/SelectionContextService","Sage/Services/SystemOptions"],function(){});},"Sage/UI/Columns/Numeric":function(){define("Sage/UI/Columns/Numeric",["Sage/UI/Controls/Numeric","dojox/grid/cells/dijit","dojo/_base/declare"],function(_194,_195,_196){var _197=_196("Sage.UI.Columns.Numeric",dojox.grid.cells._Widget,{widgetClass:_194,isWholeNumberPercent:false,getWidgetProps:function(_198){var _199=this.getControlId();return dojo.mixin({},this.widgetProps||{},{constraints:this.constraints,value:_198,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field,name:this.name,sortable:this.sortable,editable:this.editable,required:this.required,formatType:this.formatType,textAlign:this.getAlignment()});},getAlignment:function(){var _19a="right";_19a=(this.cellClasses.indexOf("aligncenter")>-1)?"center":_19a;_19a=(this.cellClasses.indexOf("alignleft")>-1)?"left":_19a;return _19a;},formatNode:function(_19b,_19c,_19d){if(!this.widgetClass){return _19c;}var _19e=dijit.byId(this.getControlId());if(!_19e){this.widget=this.createWidget.apply(this,arguments);}else{this.widget=_19e;if(_19e.value!==_19c||this.widget.focusNode.value!==_19c){this.widget.focusNode.attr("value",_19c);}this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(_19d);this.grid.scroller.rowHeightChanged(_19d,true);this.focus();if(this.formatType=="Percent"){this.widget.focusNode.constraints["type"]="percent";this.widget.focusNode.focus();}return undefined;},formatter:function(_19f,_1a0){var vals=[];if(_19f==0||_19f==null){return "";}if(this.isWholeNumberPercent&&this.formatType==="Percent"){_19f=Math.round(_19f*100)/10000;}if((this.displayFormatString)&&(this.displayFormatString!=="")){if(this.displayFields.length<1){vals.push[_19f];}for(var idx=0;idx<this.displayFields.length;idx++){vals.push(Sage.Utility.getValue(this.grid._by_idx[_1a0].item,this.displayFields[idx]));}_19f=Sage.Format.stringFromArray(this.displayFormatString,vals);return _19f;}if(this.formatType==="Percent"){this.constraints["type"]="percent";}_19f=dojo.number.format(_19f,dojo.mixin(this.constraints,{locale:Sys.CultureInfo.CurrentCulture.name}));if(this.constraints&&this.constraints.places==0&&this.constraints.round==-1&&_19f.lastIndexOf(Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator)>-1){_19f=_19f.slice(0,_19f.length-1);}if(this.abbreviationLength){var _1a1=Sage.Format.abbreviationFormatter(this.abbreviationLength);_19f=_1a1(_19f);}return _19f;},styles:"text-align: right;",setCurrentItems:function(){this.editInfo=this.grid.edit.info;this.item=this.grid.getItem(this.editInfo.rowIndex);},getControlId:function(){this.setCurrentItems();return [this.item.$key,this.editInfo.cell.field,this.index].join("_");},getValue:function(_1a2){var _1a3=this.widget.focusNode.valueNode.value;if((typeof _1a3==="undefined")||(_1a3==="")){_1a3=0;}if(this.widget&&this.widget.state==="Error"){var item=this.grid.getItem(_1a2);var _1a4=this.grid.store.getValue(item,this.grid.edit.info.cell.field);return _1a4;}return _1a3;}});return _197;});},"Sage/Services/UserOptions":function(){define("Sage/Services/UserOptions",["Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(_1a5,_1a6){var _1a7=_1a6("Sage.Services.UserOptions",null,{constructor:function(_1a8){this.inherited(arguments);dojo.mixin(this,_1a8);if(!_1a8||!_1a8.service){this.service=_1a5.getSDataService("system",false,true,true);}},get:function(name,_1a9,_1aa,_1ab,_1ac,_1ad){var req=this._createRequest(name,_1a9);if(typeof _1ad==="undefined"){_1ad=true;}if(req){req.read({success:_1aa,failure:function(_1ae){if(typeof _1ab==="function"){_1ab(_1ae);}},scope:_1ac||this,async:_1ad});}else{}},set:function(name,_1af,_1b0,_1b1,_1b2,_1b3){var req=this._createRequest(name,_1af);_1b2=_1b2||function(_1b4){};if(req){req.read({success:dojo.hitch(req,function(_1b5){_1b5.value=_1b0;_1a5._removeFromLocalStorage("userOptions");this.update(_1b5,{success:_1b1,scope:this});}),failure:_1b2,scope:_1b3||this});}},getByCategory:function(_1b6,_1b7,_1b8,_1b9){var req=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);req.setResourceKind("userOptions");req.setQueryArg("where","category eq '"+_1b6+"'");req.read({success:_1b7,failure:function(_1ba){if(typeof _1b9==="function"){_1b9(_1ba);}},scope:_1b8||this});},getByCategories:function(_1bb,_1bc,_1bd){var req=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);var _1be="";var _1bf=",";for(var i=0;i<_1bb.length;i++){if(i==_1bb.length-1){_1bf="";}_1be+="\""+_1bb[i]+"\""+_1bf;}req.setResourceKind("userOptions");req.setQueryArg("where","category in ("+_1be+")");req.setQueryArg("count","500");req.read({success:_1bc,failure:function(_1c0){},scope:_1bd||this});},_formatPredicate:function(n,c){return dojo.string.substitute("category eq '${0}' and name eq '${1}'",[c,n]);},_createRequest:function(n,c){var req=new Sage.SData.Client.SDataSingleResourceRequest(this.service);req.setResourceSelector(this._formatPredicate(n,c));req.setResourceKind("userOptions");return req;},_virtuald:function(){var _1c1=/^\/([^\/]+)\//.exec(location.pathname);return _1c1?_1c1[1]:"";}});Sage.Services.addService("UserOptions",new Sage.Services.UserOptions());Sage.UserOptionsService={getCommonOption:function(name,_1c2,_1c3){if(typeof console!=="undefined"){}var _1c4=_1c3;var svc=Sage.Services.getService("UserOptions");if(svc){svc.get(name,_1c2,function(_1c5){var _1c6={category:_1c5.category,option:_1c5.name,optionValue:_1c5.value};if(_1c4){_1c4.call(window,_1c6);}});}},setCommonOption:function(name,_1c7,data,_1c8){if(typeof console!=="undefined"){}var svc=Sage.Services.getService("UserOptions");if(svc){svc.set(name,_1c7,data,_1c8);}}};return _1a7;});},"Sage/MainView/IntegrationContract/InvoiceRTDV":function(){require({cache:{"url:Sage/MainView/IntegrationContract/templates/InvoiceRTDV.html":"[\n'<div>',\n    '<div dojoType=\"dijit.Dialog\" id=\"{%= $.id%}_invoiceDetailsDialog\" title=\"{%= $.dialogCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hideDetailsDialog\">',\n        '<div dojoAttachPoint=\"loadingContainer\">',\r\n            '<br />',\r\n            '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingText %}</label>',\r\n            '<br />',\r\n            '<br />',\r\n        '</div>',\n        '<div dojoAttachPoint=\"invoiceDialogContent\" class=\"display-none\">',\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\">',\n                 '<input dojoType=\"dijit.form.TextBox\" name=\"reference\" id=\"{%= $.id%}_reference\" label=\"{%= $.lblInvoiceCaption %}\" readonly=\"true\" />',\n                 '<input dojoType=\"dijit.form.TextBox\" name=\"grossTotal\" id=\"{%= $.id%}_grossTotal\" label=\"{%= $.lblNetTotalCaption %}\" readonly=\"readonly\" />',\n            '</div >',\n            '<div style=\"height:350px;width:800px\">',\r\n                '<div id=\"{%= $.id%}_invoiceTabContainer\" dojoAttachPoint=\"invoiceTabContainer\" dojoType=\"dijit.layout.TabContainer\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"{%= $.id%}_invoiceContent\" dojoAttachPoint=\"invoiceContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.detailsTabTitle %}\" selected=\"true\">',\r\n                        '<div id=\"{%= $.id%}_divInvoiceDetails\">',\r\n                            '<table cellspacing=\"5\">',\n                                '<col style=\"width:200px\" />',\r\n                                '<col style=\"width:200px\" />',\n                                '<tr>',\n                                    '<td>',\r\n                                        '<label for=\"Invoice_date\">{%= $.lblInvoiceDateCaption %}</label>',\r\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_invoiceDate\" name=\"date\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"invoiceDiscountPercent\">{%= $.lblInvoiceDiscountPercentCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_discountPercent\" name=\"invoiceDiscountPercent\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\r\n                                        '<label for=\"Invoice_deliveryDate\">{%= $.lblDueDateCaption %}</label>',\r\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_deliveryDate\" name=\"deliveryDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_carrierTotalPrice\">{%= $.lblCarrierTotalPriceCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_carrierTotalPrice\" name=\"carrierTotalPrice\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"Invoice_customerReference\">{%= $.lblCustomerPOCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_customerReference\" name=\"customerReference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\r\n                                        '<label for=\"Invoice_taxTotal\">{%= $.lblTaxCaption %}</label>',\r\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_taxTotal\" name=\"taxTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"settlementDiscountPercent\">{%= $.lblSettlementDiscountPercentCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_settlementDiscountPercent\" name=\"settlementDiscountPercent\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_notes\">{%= $.lblNotesCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_notes\" name=\"notes\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"settlementDiscountTerms\">{%= $.lblSettlementDiscountTermsCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_settlementDiscountTerms\" name=\"settlementDiscountTerms\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_costTotal\">{%= $.lblCostTotalCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_costTotal\" name=\"costTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"operatingCompanyCurrency\">{%= $.lblOCCurrencyCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_operatingCompanyCurrency\" name=\"operatingCompanyCurrency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_profitTotal\">{%= $.lblProfitTotalCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_profitTotal\" name=\"profitTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"operatingCompanyCurrencyExchangeRateDate\">{%= $.lblOperatingCompanyCurrencyExchangeRateDateCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_operatingCompanyCurrencyExchangeRateDate\" name=\"operatingCompanyCurrencyExchangeRateDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_priceList\">{%= $.lblPriceListCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_priceList\" name=\"pricelist.name\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"Invoice_currency\">{%= $.lblCurrencyCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_currency\" name=\"currency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_salesPerson\">{%= $.lblSalesPersonCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_salesPerson\" name=\"buyerContact.fullName\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"Invoice_invoiceDiscountAmount\">{%= $.lblInvoiceDiscountAmountCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_invoiceDiscountAmount\" name=\"invoiceDiscountAmount\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\r\n                            '</table>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_addressesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.addressTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"sdgrdInvoiceAddresses\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdInvoiceAddresses_Grid\" dojoAttachPoint=\"sdgrdInvoiceAddresses_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_invoiceLinesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.invoiceLinesTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"sdgrdInvoiceLines\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdInvoiceLines_Grid\" dojoAttachPoint=\"sdgrdInvoiceLines_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_paymentsContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.paymentsTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Payments\" dojoAttachEvent=\"onShow:initPayments\">',\r\n                        '<div id=\"sdgrdPayments\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdPayments_Grid\" dojoAttachPoint=\"sdgrdPayments_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_deliveriesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.deliveriesTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Deliveries\" dojoAttachEvent=\"onShow:initDeliveries\">',\r\n                        '<div id=\"sdgrdDeliveries\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdDeliveries_Grid\" dojoAttachPoint=\"sdgrdDeliveries_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                '</div>',\r\n            '</div>',\r\n            '<div class=\"button-bar alignright\">',\r\n                 '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_invoiceBtnClose\" type=\"button\" dojoAttachEvent=\"onClick:hideDetailsDialog\">{%= $.btnCloseCaption %}</button>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]"}});define("Sage/MainView/IntegrationContract/InvoiceRTDV",["dojo/_base/declare","dojo/i18n!./nls/InvoiceRTDV","dijit/_Widget","Sage/_Templated","Sage/UI/SLXPreviewGrid","Sage/Data/ProxySDataStore","Sage/UI/Dialogs","Sage/UI/Columns/DateTime","dojo/text!./templates/InvoiceRTDV.html","Sage/UI/DateTextBox","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","dijit/Dialog"],function(_1c9,_1ca,_1cb,_1cc,_1cd,_1ce,_1cf,_1d0,_1d1){var _1d2=_1c9("Sage.MainView.IntegrationContract.InvoiceRTDV",[_1cb,_1cc],{workspace:"",tabId:"",grid:"",globalSyncId:"",operatingCompanyId:"",dataStore:null,paymentsDataStore:null,deliveriesDataStore:null,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1d1)),constructor:function(){dojo.mixin(this,_1ca);},loadSalesInvoices:function(){var self=this;var _1d3={readOnly:true,rowsPerPage:20,slxContext:{workspace:this.workspace,tabId:this.tabId},columns:[{width:10,field:"reference",name:this.grdInvoice_Name,defaultValue:"",sortable:true,formatter:this.invoiceDetailsViewRenderer,style:"text-align:left;",editable:false},{width:10,field:"date",type:_1d0,formatType:"date",dateOnly:true,utc:false,name:this.grdInvoice_Date,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"customerReference",name:this.grdInvoice_PO,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"settlementDiscountTerms",name:this.grdInvoice_PaymentTerms,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"netTotal",name:this.grdInvoice_NetTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"taxTotal",name:this.grdInvoice_Tax,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"grossTotal",name:this.grdInvoice_Amount,defaultValue:"",sortable:true,style:"text-align:left;",editable:false}],storeOptions:new _1ce({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"tradingAccounts",getResourcePredicate:function(){return dojo.string.substitute("$uuid eq '${0}'",[self.globalSyncId]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesInvoices"}]}),tools:[]};var _1d4=new _1cd.Grid(_1d3,this.placeHolder);_1d4.startup();var _1d5=dijit.byId("tabContent");_1d5.resize();_1d5.resize();this.grid=_1d4;},invoiceDetailsViewRenderer:function(_1d6){return dojo.string.substitute("<a href=\"javascript:invoiceRTDV.loadDetailsView();\">${0}</a>",[_1d6]);},destroyFirst:function(id){var _1d7=dijit.byId(id);if(_1d7){_1d7.destroyRecursive();}},loadAddresses:function(data){this.destroyFirst("sdgrdInvoiceAddresses");if(data&&typeof data.postalAddresses==="undefined"){data.postalAddresses={};data.postalAddresses.$resources=new Array();}var _1d8=new dojox.grid.DataGrid({id:"sdgrdInvoiceAddresses",store:this.dataStore,structure:[{width:10,field:"type",name:this.grdAddress_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"address1",name:this.grdAddress_address1,defaultValue:"",sortable:true,editable:false},{width:10,field:"address2",name:this.grdAddress_address2,defaultValue:"",sortable:true,editable:false},{width:10,field:"townCity",name:this.grdAddress_City,defaultValue:"",sortable:true,editable:false},{width:10,field:"stateRegion",name:this.grdAddress_State,defaultValue:"",sortable:true,editable:false},{width:10,field:"zipPostCode",name:this.grdAddress_Zip,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{},queryOptions:{singleResourceRequest:true,property:"postalAddresses"}});dojo.place(_1d8.domNode,this.sdgrdInvoiceAddresses_Grid,"single");_1d8.startup();},loadLineItems:function(data){this.destroyFirst("sdgrdInvoiceLines");if(data&&typeof data.salesInvoiceLines==="undefined"){data.salesInvoiceLines={};data.salesInvoiceLines.$resources=new Array();}var _1d9=new dojox.grid.DataGrid({id:"sdgrdInvoiceLines",store:this.dataStore,structure:[{width:10,field:"number",name:this.grdItems_Line,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdItems_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdItems_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodity.name",name:this.grdItems_Commodity,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodityVariant.reference",name:this.grdItems_CommodityVariant,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodityDimension.reference",name:this.grdItems_CommodityDimension,defaultValue:"",sortable:true,editable:false},{width:10,field:"unitOfMeasure.name",name:this.grdItems_UnitOfMeasure,defaultValue:"",sortable:true,editable:false},{width:10,field:"quantity",name:this.grdItems_Quantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"initialPrice",name:this.grdItems_InitialPrice,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualPrice",name:this.grdItems_ActualPrice,defaultValue:"",sortable:true,editable:false},{width:10,field:"netTotal",name:this.grdItems_NetTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"chargesTotal",name:this.grdItems_ChargesTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"discountTotal",name:this.grdItems_DiscountTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"taxTotal",name:this.grdItems_TaxTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"grossTotal",name:this.grdItems_GrossTotal,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{},queryOptions:{singleResourceRequest:true,property:"salesInvoiceLines"}});dojo.place(_1d9.domNode,this.sdgrdInvoiceLines_Grid,"only");_1d9.startup();},initPayments:function(){if(this.paymentsDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.paymentsDataStore=new _1ce({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1da=row["$key"];return dojo.string.substitute("'${0}'",[_1da]);},resourceKind:"salesInvoices",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"receipts"}],includeContent:true});dojo.connect(this.paymentsDataStore,"onGetSingleResource",this,"loadPayments");this.paymentsDataStore.getSingleResource();}},loadPayments:function(data){this.destroyFirst("sdgrdPayments");if(data&&typeof data.receipts==="undefined"){data.receipts={};data.receipts.$resources=new Array();}var _1db=new dojox.grid.DataGrid({id:"sdgrdPayments",store:this.paymentsDataStore,structure:[{width:10,field:"date",type:_1d0,formatType:"date",name:this.grdPayments_Date,defaultValue:"",sortable:true,editable:false},{width:10,field:"name",name:this.grdPayments_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdPayments_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdPayments_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"netTotal",name:this.grdPayments_NetTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"discountTotal",name:this.grdPayments_Discounts,defaultValue:"",sortable:true,editable:false},{width:10,field:"chargesTotal",name:this.grdPayments_Charges,defaultValue:"",sortable:true,editable:false},{width:10,field:"taxTotal",name:this.grdPayments_Tax,defaultValue:"",sortable:true,editable:false},{width:10,field:"grossTotal",name:this.grdPayments_GrossTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"currency",name:this.grdPayments_Currency,defaultValue:"",sortable:true,editable:false},{width:10,field:"tenderType",name:this.grdPayments_TenderType,defaultValue:"",sortable:true,editable:false},{width:10,field:"tenderReference",name:this.grdPayments_TenderReference,defaultValue:"",sortable:true,editable:false},{width:10,field:"processDate",type:_1d0,formatType:"date",name:this.grdPayments_ProcessDate,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1db.domNode,this.sdgrdPayments_Grid,"only");_1db.startup();},initDeliveries:function(){if(this.deliveriesDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.deliveriesDataStore=new _1ce({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1dc=row["$key"];return dojo.string.substitute("'${0}'",[_1dc]);},resourceKind:"salesInvoices",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesOrderDeliveries"}],includeContent:true});dojo.connect(this.deliveriesDataStore,"onGetSingleResource",this,"loadDeliveries");this.deliveriesDataStore.getSingleResource();}},loadDeliveries:function(data){this.destroyFirst("sdgrdDeliveries");if(data&&typeof data.salesOrderDeliveries==="undefined"){data.salesOrderDeliveries={};data.salesOrderDeliveries.$resources=new Array();}var _1dd=new dojox.grid.DataGrid({id:"sdgrdDeliveries",store:this.deliveriesDataStore,structure:[{width:10,field:"reference",name:this.grdDeliveries_Number,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdDeliveries_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdDeliveries_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"requestedDeliveryDate",type:_1d0,formatType:"date",name:this.grdDeliveries_RequestedDate,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualDeliveryDate",type:_1d0,formatType:"date",name:this.grdDeliveries_ActualDate,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualDeliveryTime",type:_1d0,formatType:"date",name:this.grdDeliveries_ActualTime,defaultValue:"",sortable:true,editable:false},{width:10,field:"requestedQuantity",name:this.grdDeliveries_RequestedQuantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"deliveredQuantity",name:this.grdDeliveries_DeliveredQuantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"deliveryMethod",name:this.grdDeliveries_Method,defaultValue:"",sortable:true,editable:false},{width:10,field:"carrierTradingAccount.name",name:this.grdDeliveries_Carrier,defaultValue:"",sortable:true,editable:false},{width:10,field:"carrierReference",name:this.grdDeliveries_CarrierReference,defaultValue:"",sortable:true,editable:false},{width:10,field:"dateExceptionReason",name:this.grdDeliveries_ExceptionReason,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1dd.domNode,this.sdgrdDeliveries_Grid,"only");_1dd.startup();},loadDetailsView:function(){dojo.removeClass(this.loadingContainer,"display-none");dojo.addClass(this.invoiceDialogContent,"display-none");this._dialog.show();var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){var _1de=row["$key"];this.dataStore=new _1ce({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"salesInvoices",getResourcePredicate:function(){return dojo.string.substitute("'${0}'",[_1de]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:["*,salesInvoiceLines/*,postalAddresses/*,buyerContact/fullName,pricelist/name,salesInvoiceLines/commodity/name,salesInvoiceLines/unitOfMeasure/name,salesInvoiceLines/commodityVariant/reference,salesInvoiceLines/commodityDimension/reference,salesOrderDeliveries/carrierTradingAccount/name"],includeContent:true});dojo.connect(this.dataStore,"onGetSingleResource",this,"buildGrids");this.dataStore.getSingleResource();}},loadInvoiceDetails:function(data){if(data&&typeof data!=="undefined"){this._dialog.set("value",data);}},buildGrids:function(data){this.loadInvoiceDetails(data);this.loadAddresses(data);this.loadLineItems(data);if(this.invoiceTabContainer!=null){this.invoiceTabContainer.selectChild(this.invoiceContent);}dojo.addClass(this.loadingContainer,"display-none");dojo.removeClass(this.invoiceDialogContent,"display-none");this._dialog.resize();},hideDetailsDialog:function(){this.destroyFirst("sdgrdDeliveries");this.deliveriesDataStore=null;this.destroyFirst("sdgrdPayments");this.paymentsDataStore=null;this._dialog.hide();}});return _1d2;});},"Sage/MainView/nls/ActivityManager":function(){define("Sage/MainView/nls/ActivityManager",["Sage/LanguageList","dojo/_base/lang"],function(_1df,lang){var nls={root:{titleFmtString:"${0}",tabDisplayNameActivity:"Activities",tabDisplayNameLit:"Literature",tabDisplayNameEvent:"Events",tabDisplayNameConfirm:"Confirmations",activityColNameComplete:"Complete",activityColNameAttachment:"Attachment",activityColNameRecurring:"Recurring",activityColNameAlarm:"Alarm",activityColNameType:"ActivityType",activityColNameStartDate:"StartDate",activityColNameDuration:"Duration",activityColNameContact:"Contact",activityColNameLead:"Lead",activityColNameAccount:"Account",activityColNameRegarding:"Regarding",activityColNamePriority:"Priority",activityColNameUserId:"leader",activityTypePhone:"Phone",activityTypeCall:"Call",activityTypeMeeting:"Meeting",activityTypePersonal:"Personal"}};return lang.mixin(_1df,nls);});},"Sage/UI/Alarms/main":function(){define("Sage/UI/Alarms/main",["Sage/UI/Alarms/ActivityAlarm","Sage/UI/Alarms/AlarmButton","Sage/UI/Alarms/AlarmCountDown","Sage/UI/Alarms/AlarmPane","Sage/UI/Alarms/AlarmPopup","Sage/UI/Alarms/AlertPane","Sage/UI/Alarms/UnconfirmedAlarm","Sage/UI/Alarms/UnconfirmedPane"],function(){});},"Sage/UI/Columns/HistoryType":function(){define("Sage/UI/Columns/HistoryType",["dojox/grid/cells/_base","Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(_1e0,util,_1e1,_1e2,_1e3){var _1e4=_1e3("Sage.UI.Columns.HistoryType",_1e0,{keyField:false,format:function(_1e5,_1e6){var type=this.get(_1e5,_1e6);if(!type){return this.defaultValue;}var key=util.getValue(_1e6,this.keyField||"$key");var fmt="<div class=\"Global_Images icon16x16 ${0}\"></div>&nbsp;<a href=\"javascript:Sage.Link.editHistory('${1}')\">${2}</a>";return _1e2.substitute(fmt,[_1e1.getActivityImageClass(type,"small"),key,_1e1.getActivityTypeName(type)]);}});return _1e4;});},"Sage/UI/SummaryContainer":function(){define("Sage/UI/SummaryContainer",["dijit/_Widget","Sage/_Templated","Sage/UI/SummaryContents","dojo/_base/declare"],function(_1e7,_1e8,_1e9,_1ea){var _1eb=_1ea("Sage.UI.SummaryContainer",[_1e7,_1e8],{widgetsInTemplate:false,templateLocation:"",contentNode:null,paneContents:null,entity:null,postProcessCallBack:false,attributeMap:{"content":{node:"contentNode",type:"innerHTML"}},widgetTemplate:new Simplate(["<div class=\"EntityCard\">","<div dojoAttachPoint=\"contentNode\">Loading...</div>","</div>"]),_setEntityAttr:function(_1ec){this.entity=_1ec;var pane=new _1e9({templateLocation:this.templateLocation,entity:_1ec});dojo.place(pane.domNode,this.contentNode,"only");pane.startup();this.paneContents=pane;if(this.postProcessCallBack){this.postProcessCallBack(this.entity);}},startup:function(){if(this.entity){var pane=new _1e9({templateLocation:this.templateLocation,entity:this.entity});dojo.place(pane.domNode,this.contentNode,"only");pane.startup();this.paneContents=pane;if(this.postProcessCallBack){this.postProcessCallBack(this.entity);}}},destroy:function(){if(this.paneContents){this.paneContents.destroy(arguments);}this.inherited(arguments);}});return _1eb;});},"Sage/UI/SLXPreviewGrid/Filter/DateRange":function(){define("Sage/UI/SLXPreviewGrid/Filter/DateRange",["dijit/form/DateTextBox","dijit/_Widget","dijit/_Templated","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/_base/declare"],function(_1ed,_1ee,_1ef,_1f0,_1f1){var _1f2=_1f1("Sage.UI.SLXPreviewGrid.Filter.DateRange",[_1ee,_1ef,_1f0],{templateString:"<div>"+"<input data-dojo-type='dijit.form.DateTextBox' dojoAttachPoint='dteFrom' style='width:90px'> - "+"<input data-dojo-type='dijit.form.DateTextBox' dojoAttachPoint='dteTo' style='width:90px'>"+"</div>",widgetsInTemplate:true,getQuery:function(){var _1f3=function(_1f4,_1f5){if(!_1f4){return "";}if(_1f4.constructor!==Date){_1f4=Date.parse(_1f4);}if(_1f5){_1f4.setUTCDate(_1f4.getUTCDate()+1);}var pad=function(n){return n<10?"0"+n:n;};return _1f4.getUTCFullYear()+"-"+pad(_1f4.getUTCMonth()+1)+"-"+pad(_1f4.getUTCDate())+"T"+pad(_1f4.getUTCHours())+":"+pad(_1f4.getUTCMinutes())+":"+pad(_1f4.getUTCSeconds())+"Z";};var _1f6=_1f3(this.dteFrom.get("value"));var dTo=_1f3(this.dteTo.get("value"),true);var qry="";if(_1f6){qry=this.field+" ge '"+_1f6+"'";}if(dTo){if(qry){qry+=" and ";}qry+=this.field+" lt '"+dTo+"'";}if(this.params["getTimeless"]){if(qry){var _1f7=false;qry="(("+qry+" and not Timeless) or (";var _1f8=Sage.Utility.Activity.formatTimelessStartDate(this.dteFrom.get("value"));var _1f9=Sage.Utility.Activity.formatTimelessEndDate(this.dteTo.get("value"));if(_1f8){qry+=this.field+" gt '"+_1f8+"'";_1f7=true;}if(_1f9){if(_1f7){qry+=" and ";}qry+=this.field+" lt '"+_1f9+"'";}qry+=" and Timeless))";}}return qry;},reset:function(){this.dteFrom.set("value",0);this.dteTo.set("value",0);},getState:function(){return {"dFrom":this.dteFrom.get("value"),"dTo":this.dteTo.get("value")};},applyState:function(_1fa){if(_1fa){if(_1fa["dFrom"]){this.dteFrom.set("value",_1fa["dFrom"]);}if(_1fa["dTo"]){this.dteTo.set("value",_1fa["dTo"]);}}}});return _1f2;});},"Sage/UI/Dashboard/DashboardWidget":function(){define("Sage/UI/Dashboard/DashboardWidget",["dojo/_base/declare","Sage/UI/Dashboard/WidgetDefinition","dojo/i18n","dojo/_base/lang","dijit/form/TextBox","dijit/form/CheckBox","dojox/charting/widget/Chart2D","dojox/charting/action2d/Highlight","dojox/charting/action2d/MoveSlice","dojox/charting/action2d/Tooltip","dojox/charting/action2d/Magnify","dojox/charting/widget/Legend","dojox/charting/themes/Julie","dojo/i18n!./nls/DashboardWidget"],function(_1fb,_1fc,i18n,lang){var _1fd=_1fb("Sage.UI.Dashboard.DashboardWidget",null,{constructor:function(_1fe){dojo.safeMixin(this,_1fe);this._setDefinition();this._winResize=dojo.connect(window,"onresize",this,function(){if(!this.parentCell.open||!this.parentCell._started){return;}if(this.parentCell.refresh){this.parentCell.refresh(true);}});this.dropSub=dojo.subscribe("/ui/widget/dropped",this,function(id,p,c,i){if(id===this.parentCell.id){if(!this.parentCell.open||!this.parentCell._started){return;}if(this.parentCell.refresh){this.parentCell.refresh(true);}}});},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","DashboardWidget"));},_getInstanceData:function(){if(this.parentCell.isNew&&this.definition.editor){this.definition.editor(this.parentCell);if(this.parentCell._settingsWidget){this.parentCell._settingsWidget.toggle();}else{this.parentCell._editorAdded();}return;}if(!this.definition.isStatic){var that=this;if(this.options.datasource){dojo.xhrGet({url:this.options.datasource,handleAs:"json",load:function(data){if(data){that._setInstanceData(data);}else{that.parentCell.set("content",this.noQueryDataText+this.options.datasource);}},error:function(data){that._setInstanceData(null);}});}else{this.parentCell._setContent(this.initializingText||"",true);if(this.definition.isStaticXhr){this._setInstanceData(null);}if(this.definition.editor){this.definition.editor(this.parentCell);}}}else{this._setInstanceData();}},_setDefinition:function(){_1fc(Sage.UI.WidgetDefinitions[this.options.name],lang.hitch(this,function(_1ff){this.definition=_1ff;this._getInstanceData();}));},_setInstanceData:function(data){if(this.definition.isStatic){this.parentCell.set("content",this.definition.html(this.parentCell));if(this.definition.editor){this.definition.editor(this.parentCell);}}else{this.definition.html(this.parentCell,data);}}});return _1fd;});},"Sage/Data/SummaryViewDataManager":function(){define("Sage/Data/SummaryViewDataManager",["Sage/Data/SDataServiceRegistry","dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(_200,_201,_202,lang){var _203=_202("Sage.Data.SummaryRequestQueue",null,{mashupName:"",queryName:"",fetching:false,service:null,unfetchedIds:null,constructor:function(_204){lang.mixin(this,_204);this.requestHash={};this.fetching=false;this.unfetchedIds=[];this.allFetched=[];this.service=_200.getSDataService("mashups");},add:function(id,_205){this.requestHash[id]=_205;this.allFetched.push({id:id,context:_205});this.unfetchedIds.push(id);},send:function(_206,_207){this.fetching=true;var _208=[],id,_209;for(id in this.requestHash){_208.push("'"+id+"'");_209=_201.indexOf(this.unfetchedIds,id);if(_209>-1){this.unfetchedIds.splice(_209,1);}}var _20a=new Sage.SData.Client.SDataNamedQueryRequest(this.service);_20a.setApplicationName("$app");_20a.setResourceKind("mashups");var _20b=this.mashupName||"SummaryViewQueries";_20a.uri.setCollectionPredicate("'"+_20b+"'");_20a.setQueryName("execute");_20a.setQueryArg("_resultName",this.queryName);_20a.setQueryArg("_ids",_208.join(","));var _20c=this;_20a.read({success:lang.hitch(_207,_206,_20c),failure:lang.hitch(this,this.requestFailed,_20c)});},requestFailed:function(a,b,c){}});var _20d=_202("Sage.Data.SummaryViewDataManager",null,{oldQueue:null,queue:null,maxQueueLength:100,constructor:function(){this.oldQueue={};this._createNewQueue();},_createNewQueue:function(){this.queue=new _203({});this.requestTimeout=false;},requestData:function(_20e,_20f,_210){if(this.queue.fetching){this.oldQueue=this.queue;this._createNewQueue();}this.queue.mashupName=_210.mashupName;this.queue.queryName=_210.queryName;this.queue.add(_20e,_20f);if(this.requestTimeout){window.clearTimeout(this.requestTimeout);}var q=this.queue;var self=this;if(q.unfetchedIds.length>=this.maxQueueLength){q.send(self.receiveData,self);}this.requestTimeout=window.setTimeout(function(){q.send(self.receiveData,self);},250);},requestDataNoWait:function(_211,_212,_213){var _214=new _203({mashupName:_213.mashupName,queryName:_213.queryName});_214.add(_211,_212);_214.send(this.receiveData,this);},receiveData:function(_215,data){for(var i=0;i<data.$resources.length;i++){var _216=data.$resources[i];var id=_216.id;if(!id){id=_216.$key;_216.id=_216.$key;}(function(_217){_201.forEach(_215.allFetched,function(item){try{if(_217.id===item.id){item.context.set("entity",_217);}}catch(err){}});})(_216);}}});Sage.Services.addService("SummaryViewDataManager",new _20d());return _20d;});},"Sage/MainView/ActivityMgr/ActivityCalendar":function(){define("Sage/MainView/ActivityMgr/ActivityCalendar",["Sage/Data/WritableSDataStore","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility","dojo/string","dojo/_base/lang","dojo/_base/declare","dojo/i18n!./nls/ActivityCalendar","Sage/Array"],function(_218,_219,_21a,_21b,_21c,lang,_21d,_21e){var _21f=_21d("Sage.MainView.ActivityMgr.ActivityCalendar",null,{_contentWindow:null,_activitiesData:null,_eventsData:null,_allData:null,_schedulerEvents:[],_schedulerEvents1:[],_schedulerLoaded:false,_loadHistoryOnStart:false,self:this,_calendarUsers:[],_selectedUsers:[],_currentUser:null,_userOptions:{},_userActivityData:[],_reccurring:[],_currentUserId:null,_currentUserColor:[],_dateRangeStart:null,_dateRangeEnd:null,completedText:"(Completed)",meetingIconUrl:"../../images/icons/meeting_14x14.png",toDoIconUrl:"../../images/icons/To_Do_14x14.png",phoneCallIconUrl:"../../images/icons/Call_14x14.png",personalActivityIconUrl:"../../images/icons/personal_14x14.png",_userColors:[],constructor:function(_220,_221){(function(){this._contentWindow=_220;})();this._currentUserId=lang.trim(_21b.getClientContextByKey("userID"))||"";this._userOptions=_221;this._userColors["user1"]="#D5E2BD";this._userColors["user2"]="#CFDEF5";this._userColors["user3"]="#FBDBB5";this._userColors["user4"]="#DFC9F6";this._currentUserColor=[];this._nlsResources=_21e;var _222=function(dt){return dojo.date.locale.format(new Date(dt),{selector:"date",datePattern:"EEE MMM d yyyy 00:00:00 ZZZZ"});};var _223=function(dt){return dojo.date.locale.format(new Date(dt),{selector:"date",datePattern:"EEE MMM d yyyy 24:00:00 ZZZZ"});};var _224=function(data){var _225=[{StartDate:_222(Sage.Utility.Convert.toDateFromString(data.StartDate)),EndDate:_223(Sage.Utility.Convert.toDateFromString(data.EndDate)),Text:data.Type,Id:data.$key+"-evt"}];return _225;};var self=this;dojo.subscribe("/entity/history/create",function(data){if(data!=null){var _226=data.HistoryId||data.$key;if(_226){self._getHistoryItem(_226);}}});dojo.subscribe("/entity/history/delete",function(key){if(key!=null){self._deleteHistoryItem(key);}});dojo.subscribe("/entity/activity/create",function(data){if(data!=null){if(!data.Timeless){var _227=data.Leader.$key;_227=lang.trim(_227);if(self._isUserSelected(_227)){if(data.Recurring){self._refreshSchedulerEvents();}else{var _228=self._formatActivityObject(data,_227);if(!self._userActivityData[_227]){self._userActivityData[_227]=[];self._userActivityData[_227]["activities"]=[];}self._userActivityData[_227]["activities"].push(_228);dojo.publish("/entity/activity/addToScheduler",[_228,this]);}}}}});dojo.subscribe("/entity/userActivity/create",function(data){if(data!=null&&data.Activity){var _229=data.Activity.$key;var _22a=data.User.$key;var _22b=data.Status;if(self._isUserSelected(_22a)){if(self._reccurring[_229]){self._removeReccurringFromScheduler(_229);window.setTimeout(function(){self._reloadAllActivitiesByActivityId(_229);},1);}else{var _22c=self._getActivityObjectFromCollection(_229);if(_22c){var _22d=self._getUserActivityFromActivity(_22c,_229,_22a,_22b);dojo.publish("/entity/activity/addToScheduler",[_22d,this]);if(!self._userActivityData[_22a]){self._userActivityData[_22a]=[];self._userActivityData[_22a]["activities"]=[];}self._userActivityData[_22a]["activities"].push(_22d);}}}}});dojo.subscribe("/entity/activity/activityScheduler/reloadActivity",function(_22e){self._reloadAllActivitiesByActivityId(_22e);});dojo.subscribe("/entity/userActivity/delete",function(data){if(data!=null){var _22f=data.split(";")[0];var _230=data.split(";")[1];var _231=_22f.split("=")[1];if(self._reccurring[_231]){self._removeReccurringFromScheduler(_231);window.setTimeout(function(){self._reloadAllActivitiesByActivityId(_231);},1);}else{var _232=_230.split("=")[1];_232=_232.replace("'","");var _233=_231+"-"+_232+"-act";if(lang.trim(_21b.getClientContextByKey("userID"))==_232){_233="0:"+_233;}dojo.publish("/entity/activity/deleteFromScheduler",[_233,this]);self._removeActivityObjectFromCollection(_231,_232);}}});dojo.subscribe("/entity/activity/change",function(data){if(data!=null){if(data.Recurring||data.RecurrenceState.toLowerCase()!=="rsnotrecurring"){self._refreshSchedulerEvents();}else{if(data.LeaderChanged){self._deleteFromSchedulerByActivity(data.$key);}var _234=null;if(data.Leader&&data.Leader.$key){_234=lang.trim(data.Leader.$key);}if(self._isUserSelected(_234)){var _235=self._formatActivityObject(data,_234);dojo.publish("/entity/activity/updateScheduler",[_235,this]);self._removeActivityObjectFromCollection(data.$key,_234);self._userActivityData[_234]["activities"].push(_235);}var _236=self._getMembersOfActivity(data.$key);if(_236){for(var i=0;i<_236.length;i++){if(_236[i]!==_234){_235=self._formatActivityObject(data,_236[i]);dojo.publish("/entity/activity/updateScheduler",[_235,this]);self._removeActivityObjectFromCollection(data.$key,_236[i]);if(!self._userActivityData[_236[i]]){self._userActivityData[_236[i]]=[];self._userActivityData[_236[i]]["activities"]=[];}self._userActivityData[_236[i]]["activities"].push(_235);}}}}}});dojo.subscribe("/entity/activity/delete/single",function(_237){self._deleteFromSchedulerByActivity(_237);});dojo.subscribe("/entity/activity/confirm",function(_238){if(_238){self._refreshSchedulerByActivity(_238.activityId);}});dojo.subscribe("/entity/activity/decline",function(_239){if(_239){self._refreshSchedulerByActivity(_239.activityId);}});dojo.subscribe("/entity/activity/delete/recurrence",function(_23a){var _23b;if(_23a){_23b=_23a.substring(0,13);if(self._userActivityData){for(var i in self._userActivityData){if(self._userActivityData[i]!=null){var _23c=[];if(self._userActivityData[i]["activities"]){for(var k=0;k<self._userActivityData[i]["activities"].length;k++){if(self._userActivityData[i]["activities"][k]){var id=self._userActivityData[i]["activities"][k]["id"];if(id.indexOf(_23b)>-1){_23c.push(id);}}}if(_23c.length>0){dojo.publish("/entity/activity/clearSchedulerEvents",[_23c,this]);}}}}}}});dojo.subscribe("/entity/activity/delete",function(_23d){self._deleteFromSchedulerByActivity(_23d);});dojo.subscribe("/entity/event/create",function(data){if(data!=null){var _23e=data.UserId;_23e=lang.trim(_23e);var _23f=self._formatEventObject(data,_23e);dojo.publish("/entity/activity/addToScheduler",[_23f,this]);}});dojo.subscribe("/entity/event/change",function(data){if(data!=null){var _240=data.UserId;_240=lang.trim(_240);var _241=self._formatEventObject(data,_240);dojo.publish("/entity/activity/updateScheduler",[_241,this]);}});dojo.subscribe("/entity/event/delete/single",function(_242){var evId=_242+"-evt";dojo.publish("/entity/activity/deleteFromScheduler",[evId,this]);});dojo.subscribe("/entity/calendar/userlist/add",function(data){(function(){dojo.publish("/entity/activity/updateScheduler",[_224(data),this]);})();});completedText=this._nlsResources.completedText||"(Completed)";},_deleteHistoryItem:function(_243){if(this._userActivityData){for(var i in this._userActivityData){if(this._userActivityData[i]!=null){if(this._userActivityData[i]["history"]){for(var k=0;k<this._userActivityData[i]["history"].length;k++){if(this._userActivityData[i]["history"][k]){var id=this._userActivityData[i]["history"][k]["id"];if(id.indexOf(_243)>-1){delete this._userActivityData[i]["history"][k];dojo.publish("/entity/activity/deleteFromScheduler",[id,this]);break;}}}}}}}},_deleteFromSchedulerByActivity:function(_244){if(_244&&_244.indexOf("{")==-1){var _245=this._getAllActivitiesFromCollectionById(_244);for(var i=0;i<_245.length;i++){dojo.publish("/entity/activity/deleteFromScheduler",[_245[i],this]);this._removeActivityObjectFromCollectionByActivityId(_245[i]);}}},_isUserSelected:function(_246){var _247=false;for(var i in this._selectedUsers){if(this._selectedUsers[i]["userId"]){if(this._selectedUsers[i]["userId"].toString()==_246){_247=true;break;}}}return _247;},_refreshSchedulerByActivity:function(_248){if(_248){this._deleteFromSchedulerByActivity(_248);this._reloadAllActivitiesByActivityId(_248);}},_getUserActivityFromActivity:function(_249,_24a,_24b,_24c){var _24d=dojo.clone(_249);var sd=_249.start_date;var ed=_249.end_date;var _24e=false;if(_24d){_24d.id=_24a+"-"+_24b+"-act";if(_24c){switch(_24c){case "asAccepted":_24e=true;break;case "asUnconfirmed":_24e=false;break;}}_24d.userColor=this._currentUserColor[_24b];_24d.end_date=ed;_24d.start_date=sd;_24d.confirmed=_24e;}return _24d;},_getActivityObjectFromCollection:function(_24f){var _250=null;var br=false;if(this._userActivityData){for(var i in this._userActivityData){if(this._userActivityData[i]!=null){if(this._userActivityData[i]["activities"]){for(var k=0;k<this._userActivityData[i]["activities"].length;k++){if(this._userActivityData[i]["activities"][k]){var id=this._userActivityData[i]["activities"][k]["id"];if(id.indexOf(_24f)>-1){_250=this._userActivityData[i]["activities"][k];br=true;break;}}}}}if(br){break;}}}return _250;},_getAllActivitiesFromCollectionById:function(_251){var _252=[];if(this._userActivityData){for(var i in this._userActivityData){if(this._userActivityData[i]!=null){if(this._userActivityData[i]["activities"]){for(var k=0;k<this._userActivityData[i]["activities"].length;k++){if(this._userActivityData[i]["activities"][k]){var id=this._userActivityData[i]["activities"][k]["id"];if(id.indexOf(_251)>-1){_252.push(id);}}}}}}}return _252;},_removeActivityObjectFromCollection:function(_253,_254){if(this._userActivityData){if(this._userActivityData[_254]!=null){if(this._userActivityData[_254]["activities"]){for(var k=0;k<this._userActivityData[_254]["activities"].length;k++){if(this._userActivityData[_254]["activities"][k]){var id=this._userActivityData[_254]["activities"][k]["id"];if(id.indexOf(_253)>-1){delete this._userActivityData[_254]["activities"][k];break;}}}}}}},_removeActivityObjectFromCollectionByActivityId:function(_255){var br=false;if(this._userActivityData){for(var i in this._userActivityData){if(this._userActivityData[i]!=null){if(this._userActivityData[i]["activities"]){for(var k=0;k<this._userActivityData[i]["activities"].length;k++){if(this._userActivityData[i]["activities"][k]){var id=this._userActivityData[i]["activities"][k]["id"];if(id==_255){delete this._userActivityData[i]["activities"][k];br=true;break;}}}}}if(br){break;}}}},_getMembersOfActivity:function(_256){var _257;var _258=[];if(this._userActivityData){for(var i in this._selectedUsers){if(this._selectedUsers[i]&&this._selectedUsers[i]["userId"]){var _259=this._selectedUsers[i]["userId"].toString();if(this._userActivityData[_259]!=null){if(this._userActivityData[_259]["activities"]){_257=this._userActivityData[_259]["activities"].filter(function(_25a){return _25a.id.indexOf(_256)>-1;});if(_257.length>0){_258.push(_259);}}}}}}return _258;},_getWeekStart:function(_25b,date){if(date==null){date=new Date();}var _25c=date.getDay();_25c=_25b-_25c;var _25d=dojo.date.add(date,"day",_25c);if(_25d>date){_25d=dojo.date.add(_25d,"day",-7);}return _25d;},_setQueryDates:function(data){var _25e=data.date.valueOf();switch(data.mode){case "day":case "week":case "workweek":case "month":var _25f=dojo.date.getDaysInMonth(new Date(_25e));var _260=new Date(new Date(_25e).setDate(1));_260.setHours(0,0,0,0);var _261=new Date(new Date(_25e).setDate(_25f));_261.setHours(0,0,0,0);var _262=this._dateAdd(_260,"day",-7);var _263=this._dateAdd(_261,"day",8);this._dateRangeStart=Sage.Utility.Convert.toIsoStringFromDate(_262);this._dateRangeEnd=Sage.Utility.Convert.toIsoStringFromDate(_263);break;}},_updateDateRange:function(data,_264){if(!_264&&!this._schedulerLoaded){return;}var _265=data.date;if(Sage.Utility.Convert.isDateString(_265)){_265=Sage.Utility.Convert.toDateFromString(_265);}_265=new Date(_265.getFullYear(),_265.getMonth(),_265.getDate(),_265.getHours(),_265.getMinutes());if(this._dateRangeStart&&this._dateRangeEnd){var _266=this._dateRangeStart;if(Sage.Utility.Convert.isDateString(_266)){_266=Sage.Utility.Convert.toDateFromString(_266);}_266=new Date(_266.getFullYear(),_266.getMonth(),_266.getDate(),_266.getHours(),_266.getMinutes());var _267=this._dateRangeEnd;if(Sage.Utility.Convert.isDateString(_267)){_267=Sage.Utility.Convert.toDateFromString(_267);}_267=new Date(_267.getFullYear(),_267.getMonth(),_267.getDate(),_267.getHours(),_267.getMinutes());if(data.mode=="month"||((dojo.date.compare(_265,_267,"date")>0)||((dojo.date.compare(_266,_265,"date")>0)))){this._setQueryDates(data);this._refreshSchedulerEvents();}}else{this._setQueryDates(data);this._refreshSchedulerEvents();}},_updateCalendarUsers:function(_268,_269){var idx=dojo.indexOf(this._calendarUsers,_268);if(_269==="add"){if(idx!=-1){this._calendarUsers.splice(idx);}this._calendarUsers.push(_268);}else{if(_269==="remove"){if(idx!=-1){this._calendarUsers.splice(idx);}}}},_updateReccurring:function(id){if(id){var rId=id.replace("0:","").split(";");var aId=rId[0];if(!this._reccurring[aId]){this._reccurring[aId]=[];}this._reccurring[aId].push(id);}},_dateAdd:function(dt,mode,_26a){if(!dt){return "";}if(Sage.Utility.Convert.isDateString(dt)){dt=Sage.Utility.Convert.toDateFromString(dt);}var _26b=new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),dt.getHours(),dt.getMinutes());_26b=dojo.date.add(_26b,mode,_26a);return _26b;},_reloadUserCalendars:function(_26c){if(this._userActivityData){if(this._userActivityData[_26c]!=null){var _26d=[];var _26e=[];var _26f=[];if(this._userActivityData[_26c]["activities"]){for(var k=0;k<this._userActivityData[_26c]["activities"].length;k++){if(this._userActivityData[_26c]["activities"][k]){_26d.push(this._userActivityData[_26c]["activities"][k]["id"]);}}dojo.publish("/entity/activity/clearSchedulerEvents",[_26d,this]);}if(this._userActivityData[_26c]["events"]){for(var l=0;l<this._userActivityData[_26c]["events"].length;l++){if(this._userActivityData[_26c]["events"][l]){_26e.push(this._userActivityData[_26c]["events"][l]["id"]);}}dojo.publish("/entity/activity/clearSchedulerEvents",[_26e,this]);}if(this._userActivityData[_26c]["history"]){for(var m=0;m<this._userActivityData[_26c]["history"].length;m++){if(this._userActivityData[_26c]["history"][m]){_26f.push(this._userActivityData[_26c]["history"][m]["id"]);}}dojo.publish("/entity/activity/clearSchedulerEvents",[_26f,this]);}}}},_updateSelectedUsers:function(_270,_271,_272){if(_270){if(this._selectedUsers==null||this._selectedUsers.length==0){this._selectedUsers=lang.clone(_270);}else{var _273;if(_271){for(var i in _270){_273=_270[i]["userId"];if(_273){delete this._selectedUsers[_273];}}}else{for(var i in _270){_273=_270[i]["userId"];userColor=_270[i]["usercolor"];if(_273){this._selectedUsers[_273]=_270[i];if(this._currentUserId==_273){this._updateCalendarUsers(_273.toString(),"add");this._getActivities(_273.toString(),userColor.toString());this._getEvents(_273.toString(),userColor.toString());if(_272){this._getHistory(_273.toString(),userColor.toString());}}else{var _274={userId:_273,userColor:userColor};this._getSecurityAccessData(lang.trim(_21b.getClientContextByKey("userID")),_273,_274,function(_275){this._updateCalendarUsers(_275.userId.toString(),"add");this._getActivities(_275.userId.toString(),_275.userColor.toString());this._getEvents(_275.userId.toString(),_275.userColor.toString());if(_272){this._getHistory(_275.userId.toString(),_275.userColor.toString());}},this);}}}}}}},_refreshSchedulerEvents:function(){dojo.publish("/entity/activity/clearScheduler",[null,this]);if(this._selectedUsers){var _276,_277;var _278=lang.trim(_21b.getClientContextByKey("userID"));var _279=this._selectedUsers[_278]["loadHistoryOnStart"];for(var i in this._selectedUsers){_276=this._selectedUsers[i]["userId"];_277=this._selectedUsers[i]["usercolor"];var _27a={userId:_276,userColor:_277};if(_276==_278){this._getActivities(_276,_277);this._getEvents(_276,_277);if(_279){this._getHistory(_276,_277);}}else{if(_276){this._getSecurityAccessData(_278,_276,_27a,function(_27b){this._getActivities(_27b.userId,_27b.userColor);this._getEvents(_27b.userId,_27b.userColor);if(_279){this._getHistory(_27b.userId,_27b.userColor);}},this);}}}}this._schedulerLoaded=true;},_removeReccurringFromScheduler:function(_27c){if(this._reccurring){var list=this._reccurring[_27c];if(list&&list.length>0){dojo.publish("/entity/activity/clearSchedulerEvents",[list,this]);}}},_checkSecurityAccess:function(_27d,_27e,_27f,_280){this.accessData=false;if(!this._accessStore){this._accessStore=new _219({include:["$descriptors"],resourceKind:"activityresourceviews",service:_21a.getSDataService("dynamic")});}this._accessStore.fetch({predicate:"'"+_27e+"-"+_27d+"'",onComplete:function(_281){_27f.call(_280,_281);},onError:function(){_27f.call(_280,null);},scope:this});},_getSecurityAccessData:function(_282,_283,_284,_285,_286){if(this._selectedUsers[_283]&&this._selectedUsers[_283]["access"]){_285.call(_286,_284);}else{this._checkSecurityAccess(_282,_283,function(_287){if(_287){this._selectedUsers[_283]["access"]=[];this._selectedUsers[_283]["access"].allowAdd=_287.AllowAdd;this._selectedUsers[_283]["access"].allowEdit=_287.AllowEdit;this._selectedUsers[_283]["access"].allowDelete=_287.AllowDelete;}_285.call(_286,_284);},this);}},_reloadAllActivitiesByActivityId:function(_288){if(!this.allActivitiesStore){this.allActivitiesStore=_218({service:_21a.getSDataService("system"),resourceKind:"activities",include:["$descriptors,UserInfo"],select:["$key","Alarm","AlarmTime","Status","AccountId","AccountName","ActivityId","ContactId","ContactName","Description","Duration","LeadId","LeadName","OpportunityId","OpportunityName","TicketId","Recurring","StartDate","Timeless","Type","Priority","Notes","Phonenumber","Location","Leader/Userinfo/UserName","Useractivities/status","Useractivities/User/$key"],sort:[{attribute:"StartDate",descending:true}]});}this.allActivitiesStore.fetch({query:_21c.substitute("Id eq '${0}' and not Timeless and UserActivities.Status ne 'asDeclned'",[_288]),count:80,start:0,onComplete:this._onallActivitiesRequestComplete,scope:this});},_onallActivitiesRequestComplete:function(_289){dojo.require("Sage.Utility");dojo.require("dojo.date.locale");if(_289!=null&&_289!=undefined){this._schedulerEventsx=[];var _28a=null;for(var i=0;i<_289.length;i++){var _28b={};if(!_289[i].Timeless){var _28c=_289[i]["UserActivities"]["$resources"];if(_28c&&_28c.length>0){for(var j=0;j<_28c.length;j++){_28a=_28c[j]["User"]["$key"];_28a=lang.trim(_28a);if(this._isUserSelected(_28a)&&_28c[j]["Status"]!="asDeclned"){_28b=this._formatActivityObject(_289[i],_28a,_28c[j]["Status"]);if(_28b){this._schedulerEventsx.push(_28b);if(!this._userActivityData[_28a]){this._userActivityData[_28a]=[];this._userActivityData[_28a]["activities"]=[];}else{if(this._userActivityData[_28a]["activities"]){try{this._userActivityData[_28a]["activities"].removeByAttr("id",_28b.id);}catch(ex){}}}this._userActivityData[_28a]["activities"].push(_28b);}}}}}}dojo.publish("/entity/activity/loadScheduler",[dojo.clone(this._schedulerEventsx),this]);}},_getActivities:function(_28d,_28e){if(_28d==null){_28d=_21b.getClientContextByKey("userID");}_28d=lang.trim(_28d);self._currentUser=_28d;if(_28e==null||_28e==undefined){_28e="user1";}this._currentUserColor[_28d]=_28e;if(!this.activitiesStore){this.activitiesStore=_218({service:_21a.getSDataService("system"),resourceKind:"activities",include:["$descriptors"],select:["Alarm","AlarmTime","Attachment","Status","AccountId","AccountName","ActivityId","ContactId","ContactName","Description","Duration","LeadId","LeadName","OpportunityId","OpportunityName","TicketId","Recurring","StartDate","Timeless","Type","Priority","Notes","Phonenumber","Location","AllowEdit","AllowDelete","Leader/Userinfo/UserName","UserActivities","UserActivities/User","UserActivities/Status"],sort:[{attribute:"StartDate",descending:true}]});}var _28f={"me":this,"userId":_28d};this.activitiesStore.fetch({query:_21c.substitute("UserActivities.UserId eq '${0}' and not Timeless and UserActivities.Status ne 'asDeclned' and StartDate gt @${1}@ and StartDate lt @${2}@",[_28d,this._dateRangeStart,this._dateRangeEnd]),onComplete:this._onActivitiesRequestComplete,scope:_28f});},_getEvents:function(_290,_291){if(_290==null){_290=_21b.getClientContextByKey("userID");}_290=lang.trim(_290);this._currentUserColor[_290]=_291;if(!this.eventsStore){this.eventsStore=_218({service:_21a.getSDataService("dynamic"),resourceKind:"events",include:[],select:["Type","StartDate","EndDate","Location","Description","User"],sort:[{attribute:"StartDate",descending:true}]});}this.eventsStore.fetch({query:{conditions:_21c.substitute("UserId eq '${0}' and StartDate gt @${1}@ and StartDate lt @${2}@",[_290,this._dateRangeStart,this._dateRangeEnd])},onComplete:this._onEventsRequestComplete,scope:this});},_getHistory:function(_292,_293){if(_292==null){_292=_21b.getClientContextByKey("userID");}this._currentUserColor[_292]=_293;if(!this.historyActivitiesStore){this.historyActivitiesStore=_218({service:_21a.getSDataService("dynamic"),resourceKind:"history",include:["History"],select:["$key","UserId","ActivityId","AccountName","Category","CompletedDate","ContactId","ContactName","Description","Duration","LeadId","LeadName","LongNotes","Notes","OpportunityId","OpportunityName","Priority","Timeless","Type","Location","StartDate","EndDate"],sort:[{attribute:"StartDate",descending:true}]});}this.historyActivitiesStore.fetch({query:_21c.substitute("UserId eq '${0}' and not Timeless and StartDate gt @${1}@ and StartDate lt @${2}@ and Type in ('atPhoneCall','atToDo','atAppointment','atPersonal')",[_292,this._dateRangeStart,this._dateRangeEnd]),onComplete:this._onHistoryRequestComplete,scope:this});},_getHistoryItem:function(_294){if(!this._historyStore){this._historyStore=new _219({include:[],resourceKind:"history",service:_21a.getSDataService("dynamic")});}this._historyStore.fetch({predicate:"\""+_294+"\"",onComplete:this._receivedHistoryItem,scope:this});},_receivedHistoryItem:function(_295){var _296;var _297=lang.trim(_21b.getClientContextByKey("userID"));if(_295!=null&&_295!=undefined){_296=_295.UserId;if(this._selectedUsers[_296]){var _298=this._selectedUsers[_296]["loadHistoryOnStart"];if(_298){var _299={};_299=this._formatHistoryObject(_296,_295,_297);if(!this._isEmptyObject(_299)){if(!this._userActivityData[_296]){this._userActivityData[_296]={};}if(!this._userActivityData[_296]["history"]){this._userActivityData[_296]["history"]=[];}this._userActivityData[_296]["history"].push(_299);dojo.publish("/entity/activity/addToScheduler",[dojo.clone(_299),this]);}}}}},iframeRef:function(_29a){return _29a.contentWindow?_29a.contentWindow.document:_29a.contentDocument;},_getActivityUserId:function(_29b){var uId=null;if(_29b){var _29c=_29b.split(";");if(_29c&&_29c.length>1){uId=_29c[1].split("=")[1];}}return uId;},_getAccessData:function(_29d,_29e){var _29f=false;if(this._selectedUsers&&this._selectedUsers[_29d]&&this._selectedUsers[_29d]["access"]){switch(_29e){case "allowAdd":_29f=this._selectedUsers[_29d]["access"]["allowAdd"];break;case "allowEdit":_29f=this._selectedUsers[_29d]["access"]["allowEdit"];break;case "allowDelete":_29f=this._selectedUsers[_29d]["access"]["allowDelete"];break;}}return _29f;},_formatActivityObject:function(_2a0,_2a1,_2a2,_2a3){var _2a4,_2a5,text,_2a6;var _2a7={};var _2a8=false;if(!_2a3){_2a3=lang.trim(_21b.getClientContextByKey("userID"));}if(_2a1===lang.trim(_2a3)){_2a8=true;}if(_2a0!=null){if(_2a8){_2a7.id="0:";_2a7.id+=_2a0.$key;}else{_2a7.id=_2a0.$key;}_2a7.currentUser=_2a8;_2a7.id+="-"+_2a1;_2a7.id+="-act";_2a7.type="userActivity";_2a7.subType=_2a0.Type;_2a4=_2a0.StartDate;text=_2a0.ContactName;_2a7.text=(text==null)?"":text;_2a7.timeless=_2a0.Timeless;_2a7.alarm=_2a0.Alarm;if(_2a0["Leader"]){_2a7.leaderUserId=_2a0["Leader"]["$key"];}_2a7.alarmTime=Sage.Utility.Convert.toDateFromString(_2a0.AlarmTime);_2a7.duration=_2a0.Duration;_2a7.description=_2a0.Description;_2a7.contactId=_2a0.ContactId;_2a7.contactName=_2a0.ContactName;_2a7.accountId=_2a0.AccountId;_2a7.accountName=_2a0.AccountName;_2a7.leadId=_2a0.LeadId;_2a7.leadName=_2a0.LeadName;_2a7.regarding=_2a0.Description;_2a7.priority=_2a0.Priority;_2a7.notes=_2a0.Notes;_2a7.phoneNumber=_2a0.PhoneNumber;_2a7.opportunityId=_2a0.OpportunityId;_2a7.opportunity=_2a0.OpportunityName;_2a7.recurring=_2a0.$key.indexOf(";")>0?true:false;if(_2a8){_2a7.allowDelete=true;_2a7.allowEdit=_2a0.AllowEdit;}else{_2a7.allowDelete=this._getAccessData(_2a1,"allowDelete");_2a7.allowEdit=this._getAccessData(_2a1,"allowEdit");}_2a7.ticketId=_2a0.TicketId;if(_2a7.recurring){this._updateReccurring(_2a7.id);}_2a7.attachment=_2a0.Attachment;_2a7.location=_2a0.Location;switch(_2a0.Type.toUpperCase()){case "ATTODO":_2a6=this.toDoIconUrl;break;case "ATAPPOINTMENT":_2a6=this.meetingIconUrl;break;case "ATPHONECALL":_2a6=this.phoneCallIconUrl;break;case "ATPERSONAL":_2a6=this.personalActivityIconUrl;break;}_2a7.iconSrc=_2a6;_2a7.userColor=this._currentUserColor[_2a1];var _2a9=true;if(_2a2){switch(_2a2){case "asAccepted":_2a9=true;break;case "asUnconfirmed":_2a9=false;break;}}_2a7.confirmed=_2a9;_2a7.start_date=_21b.Activity.formatActivityStartDateForCalendar(_2a0.StartDate);_2a7.end_date=_21b.Activity.formatActivityEndDateForCalendar(_2a0.StartDate,_2a7.duration);if(_2a7.alarmTime){_2a7.alarmMinutesBefore=dojo.date.difference(Sage.Utility.Convert.toDateFromString(_2a0.StartDate),_2a7.alarmTime,"minute");}}return _2a7;},_formatEventObject:function(_2aa,_2ab){var _2ac={};if(_2aa!=null){_2ac.id=_2aa.$key;_2ac.id+="-evt";_2ac.type="event";_2ac.subType=_2aa.Type;_2ac.description=_2aa.Description;_2ac.location=_2aa.Location;_2ac.text=_2aa.Type;_2ac.userColor=this._currentUserColor[_2ab];_2ac.start_date=_21b.Activity.formatActivityStartDateForCalendar(_2aa.StartDate,"MM/d/yy 0:00");_2ac.end_date=_21b.Activity.formatActivityStartDateForCalendar(_2aa.EndDate,"MM/d/yy 24:00");}return _2ac;},_updateUserActivityDataCollection:function(_2ad,_2ae){if(!this._userActivityData[_2ad]){this._userActivityData[_2ad]=[];}if(!this._userActivityData[_2ad]["activities"]){this._userActivityData[_2ad]["activities"]=[];}this._userActivityData[_2ad]["activities"].push(_2ae);},_onActivitiesRequestComplete:function(_2af,_2b0){var _2b1=_2b0.scope.userId;var _2b2=_2b0.scope.me;if(_2af!=null&&_2af!=undefined){_2b2._schedulerEvents=[];var _2b3=null;var _2b4=null;var _2b5=_21b.getClientContextByKey("userID");for(var i=0;i<_2af.length;i++){var _2b6={};if(!_2af[i].Timeless){if(_2af[i]["UserActivities"]){if(_2af[i]["UserActivities"]["$resources"]){for(var j=0;j<_2af[i]["UserActivities"]["$resources"].length;j++){if(_2af[i]["UserActivities"]["$resources"][j]["User"]){if(_2b1==_2af[i]["UserActivities"]["$resources"][j]["User"]["$key"]){_2b3=_2af[i]["UserActivities"]["$resources"][j]["User"]["$key"];_2b3=lang.trim(_2b3);_2b4=_2af[i]["UserActivities"]["$resources"][j]["Status"];_2b6=_2b2._formatActivityObject(_2af[i],_2b3,_2b4,_2b5);_2b2._updateUserActivityDataCollection(_2b3,_2b6);}}}}}else{if(_2af[i]["Leader"]){_2b3=_2af[i]["Leader"]["$key"];_2b3=lang.trim(_2b3);_2b6=_2b2._formatActivityObject(_2af[i],_2b3,_2b5);_2b2._updateUserActivityDataCollection(_2b3,_2b6);_2b3=null;}}}if(!_2b2._isEmptyObject(_2b6)){_2b2._schedulerEvents.push(_2b6);}}dojo.publish("/entity/activity/loadScheduler",[dojo.clone(_2b2._schedulerEvents),_2b2]);}},_onEventsRequestComplete:function(_2b7){dojo.require("Sage.Utility");dojo.require("dojo.date.locale");if(_2b7!=null&&_2b7!=undefined){this._schedulerEvents1=[];var _2b8=null;for(var i=0;i<_2b7.length;i++){var _2b9={};if(!_2b8){_2b8=_2b7[i]["User"]["$key"];}_2b8=lang.trim(_2b8);_2b9=this._formatEventObject(_2b7[i],_2b8);if(_2b9){this._schedulerEvents1.push(_2b9);}}if(!this._userActivityData[_2b8]){this._userActivityData[_2b8]={};}this._userActivityData[_2b8]["events"]=this._schedulerEvents1;dojo.publish("/entity/activity/loadScheduler",[dojo.clone(this._schedulerEvents1),this]);}},_formatHistoryObject:function(_2ba,_2bb,_2bc){var _2bd={};var _2be="";var text;_2ba=lang.trim(_2ba);if(!_2bb.Timeless){if(_2ba==lang.trim(_2bc)){_2bd.id="0:";_2bd.id+=_2bb.$key;}else{_2bd.id=_2bb.$key;}_2bd.id+="-"+_2ba;_2bd.id+="-hist";_2bd.type="userHistoryActivity";_2bd.activityId=_2bb.ActivityId;_2bd.subType=_2bb.Type;text=_2bb.ContactName;_2bd.text=(text==null)?"":text;_2bd.timeless=_2bb.Timeless;_2bd.duration=_2bb.Duration;_2bd.description=_2bb.Description;_2bd.contactName=_2bb.ContactName;_2bd.accountName=_2bb.AccountName;_2bd.leadName=_2bb.LeadName;_2bd.regarding=_2bb.Description;_2bd.priority=_2bb.Priority;_2bd.notes=_2bb.Notes;_2bd.location=_2bb.Location;_2bd.opportunity=_2bb.OpportunityName;_2bd.userColor=this._currentUserColor[_2ba];_2bd.confirmed=true;switch(_2bb.Type.toUpperCase()){case "ATTODO":_2be=this.toDoIconUrl;break;case "ATAPPOINTMENT":_2be=this.meetingIconUrl;break;case "ATPHONECALL":_2be=this.phoneCallIconUrl;break;case "ATPERSONALACTIVITY":_2be=this.personalActivityIconUrl;break;}_2bd.iconSrc=_2be;_2bd.start_date=_21b.Activity.formatActivityStartDateForCalendar(_2bb.CompletedDate);_2bd.end_date=_21b.Activity.formatActivityEndDateForCalendar(_2bb.CompletedDate,_2bd.duration);}return _2bd;},_onHistoryRequestComplete:function(_2bf){if(_2bf!=null&&_2bf!=undefined){var _2c0=[];var text;var _2c1=null;var _2c2=lang.trim(_21b.getClientContextByKey("userID"));for(var i=0;i<_2bf.length;i++){var _2c3={};_2c1=_2bf[i].UserId;_2c3=this._formatHistoryObject(_2c1,_2bf[i],_2c2);if(!this._isEmptyObject(_2c3)){_2c0.push(_2c3);}}if(!this._userActivityData[_2c1]){this._userActivityData[_2c1]={};}this._userActivityData[_2c1]["history"]=_2c0;dojo.publish("/entity/activity/loadScheduler",[dojo.clone(_2c0),this]);}},_getEventColorByUser:function(_2c4){var _2c5="#d5e2bd";for(var i=0;i<this._calendarUsers.length;i++){if(this._calendarUsers[i].userId==_2c4){_2c5=this._calendarUsers[i].eventColor;}}return _2c5;},_isEmptyObject:function(obj){for(var i in obj){return false;}return true;}});return _21f;});},"Sage/QuickForms/Design/main":function(){define("Sage/QuickForms/Design/main",["Sage/QuickForms/Design/CheckBoxControlDesigner","Sage/QuickForms/Design/ColumnDesigner","Sage/QuickForms/Design/ComboBoxControlDesigner","Sage/QuickForms/Design/ControlDesigner","Sage/QuickForms/Design/ControlDesignerRegistry","Sage/QuickForms/Design/CurrencyControlDesigner","Sage/QuickForms/Design/DataGridControlDesigner","Sage/QuickForms/Design/DataSourceDesigner","Sage/QuickForms/Design/DataSourcePanel","Sage/QuickForms/Design/DateTimePickerControlDesigner","Sage/QuickForms/Design/DesignPanel","Sage/QuickForms/Design/DesignSurface","Sage/QuickForms/Design/EmailControlDesigner","Sage/QuickForms/Design/FormDesigner","Sage/QuickForms/Design/GenericControlDesigner","Sage/QuickForms/Design/Help","Sage/QuickForms/Design/HiddenControlDesigner","Sage/QuickForms/Design/NonVisibleControlContainer","Sage/QuickForms/Design/NumericControlDesigner","Sage/QuickForms/Design/OwnerControlDesigner","Sage/QuickForms/Design/PhoneControlDesigner","Sage/QuickForms/Design/PickListControlDesigner","Sage/QuickForms/Design/PropertyEditorContainer","Sage/QuickForms/Design/PropertyValueError","Sage/QuickForms/Design/RowDesigner","Sage/QuickForms/Design/TextBoxControlDesigner","Sage/QuickForms/Design/UrlControlDesigner","Sage/QuickForms/Design/UserControlDesigner","Sage/QuickForms/Design/EditableGridControlDesigner"],function(){});},"Sage/Utility/File/Attachment":function(){define("Sage/Utility/File/Attachment",["Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility/File","Sage/UI/Dialogs","dojo/_base/lang","dojo/string","Sage/Utility","Sage/Utility/File/DescriptionsForm","dojo/i18n","dojo/i18n!./nls/Attachment"],function(_2c6,_2c7,_2c8,_2c9,_2ca,_2cb,_2cc,_2cd,i18n){Sage.namespace("Utility.File.Attachment");Sage.Utility.File.Attachment={percentComplete:"Uploading, please wait...",_store:false,_totalProgress:0,_attachmentTemplate:false,_mixinsByName:{},_files:[],_fileCount:0,_filesUploadedCount:0,_isUploading:false,_descriptionsForm:false,_uploadUrl:"slxdata.ashx/slx/system/-/attachments/file",createAttachments:function(_2ce){var _2cf="";if(Sage.Services.hasService("ClientEntityContext")){var _2d0=Sage.Services.getService("ClientEntityContext");var _2d1=_2d0.getContext();_2cf=_2d1.Description||"";}this._ensureDescriptionsForm();this._descriptionsForm.set("entityDesc",_2cf);this._descriptionsForm.set("files",_2ce);this._descriptionsForm.show();},createAttachmentSilent:function(file,_2d2){if(!_2d2.hasOwnProperty("description")){_2d2["description"]=this.getDefaultDescription(file.name);}this._mixinsByName[file.name]=_2ca.mixin(_2d2,{attachDate:_2cc.Convert.toIsoStringFromDate(new Date()),dataType:"R"});this._files.push(file);if(!this._attachmentTemplate){this.getAttachmentTemplate(this.uploadFiles,this);}else{this.uploadFiles();}},handleDescriptions:function(_2d3,_2d4){var _2d5="";var id="";this.getKnownRelationships(function(rels){var _2d6=_2ca.mixin(rels,{attachDate:_2cc.Convert.toIsoStringFromDate(new Date()),dataType:"R",user:{"$key":_2cc.getClientContextByKey("userID")||""}});for(var i=0;i<_2d4.length;i++){_2d4[i][_2d5]=id;this._mixinsByName[_2d4[i].fileName]=_2ca.mixin(_2d4[i],_2d6);}for(i=0;i<_2d3.length;i++){this._files.push(_2d3[i]);}if(!this._attachmentTemplate){this.getAttachmentTemplate(this.uploadFiles,this);}else{this.uploadFiles();}},this);},uploadFiles:function(_2d7){this._isUploading=true;this._fileCount=this._files.length;if(_2d7&&!this._attachmentTemplate){this._attachmentTemplate=_2d7;}while(this._files.length>0){var file=this._files.pop();Sage.Utility.File.uploadFile(file,this._uploadUrl,this._updateProgress,this._successUpload,this._failAdd,this);}},_successUpload:function(_2d8){var url=_2d8.getResponseHeader("Location");var re=/\'\w+\'/g;var _2d9=url.match(re);if(_2d9){var id=_2d9[0].replace(/\'/g,"");var _2da=new _2c6({resourceKind:"attachments",service:_2c7.getSDataService("system")});_2da.fetch({predicate:"\""+id+"\"",onComplete:function(_2db){var _2dc=this._mixinsByName[_2db.fileName];if(_2dc){_2db=_2ca.mixin(_2db,_2dc);_2da.save({scope:this,success:this._successAddEntity,failure:this._failAdd});}delete (this._mixinsByName[_2db.fileName]);},beforeRequest:function(req){req.setQueryArg("_includeFile","false");},onError:this._failAdd,scope:this});}this._filesUploadedCount=this._filesUploadedCount+1;this._updateProgress((this._fileCount<1)?100:(this._filesUploadedCount/this._fileCount)*100);},_successAddEntity:function(_2dd){dojo.publish("/entity/attachment/create",_2dd);},getAttachment:function(id){if(id&&id.length===12){window.open("slxdata.ashx/slx/system/-/attachments('"+id+"')/file","file");}},getAttachmentTemplate:function(_2de,_2df){_2c8.Attachment._createStore();_2c8.Attachment._store.newItem({onComplete:_2de,scope:_2df||this});},getDefaultDescription:function(_2e0){this._ensureDescriptionsForm();return this._descriptionsForm.getDefaultDescription(_2e0);},_createStore:function(){if(!_2c8.Attachment._store){_2c8.Attachment._store=new _2c6({resourceKind:"attachments",service:_2c7.getSDataService("system")});}},_updateProgress:function(_2e1){var pct=this._totalProgress;if(_2e1&&_2e1.lengthComputable){var _2e2=(_2e1.loaded/_2e1.total)*100;pct+=Math.round(_2e2/this._fileCount);}else{if(_2e1){pct=_2e1;}}this._totalProgress=pct;if(pct<99){_2c9.showProgressBar({pct:pct,title:this.percentComplete});}else{_2c9.closeProgressBar();this._resetCounts();}},_resetCounts:function(){this._fileCount=0;this._filesUploadedCount=0;this._isUploading=false;this._totalProgress=0;},_failAdd:function(resp){},_successUpdate:function(_2e3){dojo.publish("/entity/attachment/update",_2e3);},_ensureDescriptionsForm:function(){if(!this._descriptionsForm){this._descriptionsForm=new _2cd({entityDesc:"",files:this._files||[]});dojo.connect(this._descriptionsForm,"onDescriptionsEntered",this,"handleDescriptions");}},getKnownRelationships:function(_2e4,_2e5,_2e6){var _2e7={};if(Sage.Services.hasService("ClientEntityContext")){var _2e8=Sage.Services.getService("ClientEntityContext");var _2e9=_2e8.getContext();var _2ea=_2e9.EntityType.split(".");var _2eb=_2ea[_2ea.length-1];if(_2e9.EntityId!==""){var id=_2e9.EntityId;switch(_2eb){case "IContact":this._getContactRelationships(id,_2e4,_2e5);return;case "IOpportunity":this._getOpportunityRelationships(id,_2e4,_2e5);return;case "ITicket":this._getTicketRelationships(id,_2e4,_2e5);return;case "ISalesOrder":this._getSalesOrderRelationships(id,_2e4,_2e5);return;case "IActivity":this._getActivityRelationships(id,_2e4,_2e5);return;case "IHistory":this._getHistoryRelationships(id,_2e4,_2e5);return;case "IContract":this._getContractRelationships(id,_2e4,_2e5);return;case "IReturn":this._getReturnRelationships(id,_2e4,_2e5);return;}var _2ec=_2e9.EntityTableName.toLowerCase()+"Id";_2e7[_2ec]=id;_2e4.call(_2e5||this,_2e7);return;}else{if(_2eb==="IActivity"&&_2e6){this._getInsertActivityRelationships(_2e4,_2e5);return;}else{if(_2eb==="IHistory"&&_2e6){this._getInsertHistoryRelationships(_2e4,_2e5);return;}}}}_2e4.call(_2e5||this,{});},_getRequest:function(_2ed,id){var req=new Sage.SData.Client.SDataSingleResourceRequest(_2c7.getSDataService("dynamic"));req.setResourceKind(_2ed);req.setResourceSelector("\""+id+"\"");req.setQueryArg("precedence","0");return req;},_getContactRelationships:function(id,_2ee,_2ef){var req=this._getRequest("contacts",id);req.setQueryArg("include","Account");req.read({success:function(_2f0){var obj={accountId:_2cc.getValue(_2f0,"Account.$key"),contactId:_2f0.$key};_2ee.call(_2ef||this,obj);},failure:function(){_2ee.call(_2ef||this,{"contactId":id});},scope:this});},_getOpportunityRelationships:function(id,_2f1,_2f2){var req=this._getRequest("opportunities",id);req.setQueryArg("include","Account,Contacts");req.setQueryArg("select","Contacts/IsPrimary,Account/Id");req.read({success:function(opp){var obj={accountId:_2cc.getValue(opp,"Account.$key"),opportunityId:opp.$key};var _2f3="";var _2f4=opp.Contacts.$resources;if(_2f4.length>0){_2f3=_2f4[0].$key;}for(var i=0;i<_2f4.length;i++){if(_2f4[i].IsPrimary){_2f3=_2f4[i].$key;}}obj["contactId"]=_2f3;_2f1.call(_2f2||this,obj);},failure:function(){_2f1.call(_2f2||this,{"opportunityId":id});},scope:this});},_getSalesOrderRelationships:function(id,_2f5,_2f6){var req=this._getRequest("salesorders",id);req.setQueryArg("include","Account");req.read({success:function(so){var obj={accountId:_2cc.getValue(so,"Account.$key"),salesOrderId:so.$key};_2f5.call(_2f6||this,obj);},failure:function(){_2f5.call(_2f6||this,{"salesOrderId":id});},scope:this});},_getTicketRelationships:function(id,_2f7,_2f8){var req=this._getRequest("tickets",id);req.setQueryArg("include","Account,Contact");req.read({success:function(_2f9){var obj={accountId:_2cc.getValue(_2f9,"Account.$key"),ticketId:_2f9.$key,contactId:_2cc.getValue(_2f9,"Contact.$key")};_2f7.call(_2f8||this,obj);},failure:function(){_2f7.call(_2f8||this,{"ticketId":id});},scope:this});},_getReturnRelationships:function(id,_2fa,_2fb){var req=this._getRequest("returns",id);req.setQueryArg("include","Account,Contact,Ticket");req.read({success:function(rma){var obj={returnId:rma.$key,accountId:_2cc.getValue(rma,"Account.$key"),ticketId:_2cc.getValue(rma,"Ticket.$key"),contactId:_2cc.getValue(rma,"Contact.$key")};_2fa.call(_2fb||this,obj);},failure:function(){_2fa.call(_2fb||this,{returnId:id});},scope:this});},_getActivityRelationships:function(id,_2fc,_2fd){var req=this._getRequest("activities",id);req.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId");req.read({success:function(_2fe){var obj={accountId:_2cc.getValue(_2fe,"AccountId"),activityId:_2fe.$key,contactId:_2cc.getValue(_2fe,"ContactId"),leadId:_2cc.getValue(_2fe,"LeadId"),opportunityId:_2cc.getValue(_2fe,"OpportunityId"),ticketId:_2cc.getValue(_2fe,"TicketId")};_2fc.call(_2fd||this,obj);},failure:function(){_2fc.call(_2fd||this,{"activityId":id});},scope:this});},_getInsertActivityRelationships:function(_2ff,_300){var ed=dijit.byId("activityEditor");if(ed){var obj=ed.getRelationshipsForAttachments();_2ff.call(_300||this,obj);return;}_2ff.call(_300||this,{"activityId":""});},_getHistoryRelationships:function(id,_301,_302){var req=this._getRequest("history",id);req.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId");req.read({success:function(_303){var obj={accountId:_2cc.getValue(_303,"AccountId"),historyId:_303.$key,contactId:_2cc.getValue(_303,"ContactId"),leadId:_2cc.getValue(_303,"LeadId"),opportunityId:_2cc.getValue(_303,"OpportunityId"),ticketId:_2cc.getValue(_303,"TicketId")};_301.call(_302||this,obj);},failure:function(){_301.call(_302||this,{"historyId":id});},scope:this});},_getInsertHistoryRelationships:function(_304,_305){var ed=dijit.byId("historyEditor");if(ed){var obj=ed.getRelationshipsForAttachments();_304.call(_305||this,obj);return;}_304.call(_305||this,{"historyId":""});},_getContractRelationships:function(id,_306,_307){var req=this._getRequest("contracts",id);req.setQueryArg("include","Account,Contact");req.read({success:function(_308){var obj={accountId:_2cc.getValue(_308,"Account.$key"),contractId:_308.$key,contactId:_2cc.getValue(_308,"Contact.$key")};_306.call(_307||this,obj);},failure:function(){_306.call(_307||this,{"ticketId":id});},scope:this});},remoteRequestAttachment:function(_309){var _30a={"$name":"RequestAttachment","request":{"entity":{"$key":_309},AttachmentId:_309}};var _30b=new Sage.SData.Client.SDataServiceOperationRequest(_2c7.getSDataService("system")).setResourceKind("attachments").setOperationName("RequestAttachment");_30b.execute(_30a,{success:function(_30c){dojo.publish("/entity/attachment/requested",_30c);}});}};return Sage.Utility.File.Attachment=dojo.mixin(Sage.Utility.File.Attachment,i18n.getLocalization("Sage.Utility.File","Attachment"));});},"Sage/QuickForms/Design/Editors/NumericAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/NumericAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/NumericAdvancedPropertyEditor"],function(_30d,lang,_30e,_30f,_310,_311,_312,_313,_314,_315,_316){return _30d("Sage.QuickForms.Design.Editors.NumericAdvancedPropertyEditor",[_30e,_314,_313],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","<div class=\"editor-field\" title=\"{%= $.formatTypeTooltipText %}\">","<label>{%= $.formatTypeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_formatType\" data-dojo-attach-event=\"onChange:_onFormatTypeChange\">","{% for (var format in $.numberFormatText) { %}","<span value=\"{%= format %}\">{%= $.numberFormatText[format] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.maxLengthTooltipText %}\">","<label>{%= $.maxLengthText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_maxLength\" data-dojo-attach-event=\"onChange:_onMaxLengthChange\" data-dojo-props=\"constraints:{min:-1,places:0}\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.decimalDigitsTooltipText %}\">","<label>{%= $.decimalDigitsText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_decimalDigits\" data-dojo-props=\"constraints:{min:-1,max:100,places:0}\" data-dojo-attach-event=\"onChange:_onDecimalDigitsChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.strictTooltipText %}\">","<label>{%= $.strictText %}</label>","<div data-dojo-attach-point=\"_strict\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onStrictChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_isReadOnly:null,_defaultDataBinding:null,_formatType:null,_maxLength:null,_required:null,_strict:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",decimalDigitsText:"Decimal Digits:",decimalDigitsTooltipText:"The number of digits after the decimal to display and allow for data entry.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",formatTypeText:"Format Type:",formatTypeTooltipText:"Type of format to use when converting number to string.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",strictText:"Strict:",strictTooltipText:"Pads display of number with trailing zeros as necessary.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",numberFormatText:{"Number":"Number","Percent":"Percent","Decimal":"Decimal","Scientific":"Scientific"},labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},constructor:function(){lang.mixin(this,_316);},setup:function(){this.inherited(arguments);this._controlId.set("value",this._designer.get("controlId"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._controlType.set("value",this._designer.get("controlName"));this._decimalDigits.set("value",this._designer.get("decimalDigits"));this._enabled.set("value",this._designer.get("enabled"));this._formatType.set("value",this._designer.get("formatType"));this._maxLength.set("value",this._designer.get("maxLength"));this._required.set("value",this._designer.get("required"));this._strict.set("value",this._designer.get("strict"));this._visible.set("value",this._designer.get("visible"));var _317=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_317&&_317["DataItemName"])||"");},_onControlTypeChange:function(_318){},_onControlIdChange:function(_319){},_onDefaultDataBindingChange:function(_31a){},_onEnabledChange:function(_31b){if(this.isSuspended()){return;}this._designer.set("enabled",_31b);},_onDecimalDigitsChange:function(_31c){if(this.isSuspended()||!this._decimalDigits.isValid()){return;}this._designer.set("decimalDigits",_31c);},_onFormatTypeChange:function(_31d){if(this.isSuspended()){return;}this._designer.set("formatType",_31d);},_onControlLabelPlacementChange:function(_31e){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",_31e);},_onMaxLengthChange:function(_31f){if(this.isSuspended()||!this._maxLength.isValid()){return;}this._designer.set("maxLength",_31f);},_onRequiredChange:function(_320){if(this.isSuspended()){return;}this._designer.set("required",_320);},_onStrictChange:function(_321){if(this.isSuspended()){return;}this._designer.set("strict",_321);},_onVisibleChange:function(_322){if(this.isSuspended()){return;}this._designer.set("visible",_322);}});});},"Sage/QuickForms/Design/nls/NumericControlDesigner":function(){define("Sage/QuickForms/Design/nls/NumericControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_323,lang){var nls={root:{displayNameText:"Numeric"}};return lang.mixin(_323,nls);});},"Sage/QuickForms/Design/Editors/nls/_PropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/_PropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_324,lang){var nls={root:{titleText:"Properties"}};return lang.mixin(_324,nls);});},"url:Sage/UI/Columns/templates/DndCell.html":"<div>\r\n    <div data-dojo-type=\"dojo.dnd.Source\" dojoAttachPoint=\"sourceNode\" copyOnly=\"true\" accept=\"\">\r\n        <div class=\"dojoDndItem\" dojoAttachPoint=\"dndItem\"></div>\r\n    </div>\r\n</div>\r\n","Sage/Services/nls/ActivityActionProcessor":function(){define("Sage/Services/nls/ActivityActionProcessor",["Sage/LanguageList","dojo/_base/lang"],function(_325,lang){var nls={root:{btnOkayText:"OK",btnCancelText:"Cancel",btnCloseText:"Close",btnHelpText:"Help",processingText:"Processing request please wait...",failureText:"I'm sorry, the action was not successful an error occurred.",titleText:"Process"}};return lang.mixin(_325,nls);});},"Sage/UI/Controls/SummaryAggregate":function(){define("Sage/UI/Controls/SummaryAggregate",["dijit/_Widget","Sage/_Templated","dijit/Tooltip","Sage/UI/GridMenuItem","Sage/Data/BaseSDataStore","Sage/UI/Columns/SlxLink","Sage/UI/Columns/Phone","dojo/i18n!../nls/SDataLookup","dojo/_base/declare"],function(_326,_327,_328,_329,_32a,_32b,_32c,_32d,_32e){var _32f=_32e("Sage.UI.Controls.SummaryAggregate",[_326,_327],{loadingText:_32d.loadingText,noDataText:_32d.noDataText,widgetsInTemplate:true,value:"",content:"",valueNode:null,linkTabName:"",entityId:"",linkPage:"",toolTip:false,_button:null,_menu:null,store:false,grid:false,popupStructure:null,resourceKind:"",select:null,where:"",widgetTemplate:new Simplate(["<span>","<button data-dojo-type=\"dijit.form.ComboButton\" data-dojo-attach-point=\"_button\" data-dojo-attach-event=\"onClick:_click\" >","<div data-dojo-type=\"dijit.Menu\" data-dojo-attach-point=\"_menu\">","</div>","</button>","</span>"]),constructor:function(){this.select=[];this.popupStructure=[];this.inherited(arguments);},_click:function(){if(!this.linkPage){this._findlinkPage();}var url=this.linkPage+"?entityid="+this.entityId||"";if(this.linkTabName){url=url+"&activetab="+this.linkTabName;}document.location=url;},_setValueAttr:function(_330){this.value=_330;this._button.set("label",_330);},startup:function(){this.inherited(arguments);if(!this.store){if(this.select.length===0){this.select.push("id");for(var i=0;i<this.popupStructure.length;i++){this.select.push(this.popupStructure[i]["field"]);}}this.store=new _32a({service:Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),resourceKind:this.resourceKind,select:this.select});}if(!this.grid){this.grid=new _329({gridOptions:{store:this.store,rowsPerPage:40,structure:this.popupStructure,loadingMessage:this.loadingText,noDataMessage:this.noDataText,selectionMode:"single",query:this.where.replace(/~magicquote~/g,"'"),height:"250px",width:"300px"}});this._menu.addChild(this.grid);this._menu.set("style",{width:"350px"});this.grid.startup();}},_findlinkPage:function(){if(!this.linkPage){var url=document.location.href;if(url.indexOf("?")>-1){this.linkPage=url.substring(0,url.indexOf("?"));}}},destroy:function(){this.inherited(arguments);if(this.grid){this.grid.destroy();}}});Sage.UI.Controls.SummaryAggregate.markupFactory=function(_331,node,ctor){var _332=function(n){var w=d.attr(n,"width")||"auto";if((w!="auto")&&(w.slice(-2)!="em")&&(w.slice(-1)!="%")){w=parseInt(w,10)+"px";}return w;};if(!_331.popupStructure){var d=dojo;var _333=[];var _334=isMultiCurrencyEnabled();d.query("> span",node).forEach(function(span,_335){var cell={name:d.trim(d.attr(span,"name")||span.innerHTML),type:d.attr(span,"cellType")||false,field:d.trim(d.attr(span,"field")||""),id:d.trim(d.attr(span,"id")||""),idField:d.trim(d.attr(span,"idField")||""),queryParams:d.trim(d.attr(span,"queryParams")||""),pageName:d.trim(d.attr(span,"pageName")||""),image:d.trim(d.attr(span,"icon")||""),multiCurrency:_334,exchangeRateType:d.trim(d.attr(span,"exchangeRateType")||"")};if(d.hasAttr(span,"width")){cell["width"]=_332(span);}cell.type=cell.type?dojo.getObject(cell.type):dojox.grid.cells.Cell;if(cell.type&&cell.type.markupFactory){cell.type.markupFactory(span,cell);}if(cell.name==="&nbsp;"||cell.name===""){cell.name=cell.field;}_333.push(cell);});_331.popupStructure=_333;}return new ctor(_331,node);};return _32f;});},"Sage/QuickForms/Design/Editors/nls/TextBoxBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/TextBoxBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_336,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",linesText:"Lines:",linesTooltipText:"Number of lines of text displayed.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"}}};return lang.mixin(_336,nls);});},"Sage/MainView/ActivityMgr/nls/QuickCompleteEditor":function(){define("Sage/MainView/ActivityMgr/nls/QuickCompleteEditor",["Sage/LanguageList","dojo/_base/lang"],function(_337,lang){var nls={root:{lblResultText:"Result:",lblNoteText:"Note (append to all items):",btnCompleteIndividuallyText:"Individually",btnAsScheduledText:"As Scheduled",btnCompleteNowText:"Now",btnCancelText:"Cancel",btnCloseText:"Close",btnHelpText:"Help",resultCompletedText:"Complete",titleText:"Quick Complete"}};return lang.mixin(_337,nls);});},"Sage/UI/Filters/CheckBoxFilter":function(){define("Sage/UI/Filters/CheckBoxFilter",["dijit/_Widget","dijit/_Contained","dojo/NodeList-traverse","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/_ActionMixin","dojo/string","dojo/on","dojo/_base/lang","dojo/dom-construct","./EditFilterItems","dojo/_base/array","dojo/query","dojo/dom-attr","dojo/i18n!./nls/CheckBoxFilter","Sage/Utility","Sage/Utility/Filters","dojo/json","dijit/registry","dojo/_base/declare"],function(_338,_339,_33a,_33b,_33c,_33d,_33e,on,lang,_33f,_340,_341,_342,_343,nls,_344,_345,json,_346,_347){var _348=_347("Sage.UI.Filters.CheckBoxFilter",[_338,_339,_33c,_33d,_33b],{attributeMap:{"content":{node:"listNode",type:"innerHTML"}},serviceMap:{"groupContextService":"ClientGroupContext","systemDataService":{type:"sdata",name:"system"}},widgetsInTemplate:false,widgetTemplate:new Simplate(["<div class=\"filter-type-checkbox filter-collapsed\">","<h3 data-action=\"toggleExpand\" data-dojo-attach-point=\"filterNameNode\">{%: $.filter.displayName || $.filter.filterName %}","</h3>","<ul class=\"filter-loading-indicator\"><li><span>{%: $.loadingText %}</span></li></ul>","<a href=\"#\" class=\"filter-clear\" data-dojo-attach-point=\"clearLinkNode\">{%: $.clearText %}</a>","<span class=\"filter-sep\" data-dojo-attach-point=\"linkSep\"> | </span>","<a href=\"#\" class=\"filter-edit-items\" data-dojo-attach-point=\"moreLinkNode\">{%: $.moreText %}</a>","<ul class=\"filter-list\" data-dojo-attach-point=\"listNode\"></ul>","</div>"]),itemTemplate:new Simplate(["<li data-action=\"toggleSelect\" class=\"{%= $.selected ? \"filter-selected\" : \"\" %}\" data-name=\"{%= $.name %}\" data-selected=\"{%= !!$.selected %}\">","<div>","<span class=\"p-selection\">&nbsp;</span>","<span class=\"p-label\">{%: $$._formatLabelText($.$descriptor, $.name) %}</span>","{% if ($.value > -1) { %}","&nbsp;<span class=\"p-spacer\">(</span>","<span class=\"p-count\">{%: $.value %}</span>","<span class=\"p-spacer\"> {%: $.ofText %} </span>","<span class=\"p-total\">{%: $.value %}</span>","<span class=\"p-spacer\">)</span>","{% } %}","</div>","</li>"]),_activeFilterCount:0,_loaded:false,_selected:null,_ranges:null,_filterGroup:null,_filterSubscriptions:null,appliedValues:null,parent:null,_originalActiveFilter:"",loadingText:"Loading...",moreText:"Add/Remove Items",clearText:"Clear",emptyText:"(empty)",nullText:"(null)",ofText:"of",nullName:"SLX_NULL",emptyName:"SLX_EMPTY",filterGroup:"default",filter:null,store:null,editFilterItems:null,editFilterItemsHandle:null,output:null,entries:[],expanded:false,FILTER_UPDATE_DELAY:1000,lazyUpdateCounts:null,count:1000,loading:true,groupId:"",constructor:function(){this.inherited(arguments);this.output=[];this.entries=[];lang.mixin(this,nls);},postMixInProperties:function(){this.inherited(arguments);this._selected={};var _349=this._isRangeFilter();if(_349){this.store.request.setQueryArg("orderby","");this.compileRanges(_349.ranges);}if(this.expanded){this.expanded=false;setTimeout(lang.hitch(this,this._toggleExpand),500);}else{if(this.appliedValues){setTimeout(lang.hitch(this,this._loadItems),500);}}if(this.store&&this.store.request&&this.store.request.getQueryArg){this._originalActiveFilter=this.store.request.getQueryArg("_activeFilter");}},postCreate:function(){this.inherited(arguments);var _34a=false;if(this.configurationProvider.getFilterFormatter){var _34b=this.configurationProvider.getFilterFormatter(this.filter);if(_34b){_34a=true;}}if(!this._isDistinctFilter()||_34a){_33f.destroy(this.moreLinkNode);_33f.destroy(this.linkSep);}else{this.editFilterItemsHandle=on(this.moreLinkNode,"click",lang.hitch(this,this._moreLinkClicked));}on(this.clearLinkNode,"click",lang.hitch(this,this._clearLinkClicked));var id=this.filter.$key+"_editFilterItems",_34c=_346.byId(id);this.editFilterItems=_34c||new _340({id:id,store:this.store,filter:this.filter,filterPanel:this.parent,parent:this});},_clearLinkClicked:function(){var q=_342("li.filter-selected",this.listNode),evt;_341.forEach(q,function(node){if(node.click){node.click();}else{evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);node.dispatchEvent(evt);}});},_moreLinkClicked:function(e){if(this._originalActiveFilter){this.editFilterItems.baseFilter=this._originalActiveFilter;}this.editFilterItems.showDialog();e.cancelBubble=true;},uninitialize:function(){this.inherited(arguments);if(this.editFilterItems){this.editFilterItems.destroy(false);}if(this.editFilterItemsHandle){this.editFilterItemsHandle.remove();}},_setFilterGroupAttr:function(_34d){if(this._filterSubscriptions){_341.forEach(this._filterSubscriptions,function(_34e){this.unsubscribe(_34e);},this);}this._filterGroup=_34d;this._filterSubscriptions=[];this._filterSubscriptions.push(this.subscribe(_33e.substitute("/ui/filters/${0}/change",[this._filterGroup]),this._onChange),this.subscribe(_33e.substitute("/ui/filters/${0}/clear",[this._filterGroup]),this._onClear),this.subscribe(_33e.substitute("/ui/filters/${0}/refresh",[this._filterGroup]),lang.hitch(this,this._onRefresh)));},_onRefresh:function(_34f,_350,_351){this.appliedValues=_34f;this.updateCounts();},_updateActiveFilters:function(){var _352=this._getFilterManager(),_353=[],q=false;if(_352){q=_352.createQuery();}if(!this.expanded){return;}if(q===false){q="";}else{_353.push(q);}if(this._originalActiveFilter){_353.push(this._originalActiveFilter);}if(_353.length>1){q=_353.join(" AND ");}else{q=_353.join("");}this.store.request.setQueryArg("_activeFilter",q);},refresh:function(){if(this._loaded){_341.forEach(_342("*",this.listNode),function(item){_33f.destroy(item);});this.requestData();}},_onChange:function(_354,name,_355,_356){name=this._transformFilterItemName(name);if(_356!==this&&_354.$key===this.filter.$key){_342(_33e.substitute("> [data-name=\"${0}\"]",[name]),this.listNode).forEach(function(el){dojo.attr(el,"data-selected",(!!_355).toString());dojo.toggleClass(el,"filter-selected",!!_355);});}},_onClear:function(_357,_358){if(_358!==this&&(!_357||_357.$key===this.filter.$key)){dojo.query("> [data-selected=\"true\"]",this.listNode).forEach(function(el){dojo.attr(el,"data-selected","false");dojo.toggleClass(el,"filter-selected",false);});}},_getFilterGroupAttr:function(){return this._filterGroup;},_formatLabelText:function(_359,name){if(name===this.nullName){return this.nullText;}else{if(name===this.emptyName){return this.emptyText;}}if(this.configurationProvider){if(this.configurationProvider.getFilterFormatter){var _35a=this.configurationProvider.getFilterFormatter(this.filter);if(_35a){return _35a(_359);}}}return _359;},_isDistinctFilter:function(){return this.filter&&this.filter.details&&this.filter.details.distinctFilter;},_isRangeFilter:function(){return this.filter&&this.filter.details&&this.filter.details.rangeFilter;},compileRanges:function(_35b){var i=0;this._ranges={};for(i=0;i<_35b.length;i++){this._ranges[this._transformFilterItemName(_35b[i].rangeName)]=_35b[i];}},_saveExpandState:function(){var data=this.parent._configuration._hiddenFilters||{},key=this.parent._configuration._hiddenFiltersKey,_35c=Sage.Services.getService("ClientGroupContext"),_35d=_35c&&_35c.getContext(),prop=_35d.CurrentEntity+"_"+this.filter.filterName;if(!data[prop]){data[prop]={expanded:false,hidden:false};}data[prop].expanded=this.expanded;_345.setHiddenFilters(key,json.stringify(data));},toggleExpand:function(_35e,evt,el){this._toggleExpand();this._saveExpandState();},_toggleExpand:function(){this.expanded=!this.expanded;if(this.domNode){dojo.toggleClass(this.domNode,"filter-collapsed");}this._loadItems();},_loadItems:function(){if(!this._loaded){this._loaded=true;this.requestData();}else{this.updateCounts();}},toggleSelect:function(_35f,evt,el){var _360=/^true$/i.test(_35f.selected),name=_35f.name,_361=!_360&&(this._isRangeFilter()?this._ranges[name]:name);this.onSelectionChange(this.filter,name,_361,this);dojo.attr(el,"data-selected",(!_360).toString());dojo.toggleClass(el,"filter-selected",!_360);},onSelectionChange:function(_362,name,_363,_364){dojo.publish(_33e.substitute("/ui/filters/${0}/change",[this._filterGroup]),[_362,name,_363,_364]);},updateCounts:function(){if(!this.lazyUpdateCounts){this.lazyUpdateCounts=_344.debounce(lang.hitch(this,function(){if(this.expanded){_342("li[data-name] div span.p-count",this.listNode).forEach(function(node){node.innerHTML="0";});this._updateActiveFilters();this._doUpdateCounts();}}),this.FILTER_UPDATE_DELAY);}this.lazyUpdateCounts();},_doUpdateCounts:function(){this.store.fetch({onComplete:lang.hitch(this,this._updateCountsInPlace),count:this.count});},requestData:function(){if(this.loading){if(this.domNode){dojo.addClass(this.domNode,"filter-loading");this.set("content","");}}this.store.fetch({onError:lang.hitch(this,this._onFetchError),onComplete:lang.hitch(this,this._onFetchComplete),count:this.count});},_onFetchComplete:function(_365,_366){this._processFetchResult(_365,_366);},_onFetchError:function(_367,_368){if(this.domNode){dojo.removeClass(this.domNode,"filter-loading");}},isFilterItemHidden:function(_369){var data=this.parent._configuration._hiddenFilters||{},_36a=Sage.Services.getService("ClientGroupContext"),_36b=_36a&&_36a.getContext(),prop=_36b.CurrentEntity+"_"+this.filter.filterName,_36c=false;if(data[prop]){_36c=_341.some(data[prop].items,function(item){return item===_369;});}return _36c;},_updateCountsInPlace:function(_36d,_36e){var i=0,_36f=null,len=_36d.length;for(i=0;i<len;i++){_36f=_36d[i];_36f.name=this._transformFilterItemName(_36f.name);_342("li[data-name=\""+_36f.name+"\"]",this.listNode).forEach(function(node){_342("div span.p-count",node).forEach(function(span){span.innerHTML=_36f.value;});});}this._finishedLoading();},_processFetchResult:function(_370,_371){var i=0,_372=null,_373=false,len=_370.length,_374=false;for(i=0;i<len;i++){_372=_370[i];_372.name=this._transformFilterItemName(_372.name);_373=this.isFilterItemHidden(_372.name);if(_373===false||this._isRangeFilter()){_374=this.appliedValues&&this.appliedValues[this.filter.$key]&&!!this.appliedValues[this.filter.$key][_372.name];_372.selected=_374||(this.appliedValues&&!!this.appliedValues[_372.name]);_372.ofText=this.ofText;this.output.push(this.itemTemplate.apply(_372,this));this.entries.push(_372);}}this._fixMissingItems();if(this.domNode){this.set("content",this.output.join(""));}this._clearOutputEntries();this.updateCounts();},_transformFilterItemName:function(name){var _375=name;if(name===null){_375=this.nullName;}else{if(name===""){_375=this.emptyName;}}return _375.trim();},_fixMissingItems:function(){var _376,prop,val,_377=true;for(prop in this.appliedValues){if(this.appliedValues.hasOwnProperty(prop)){val=this.appliedValues[prop];_377=_341.some(this.entries,function(_378){return _378.name===prop;});if(!_377){_376={name:"",$descriptor:"",selected:true,value:0};_376.name=prop;_376.$descriptor=val;_376.ofText=this.ofText;if(typeof _376.$descriptor==="string"){this.output.push(this.itemTemplate.apply(_376,this));this.entries.push(_376);}}}}},_clearOutputEntries:function(){this.output=[];this.entries=[];},_finishedLoading:function(){this.loading=false;this.store.request.setQueryArg("_activeFilter",this._originalActiveFilter||"");if(this.domNode){dojo.removeClass(this.domNode,"filter-loading");}},_getFilterManager:function(){var _379=this.parent.filterManager;if(!_379){if(this.parent._configuration.getFilterManager){_379=this.parent._configuration.getFilterManager();}}var _37a=Sage.Services.getService("ClientGroupContext");var _37b=_37a&&_37a.getContext();if(this.groupId!=_37b.CurrentGroupID){_379=null;}return _379;}});return _348;});},"Sage/Utility/Groups":function(){define("Sage/Utility/Groups",["Sage/Groups/GroupLookup"],function(_37c){Sage.namespace("Utility.Groups");dojo.mixin(Sage.Utility.Groups,{showMainLookupFor:function(_37d,page){var _37e=Sage.Services.getService("GroupLookupManager");if(_37e){if(typeof _37d==="undefined"){_37e.showLookup();}else{_37e.showLookup({family:_37d,returnTo:page||false});}}}});return Sage.Utility.Groups;});},"Sage/UI/ToolBarLabel":function(){define("Sage/UI/ToolBarLabel",["dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(_37f,_380,_381){var _382=_381("Sage.UI.ToolBarLabel",[_37f,_380],{label:"label",region:"leading",templateString:"<span class=\"dijitToolbarLabel\"><span class=\"dijitReset dijitInline \" dojoAttachPoint=\"containerNode\"></span></span>",attributeMap:{label:{node:"containerNode",type:"innerHTML"}},_append:function(val){this.containerNode.innerHTML+=val;},_setLabelAttr:function(_383){this.containerNode.innerHTML=this.label=_383;}});return _382;});},"Sage/UI/Controls/DateTimePicker":function(){require({cache:{"url:Sage/UI/Controls/templates/DateTimePicker.html":"<div class=\"dateTimePicker\">\r\n        <div dojoAttachPoint=\"tooltipContainer\">\r\n        \r\n            <div dojoAttachPoint=\"dateContainer\" class=\"dateTimePicker-dateContainer\">\r\n               \r\n                    <input id=\"${id}-Calendar\" data-dojo-type=\"Sage.UI.Calendar\"\r\n                        style=\"width:inherit;\"\r\n                        textAlign=\"${textAlign}\"\r\n                           type=\"text\" \r\n                           tabindex=\"0\"\r\n                           displayMode=\"popup\"\r\n                           dojoAttachPoint=\"dateNode\"\r\n                           dojoAttachEvent=\"onValueSelected:_onValueSelected,onBlur:_onCalendarBlur\">\r\n               \r\n            </div>\r\n            \r\n            <div dojoAttachPoint=\"timeZoneContainer\" class=\"dateTimePicker-timeZoneContainer\">\r\n               \r\n                    <label for=\"${id}-TimeStart\">${timeStartText}</label><br />\r\n                    <input id=\"${id}-TimeTextBox\" data-dojo-type=\"dijit.form.TimeTextBox\" \r\n                           style=\"width:16em;\"\r\n                           textAlign=\"${textAlign}\"\r\n                           tabindex=\"0\"\r\n                           type=\"text\" dojoAttachPoint=\"timeNode\">\r\n                    <br /><br/>\r\n                    <label for=\"${id}-TzCalculator\">${timeZoneCalculatorText}</label>\r\n                    <div id=\"timeZoneCalucaltor\" class=\"dateTimePicker-timeZoneCalculator\">\r\n                       <p style=\"width:auto;margin-top:auto\">\r\n                            <label for=\"${id}-TzSelectSource\">${timeZoneSourceText}</label><br />\r\n                            <select id=\"${id}-TzSelectSource\" data-dojo-type=\"dijit.form.ComboBox\"  dojoAttachPoint=\"timeZoneSourceComboNode\" style=\"width:15em;\">\r\n                            </select>\r\n                            <br />\r\n                            <label for=\"${id}-TzSelectDest\">${timeZoneDestText}</label><br />\r\n                           <select id=\"${id}-TzSelectDest\" data-dojo-type=\"dijit.form.ComboBox\"  dojoAttachPoint=\"timeZoneDestComboNode\" style=\"width:15em;\">\r\n                           </select>\r\n                           <br/>\r\n                            <span id=\"${id}-ConvertResults\" dojoAttachPoint=\"convertResultsNode\" style=\"float:left;padding-top:5px;\">\r\n                        </span>\r\n                        </p><br/>\r\n                        <button id=\"${id}-Convert\" data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"timeZoneConvertButtonNode\" type=\"button\" style=\"float:right\" dojoAttachEvent=\"onClick:_convertClicked\">\r\n                            ${convertText}\r\n                        </button>\r\n                       \r\n                        \r\n                    </div>\r\n               \r\n                <div class=\"button-bar alignright\" style=\"clear: both\">\r\n                    <button id=\"${id}-OKButton\" tabindex=\"0\" data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"OKButtonNode\" type=\"button\" dojoAttachEvent=\"onClick:_okClicked\">\r\n                        ${okText}\r\n                    </button>\r\n                    <button id=\"${id}-CancelButton\" tabindex=\"0\" data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"CancelButtonNode\" type=\"button\" dojoAttachEvent=\"onClick:_cancelClicked\">\r\n                        ${cancelText}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    \r\n</div>\r\n\r\n"}});define("Sage/UI/Controls/DateTimePicker",["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/fx","dojo/date/locale","dijit/_Widget","dijit/form/TimeTextBox","Sage/UI/Calendar","Sage/Utility","dijit/TooltipDialog","dijit/_base/popup","dijit/form/ComboBox","dijit/focus","dojo/data/ItemFileReadStore","dojo/i18n!./nls/DateTimePicker","dojo/json","dojo/_base/lang","dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom-construct","Sage/Utility/_LocalStorageMixin","dojo/text!./templates/DateTimePicker.html"],function(_384,_385,fx,_386,_387,_388,_389,_38a,_38b,_38c,_38d,_38e,_38f,_390,json,lang,_391,_392,_393,_394,_395,_396){var _397,_398,_399;_399=_393("Sage.UI.Controls.DateTimePicker.TimeZoneDataLoader",_395,{_requests:[],_requestingData:false,_tzData:false,_storageNamespace:"DateTimePickerTZ",constructor:function(){this._requests=[];this._requestingData=false;this._tzData=false;},requestTimeZones:function(_39a,_39b){if(!this._tzData){var data=this.getFromLocalStorage(this._storageNamespace,this._storageNamespace);if(data){this._tzData=json.parse(data);}else{this._requests.push({fn:_39a,scope:_39b||this});if(!this._requestingData){dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:lang.hitch(this,this._receiveData),error:function(err){}});this._requestingData=true;}return;}}_39a.call(_39b||this,this._tzData);},_receiveData:function(data){this.saveToLocalStorage(this._storageNamespace,json.stringify(data),this._storageNamespace);this._tzData=data;var len=this._requests.length;for(var i=0;i<len;i++){var clbk=this._requests.pop();clbk.fn.call(clbk.scope,data);}}});_397=_393("Sage.UI.Controls._DateTimePickerMenu",[_387,_384,_385],{templateString:_396,widgetsInTemplate:true,textAlign:"left",okText:"",cancelText:"",convertText:"",calculatorText:"",timeZoneSourceText:"",timeZoneDestText:"",id:"dateTimePickerMenu",dir:"",_messages:null,_started:false,_timezonesLoaded:false,_timezonesVisible:false,displayTime:false,constructor:function(_39c){lang.mixin(this,_390);this.inherited(arguments);},startup:function(){this._started=true;this._messages=[];this.focus();this.inherited(arguments);},uninitialize:function(){this.dateNode.destroy(false);this.timeZoneSourceComboNode.destroy(false);this.timeZoneDestComboNode.destroy(false);this.timeZoneConvertButtonNode.destroy(false);this.timeNode.destroy(false);this.OKButtonNode.destroy(false);this.CancelButtonNode.destroy(false);this.inherited(arguments);},_getUTCDate:function(date){return new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds());},_okClicked:function(_39d){this.onExecute();this.onOKClicked();},onOKClicked:function(){},_onCalendarBlur:function(){this.calendarBlur();},calendarBlur:function(){},_onValueSelected:function(){if(!this.displayTime){this.calendarDateSelected();this.onExecute();}},calendarDateSelected:function(){},_cancelClicked:function(){this.onCancel();this.onCancelClicked();},onFocusOut:function(){this.onExecute();},onCancelClicked:function(){},onCancel:function(){},onExecute:function(){},_hideTimeNode:function(){this._hideNode(this.timeZoneContainer);},_hideDateNode:function(){this._hideNode(this.dateContainer);},_showTimeNode:function(){this._showNode(this.timeZoneContainer);},_showDateNode:function(){this._showNode(this.dateContainer);},_hideNode:function(id){dojo.style(id,"visibility","hidden");dojo.style(id,"display","none");},_showNode:function(id){dojo.style(id,"visibility","visible");dojo.style(id,"display","block");},_convertClicked:function(){if(!this._timezonesLoaded){return;}var self=this,_39e=this.dateNode.get("value"),_39f=this.timeNode.get("value"),_3a0=this.timeZoneSourceComboNode.get("value"),_3a1=this.timeZoneDestComboNode.get("value"),_3a2="",_3a3=null,url="slxdata.ashx/slx/crm/-/timezones/convertTime?timezoneNameSource=${0}&timezoneNameDest=${1}&date=${2}";_39e.setHours(_39f.getHours());_39e.setMinutes(_39f.getMinutes());_3a2=_39e.toLocaleString();dojo.xhrGet({url:dojo.string.substitute(url,[escape(_3a0),escape(_3a1),_3a2]),handleAs:"json",load:function(data){_3a3=_38a.Convert.toDateFromString(data);self.convertResultsNode.innerHTML=_386.format(_3a3,{fullYear:true});},error:function(err){console.error(err);}});},processTimeZones:function(data){var _3a4=[];var _3a5=_38a.getClientContextByKey("userTimeZone");_391.forEach(data,function(item){if(!item.Displayname||!item.Keyname){return;}_3a4.push({id:item.Keyname,text:item.Displayname,offsetHours:item.OffsetHours,offsetMinutes:item.OffsetMinutes});});this.storeData={label:"text",identifier:"id",items:_3a4};this.timeZoneStore=new _38f({data:this.storeData});var self=this;this.timeZoneSourceComboNode.set("store",this.timeZoneStore);this.timeZoneSourceComboNode.set("searchAttr","text");this.timeZoneSourceComboNode.store.fetch({query:{text:_3a5},onComplete:function(_3a6){self.timeZoneSourceComboNode.setAttribute("item",_3a6[0]);}});this.timeZoneDestComboNode.set("store",this.timeZoneStore);this.timeZoneDestComboNode.set("searchAttr","text");},loadTimeZones:function(){if(this._timezonesLoaded){return;}this._timezonesLoaded=true;var _3a7=new _399();_3a7.requestTimeZones(this.processTimeZones,this);}});_398=_393("Sage.UI.Controls.DateTimePicker",[_38d],{id:"dateTimePicker",buttonToolTip:"Calendar",toolTip:"",displayDate:true,displayTime:true,initialDate:null,initialTime:null,initialTextValue:"",dateFormat:"",timeZoneStore:null,storeData:null,dropDown:false,_opened:false,readOnly:false,enabled:true,required:false,renderAsHyperlink:false,shouldPublishMarkDirty:true,handles:null,store:null,dateOnlyHanlde:null,documentClickHandle:null,dropdownIconClicked:false,popupElements:null,minDate:null,constructor:function(_3a8){this.buttonToolTip=_390.buttonToolTip;this.handles=[];this.documentClickHandle=[];this.dateOnlyHanlde=[];this.store={};this.inherited(arguments);},_onChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}},uninitialize:function(){this.inherited(arguments);},startup:function(){this.inherited(arguments);this.dropDown=new _397({id:this.id+"_Popout",displayTime:this.displayTime});this.handles.push(this.connect(this,"onChange",this._onChanged));this.handles.push(dojo.connect(this.dropDown,"onOKClicked",this,"_displayCurrentValue"));this.handles.push(dojo.connect(this.focusNode,"onkeyup",this,"_onFocusKeyUp",true));this.handles.push(dojo.connect(this.focusNode,"onblur",this,"_onFocusBlur",true));this.focusNode.value=this.initialTextValue;var date=_38a.Convert.toDateFromString(this.initialDate)||new Date();var time=_38a.Convert.toDateFromString(this.initialTime)||new Date();this.dropDown.dateNode.set("value",date.toDateString());this.dropDown.timeNode.set("value",time);if(this.displayDate){this.dropDown._showDateNode();}else{this.dropDown._hideDateNode();}if(this.displayTime){this.dropDown._showTimeNode();}else{this.dateOnlyHanlde.push(dojo.connect(this.dropDown,"calendarDateSelected",this,"_displayCurrentValue"));this.dropDown._hideTimeNode();}var _3a9=[];var _3aa=function(node){if(node&&node.children&&node.children.length>0){for(var i=0;i<node.children.length;i++){if(node.children[i]){_3a9.push(node.children[i]);}_3aa(node.children[i]);}}return _3a9;};this.popupElements=_3aa(this.dropDown.domNode);this.popupElements.push(this.dropDown.domNode);this.popupElements.push(this._buttonNode.parentNode);this.documentClickHandle.push(dojo.connect(document,"onclick",this,"_documentOnClick"));this._setupRenderAsHyperlink();this._setupDropDownIcon();},_documentOnClick:function(evt){var e=evt||window.event;var _3ab=e.target||e.srcElement;var _3ac=function(_3ad,node){if(dojo.indexOf(_3ad,node)>-1){return true;}else{if(node.parentNode){return _3ac(_3ad,node.parentNode);}else{return false;}}};if((_3ab&&_3ab.className&&(_3ab.className.indexOf("dijitTimePickerItemInner")>-1||_3ab.className.indexOf("dijitCalendarMonthLabel")>-1))||(_3ab&&_3ab.id&&(_3ab.id.indexOf("_Popout-TzSelectSource_popup")>-1||_3ab.id.indexOf("_Popout-TzSelectDest_popup")>-1))){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}e.preventDefault=true;}else{if(this.dropDown&&this.dropDown.timeNode&&this.dropDown.timeNode.dropDown){if(dojo.indexOf(this.popupElements,this.dropDown.timeNode.dropDown.domNode)==-1){this.popupElements.push(this.dropDown.timeNode.dropDown.domNode);}}if(!_3ac(this.popupElements,_3ab)){this.closeDropDown();}else{e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}e.preventDefault=true;}}},_setupDropDownIcon:function(){if(this.renderAsHyperlink){return;}_394.create("div",{"class":"Global_Images icon16x16 icon_Calendar_16x16",title:this.buttonToolTip,tabIndex:0},this._buttonNode,"only");dojo.addClass(this._buttonNode,"smCalendarIconTxtBox");this.handles.push(this.connect(this._buttonNode,"ondijitclick",function(){if(!this.displayTime){dojo.style(this.dropDown.domNode,"height","226px");}else{dojo.style(this.dropDown.domNode,"height","266px");}if(!this.dropdownIconClicked){this.openDropDown();this.dropdownIconClicked=true;}}));},_displayCurrentValue:function(){if(!this._started){return;}var _3ae=this.getDateValue(),_3af=this.getTimeValue(),_3b0,_3b1={fullYear:true};if(!_3ae){return;}_3ae.setHours(_3af.getHours());_3ae.setMinutes(_3af.getMinutes());_3ae.setSeconds(_3af.getSeconds());if(this.displayDate&&this.displayTime){_3b1.selector="date and time";}else{if(this.displayDate){_3b1.selector="date";}else{if(this.displayTime){_3b1.selector="time";}}}_3b0=_386.format(_3ae,_3b1);if(this.renderAsHyperlink){var node=dojo.byId(this.id+"-Link");node.innerHTML=_3b0;}else{this.focusNode.value=_3b0;}if((!this.value.getTime)||this.value.getTime()!==_3ae.getTime()){this.value=_3ae;this.onChange(_3ae);}},_setupRenderAsHyperlink:function(){if(!this.renderAsHyperlink){return;}dojo.style(this.domNode,"border","none");var node=dojo.create("a",{id:this.id+"-Link",innerHTML:this.focusNode.value},this.domNode,"only");dojo.style(node,"cursor","pointer");this.handles.push(dojo.connect(node,"onclick",this,function(){if(!this.displayTime){dojo.style(this.dropDown.domNode,"height","226px");}else{dojo.style(this.dropDown.domNode,"height","266px");}this.openDropDown();}));},loadDropDown:function(){},isLoaded:function(){return true;},_setBlurValue:function(){},closeDropDown:function(){_38c.close(this.dropDown);this._opened=false;this.dropdownIconClicked=false;dojo.forEach(this.documentClickHandle,function(_3b2){dojo.disconnect(_3b2);});},_openResultList:function(){},_showResultList:function(){},_onBlur:function(){},triggerOnFocusBlur:function(_3b3){this._validateInputDate(_3b3);},_validateInputDate:function(_3b4){if(!this._opened&&!this.readOnly&&this.dropDown&&this.focusNode.value!==""){var text=this.focusNode.value;if(text===this.initialTextValue){return;}var _3b5=null;var _3b6="date";if(text.indexOf(":")>0){_3b6="datetime";}_3b4=_3b4||_392.locale;_3b5=dojo.date.locale.parse(text,{selector:_3b6,locale:_3b4});if(this.dropDown&&_3b5!==null&&isNaN(_3b5.getDate())===false){if(_3b5.getFullYear()>=(new Date().getFullYear()-259)){this.dropDown.dateNode.set("value",_3b5);this.dropDown.timeNode.set("value",_3b5);}}this.dropDown.onOKClicked();}},_onFocusBlur:function(){this._validateInputDate();if(this._opened){_38e.focus(dojo.query(".dijitCalendarContainer",this.dropDown.dateContainer)[0]);}},_onFocusKeyUp:function(e){},_onKey:function(e){},openDropDown:function(){this._opened=true;var self=this;_38c.open({popup:this.dropDown,around:this.domNode,onExecute:function(){self.closeDropDown();_38e.focus(self.focusNode);},onCancel:function(){self.closeDropDown();_38e.focus(self.focusNode);},onClose:function(){}});this.documentClickHandle.push(dojo.connect(document,"onclick",this,"_documentOnClick"));if(this.displayTime){this.dropDown.loadTimeZones();}_38e.focus(dojo.query(".dijitCalendarContainer",this.dropDown.dateContainer)[0]);_38c._stack[0].handlers[0].remove();},_getUTCDate:function(date){return this.dropDown._getUTCDate(date);},getDateValue:function(){return this.dropDown.dateNode.get("value");},getTimeValue:function(){var _3b7=this.dropDown.timeNode.get("value")||new Date(Date.now());if(_3b7){_3b7.setSeconds(this.dropDown.timeNode["seconds"]||0);}return _3b7;},getMinDate:function(){this.minDate=Sage.Utility.Activity.formatDateAdd(new Date(),"year",-259);return this.minDate;},_getValueAttr:function(){var d=this.getDateValue();var t=this.getTimeValue();d.setHours(t.getHours());d.setMinutes(t.getMinutes());d.setSeconds(t.getSeconds());return d;},_setValueAttr:function(val){if(val&&val.toDateString){if(this.dropDown){this.dropDown.dateNode.set("value",val);this.dropDown.timeNode.set("value",val);this.dropDown.timeNode["seconds"]=val.getSeconds();this._displayCurrentValue();}if((!this.value.getTime)||this.value.getTime()!==val.getTime()){this.value=val;this.onChange(val);}}},_setDisplayDateAttr:function(_3b8){this.displayDate=_3b8;this._displayCurrentValue();if(this.dropDown){if(this.displayDate){this.dropDown._showDateNode();}else{this.dropDown._hideDateNode();}}},_getDisplayDateAttr:function(){return this.displayDate;},_setToolTipAttr:function(_3b9){if(_3b9&&_3b9!==""){this.set("title",_3b9);}},_getToolTipAttr:function(){return this.toolTip;},_setDisabledAttr:function(_3ba){if(_3ba){dojo.style(this._buttonNode,"visibility","hidden");dojo.style(this._buttonNode,"display","none");}else{dojo.style(this._buttonNode,"visibility","");dojo.style(this._buttonNode,"display","");}this.inherited(arguments);},_setReadOnlyAttr:function(_3bb){if(_3bb){dojo.style(this._buttonNode,"visibility","hidden");dojo.style(this._buttonNode,"display","none");}this.inherited(arguments);},_setDisplayTimeAttr:function(_3bc){this.displayTime=_3bc;this._displayCurrentValue();if(this.dropDown){if(this.displayDate){this.dropDown._showDateNode();}else{this.dropDown._hideDateNode();}dojo.forEach(this.dateOnlyHanlde,function(_3bd){dojo.disconnect(_3bd);});if(this.displayTime){this.dropDown.displayTime=true;this.dropDown._showTimeNode();}else{this.dropDown.displayTime=false;this.dateOnlyHanlde.push(dojo.connect(this.dropDown,"calendarDateSelected",this,"_displayCurrentValue"));this.dropDown._hideTimeNode();}}},_getDisplayTimeAttr:function(){return this.displayTime;},getValueForASPNET:function(){var _3be=[];var date=this.getDateValue();_3be.push(date.getFullYear());_3be.push(date.getMonth()+1);_3be.push(date.getDate());var time=this.getTimeValue();_3be.push(time.getHours());_3be.push(time.getMinutes());return _3be.join(",");},destroy:function(){dojo.forEach(dijit.findWidgets(this.domNode),function(wid){wid.destroy(false);});dojo.forEach(this.handles,function(_3bf){dojo.disconnect(_3bf);});this.inherited(arguments);},fmtDateForASPNET:function(){var date=this.getDateValue();var time=this.getTimeValue();var year=date.getFullYear();var _3c0=date.getMonth()+1;var day=date.getDate();var _3c1=time.getHours();var _3c2=time.getMinutes();var _3c3="";if(this.displayDate){var _3c4=this.getDivChar();var _3c5=_3c0;var _3c6=day;if(this.dateFormat.substring(0,1).toUpperCase()=="MM"){_3c5=(_3c5<10)?"0"+_3c5:_3c5;}if(this.dateFormat.substring(0,1).toUpperCase=="DD"){_3c6=(_3c6<10)?"0"+_3c6:_3c6;}if(this.dateFormat.substring(0,1)=="M"||this.dateFormat.substring(0,1)=="m"){_3c3=_3c5+_3c4+_3c6+_3c4+date.getFullYear();}if(this.dateFormat.substring(0,1)=="D"||this.dateFormat.substring(0,1)=="d"){_3c3=_3c6+_3c4+_3c5+_3c4+date.getFullYear();}if(this.dateFormat.substring(0,1)=="Y"||this.dateFormat.substring(0,1)=="y"){_3c3=date.getFullYear()+_3c4+_3c5+_3c4+_3c6;}if(this.displayTime){_3c3+=" ";}}if(this.displayTime){var _3c7=this.getTimeDivChar();var _3c8=_3c1;var _3c9=_3c2;if(_3c9<10){_3c9="0"+_3c9;}if(this.dateFormat.indexOf("H")>-1){_3c3+=_3c8+_3c7+_3c9;}else{if(this.dateFormat.indexOf("h")>-1){var _3ca=_3c1;if(this.Hours===0){_3ca="12";}var _3cb="AM";if(_3c1>=12){if(_3c1>12){_3ca=(_3c1-12);}_3cb="PM";}_3c3+=_3ca+_3c7+_3c9+" "+_3cb;}else{_3c3+=time.toLocaleTimeString();}}}return _3c3;},getDivChar:function(){var _3cc="";for(var i=0;i<this.dateFormat.length;i++){if(isNaN(this.dateFormat.charAt(i))){if((this.dateFormat.charAt(i)<"A"||this.dateFormat.charAt(i)>"Z")&&(this.dateFormat.charAt(i)<"a"||this.dateFormat.charAt(i)>"z")){_3cc=this.dateFormat.charAt(i);break;}}}return _3cc;},getTimeDivChar:function(){if(this.displayTime){var _3cd=this.dateFormat.split(" ");if(_3cd.length>1){var _3ce=_3cd[1];for(var i=0;i<_3ce.length;i++){if(isNaN(_3ce.charAt(i))){if((_3ce.charAt(i)<"A"||_3ce.charAt(i)>"Z")&&(_3ce.charAt(i)<"a"||_3ce.charAt(i)>"z")){return _3ce.charAt(i);}}}}}return ":";}});return _398;});},"Sage/MainView/Contact/ContactSearchForDuplicates":function(){require({cache:{"url:Sage/MainView/Contact/templates/ContactDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Contact.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccount_Caption || \"Account:\" %}</td>',\r\n                        '<td class=\"DataItem\"><a href=\"Account.aspx?entityid={{%= $.templateData.account_id %}}\">{%= Sage.Utility.htmlEncode($.templateData.accountname) %}</a></td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTitle_Caption || \"Title:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.title %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWorkPhone_Caption || \"Work Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.workphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svHomePhone_Caption || \"Home Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.homephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMobilePhone_Caption || \"Mobile Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mobilephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n] ","url:Sage/MainView/Lead/templates/LeadDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Lead.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svCompany_Caption || \"Company:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountname %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTitle_Caption || \"Title:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.title %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWorkPhone_Caption || \"Work Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.workphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svHomePhone_Caption || \"Home Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.homephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMobilePhone_Caption || \"Mobile Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mobilephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n]","url:Sage/MainView/Account/templates/AccountDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Account.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svSubType_Caption || \"Sub Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.subtype %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTitle_Status || \"Status:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.status %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svDivision_Caption || \"Division:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.division %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svIndustry_Caption || \"Industry:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.industry) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMainPhone_Caption || \"Main phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mainphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTollFree_Caption || \"Toll free:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.tollfree) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n]"}});define("Sage/MainView/Contact/ContactSearchForDuplicates",["dojo/_base/declare","dojo/i18n!./nls/ContactSearchForDuplicates","dijit/_Widget","Sage/_Templated","Sage/Utility","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","Sage/UI/Dialogs","dijit/Dialog","dojo/i18n!./nls/ContactSearchForDuplicates","dojo/text!./templates/ContactDetailSummary.html","dojo/text!../Lead/templates/LeadDetailSummary.html","dojo/text!../Account/templates/AccountDetailSummary.html"],function(_3cf,_3d0,_3d1,_3d2,_3d3,_3d4,_3d5,_3d6,_3d7,_3d8,nls,_3d9,_3da,_3db){var _3dc=_3cf("Sage.MainView.Contact.ContactSearchForDuplicates",[_3d1,_3d2],{workSpace:{},templateDialog:false,templateData:"",rootUrl:"slxdata.ashx/slx/crm/-/namedqueries?format=json&",widgetsInTemplate:true,constructor:function(){dojo.mixin(this,_3d0);},init:function(_3dd){this.workSpace=_3dd;},onTabFiltersClick:function(){this.setDivDisplay(this.workSpace.divFiltersId,"inline");this.setDivDisplay(this.workSpace.divOptionsId,"none");this.setTabDisplay(this.workSpace.tabFiltersId,"tws-tab-button tws-active-tab-button");this.setTabDisplay(this.workSpace.tabOptionsId,"tws-tab-button");},onTabOptionsClick:function(){this.setDivDisplay(this.workSpace.divOptionsId,"inline");this.setDivDisplay(this.workSpace.divFiltersId,"none");this.setTabDisplay(this.workSpace.tabOptionsId,"tws-tab-button tws-active-tab-button");this.setTabDisplay(this.workSpace.tabFiltersId,"tws-tab-button");},setDivDisplay:function(_3de,_3df){var _3e0=dojo.byId(_3de);if(_3e0!==null){_3e0.style.display=_3df;}},setTabDisplay:function(_3e1,_3e2){var _3e3=dojo.byId(_3e1);if(_3e3!==null){_3e3.className=_3e2;}},showSummaryView:function(_3e4,_3e5){var url=this.getReqestUrl(_3e4,_3e5);this.showData(url,this.successRequest,this.errorRequest,_3e4,_3e5);},getReqestUrl:function(_3e6,_3e7){var url=null;if(_3e6==="Contact"){url=this.getReqeustUrlEx(_3e7,"ContactSearch");}if(_3e6==="Lead"){url=this.getReqeustUrlEx(_3e7,"LeadSearch");}if(_3e6==="Account"){url=this.getReqeustUrlEx(_3e7,"AccountSearch");}return url;},getReqeustUrlEx:function(_3e8,_3e9){var _3ea="mainentity.id eq '${0}'";var _3eb={name:_3e9,where:dojo.string.substitute(_3ea,[_3e8])};return this.rootUrl+this.buildQParamStr(_3eb);},buildQParamStr:function(_3ec){var o=_3ec;var p=[];if(typeof o==="object"){for(var k in o){p.push(k+"="+encodeURIComponent(o[k]));}}else{if(typeof o==="string"){p.push(o);}}return p.join("&");},showData:function(url,_3ed,_3ee,_3ef,_3f0){if(typeof _3ed==="undefined"){_3ed=function(data){};}if(typeof _3ee==="undefined"){_3ee=function(){};}if(typeof _3ef==="undefined"){_3ef="";}if(typeof _3f0==="undefined"){_3f0="";}var self=this;dojo.xhrGet({url:url,cache:false,preventCache:true,handleAs:"json",load:function(data){_3ed(self,_3ef,data);},error:function(_3f1,_3f2,_3f3){_3ee(self,_3f3);}});},successRequest:function(self,_3f4,data){self.show(_3f4,data);},show:function(_3f5,data){this.templateData=data.items[0];this.templateDialog=new _3d8({title:this.getSummaryTitle(_3f5),id:[this.id,"-Dialog"].join(""),content:this.getTemplate(_3f5).apply(this)});this.connect(this.templateDialog,"onCancel",this._close);this.templateDialog.show();},errorRequest:function(self,_3f6){_3d7.showError(dojo.string.substitute(self.errorLoadingSummaryView,[_3f6]));},getSummaryTitle:function(_3f7){var _3f8=null;if(_3f7==="Contact"){_3f8=this.ContactSummaryView_Title;}if(_3f7==="Lead"){_3f8=this.LeadSummaryView_Title;}if(_3f7==="Account"){_3f8=this.AccountSummaryView_Title;}return _3f8;},getTemplate:function(_3f9){var tpl=null;if(_3f9==="Contact"){tpl=new Simplate(eval(_3d9));}if(_3f9==="Lead"){tpl=new Simplate(eval(_3da));}if(_3f9==="Account"){tpl=new Simplate(eval(_3db));}return tpl;},_close:function(){this.templateDialog.destroyRecursive();}});return _3dc;});},"Sage/UI/Controls/_customSelectMixin":function(){define("Sage/UI/Controls/_customSelectMixin",["dijit/_Widget","Sage/_Templated","dijit/form/ComboBox","dojo/_base/declare"],function(_3fa,_3fb,_3fc,_3fd){var _3fe=_3fd("Sage.UI.Controls._customSelectMixin",[_3fa,_3fb],{widgetsInTemplate:true,disabled:false,value:"",text:"",widgetTemplate:new Simplate(["<div>","<select dojoType=\"dijit.form.ComboBox\" id=\"{%= $.id %}_select\" labelAttr=\"label\" dojoAttachPoint=\"_select\" dojoAttachEvent=\"onChange:_onChange\"></select>","</div>"]),postCreate:function(){this.inherited(arguments);this._fillSelect();},_fillSelect:function(){},_setValueAttr:function(_3ff){this.text=_3ff;this.value=_3ff;if(this._store){this._store.fetchItemByIdentity({identity:_3ff,onItem:function(item){if(item){this._select.set("value",this._store.getValue(item,this._storeData.label));this.value=this._store.getValue(item,this._storeData.identifier);this.text=this._store.getValue(item,this._storeData.label);}else{this._handleValueNotInStore(_3ff);}},onError:function(){},scope:this});}},_getValueAttr:function(){if(this._select.item&&this._store){this.value=this._store.getValue(this._select.item,this._storeData.identifier);}return this.value;},_onChange:function(_400){if((this.value===_400)||(this.text===_400)){return;}if(this._select.item){var item=this._select.item;this.value=this._store.getValue(item,this._storeData.identifier);this.text=this._store.getValue(item,this._storeData.label);}else{this.value=this._handleValueNotInStore(_400);}this.onChange(this.value);},_handleValueNotInStore:function(_401){this.text=_401;this.value=_401;return _401;},_getTextAttr:function(){return this.text;},_setTextAttr:function(text){this.text=text;this._select.set("displayedValue",text);},_setDisabledAttr:function(_402){this.disabled=_402;this._select.set("disabled",_402);},_getDisabledAttr:function(){return this.disabled=this._select.get("disabled");},onChange:function(){}});return _3fe;});},"Sage/Utility/Email":function(){define("Sage/Utility/Email",["Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dojo/parser","dojox/validate/regexp","dojo/i18n!./nls/Email"],function(_403,_404,_405,_406,_407,nls){Sage.namespace("Utility.Email");dojo.mixin(Sage.Utility.Email,{resources:nls,writeEmail:function(_408,_409,body,_40a,_40b){if(dojo.isString(_408)&&(_408.length>0)){if((_408.indexOf("{",0)==0)&&(_408.lastIndexOf("}")==_408.length-1)){try{var _40c=dojo.fromJson(_408);if(dojo.isObject(_40c)){_408=_40c;}}catch(e){_405.showError(dojo.substitute(_403.Email.resources.RecipientInfoError,[e.message]));if(typeof console!=="undefined"){console.error("There was an error attempting to parse the recipient data as JSON: %o",e);console.error("recipient parameter: %o",_408);}return;}}else{if((_408.indexOf("[",0)==0)&&(_408.lastIndexOf("]")==_408.length-1)){_408=eval(_408);}}}var self=this;require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(_40d,_40e){var _40f=0;if(typeof _40b!=="undefined"){if(!isNaN(_40b)){if(Number(_40b)==1){_40f=1;}}}var _410=3,olCC=2,olTo=1;var _411=["to","cc","bcc"];var _412=0;var _413=(dojo.isArray(_408))?"array":typeof _408;var _414=(_413!=="undefined")&&(_408!=null);var _415={"to":[],"cc":[],"bcc":[]};var _416=function(type,_417,_418,_419){if(self.isValidEmailAddress(_419||"")){var _41a=function(_41b){_41b.push({"firstName":_417||"","lastName":_418||"","emailAddress":_419||""});};switch(type){case olCC:_41a(_415.cc);break;case _410:_41a(_415.bcc);break;default:_41a(_415.to);break;}}else{if(typeof console!=="undefined"){}}};if(_414){var _41c=function(type,_41d){if(dojo.isObject(_41d)){_416(type,_41d.firstName||"",_41d.lastName||"",_41d.emailAddress||"");}};switch(_413){case "string":if(_408!=""){_416(olTo,"","",_408);}break;case "array":dojo.forEach(_408,function(_41e){if(dojo.isString(_41e)){_416(olTo,"","",_41e);}else{if(dojo.isObject(_41e)){_41c(olTo,_41e);}}});break;case "object":_412=0;dojo.forEach(_411,function(prop){_412++;if(_408.hasOwnProperty(prop)){switch((dojo.isArray(_408[prop]))?"array":typeof _408[prop]){case "string":_416(_412,"","",_408[prop]);break;case "array":dojo.forEach(_408[prop],function(obj){if(dojo.isString(obj)){_416(_412,"","",obj);}else{if(dojo.isObject(obj)){_41c(_412,obj);}}});break;case "object":_41c(_412,_408[prop]);break;}}});break;}}_408=undefined;var _41f=function(obj1,obj2){var _420;switch(_40f){case 1:_420=(obj1.lastName||"").toLocaleUpperCase().localeCompare((obj2.lastName||"").toLocaleUpperCase());if(_420==0){_420=(obj1.firstName||"").toLocaleUpperCase().localeCompare((obj2.firstName||"").toLocaleUpperCase());}break;default:_420=(obj1.firstName||"").toLocaleUpperCase().localeCompare((obj2.firstName||"").toLocaleUpperCase());if(_420==0){_420=(obj1.lastName||"").toLocaleUpperCase().localeCompare((obj2.lastName||"").toLocaleUpperCase());}}return _420;};var _421=_415.to.length+_415.cc.length+_415.bcc.length;_414=(_421>0);var _422=_40d.GetDesktopService(false);if(_422){if(typeof _422.MailMergeGUI!=="undefined"){if(typeof _422.MailMergeGUI().OutlookIsAvailable!=="undefined"&&_422.MailMergeGUI().OutlookIsAvailable){var _423=_422.NewActiveXObject("SLXMMGUIW.MultidimensionalArray");var _424=4;_423.Resize(0,_424);if(_414){_423.Resize(_421,_424);_412=0;var iRow=0;dojo.forEach(_411,function(prop){_412++;var _425=_415[prop];if(dojo.isArray(_425)&&_425.length>0){_425.sort(_41f);dojo.forEach(_425,function(obj){_423.SetValue(iRow,0,obj.firstName||"");_423.SetValue(iRow,1,obj.lastName||"");_423.SetValue(iRow,2,obj.emailAddress||"");_423.SetValue(iRow,3,_412);iRow++;});}});}var _426=(dojo.isString(_409))?_409:"";var _427=(dojo.isString(body))?body:"";_422.MailMergeGUI().WriteEmailEx(_423,_426,_427,_40f);return;}else{if(typeof console!=="undefined"){if(typeof _422.MailMergeGUI().OutlookIsAvailable==="undefined"){console.error("The request to e-mail could not be processed by Desktop Integration. An older version of SLXMMGUIW.DLL appears to be installed.");}else{}}}}}if(typeof console!=="undefined"){}var _428=function(str,_429,_42a,_42b,_42c,_42d){if(typeof _429=="string"){_429=[_429];}var _42e;if(_42c===false){_42e=function(x){return x;};}else{_42e=function(x){return encodeURIComponent(x);};}for(var i=0;i<_429.length&&str.length<_42a;i++){var left=_42a-str.length;var part=_429[i];if(i>0&&_42b){left--;}if(left==0||(_42d===false&&left<part.length)){continue;}part=part.substr(0,left);var ns=_42e(part);if(str.length+ns.length>_42a){if(_42d===false){continue;}var _42f=0;var _430=ns.length-left;while(_430>0){_42f++;_430-=_42e(part.charAt(part.length-_42f)).length;}if(_42f>=part.length){continue;}ns=_42e(part.substr(0,part.length-_42f));}if(i>0&&_42b){str+=_42b;}str+=ns;}return str;};var _431=function(_432,_433,_434){var _435="";var _436=_432||"";var _437=_433||"";var _438=_434||"";if(_436!=""&&_437!=""){switch(_40f){case 1:_435=_437+", "+_436;break;default:_435=_436+" "+_437;break;}}else{if(_437==""&&_436!=""){_435=_436;}else{if(_437!=""&&_436==""){_435=_437;}}}if(_435==""){return _438;}_435=dojo.string.substitute("${0} <${1}>",[_435,_438]);return _435;};var _439=function(type){var _43a=[];var _43b;switch(type){case olCC:_43b=_415.cc;break;case _410:_43b=_415.bcc;break;default:_43b=_415.to;break;}if(dojo.isArray(_43b)&&_43b.length>0){_43b.sort(_41f);dojo.forEach(_43b,function(obj){var _43c=_431(obj.firstName||"",obj.lastName||"",obj.emailAddress||"");_43a.push(_43c);});}return _43a;};var _43d=(_409||body)?1500:2040;var _43e=_439(olTo);var url=_428("mailto:",(dojo.isArray(_43e)?_43e:[]),_43d,";",false,false);var _43f=false;var _440=function(_441){var _442=(_43f)?"&":"?";_442+=_441+"=";_43f=true;return _442;};if(dojo.isString(_409)&&_409!=""){url+=_440("subject");url=_428(url,_409,1700);}var _443=_439(olCC);if(dojo.isArray(_443)&&_443.length>0){url+=_440("cc");url=_428(url,_443,_43d,";",false,false);}var _444=_439(_410);if(dojo.isArray(_444)&&_444.length>0){url+=_440("bcc");url=_428(url,_444,_43d,";",false,false);}if(dojo.isString(body)&&body!=""){url+=_440("body");url=_428(url,body,2000);}if(typeof console!=="undefined"){}try{location.href=url;}catch(e){_405.showError(dojo.string.substitute(_403.Email.resources.MailToProtocolError,[url.length,(typeof e.toMessage=="function")?e.toMessage():e.message]));}});},isWriteEmailToIdsSupported:function(_445){if(!dojo.isString(_445)||_445==""){if(typeof console!=="undefined"){console.error("The maintable argument is invalid in isWriteEmailToIdsSupported(maintable).");}}var _446=(dojo.isString(_445))?_445.toUpperCase():"";return (_446=="CONTACT"||_446=="LEAD");},__emailValidationRegEx:null,isValidEmailAddress:function(_447){if(this.__emailValidationRegEx===null){this.__emailValidationRegEx=new RegExp(dojox.validate.regexp.emailAddress());}if(dojo.isString(_447)){return this.__emailValidationRegEx.test(_447);}return false;},writeEmailToIds:function(_448,_449,_44a,body,_44b,_44c){if(!this.isWriteEmailToIdsSupported(_449)){_405.showError(_403.Email.resources.InvalidContextError);return;}if(!dojo.isArray(_448)){_405.showError(_403.Email.resources.InvalidArgumentError);return;}var self=this;require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(_44d,_44e){var _44f=_449.toUpperCase();var _450=0;_448.sort();var _451=[];dojo.forEach(_448,function(id){if(dojo.indexOf(_451,id)==-1){_451.push(id);}else{_450++;if(typeof console!=="undefined"){}}});_448=_451;dojo.forEach(_448,function(id,idx){_448[idx]="'"+id+"'";});var _452=1;if(_448.length>100){_452=Math.floor(_448.length/100);if((_448.length%100)!=0){_452++;}}var _453=0;if(typeof _44b!=="undefined"){if(!isNaN(_44b)){if(Number(_44b)==1){_453=1;}}}var _454=(_44f=="CONTACT");var _455="Email";if(dojo.isString(_44c)&&_44c!=""&&_454){var _456=_44c.toUpperCase();switch(_456){case "SECONDARYEMAIL":_455="SecondaryEmail";if(typeof console!=="undefined"){}break;case "EMAIL3":_455="Email3";if(typeof console!=="undefined"){}break;default:if(_456!="EMAIL"){if(typeof console!=="undefined"){}}if(typeof console!=="undefined"){}break;}}var _457=0;var _458=0;var _459;var _45a=0;var _45b={"data":[]};var _45c=function(key,_45d,_45e,_45f){_45b.data.push({"key":key||"","firstName":_45d||"","lastName":_45e||"","emailAddress":_45f||""});};var _460=_44d.GetDesktopService(false);for(_459=0;_459<_452;_459++){var _461=function(){var _462=100;if(_448.length<100){_462=_448.length;}var _463=new Array(_462);var _464;for(_464=0;_464<_462;_464++){_463[_464]=_448.shift();}var _465=(_463.length>1)?"Id in (${0})":"Id eq ${0}";var _466=dojo.string.substitute(_465,[_463.join(",")]);var _467=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");var _468=new Sage.SData.Client.SDataResourceCollectionRequest(_467);_468.setResourceKind((_44f=="LEAD")?"leads":"contacts");var _469="FirstName,LastName,DoNotSolicit,DoNotEmail,"+_455;_468.setQueryArg("select",_469);_468.setQueryArg("where",_466);_468.read({httpMethodOverride:true,success:function(data){_45a++;var _46a=(typeof data!=="undefined"&&data!=null)?data["$resources"]:null;if(dojo.isArray(_46a)&&_46a.length>0){var _46b;for(_46b=0;_46b<_46a.length;_46b++){var _46c=_46a[_46b].$key||"";var _46d;switch(_455){case "SecondaryEmail":_46d=_46a[_46b].SecondaryEmail||"";break;case "Email3":_46d=_46a[_46b].Email3||"";break;default:_46d=_46a[_46b].Email||"";break;}var _46e=_46a[_46b].FirstName||"";var _46f=_46a[_46b].LastName||"";var _470=_46a[_46b].DoNotEmail||false;var _471=_46a[_46b].DoNotSolicit||false;if(_46d!=""&&self.isValidEmailAddress(_46d)&&!_470&&!_471){_45c(_46c,_46e,_46f,_46d);}else{if(_470||_471){_458++;if(typeof console!=="undefined"){}}else{_457++;if(typeof console!=="undefined"){}}}}}if(_45a==_452){var _472=null;if(_458>0||_457>0||_450>0){_472=dojo.string.substitute(_403.Email.resources.FilteredOutMsg,[_458,_457,_450]);}var _473={rtTo:0,rtCC:1,rtBCC:2};var _474={"to":[],"cc":[],"bcc":[]};var _475=function(type,_476,_477,_478){var _479=function(_47a){_47a.push({"firstName":_476||"","lastName":_477||"","emailAddress":_478||""});};switch(type){case _473.rtCC:_479(_474.cc);break;case _473.rtBCC:_479(_474.bcc);break;default:_479(_474.to);break;}};var _47b;if(_45b.data.length>1){if(_457>0){if(typeof console!=="undefined"){}}if(_458>0){if(typeof console!=="undefined"){}}if(_450>0){if(typeof console!=="undefined"){}}var i;if(_460){var _47c=new Sage.SelectEmailInfo();dojo.forEach(_45b.data,function(_47d){_47c.AddInfo("","",_47d.key,_47d.emailAddress,_47d.firstName,_47d.lastName,"","",false);});var _47e=(dojo.isString(_472))?_472:"";var _47f=_460.SelectEmailNames(_47c,MaxTo.maxNoMax,_47e);if(_47f!=null&&_47f.Recipients.length>0){for(i=0;i<_47f.Recipients.length;i++){_47b=_47f.Recipients[i];_475(_47b.Type,_47b.FirstName,_47b.LastName,_47b.EmailAddress);}}else{return;}}else{dojo.forEach(_45b.data,function(_480){_475(_473.rtTo,_480.firstName,_480.lastName,_480.emailAddress);});}}else{if(_45b.data.length==1){_47b=_45b.data[0];_475(_473.rtTo,_47b.firstName,_47b.lastName,_47b.emailAddress);}else{var _481=_403.Email.resources.AllInvalidEmailError;if(_454&&_455!="Email"){_481+=dojo.string.substitute(" "+_403.Email.resources.EmailFieldQueried,["Contact."+_455]);}_405.showInfo(_481);return;}}var _482=(dojo.isString(_44a))?_44a:"";var _483=(dojo.isString(body))?body:"";var _484=(_483.length>13)?(_483.indexOf("<HTML",_483.substring(0,4).toUpperCase())==0):false;self.writeEmail(_474,_482,_483,_484,_453);}},failure:function(xhr,_485){var _486={message:_403.Email.resources.EntityInfoError};_403.ErrorHandler.handleHttpError(xhr,_485,_486);},scope:this});};_461();}});},writeEmailToGroupSelection:function(_487,body,_488,_489){if(_403.getModeId()!="list"){_405.showInfo(_403.Email.resources.CapabilityModeError);return;}var _48a=Sage.Services.getService("ClientGroupContext");if(!dojo.isObject(_48a)){return;}var _48b=_48a.getContext().CurrentTable;if(!this.isWriteEmailToIdsSupported(_48b)){_405.showError(_403.Email.resources.CapabilityEntityError);return;}var _48c=dijit.byId("list");if(!dojo.isObject(_48c)){return;}var _48d=_48c.getSelectionInfo();if(!dojo.isObject(_48d)||!_48d.hasOwnProperty("selectionCount")||_48d.selectionCount<=0){_405.showInfo(_403.Email.resources.NoRowsSelectedError);return;}var _48e=new Array(_48d.selections.length);dojo.forEach(_48d.selections,function(item,idx){_48e[idx]=item.id;});this.writeEmailToIds(_48e,_48b,_487,body,_488,_489);}});return Sage.Utility.Email;});},"Sage/Link":function(){define("Sage/Link",["Sage/UI/Dialogs","Sage/Utility","Sage/Services/ActivityService","dojo/string"],function(_48f,_490,_491,_492){Sage.namespace("Link");Sage.Link={entityDetail:function(kind,id){var _493=kind.toUpperCase();switch(_493){case "ACTIVITY":this.editActivity(id);break;case "HISTORY":this.editHistory(id);break;default:if(_490.getModeId()==="detail"){var _494=Sage.Services.getService("ClientEntityContext");var _495=_494.getContext();if(_495.EntityType===kind||_495.EntityType==="Sage.Entity.Interfaces.I"+kind){_494.navigateSLXGroupEntity(id);return;}}var url=_492.substitute("${0}.aspx?entityid=${1}&modeid=Detail",[kind,id]);document.location=url;break;}},toListView:function(kind){var url;if(typeof kind!=="undefined"){url=kind+".aspx?modeid=list";}else{url=document.location.href.replace("#","");if(url.indexOf("?")>-1){var _496=url.split("?");url=_496[0];}url+="?modeid=list";}document.location=url;},toActivityListView:function(_497){if(document.location.href.toLowerCase().indexOf("activitymanager.aspx")<1){var url="ActivityManager.aspx"+((_497)?"?tabId="+_497:"");window.setTimeout(function(){document.location=url;},5);}else{if(_497){var s=Sage.Services.getService("ClientGroupContext");s.setCurrentGroup(_497);}}},schedule:function(type){if(type==="CompleteActivity"){Sage.ClientLinkHandler.request({request:"Schedule",type:type});return;}var _498=Sage.Services.getService("ActivityService");if(!_498){Sage.Services.addService("ActivityService",new _491());_498=Sage.Services.getService("ActivityService");}_498.scheduleActivity({type:type});},newNote:function(){var _499=Sage.Services.getService("ActivityService");if(!_499){Sage.Services.addService("ActivityService",new _491());_499=Sage.Services.getService("ActivityService");}_499.insertNote();},scheduleActivity:function(args){this.schedule(args);},schedulePhoneCall:function(){this.schedule("PhoneCall");},scheduleMeeting:function(){this.schedule("Meeting");},scheduleToDo:function(){this.schedule("ToDo");},schedulePersonalActivity:function(){this.schedule("PersonalActivity");},scheduleCompleteActivity:function(){this.schedule("CompleteActivity");},scheduleEvent:function(args){var _49a=Sage.Services.getService("ActivityService");_49a.scheduleEvent(args);},editEvent:function(id){var _49b=Sage.Services.getService("ActivityService");_49b.editEvent(id);},deleteEvent:function(id){var _49c=Sage.Services.getService("ActivityService");_49c.deleteEvent(id);},editActivity:function(id,_49d,_49e){var _49f=Sage.Services.getService("ActivityService");if(!_49f){Sage.Services.addService("ActivityService",new _491());_49f=Sage.Services.getService("ActivityService");}_49e=_49e||"";_49f.editActivity(id,_49d,_49e);},editActivityIfConfirmed:function(id,_4a0){var _4a1=Sage.Services.getService("ActivityService");_4a1.editActivityIfConfirmed(id,_4a0);},editActivityOccurrence:function(id,_4a2){Sage.ClientLinkHandler.request({request:"EditActivityOccurrence",id:id,recurDate:_4a2});},editHistory:function(id,args){var _4a3=Sage.Services.getService("ActivityService");if(!_4a3){Sage.Services.addService("ActivityService",new _491());_4a3=Sage.Services.getService("ActivityService");}_4a3.editHistory(id);},completeActivity:function(id,_4a4){var _4a5=Sage.Services.getService("ActivityService");_4a5.completeActivity(id,_4a4);},completeNewActivity:function(type,args){var _4a6=Sage.Services.getService("ActivityService");_4a6.completeNewActivity(type,args);},completeActivityOccurrence:function(id,_4a7){var _4a8=Sage.Services.getService("ActivityService");_4a8.completeActivityOccurrence(id,_4a7);},deleteActivity:function(id,_4a9){var _4aa=Sage.Services.getService("ActivityService");_4aa.deleteActivity(id,false,_4a9);},deleteActivityOccurrence:function(id){var _4ab=Sage.Services.getService("ActivityService");_4ab.deleteActivity(id);},confirmActivityFor:function(_4ac,_4ad){var _4ae=Sage.Services.getService("ActivityService");_4ae.confirmActivityFor(_4ac,_4ad);},editConfirmation:function(id){var _4af=Sage.Services.getService("ActivityService");_4af.editConfirmation(id);},acceptConfirmation:function(id){var _4b0=Sage.Services.getService("ActivityService");_4b0.acceptConfirmation({id:id});},declineConfirmation:function(id){var _4b1=Sage.Services.getService("ActivityService");_4b1.declineConfirmation(id);},deleteConfirmation:function(id){var _4b2=Sage.Services.getService("ActivityService");_4b2.deleteConfirmation(id);},scheduleLitRequest:function(){var _4b3=Sage.Services.getService("ActivityService");_4b3.scheduleLitRequest();},deleteLitRequest:function(id){var _4b4=Sage.Services.getService("ActivityService");_4b4.deleteLitRequest(id);},goToLitRequest:function(id){var _4b5=Sage.Services.getService("ActivityService");_4b5.goToLitRequest(id);},goToActivityAssociation:function(_4b6,id){var _4b7=Sage.Services.getService("ActivityService");_4b7.goToActivityAssociation(_4b6,id);},mergeRecords:function(){var _4b8=dijit.byId("list");if(_4b8){var _4b9=_4b8.getSelectionInfo();if(_4b9.selectionCount===2){var _4ba=Sage.Services.getService("SelectionContextService");_4ba.setSelectionContext(_4b9.key,_4b9,this.mergeRecordsSelectionInfoCallback);Sage.ClientLinkHandler.request({request:"MergeRecords",selectionInfoKey:_4b9.key});}else{_48f.showInfo(MasterPageLinks.Merge_Account_SelectionError);}}},mergeRecordsSelectionInfoCallback:function(){},removeDeletedConfirmation:function(id){Sage.ClientLinkHandler.request({request:"RemoveDeletedConfirmation",id:id});},getHelpUrl:function(_4bb,_4bc){var _4bd;_4bd=_490.getClientContextByKey("WebHelpUrlFmt");if(_4bd===""){_4bd="help/WebClient_CSH.htm#${0}";}return _492.substitute(_4bd,[_4bb]);},getHelpUrlTarget:function(){var _4be=_490.getClientContextByKey("WebHelpLinkTarget");return (_4be==="")?"MCWebHelp":_4be;},editSecurityProfile:function(_4bf,_4c0,_4c1){Sage.ClientLinkHandler.request({request:"Administration",type:"EditSecurityProfile",selectionInfoKey:_4bf+","+_4c0+","+_4c1});},getTeamMemberLink:function(_4c2,_4c3){if(_4c2.toLowerCase()=="user"){Sage.ClientLinkHandler.request({request:"Administration",type:"RedirectToUser",kind:_4c2,id:_4c3});}else{window.location.href=_4c2+".aspx?entityId="+_4c3;}}};window.Link=Sage.Link;return Sage.Link;});},"Sage/Utility/File/nls/DefaultDropHandler":function(){define("Sage/Utility/File/nls/DefaultDropHandler",["Sage/LanguageList","dojo/_base/lang"],function(_4c4,lang){var nls={root:{emailDroppedText:"Dropped Email",attachmentTitleText:"Save Attachements",attachmentQuestionText:"Would you like to keep a copy of these attachment(s) in SalesLogix? <br />The attachments will be stored under the Attachments tab for relevant entities."}};return lang.mixin(_4c4,nls);});},"Sage/MainView/ActivityMgr/RecurringEditor":function(){require({cache:{"url:Sage/MainView/ActivityMgr/templates/RecurringEditor.html":"\r\n['<div>',\r\n    '<table style=\"width:100%\">',\r\n        '<tr>',\r\n            '<td class=\"recurring-selectors\">',  //radio buttons...\r\n                '<div>{%= $.activityOccurrsText %}</div>',\r\n                '<div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"None\" id=\"{%= $.id %}_rdo_Once\" dojoAttachPoint=\"rdo_Once\" checked=\"true\" dojoAttachEvent=\"onChange:_onceChanged\" />',  //  \r\n                    '<label for=\"{%= $.id %}_rdo_Once\">&nbsp;{%= $.onceText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"daily\" id=\"{%= $.id %}_rdo_Daily\" dojoAttachPoint=\"rdo_Daily\" dojoAttachEvent=\"onChange:_dailyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Daily\">&nbsp;{%= $.dailyText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"weekly\" id=\"{%= $.id %}_rdo_Weekly\" dojoAttachPoint=\"rdo_Weekly\" dojoAttachEvent=\"onChange:_weeklyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Weekly\">&nbsp;{%= $.weeklyText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"monthly\" id=\"{%= $.id %}_rdo_Monthly\" dojoAttachPoint=\"rdo_Monthly\" dojoAttachEvent=\"onChange:_monthlyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Monthly\">&nbsp;{%= $.monthlyText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"yearly\" id=\"{%= $.id %}_rdo_Yearly\" dojoAttachPoint=\"rdo_Yearly\" dojoAttachEvent=\"onChange:_yearlyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Yearly\">&nbsp;{%= $.yearlyText %}</label>',\r\n                '</div>',\r\n            '</td>',\r\n            '<td>',  //panel for each different recurring type...\r\n                '<div dojoType=\"dijit.layout.StackContainer\" dojoAttachPoint=\"_panelContainer\" class=\"recurring-body\" >',\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_oncePanel\" class=\"recurring-panel\"  >',\r\n                        '{%= $.occursOnceText %}',\r\n                    '</div>',\r\n//daily panel...............................\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_dailyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"dailyEvery\" value=\"days\" id=\"{%= $.id %}_rdoDailyEvery\" checked=\"true\" dojoAttachPoint=\"_rdoDailyEvery\" dojoAttachEvent=\"onChange:_dailyEveryChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoDailyEvery\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_dailyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.daysText %}</span>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"dailyEvery\" value=\"daysAfter\" id=\"{%= $.id %}_rdoDailyEveryAfter\" dojoAttachPoint=\"_rdoDailyEveryAfter\" />',\r\n                                '<label for=\"{%= $.id %}_rdoDailyEveryAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_dailyEveryAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.daysAfterText %}</span>',\r\n                            '</div>',\r\n                    '</div>',\r\n//weekly panel............................\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_weeklyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"weeklyEvery\" value=\"weeksOn\" id=\"{%= $.id %}_rdoWeeklyEvery\" checked=\"true\" dojoAttachPoint=\"_rdoWeeklyEvery\" dojoAttachEvent=\"onChange:_weeklyEveryChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoWeeklyEvery\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_weeklyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.weeksOnText %}</span>',\r\n                        '</div>',\r\n                        '<div style=\"white-space:normal;padding-bottom:10px;\">',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkMonday\" value=\"mon\" id=\"{%= $.id %}_chkMonday\" dojoAttachPoint=\"_chkMonday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkMonday\" class=\"padded-inline-label\">{%= $.monText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkTuesday\" value=\"tue\" id=\"{%= $.id %}_chkTuesday\" dojoAttachPoint=\"_chkTuesday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkTuesday\" class=\"padded-inline-label\">{%= $.tueText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkWednesday\" value=\"wed\" id=\"{%= $.id %}_chkWednesday\" dojoAttachPoint=\"_chkWednesday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkWednesday\" class=\"padded-inline-label\">{%= $.wedText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkThursday\" value=\"thu\" id=\"{%= $.id %}_chkThursday\" dojoAttachPoint=\"_chkThursday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkThursday\" class=\"padded-inline-label\">{%= $.thurText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkFriday\" value=\"fri\" id=\"{%= $.id %}_chkFriday\" dojoAttachPoint=\"_chkFriday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkFriday\" class=\"padded-inline-label\">{%= $.friText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkSaturday\" value=\"sat\" id=\"{%= $.id %}_chkSaturday\" dojoAttachPoint=\"_chkSaturday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkSaturday\" class=\"padded-inline-label\">{%= $.satText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkSunday\" value=\"sun\" id=\"{%= $.id %}_chkSunday\" dojoAttachPoint=\"_chkSunday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkSunday\" class=\"padded-inline-label\">{%= $.sunText %}</label>',\r\n                            '</span>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"weeklyEvery\" value=\"weeksAfter\" id=\"{%= $.id %}_rdoWeeklyEveryAfter\" dojoAttachPoint=\"_rdoWeeklyEveryAfter\" />',\r\n                                '<label for=\"{%= $.id %}_rdoWeeklyEveryAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_weeklyEveryAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_calculateEnd\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.weeksAfterText %}</span>',\r\n                        '</div>',\r\n                    '</div>',\r\n//monthly panel.........................................................\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_monthlyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"monthlyOn\" value=\"monthyOn\" id=\"{%= $.id %}_rdoMonthlyOn\" checked=\"true\" dojoAttachPoint=\"_rdoMonthlyOn\" dojoAttachEvent=\"onChange:_monthlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoMonthlyOn\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_monthlyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.monthsOnText %}</span>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_datesSelect\" dojoAttachEvent=\"onChange:_calculateEnd\" maxHeight=\"300\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"monthlyOn\" value=\"monthyOnThe\" id=\"{%= $.id %}_rdoMonthlyOnThe\" dojoAttachPoint=\"_rdoMonthlyOnThe\" />', // dojoAttachEvent=\"onChange:_monthlyOnChanged\"\r\n                                '<label for=\"{%= $.id %}_rdoMonthlyOnThe\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_monthlyOnTheText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.monthsOnTheText %}</span>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_weeksSelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_calculateEnd\"></select>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_weekdaySelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_calculateEnd\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"monthlyOn\" value=\"monthyAfter\" id=\"{%= $.id %}_rdoMonthlyAfter\" dojoAttachPoint=\"_rdoMonthlyAfter\" dojoAttachEvent=\"onChange:_monthlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoMonthlyAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_monthlyAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_calculateEnd\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.monthsAfterText %}</span>',\r\n                        '</div>',\r\n                    '</div>',\r\n// yearly panel..............\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_yearlyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"yearlyOn\" value=\"yearlyOn\" id=\"{%= $.id %}_rdoYearlyOn\" checked=\"true\" dojoAttachPoint=\"_rdoYearlyOn\" dojoAttachEvent=\"onChange:_yearlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoYearlyOn\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_yearlyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.yearsOnText %}</span>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_monthNamesSelect\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                            '<select dojoType=\"dijit.form.Select\" maxHeight=\"300\" dojoAttachPoint=\"_yearDatesSelect\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= ($.labelWidth - 3) %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"yearlyOn\" value=\"yearlyOnThe\" id=\"{%= $.id %}_rdoYearlyOnThe\" dojoAttachPoint=\"_rdoYearlyOnThe\" />',\r\n                                '<label for=\"{%= $.id %}_rdoYearlyOnThe\" class=\"padded-inline-label\">{%= $.theText %}</label>',\r\n                            '</div>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_yearWeeksSelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_yearWeekdaySelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                            '<label class=\"padded-inline-label\">{%= $.inText %}</label>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_yearMonthNamesSelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"yearlyOn\" value=\"yearlyEveryAfter\" id=\"{%= $.id %}_rdoYearlyEveryAfter\" dojoAttachPoint=\"_rdoYearlyEveryAfter\" dojoAttachEvent=\"onChange:_yearlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoYearlyEveryAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_yearlyEveryAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_calculateEnd\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.yearsAfterText %}</span>',\r\n                            '</div>',\r\n                    '</div>',\r\n                '</div>', //stack container\r\n// End date calculator section.........................................\r\n                '<div dojoAttachPoint=\"_startEndCalculator\" class=\"display-none\">',\r\n                    '<hr />',\r\n                    '<table>',\r\n                        '<tr>',\r\n                            '<td>{%= $.startRecurringText %}</td>',\r\n                            '<td>',\r\n                                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_StartRecur\" value=\"{%= $.startDate %}\" dojoAttachPoint=\"dtp_startRecur\" displayDate=\"true\" displayTime=\"false\" dojoAttachEvent=\"onChange:_recurringStartDateChanged\" readOnly=\"true\" ></div>',\r\n                            '</td>',\r\n                        '</tr>',\r\n                        '<tr>',\r\n                            '<td>',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"endRecur\" value=\"endAfterNum\" id=\"{%= $.id %}_rdoEndAfterNum\" dojoAttachPoint=\"_rdoEndAfter\" dojoAttachEvent=\"onChange:_endCalcModeChanged\" checked=\"true\" />',\r\n                                '<label for=\"{%= $.id %}_rdoEndAfterNum\" class=\"padded-inline-label\">{%= $.endAfterText  %}</label>',\r\n                            '</td><td>',\r\n                                '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"2\" constraints=\"{places: 0, type: \\'decimal\\', max: 999, min: 1}\" maxlength=\"3\" id=\"{%= $.id %}_num_Occurances\" dojoAttachPoint=\"num_Occurances\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_numOccurancesChanged\" />',\r\n                                '<span class=\"padded-inline-label\">{%= $.occurrencesText %}</span>',\r\n                            '</td>',\r\n                        '</tr><tr>',\r\n                            '<td>',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"endRecur\" value=\"endOn\" id=\"{%= $.id %}_rdoEndOn\" dojoAttachPoint=\"_rdoEndOn\" />',\r\n                                '<label for=\"{%= $.id %}_rdoEndOn\" class=\"padded-inline-label\">{%= $.endOnText %}</label>',\r\n                            '</td>',\r\n                            '<td>',\r\n                                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_EndRecur\" dojoAttachPoint=\"dtp_endRecur\" displayDate=\"true\" displayTime=\"false\" dojoAttachEvent=\"onChange:_endRecurChanged\" ></div>',\r\n                            '</td>',\r\n                        '</tr>',\r\n                    '</table>',\r\n                '</div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>']"}});define("Sage/MainView/ActivityMgr/RecurringEditor",["dijit/_Widget","Sage/_Templated","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","Sage/Utility/Activity","dijit/form/RadioButton","Sage/UI/Controls/Numeric","dijit/layout/StackContainer","dijit/layout/ContentPane","Sage/UI/NumberTextBox","dijit/form/CheckBox","dijit/form/Select","Sage/UI/Controls/DateTimePicker","dojo/date","dojo/i18n!./nls/RecurringEditor","dojo/text!./templates/RecurringEditor.html"],function(_4c5,_4c6,_4c7,lang,_4c8,_4c9,_4ca,_4cb,_4cc,_4cd,_4ce,_4cf,_4d0,_4d1,_4d2,_4d3,_4d4){var _4d5=_4c7("Sage.MainView.ActivityMgr._RecurringCalculator",null,{startDate:new Date(),initialStartDate:new Date(),endDate:new Date(),interval:1,occurances:1,activityRecurPeriodCode:0,recurPeriod:false,editor:false,constructor:function(opts){lang.mixin(this,opts);},calculateEndDate:function(){if(!isNaN(this.interval)&&!isNaN(this.occurances)&&this.recurPeriod){this.endDate=_4d2.add(this.startDate,this.recurPeriod,(this.interval*this.occurances)-this.interval);}return this.endDate||this.startDate;},calculateNumberOfOccurances:function(){var dif=_4d2.difference(this.startDate,this.endDate,this.recurPeriod);var _4d6=(dif/this.interval)+1;_4d6=Math.floor(_4d6);return _4d6;},set:function(prop,val){switch(prop.toLowerCase()){case "enddate":this.endDate=val;this.endDate.setHours(0);this.endDate.setMinutes(0);break;case "interval":this.interval=val;break;case "occurances":this.occurances=val;break;case "startdate":this.startDate=val;this.startDate.setHours(0);this.startDate.setMinutes(0);break;case "initialstartdate":this.initialStartDate=val;this.initialStartDate.setHours(0);this.initialStartDate.setMinutes(0);break;case "editor":this.editor=val;break;case "activityrecurperiodcode":this.activityRecurPeriodCode=val;break;}},get:function(prop){switch(prop.toLowerCase()){case "enddate":return this.endDate;case "interval":return this.interval;case "occurances":return this.occurances;case "startdate":return this.startDate;case "editor":return this.editor;case "activityRecurPeriodCode":return this.activityRecurPeriodCode;}return false;},_getTempStartDate:function(){return new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate());}});var _4d7=_4c7("Sage.MainView.ActivityMgr.DailyRecurringCalculator",_4d5,{recurPeriod:"day"});var _4d8=_4c7("Sage.MainView.ActivityMgr.WeeklyRecurringCalculator",_4d5,{recurPeriod:"week",_checkedCount:0,_checkedDays:{},calculateEndDate:function(){if(this.editor){var _4d9=this.editor.countCheckedDays();if(_4d9<2){if(!isNaN(this.interval)&&!isNaN(this.occurances)&&this.recurPeriod){this.endDate=_4d2.add(this.startDate,this.recurPeriod,(this.interval*this.occurances)-this.interval);}return this.endDate||this.startDate;}var _4da=this.editor.getCheckedDays();var _4db=this._getTempStartDate();var _4dc=this.occurances-1;while(_4dc>0){_4db=_4d2.add(_4db,"day",1);_4dc=_4dc-_4da[_4db.getDay()];}return _4db;}return this.endDate||this.startDate;}});var _4dd=_4c7("Sage.MainView.ActivityMgr.MonthlyRecurringCalculator",_4d5,{recurPeriod:"month",calculateStartDate:function(){var _4de=lang.clone(this.initialStartDate);var _4df;var _4e0=parseInt(this.editor._datesSelect.get("value"),10);var _4e1=parseInt(this.editor._weekdaySelect.get("value"),10);var _4e2=parseInt(this.editor._weeksSelect.get("value"),10);if(this.editor._rdoMonthlyOn.get("checked")){_4df=this.getNthDayOfMonth(this.initialStartDate,_4e0);_4de=_4df;}else{if(this.editor._rdoMonthlyOnThe.get("checked")){_4df=_4c9.setDateToNthWeekDay(this.initialStartDate,_4e2,_4e1);_4df.setHours(this.initialStartDate.getHours());_4df.setMinutes(this.initialStartDate.getMinutes());var _4e3=dojo.date.compare(this.initialStartDate,_4df,"date");if(_4e3!=0){if(_4e3>0){_4de=this.calculateFirstOccurrance(this.initialStartDate,_4df,_4e2,_4e1);}else{_4de=_4df;}}}}return _4de;},calculateEndDate:function(){var _4e4=this.inherited(arguments);if(this.activityRecurPeriodCode===5){var week=_4c9.getNthWeekOfMonth(this.startDate);var day=this.startDate.getDay();_4e4=_4c9.setDateToNthWeekDay(_4e4,week,day);}return _4e4;},getNthDayOfMonth:function(_4e5,_4e6){var _4e7=lang.clone(_4e5);var _4e8=_4e5.getDate();if(_4e8>_4e6){_4e7=dojo.date.add(_4e5,"month",1);}_4e7.setDate(_4e6);return _4e7;},calculateFirstOccurrance:function(_4e9,_4ea,_4eb,_4ec){var _4ed=_4ea;while(dojo.date.compare(this.initialStartDate,_4ed,"date")>0){_4ed=_4c9.setDateToNthWeekDay(dojo.date.add(_4ed,"month",1),_4eb,_4ec);}return _4ed;}});var _4ee=_4c7("Sage.MainView.ActivityMgr.YearlyRecurringCalculator",_4d5,{recurPeriod:"year",calculateEndDate:function(){var _4ef=this.inherited(arguments);if(this.activityRecurPeriodCode===8){var week=_4c9.getNthWeekOfMonth(this.startDate);var day=this.startDate.getDay();_4ef.setMonth(this.startDate.getMonth());_4ef=_4c9.setDateToNthWeekDay(_4ef,week,day);}return _4ef;}});var _4f0=_4c7("Sage.MainView.ActivityMgr.RecurringEditor",[_4c5,_4c6],{activity:{},id:"",labelWidth:"80",startDate:new Date(),initialStartDate:new Date(),startDateChangedFromParent:false,occurances:2,interval:1,activityRecurPeriodCode:0,recurringPeriods:{once:"once",daily:"daily",weekly:"weekly",monthly:"monthly",yearly:"yearly"},currentPeriod:"once",endCalculators:false,_applyingActivityData:false,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_4d4)),constructor:function(){lang.mixin(this,_4d3);},postMixInProperties:function(){if(!this.endCalculators){this.endCalculators={};var _4f1={startDate:this.startDate,endDate:this.endDate,interval:1,occurances:1,editor:this};this.endCalculators[this.recurringPeriods.daily]=new _4d7(_4f1);this.endCalculators[this.recurringPeriods.weekly]=new _4d8(_4f1);this.endCalculators[this.recurringPeriods.monthly]=new _4dd(_4f1);this.endCalculators[this.recurringPeriods.yearly]=new _4ee(_4f1);}},_setStartDateAttr:function(_4f2){if(_4f2.getMonth()===this.startDate.getMonth()&&_4f2.getDate()===this.startDate.getDate()&&_4f2.getFullYear()===this.startDate.getFullYear()){return;}this.startDateChangedFromParent=true;this._applyingActivityData=true;this.startDate=_4f2;this.initialStartDate=_4f2;this.dtp_startRecur.set("value",_4f2);this._weeklySyncToStartDate();this._monthlySyncToStartDate();this._yearlySyncToStartDate();this._calculateEnd();this._applyingActivityData=false;this.startDateChangedFromParent=false;},_getStartDateAttr:function(){return this.startDate;},_setOccurancesAttr:function(occ){this.occurances=occ;this.num_Occurances.set("value",occ);},_getOccurancesAttr:function(){return this.occurances;},_setActivityAttr:function(_4f3){this.activity=_4f3;this._setUI();this._applyActivityData();},_getActivityAttr:function(){return this.activity;},onTabShow:function(){this._panelContainer.resize();},_setUI:function(){var opts=[];if(this._datesSelect.getOptions().length<1){for(var i=1;i<32;i++){opts.push({value:i.toString(),label:i.toString()});}this._datesSelect.addOption(opts);this._yearDatesSelect.addOption(opts);}if(this._monthNamesSelect.getOptions().length<1){opts=[{value:"1",label:this.janText},{value:"2",label:this.febText},{value:"3",label:this.marText},{value:"4",label:this.aprText},{value:"5",label:this.mayText},{value:"6",label:this.junText},{value:"7",label:this.julText},{value:"8",label:this.augText},{value:"9",label:this.sepText},{value:"10",label:this.octText},{value:"11",label:this.novText},{value:"12",label:this.decText}];this._monthNamesSelect.addOption(opts);this._yearMonthNamesSelect.addOption(opts);}if(this._weeksSelect.getOptions().length<1){opts=[{value:"1",label:this.firstText},{value:"2",label:this.secondText},{value:"3",label:this.thirdText},{value:"4",label:this.fourthText},{value:"5",label:this.lastText}];this._weeksSelect.addOption(opts);this._yearWeeksSelect.addOption(opts);}if(this._weekdaySelect.getOptions().length<1){opts=[{value:"1",label:this.monText},{value:"2",label:this.tueText},{value:"3",label:this.wedText},{value:"4",label:this.thurText},{value:"5",label:this.friText},{value:"6",label:this.satText},{value:"0",label:this.sunText}];this._weekdaySelect.addOption(opts);this._yearWeekdaySelect.addOption(opts);}},_onceChanged:function(_4f4){this._setUI();if(_4f4){this._panelContainer.selectChild(this._oncePanel);this.interval=1;this._updateRecurringPeriod(this.recurringPeriods.once);}},_dailyChanged:function(_4f5){if(_4f5){this._panelContainer.selectChild(this._dailyPanel);this._dailyUpdateInterval();this._updateRecurringPeriod(this.recurringPeriods.daily);this._toggleEndCalculatorVisibility(this._rdoDailyEvery.get("checked"));}},_dailyUpdateInterval:function(){this.interval=(this._rdoDailyEvery.get("checked"))?this._dailyEveryText.get("value"):this._dailyEveryAfterText.get("value");if(isNaN(this.interval)){this.interval=1;}},_weeklyChanged:function(_4f6){if(_4f6){this._panelContainer.selectChild(this._weeklyPanel);this._weeklyUpdateInterval();this._updateRecurringPeriod(this.recurringPeriods.weekly);this._toggleEndCalculatorVisibility(this._rdoWeeklyEvery.get("checked"));}},_weeklySyncToStartDate:function(){this._clearCheckedWeekdays();this._enforceWeekdayChecked();},_weeklyUpdateInterval:function(){this._enforceWeekdayChecked();this.interval=(this._rdoWeeklyEvery.get("checked"))?this._weeklyEveryText.get("value"):this._weeklyEveryAfterText.get("value");if(isNaN(this.interval)){this.interval=1;}},_monthlyChanged:function(_4f7){if(_4f7){this._panelContainer.selectChild(this._monthlyPanel);this._monthlyUpdateInterval();this._updateRecurringPeriod(this.recurringPeriods.monthly);this._toggleEndCalculatorVisibility(!this._rdoMonthlyAfter.get("checked"));}},_monthlyUpdateInterval:function(){this.interval=(this._rdoMonthlyOn.get("checked"))?this._monthlyEveryText.get("value"):(this._rdoMonthlyOnThe.get("checked"))?this._monthlyOnTheText.get("value"):this._monthlyAfterText.get("value");if(isNaN(this.interval)){this.interval=1;}},_monthlySyncToStartDate:function(){this._datesSelect.set("value",this.startDate.getDate().toString());this._weekdaySelect.set("value",this.startDate.getDay().toString());this._weeksSelect.set("value",_4c9.getNthWeekOfMonth(this.startDate).toString());},_yearlyChanged:function(_4f8){if(_4f8){this._panelContainer.selectChild(this._yearlyPanel);this._yearlyUpdateInterval();this._updateRecurringPeriod(this.recurringPeriods.yearly);this._toggleEndCalculatorVisibility(!this._rdoYearlyEveryAfter.get("checked"));}},_yearlyUpdateInterval:function(){this.interval=(this._rdoYearlyOn.get("checked"))?this._yearlyEveryText.get("value"):(this._rdoYearlyEveryAfter.get("checked"))?this._yearlyEveryAfterText.get("value"):1;},_yearlySyncToStartDate:function(){this._monthNamesSelect.set("value",(this.startDate.getMonth()+1).toString());this._yearDatesSelect.set("value",this.startDate.getDate().toString());this._yearWeeksSelect.set("value",_4c9.getNthWeekOfMonth(this.startDate).toString());this._yearWeekdaySelect.set("value",this.startDate.getDay().toString());this._yearMonthNamesSelect.set("value",(this.startDate.getMonth()+1).toString());},_updateRecurringPeriod:function(_4f9){this._toggleEndCalculatorVisibility(_4f9!==this.recurringPeriods.once);this.currentPeriod=_4f9;this._calculateEnd();this.onRecurPeriodChanged(_4f9);},_toggleEndCalculatorVisibility:function(_4fa){if(_4fa){_4c8.remove(this._startEndCalculator,"display-none");}else{_4c8.add(this._startEndCalculator,"display-none");}},_applyActivityData:function(){this._applyingActivityData=true;if(this.activity&&this.activity.hasOwnProperty("Recurring")){this.startDate=Sage.Utility.Convert.toDateFromString(this.activity.StartDate);this.initialStartDate=Sage.Utility.Convert.toDateFromString(this.activity.StartDate);if(this.activity.Timeless||_4c9.isDateFiveSecondRuleTimeless(this.startDate)){this.startDate=new Date(this.startDate.getUTCFullYear(),this.startDate.getUTCMonth(),this.startDate.getUTCDate(),0,0,5);}this.activityRecurPeriodCode=this.activity.RecurPeriod;this.dtp_startRecur.set("value",this.startDate);if(!this.activity.Recurring){this.rdo_Once.set("checked",true);this._toggleEndCalculatorVisibility(false);this._resetInterval();this._weeklySyncToStartDate();this._monthlySyncToStartDate();this._yearlySyncToStartDate();this._applyingActivityData=false;return;}this._toggleEndCalculatorVisibility(true);switch(this.activity.RecurPeriod){case 0:case 1:this._applyDailyRecurringValues();break;case 2:case 3:this._applyWeeklyRecurringValues();break;case 4:case 5:case 6:this._applyMonthlyRecurringValues();break;case 7:case 8:case 9:this._applyYearlyRecurringValues();break;default:this.rdo_Once.set("checked",true);}}this._applyingActivityData=false;},_applyEndCalculatorValues:function(){this.dtp_startRecur.set("value",this.startDate);this._rdoEndAfter.set("checked",true);this.num_Occurances.set("value",this.activity.RecurIterations);this._calculateEnd();},_applyDailyRecurringValues:function(){this.rdo_Daily.set("checked",true);this._toggleEndCalculatorVisibility(this.activity.RecurPeriod===0);this.interval=this.activity.RecurPeriodSpec;if(this.activity.RecurPeriod===0){this._rdoDailyEvery.set("checked",true);this._dailyEveryText.set("value",this.activity.RecurPeriodSpec);this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===1){this._rdoDailyEveryAfter.set("checked",true);this._dailyEveryAfterText.set("value",this.activity.RecurPeriodSpec);}}},_weekDayValues:{sun:131072,mon:262144,tue:524288,wed:1048576,thu:2097152,fri:4194304,sat:8388608},_resetInterval:function(){this._rdoDailyEvery.set("checked",true);this._dailyEveryText.set("value","1");this._dailyEveryAfterText.set("value","1");this._rdoWeeklyEvery.set("checked",true);this._weeklyEveryText.set("value","1");this._weeklyEveryAfterText.set("value","1");this._rdoMonthlyOn.set("checked",true);this._monthlyEveryText.set("value","1");this._monthlyOnTheText.set("value","1");this._monthlyAfterText.set("value","1");this._rdoYearlyOn.set("checked",true);this._yearlyEveryText.set("value","1");this._yearlyEveryAfterText.set("value","1");this.num_Occurances.set("value","2");this.occurances=2;this._intervalChanged(2);},_clearCheckedWeekdays:function(){this._chkSaturday.set("checked",false);this._chkFriday.set("checked",false);this._chkThursday.set("checked",false);this._chkThursday.set("checked",false);this._chkWednesday.set("checked",false);this._chkTuesday.set("checked",false);this._chkMonday.set("checked",false);this._chkSunday.set("checked",false);},_applyWeeklyRecurringValues:function(){this.rdo_Weekly.set("checked",true);this._toggleEndCalculatorVisibility(this.activity.RecurPeriod===2);this._clearCheckedWeekdays();this.interval=this._evalRecurperiodspec(this.activity.RecurPeriodSpec,this.activity.RecurPeriod);if(this.activity.RecurPeriod===2){this._rdoWeeklyEvery.set("checked",true);this._weeklyEveryText.set("value",this.interval);this._enforceWeekdayChecked();this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===3){this._rdoWeeklyEveryAfter.set("checked",true);this._weeklyEveryAfterText.set("value",this.interval);}}},_evalRecurperiodspec:function(_4fb,_4fc){if(_4fb>this._weekDayValues["sat"]){_4fb=_4fb-this._weekDayValues["sat"];if(_4fc===2){this._chkSaturday.set("checked",true);}}if(_4fb>this._weekDayValues["fri"]){_4fb=_4fb-this._weekDayValues["fri"];if(_4fc===2){this._chkFriday.set("checked",true);}}if(_4fb>this._weekDayValues["thu"]){_4fb=_4fb-this._weekDayValues["thu"];if(_4fc===2){this._chkThursday.set("checked",true);}}if(_4fb>this._weekDayValues["wed"]){_4fb=_4fb-this._weekDayValues["wed"];if(_4fc===2){this._chkWednesday.set("checked",true);}}if(_4fb>this._weekDayValues["tue"]){_4fb=_4fb-this._weekDayValues["tue"];if(_4fc===2){this._chkTuesday.set("checked",true);}}if(_4fb>this._weekDayValues["mon"]){_4fb=_4fb-this._weekDayValues["mon"];if(_4fc===2){this._chkMonday.set("checked",true);}}if(_4fb>this._weekDayValues["sun"]){_4fb=_4fb-this._weekDayValues["sun"];if(_4fc===2){this._chkSunday.set("checked",true);}}return _4fb;},_applyMonthlyRecurringValues:function(){this.rdo_Monthly.set("checked",true);var _4fd=this.activity.RecurPeriodSpec;if(this.activity.RecurPeriod===4){this._rdoMonthlyOn.set("checked",true);_4fd=this._evalRecurperiodspec(_4fd,this.activity.RecurPeriod);if(_4fd>65000){_4fd=_4fd%65536;}this._monthlyEveryText.set("value",_4fd);this._datesSelect.set("value",this.startDate.getDate().toString());this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===5){this._rdoMonthlyOnThe.set("checked",true);var wDay=Math.floor(_4fd/524288)-1;_4fd=_4fd%524288;var _4fe=Math.floor(_4fd/65536);_4fd=_4fd%65536;_4fe++;this._weeksSelect.set("value",(_4fe).toString());this._weekdaySelect.set("value",wDay.toString());this._monthlyOnTheText.set("value",_4fd);this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===6){this._rdoMonthlyAfter.set("checked",true);if(_4fd>1048576){_4fd=_4fd-1048576;if(_4fd>1000){_4fd=_4fd%65536;}}this._monthlyAfterText.set("value",_4fd);}}}this.interval=_4fd;this._toggleEndCalculatorVisibility(this.activity.RecurPeriod!==6);},_applyYearlyRecurringValues:function(){var mon;this.rdo_Yearly.set("checked",true);var _4ff=this.activity.RecurPeriodSpec;if(this.activity.RecurPeriod===7){this._rdoYearlyOn.set("checked",true);if(_4ff>38797312){_4ff=eval(_4ff)-38797312;}else{_4ff=eval(_4ff)-17825792;}if(_4ff>1000){_4ff=this._evalRecurperiodspec(_4ff,this.activity.RecurPeriod);_4ff=_4ff%65536;}this._yearlyEveryText.set("value",_4ff);mon=this.startDate.getMonth();mon++;this._monthNamesSelect.set("value",mon.toString());var d=this.startDate.getDate();this._yearDatesSelect.set("value",d.toString());this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===8){this._rdoYearlyOnThe.set("checked",true);mon=Math.floor(_4ff/4194304);_4ff=_4ff%4194304;var wDay=Math.floor(_4ff/524288)-1;_4ff=_4ff%524288;var _500=Math.floor(_4ff/65536);_500++;_4ff=_4ff%65536;this._yearWeeksSelect.set("value",_500.toString());this._yearWeekdaySelect.set("value",wDay.toString());this._yearMonthNamesSelect.set("value",mon.toString());this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===9){this._rdoYearlyEveryAfter.set("checked",true);if(_4ff>38797312){_4ff=_4ff-38797312;if(_4ff>1000){_4ff=this._evalRecurperiodspec(_4ff,this.activity.RecurPeriod);_4ff=_4ff%65536;}}this._yearlyEveryAfterText.set("value",_4ff);}}}this.interval=_4ff;this._toggleEndCalculatorVisibility(this.activity.RecurPeriod!==9);},_dailyEveryChanged:function(){this._setDailyUI();this._applyChangesToActivity();},_setDailyUI:function(){var _501=this._rdoDailyEvery.get("checked");this._dailyEveryText.set("disabled",!_501);this._dailyEveryAfterText.set("disabled",_501);this._dailyUpdateInterval();this.activityRecurPeriodCode=this._rdoDailyEvery.get("checked")?0:1;this._toggleEndCalculatorVisibility(_501);},_weeklyEveryChanged:function(){this._setWeeklyUI();this._applyChangesToActivity();},_setWeeklyUI:function(){var _502=!this._rdoWeeklyEvery.get("checked");this._weeklyEveryText.set("disabled",_502);this._chkMonday.set("disabled",_502);this._chkTuesday.set("disabled",_502);this._chkWednesday.set("disabled",_502);this._chkThursday.set("disabled",_502);this._chkFriday.set("disabled",_502);this._chkSaturday.set("disabled",_502);this._chkSunday.set("disabled",_502);this._weeklyEveryAfterText.set("disabled",!this._rdoWeeklyEveryAfter.get("checked"));this._enforceWeekdayChecked();this._weeklyUpdateInterval();this.activityRecurPeriodCode=this._rdoWeeklyEvery.get("checked")?2:3;this._toggleEndCalculatorVisibility(this._rdoWeeklyEvery.get("checked"));},_dayChecked:function(){this._enforceWeekdayChecked();this._calculateEnd();},_enforceWeekdayChecked:function(){var _503=this.countCheckedDays();if(_503<1){var d=this.startDate.getDay();switch(d){case 0:this._chkSunday.set("checked",true);break;case 1:this._chkMonday.set("checked",true);break;case 2:this._chkTuesday.set("checked",true);break;case 3:this._chkWednesday.set("checked",true);break;case 4:this._chkThursday.set("checked",true);break;case 5:this._chkFriday.set("checked",true);break;case 6:this._chkSaturday.set("checked",true);break;}}if(_503>this.occurances){this._setOccurancesAttr(_503);}},getCheckedDays:function(){return [this._chkSunday.get("checked")?1:0,this._chkMonday.get("checked")?1:0,this._chkTuesday.get("checked")?1:0,this._chkWednesday.get("checked")?1:0,this._chkThursday.get("checked")?1:0,this._chkFriday.get("checked")?1:0,this._chkSaturday.get("checked")?1:0];},countCheckedDays:function(){var _504=0;var _505=this.getCheckedDays();for(var i=0;i<_505.length;i++){_504+=Number(_505[i]);}return _504;},_monthlyOnChanged:function(){this._setMonthlyUI();if(this._rdoMonthlyAfter.get("checked")){this._applyChangesToActivity();}},_setMonthlyUI:function(){var _506=!this._rdoMonthlyOn.get("checked");this._monthlyEveryText.set("disabled",_506);this._datesSelect.set("disabled",_506);_506=!this._rdoMonthlyOnThe.get("checked");this._monthlyOnTheText.set("disabled",_506);this._weeksSelect.set("disabled",_506);this._weekdaySelect.set("disabled",_506);this._monthlyAfterText.set("disabled",!this._rdoMonthlyAfter.get("checked"));this._monthlyUpdateInterval();this.activityRecurPeriodCode=this._rdoMonthlyOn.get("checked")?4:this._rdoMonthlyOnThe.get("checked")?5:6;this._toggleEndCalculatorVisibility(!this._rdoMonthlyAfter.get("checked"));if(this.activityRecurPeriodCode<6){this._calculateEnd();}},_monthlyValidateEndDate:function(){if(this.rdo_Monthly.get("checked")){var _507=this.dtp_endRecur.get("value");if(this._rdoMonthlyOn.get("checked")){var _508=parseInt(this._datesSelect.get("value"),10);if(_507.getDate()!==_508){_507.setDate(_508);this.dtp_endRecur.set("value",_507);return false;}}else{if(this._rdoMonthlyOnThe.get("checked")){var _509=parseInt(this._weekdaySelect.get("value"),10);var _50a=parseInt(this._weeksSelect.get("value"),10);if(_4c9.getNthWeekOfMonth(_507)!==_50a||_507.getDay()!==_509){_507=_4c9.setDateToNthWeekDay(_507,_50a,_509);this.dtp_endRecur.set("value",_507);return false;}}}}return true;},_yearlyOnChanged:function(){this._setYearlyUI();this._applyChangesToActivity();},_setYearlyUI:function(){var _50b=!this._rdoYearlyOn.get("checked");this._yearlyEveryText.set("disabled",_50b);this._monthNamesSelect.set("disabled",_50b);this._yearDatesSelect.set("disabled",_50b);_50b=!this._rdoYearlyOnThe.get("checked");this._yearWeeksSelect.set("disabled",_50b);this._yearWeekdaySelect.set("disabled",_50b);this._yearMonthNamesSelect.set("disabled",_50b);this._yearlyEveryAfterText.set("disabled",!this._rdoYearlyEveryAfter.get("checked"));this._yearlyUpdateInterval();this.activityRecurPeriodCode=this._rdoYearlyOn.get("checked")?7:this._rdoYearlyOnThe.get("checked")?8:9;this._toggleEndCalculatorVisibility(!this._rdoYearlyEveryAfter.get("checked"));},_yearlyValidateEndDate:function(){var _50c=true;if(this.rdo_Yearly.get("checked")){var _50d=this.dtp_endRecur.get("value");var mon=this.startDate.getMonth();if(_50d.getMonth()!==mon){_50c=false;_50d.setMonth(mon);}if(this._rdoYearlyOn.get("checked")){var dt=this.startDate.getDate();if(_50d.getDate!==dt){_50c=false;_50d.setDate(dt);}}else{if(this._rdoYearlyOnThe.get("checked")){var _50e=parseInt(this._yearWeekdaySelect.get("value"),10);var _50f=parseInt(this._yearWeeksSelect.get("value"),10);if(_4c9.getNthWeekOfMonth(_50d)!==_50f||_50d.getDay()!==_50e){_50c=false;_50d=_4c9.setDateToNthWeekDay(_50d,_50f,_50e);}}}if(!_50c){this.dtp_endRecur.set("value",_50d);}}return _50c;},_yearlyRecurDateChanged:function(){if(this._applyingActivityData){return;}var _510,_511=false;var _512=new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate());if(this._rdoYearlyOn.get("checked")){_510=parseInt(this._monthNamesSelect.get("value"),10)-1;var dt=parseInt(this._yearDatesSelect.get("value"),10);if(_512.getMonth()!==_510){_512.setMonth(_510);_511=true;}if(_512.getDate()!==dt){_512.setDate(dt);_511=true;}}else{if(this._rdoYearlyOnThe.get("checked")){_510=parseInt(this._yearMonthNamesSelect.get("value"),10)-1;if(_512.getMonth()!==_510){_512.setMonth(_510);_511=true;}var dy=parseInt(this._weekdaySelect.get("value"),10);var wk=parseInt(this._weeksSelect.get("value"),10);var _513=_4c9.setDateToNthWeekDay(_512,wk,dy);if(_512.getDate()!==_513.getDate()){if(_513<new Date()){_513=_4d2.add(_513,"year",1);_513=_4c9.setDateToNthWeekDay(_513,wk,dy);}_512=_513;_511=true;}}}if(_511){if(_512<new Date()){_512=_4d2.add(_512,"year",1);}if(!this.startDateChangedFromParent){this.onStartDateChanged(_512);}}},_intervalChanged:function(_514){this.interval=_514;this._calculateEnd();},_recurringStartDateChanged:function(_515){if(!this.startDateChangedFromParent){this.onStartDateChanged(_515);}},_endCalcModeChanged:function(){},_numOccurancesChanged:function(_516){this.occurances=_516;this._calculateEndDate();},_endRecurChanged:function(_517){if(this._rdoEndOn.get("checked")){if(this._monthlyValidateEndDate()&&this._yearlyValidateEndDate()){this._calculateOccurances();}}},_calculateEnd:function(){if(this.currentPeriod==="once"){this._applyChangesToActivity();return;}if(this._rdoEndAfter.get("checked")){if(this.rdo_Monthly.get("checked")&&!this.startDateChangedFromParent){this._calculateStartDate();}this._calculateEndDate();}else{this._calculateOccurances();}},_calculateStartDate:function(){var _518=this.endCalculators[this.currentPeriod];if(_518&&this._rdoEndAfter.get("checked")){this._applyCurrentValuesToCalculator(_518);_518.set("occurances",this.occurances);var _519=_518.calculateStartDate();this.startDate=_519;this.dtp_startRecur.set("value",_519);if(!this.startDateChangedFromParent){this.onStartDateChanged(_519);}}},_calculateEndDate:function(){var _51a=this.endCalculators[this.currentPeriod];if(_51a&&this._rdoEndAfter.get("checked")){this._applyCurrentValuesToCalculator(_51a);_51a.set("occurances",this.occurances);var _51b=_51a.calculateEndDate();this.dtp_endRecur.set("value",_51b);this._applyChangesToActivity();}},_applyCurrentValuesToCalculator:function(_51c){_51c.set("startDate",this.startDate);_51c.set("initialStartDate",this.initialStartDate);_51c.set("interval",this.interval);_51c.set("activityRecurPeriodCode",this.activityRecurPeriodCode);},_calculateOccurances:function(){var _51d=this.endCalculators[this.currentPeriod];if(_51d&&this._rdoEndOn.get("checked")){this._applyCurrentValuesToCalculator(_51d);_51d.set("endDate",this.dtp_endRecur.get("value"));var occ=1;if(_51d.endDate<_51d.startDate){this.dtp_endRecur.set("value",this.startDate);}else{occ=_51d.calculateNumberOfOccurances();}this.occurances=occ;this.num_Occurances.set("value",occ);this._applyChangesToActivity();}},_applyChangesToActivity:function(){if(this._applyingActivityData){return;}if(this.rdo_Once.get("checked")){this.activity.RecurIterations=0;this.activity.RecurPeriod=0;this.activity.RecurPeriodSpec=0;this.activity.Recurring=false;return;}var _51e=this._getCurrentRecperiod();this.activity.RecurPeriod=_51e;var _51f=0;var _520=this.num_Occurances.get("value");switch(_51e){case 0:case 1:this._dailyUpdateInterval();if(_51e===1){_520=-1;}break;case 2:_51f=this._sumWeekDays();this._weeklyUpdateInterval();break;case 3:_51f=1048576;this._weeklyUpdateInterval();_520=-1;break;case 4:_51f=1048576;this._monthlyUpdateInterval();break;case 5:_51f=this._sumMonthly();this._monthlyUpdateInterval();break;case 6:_51f=1048576;this._monthlyUpdateInterval();_520=-1;break;case 7:_51f=38797312;this._yearlyUpdateInterval();break;case 8:_51f=this._sumYearly();this.interval=1;break;case 9:_51f=38797312;this._yearlyUpdateInterval();_520=-1;break;}this.activity.RecurIterations=_520;this.activity.RecurPeriodSpec=_51f+this.interval;this.activity.Recurring=true;},_getCurrentRecperiod:function(){if(this.rdo_Daily.get("checked")){return (this._rdoDailyEvery.get("checked"))?0:1;}if(this.rdo_Weekly.get("checked")){return (this._rdoWeeklyEvery.get("checked"))?2:3;}if(this.rdo_Monthly.get("checked")){return (this._rdoMonthlyOn.get("checked"))?4:(this._rdoMonthlyOnThe.get("checked"))?5:6;}if(this.rdo_Yearly.get("checked")){return (this._rdoYearlyOn.get("checked"))?7:(this._rdoYearlyOnThe.get("checked"))?8:9;}return 0;},_sumWeekDays:function(){var _521=0;if(this._chkSaturday.get("checked")){_521+=this._weekDayValues["sat"];}if(this._chkFriday.get("checked")){_521+=this._weekDayValues["fri"];}if(this._chkThursday.get("checked")){_521+=this._weekDayValues["thu"];}if(this._chkWednesday.get("checked")){_521+=this._weekDayValues["wed"];}if(this._chkTuesday.get("checked")){_521+=this._weekDayValues["tue"];}if(this._chkMonday.get("checked")){_521+=this._weekDayValues["mon"];}if(this._chkSunday.get("checked")){_521+=this._weekDayValues["sun"];}return _521;},_getNthOccurenceOfWeekDay:function(){var _522=parseInt(this._weekdaySelect.get("value"),10);var _523=parseInt(this._weeksSelect.get("value"),10);var _524=new Date();for(var i=0;i<7;i++){var d=new Date(_524.getFullYear(),_524.getMonth(),i+1);if(d.getDay()==_522){return dojo.date.add(d,"day",((_523-1)*7));}}},_sumMonthly:function(){var _525=parseInt(this._weekdaySelect.get("value"),10)+1;var _526=parseInt(this._weeksSelect.get("value"),10);return ((_525*524288)+((_526-1)*65536));},_sumYearly:function(){var _527=parseInt(this._yearWeekdaySelect.get("value"),10)+1;var _528=parseInt(this._yearMonthNamesSelect.get("value"),10);var _529=parseInt(this._yearWeeksSelect.get("value"),10);return ((_528*4194304)+(_527*524288)+((_529-1)*65536));},_setReadOnly:function(_52a){var _52b=["rdo_Once","rdo_Daily","rdo_Weekly","rdo_Monthly","rdo_Yearly","_rdoDailyEvery","_dailyEveryText","_rdoDailyEveryAfter","_dailyEveryAfterText","_rdoWeeklyEvery","_weeklyEveryText","_chkMonday","_chkTuesday","_chkWednesday","_chkThursday","_chkFriday","_chkSaturday","_chkSunday","_rdoWeeklyEveryAfter","_weeklyEveryAfterText","_rdoMonthlyOn","_monthlyEveryText","_datesSelect","_rdoMonthlyOnThe","_monthlyOnTheText","_weeksSelect","_weekdaySelect","_rdoMonthlyAfter","_monthlyAfterText","_rdoYearlyOn","_yearlyEveryText","_monthNamesSelect","_yearDatesSelect","_rdoYearlyOnThe","_yearWeeksSelect","_yearWeekdaySelect","_yearMonthNamesSelect","_rdoYearlyEveryAfter","_yearlyEveryAfterText","dtp_startRecur","_rdoEndAfter","num_Occurances","_rdoEndOn","dtp_endRecur"];if(_52a){this._bulkSetProperty(this,_52b,"disabled",true);}else{this._bulkSetProperty(this,_52b,"disabled",false);this._setUI();this._applyActivityData();}},_bulkSetProperty:function(ui,_52c,prop,val){for(var i=0;i<_52c.length;i++){var ctrl=ui[_52c[i]];if(ctrl){ctrl.set(prop,val);}}},onStartDateChanged:function(_52d){},onRecurPeriodChanged:function(_52e){}});return _4f0;});},"Sage/UI/Controls/Lookup":function(){require({cache:{"url:Sage/UI/Controls/templates/Lookup.html":"<div class=\"textcontrol lookup\">\r\n    <span id=\"${id}\" class=\"lookup\">\r\n        <input id=\"${id}_LookupText\" class=\"text-with-icons\" required=\"${required}\" type=\"text\" dojoAttachPoint=\"textbox,focusNode\" />\r\n        <a href=\"#\">\r\n            <img id=\"${id}_LookupBtn\" src=\"images/icons/Find_16x16.png\" dojoAttachPoint=\"lookupButton\" alt=\"${buttonToolTip}\" title=\"${buttonToolTip}\" />\r\n        </a>\r\n        \r\n        <img id=\"${id}_btnClearResult\" src=\"images/icons/Delete_16x16.png\" dojoAttachPoint=\"clearButton\" class=\"display-none\" alt=\"${closeButtonToolTip}\" title=\"${closeButtonToolTip}\"/>\r\n    </span>\r\n</div>"}});define("Sage/UI/Controls/Lookup",["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","Sage/UI/ConditionManager","Sage/UI/SDataLookup","dojo/dom-attr","Sage/UI/Controls/EntityInfoToolTip","dojo/i18n!./nls/Lookup","dojo/text!./templates/Lookup.html","dojo/_base/declare"],function(_52f,_530,_531,_532,_533,_534,_535,_536,_537,_538){var _539=_538("Sage.UI.Controls.Lookup",[_531,_52f,_530],{id:"lookup",config:null,selectedObject:null,showEntityInfoToolTip:false,disabled:false,required:false,allowClearingResult:false,buttonToolTip:"Find",closeButtonToolTip:"Remove",_tooltip:false,_setSelectedObjectAttr:function(_53a){this.textbox.value=(_53a)?_53a.$descriptor:"";this.selectedObject=_53a;this._onChange(_53a);},_getSelectedObjectAttr:function(){return this.selectedObject;},_setShowEntityInfoToolTipAttr:function(_53b){this.showEntityInfoToolTip=_53b;if(!this.domNode){return;}this._tooltip=(_53b)?this._createToolTip():false;},_getShowEntityInfoToolTipAttr:function(){return this.showEntityInfoToolTip;},_createToolTip:function(){return new _535({connectId:[this.domNode],position:["below"],entityName:this.config.storeOptions.resourceKind,entityId:(this.selectedObject&&this.selectedObject["$key"])?this.selectedObject["$key"]:""});},_setAllowClearingResultAttr:function(_53c){this.allowClearingResult=_53c;if(_53c){dojo.removeClass(this.clearButton,"display-none");}else{dojo.addClass(this.clearButton,"display-none");}},_getAllowClearingResultAttr:function(){return this.allowClearingResult;},_setDisabledAttr:function(_53d){this.disabled=_53d;_534.set(this.focusNode,"disabled",_53d);this.focusNode.setAttribute("aria-disabled",_53d);if(_53d){dojo.style(this.clearButton,"visibility","hidden");dojo.style(this.clearButton,"display","none");dojo.style(this.lookupButton,"visibility","hidden");dojo.style(this.lookupButton,"display","none");}else{dojo.style(this.clearButton,"visibility","");dojo.style(this.clearButton,"display","");dojo.style(this.lookupButton,"visibility","");dojo.style(this.lookupButton,"display","");}},_getDisabledAttr:function(){return this.disabled;},_onChange:function(_53e){if(this._tooltip){this._tooltip.set("entityId",(_53e&&_53e["$key"])?_53e["$key"]:"");}this.onChange(_53e);},onChange:function(_53f){},templateString:_537,widgetsInTemplate:false,constructor:function(_540){this.inherited(arguments);dojo.mixin(this,_536);},hideTooltip:function(){if(this._tooltip){this._tooltip.close();}},postCreate:function(){var self=this;dojo.connect(this.lookupButton,"onclick",this.lookupButton,function(){if(!self.get("disabled")){var _541=new _533(self.config);_541.doSelected=function(_542){self.set("selectedObject",_542[0]);_541.lookupDialog.hide();};_541.showLookup();var _543=dojo.connect(_541.lookupDialog,"onHide",_541,function(){dojo.disconnect(_543);this.destroy();});}},true);dojo.connect(this.clearButton,"onclick",null,function(){if(!self.get("disabled")){self.textbox.value="";self.set("selectedObject",null);}},true);}});return _539;});},"Sage/Utility/Activity":function(){define("Sage/Utility/Activity",["dojo/date/locale","dojox/grid/cells/_base","Sage/Utility","dojo/string","dojo/i18n!./nls/Activity","dojo/_base/declare"],function(_544,cell,_545,_546,_547,_548){var _549=function(id){var _54a=false;if(id){if(id.trim()!==""){_54a=true;}}return _54a;};var _54b=_548("Sage.Utility.Activity.TypeCell",dojox.grid.cells.Cell,{format:function(_54c,_54d){if(!_54d){return this.defaultValue;}var type=this.get(_54c,_54d);var _54e=(_54d.hasOwnProperty("Activity")&&typeof _54d["Activity"]==="object")?_54d.Activity:_54d;var key=_545.getValue(_54e,"$key");var _54f=(_54d.hasOwnProperty("Status"))?_54d.Status:false;var _550="<a href=\"${0}\" ><div class=\"Global_Images icon16x16 ${1}\" title=\"${2}\"></div>&nbsp;${2}</a>";var _551=Sage.Utility.getValue(_54e,"RecurrenceState");var _552=Sage.Utility.Activity._getReccurenceFlag(_54e);var href="javascript:Sage.Link.editActivity('"+key+"', "+_552+")";if(_54f){var _553=_545.getClientContextByKey("userID");var _554=(_54d.hasOwnProperty["User"])?_54d.User["$key"]:_553;if(_54f==="asUnconfirmed"&&_553===_554){href="javascript:Sage.Link.confirmActivityFor('"+key+"', '"+_553+"')";}}else{href="javascript:Sage.Link.editActivityIfConfirmed('"+key+"', "+_552+")";}return _546.substitute(_550,[href,Sage.Utility.Activity.getActivityImageClass(type,"small"),Sage.Utility.Activity.getActivityTypeName(type)]);}});var _555=_548("Sage.Utility.Activity.HistoryTypeCell",dojox.grid.cells.Cell,{format:function(_556,_557){if(!_557){return this.defaultValue;}var key=_545.getValue(_557,"$key");var type=_545.getValue(_557,"Type");var _558=Sage.Utility.Activity.getActivityTypeName(type);var fmt="<a href=\"javascript:Sage.Link.editHistory('${0}')\" ><div class=\"Global_Images icon16x16 ${1} title=\"${2}\"></div>&nbsp;${2}</a>";return _546.substitute(fmt,[key,Sage.Utility.Activity.getActivityImageClass(type,"small"),_558]);}});var _559=_548("Sage.Utility.Activity.AlarmCell",cell,{formatter:function(val,_55a){return (val)?"<img src='images/icons/Alarm_16x16.gif'/>":"<div><div>";}});var _55b=_548("Sage.Utility.Activity.RecurCell",dojox.grid.cells.Cell,{format:function(_55c,_55d){if(!_55d){return this.defaultValue;}var html="";var _55e=(_55d.hasOwnProperty("Activity")&&typeof _55d["Activity"]==="object")?_55d.Activity:_55d;var _55f=_545.getValue(_55e,"Recurring");var _560=_545.getValue(_55e,"RecurrenceState");if(_55f||(_560&&_560==="rstOccurrence")){html="<div class=\"Global_Images icon16x16 icon_recurring\"></div>";}return html;}});var _561=_548("Sage.Utility.Activity.AttachCell",dojox.grid.cells.Cell,{format:function(_562,_563){if(!_563){return this.defaultValue;}var html="<div><div>";var _564=(_563.hasOwnProperty("Activity")&&typeof _563["Activity"]==="object")?_563.Activity:_563;var _565=_545.getValue(_564,"Attachment");if(_565){html="<div class=\"Global_Images icon16x16 icon_attach_to_16\"></div>";}return html;}});var _566=_548("Sage.Utility.Activity.ConfrimStatusCell",dojox.grid.cells.Cell,{format:function(_567,_568){if(!_568){return this.defaultValue;}var html="<div><div>";var _569=_545.getValue(_568,"Status");if(_569==="asUnconfirmed"){html="<div class=\"Global_Images icon16x16 icon_unconfirmedActivity16x16\"></div>";}return html;}});var _56a=_548("Sage.Utility.Activity.DurationCell",dojox.grid.cells.Cell,{format:function(_56b,_56c){if(!_56c){return this.defaultValue;}var _56d="";var _56e=(_56c.hasOwnProperty("Activity")&&typeof _56c["Activity"]==="object")?_56c.Activity:_56c;var _56f=_545.getValue(_56e,"Duration");if(_56f){var _570=_545.getValue(_56e,"Timeless");_56d=Sage.Utility.Activity.formatDuration(_56f,_570);}return _56d;}});var _571=_548("Sage.Utility.Activity.NameCell",dojox.grid.cells.Cell,{format:function(_572,_573){if(!_573){return this.defaultValue;}var _574=(_573.hasOwnProperty("Activity")&&typeof _573["Activity"]==="object")?_573.Activity:_573;var _575=_545.getValue(_574,"ContactName");var _576=_545.getValue(_574,"ContactId");if(_549(_576)){return "<a href=\"Contact.aspx?entityid="+_576+"\" >"+_575+"</a>";}var lead=_545.getValue(_574,"LeadName");var _577=_545.getValue(_574,"LeadId");if(_549(_577)){return "<a href=\"Lead.aspx?entityid="+_577+"\" >"+lead+"</a>";}return "<div></div> ";}});var _578=_548("Sage.Utility.Activity.NameTypeCell",dojox.grid.cells.Cell,{format:function(_579,_57a){if(!_57a){return this.defaultValue;}var _57b=(_57a.hasOwnProperty("Activity")&&typeof _57a["Activity"]==="object")?_57a.Activity:_57a;var _57c=_545.getValue(_57b,"ContactId");if(_549(_57c)){return _547.Contact;}var _57d=_545.getValue(_57b,"LeadId");if(_549(_57d)){return _547.Lead;}return "";}});var _57e=_548("Sage.Utility.Activity.AccountCell",dojox.grid.cells.Cell,{format:function(_57f,_580){if(!_580){return this.defaultValue;}var _581=(_580.hasOwnProperty("Activity")&&typeof _580["Activity"]==="object")?_580.Activity:_580;var _582=_545.getValue(_581,"AccountName");var _583=_545.getValue(_581,"AccountId");var html="";if(_549(_583)){html="<a href=\"Account.aspx?entityid="+_583+"\" >"+_582+"</a>";}var _584=_545.getValue(_581,"LeadId");if(_549(_584)){html="<a href=\"Lead.aspx?entityid="+_584+"\" >"+_582+"</a>";}return html;}});var _585=_548("Sage.Utility.Activity.LeaderCell",dojox.grid.cells.Cell,{format:function(_586,_587){if(!_587){return this.defaultValue;}var _588=(_587.hasOwnProperty("Activity")&&typeof _587["Activity"]==="object")?_587.Activity:null;var _589;if(_588){_589=_545.getValue(_588,"Leader");}else{_589=(_587.hasOwnProperty("Leader")&&typeof _587["Leader"]==="object")?_587.Leader:_587;}var _58a=_545.getValue(_589,"$descriptor");return _58a;}});var _58b=_548("Sage.Utility.Activity.CompleteCell",dojox.grid.cells.Cell,{format:function(_58c,_58d){if(!_58d){return this.defaultValue;}var key=_545.getValue(_58d,"$key");if(_549(key)){var _58e=(_58d.hasOwnProperty("Activity")&&typeof _58d["Activity"]==="object")?_58d.Activity:_58d;return _546.substitute("<a href=\"javascript:Sage.Link.completeActivity('${0}', ${1})\">${2}</a>",[key,_545.getValue(_58e,"Recurring"),_547.Complete]);}return "";}});Sage.namespace("Utility.Activity");return Sage.Utility.Activity={timelessText:"timeless",_imageMap:{small:{"atNote":"images/icons/note_16x16.gif","atPhoneCall":"images/icons/Call_16x16.gif","atToDo":"images/icons/To_Do_16x16.gif","atAppointment":"images/icons/Meeting_16x16.gif","atPersonal":"images/icons/Personal_16x16.gif","atLiterature":"images/icons/Literature_16x16.png","atDoc":"images/icons/mailletter_16x16.png","atFax":"images/icons/fax_16x16.gif","atEmail":"images/icons/mailletter_16x16.png"},medium:{"atNote":"images/icons/Note_24x24.gif","atPhoneCall":"images/icons/Call_24x24.gif","atToDo":"images/icons/To_Do_24x24.gif","atAppointment":"images/icons/Meeting_24x24.gif","atPersonal":"images/icons/Personal_24x24.gif","atLiterature":"images/icons/Literature_24x24.png","atDoc":"images/icons/mailletter_24x24.gif","atFax":"images/icons/fax_24x24.gif","atEmail":"images/icons/mailletter_24x24.gif"},large:{"atNote":"images/icons/Note_24x24.gif","atPhoneCall":"images/icons/Call_32x32.gif","atToDo":"images/icons/To_Do_32x32.gif","atAppointment":"images/icons/Meeting_32x32.gif","atPersonal":"images/icons/Personal_32x32.gif","atLiterature":"images/icons/Literature_32x32.png","atDoc":"images/icons/mailletter_32x32.gif","atFax":"images/icons/fax_32x32.gif","atEmail":"images/icons/mailletter_32x32.gif"}},_iconClassMap:{small:{"atNote":"icon_note_16x16","atPhoneCall":"icon_Call_16x16","atToDo":"icon_To_Do_16x16","atAppointment":"icon_Meeting_16x16","atPersonal":"icon_Personal_16x16","atLiterature":"icon_Literature_16x16","atDoc":"icon_mailletter_16x16","atFax":"icon_fax_16x16","atEMail":"icon_mailletter_16x16"},medium:{"atNote":"icon_Note_24x24","atPhoneCall":"icon_Call_24x24","atToDo":"icon_To_Do_24x24","atAppointment":"icon_Meeting_24x24","atPersonal":"icon_Personal_24x24","atLiterature":"icon_Literature_24x24","atDoc":"icon_mailletter_24x24","atFax":"icon_fax_24x24","atEmail":"icon_mailletter_24x24"},large:{"atNote":"icon_Note_24x24","atPhoneCall":"icon_Call_32x32","atToDo":"icon_To_Do_32x32","atAppointment":"icon_Meeting_32x32","atPersonal":"icon_Personal_32x32","atLiterature":"icon_Literature_32x32","atDoc":"icon_mailletter_32x32","atFax":"icon_fax_32x32","atEmail":"icon_mailletter_32x32"}},_picklistMap:{"Regarding":{"atNote":"Note Regarding","atPhoneCall":"Phone Call Regarding","atToDo":"To Do Regarding","atAppointment":"Meeting Regarding","atEmail":"To Do Regarding","atPersonal":"Personal Activity Regarding","atLiterature":"To Do Regarding"},"Category":{"atNote":"Note Category Codes","atPhoneCall":"Phone Call Category Codes","atToDo":"To Do Category Codes","atAppointment":"Meeting Category Codes","atEmail":"To Do Category Codes","atPersonal":"","atLiterature":"To Do Category Codes"},"Result":{"atNote":"Meeting Result Codes","atPhoneCall":"Phone Call Result Codes","atToDo":"To Do Result Codes","atAppointment":"Meeting Result Codes","atEmail":"To Do Result Codes","atPersonal":"Personal Activity Result Codes","atLiterature":"To Do Result Codes"}},_notMyPersonalActivityMixin:{"AccountId":"","AccountName":"","Category":_547.Personal,"ContactId":"","ContactName":"","Description":_547.Personal,"LeadId":"","LeadName":"","LongNotes":"","Notes":"","OpportunityId":"","OpportunityName":"","PhoneNumber":"","Priority":"","TicketId":"","TicketNumber":"","Location":""},secureActivityData:function(_58f){if((_58f.Type==262162)||(_58f.Type=="atPersonal")){var _590;var _591=Sage.Services.getService("ClientContextService");if(_591){if(_591.containsKey("userID")){_590=_591.getValue("userID");}}if(_590===_58f.UserId){return;}if(_58f.Leader){if(_590===_58f.Leader.$key){return;}}dojo.mixin(_58f,Sage.Utility.Activity._notMyPersonalActivityMixin);}},getActivityImage:function(type,size){size=Sage.Utility.Activity._verifySize(size);type=type||"atAppointment";return Sage.Utility.Activity._imageMap[size][type]||Sage.Utility.Activity._imageMap[size]["atAppointment"];},_verifySize:function(size){size=size||"small";size=size.toLowerCase();if(size!=="small"&&size!=="medium"&&size!=="large"){size="small";}return size;},getActivityImageClass:function(type,size){size=Sage.Utility.Activity._verifySize(size);type=type||"atAppointment";return Sage.Utility.Activity._iconClassMap[size][type]||Sage.Utility.Activity._iconClassMap[size]["atAppointment"];},getActivityTypeName:function(type){switch(type){case "atPhoneCall":return _547.PhoneCall||"Phone Call";case "atToDo":return _547.ToDo||"To Do";case "atAppointment":return _547.Meeting||"Meeting";case "atPersonal":return _547.Personal||"Personal Activity";case "atLiterature":return _547.Literature||"Literature";case "atFax":return _547.Fax||"Fax";case "atLetter":return _547.Letter||"Letter";case "atNote":return _547.Note||"Note";case "atEMail":return _547.Email||"E-mail";case "atDoc":return _547.Document||"Document";case "atDatabaseChange":return _547.DatabaseChange||"Database Change";case "atInternal":return _547.Event||"Event";case "atSchedule":return _547.ScheduledEvent||"Scheduled Event";default:return type;}},getActivityTypeEnumCode:function(type){switch(type){case 262146:return "atPhoneCall";case 262147:return "atToDo";case "atAppointment":case 262145:return "atAppointment";case 262162:return "atPersonal";case "atLiterature":return "atLiterature";case "atFax":return "atFax";case "atLetter":return "atLetter";case "atNote":return "atNote";case "atEMail":return "atEMail";default:return type;}},getConfirmationTypeEnumCode:function(type){switch(type){case 0:return "New";case 1:return "Change";case 2:return "Deleted";case 3:return "Confirm";case 4:return "Decline";case 5:return "Unknown";case 6:return "Leader";default:return type;}},getConfirmationDisplayName:function(type){switch(type){case "New":return _547.New||"New";case "Change":return _547.Change||"Change";case "Deleted":return _547.Deleted||"Deleted";case "Confirm":return _547.Confirm||"Confirm";case "Decline":return _547.Decline||"Decline";case "Unknown":return _547.Unknown||"Unknown";case "Leader":return _547.Leader||"Leader";default:return type;}},getActivityPicklistName:function(_592,_593){_592=_592||"Regarding";if(!Sage.Utility.Activity._picklistMap.hasOwnProperty(_592)){_592="Regarding";}return Sage.Utility.Activity._picklistMap[_592][_593]||Sage.Utility.Activity._picklistMap[_592]["atToDo"];},formatActivityStartDate:function(_594,_595){if(!_594){return "";}if(Sage.Utility.Convert.isDateString(_594)){_594=Sage.Utility.Convert.toDateFromString(_594);}if(typeof _595==="undefined"){_595=Sage.Utility.Activity.isDateFiveSecondRuleTimeless(_594);}if(!_595){return _544.format(_594,{selector:"datetime",fullYear:true});}else{var _596=new Date(_594.getUTCFullYear(),_594.getUTCMonth(),_594.getUTCDate());return _544.format(_596,{selector:"date",fullYear:true})+" "+this.timelessText;}},getActivityEndDate:function(_597,_598,_599){if(!_597){return false;}if(Sage.Utility.Convert.isDateString(_597)){_597=Sage.Utility.Convert.toDateFromString(_597);}if(typeof _599==="undefined"){_599=Sage.Utility.Activity.isDateFiveSecondRuleTimeless(_597);}if(!_599){return dojo.date.add(_597,"minute",_598);}else{return new Date(_597.getUTCFullYear(),_597.getUTCMonth(),_597.getUTCDate(),0,0,5);}},formatActivityStartDateForCalendar:function(_59a,_59b){if(!_59a){return "";}if(Sage.Utility.Convert.isDateString(_59a)){_59a=Sage.Utility.Convert.toDateFromString(_59a);}var _59c=new Date(_59a.getFullYear(),_59a.getMonth(),_59a.getDate(),_59a.getHours(),_59a.getMinutes());if(_59b){return _544.format(_59c,{selector:"date",datePattern:_59b});}else{return _544.format(_59c,{selector:"date",datePattern:"MM/d/yy H:mm"});}},formatActivityEndDateForCalendar:function(_59d,_59e){if(!_59d){return "";}if(Sage.Utility.Convert.isDateString(_59d)){_59d=Sage.Utility.Convert.toDateFromString(_59d);}var _59f=new Date(_59d.getFullYear(),_59d.getMonth(),_59d.getDate(),_59d.getHours(),_59d.getMinutes());var _5a0=dojo.date.add(_59f,"minute",_59e);if(dojo.date.compare(_5a0,_59f,"date")>0){_5a0=new Date(_59d.getFullYear(),_59d.getMonth(),_59d.getDate(),_5a0.getHours(),_5a0.getMinutes());}return _544.format(_5a0,{selector:"date",datePattern:"MM/d/yy H:mm"});},formatEventDate:function(_5a1){if(!_5a1){return "";}if(Sage.Utility.Convert.isDateString(_5a1)){_5a1=Sage.Utility.Convert.toDateFromString(_5a1);}return _544.format(_5a1,{selector:"date",fullYear:true});},formatDateAdd:function(dt,mode,_5a2){if(!dt){return "";}if(Sage.Utility.Convert.isDateString(dt)){dt=Sage.Utility.Convert.toDateFromString(dt);}var _5a3=new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),dt.getHours(),dt.getMinutes());_5a3=dojo.date.add(_5a3,mode,_5a2);return _544.format(_5a3,{selector:"date",fullYear:true});},formatShortDate:function(dt){if(!dt){return "";}if(Sage.Utility.Convert.isDateString(dt)){dt=Sage.Utility.Convert.toDateFromString(dt);}var _5a4=new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),dt.getHours(),dt.getMinutes());return _544.format(_5a4,{selector:"date",formatLength:"short",fullYear:true});},formatLongDate:function(dt){if(!dt){return "";}if(Sage.Utility.Convert.isDateString(dt)){dt=Sage.Utility.Convert.toDateFromString(dt);}var _5a5=new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),dt.getHours(),dt.getMinutes());return _544.format(_5a5,{selector:"date",formatLength:"long",fullYear:true});},roundDateToNextQuarterHour:function(dt){dt.setSeconds(0);var _5a6=dt.getMinutes();if(_5a6<15){dt.setMinutes(15);}else{if(_5a6<30){dt.setMinutes(30);}else{if(_5a6<45){dt.setMinutes(45);}else{dt.setMinutes(0);dt=dojo.date.add(dt,"hour",1);}}}return dt;},isDateFiveSecondRuleTimeless:function(d){if(!d){return false;}return ((d.getUTCHours()===0)&&(d.getUTCMinutes()===0)&&(d.getUTCSeconds()===5));},formatDuration:function(_5a7,_5a8){if(_5a8){return "";}if(!_5a7){return "0m";}if(_5a7<60){return _5a7+"m";}if(_5a7>60){var _5a9=String(_5a7/60).split(".");var min=_5a7%60;return _5a9[0]+"h "+min+"m";}else{return "1hr";}},formatTimelessStartDate:function(_5aa){if(!_5aa){return "";}var pad=function(n){return n<10?"0"+n:n;};return _5aa.getUTCFullYear()+"-"+pad(_5aa.getUTCMonth()+1)+"-"+pad(_5aa.getUTCDate())+"T00:00:00Z";},formatTimelessEndDate:function(_5ab,mode,_5ac){if(!_5ab){return "";}var pad=function(n){return n<10?"0"+n:n;};var _5ad=_5ab.getUTCFullYear();var _5ae=_5ab.getUTCMonth()+1;var _5af=_5ab.getUTCDate();if(mode){switch(mode){case "day":_5af+=_5ac;break;case "month":_5ae+=_5ac;break;case "year":_5ad+=_5ac;break;}}return _5ad+"-"+pad(_5ae)+"-"+pad(_5af)+"T23:59:59Z";},getNthWeekOfMonth:function(d){var _5b0=new Date(d.getFullYear(),d.getMonth(),d.getDate());var _5b1=_5b0.getMonth();for(var i=1;i<7;i++){_5b0=dojo.date.add(_5b0,"week",-1);if(_5b1!==_5b0.getMonth()){return i;}}return 1;},setDateToNthWeekDay:function(d,_5b2,_5b3){var i,_5b4=new Date(d.getFullYear(),d.getMonth(),d.getDate());if(_5b2===5){_5b4.setDate(dojo.date.getDaysInMonth(_5b4));for(i=0;i<7;i++){if(_5b4.getDay()===_5b3){break;}_5b4=dojo.date.add(_5b4,"day",-1);}}else{_5b4.setDate(1);for(i=0;i<7;i++){if(_5b4.getDay()===_5b3){break;}_5b4=dojo.date.add(_5b4,"day",1);}_5b4=dojo.date.add(_5b4,"week",_5b2-1);}return _5b4;},isValidId:function(id){var _5b5=false;if(id){if(id.trim()!=""){_5b5=true;}}return _5b5;},getConfirmStatusName:function(type){if(!type){return _547.Unknown||"Unknown";}switch(type.toUpperCase().trim()){case "CHANGE":return _547.confirmTypeChanged||"Changed";case "CONFIRM":return _547.confirmTypeConfirmed||"Confirmed";case "DELETED":return _547.confirmTypeDeleted||"Deleted";case "LEADER":return _547.Leader||"Leader";case "NEW":return _547.New||"New";default:return type;}},isReocurringId:function(id){if(id.charAt(12)===";"){return true;}return false;},findFailedRequestMessage:function(_5b6,def){if(_5b6.responseText){var rsp=eval(_5b6.responseText);if(dojo.isArray(rsp)){if(rsp[0]){return rsp[0].message||def;}}}return def;},removeMember:function(_5b7,_5b8){var _5b9=dijit.byId(_5b7);if(_5b9){var args={memberId:_5b8};_5b9._removeMember(args);}},getActivityEditLink:function(_5ba){var key=_5ba.id;var _5bb="<a href=\"${0}\" >${1}</a>";var _5bc=Sage.Utility.Activity._getReccurenceFlag(_5ba);var desc=_5ba.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(_5ba.Type));var href="javascript:Sage.Link.editActivity('"+key+"', "+_5bc+")";return _546.substitute(_5bb,[href,desc]);},getActivitySummaryHeader:function(_5bd){var key=_5bd.id;var _5be="<a href=\"${0}\" >${1}</a>";var _5bf="";if(_5bd.Alarm){_5bf+="<div class=\"Global_Images icon24x24 icon_Alarm_24x24\" > </div>&nbsp;";}if((Sage.Utility.Activity.isReocurringId(_5bd.id))||(_5bd.Recurring)){_5bf+="<div class=\"Global_Images icon16x16 icon_recurring\" > </div>&nbsp;";}_5bf+="<div class=\"Global_Images icon24x24 "+Sage.Utility.Activity.getActivityImageClass(_5bd.Type,"medium")+"\"> </div>&nbsp;";var _5c0=Sage.Utility.Activity._getReccurenceFlag(_5bd);var desc=_5bd.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(_5bd.Type));var href="javascript:Sage.Link.editActivity('"+key+"', "+_5c0+")";_5bf+=_546.substitute(_5be,[href,desc]);return _5bf;},getUserActivitySummaryHeader:function(_5c1){var _5c2=_5c1.Activity;var _5c3="";if(_5c1.Status==="asUnconfirmed"){_5c3+="<div class=\"Global_Images icon16x16 icon_unconfirmedActivity16x16\" > </div>";}if(_5c2.Alarm){_5c3+="<div class=\"Global_Images icon24x24 icon_Alarm_24x24\" > </div>&nbsp;";}if((Sage.Utility.Activity.isReocurringId(_5c2.$key))||(_5c2.Recurring)){_5c3+="<div class=\"Global_Images icon16x16 icon_recurring\" > </div>&nbsp;";}_5c3+="<div class=\"Global_Images icon24x24 "+Sage.Utility.Activity.getActivityImageClass(_5c2.Type,"medium")+"\"> </div>&nbsp;";var _5c4=Sage.Utility.Activity._getReccurenceFlag(_5c2);var _5c5="<a href=\"${0}\" >${1}</a>";var desc=_5c2.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(_5c2.Type));var href="javascript:Sage.Link.editActivity('"+_5c2.$key+"', "+_5c4+")";if(_5c1.Status==="asUnconfirmed"){href="javascript:Sage.Link.confirmActivityFor('"+_5c2.$key+"', "+_5c1.User.$key+")";}_5c3+=_546.substitute(_5c5,[href,desc]);return _5c3;},getActivityCompleteHref:function(_5c6){var key=_5c6.$key;var _5c7=Sage.Utility.Activity._getReccurenceFlag(_5c6);var href="javascript:Sage.Link.completeActivity('"+key+"', "+_5c7+")";return href;},_getReccurenceFlag:function(_5c8){if(_5c8.RecurrenceState){if((_5c8.Recurring===true)&&(_5c8.RecurrenceState==="rstMaster")){return false;}if((_5c8.Recurring===true)&&((_5c8.RecurIterations)<0)){return false;}if(_5c8.RecurrenceState==="rstOccurrence"){return true;}}else{if(_5c8.Recurring===true){if((_5c8.RecurIterations)<0){return false;}return true;}return false;}return false;},activityTypeCell:_54b,activityAlarmCell:_559,activityRecurringCell:_55b,activityAttachCell:_561,activityConfirmStatusCell:_566,activityDurationCell:_56a,activityNameCell:_571,activityNameTypeCell:_578,activityAccountCell:_57e,activityCompleteCell:_58b,historyTypeCell:_555,activityLeaderCell:_585};});},"Sage/_ConfigurationProvider":function(){define("Sage/_ConfigurationProvider",["dojo/_base/declare"],function(_5c9){var _5ca=_5c9("Sage._ConfigurationProvider",null,{_connects:null,_subscribes:null,constructor:function(_5cb){dojo.mixin(this,_5cb);this._connects=[];this._subscribes=[];},"set":function(name,_5cc){this["_"+name]=_5cc;},"get":function(name){return this["_"+name];},requestConfiguration:function(_5cd){},onConfigurationChange:function(){},destroy:function(){dojo.forEach(this._connects,function(_5ce){dojo.disconnect(_5ce);});dojo.forEach(this._subscribes,function(_5cf){dojo.unsubscribe(_5cf);});this.uninitialize();},uninitialize:function(){}});var _5d0=_5c9("Sage.StaticConfigurationProvider",[_5ca],{createConfiguration:function(){var _5d1={};for(var name in this){if(this.hasOwnProperty(name)&&!/^_/.test(name)){_5d1[name]=this[name];}}return _5d1;},requestConfiguration:function(_5d2){if(_5d2.success){_5d2.success.call(_5d2.scope||this,this.createConfiguration(_5d2),_5d2,this);}}});return _5ca;});},"Sage/Utility/File/nls/AttachmentPropertiesEditForm":function(){define("Sage/Utility/File/nls/AttachmentPropertiesEditForm",["Sage/LanguageList","dojo/_base/lang"],function(_5d3,lang){var nls={root:{fileText:"File",descriptionText:"Description",sizeText:"Size",attachDateText:"Attached Date",attachedByText:"Attached By",uploadFileText:"Select Different File...",editText:"Edit Attachment",okText:"OK",cancelText:"Cancel",browseText:"Browse",urlText:"URL",requestFailedMsg:"The requested operation could not be completed, please try again later."}};return lang.mixin(_5d3,nls);});},"Sage/QuickForms/Design/Editors/NumericBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/NumericBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/NumericBasicPropertyEditor"],function(_5d4,lang,_5d5,_5d6,_5d7,_5d8,_5d9,_5da,_5db,_5dc,_5dd,_5de){return _5d4("Sage.QuickForms.Design.Editors.NumericBasicPropertyEditor",[_5d5,_5dc,_5db],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_5de);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(_5df){if(this.isSuspended()){return;}this._designer.set("caption",_5df);},_onCaptionAlignmentChange:function(_5e0){if(this.isSuspended()){return;}this._designer.set("captionAlignment",_5e0);},_onIsReadOnlyChange:function(_5e1){if(this.isSuspended()){return;}this._designer.set("isReadOnly",_5e1);},_onToolTipChange:function(_5e2){if(this.isSuspended()){return;}this._designer.set("toolTip",_5e2);}});});},"Sage/Data/SingleEntrySDataStore":function(){define("Sage/Data/SingleEntrySDataStore",["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare"],function(_5e3,_5e4,_5e5){var _5e6=_5e5("Sage.Data.SingleEntrySDataStore",_5e3,{_entity:false,_request:false,_okToCache:true,postMixInProperties:function(){},getFeed:function(_5e7){},fetch:function(_5e8){if(_5e8.queryOptions&&_5e8.queryOptions.currentEntity&&this._entity){this.returnCollectionProperty(_5e8,_5e8.queryOptions.property);return;}this.verifyService();var _5e9=this._getRequest();if(_5e8.predicate){if(this._entity&&(_5e8.predicate===this._entity.$key)&&this._okToCache){if(_5e8.onComplete){_5e8.onComplete.call(_5e8.scope||this,this._entity,_5e8);return;}}_5e9.setResourceSelector(_5e8.predicate);}if(this.select&&this.select.length>0){_5e9.setQueryArg("select",this.select.join(","));}if(this.include&&this.include.length>0){_5e9.setQueryArg("include",this.include.join(","));}if(this.predicate&&this.predicate.length>0){_5e9.setResourceSelector(this.predicate);}if(_5e8.beforeRequest){_5e8.beforeRequest.call(_5e8.scope||this,_5e9);}_5e9.read({success:dojo.hitch(this,this.onSuccess,_5e8),failure:dojo.hitch(this,this.onFailure,_5e8)});},save:function(_5ea){if(this._request&&this._entity){this._okToCache=false;this._request.update(this._entity,_5ea);}},setValue:function(item,_5eb,_5ec){var _5ed=item||this._entity;if(_5ed){var _5ee=this.getValue(_5ed,_5eb,"");_5e4.setValue(_5ed,_5eb,_5ec);this.onSet(_5ed,_5eb,_5ee,_5ec);}},getCurrentEntity:function(){return this._entity;},newItem:function(args){var _5ef=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);_5ef.setResourceKind(this.resourceKind);_5ef.read({success:function(_5f0){this._entity=_5f0;if((args.onComplete)&&(typeof args.onComplete==="function")){args.onComplete.call(args.scope||this,_5f0);}},failure:function(err){if(args.onError){args.onError.call(args.scope||this,err);}},scope:this});},saveNewEntity:function(_5f1,_5f2,_5f3,_5f4,_5f5){if(!_5f1){_5f1=this._entity;}var _5f6=new Sage.SData.Client.SDataSingleResourceRequest(this.service);_5f6.setResourceKind(this.resourceKind);if(_5f5){_5f5.call(_5f4||this,_5f6,_5f1);}_5f6.create(_5f1,{success:_5f2||function(_5f7){if(typeof console!=="undefined"){}},failure:_5f3||function(_5f8,o){if(typeof console!=="undefined"){}},scope:_5f4||this});},deleteEntity:function(_5f9,_5fa,_5fb,_5fc){_5f9=_5f9||this._entity;if(_5f9){var _5fd=new Sage.SData.Client.SDataSingleResourceRequest(this.service);_5fd.setResourceKind(this.resourceKind);_5fd.setResourceSelector("'"+_5f9["$key"]+"'");_5fd["delete"](_5f9,{success:_5fa||function(_5fe){if(typeof console!=="undefined"){}},failure:_5fb||function(_5ff){if(typeof console!=="undefined"){}},scope:_5fc||this});}},clearCache:function(){this._entity=false;},_getRequest:function(){if(!this._request){var req=new Sage.SData.Client.SDataSingleResourceRequest(this.service);req.setResourceKind(this.resourceKind);this._request=req;}return this._request;},returnCollectionProperty:function(_600,_601){if(this._entity&&this._entity.hasOwnProperty(_601)){var list=this._entity[_601].$resources;if(typeof list!=="unknown"){if(_600.onBegin){_600.onBegin.call(_600.scope||this,list.length,_600);}if(_600.onComplete){_600.onComplete.call(_600.scope||this,list,_600);}}}},onSuccess:function(_602,data){if(data){this._okToCache=true;this._entity=data;if(_602.onComplete){_602.onComplete.call(_602.scope||this,data,_602);}}else{if(_602.onError){_602.onError.call(_602.scope||this,"invalid feed",_602);}}},onFailure:function(_603,_604,_605){this._entity=false;if(_603.onError){_603.onError.call(_603.scope||this,_604.responseText,_603);}},onSet:function(item,_606,_607,_608){}});return _5e6;});},"Sage/UI/SLXPreviewGrid/main":function(){define("Sage/UI/SLXPreviewGrid/main",["Sage/UI/SLXPreviewGrid/Grid","Sage/UI/SLXPreviewGrid/FilterPanel","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/Text"],function(){});},"Sage/Utility/Filters":function(){define("Sage/Utility/Filters",["dojo/_base/lang","Sage/Data/SDataServiceRegistry","dojo/json"],function(lang,_609,json){Sage.namespace("Utility.Filters");lang.mixin(Sage.Utility.Filters,{getHiddenFiltersKey:function(){var _60a=Sage.Services.getService("ClientGroupContext"),_60b=_60a&&_60a.getContext(),_60c="hidden_filters_",_60d=_60b&&_60b.CurrentGroupID,key="";if(_60d){_60d=_60d.toLowerCase();_60d=_60d.replace(/ /g,"_").replace(/'/g,"_");key=_60c+_60d;}return key;},setHiddenFilters:function(key,_60e){var _60f,_610,_611;_60f=_609.getSDataService("system");_610={"$name":"setHiddenFilters","request":{"key":key,"value":_60e}};_611=new Sage.SData.Client.SDataServiceOperationRequest(_60f);_611.setOperationName("setHiddenFilters");_611.execute(_610,{});sessionStorage.removeItem(key);},getHiddenFilters:function(key,_612,_613){var _614,_615,_616,data;data=sessionStorage.getItem(key);if(data===null){_614=_609.getSDataService("system");_616={"$name":"getHiddenFilters","request":{"key":key}};_615=new Sage.SData.Client.SDataServiceOperationRequest(_614).setOperationName("getHiddenFilters");_615.execute(_616,{success:lang.hitch(this,this._getHiddenFiltersSuccess,_612,key),failure:_613});}else{_612.call(this,json.parse(data));}},_getHiddenFiltersSuccess:function(_617,key,data){if(_617){sessionStorage.setItem(key,json.stringify(data));_617.call(this,data);}},resolveDataType:function(_618){switch(_618){case "47f90249-e4c8-4564-9ae6-e1fa9904f8b8":case "6b0b3d51-0728-4b67-9473-52836a81da53":case "2596d57d-89d6-4b72-9036-b18c64c5324c":case "f37c635c-9fbf-40d8-98d5-750a54a3cca1":return "numeric";case "ccc0f01d-7ba5-408e-8526-a3f942354b3a":case "76c537a8-8b08-4b35-84cf-fa95c6c133b0":case "b71918bf-fac1-4b62-9ed5-0b0294bc9900":case "517d5e69-9efa-4d0a-8e7a-1c7691f921ba":return "string";case "8edd8fce-2be5-4d3d-bedd-ea667e78a8af":return "enum";case "1f08f2eb-87c8-443b-a7c2-a51f590923f5":return "date";case "30053f5a-8d40-4db1-b185-1e4128eb26cc":return "key";case "92432b4d-8206-4a96-ba7b-e4cbd374f148":return "boolean";case "f4ca6023-9f5f-4e41-8571-50ba94e8f233":return "binary";default:return "unknown";}},resolveDataTypeQB:function(_619){var _61a;switch(_619){case "47f90249-e4c8-4564-9ae6-e1fa9904f8b8":case "6b0b3d51-0728-4b67-9473-52836a81da53":_61a="Integer";break;case "2596d57d-89d6-4b72-9036-b18c64c5324c":case "f37c635c-9fbf-40d8-98d5-750a54a3cca1":_61a="Decimal";break;case "ccc0f01d-7ba5-408e-8526-a3f942354b3a":case "76c537a8-8b08-4b35-84cf-fa95c6c133b0":case "b71918bf-fac1-4b62-9ed5-0b0294bc9900":case "517d5e69-9efa-4d0a-8e7a-1c7691f921ba":_61a="String";break;case "1f08f2eb-87c8-443b-a7c2-a51f590923f5":_61a="Date/Time";break;case "f4ca6023-9f5f-4e41-8571-50ba94e8f233":_61a="Memo/Blob";break;default:_61a="String";}return _61a;}});return Sage.Utility.Filters;});},"Sage/MainView/ActivityMgr/ConfirmListPanelConfig":function(){define("Sage/MainView/ActivityMgr/ConfirmListPanelConfig",["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Columns/DateTime","dojo/_base/declare","dojo/i18n!./nls/ConfirmListPanelConfig"],function(_61b,_61c,_61d,_61e,_61f,_620,_621,_622){var _623=_621("Sage.MainView.ActivityMgr.ConfirmListPanelConfig",[_61b],{constructor:function(){this._nlsResources=_622;this._listId="confirmations";this._resourceKind="UserNotifications";this.entityName="UserNotification";this._contextMenu="ConfimationListContextMenu";this._scheduleContextMenu="ScheduleContextMenu";this._structure=this._getStructure();this._select=this._getSelect();this._include=this._getInclude();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.toolBar=this._getToolBars();dojo.subscribe("/entity/userNotification/change",this._onListRefresh);dojo.subscribe("/entity/userNotification/delete",this._onListRefresh);},_onListRefresh:function(_624){var _625=Sage.Services.getService("ActivityService");_625.refreshList("confirmations");},_getSelect:function(){var _626=["$key","Type","ActivityId","Activity/Type","Activity/StartDate","Activity/Description","FromUserId","ToUserId","FromUser/UserInfo/UserName","ToUser/UserInfo/UserName"];return _626;},_getInclude:function(){var _627=["UserInfo"];return _627;},_getSort:function(){var sort=[{attribute:"Activity.StartDate",descending:true}];return sort;},_getWhere:function(){var _628=(this._currentUserId)?dojo.string.substitute("ToUser.Id eq \"${0}\" ",[this._currentUserId]):"";return _628;},_getStructure:function(){var _629=this._nlsResources.colNameType||"Activity Type";var _62a=this._nlsResources.colNameNotification||"Notification";var _62b=this._nlsResources.colNameStartDate||"Start Date";var _62c=this._nlsResources.colNameRegarding||"Regarding";var _62d=this._nlsResources.colNameFromUser||"From";var _62e=this._nlsResources.colNameToUser||"To User";var _62f=_621("Sage.MainView.ActivityMgr.ConfirmListPanelConfig.ActivityConfirmCell",dojox.grid.cells.Cell,{format:function(_630,_631){var key=_61c.getValue(_631,"$key");var type=_61c.getValue(_631,"Type");var _632=_61c.getValue(_631,"ActivityId");var _633=_61c.getValue(_631,"ToUserId");var _634=_61d.getConfirmStatusName(type);var html="<a href='javascript:Sage.Link.editConfirmation(\""+key+"\")' >"+_634+"</a>";return html;}});var _635=_621("Sage.MainView.ActivityMgr.ConfirmListPanelConfig.ActivityTypeCell",dojox.grid.cells.Cell,{format:function(_636,_637){var type=this.get(_636,_637);var html="<div><div class='Global_Images icon16x16 "+_61d.getActivityImageClass(type,"small")+"'></div>&nbsp"+_61d.getActivityTypeName(type)+"</div>";return html;}});var _638=[{field:"Type",name:_62a,type:_62f,width:"90px"},{field:"Activity.Type",name:_629,type:_635,width:"90px"},{field:"Activity.StartDate",name:_62b,type:_620,timelessField:"Timeless",width:"150px"},{field:"Activity.Description",name:_62c,width:"300px"},{field:"FromUser.UserInfo.UserName",name:_62d,width:"100px"},{field:"ToUser.UserInfo.UserName",name:_62e,width:"100px"}];return _638;},_getDetailConfig:function(){var _639=this._getFormatterScope();var _63a={resourceKind:this._resourceKind,requestConfiguration:{mashupName:"ActivityManager",queryName:"ConfirmationDetailSummary_query"},templateLocation:"MainView/ActivityMgr/Templates/ConfirmationDetailSummary.html",postProcessCallBack:false};return _63a;},_getFormatterScope:function(){var _63b=new _61e({requestConfiguration:{mashupName:"ActivityManager",queryName:"ConfirmationListSummary_query"},templateLocation:"MainView/ActivityMgr/Templates/ConfirmationListSummary.html"});return _63b;},_getToolBars:function(){var _63c={items:[]};return _63c;}});return _623;});},"Sage/QuickForms/Design/HiddenControlDesigner":function(){define("Sage/QuickForms/Design/HiddenControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/NonVisibleAdvancedPropertyEditor","dojo/i18n!./nls/HiddenControlDesigner"],function(_63d,_63e,lang,_63f,_640,_641,_642,_643,_644){return _63d("Sage.QuickForms.Design.HiddenControlDesigner",[_640,_641,_63f,_642],{designSupport:{visible:false},editors:[_643],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div data-dojo-attach-point=\"containerNode\">","<span data-dojo-attach-point=\"designCaptionNode\"></span>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},helpTopicName:"Hidden_Text_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFHidden, Sage.Platform.QuickForms.QFControls",displayNameText:"Hidden Text",constructor:function(){lang.mixin(this,_644);},_setControlIdAttr:function(_645){this.inherited(arguments);this.set("designCaption",_645);},startup:function(){this.inherited(arguments);this.set("designCaption",this.get("controlId"));}});});},"Sage/MainView/Lead/UpdateLeads":function(){define("Sage/MainView/Lead/UpdateLeads",["dojo/_base/declare","dojo/i18n!./nls/UpdateLeads","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","Sage/UI/Controls/Lookup","dijit/form/Form","dijit/form/Select","dijit/form/Textarea","dijit/layout/ContentPane","dojox/layout/TableContainer","dojo/i18n!./nls/UpdateLeads"],function(_646,_647,_648,_649,_64a,_64b,_64c,_64d,_64e){var _64f=_646("Sage.MainView.Lead.UpdateLeads",[_64b,_64c],{id:"dlgUpdateMultipleLeads",_dialog:false,_selectionInfo:false,_updateableProperties:false,selectedFieldIndex:1,lup_Owner:false,lup_AcctMgr:false,widgetsInTemplate:true,widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.updateMultipleLeads_Caption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">","<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmUpdateMultipleLeads\">","<table cellspacing=\"20\">","<tr>","<td>","<label>{%= $.update_Property_Caption %}</label>","</td>","<td>","<select title=\"{%= $.update_Property_Caption %}\" labelWidth=\"20\" name=\"{%= $.id %}_PropertyName\" dojoAttachPoint=\"propertyNameSelect\" dojoAttachEvent=\"onChange:_propertyChanged\" data-dojo-type=\"dijit.form.Select\" style=\"width:150px\">","{% for (var i=0; i < $._updateableProperties.length;i++) { %}","<option value=\"{%= $._updateableProperties[i].propertyName %}\" {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $._updateableProperties[i].propertyDisplayName %}</option>","{% } %}","</select>","</td>","<td>","<div id=\"divUpdateLeadsTolbl\" dojoAttachPoint=\"divUpdateLeadsTolbl\">","<label>{%= $.update_To_Caption %}</label>","</div>","</td>","<td>","<div dojoAttachPoint=\"divOwnerContainer\" baseClass=\"lookup-container\">","<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.lookupOwnerText %}\" dojoAttachPoint=\"assignOwner_Container\" class=\"removePadding\"></div>","</div>","<div dojoAttachPoint=\"divAcctMgrContainer\" baseClass=\"lookup-container\" class=\"display-none\">","<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_luAccountMgr\" dojoAttachPoint=\"accountMgr_Container\" allowClearingResult=\"false\" class=\"removePadding\"></div>","</div>","</td>","</tr>","</table>","<div class=\"button-bar\" align=\"right\">","<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.ok_Text %}</div>","<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCancel_Caption %}</div>","</div>","</div>","</div>","</div>"]),constructor:function(_650){this._selectionInfo=_650;dojo.mixin(this,_647);if(!this._updateableProperties){this._updateableProperties=[{propertyName:"",propertyDisplayName:""}];this.loadUpdateableProperties("Owner",this.updateProp_Owner);this.loadUpdateableProperties("AcctMgr",this.updateProp_AcctMgr);}},loadUpdateableProperties:function(_651,_652){var _653={propertyName:_651,propertyDisplayName:_652};this._updateableProperties.push(_653);},show:function(){if(!this.lup_Owner){this.createOwnerLookup();}if(!this.lup_AcctMgr){this.createAcctMgrLookup();}this._dialog.show();if(!this._dialog.helpIcon){_649.mixin(this._dialog,new _648());this._dialog.createHelpIconByTopic("updateleads");}},_propertyChanged:function(){if(this.propertyNameSelect){this.setDisplayProperty(this.divAcctMgrContainer,(this.propertyNameSelect.value=="AcctMgr"));this.setDisplayProperty(this.divOwnerContainer,(this.propertyNameSelect.value=="Owner"));}},setDisplayProperty:function(_654,_655){if(_654&&_655){dojo.removeClass(_654,"display-none");}else{if(_654){dojo.addClass(_654,"display-none");}}},createOwnerLookup:function(){this.assignOwnerLookupConfig={id:"_assignOwner",structure:[{defaultCell:{sortable:true,width:"150px",editable:false,styles:"text-align: left;",propertyType:"System.String",excludeFromFilters:false,useAsResult:false,pickListName:null,defaultValue:""},cells:[{name:this.lookupDescriptionColText,field:"Description"},{name:this.lookupTypeColText,field:"Type",PropertyType:"Sage.Entity.Interfaces.OwnerType"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"ownerViews",sort:[{attribute:"Description"}]},isModal:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupOwnerText,dialogButtonText:this.ok_Text};this.lup_Owner=new _64e({id:"lu_AssignOwner",config:this.assignOwnerLookupConfig,style:"width:100%"});dojo.place(this.lup_Owner.domNode,this.assignOwner_Container.domNode,"only");},createAcctMgrLookup:function(){this.accountMgrLookupConfig={id:"_acctMgr",structure:[{defaultCell:{sortable:true,width:"150px",editable:false,styles:"text-align: left;",propertyType:"System.String",excludeFromFilters:false,useAsResult:false,pickListName:null,defaultValue:""},cells:[{name:this.lookupNameColText,field:"UserInfo.UserName"},{name:this.lookupTitleColText,field:"UserInfo.Title"},{name:this.lookupDepartmentColText,field:"UserInfo.Department"},{name:this.lookupRegionColText,field:"UserInfo.Region"},{name:this.lookupTypeColText,field:"Type",propertyType:"Sage.Entity.Interfaces.UserType"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",sort:[{attribute:"UserInfo.UserName"}]},isModal:true,initialLookup:true,preFilters:[{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"5"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"6"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"7"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"8"}],returnPrimaryKey:true,dialogTitle:this.lookupActMgrText,dialogButtonText:this.okText};this.lup_AcctMgr=new _64e({id:"lu_AcctMgr",config:this.accountMgrLookupConfig,style:"width:100%"});dojo.place(this.lup_AcctMgr.domNode,this.accountMgr_Container.domNode,"only");},_okClick:function(){var _656=this.getPropertySelectionValue();var self=this;if(!_656&&!_656.value){_64d.showError(this.errorUnspecifiedValue);return;}var _657=Sage.Data.SDataServiceRegistry.getSDataService("scheduling");var _658=new Sage.SData.Client.SDataServiceOperationRequest(_657).setApplicationName("$app").setOperationName("trigger").setResourceKind("jobs('Sage.SalesLogix.BusinessRules.Jobs.UpdateEntityJob')");var _659={"$name":"Sage.SalesLogix.BusinessRules.Jobs.UpdateEntityJob","request":{"parameters":[{"name":"EntityName","value":"Lead"},{"name":"PropertyNames","value":_656.name},{"name":"PropertyValues","value":_656.value},{"name":"SelectedIds","value":(this._selectionInfo.selectionCount>0)?this._selectionInfo.selectedIds.join(",")||"":""},{"name":"GroupId","value":(this._selectionInfo.selectionCount==0)?this.getCurrentGroupId()||"":""}]}};_658.execute(_659,{success:function(_65a){self._close();},failure:function(_65b){_64d.showError(this.errorRequestingJobMgr);}});},getCurrentGroupId:function(){var _65c=Sage.Services.getService("ClientGroupContext");if(_65c){var _65d=_65c.getContext();return _65d.CurrentGroupID;}return "";},getPropertySelectionValue:function(){if(this.propertyNameSelect){switch(this.propertyNameSelect.value){case "AcctMgr":if(this.lup_AcctMgr.selectedObject){return {name:"AccountManager",value:this.lup_AcctMgr.selectedObject.$key};}return false;case "Owner":if(this.lup_Owner.selectedObject){return {name:"Owner",value:this.lup_Owner.selectedObject.$key};}return false;}}return false;},_close:function(){this._dialog.hide();}});return _64f;});},"Sage/Services/ClientBindingManagerService":function(){define("Sage/Services/ClientBindingManagerService",["dojo/_base/declare"],function(_65e){var _65f=_65e("Sage.Services.ClientBindingManagerService",null,{constructor:function(){this._listeners[this.ON_SAVE]=[];this.inherited(arguments);},_WatchChanges:true,_PageExitWarningMessage:"",_ShowWarningOnPageExit:false,_SkipCheck:false,_CurrentEntityIsDirty:false,_SaveBtnID:"",_MsgDisplayID:"",_entityTransactionID:"",_IgnoreDirtyFlag:false,_DirtyAjaxItems:[],_listeners:{},_init:function(){this.positionDirtyDataMessage();dojo.subscribe("Sage/events/markDirty",this,"markDirty");},positionDirtyDataMessage:function(){var _660=dojo.query("#PageTitle");var _661=dojo.query(".dirtyDataMessage");if(_660&&_660.length>0&&_661&&_661.length>0){dojo.place(_661[0],_660[0],"after");dojo.style(_661[0],"top",dojo.marginBox(_660[0]).t+"px");dojo.style(_661[0],"left",dojo.marginBox(_660[0]).w+"px");}},addListener:function(_662,_663,_664){this._listeners[_662]=this._listeners[_662]||[];this._listeners[_662].push({listener:_663,scope:_664});},removeListener:function(_665,_666){this._listeners[_665]=this._listeners[_665]||[];for(var i=0;i<this._listeners[_665].length;i++){if(this._listeners[_665][i].listener==_666){break;}}this._listeners[_665].splice(i,1);},onSave:function(){for(var i=0;i<this._listeners[this.ON_SAVE].length;i++){var fn=this._listeners[this.ON_SAVE][i].listener;var _667=this._listeners[this.ON_SAVE][i].scope||this;if(typeof fn==="function"){fn.call(_667);}}},SetShowWarningOnPageExit:function(_668){this._ShowWarningOnPageExit=(_668);if(this._ShowWarningOnPageExit){window.onbeforeunload=this.onExit;}},onExit:function(e){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){if(mgr._ShowWarningOnPageExit){if(mgr._SkipCheck){return;}var hdd=mgr.hasDirtyData();if(hdd&&(mgr._IgnoreDirtyFlag==false)||Sage.Utility.getModeId()==="insert"){window.setTimeout(function(){Sage.Utility.hideRequestIndicator(null,{});},1000);if(window.event){window.event.returnValue=mgr._PageExitWarningMessage;}else{return mgr._PageExitWarningMessage;}}}}return;},canChangeEntityContext:function(){if((this._WatchChanges)&&(this.hasDirtyData())&&(this._ShowWarningOnPageExit)){if(confirm(this._PageExitWarningMessage)){this.clearDirtyStatus();return true;}else{return false;}}return true;},hasDirtyData:function(){return (this._CurrentEntityIsDirty||(this._DirtyAjaxItems&&this._DirtyAjaxItems.length>0));},markDirty:function(e){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){if(mgr._WatchChanges){mgr._CurrentEntityIsDirty=true;if(mgr._IgnoreDirtyFlag==false){dojo.style(dojo.byId(mgr._MsgDisplayID),"display","inline");}}}},addDirtyAjaxItem:function(_669){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){var len=this._DirtyAjaxItems.length;for(var i=0;i<len;i++){if(this._DirtyAjaxItems[i]===_669){return;}}this._DirtyAjaxItems.push(_669);if(this._WatchChanges){if(this._IgnoreDirtyFlag==false){dojo.style(dojo.byId(mgr._MsgDisplayID),"display","inline");}}}},clearDirtyAjaxItem:function(_66a){var len=this._DirtyAjaxItems.length;for(var i=0;i<len;i++){if(this._DirtyAjaxItems[i]===_66a){this._DirtyAjaxItems.splice(i,1);}}if(!this.hasDirtyData()){$("#"+this._MsgDisplayID).hide();}},clearDirtyStatus:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._CurrentEntityIsDirty=false;$("#"+mgr._MsgDisplayID).hide();}},notifyIsSaving:function(){if(Sage.Utility.Validate._isValid){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){Sys.WebForms.PageRequestManager.getInstance().add_endRequest(mgr.handleEndSaveRequest);mgr.clearDirtyStatus();if(Sage.Utility.getModeId()==="insert"){mgr._SkipCheck=true;}mgr.onSave();}}},handleEndSaveRequest:function(_66b,args){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){if(!args.get_error()){mgr.clearDirtyStatus();}else{mgr.markDirty();}Sys.WebForms.PageRequestManager.getInstance().remove_endRequest(mgr.handleEndSaveRequest);}},saveForm:function(){var btn=dojo.byId(this._SaveBtnID);if(btn){if((btn.tagName.toLowerCase()=="input")&&(btn.type=="image")){this.notifyIsSaving();Sys.WebForms.PageRequestManager.getInstance()._doPostBack(btn.name,null);}else{if(btn.onClick){this.notifyIsSaving();btn.onClick();}}}},registerResetBtn:function(_66c){if(_66c){var btn=dojo.byId(_66c);if(btn){$addHandler(btn,"click",this.resetCurrentEntity);}}},registerSaveBtn:function(_66d,_66e){if(_66d){var btn=dojo.byId(_66d);if(btn){dojo.connect(btn,"onclick",function(){Sage.Utility.Validate.onWorkSpaceSave(_66e);});$addHandler(btn,"click",this.notifyIsSaving);if(this._SaveBtnID==""){this._SaveBtnID=_66d;}}}},registerDialogCancelBtn:function(_66f){if(_66f){var btn=dojo.byId(_66f);if(btn){$addHandler(btn,"click",this.rollbackCurrentTransaction);}}},registerBoundControls:function(_670){if((this._WatchChanges)&&(_670)){var _671=_670.split(",");var elem;for(var i=0;i<_671.length;i++){if(dojo.byId(_671[i])){elem=dojo.byId(_671[i]);}else{if(dijit.byId(_671[i])){elem=dijit.byId(_671[i]).focusNode;}}if(elem){if(elem.attributes["slxcompositecontrol"]){this.findChildControls(elem);}else{this.attachChangeHandler(elem);}}}}this.findWarningExceptions();},findChildControls:function(elem){if((elem)&&(elem.attributes)&&(elem.attributes["slxchangehook"])&&(!elem.attributes["slxcompositecontrol"])){this.attachChangeHandler(elem);}else{if(elem.childNodes){for(var n=0;n<elem.childNodes.length;n++){this.findChildControls(elem.childNodes[n]);}}}},setDijitControlFocus:function(_672){var _673=dijit.byId(_672);if(_673){_673.focus();if(_673.select){_673.select();}return true;}},setControlFocus:function(_674){var _675=function(elem){if((typeof (elem.select)=="function")||(typeof (elem.select)=="object")){elem.select();try{elem.focus();}catch(ex){return false;}return true;}return false;};var elem=$("#"+_674)[0];if(elem){if(_675(elem)){return;}elem=$("#"+_674+" TEXTAREA")[0];if((elem)&&(_675(elem))){return;}elem=$("#"+_674+" INPUT")[0];if(elem){if(dojo.hasClass(elem,"dijitArrowButtonInner")){if(this.setDijitControlFocus(_674+"-SingleSelectPickList-Combo")){return;}}else{if(dojo.hasClass(elem,"dijitValidationInner")){elem=$("#"+_674+" INPUT")[1];if((elem)&&(_675(elem))){return;}}else{if(dojo.style(elem,"display")=="none"&&elem.classList.length==0){elem=$("#"+_674+" INPUT")[3];if((elem)&&(_675(elem))){return;}}}}if(_675(elem)){return;}}elem=$("#"+_674+" SELECT")[0];if((elem)&&(_675(elem))){return;}}},attachChangeHandler:function(elem){if(elem){if((elem.tagName=="A")||((elem.tagName=="INPUT")&&((elem.type=="button")||(elem.type=="image")||(elem.type=="submit")))){this.registerChildPostBackWarningExceptions(elem);}else{try{$removeHandler(elem,"change",this.markDirty);}catch(e){}$addHandler(elem,"change",this.markDirty);}}},registerPostBackWarningExceptions:function(elem){if(elem){elems=$("a,input[type='INPUT'],input[type='BUTTON'],input[type='IMAGE'],input[type='SUBMIT']",elem).get();for(var i=0;i<elems.length;i++){this.registerChildPostBackWarningExceptions(elems[i]);}}},findWarningExceptions:function(){var _676=$("span[slxcompositecontrol], div[slxcompositecontrol]").get();for(var i=0;i<_676.length;i++){this.registerPostBackWarningExceptions(_676[i]);}},registerChildPostBackWarningExceptions:function(elem){if(elem){if($(elem).hasClass("leavesPage")){return;}if((elem.tagName=="A")||((elem.tagName=="INPUT")&&((elem.type=="button")||(elem.type=="image")||(elem.type=="submit")))){try{$removeHandler(elem,"click",this.skipWarning);}catch(e){}$addHandler(elem,"click",this.skipWarning);}}},turnOffWarnings:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._SkipCheck=true;var x=window.setTimeout(function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._SkipCheck=true;}},500);}},resumeWarning:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._SkipCheck=false;}},skipWarning:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._SkipCheck=true;var x=window.setTimeout(function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._SkipCheck=false;}},500);}},resetCurrentEntity:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");mgr.doFormReset();if(mgr){var _677=Sage.Services.getService("ClientContextService");if(_677){if(_677.containsKey("ResetCurrentEntity")){_677.setValue("ResetCurrentEntity","true");}else{_677.add("ResetCurrentEntity","true");}}mgr.clearDirtyStatus();}},rollbackCurrentTransaction:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");mgr.doSectionReset("dialog");if(mgr){var _678=Sage.Services.getService("ClientContextService");if(_678){if(_678.containsKey("RollbackEntityTransaction")){_678.setValue("RollbackEntityTransaction",mgr._entityTransactionID);}else{_678.add("RollbackEntityTransaction",mgr._entityTransactionID);}}}},doFormReset:function(){document.forms[0].reset();},doSectionReset:function(_679){function _67a(_67b,_67c){if((_67b=="main")&&(document.getElementById("MainContent"))){return document.getElementById("MainContent").getElementsByTagName(_67c);}else{if((_67b=="tabs")&&(document.getElementById("TabControl"))){return document.getElementById("TabControl").getElementsByTagName(_67c);}else{if(document.getElementById("DialogWorkspace_content")){return document.getElementById("DialogWorkspace_content").getElementsByTagName(_67c);}}}return new Array();};var elem;var _67d=_67a(_679,"INPUT");if(_67d.length>0){for(var i=0;i<_67d.length;i++){elem=_67d[i];if((elem.type=="checkbox")||(elem.type=="radio")){if(elem.checked!=elem.defaultChecked){elem.checked=elem.defaultChecked;}}else{if(elem.value!=elem.defaultValue){elem.value=elem.defaultValue;}}}_67d=_67a(_679,"TEXTAREA");for(var i=0;i<_67d.length;i++){elem=_67d[i];if(elem.value!=elem.defaultValue){elem.value=elem.defaultValue;}}_67d=_67a(_679,"SELECT");for(var i=0;i<_67d.length;i++){elem=_67d[i];for(var k=0;k<elem.options.length;k++){elem.options[k].selected=elem.options[k].defaultSelected;}}}else{document.forms[0].reset();}},setCurrentTransaction:function(_67e){this._entityTransactionID=_67e;},clearReset:function(){if(Sage.Services){var _67f=Sage.Services.getService("ClientContextService");if(_67f){if(_67f.containsKey("ResetCurrentEntity")){_67f.remove("ResetCurrentEntity");}if(_67f.containsKey("RollbackEntityTransaction")){_67f.remove("RollbackEntityTransaction");}}}}});if(!Sage.Services.hasService("ClientBindingManagerService")){Sage.Services.addService("ClientBindingManagerService",new Sage.Services.ClientBindingManagerService());}return _65f;});},"Sage/TaskPane/SecurityManagerTasksTasklet":function(){define("Sage/TaskPane/SecurityManagerTasksTasklet",["dojo/i18n!./nls/SecurityManagerTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/MainView/SecurityMgr/SecurityProfile","dojo/_base/declare"],function(_680,_681,_682,_683,_684){var _685=_684("Sage.TaskPane.SecurityManagerTasksTasklet",[_681,_682],{addSecurityProfileTitle:"Add Profile",editSecurityProfileTitle:"Edit Profile",taskItems:[],constructor:function(){dojo.mixin(this,_680);this.taskItems=[{taskId:"AddSecurityProfile",type:"Link",displayName:this.addSecurityProfileTitle,clientAction:"securityManagerTasksActions.addSecurityProfile();",securedAction:"Entities/SecurityManager/AddProfile"},{taskId:"EditSecurityProfile",type:"Link",displayName:this.editSecurityProfileTitle,clientAction:"securityManagerTasksActions.editSecurityProfile();",securedAction:"Entities/SecurityManager/EditProfile"}];},addSecurityProfile:function(){var _686=this.getStore();_686.newItem({onComplete:this.receiveNewProfileToEdit,scope:this});},getStore:function(){if(this.store){return this.store;}var _687=Sage.Data.SDataServiceRegistry.getSDataService("system");this.store=new Sage.Data.SingleEntrySDataStore({service:_687,resourceKind:"securityProfiles",include:[],select:["profileDescription","defaultPermission","profileType"]});return this.store;},receiveNewProfileToEdit:function(_688){this.receiveProfileToEdit(_688,true);},receiveProfileToEdit:function(_689,_68a){this._isNew=(_68a===true);var dlg=dijit.byId("secProfileDlg");if(dlg){dlg.show();var _68b=dijit.byId("secDlg_Description");var type=dijit.byId("secDlg_Type");if(_689.profileDescription){_68b.set("value",_689.profileDescription);}if(_689.profileType){type.set("value",_689.profileType);}else{type.set("value","UserDefined");}}},addSecurityProfileActionItem:function(_68c){return function(){var _68d=new _683(_68c);_68d.show();};},editSecurityProfile:function(){var _68e;var _68f=Sage.Services.getService("ClientGroupContext");if(_68f){var ctx=_68f.getContext();_68e=ctx.CurrentGroupID;var st=this.getStore();st.fetch({predicate:"\""+_68e+"\"",onComplete:this.receiveProfileToEdit,scope:this});}},save:function(_690){if(this.store){var _691=dijit.byId("secDlg_Description");var _692=dijit.byId("secDlg_Type");this.store.setValue(false,"profileDescription",_691.value);this.store.setValue(false,"profileType",_692.value);if(this._isNew){this.store.saveNewEntity(false,_690.success,_690.failure,this);}else{this.store.save(_690);}}},saveAndClose:function(){this.save({success:function(_693){var dlg=dijit.byId("secProfileDlg");dlg.hide();if(this._isNew){var _694=new dijit.layout.ContentPane();_694.id=_693["$key"];_694.title=_693.profileDescription;var _695=dijit.byId("GroupTabs");_695.addChild(_694);_695.selectChild(_694);}else{var _696=dijit.byId(_693["$key"]);_696.set("title",_693.profileDescription);}},failure:function(err){alert("The profile could not be saved: "+err);}});}});return _685;});},"Sage/UI/Alarms/UnconfirmedPane":function(){define("Sage/UI/Alarms/UnconfirmedPane",["dijit/form/Button","Sage/UI/Alarms/AlertPane","Sage/UI/Alarms/UnconfirmedAlarm","Sage/Link","dojo/i18n","dojo/i18n!./nls/UnconfirmedPane","dojo/_base/declare"],function(_697,_698,_699,link,i18n,_69a,_69b){var _69c=_69b("Sage.UI.Alarms.UnconfirmedPane",_698,{showConfirmationsText:"Show Confirmations",showCalendarText:"Show Calendar",acceptText:"Accept",declineText:"Decline",_acceptButton:false,templateString:["<div>","<div class=\"alarm-items-contents\" dojoAttachPoint=\"_alertContents\"></div>","<div class=\"alarm-snoozebar\" dojoAttachPoint=\"_confButtonBar\">","<table style=\"width:100%\">","<tr>","<td class=\"leftTools\"><a href=\"Calendar.aspx\" title=\"${showCalendarText}\">${showCalendarText}</a>","<td class=\"leftTools\"><a href=\"javascript: Sage.Link.toActivityListView('confirmations')\" title=\"${showConfirmationsText}\">${showConfirmationsText}</a></td>","<td class=\"rightTools\">","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_acceptSelected\" dojoAttachPoint=\"_acceptButton\">${acceptText}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_declineSelected\">${declineText}</button>","</td>","</tr>","</table>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,_69a);},onShow:function(){this._acceptButton.focus();},_addAlert:function(_69d){var _69e=new _699({userNotification:_69d,selected:this.selectedAlerts.hasOwnProperty(_69d["$key"])});this.alertWidgets.push(_69e);dojo.place(_69e.domNode,this._alertContents);},_acceptSelected:function(){var len=this.alertWidgets.length-1;for(var i=len;i>-1;i--){var wid=this.alertWidgets[i];if(wid.selected){var _69f=Sage.Services.getService("ActivityService");_69f.acceptConfirmation({notification:wid.userNotification,success:this.onPostSuccess,failure:function(){this._alertChanged(this.alertWidgets.length);},scope:this});this.alertWidgets.splice(i,1);wid.destroy();}}},_declineSelected:function(){var len=this.alertWidgets.length-1;for(var i=len;i>-1;i--){var wid=this.alertWidgets[i];if(wid.selected){var _6a0=Sage.Services.getService("ActivityService");_6a0.declineConfirmation({notification:wid.userNotification,success:this.onPostSuccess,failure:function(){this._alertChanged(this.alertWidgets.length);},scope:this});this.alertWidgets.splice(i,1);wid.destroy();}}},getUnhandledAlertCount:function(){return this.alertWidgets.length;},onPostSuccess:function(){this._alertChanged(this.alertWidgets.length);}});return _69c;});},"Sage/MainView/ActivityMgr/AlarmListPanelConfig":function(){define("Sage/MainView/ActivityMgr/AlarmListPanelConfig",["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/UI/SDataSummaryFormatterScope","Sage/Data/SDataStore","Sage/UI/Columns/DateTime","dijit/form/FilteringSelect","Sage/MainView/ActivityMgr/SnoozeButton","Sage/MainView/ActivityMgr/SnoozeOptions","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/i18n!./nls/ActivityListPanelConfig"],function(_6a1,_6a2,_6a3,_6a4,_6a5,_6a6,_6a7,_6a8,_6a9,_6aa,_6ab,_6ac,_6ad){var _6ae=_6ac("Sage.MainView.ActivityMgr.AlarmListPanelConfig",[_6a1],{constructor:function(){this._nlsResources=_6ad;this._listId="alarms";this._resourceKind="userActivities";this.entityName="UserActivity";this._contextMenu="ActivityListContextMenu";this._scheduleContextMenu="ScheduleContextMenu";this._service=_6ab.getSDataService("system");this._structure=this._getStructure();this._select=this._getSelect();this._include=this._getInclude();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.toolBar=this._getToolBars();this.keyField="$key";this.hasCompositeKey=true;this.rebuildOnRefresh=true,dojo.subscribe("/entity/activity/change",this._onListRefresh);dojo.subscribe("/entity/activity/delete",this._onListRefresh);dojo.subscribe("/entity/activity/create",this._onListRefresh);dojo.subscribe("/entity/userActivity/change",this._onListRefresh);dojo.subscribe("/entity/userActivity/delete",this._onListRefresh);dojo.subscribe("/entity/userActivity/create",this._onListRefresh);dojo.subscribe("/entity/activity/confirm",this._onListRefresh);dojo.subscribe("/entity/activity/decline",this._onListRefresh);},_onListRefresh:function(_6af){var _6b0=Sage.Services.getService("ActivityService");_6b0.refreshList("alarms");},_getSelect:function(){var _6b1=["Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Alarm","Activity/AlarmTime","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","UserId","AlarmTime","Alarm","Status"];return _6b1;},_getInclude:function(){var _6b2=["Activity","$descriptors"];return _6b2;},_getSort:function(){var sort=[];return sort;},_getWhere:function(){var _6b3;_6b3=dojo.string.substitute("(User.Id eq '${0}' and Status ne 'asDeclned') and ((Alarm eq true and AlarmTime ne null and AlarmTime lt '${1}') or (Alarm eq null and AlarmTime eq null and Activity.Alarm eq true and Activity.AlarmTime lt '${1}'))",[this._currentUserId,Sage.Utility.Convert.toIsoStringFromDate(new Date())]);return _6b3;},_getStructure:function(){var _6b4="<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />";var _6b5="<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />";var _6b6="<div class='Global_Images icon16x16 icon_unconfirmedActivity16x16' title='"+this._nlsResources.colNameUnConfirmStatus+"' />";var _6b7=this._nlsResources.colNameType||"Activity Type";var _6b8=this._nlsResources.colNameStartDate||"Start Date";var _6b9=this._nlsResources.colNameDuration||"Duration";var _6ba=this._nlsResources.colNameContact||"Name";var _6bb=this._nlsResources.colNameAccount||"Account/Company";var _6bc=this._nlsResources.colNameRegarding||"Regarding";var _6bd=this._nlsResources.colNamePriority||"Priority";var _6be=this._nlsResources.colNameUserId||"Leader";var _6bf=this._nlsResources.colNameTypeName||"Type";var _6c0=[{field:"Status",name:_6b6,type:_6a3.activityConfirmStatusCell,width:"20px"},{field:"Activity.Attachment",name:_6b4,type:_6a3.activityAttachCell,width:"20px"},{field:"Activity.Recurring",name:_6b5,type:_6a3.activityRecurringCell,width:"20px"},{field:"Activity.Type",name:_6b7,type:_6a3.activityTypeCell,width:"90px"},{field:"Activity.StartDate",name:_6b8,type:_6a7,timelessField:"Activity.Timeless",width:"100px"},{field:"Activity.Duration",name:_6b9,type:_6a3.activityDurationCell,width:"40px"},{field:"Activity.ContactId",name:_6bf,type:_6a3.activityNameTypeCell,width:"40px"},{field:"Activity.ContactName",name:_6ba,type:_6a3.activityNameCell,width:"200px"},{field:"Activity.AccountName",name:_6bb,type:_6a3.activityAccountCell,width:"200px"},{field:"Activity.Description",name:_6bc,width:"100px"},{field:"Activity.Priority",name:_6bd,width:"40px"},{field:"Activity.Leader",name:_6be,type:_6a3.activityLeaderCell,width:"200px"}];return _6c0;},_getSummaryConfig:function(){var _6c1=new _6a6({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:["Activity","$descriptors"],select:["$key"],expandRecurrences:false,where:this._where});var _6c2=[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}];var _6c3=this._getFormatterScope();var _6c4={structure:_6c2,layout:"layout",store:_6c1,rowHeight:170,rowsPerPage:10,formatterScope:_6c3};return _6c4;},_getDetailConfig:function(){var _6c5=this._getFormatterScope();var _6c6=this._getSummaryDetailRequestConfig();var _6c7={resourceKind:this._resourceKind,requestConfiguration:_6c6,templateLocation:"MainView/ActivityMgr/Templates/UserActivityDetailSummary.html"};return _6c7;},_getSummaryListRequestConfig:function(){var _6c8={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/Notes","Activity/PhoneNumber"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};return _6c8;},_getSummaryDetailRequestConfig:function(){var _6c9={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/LongNotes","Activity/PhoneNumber"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};return _6c9;},_getFormatterScope:function(){var _6ca=this._getSummaryListRequestConfig();var _6cb=new _6a5({templateLocation:"MainView/ActivityMgr/templates/UserActivityListSummary.html",resetDataManager:true,requestConfiguration:_6ca});return _6cb;},_getToolBars:function(){var _6cc={items:[{custom:true,imageClass:"icon_SnoozeAlarm_16x16",tooltip:this._nlsResources.SnoozeAlarm||"Snooze Alarm",onClick:function(){var _6cd=new _6aa();_6cd.show();}},{custom:true,imageClass:"icon_DismissAlarm_16x16",tooltip:this._nlsResources.DismissAlarm||"Dismiss Alarm",onClick:function(){var _6ce=Sage.Services.getService("ActivityService");_6ce.dismissAlarm();}}]};this.updateToolBar=true;return _6cc;},getTimelessProperty:function(_6cf){return "Activity.Timeless";}});return _6ae;});},"Sage/UI/Alarms/nls/AlarmPane":function(){define("Sage/UI/Alarms/nls/AlarmPane",["Sage/LanguageList","dojo/_base/lang"],function(_6d0,lang){var nls={root:{dismissAllText:"Dismiss all",dismissText:"Dismiss",fiveMinText:"5 minutes",tenMinText:"10 minutes",fifteenMinText:"15 minutes",thirtyMinText:"30 minutes",oneHourText:"1 hour",twoHourText:"2 hours",fourHourText:"4 hours",eightHourText:"8 hours",oneDayText:"1 day",twoDayText:"2 days",threeDayText:"3 days",oneWeekText:"1 week",twoWeekText:"2 weeks",snoozeText:"Snooze",snoozeByText:"Snooze by:",snoozeAllText:"Snooze All",showCalendarText:"Show Calendar"}};return lang.mixin(_6d0,nls);});},"Sage/UI/Filters/LookupFilter":function(){define("Sage/UI/Filters/LookupFilter",["dijit/_Widget","dijit/_Contained","dojo/NodeList-traverse","Sage/_Templated","Sage/_ActionMixin","dojo/string","dojo/_base/lang","dojo/_base/array","dijit/form/Select","dijit/form/TextBox","dojo/on","dojo/i18n!../nls/ConditionManager","dojo/_base/declare"],function(_6d1,_6d2,_6d3,_6d4,_6d5,_6d6,lang,_6d7,_6d8,_6d9,on,_6da,_6db){var _6dc=_6db("Sage.UI.Filters.LookupFilter",[_6d1,_6d2,_6d5,_6d4],{widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"filter-type-checkbox filter-collapsed\">","<h3 data-action=\"toggleExpand\" data-dojo-attach-point=\"filterNameNode\">{%: $.filter.displayName || $.filter.filterName %}","</h3>","<ul class=\"filter-list\" data-dojo-attach-point=\"listNode\">","<select class=\"lookup-filter-operators\" data-dojo-attach-point=\"operators\" data-dojo-type=\"dijit.form.Select\"></select><br/>","<input class=\"filter-lookup-input\" data-dojo-attach-point=\"textInput\" data-dojo-type=\"dijit.form.TextBox\" />","</ul>","</div>"]),_loaded:false,_filterGroup:"default",appliedValues:null,_hasApplied:false,operatorsMapping:{"Equal":_6da.equalTo,"NotEqual":_6da.notEqualTo,"LessThan":_6da.lessThan,"LessThanEqual":_6da.equalOrLessThan,"GreaterThan":_6da.greaterThan,"GreaterThanEqual":_6da.equalOrGreaterThan,"StartsWith":_6da.startingWith,"EndsWith":_6da.endsWith,"Contains":_6da.contains},filter:null,store:null,_autoSearchHandle:null,_autoSearchDelay:1000,postMixInProperties:function(){this.inherited(arguments);if(this.appliedValues){setTimeout(lang.hitch(this,this.toggleExpand),500);this.textInput.set("value",this.appliedValues);this._hasApplied=true;}},postCreate:function(){this.inherited(arguments);this.textInput.on("keyDown",lang.hitch(this,this._onInputKeyDown));},_setupAutoSearch:function(){if(this._autoSearchHandle>0){window.clearTimeout(this._autoSearchHandle);}this._autoSearchHandle=setTimeout(lang.hitch(this,function(){this.doSearch();}),this._autoSearchDelay);},uninitialize:function(){this.inherited(arguments);},toggleExpand:function(_6dd,evt,el){var ops=this.filter&&this.filter.details&&this.filter.details.userLookupFilter&&this.filter.details.userLookupFilter.operators;dojo.toggleClass(this.domNode,"filter-collapsed");if(!this._loaded){this._loaded=true;_6d7.forEach(ops,lang.hitch(this,function(op){this.operators.addOption({disabled:false,label:this.operatorsMapping[op],selected:false,value:op});}));}},_onInputKeyDown:function(_6de){if(_6de.keyCode===13||_6de.keyCode===0){this.doSearch();}else{this._setupAutoSearch();}},doSearch:function(){var _6df,name=this.filter.filterName,_6e0=this;_6df={operator:this.operators.get("value"),value:this.textInput.get("value")};this.onSelectionChange(name,_6df,_6e0);},onSelectionChange:function(name,_6e1,_6e2){dojo.publish(_6d6.substitute("/ui/filters/${0}/change",[this._filterGroup]),[this.filter,name,_6e1,_6e2]);}});return _6dc;});},"Sage/UI/MenuBarItem":function(){require({cache:{"url:Sage/templates/MenuBarItem.html":"<div class=\"dijitReset dijitInline dijitMenuItem\" data-dojo-attach-point=\"focusNode\" waiRole=\"menuitem\" tabIndex=\"-1\"\r\n    data-dojo-attach-event=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\r\n    <span>\r\n    <img src=\"${_blankGif}\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\r\n    <div class=\"dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}\" data-dojo-attach-point=\"iconNodeSprite\"></div>\r\n    <span class=\"dijitMenuItemLabel\" data-dojo-attach-point=\"containerNode\"></span>\n    </span>\n</div>\n"}});define("Sage/UI/MenuBarItem",["Sage/UI/MenuItem","dojo/text!../templates/MenuBarItem.html","dojo/_base/declare"],function(_6e3,_6e4,_6e5){var _6e6=_6e5("Sage.UI.MenuBarItem",_6e3,{iconClass:"",_setIconClassAttr:{node:"iconNode",type:"class"},label:"",_setLabelAttr:{node:"containerNode",type:"innerHTML"},icon:"",_setIconAttr:{node:"iconNode",type:"attribute",attribute:"src"},imageClass:"noIcon",iconStyle:"",_setIconStyleAttr:{node:"iconNode",type:"style"},templateString:_6e4});return _6e6;});},"Sage/TaskPane/ActivityManagerTasklet":function(){define("Sage/TaskPane/ActivityManagerTasklet",["dijit/_Widget","dijit/_Container","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/UI/Dialogs","Sage/Services/ActivityService","dojo/_base/declare"],function(_6e7,_6e8,_6e9,_6ea,_6eb,_6ec,_6ed){var _6ee=_6ed("Sage.TaskPane.ActivityManagerTasklet",[_6e7,_6e8,_6ea,_6e9],{serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"}},widgetsInTemplate:false,widgetTemplate:new Simplate(["<div class=\"activityTask-panel\"  dojoAttachPoint=\"containerNode\">","</div>"]),_configuration:null,_configurationConnects:null,_configurationProvider:null,_configurationProviderType:null,_appliedSet:null,configurationProvider:null,configurationProviderType:null,autoConfigure:true,taskGroup:"default",paneContents:null,constructor:function(){},postCreate:function(){this.inherited(arguments);if(!this._configurationProvider&&this._configurationProviderType){this.set("configurationProvider",new this._configurationProviderType());}if(this.autoConfigure){this.requestConfiguration();}},uninitialize:function(){this.inherited(arguments);if(this._configurationProvider){this._configurationProvider.destroy();}},_handleConfigurationChange:function(){this.requestConfiguration();},_setConfigurationProviderAttr:function(_6ef){if(this._configurationConnects){dojo.forEach(this._configurationConnects,function(_6f0){this.disconnect(_6f0);},this);}if(this._configurationProvider&&this._configurationProvider!==value){this._configurationProvider.destroy();}this._configurationProvider=_6ef;this._configurationConnects=[];if(this._configurationProvider){this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange));this._configurationProvider.set("owner",this);if(this._created){if(this.autoConfigure){this.requestConfiguration();}}}},_getConfigurationProviderAttr:function(){return this._configurationProvider;},_setConfigurationProviderTypeAttr:function(_6f1){this._configurationProviderType=_6f1;},_getConfigurationProviderTypeAttr:function(){return this._configurationProviderType;},requestConfiguration:function(){if(this._configurationProvider){this._configurationProvider.requestConfiguration({success:dojo.hitch(this,this._applyConfiguration)});}},_applyConfiguration:function(_6f2){this._configuration=_6f2;if(!this._configuration){return;}if(this.paneContents){this.paneContents.destroyRecursive();}dojo.place(this._configuration.taskPane.domNode,this.containerNode,"only");this.paneContents=this._configuration.taskPane;}});return _6ee;});},"Sage/TaskPane/nls/LiteratureManagementTasks":function(){define("Sage/TaskPane/nls/LiteratureManagementTasks",["Sage/LanguageList","dojo/_base/lang"],function(_6f3,lang){var nls={root:{errFulFillmentCancelled:"The fulfillment of the literature request was canceled for LitReqId {0}.",errFulFillmentFailed:"The literature request could not be fulfilled for LitReqId {0}.",errMailMergeService:"The literature request(s) could not be fulfilled because the mail merge service could not be loaded. This may happen if Sage SalesLogix Desktop Integration is not installed or is not installed properly.",errFulFillmentRequest:"The literature request(s) could not be fulfilled.",errFulFillmentRequestEx:"The following literature request(s) could not be fulfilled:",fulFillmentSuccess:"The literature request fulfillment was successful."}};return lang.mixin(_6f3,nls);});},"Sage/QuickForms/Design/Editors/DateTimePickerBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/DateTimePickerBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DateTimePickerBasicPropertyEditor"],function(_6f4,lang,_6f5,_6f6,_6f7,_6f8,_6f9,_6fa,_6fb,_6fc,_6fd,_6fe){return _6f4("Sage.QuickForms.Design.Editors.DateTimePickerBasicPropertyEditor",[_6f5,_6fc,_6fb],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.displayDateTooltipText %}\">","<label>{%= $.displayDateText %}</label>","<div data-dojo-attach-point=\"_displayDate\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onDisplayDateChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.displayTimeTooltipText %}\">","<label>{%= $.displayTimeText %}</label>","<div data-dojo-attach-point=\"_displayTime\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onDisplayTimeChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_displayDate:null,_displayTime:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",displayDateText:"Display Date:",displayDateTooltipText:"Display the date portion.",displayTimeText:"Display Time:",displayTimeTooltipText:"Display the time portion.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_6fe);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._displayDate.set("value",this._designer.get("displayDate"));this._displayTime.set("value",this._designer.get("displayTime"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(_6ff){if(this.isSuspended()){return;}this._designer.set("caption",_6ff);},_onCaptionAlignmentChange:function(_700){if(this.isSuspended()){return;}this._designer.set("captionAlignment",_700);},_onDisplayDateChange:function(_701){if(this.isSuspended()){return;}this._designer.set("displayDate",_701);},_onDisplayTimeChange:function(_702){if(this.isSuspended()){return;}this._designer.set("displayTime",_702);},_onIsReadOnlyChange:function(_703){if(this.isSuspended()){return;}this._designer.set("isReadOnly",_703);},_onToolTipChange:function(_704){if(this.isSuspended()){return;}this._designer.set("toolTip",_704);}});});},"Sage/TaskPane/LiteratureManagementTasks":function(){define("Sage/TaskPane/LiteratureManagementTasks",["Sage/TaskPane/_BaseTaskPaneTasklet","Sage/UI/Dialogs","dojo/i18n!./nls/LiteratureManagementTasks","dojo/_base/declare"],function(_705,_706,_707,_708){var _709=_708("Sage.TaskPane.LiteratureManagementTasks",_705,{nlsLitManagementResources:_707,selectionInfo:false,fulfillLiteratureTask:function(){this.selectionInfo=this.getSelectionInfo();if(this.verifySelection(this.selectionInfo)){this.saveSelections(this.actionItem,this.selectionInfo);return this.doFulfillment();}else{_706.showWarning(this.selectRecords,this.selectRecordsTitle);return false;}},validateLiteratureTask:function(){this.selectionInfo=this.getSelectionInfo();if(this.selectionInfo!=null){this.saveSelections(this.actionItem,this.selectionInfo);return true;}else{return false;}},doFulfillment:function(){var _70a=0;var _70b=this.selectionInfo.selectionCount;var _70c=[];var _70d=[];var sId=dojo.string.substitute("${0}_hfLastFulfilledIds",[this.clientId]);var _70e=$get(sId);if(_70e){_70e.value="";}var self=this;require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(_70f,_710){var _711=_70f.GetMailMergeService();var i;if(_711){for(i=0;i<_70b;i++){var _712;var _713=self.selectionInfo.selections[i].id;var _714=_711.FulfillLitRequest(_713);if(dojo.isArray(_714)){var _715=_714[LitReqResult.lrSuccess];if(_715){_70a++;_70d.push(_713);continue;}var _716=_714[LitReqResult.lrCanceled];if(_716){_712=dojo.string.substitute(self.nlsLitManagementResources.errFulFillmentCancelled,[_713]);}else{_712=dojo.string.substitute(self.nlsLitManagementResources.errFulFillmentFailed,[_713]);_712+=dojo.string.substitute(" ${0}",[_714[LitReqResult.lrError]]);}}else{_712=dojo.string.substitute(self.nlsLitManagementResources.errFulFillmentFailed,[_713]);}if(_712==""){_712=dojo.string.substitute(self.nlsLitManagementResources.errFulFillmentFailed,[_713]);}_70c.push(_712);}}else{_706.showError(self.nlsLitManagementResources.errMailMergeService);return false;}if(_70e){_70e.value=_70d.join();}if(_70a==_70b){_706.showInfo(self.nlsLitManagementResources.fulFillmentSuccess);return true;}else{var _717=self.nlsLitManagementResources.errFulFillmentRequest;if(dojo.isArray(_70c)&&_70c.length>0){_717=self.nlsLitManagementResources.errFulFillmentRequestEx;for(i=0;i<_70c.length;i++){_717+=dojo.string.substitute(" [${0}] ${1}",i+1,[_70c[i]]);}}_706.showError(_717);return false;}});},refreshList:function(){var _718=dijit.byId("list");if(_718){_718.refreshGrid();}},printLabels:function(_719,_71a){require(["Sage/Reporting/Service"],function(_71b){dojo.ready(function(){if(Sage.Services.hasService("ReportingService")){var _71c=Sage.Services.getService("ReportingService");if(_71c.checkReporting(true)){_71c.showReport(_719,"CONTACT",_71a);}}});});},actionItem:function(){}});return _709;});},"Sage/UI/Dashboard/nls/DashboardWidget":function(){define("Sage/UI/Dashboard/nls/DashboardWidget",["Sage/LanguageList","dojo/_base/lang"],function(_71d,lang){var nls={root:{noQueryDataText:"The server has no data for query ",initializingText:"Initializing"}};return lang.mixin(_71d,nls);});},"Sage/QuickForms/Design/Editors/_PropertyEditor":function(){define("Sage/QuickForms/Design/Editors/_PropertyEditor",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-class","../PropertyValueError","dojo/i18n!./nls/_PropertyEditor"],function(_71e,lang,_71f,_720,_721,_722){return _71e("Sage.QuickForms.Design.Editors._PropertyEditor",null,{_designer:null,_suspended:false,titleText:"Properties",_setTitleTextAttr:function(_723){this.set("title",_723);},designer:null,constructor:function(){lang.mixin(this,_722);},buildRendering:function(){this.inherited(arguments);_720.add(this.domNode,"design-property-editor");},suspend:function(){this._suspended=true;},resume:function(){this._suspended=false;},isSuspended:function(){return this._suspended;},setup:function(_724){},_setDesignerAttr:function(_725){this.suspend();this._designer=_725;this.setup(_725);setTimeout(lang.hitch(this,this.resume),0);},_getDesignerAttr:function(){return this._designer;}});});},"Sage/QuickForms/Design/Editors/nls/NumericAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/NumericAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_726,lang){var nls={root:{titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",decimalDigitsText:"Decimal Digits:",decimalDigitsTooltipText:"The number of digits after the decimal to display and allow for data entry.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",formatTypeText:"Format Type:",formatTypeTooltipText:"Type of format to use when converting number to string.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",strictText:"Strict:",strictTooltipText:"Pads display of number with trailing zeros as necessary.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",numberFormatText:{Number:"Number",Percent:"Percent",Decimal:"Decimal",Scientific:"Scientific"},labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"}}};return lang.mixin(_726,nls);});},"Sage/Services/ActivityActionProcessor":function(){define("Sage/Services/ActivityActionProcessor",["dojo/i18n","Sage/UI/Dialogs","dijit/_Widget","Sage/_Templated","dojo/i18n!./nls/ActivityActionProcessor","dojo/_base/declare"],function(i18n,_727,_728,_729,_72a,_72b){var _72c=_72b("Sage.Services.ActivityActionProcessor",[_728,_729],{_dialog:false,_currentUserId:null,_action:false,_processing:false,_selectionContext:false,btnOkayText:"OK",btnCancelText:"Cancel",btnCloseText:"Close",btnHelpText:"Help",processingText:"Processing request please wait...",failureText:"I'm sorry, the action was not successful an error occurred.",titleText:"Process",widgetsInTemplate:true,widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"activityProcessActionDialog\" title=\"{%= $.titleText%}\" dojoAttachPoint=\"_dialog\" style=\"width:400px\">","<div class=\"activityProcess-dialog\">","<div data-dojo-type=\"dijit.layout.ContentPane\" id=\"{%= $.id%}_cp_envet_General\" title=\"\" dojoAttachPoint=\"cp_General\">","<div data-dojo-type=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" class=\"controlPropForm\" labelWidth=\"140\">","<div id=\"{%= $.id%}_div_actionMessage\"  name=\"div_actionMessage\" dojoAttachPoint=\"div_actionMessage\"></div>","</div>","</div>","<table class=\"button-bar\"><tr><td class=\"alignright valignbottom\">","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.btnOkayText %}</div>","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $. btnCancelText %}</div>","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_Close\" name=\"btn_Close\" dojoAttachPoint=\"btn_Close\" dojoAttachEvent=\"onClick:_closeClick\">{%= $. btnCloseText %}</div>","</td><tr></table>","</div>","</div>","</div>"]),constructor:function(){this._currentUserId=Sage.Utility.getClientContextByKey("userID")||"";dojo.mixin(this,_72a);},destroy:function(){this.inherited(arguments);},start:function(_72d){this._processing=false;if(this._selectionContext.count<1){return;}if(!_72d){this._setDisplay();this.show();}else{this._execute();}},show:function(){this._dialog.show();},hide:function(){this._action=null;this._dialog.hide();},resize:function(){},_setDisplay:function(){dojo.style(this.btn_Close.domNode,"visibility","hidden");dojo.style(this.btn_OK.domNode,"visibility","visible");dojo.style(this.btn_Cancel.domNode,"visibility","visible");if(this._selectionContext){this.div_actionMessage.innerHTML=this._action.message;this._dialog.set("title",this._action.description);}},_setActionAttr:function(_72e){this._action=_72e;},_getActionAttr:function(){return this._action;},_setSelectionContextAttr:function(_72f){this._selectionContext=_72f;},_getSelectionContextAttr:function(){return this._selectionContextInfo;},_execute:function(){if(this._processing){return;}var me=this;this.div_actionMessage.innerHTML=this.processingText;this._processing=true;dojo.style(this.btn_Close.domNode,"visibility","visible");dojo.style(this.btn_OK.domNode,"visibility","hidden");dojo.style(this.btn_Cancel.domNode,"visibility","hidden");if(this._action){this._action.execute({scope:this,success:function(_730,_731){_731.hide();_731.onActionComplete(_730);},failure:function(_732,_733){_733.onActionComplete(_732);Sage.UI.Dialogs.showError(me.failureText);}});}},_okClick:function(){this._execute();},_cancelClick:function(){this.hide();},_closeClick:function(){this.hide();},onActionComplete:function(_734){}});return _72c;});},"Sage/MainView/IntegrationContract/nls/CustomerPaymentsRTDV":function(){define("Sage/MainView/IntegrationContract/nls/CustomerPaymentsRTDV",["Sage/LanguageList","dojo/_base/lang"],function(_735,lang){var nls={root:{dialogCaption:"Payment Details",loadingText:"loading...",lblReferenceCaption:"Receipt Number:",lblDateCaption:"Payment Date:",lblProcessDateCaption:"Process Date:",lblNameCaption:"Name:",lblTypeCaption:"Type:",lblStatusCaption:"Status:",lblCurrencyCaption:"Currency:",lblTenderTypeCaption:"Tender Type:",lblTenderReferenceCaption:"Tender Reference:",lblNetTotalCaption:"Net Total:",lblDiscountsCaption:"Discounts:",lblChargesCaption:"Charges:",lblTaxesCaption:"Taxes:",lblGrossTotalCaption:"Payment Amount:",lblSourceCaption:"Source:",lblTaxCodeCaption:"Tax Code:",grdPayments_Reference:"Receipt Number",grdPayments_Date:"Payment Date",grdPayments_Type:"Type",grdPayments_Status:"Status",grdPayments_GrossTotal:"Payment Amount",grdPayments_Currency:"Currency",btnCloseCaption:"Close"}};return lang.mixin(_735,nls);});},"Sage/UI/Filters/nls/FilterPanel":function(){define("Sage/UI/Filters/nls/FilterPanel",["Sage/LanguageList","dojo/_base/lang"],function(_736,lang){var nls={root:{editText:"Edit Filters",noneText:"No filters selected",clearText:"Clear All"}};return lang.mixin(_736,nls);});},"Sage/Data/SDataSummaryViewDataManager":function(){define("Sage/Data/SDataSummaryViewDataManager",["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang"],function(_737,_738,_739,lang){var _73a=_739("Sage.Data.SDataSummaryRequestQueue",null,{select:[],resourceKind:"",fetching:false,serviceName:"dynamic",include:[],service:null,useBathRequest:false,expandRecurrences:null,constructor:function(_73b){lang.mixin(this,_73b);this.requestHash={};this.fetching=false;},add:function(_73c,_73d){var _73e=this.requestHash[_73c];if((_73e)&&(_73e.id!==_73d.id)){if(!_73e.duplicates){_73e.duplicates=[];}var _73f=false;for(var i=0;i<_73e.duplicates.length;i++){if(_73e.duplicates[i].context.id===_73d.id){_73f=true;}}if(!_73f){_73e.duplicates.push({id:_73d.id,context:_73d});}}else{this.requestHash[_73c]=_73d;}},send:function(_740,_741){this.fetching=true;this.service=_737.getSDataService(this.serviceName);var _742=this;if(this.useBatchRequest){var _743=new Sage.SData.Client.SDataBatchRequest(this.service);_743.setResourceKind(this.resourceKind);_743.setQueryArg("select",this.select.join(","));_743.setQueryArg("include",this.include.join(","));_743.using(function(){for(var bid in _742.requestHash){var _744=new Sage.SData.Client.SDataSingleResourceRequest(_742.service);_744.setResourceKind(_742.resourceKind);_744.setResourceSelector("'"+bid+"'");if(_742.expandRecurrences!==null){_744.uri.queryArgs["_expandRecurrences"]=_742.expandRecurrences;}_744.setQueryArg("include",_742.include.join(","));_744.read();}});_743.commit({success:lang.hitch(_741,_740,_742),failure:lang.hitch(this,this.requestFailed,_742)});}else{var _745=[];for(var id in this.requestHash){_745.push("'"+id+"'");}var _746=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);var _747="Id in ("+_745.join(",")+")";_746.setResourceKind(this.resourceKind);_746.setQueryArg("select",this.select.join(","));_746.setQueryArg("where",_747);_746.setQueryArg("include",this.include.join(","));_746.read({success:lang.hitch(_741,_740,_742),failure:lang.hitch(this,this.requestFailed,_742)});}},requestFailed:function(a,b,c){}});var _748=_739("Sage.Data.SDataSummaryViewDataManager",null,{keyField:"$key",constructor:function(){this._createNewQueue();},_createNewQueue:function(){this.queue=new _73a();this.requestTimeout=false;},requestData:function(_749,_74a,_74b){if(this.queue.fetching){this.oldQueue=this.queue;this._createNewQueue();}if(_74b.keyField){this.keyField=_74b.keyField;}this.queue.select=_74b.select;this.queue.resourceKind=_74b.resourceKind;this.queue.serviceName=_74b.serviceName;this.queue.include=_74b.include;this.queue.useBatchRequest=_74b.useBatchRequest;if(_74b.expandRecurrences!==null){this.queue.expandRecurrences=_74b.expandRecurrences;}this.queue.add(_749,_74a);if(this.requestTimeout){window.clearTimeout(this.requestTimeout);}var q=this.queue;var self=this;this.requestTimeout=window.setTimeout(function(){q.send(self.receiveData,self);},250);},requestDataNoWait:function(_74c,_74d,_74e){var _74f=new _73a();if(_74e.keyField){this.keyField=_74e.keyField;}_74f.select=_74e.select;_74f.resourceKind=_74e.resourceKind;_74f.serviceName=_74e.serviceName;_74f.include=_74e.include;_74f.useBatchRequest=_74e.useBatchRequest;if(_74e.expandRecurrences!==null){_74f.expandRecurrences=_74e.expandRecurrences;}_74f.add(_74c,_74d);_74f.send(this.receiveData,this);},receiveData:function(_750,data){for(var i=0;i<data.$resources.length;i++){var _751=data.$resources[i];var id=_751.id;if(!id){id=_751[this.keyField];_751.id=id;}var _752=_750.requestHash[_751.id];if(_752){if(_752.duplicates){try{if(!_752.applied){_752.applied=true;_752.set("entity",_751);for(var i=0;i<_752.duplicates.length;i++){try{if(!_752.duplicates[i].context.applied){_752.duplicates[i].context.applied=true;_752.duplicates[i].context.set("entity",_751);}}catch(err){console.error(err);}}}}catch(err){console.error(err);}}else{try{if(!_752.applied){_752.applied=true;_752.set("entity",_751);}}catch(err){console.error(err);}}}}}});return _748;});},"Sage/TaskPane/nls/_BaseTaskPaneTasklet":function(){define("Sage/TaskPane/nls/_BaseTaskPaneTasklet",["Sage/LanguageList","dojo/_base/lang"],function(_753,lang){var nls={root:{selectRecordsTitle:"Invalid Selection",selectRecords:"Please select a record before continuing.",selectSingleRecord:"Please select a single record before continuing.",noRecordsSelectedProcessAll:"No records selected. The full group, ${0} record(s), will be processed.  Proceed?",invalidSelectionTitle:"Invalid Selection",errorSelectionInfo:"There was an error retrieving information about the selected records.",errorNoData:"No data available.",yesButtonText:"Yes",noButtonText:"No",salesLogixPageTitle:"SalesLogix"}};return lang.mixin(_753,nls);});},"Sage/UI/nls/OwnerType":function(){define("Sage/UI/nls/OwnerType",["Sage/LanguageList","dojo/_base/lang"],function(_754,lang){var nls={root:{teamText:"Team",departmentText:"Department",systemText:"System",userText:"User"}};return lang.mixin(_754,nls);});},"Sage/QuickForms/Design/PropertyEditorContainer":function(){define("Sage/QuickForms/Design/PropertyEditorContainer",["dojo/string","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dijit/layout/TabContainer","dijit/layout/BorderContainer","Sage/_EventMapMixin","Sage/_Templated","Sage/Utility","./ControlDesigner","./Help","dojo/i18n!./nls/PropertyEditorContainer"],function(_755,_756,_757,lang,_758,_759,_75a,_75b,_75c,_75d,_75e,_75f,Help,_760){return _756("Sage.QuickForms.Design.PropertyEditorContainer",[_75b,_75d],{widgetsInTemplate:true,contentTemplate:new Simplate(["<div class=\"design-editor-container-toolbar\" data-dojo-type=\"dijit.Toolbar\" data-dojo-props=\"region: 'top', align: 'right', splitter: false\">","<span class=\"design-editor-title\" data-dojo-attach-point=\"titleNode\"></span>","<div data-dojo-type=\"Sage.UI.ImageButton\" icon=\"images/icons/Help_16x16.png\" tooltip=\"{%: $.helpText %}\" data-dojo-attach-event=\"onClick:help\" class=\"design-panel-help\"></div>","</div>","<div data-dojo-type=\"dijit.layout.TabContainer\" data-dojo-attach-point=\"editorTabContainer\" data-dojo-props=\"region: 'center'\"></div>"]),_setTitleAttr:{node:"titleNode",type:"innerText"},_designGroup:null,_designGroupTopics:null,_designer:null,_designerSource:null,editorTabContainer:null,titleNode:null,helpTopicName:"webFormDesigner",helpSubSystemName:"WebForms",designGroup:"default",specificTitleFormatText:"${0} Properties (${1})",genericTitleFormatText:"${0} Properties",constructor:function(){lang.mixin(this,_760);},_getDesignGroupAttr:function(){return this._designGroup;},_setDesignGroupAttr:function(_761){if(this._designGroupTopics){_757.forEach(this._designGroupTopics,function(_762){this.unsubscribe(_762);},this);}this._designGroup=_761;this._designGroupTopics=[this.subscribe(_755.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this._onDesignerSelected),this.subscribe(_755.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),this._onDesignerMoved)];},help:function(){if(this._designer){Help.open(this._designer.helpTopicName,this.helpSubSystemName);}else{Help.open(this.helpTopicName,this.helpSubSystemName);}},buildRendering:function(){this.inherited(arguments);_758.add(this.domNode,"design-editor-container");},uninitialize:function(){this.inherited(arguments);},clear:function(){_757.forEach(this.editorTabContainer.getChildren(),function(_763){this.editorTabContainer.removeChild(_763);_763.destroyRecursive(false);},this);this._designer=null;this.set("title","");this.layout();},_setDesignerAttr:function(_764,_765){if(_764===this._designer){return;}var _766=this.editorTabContainer.selectedChildWidget&&this.editorTabContainer.selectedChildWidget.constructor,_767;this.clear();_757.forEach(_764.editors,function(_768){var _769=new _768({});this.editorTabContainer.addChild(_769);if(_768===_766){_767=_769;}},this);if(_764.get("controlId")){this.set("title",_755.substitute(this.specificTitleFormatText,[_764.displayNameText,_764.get("controlId")]));}else{this.set("title",_755.substitute(this.genericTitleFormatText,[_764.displayNameText]));}this._designer=_764;this._designerSource=_765;if(_767){this.editorTabContainer.selectChild(_767);}this.layout();_757.forEach(this.editorTabContainer.getChildren(),function(_76a){_76a.set("designer",this._designer);},this);},_getDesignerAttr:function(){return this._designer;},_onDesignerSelected:function(_76b,_76c,_76d){if(_76b&&_76b.editors){this.set("designer",_76b,_76d);}else{this.clear();}},_onDesignerMoved:function(_76e,_76f){if(_76e!==this._designer){return;}_757.forEach(this.editorTabContainer.getChildren(),function(_770){_770.set("designer",this._designer);},this);}});});},"Sage/UI/Columns/ActivityType":function(){define("Sage/UI/Columns/ActivityType",["dojox/grid/cells/_base","Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(_771,util,_772,_773,_774){var _775=_774("Sage.UI.Columns.ActivityType",_771,{keyField:false,format:function(_776,_777){var type=this.get(_776,_777);if(!type){return this.defaultValue;}var key=util.getValue(_777,this.keyField||"$key");var fmt="<div class=\"Global_Images icon16x16 ${0}\"></div>&nbsp;<a href=\"javascript:Sage.Link.editActivity('${1}')\">${2}</a>";return _773.substitute(fmt,[_772.getActivityImageClass(type,"small"),key,_772.getActivityTypeName(type)]);}});return _775;});},"Sage/TaskPane/nls/LeadTasksTasklet":function(){define("Sage/TaskPane/nls/LeadTasksTasklet",["Sage/LanguageList","dojo/_base/lang"],function(_778,lang){var nls={root:{updateLeadsTitle:"Update Leads",deleteLeadsTitle:"Delete Leads",deleteJobError:"Sorry an error occured during the delete lead job: ${0}",confirmDeleteLeads:"Are you sure you want to delete the selected records?"}};return lang.mixin(_778,nls);});},"url:Sage/templates/ToggleButton.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\r\t><span class=\"dijitReset dijitInline dijitButtonNode\"\r\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\r\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\r\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\r\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\r\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\r\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\r\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\r\t\t\t\tid=\"${id}_label\"\r\t\t\t\tdata-dojo-attach-point=\"containerNode\"\r\t\t\t></span\r\t\t></span\r\t></span\r\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\r\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\r/></span>\r","Sage/UI/Dashboard/DashboardWidgetCell":function(){define("Sage/UI/Dashboard/DashboardWidgetCell",["dojo/i18n","dojo/i18n!./nls/DashboardWidgetCell","Sage/UI/WidgetEditor","Sage/UI/Dashboard/DashboardWidget","dojox/data/dom","dojox/widget/Portlet","dojo/_base/declare"],function(i18n,_779,_77a,_77b,dom,_77c,_77d){var _77e=_77d("Sage.UI.Dashboard.DashboardWidgetCell",[_77c],{onClose:function(evt){var pg=dijit.byId(this._parentId);pg._childWidgets.removeByAttr("id",this.id);dojo.publish("/ui/dashboard/pageSave",[pg._page]);this.inherited(arguments);},_onShow:function(){this.inherited(arguments);if(this.redrawOnShow){this.redrawOnShow=false;this.refresh(true);}},onHide:function(){this.redrawOnShow=true;this.inherited(arguments);},onDownloadEnd:function(data){if(data){var doc=data.documentElement;for(var i=0,len=doc.childNodes.length;i<len;i++){if(doc.childNodes[i].tagName==="Content"){var _77f=dom.textContent(doc.childNodes[i]);Sage.UI.WidgetDefinitions[this.widgetOptions.name]=dojo.fromJson(_77f);this.widgetDefined=true;dojo.publish("/ui/widget/defined");this._widgetInit();}}}else{}},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","DashboardWidgetCell"));if(this._page>=0){this.preload=true;}this.href="slxdata.ashx/slx/crm/-/dashboard/widget";this.ioArgs={handleAs:"xml",content:{name:this.widgetOptions.name,family:this.widgetOptions.family||"system"}};this._drawLegend();this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.subscribe("/ui/widget/dropped",function(id,p,c,i){if(id===this.id){return;}if(p!==this._page){return;}if(c!==this.column){return;}if(i>this.index){return;}this._indexUp();});this.connect(this.containerNode,"onmousedown",function(evt){if(dojo.hasClass(evt.target,"dojoxGridScrollbox")){dojo.stopEvent(evt);return false;}return true;});this.arrowNode.title=this.minimizeTooltipText;},refresh:function(_780){if(_780){var _781=this._dashboardWidget;if(_781){dojo.disconnect(_781._winResize);dojo.unsubscribe(_781.dropSub);}this.destroyDescendants();this._removeIcons();}this.inherited(arguments);this._drawLegend();},_drawLegend:function(){if(this.widgetOptions.showLegend==="true"){this.chartWidth="67";this.legendDisplay="block";}else{this.chartWidth="100";this.legendDisplay="none";}},_redrawCharts:function(){if(this._dashboardWidget&&this._dashboardWidget.definition&&this._dashboardWidget.definition.declaredClass==="Sage.UI.Dashboard.ChartingWidget"){this.refresh(true);}},_createIcon:function(_782,_783,fn){var _784="";if(_782==="dojoxPortletSettingsIcon"){_784=this.settingsTooltipText;}else{if(_782==="dojoxCloseNode"){_784=this.closeTooltipText;}}if(!this._tbarIcons){this._tbarIcons=[];}var icon=dojo.create("div",{"class":"dojoxPortletIcon "+_782,"waiRole":"presentation","title":_784});if(this.isNew){if(_782==="dojoxPortletSettingsIcon"||this._tbarIcons.length<1){dojo.place(icon,this.arrowNode,"before");}else{dojo.place(icon,this._tbarIcons[0],"before");}}else{if(this._tbarIcons.length==1&&_782==="dojoxPortletSettingsIcon"){try{dojo.place(icon,this._tbarIcons[0],"replace");}catch(e){dojo.place(icon,this.arrowNode,"before");}}else{dojo.place(icon,this.arrowNode,"before");}}if(_783){this.iconMouseOverEvent=this.connect(icon,"onmouseover",function(){dojo.addClass(icon,_783);});this.iconMouseOutEvent=this.connect(icon,"onmouseout",function(){dojo.removeClass(icon,_783);});}if(_782==="dojoxPortletSettingsIcon"){if(this._tbarIcons.length==1){this._tbarIcons[0]=icon;}else{this._tbarIcons.push(icon);}this.iconClickEvent=this.connect(icon,"onclick",fn);}else{this.connect(icon,"onclick",fn);}return icon;},_removeIcons:function(){this.disconnect(this.iconClickEvent);this.disconnect(this.iconMouseOverEvent);this.disconnect(this.iconMouseOutEvent);if(this._tbarIcons.length>0){dojo.empty(this._tbarIcons[0]);}},_editorAdded:function(){var _785=this.getChildren();this._placeSettingsWidgets();dojo.forEach(_785,function(_786){try{if(!_786.started&&!_786._started){_786.startup();}}catch(e){}});},_load:function(){if(!this.preventRender){this._setContent(this.onDownloadStart(),true);if(!Sage.UI.WidgetDefinitions[this.widgetOptions.name]&&!this.requestPending){this.requestPending=true;var that=this;var _787={preventCache:false,url:this.href};if(dojo.isObject(this.ioArgs)){dojo.mixin(_787,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||dojo.xhrGet)(_787));hand.addCallback(function(data){try{that._isDownloaded=true;that.requestPending=false;that._setContent(that.processingData||"",true);that.onDownloadEnd(data);}catch(err){that._onError("Content",err);}delete that._xhrDfd;});hand.addErrback(function(err){if(!hand.canceled){that._onError("Download",err);}delete that._xhrDfd;return err;});delete this._hrefChanged;}else{if(this.requestPending){this._waitForDefinition();}else{this.widgetDefined=true;this._widgetInit();}}}},_setColumn:function(n){this.column=n;},_setIndex:function(n){this.index=n;},_indexUp:function(){this.index+=1;},_waitForDefinition:function(){this.subscription=this.subscribe("/ui/widget/defined",this,function(){this.widgetDefined=true;this._widgetInit();});},_widgetInit:function(){if(this.widgetDefined&&!this._Widget){this._dashboardWidget=new _77b({options:this.widgetOptions,parentCell:this});}}});return _77e;});},"Sage/UI/Dashboard/Dashboard":function(){define("Sage/UI/Dashboard/Dashboard",["dojo/i18n","dijit/layout/ContentPane","dijit/layout/TabContainer","Sage/UI/Dashboard/DashboardTabController","Sage/UI/Dashboard/DashboardPage","Sage/Utility","dijit/Menu","dijit/MenuItem","dojo/_base/declare","dojo/i18n!./nls/DashboardTabController","dojo/i18n!./nls/Dashboard"],function(i18n,_788,_789,_78a,_78b,_78c,menu,_78d,_78e){var _78f=_78e("Sage.UI.Dashboard.Dashboard",_789,{controllerWidget:"Sage.UI.Dashboard.DashboardTabController",_stTableOuter:new Simplate(["<div id=\"stTable\" class=\"show-tab-table\"><table>","{%= $.content %}","</table><div class=\"button-bar alignright\"><button data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"btnSTOk\" title=\"{%= $.buttonOk %}\">{%= $.buttonOk %}</button>","</div></div>"]),_stTableInner:new Simplate(["<tr id=\"row_{%= $.id %}\"><td><button data-dojo-type=\"dijit.form.Button\"","type=\"button\" id=\"btn_{%= $.id %}\" class=\"btn-show-tab\">{%= $.showText %}</button></td>","<td><span>{%= $.title %}</span></td></tr>"]),_copyNameForm:new Simplate(["<div id=\"copyNameForm\"><table width=\"100%\">","<tr><td>{%= $.titleText %}</td><td><div data-dojo-type=\"dijit.form.ValidationTextBox\" id=\"txtCopyName\""," regExp=\"[^<>;]*\" value=\"\" required=\"true\" invalidMessage=\"{%= $.invalidMessage %}\"></div></td></tr>","<tr><td colspan=\"2\" align=\"right\"><div class=\"button-bar\"><button data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"btnCNOK\" title=\"{%= $.buttonOk %}\">{%= $.buttonOk %}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"btnCNCancel\" title=\"{%= $.buttonCancel %}\" >{%= $.buttonCancel %}</button>","</div></td></tr></table></div>"]),resources:{},addRemovePageContextMenu:function(){var _790=true;for(var i=0;i<this._childPages.length;i++){if(!this._childPages[i]._beingDestroyed){var _791=dijit.byId("Dashboard_tablist_"+this._childPages[i].id);_790=false;if(_791&&_791.tabContent.style.display=="none"){_790=true;}else{break;}}}if(_790){if(this._contextMenu){this._contextMenu.destroyRecursive();}this._contextMenu=new menu({id:this.id+"_ContextMenu",dir:this.dir,targetNodeIds:[this.domNode]});this._contextMenu.addChild(new _78d({label:this.newTabText,dir:this.dir,onClick:function(){var db=dijit.byId("Dashboard");db._createPage(true,db.newTabText);}}));this._contextMenu.addChild(new _78d({label:this.showTabText,dir:this.dir,onClick:dojo.hitch(this,function(){var d=dijit.byId("Dashboard");d._showTabMenu();})}));this.selectShownTab=true;}else{if(this._contextMenu){this._contextMenu.destroyRecursive();this.selectShownTab=false;}}},postCreate:function(){if(!Sage.UI.WidgetDefinitions){Sage.UI.WidgetDefinitions={};}this._getUserOptions();this.subscribe("/ui/dashboard/pageDelete",function(pg){this.closeChild(pg);this._deletePage(pg);this.addRemovePageContextMenu();});this.inherited(arguments);},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","Dashboard"));dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","DashboardTabController"));dojo.mixin(this.resources,i18n.getLocalization("Sage.UI.Dashboard","WidgetDefinition"));dojo.mixin(this,i18n.getLocalization("dijit","common"));this.inherited(arguments);},_childPages:[],_createPage:function(ans,name){if(!ans){return;}var obj={closable:true,onClose:function(){return true;},name:name,title:name,family:"System",acceptTypes:["Portlet"],hasResizableColumns:false,_columns:[],_page:this._childPages.length,_parentId:this.id,permission:true,_childWidgets:[]};var _792=new _78b(obj);this._childPages.push(_792);this.addChild(this._childPages[this._childPages.length-1]);this.selectChild(this._childPages[this._childPages.length-1]);_792.isNew=true;_792._editOptionsMenu();},_showPage:function(_793){var _794=Sage.UI.DataStore.Dashboard.userOptions.hidden,pg=_794[_793],_795=false;for(var i=0;i<this._childPages.length;i++){if(this._childPages[i].title==pg){var _796=dijit.byId("Dashboard_tablist_"+this._childPages[i].id);if(_796){dojo.style(_796.tabContent,"display","block");_795=true;if(this.selectShownTab){this.selectChild(this._childPages[i]);this._showChild(this._childPages[i]);}break;}}}if(!_795){var _797=function(){return true;};for(var i=0,len=this.info.userPages.length;i<len;i++){var ttl=Sage.Utility.htmlDecode(this.pages[i]["@title"]);var _798=ttl;while(_798.indexOf(" ")!==-1){_798=_798.replace(" ","_");}_798=_798.replace(/'/g,"_").replace(/"/g,"_");if(ttl==pg){var _799;if(this.pages[i]["@colWidths"]){_799=this.pages[i]["@colWidths"].split(",").length;}var _79a=this.info.permissions[_798];this.pages[i].Columns.Column=_78c.Convert.toArrayFromObject(this.pages[i].Columns.Column);this._childPages.push(new _78b({id:_798,closable:true,onClose:_797,name:ttl,title:this.resources[_798]||ttl,family:this.pages[i]["@family"]||"System",nbZones:_799||1,acceptTypes:["Portlet"],hasResizableColumns:false,firstButNotDefault:false,colWidths:this.pages[i]["@colWidths"],_columns:this.pages[i].Columns.Column,_page:i,_parentId:this.id,permission:_79a,_childWidgets:[]}));if(this.pages[i]["@colWidths"]){this._childPages[this._childPages.length-1]._colWidths=this.pages[i]["@colWidths"];}this.addChild(this._childPages[this._childPages.length-1]);if(this.selectShownTab){this.selectChild(this._childPages[this._childPages.length-1]);}break;}}}if(_793 in _794){delete _794[_793];this._updateUserOptions();}},_copyPageContent:function(pg,_79b){var page=pg.Dashboard;var len=this._childPages.length;var ttl=_79b?_79b:page["@title"];var _79c=page["@id"];while(_79c.indexOf(" ")!==-1){_79c=_79c.replace(" ","_");}var _79d;if(page["@colWidths"]){_79d=page["@colWidths"].split(",").length;}var _79e=false;if(_79b){_79e=true;}else{if(page["@permission"]){_79e=page["@permission"];}}this._childPages.push(new _78b({closable:true,onClose:function(){return true;},name:ttl,title:ttl,family:page["@family"]||"System",nbZones:_79d||1,acceptTypes:["Portlet"],hasResizableColumns:false,colWidths:page["@colWidths"],_columns:page.Columns.Column,_page:len,_parentId:this.id,permission:_79e,_childWidgets:[]}));if(page["@colWidths"]){this._childPages[len]._colWidths=page["@colWidths"];}this.addChild(this._childPages[len]);this._childPages[len]._init();this._childPages[len].copyNotDrawn=true;var uo=Sage.UI.DataStore.Dashboard.userOptions;if(uo.hidden&&_79c in uo.hidden){delete uo.hidden[_79c];this._updateUserOptions();}this._childPages[len]._save();},_copyPage:function(pg){var d=new dijit.Dialog({title:this.copyTabText,style:"width:250px"});d.set("content",this._copyNameForm.apply({titleText:this.titleText,buttonOk:this.okButton,buttonCancel:this.buttonCancel,invalidMessage:this.invalidMessage}));var _79f=function(){dojo.disconnect(_7a0);dojo.disconnect(ok);dojo.disconnect(_7a1);d.destroyRecursive();};var ok=dojo.connect(dijit.byId("btnCNOK"),"onClick",this,function(){var _7a2=dijit.byId("txtCopyName");if(!_7a2.isValid()||!this._isTitleUnique(_7a2.value)){return false;}if(!pg.pageRendered){pg.copyNotDrawn=true;pg._init();}var ttl=_7a2.value;var _7a3=pg._copy();this._copyPageContent(_7a3,ttl);d.hide();});var _7a1=dojo.connect(dijit.byId("btnCNCancel"),"onClick",this,function(){d.hide();});var _7a0=dojo.connect(d,"hide",this,_79f);d.show();},_createPages:function(){this.pages={};var def=this.info.userOptions.defaultTab;var uo=Sage.UI.DataStore.Dashboard.userOptions;var _7a4;var _7a5=0;var _7a6=function(){return true;};for(var i=0,len=this.info.userPages.length;i<len;i++){var page=dojo.fromJson(this.info.userPages[i]);this.pages[i]=page.Dashboard;var ttl=Sage.Utility.htmlDecode(this.pages[i]["@title"]);var _7a7=ttl;while(_7a7.indexOf(" ")!==-1){_7a7=_7a7.replace(" ","_");}_7a7=_7a7.replace(/'/g,"_").replace(/"/g,"_");if(!uo.hidden||!uo.hidden[_7a7]){var _7a8;if(this.pages[i]["@colWidths"]){_7a8=this.pages[i]["@colWidths"].split(",").length;}else{this.pages[i]["@colWidths"]=0;_7a8=1;}var _7a9=this.info.permissions[_7a7];this.pages[i].Columns.Column=_78c.Convert.toArrayFromObject(this.pages[i].Columns.Column);this._childPages.push(new _78b({id:_7a7,closable:true,onClose:_7a6,name:ttl,title:this.resources[_7a7]||ttl,family:this.pages[i]["@family"]||"System",nbZones:_7a8||1,acceptTypes:["Portlet"],hasResizableColumns:false,firstButNotDefault:i===0&&ttl!==def,colWidths:this.pages[i]["@colWidths"],_columns:this.pages[i].Columns.Column,_page:i,_parentId:this.id,permission:_7a9,_childWidgets:[]}));if(this.pages[i]["@colWidths"]){this._childPages[_7a5]._colWidths=this.pages[i]["@colWidths"];}this.addChild(this._childPages[_7a5]);if(ttl===def){_7a4=_7a5;}_7a5++;}}if(_7a4){this._childPages[_7a4].selected=true;this._childPages[_7a4]._init();}else{if(this._childPages.length>0){this._childPages[0].selected=true;this._childPages[0]._init();}}this.addRemovePageContextMenu();},_deletePage:function(pg,_7aa){var uo=Sage.UI.DataStore.Dashboard.userOptions;if(pg.title===uo.defaultTab){uo.defaultTab="";if(!_7aa){this._updateUserOptions();}}var vURL="SLXGroupBuilder.aspx?method=GetGroupIdFromNameFamilyAndType&name="+pg.name+"&family=System&type=36";dojo.xhrGet({url:vURL,error:dojo.hitch(this,function(_7ab){}),load:dojo.hitch(this,function(_7ac){Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"DeleteGroup&gid="+_7ac,"text",function(){},function(req){});})});},_hidePage:function(pg){var uo=Sage.UI.DataStore.Dashboard.userOptions;var _7ad=dijit.byId("Dashboard_tablist_"+pg.id);dojo.style(_7ad.tabContent,"display","none");if(this.selectedChildWidget==pg){this.selectFirstVisible();}if(!uo.hidden){uo.hidden={};}uo.hidden[pg.id]=pg._hide();this._updateUserOptions();this.addRemovePageContextMenu();},_showTabMenu:function(){var _7ae=Sage.UI.DataStore.Dashboard.userOptions.hidden;var _7af=[];if(_7ae&&Sage.Utility.size(_7ae)){for(var id in _7ae){_7af.push(this._stTableInner.apply({title:_7ae[id],id:id,buttonCancel:this.buttonCancel,showText:this.showText}));}}var d=new dijit.Dialog({title:this.showTabText,style:"width:350px"});d.set("content",this._stTableOuter.apply({content:_7af.join(""),buttonOk:this.buttonOk}));d.show();var _7b0=[];if(_7ae){for(var id in _7ae){var _7b1=dijit.byId("btn_"+id);_7b0.push(dojo.connect(_7b1,"onClick",_7b1,function(){var db=dijit.byId("Dashboard"),_7b2=this.id.replace("btn_",""),_7b3=dojo.byId("row_"+_7b2);db._showPage(_7b2);db.addRemovePageContextMenu();dojo.style(_7b3,"display","none");}));}}var ok=dojo.connect(dijit.byId("btnSTOk"),"onClick",null,function(){d.hide();});var _7b4=dojo.connect(d,"hide",null,function(){dojo.disconnect(ok);dojo.disconnect(_7b4);dojo.forEach(_7b0,dojo.disconnect);d.destroyRecursive();});},_isTitleUnique:function(_7b5,_7b6){var _7b7=true;var _7b8=this._childPages;var _7b9="";if(_7b6){_7b9=_7b6;}for(var i=0;i<_7b8.length;i++){if(_7b8[i].id!=_7b9&&!_7b8[i]._destroyed&&_7b8[i].title===_7b5){_7b7=false;var opts={title:this.warningText,query:this.invalidDuplicateMessage,yesText:this.okButton,style:{width:"300px"}};Sage.UI.Dialogs.raiseQueryDialogExt(opts);break;}}return _7b7;},selectFirstVisible:function(){var _7ba=false;for(var i=0;i<this._childPages.length;i++){var _7bb=dijit.byId("Dashboard_tablist_"+this._childPages[i].id);if(_7bb&&_7bb.tabContent.style.display!="none"){_7ba=true;this.selectChild(this._childPages[i]);break;}}if(!_7ba){try{this.selectChild();}catch(err){}}},selectChild:function(_7bc){this.inherited(arguments);if(_7bc._init){_7bc._init();}if(_7bc.copyNotDrawn){_7bc.copyNotDrawn=false;_7bc._redrawWidgets();}},_getUserOptions:function(){if(Sage.UI.DataStore.Dashboard){this.info=Sage.UI.DataStore.Dashboard;this._createPages();}else{this.subscribe("/ui/dashboard/info",function(info){this.info=info;this._createPages();});}},_updateUserOptions:function(){var uo=Sage.UI.DataStore.Dashboard.userOptions;var uri="slxdata.ashx/slx/crm/-/dashboard/useroption?name=Options&category=Dashboard";var def=dojo.xhrPut({url:uri,handleAs:"text",postData:dojo.toJson(uo),load:function(data){},error:function(_7bd){}});}});return _78f;});},"Sage/UI/NumberTextBox":function(){define("Sage/UI/NumberTextBox",["dijit/form/NumberTextBox","dijit/form/ValidationTextBox","dojo/number","Sage/Utility","dojo/_base/declare"],function(_7be,_7bf,_7c0,_7c1,_7c2){var _7c3=_7c2("Sage.UI.NumberTextBox",_7be,{shouldPublishMarkDirty:true,autoPostBack:false,hotKey:"",maxLength:"",formatType:"",attributeMap:{hotKey:{node:"textbox",type:"attribute",attribute:"accessKey"},maxLength:{node:"textbox",type:"attribute",attribute:"maxLength"}},textAlign:"",_getValueAttr:function(){var _7c4=this.inherited(arguments);if((typeof _7c4==="undefined"||isNaN(_7c4))&&this.textbox.value!==""){_7c4=this.getTextBoxValue();}return _7c4;},_setValueAttr:function(v){this.constraints["locale"]=Sys.CultureInfo.CurrentCulture.name;this.inherited(arguments);},_onFocus:function(){this.onFocusFiring=true;this.inherited(arguments);if(this.constraints.type==="percent"){this.textbox.value=Math.round(this.value*10000)/100;}this.onFocusFiring=false;},_onBlur:function(){this.onBlurFiring=true;if(this.formatType==="Percent"||this.constraints.type==="percent"){if(this.textbox.value.indexOf("%")===-1){var _7c5=this.getTextBoxValue();var _7c6=_7c5/100;this.set("displayedValue",_7c6);}}this.onBlurFiring=false;this.inherited(arguments);},_sageUINumberTextBox_IsValid:function(){if(this.formatType!=="Percent"||this.constraints.type!=="percent"){if(dojo.isIE){if(this.oldValue!==this.textbox.value){var trim=this._restrictDD();if(trim!==this.textbox.value){this.textbox.value=trim;}}this.oldValue=this.textbox.value;}else{this.textbox.value=this._restrictDD();}}this.inherited(arguments);},_restrictDD:function(){var _7c7=this.textbox.value;if(this.onBlurFiring||this.onFocusFiring){return _7c7;}if(this.constraints.places){_7c7=_7c1.restrictDecimalDigit(this.textbox.value,this.constraints.places);}return _7c7;},_sageUINumberTextBox_KeyPress:function(e){var type=this.constraints.type;if(!_7c1.restrictToNumberOnKeyPress(e,type)){dojo.stopEvent(e);}},_sageUINumberTextBox_OnFocus:function(e){dojo.setSelectable(this.domNode,true);},startup:function(){this.inherited(arguments);var self=this;dojo.style(self.focusNode,"textAlign",self.textAlign);self.value=self.value||0;self.onBlurFiring=false;self.onFocusFiring=false;this.connect(self,"isValid",self._sageUINumberTextBox_IsValid);this.connect(self,"onKeyPress",self._sageUINumberTextBox_KeyPress,true);this.connect(self,"onFocus",self._sageUINumberTextBox_OnFocus,true);if(!this.ignorechange){this.connect(self,"onChange",self.valueChanged);}},valueChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){if(Sys){Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,null);}}},getTextBoxValue:function(){var _7c8=0;var _7c9=this.textbox.value;if(_7c9.lastIndexOf(Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator)===_7c9.length-1){_7c9=_7c9.slice(0,_7c9.length-1);}_7c8=_7c9;if(isNaN(_7c8)){_7c8=_7c0.parse(_7c9,{locale:Sys.CultureInfo.CurrentCulture.name});}if(isNaN(_7c8)){_7c8=this.value;}return _7c8;}});return _7c3;});},"Sage/UI/_DetailPane":function(){define("Sage/UI/_DetailPane",["dijit/_Widget","dojo/_base/declare"],function(_7ca,_7cb){var _7cc=_7cb("Sage.UI._DetailPane",[_7ca],{constructor:function(){},_applyConfiguration:function(_7cd){this._configuration=_7cd;},_setConfigurationAttr:function(_7ce){this._applyConfiguration(_7ce);},_setOwnerAttr:function(_7cf){if(this._owner===_7cf){return;}if(this._owner){throw new Error("Sage.UI._DetailPane can only be bound to a single Sage.UI.ListPanel.");}this._owner=_7cf;this.connect(this._owner,"onRowClick",this._onRowClick);this.connect(this._owner,"onSelected",this._onSelected);},_getOwnerAttr:function(){return this._owner;},_onRowClick:function(_7d0,row,grid){},_onSelected:function(_7d1,row,grid){}});return _7cc;});},"Sage/Services/CalendarSecurityService":function(){define("Sage/Services/CalendarSecurityService",["Sage/Data/SDataServiceRegistry","Sage/Utility","dojo/_base/declare"],function(_7d2,_7d3,_7d4){var _7d5=_7d4("Sage.Services.CalendarSecurityService",null,{_rawList:[],_accessList:{},_dataAvailable:false,constructor:function(opts){this._dataAvailable=false;this._loading=false;},_waiting:[],hasAccess:function(_7d6,_7d7,_7d8,_7d9){if(this._dataAvailable){var item=this._accessList[_7d6];var _7da=false;if(item){_7da=item[_7d7];}if(_7d8){_7d8.call(_7d9||this,_7da);}}else{this._waiting.push(dojo.connect(this,"onDataAvailable",this,function(){this.hasAccess(_7d6,_7d7,_7d8,_7d9);}));if(!this._loading){this._loadData();}}},getListByAccessLevel:function(_7db,_7dc,_7dd,_7de,_7df){var _7e0=_7de||"userid";var _7e1=_7df||"name";if(this._dataAvailable){var list=[];for(var i=0;i<this._rawList.length;i++){var item=this._rawList[i];if(_7db==="view"||item[_7db]){var obj={};obj[_7e0]=item["accessUserId"];obj[_7e1]=item["accessUserName"];list.push(obj);}}_7dc.call(_7dd||this,list);}else{this._waiting.push(dojo.connect(this,"onDataAvailable",this,function(){this.getListByAccessLevel(_7db,_7dc,_7dd,_7de,_7df);}));if(!this._loading){this._loadData();}}},_loadData:function(){this._loading=true;var svc=_7d2.getSDataService("mashups",false,true,true);var uid=_7d3.getClientContextByKey("userID")||"";var _7e2=new Sage.SData.Client.SDataNamedQueryRequest(svc);_7e2.setApplicationName("$app");_7e2.setResourceKind("mashups");_7e2.uri.setCollectionPredicate("'UserCalendarQueries'");_7e2.setQueryName("execute");_7e2.setQueryArg("_resultName","UserHasAccessToTheseCalendars");_7e2.setQueryArg("_userId",uid);_7e2.read({success:this._dataReceived,failure:function(){},scope:this});},_dataReceived:function(data){this._rawList=data["$resources"];for(var i=0;i<this._rawList.length;i++){var item=this._rawList[i];this._accessList[item["accessUserId"]]={"name":item["accessUserName"],"userid":item["accessUserId"],"allowAdd":item["allowAdd"],"allowDelete":item["allowDelete"],"allowEdit":item["allowEdit"],"allowSync":item["allowSync"]};}this._dataAvailable=true;this._loading=false;this.onDataAvailable();for(var i=0;i<this._waiting.length;i++){dojo.disconnect(this._waiting[i]);}this._waiting=[];},onDataAvailable:function(){}});Sage.Services.addService("CalendarSecurityService",new _7d5());});},"Sage/UI/Filters/FilterPanel":function(){define("Sage/UI/Filters/FilterPanel",["dijit/_Widget","dijit/_Container","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/UI/Filters/CheckBoxFilter","Sage/UI/Filters/LookupFilter","Sage/UI/Filters/EditFilters","dojo/_base/declare","dojo/i18n","dojo/_base/array","dojo/_base/lang","dojo/query","dojo/on","dojo/i18n!./nls/FilterPanel","dojo/has","dojo/_base/sniff","dojo/ready","dojo/json"],function(_7e3,_7e4,_7e5,_7e6,_7e7,_7e8,_7e9,_7ea,_7eb,i18n,_7ec,lang,_7ed,on,nls,has,_7ee,_7ef,json){var _7f0=_7eb("Sage.UI.Filters.FilterPanel",[_7e3,_7e4,_7e6,_7e5],{serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"}},knownFilterTypes:{"checkedList":_7e8,"comboWithArgument":_7e9},widgetsInTemplate:false,widgetTemplate:new Simplate(["<div class=\"filter-panel\" data-dojo-attach-point=\"containerNode\">","<div class=\"filter-edit\"><a href=\"#\" data-dojo-attach-point=\"clearAllFiltersNode\">{%= $.clearText %}</a> | <a href=\"#\" data-dojo-attach-point=\"editFiltersNode\">{%= $.editText %}</a></div>","<div class=\"filter-summary\" data-dojo-attach-point=\"filterSummaryNode\">{%= $.noneText %}</div>","</div>"]),_filterGroup:null,_filterSubscriptions:null,_configuration:null,_configurationConnects:null,_configurationProvider:null,_configurationProviderType:null,_appliedSet:null,configurationProvider:null,configurationProviderType:null,autoConfigure:true,store:null,filterGroup:"default",filterManager:null,_appliedFilters:null,_isApplyingConfig:false,_editFilters:null,_editFiltersHandle:null,_isFetchingData:false,editText:"Edit Filters",noneText:"No filters selected.",clearText:"Clear All",constructor:function(){var _7f1=Sage.Utility.getValue(window,"Sage.UI.DataStore.Filters");if(_7f1&&_7f1[this.filterGroup]){this._appliedSet=_7f1[this.filterGroup].applied;}if(nls){this.editText=nls.editText;this.noneText=nls.noneText;this.clearText=nls.clearText;}this._appliedFilters=[];},postCreate:function(){this.inherited(arguments);this.startup();},startup:function(){this.inherited(arguments);if(!this._configurationProvider&&this._configurationProviderType){this.set("configurationProvider",new this._configurationProviderType());}if(this.autoConfigure){this.requestConfiguration();}},uninitialize:function(){this.inherited(arguments);if(this._editFilters){this._editFilters.destroy();this._editFiltersHandle.remove();}if(this._configurationProvider){this._configurationProvider.destroy();}},_setFilterGroupAttr:function(_7f2){if(this._filterSubscriptions){dojo.forEach(this._filterSubscriptions,function(_7f3){this.unsubscribe(_7f3);},this);}this._filterGroup=_7f2;this._filterSubscriptions=[];this._filterSubscriptions.push(this.subscribe(dojo.string.substitute("/ui/filters/${0}/apply",[this._filterGroup]),lang.hitch(this,this._onApply)));this._filterSubscriptions.push(this.subscribe(dojo.string.substitute("/ui/filters/${0}/change",[this._filterGroup]),lang.hitch(this,this._onChange)));},_getFilterGroupAttr:function(){return this._filterGroup;},_onChange:function(_7f4,name,_7f5,_7f6){var _7f7=false,_7f8,_7f9=false;if(typeof _7f5==="object"){if(_7f5.value&&_7f5.value!==""){_7f9=true;}}_7ec.forEach(this._appliedFilters,function(_7fa,i){var _7fb=false;if(_7fa.filterName===_7f4.filterName){_7f8=this._appliedFilters[i];_7fb=_7ec.some(_7f8.items,function(item){return item===name;});if(_7fb){_7ec.forEach(_7f8.items,function(item,x){if(item===name&&!_7f9){_7f8.items.splice(x,1);}},this);}else{_7f8.items.push(name);}_7f7=true;}},this);if(!_7f7){this._appliedFilters.push({"filterName":_7f4.filterName,"displayName":_7f4.$descriptor||_7f4.displayName,items:[name]});}this._updateFilterSummary();},_updateFilterSummary:function(){var _7fc=[];_7ec.forEach(_7ec.filter(this._appliedFilters,function(_7fd){return (typeof _7fd.displayName!=="undefined"&&_7fd.displayName!=="")&&(_7fd.items&&_7fd.items.length>0);}),function(_7fe){_7fc.push(_7fe.displayName+" ("+_7fe.items.length+")");},this);if(_7fc.length===0){this.filterSummaryNode.innerHTML=this.noneText;}else{this.filterSummaryNode.innerHTML=_7fc.join(", ");}},_onApply:function(_7ff,_800,_801){var key,_802,_803,_804;if(_801&&this._configuration){var _805=_801.getContext();if(_805.CurrentGroupID.toUpperCase()!==this._configuration.groupId.toUpperCase()){return;}}this._appliedFilters=[];this._appliedSet=_7ff;var _806=false;for(key in this._appliedSet){if(this._appliedSet.hasOwnProperty(key)){_806=true;_804=_800[key];_802=this._appliedSet[key];for(_803 in _802){if(_802.hasOwnProperty(_803)){this._onChange(_804,_803);}}}}if((this._configuration)){this.requestData();}},_handleConfigurationChange:function(){this.requestConfiguration();},_setConfigurationProviderAttr:function(_807){if(this._configurationConnects){dojo.forEach(this._configurationConnects,function(_808){this.disconnect(_808);},this);}if(this._configurationProvider&&this._configurationProvider!==_807){this._configurationProvider.destroy();}this._configurationProvider=_807;this._configurationConnects=[];if(this._configurationProvider){this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange));this._configurationProvider.set("owner",this);if(this._created){if(this.autoConfigure){this.requestConfiguration();}}}},_getConfigurationProviderAttr:function(){return this._configurationProvider;},_setConfigurationProviderTypeAttr:function(_809){this._configurationProviderType=_809;},_getConfigurationProviderTypeAttr:function(){return this._configurationProviderType;},requestConfiguration:function(){if(this._configurationProvider&&!this._isApplyingConfig){this._isApplyingConfig=true;this._configurationProvider.requestConfiguration({success:lang.hitch(this,this._applyConfiguration)});}},_applyConfiguration:function(_80a){this._configuration=_80a;this.store=_80a.store;this.filterManager=_80a.getFilterManager();if(this._editFilters){this._editFilters.destroy();this._editFiltersHandle.remove();}this._editFilters=new _7ea({store:this.store,filterPanel:this});this._editFiltersHandle=on(this.editFiltersNode,"click",lang.hitch(this,function(){this._editFilters.showDialog();}));on(this.clearAllFiltersNode,"click",lang.hitch(this,this._clearAllFilters));this._appliedSet={};this._appliedFilters=[];this._updateFilterSummary();if(this._appliedSet){this.requestData(function(){var _80b=Sage.Services.getService("ClientGroupContext");_80b.publishFiltersApplied();});}this._ensureApplyFilterWasPublished();},_ensureApplyFilterWasPublished:function(){var _80c,_80d;_80c=Sage.Services.getService("ClientGroupContext");_80d=_80c&&_80c.getContext();if(_80d&&_80d.AppliedFilterInfo){_80c.publishFiltersApplied(_80d.AppliedFilterInfo);}},_clearAllFilters:function(){var q=_7ed("li.filter-selected",this.containerNode),evt;_7ec.forEach(q,function(node){if(node.click){node.click();}else{evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);node.dispatchEvent(evt);}});q=_7ed(".filter-lookup-input input",this.containerNode);_7ec.forEach(q,function(node){if(node.value){node.value="";if(has("ie")<9){node.fireEvent("onkeydown");}else{evt=document.createEvent("KeyboardEvent");if(evt.initKeyEvent){evt.initKeyEvent("keydown",true,true,null,false,false,false,false,13,0);}else{evt.initKeyboardEvent("keydown",true,true,null,13,null,null,1,null);}node.dispatchEvent(evt);}}});},refreshFilters:function(_80e){this._refreshing=true;if(_80e!==true){this._clearAllFilters();}this.requestConfiguration();},requestData:function(_80f){if(this._isFetchingData){return;}this._isFetchingData=true;this.destroyDescendants();var _810,_811,_812,_813,data;_811=Sage.Services.getService("ClientGroupContext");_812=_811&&_811.getContext();_810="METADATA_FILTERS_"+_812.CurrentGroupID;_813=sessionStorage.getItem(_810);if(_813){data=json.parse(_813);this._iterateFetchedItems(data);if(_80f){_80f();}}else{this.store.fetch({onError:lang.hitch(this,this._onFetchError),onComplete:lang.hitch(this,this._onFetchComplete,_810,_80f)});}},onRequestDataFailure:function(_814){},_onFetchError:function(){this._isFetchingData=false;},_onFetchItem:function(_815){var data=this._configuration._hiddenFilters||{},_816=Sage.Services.getService("ClientGroupContext"),_817=_816&&_816.getContext(),prop=_817.CurrentEntity+"_"+_815.filterName,_818=false,type=_815.filterType,_819=false;if(data[prop]){_818=data[prop].hidden;_819=data[prop].expanded;}if(this.knownFilterTypes[type]){if(_818===false||typeof _818==="undefined"||_818===null){this.addChild(new this.knownFilterTypes[type]({configurationProvider:this._configurationProvider,filter:_815,store:this._configuration.createStoreForFilter(_815),appliedValues:this._appliedSet&&this._appliedSet[_815.$key],parent:this,groupId:_817.CurrentGroupID,expanded:_819}));}}},_onFetchComplete:function(_81a,_81b,_81c){sessionStorage.setItem(_81a,json.stringify(_81c));this._iterateFetchedItems(_81c);if(_81b){_81b();}},_iterateFetchedItems:function(_81d){if(!_81d||!_81d.length){return;}var i,_81e;_81e=_81d.length;for(i=0;i<_81e;i++){this._onFetchItem(_81d[i]);}this._isFetchingData=false;this._isApplyingConfig=false;}});return _7f0;});},"url:Sage/MainView/Lead/templates/LeadDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Lead.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svCompany_Caption || \"Company:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountname %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTitle_Caption || \"Title:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.title %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWorkPhone_Caption || \"Work Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.workphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svHomePhone_Caption || \"Home Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.homephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMobilePhone_Caption || \"Mobile Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mobilephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n]","Sage/MainView/ActivityMgr/ActivityGroupContextService":function(){define("Sage/MainView/ActivityMgr/ActivityGroupContextService",["Sage/Groups/BaseGroupContextService","Sage/Services/ActivityService","dojo/string","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/MainView/ActivityMgr/ActivityListPanelConfig","Sage/MainView/ActivityMgr/AlarmListPanelConfig","Sage/MainView/ActivityMgr/AllOpenListPanelConfig","Sage/MainView/ActivityMgr/ConfirmListPanelConfig","Sage/MainView/ActivityMgr/EventListPanelConfig","Sage/MainView/ActivityMgr/LitRequestListPanelConfig","Sage/MainView/ActivityMgr/PastDueListPanelConfig","dojox/storage/LocalStorageProvider","dojo/_base/declare","dojo/i18n!./nls/ActivityGroupContextService"],function(_81f,_820,_821,_822,lang,_823,_824,_825,_826,_827,_828,_829,_82a,_82b,_82c){var _82d=_82b("Sage.MainView.ActivityMgr.ActivityGroupContextService",_81f,{_currentContext:null,_currentTabId:false,_currentTabDescription:false,_currentUserId:false,_currentKeyField:"$key",_currentListConfiguration:false,groupConfigTypes:[{key:"activities",descriptor:_82c.activityTabDisplayName,keyField:"$key",configProviderType:_823},{key:"allopen",descriptor:_82c.allOpenTabDisplayName,keyField:"$key",configProviderType:_825},{key:"pastdue",descriptor:_82c.pastDueTabDisplayName,keyField:"$key",isCompostie:true,configProviderType:_829},{key:"alarms",descriptor:_82c.alarmTabDisplayName,keyField:"$key",isCompostie:true,configProviderType:_824},{key:"events",descriptor:_82c.eventTabDisplayName,keyField:"$key",configProviderType:_827},{key:"confirmations",descriptor:_82c.confirmTabDisplayName,keyField:"$key",configProviderType:_826},{key:"literature",descriptor:_82c.litTabDisplayName,keyField:"$key",configProviderType:_828}],_configsHash:false,_LOCALSTORE_NAMESPACE:"Sage-ActivityManagerView",_STORE_KEY_LASTAB:"_LASTTAB",_tabNameCache:{},constructor:function(){this.inherited(arguments);this._currentContext={};dojo.mixin(this._currentContext,this._emptyContext);this._currentContext.CurrentTableKeyField="$key";this._currentContext.AppliedFilterInfo={};this._currentContext.CurrentFamily=null;this._currentContext.notGroupBased=true;var _82e=this._getDefaultTabId();this.setContext(_82e,"default");this.unsubscribeConnects();this._subscribes=[];this._subscribes.push(dojo.subscribe(_821.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh));this._onDefaultFilterLoad();},buildCurrentEntityContext:function(){var _82f=this._currentContext.CurrentGroupID;if(!_82f){return;}if(this._currentListConfiguration){this._currentContext.CurrentEntity=this._currentListConfiguration.entityName;this._currentContext.CurrentTableKeyField=this.getKeyField(_82f);if(!this._currentContext.CurrentName){this._currentContext.CurrentName=this.getGroupName(_82f);}}},_ensureConfigsHash:function(){if(!this._configsHash){var hash={};for(var i=0;i<this.groupConfigTypes.length;i++){var cfg=this.groupConfigTypes[i];hash[cfg.key]=lang.mixin(cfg,{instance:false});}this.configsHash=hash;}},_setListConfig:function(){this._ensureConfigsHash();var _830=this._currentContext.CurrentGroupID;var _831=(this.configsHash.hasOwnProperty(_830))?this.configsHash[_830]:this.configsHash["activities"];if(!_831.instance){_831.instance=new _831.configProviderType();this.onTabConfigCreated(_831.instance);}else{_831.instance.rebuild();}this._currentListConfiguration=_831.instance;return;},getCurrentListConfig:function(){this._setListConfig();return this._currentListConfiguration;},getKeyField:function(_832){this._ensureConfigsHash();var _833="$key";if(this.configsHash[_832]){_833=this.configsHash[_832]["keyField"]||"$key";}return _833;},getGroupName:function(_834){this._ensureConfigsHash();var name="default";if(this.configsHash[_834]){name=this.configsHash[_834]["descriptor"]||"default";}return name;},onCurrentGroupChanged:function(_835){this._clearFilterManager();var self=this;this._onDefaultFilterLoad(function(){var _836=self.getContext();dojo.publish("/group/context/changed",[_835,self]);self._saveToLocalStorage(self._STORE_KEY_LASTAB,_836.CurrentGroupID);});},_clearFilterManager:function(){var _837={};var _838={};dojo.publish("/ui/filters/default/apply",[_837,_838,this]);},getContext:function(){if(this._currentContext.CurrentGroupID===null){this.requestContext();}this.buildCurrentEntityContext();return this._currentContext;},requestContext:function(){if(this._isRetrievingContext===true){return;}},setContext:function(id,name){this._currentContext.CurrentGroupID=id;this._currentContext.CurrentName=name;this._setListConfig();this.buildCurrentEntityContext();this._isRetrievingContext=false;this.onContextSet(this._currentContext);},isContextRequired:function(){return !(Sage&&Sage.Groups&&Sage.Groups._groupContext);},setCurrentGroup:function(id,name,_839){if(this._currentContext.CurrentGroupID===id){return;}if(!name||!_839){this._currentContext.CurrentGroupID=id;this._currentContext.CurrentName=false;this.buildCurrentEntityContext();name=this._currentContext.CurrentName;}else{this._currentContext.CurrentTableKeyField=_839;}this.setContext(id,name);this.onCurrentGroupChanged({current:this._currentContext});},_onDefaultFilterLoad:function(_83a){var _83b=this.getContext(),_83c=_822.getSDataService("system"),_83d,_83e={"$name":"getEntityFilters","request":{"entityName":_83b.CurrentEntity,"key":_83b.CurrentGroupID}};_83d=new Sage.SData.Client.SDataServiceOperationRequest(_83c).setOperationName("getEntityFilters");_83d.execute(_83e,{success:lang.hitch(this,function(_83f){try{if(_83f.response.appliedFilterInfo){this._currentContext.AppliedFilterInfo.applied=_83f.response.appliedFilterInfo.applied;this._currentContext.AppliedFilterInfo.definitionSet=_83f.response.appliedFilterInfo.definitionSet;if(_83a){_83a();}}}catch(err){console.error(err);}}),failure:function(_840){console.error(_840);},async:false});},_onDefaultFilterRefresh:function(_841,_842,_843){var _844=this.getContext(),_845=_822.getSDataService("system"),_846={"$name":"applyFilterToEntity","request":{"entityName":_844.CurrentEntity,"filter":dojo.toJson(_843.createValueSet()),"key":_844.CurrentGroupID}},_847=new Sage.SData.Client.SDataServiceOperationRequest(_845).setOperationName("applyFilterToEntity");_847.execute(_846,{});},getStaticTabs:function(){return this.groupConfigTypes;},_saveToLocalStorage:function(key,_848,_849){this._saveToSessionStorage(key,_848,_849);return;},_getFromLocalStorage:function(key,_84a){return this._getFromSessionStorage(key,_84a);},_getFromSessionStorage:function(key,_84b){if(!_84b){_84b=this._LOCALSTORE_NAMESPACE;}var _84c=_84b+"_"+key;return sessionStorage.getItem(_84c);},_saveToSessionStorage:function(key,_84d,_84e){if(!_84e){_84e=this._LOCALSTORE_NAMESPACE;}var _84f=_84e+"_"+key;sessionStorage.setItem(_84f,_84d);},_getDefaultTabId:function(){var _850="activities",_851=this._getUrlTabId(),_852;if(_851){_851=this._validateTabId(_851);if(_851){return _851;}}var _853=this._getFromLocalStorage(this._STORE_KEY_LASTAB);if(_853){_850=_853;}else{_852=Sage.Services.getService("ActivityService");if(_852){_850=_852.getDefaultActivityManagerTabId();}}if(!this._configsHash){for(var i=0;i<this.groupConfigTypes;i++){if(_850===this.groupConfigTypes[i]["key"]){return _850;}}}return _850;},_getUrlTabId:function(){var _854=false,_855="[\\?&]tabId=([^%#]*)",_856=new RegExp(_855),_857=_856.exec(window.location.href);if(_857!==null){_854=_857[1];}return _854;},_validateTabId:function(_858){if(_858){for(var i=0;i<this.groupConfigTypes.length;i++){var cfg=this.groupConfigTypes[i];if(cfg.key.toUpperCase()===_858.toUpperCase()){return cfg.key;}}}return null;},onTabConfigCreated:function(_859){}});if(!Sage.Services.hasService("ClientGroupContext")){Sage.Services.addService("ClientGroupContext",new _82d());}else{var _85a=Sage.Services.getService("ClientGroupContext");if(_85a.declaredClass!=="Sage.MainView.ActivityMgr.ActivityGroupContextService"){_85a.unsubscribeConnects();Sage.Services.removeService("ClientGroupContext");Sage.Services.addService("ClientGroupContext",new _82d());}}return _82d;});},"Sage/MainView/ActivityMgr/nls/SnoozeOptions":function(){define("Sage/MainView/ActivityMgr/nls/SnoozeOptions",["Sage/LanguageList","dojo/_base/lang"],function(_85b,lang){var nls={root:{fiveMinText:"5 minutes",tenMinText:"10 minutes",fifteenMinText:"15 minutes",thirtyMinText:"30 minutes",oneHourText:"1 hour",twoHourText:"2 hours",fourHourText:"4 hours",eightHourText:"8 hours",oneDayText:"1 day",twoDayText:"2 days",threeDayText:"3 days",oneWeekText:"1 week",twoWeekText:"2 weeks",snoozeText:"Snooze",snoozeByText:"Snooze by:",snoozeAllText:"Snooze All",snoozeTitle:"Snooze Alarms"}};return lang.mixin(_85b,nls);});},"url:Sage/UI/Controls/templates/AddressEdit.html":"<!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n-->\r\n<div>\r\n        <table style=\"width:100%;height:100%;\">\r\n                {% for (var i = 0; i < $.fields.length; i++) { %}\r\n                {% if ($.fields[i].visible) { %}\r\n                    <tr>\r\n                        <td><label>{%= $.fields[i].fieldLabel %}</label></td>\r\n                        <td style=\"width: 150px;\">\r\n                            {% if ($.fields[i].xtype === 'picklistcombo') { %}\r\n                            <select data-dojo-type=\"Sage.UI.Controls.DropDownSelectPickList\"\r\n                                dojoAttachPoint=\"_valueBox\"\r\n                                pickListName=\"{%= $.fields[i].pickList.pickListName %}\"\r\n                                storeMode=\"text\"\r\n                                style=\"width: 100%;\"\r\n                                value=\"{%= $.fields[i].value %}\"\r\n                           {% } %}\r\n                           {% if ($.fields[i].xtype === 'checkbox') { %}\r\n                                <input data-dojo-type=\"Sage.UI.Controls.CheckBox\"\r\n                                checked=\"{%= $.fields[i].value %}\"\r\n                           {% } %}\r\n                           {% if ($.fields[i].xtype === 'textfield') { %}\r\n                                <input data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                                style=\"width: 100%;\" type=\"text\"\r\n                                value=\"{%= $.fields[i].value %}\"\r\n                           {% } %}\r\n                                id=\"{%= $.id %}-{%= $.fields[i].name %}\"\r\n                                name=\"{%= $.fields[i].formClientId %}\"\r\n                                shouldPublishMarkDirty=\"false\"\r\n                                onChange=\"dijit.byId('{%= $.id %}').editorChange();\"\r\n                                textAlign=\"{%= $.fields[i].textAlign %}\" data-dojo-attach-point=\"focusNode\"\r\n                                maxLength=\"{%= $.fields[i].maxLength %}\" />\r\n                        </td>\r\n                   </tr>\r\n                {% } %}          \r\n                {% } %}            \r\n        </table>                    \r\n        <div class=\"button-bar alignright\" style=\"clear: both\">\r\n            <button id=\"{%= $.id %}-OKButton\" data-dojo-type=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId('{%= $.id %}')._okClicked();\">\r\n                {%= $.okText %}\r\n            </button>\r\n            <button id=\"{%= $.id %}-CancelButton\" data-dojo-type=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId('{%= $.id %}')._cancelClicked();\">\r\n                {%= $.cancelText %}\r\n            </button>\r\n        </div>\r\n</div>","Sage/QuickForms/Design/Editors/nls/OwnerAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/OwnerAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_85c,lang){var nls={root:{titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"}}};return lang.mixin(_85c,nls);});},"Sage/Groups/main":function(){define("Sage/Groups/main",["Sage/Groups/GroupNavigator","Sage/Groups/GroupContextService","Sage/Groups/GroupLookup","Sage/Groups/GroupManager"],function(){});},"Sage/QuickForms/Design/Editors/nls/NonVisibleAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/NonVisibleAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_85d,lang){var nls={root:{titleText:"Advanced",controlInfoText:"Control Info",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type."}};return lang.mixin(_85d,nls);});},"Sage/MainView/IntegrationContract/nls/InvoiceRTDV":function(){define("Sage/MainView/IntegrationContract/nls/InvoiceRTDV",["Sage/LanguageList","dojo/_base/lang"],function(_85e,lang){var nls={root:{dialogCaption:"Invoice Details",loadingText:"loading...",lblInvoiceCaption:"Invoice:",lblNetTotalCaption:"Invoice Amount:",lblInvoiceDateCaption:"Invoice Date:",lblInvoiceDiscountAmountCaption:"Discount:",lblDueDateCaption:"Due Date:",lblInvoiceDiscountPercentCaption:"Discount Percent:",lblCustomerPOCaption:"Customer PO:",lblCarrierTotalPriceCaption:"Shipping:",lblSettlementDiscountPercentCaption:"Settlement Discount Percent:",lblTaxCaption:"Tax:",lblSettlementDiscountTermsCaption:"Payment Terms:",lblNotesCaption:"Comments:",lblOperatingCompanyCurrencyCaption:"Operating Company Currency:",lblCostTotalCaption:"Total Cost:",lblOperatingCompanyCurrencyExchangeRateDateCaption:"Exchange Rate Date:",lblProfitTotalCaption:"Profit Total:",lblOperatingCompanyCurrencyExchangeRateCaption:"Exchange Rate:",lblPriceListCaption:"Price List:",lblOCCurrencyCaption:"Operating Company Currency:",lblCurrencyCaption:"Currency:",lblSalesPersonCaption:"Sales Person:",detailsTabTitle:"Details",addressTabTitle:"Addresses",invoiceLinesTabTitle:"Invoice Lines",paymentsTabTitle:"Payments",deliveriesTabTitle:"Deliveries",grdInvoice_Name:"Invoice #",grdInvoice_Date:"Invoice Date",grdInvoice_Amount:"Invoice Amount",grdInvoice_PO:"Customer PO",grdInvoice_PaymentTerms:"Payment Terms",grdInvoice_NetTotal:"Net Total",grdInvoice_Tax:"Tax",grdAddress_Name:"Description",grdAddress_address1:"Address 1",grdAddress_address2:"Address 2",grdAddress_City:"City",grdAddress_State:"State",grdAddress_Zip:"Postal Code",grdItems_ActualPrice:"Actual Price",grdItems_ChargesTotal:"Charges Total",grdItems_Commodity:"Commodity",grdItems_CommodityDimension:"Dimension",grdItems_CommodityVariant:"Variant",grdItems_DiscountTotal:"Discount Total",grdItems_GrossTotal:"Gross Total",grdItems_InitialPrice:"Initial Price",grdItems_Line:"Line Number",grdItems_NetTotal:"Net Total",grdItems_Quantity:"Quantity",grdItems_Status:"Status",grdItems_TaxTotal:"Tax Total",grdItems_Type:"Line Type",grdItems_UnitOfMeasure:"Unit",grdPayments_Charges:"Charges",grdPayments_Currency:"Currency",grdPayments_Date:"Date",grdPayments_Discounts:"Discounts",grdPayments_GrossTotal:"Gross Total",grdPayments_Name:"Name",grdPayments_NetTotal:"Net Total",grdPayments_ProcessDate:"Date Processed",grdPayments_Status:"Status",grdPayments_Tax:"Taxes",grdPayments_TenderReference:"Tender Reference",grdPayments_TenderType:"Tender Type",grdPayments_Type:"Type",grdDeliveries_ActualDate:"Actual Date",grdDeliveries_ActualTime:"Actual Time",grdDeliveries_Carrier:"Carrier",grdDeliveries_CarrierReference:"Carrier Reference",grdDeliveries_DeliveredQuantity:"Delivered Quantity",grdDeliveries_ExceptionReason:"Exception Reason",grdDeliveries_Method:"Method",grdDeliveries_Number:"Number",grdDeliveries_RequestedDate:"Requested Date",grdDeliveries_RequestedQuantity:"Requested Quantity",grdDeliveries_Status:"Status",grdDeliveries_Type:"Type",btnCloseCaption:"Close"}};return lang.mixin(_85e,nls);});},"Sage/UI/ToggleButton":function(){require({cache:{"url:Sage/templates/ToggleButton.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\r\t><span class=\"dijitReset dijitInline dijitButtonNode\"\r\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\r\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\r\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\r\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\r\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\r\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\r\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\r\t\t\t\tid=\"${id}_label\"\r\t\t\t\tdata-dojo-attach-point=\"containerNode\"\r\t\t\t></span\r\t\t></span\r\t></span\r\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\r\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\r/></span>\r"}});define("Sage/UI/ToggleButton",["dijit/form/Button","dijit/_Widget","dojo/text","dojo/text!../templates/ToggleButton.html","dojo/_base/declare"],function(_85f,_860,text,_861,_862){var _863=_862("Sage.UI.ToggleButton",_85f,{templateString:_861,__setValueAttr:{node:"valueNode",type:"attribute",attribute:"value"},getValue:function(){return this.get("label");},setValue:function(val){this.set("label",val);},_onButtonClick:function(e){}});return _863;});},"Sage/UI/nls/SDataLookup":function(){define("Sage/UI/nls/SDataLookup",["Sage/LanguageList","dojo/_base/lang"],function(_864,lang){var nls={root:{closeText:"Close",cancelText:"Cancel",loadingText:"Loading...",noDataText:"No records returned"}};return lang.mixin(_864,nls);});},"Sage/QuickForms/Design/nls/RowDesigner":function(){define("Sage/QuickForms/Design/nls/RowDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_865,lang){var nls={root:{displayNameText:"Row"}};return lang.mixin(_865,nls);});},"Sage/MainView/ActivityMgr/ActivityListPanelConfig":function(){define("Sage/MainView/ActivityMgr/ActivityListPanelConfig",["dojo/i18n","Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/UI/SDataSummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/Data/SDataStore","Sage/UI/Columns/DateTime","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/i18n!./nls/ActivityListPanelConfig"],function(i18n,_866,_867,_868,_869,_86a,_86b,_86c,_86d,_86e,_86f){var _870=_86e("Sage.MainView.ActivityMgr.ActivityListPanelConfig",[_866],{constructor:function(){this._nlsResources=_86f;this._listId="Activities";this._resourceKind="userActivities";this.entityName="UserActivity";this._contextMenu="ActivityListContextMenu";this._scheduleContextMenu="ScheduleContextMenu";this._service=_86d.getSDataService("system");this._structure=this._getStructure();this._select=this._getSelect();this._include=this._getInclude();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();this.keyField="$key";this.hasCompositeKey=true;dojo.subscribe("/entity/activity/change",this._onListRefresh);dojo.subscribe("/entity/activity/delete",this._onListRefresh);dojo.subscribe("/entity/activity/create",this._onListRefresh);dojo.subscribe("/entity/userActivity/change",this._onListRefresh);dojo.subscribe("/entity/userActivity/delete",this._onListRefresh);dojo.subscribe("/entity/userActivity/create",this._onListRefresh);dojo.subscribe("/entity/activity/confirm",this._onListRefresh);dojo.subscribe("/entity/activity/decline",this._onListRefresh);dojo.subscribe("/entity/userNotification/delete",this._onListRefresh);},_onListRefresh:function(_871){var _872=Sage.Services.getService("ActivityService");_872.refreshList("activities");},_getSelect:function(){var _873=["Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Alarm","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","UserId","AlarmTime","Alarm","Status"];return _873;},_getInclude:function(){var _874=["Activity","$descriptors"];return _874;},_getSort:function(){var sort=[{attribute:"Activity.StartDate",descending:true}];return sort;},_getWhere:function(){var _875=(this._currentUserId)?dojo.string.substitute("(User.Id eq \"${0}\") and (Status ne \"asDeclned\" ) and (Activity.Type ne \"atLiterature\" ) ",[this._currentUserId]):"";return _875;},_getStructure:function(){var _876="<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />";var _877="<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />";var _878="<img src='images/icons/Alarm_16x16.gif' title='"+this._nlsResources.colNameAlarm+"' alt='"+this._nlsResources.colNameAlarm+"' />";var _879="<div class='Global_Images icon16x16 icon_unconfirmedActivity16x16' title='"+this._nlsResources.colNameUnConfirmStatus+"' />";var _87a=this._nlsResources.colNameType||"Activity Type";var _87b=this._nlsResources.colNameStartDate||"Start Date";var _87c=this._nlsResources.colNameDuration||"Duration";var _87d=this._nlsResources.colNameAccount||"Account/Company";var _87e=this._nlsResources.colNameRegarding||"Regarding";var _87f=this._nlsResources.colNamePriority||"Priority";var _880=this._nlsResources.colNameUserId||"Leader";var _881=this._nlsResources.colNameTypeName||"Type";var _882=this._nlsResources.colNameContactName||"Name";var _883=[{field:"Status",name:_879,type:_867.activityConfirmStatusCell,width:"20px"},{field:"Alarm",name:_878,type:_867.activityAlarmCell,width:"20px"},{field:"Activity.Attachment",name:_876,type:_867.activityAttachCell,width:"20px"},{field:"Activity.Recurring",name:_877,type:_867.activityRecurringCell,width:"20px"},{field:"Activity.Type",name:_87a,type:_867.activityTypeCell,width:"90px"},{field:"Activity.StartDate",name:_87b,type:_86c,timelessField:"Activity.Timeless",width:"100px"},{field:"Activity.Duration",name:_87c,type:_867.activityDurationCell,width:"40px"},{field:"Activity.ContactId",name:_881,type:_867.activityNameTypeCell,width:"40px"},{field:"Activity.ContactName",name:_882,type:_867.activityNameCell,width:"200px"},{field:"Activity.AccountName",name:_87d,type:_867.activityAccountCell,width:"200px"},{field:"Activity.Description",name:_87e,width:"100px"},{field:"Activity.Priority",name:_87f,width:"40px"},{field:"Activity.Leader",name:_880,type:_867.activityLeaderCell,width:"200px"}];return _883;},_getSummaryConfig:function(){var _884=new _86b({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:["Activity","$descriptors"],select:["$key"],expandRecurrences:false,where:this._where});var _885=[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}];var _886=this._getFormatterScope();var _887={structure:_885,layout:"layout",store:_884,rowHeight:170,rowsPerPage:10,formatterScope:_886};return _887;},_getDetailConfig:function(){var _888=this._getFormatterScope();var _889=this._getSummaryDetailRequestConfig();var _88a={resourceKind:this._resourceKind,requestConfiguration:_889,templateLocation:"MainView/ActivityMgr/Templates/UserActivityDetailSummary.html"};return _88a;},_getSummaryListRequestConfig:function(){var _88b={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/Notes","Activity/PhoneNumber"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};return _88b;},_getSummaryDetailRequestConfig:function(){var _88c={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/LongNotes","Activity/PhoneNumber"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};return _88c;},_getFormatterScope:function(){var _88d=this._getSummaryListRequestConfig();var _88e=new _869({templateLocation:"MainView/ActivityMgr/templates/UserActivityListSummary.html",resetDataManager:true,requestConfiguration:_88d});return _88e;},_getToolBars:function(){var _88f={items:[]};return _88f;},getTimelessProperty:function(_890){return "Activity.Timeless";}});return _870;});},"Sage/Utility/_LocalStorageMixin":function(){define("Sage/Utility/_LocalStorageMixin",["dojo/_base/declare","dojox/storage/LocalStorageProvider"],function(_891,_892){return _891("Sage.Utility._LocalStorageMixin",null,{localStorageProvider:null,_setLocalStorageProviderAttr:function(_893){this.localStorageProvider=_893;},_getLocalStorageProviderAttr:function(){this._ensureProvider();return this.localStorageProvider;},_ensureProvider:function(){var _894;if(!this.localStorageProvider){_894=new _892();_894.initialize();this._setLocalStorageProviderAttr(_894);}},saveToLocalStorage:function(key,_895,ns){var _896=this._getLocalStorageProviderAttr(),_897=ns,_898=key;if(!_896.isValidKey(key)){_898=this._stripBadValues(key);}if(!_896.isValidNamespace(ns)){_897=this._stripBadValues(ns);}_896.put(_898,_895,function(_899,key,_89a){if(_899===_896.FAILED){console.error("Failed writing key: "+key+" in local storage. Message: "+_89a);}},_897);var mod=new Date(Date.now());_896.put(_898+"_modified_at",mod,function(_89b,key,_89c){if(_89b===_896.FAILED){console.error("Failed writing key: "+key+" in local storage. Message: "+_89c);}},_897);_896.put("modified_at",mod,function(_89d,key,_89e){if(_89d===_896.FAILED){console.error("Failed writing key: "+key+" in local storage. Message: "+_89e);}},_897);},getFromLocalStorage:function(key,ns){var _89f=this._getLocalStorageProviderAttr(),_8a0=ns,_8a1=key;if(!_89f.isValidKey(key)){_8a1=this._stripBadValues(key);}if(!_89f.isValidNamespace(ns)){_8a0=this._stripBadValues(ns);}return _89f.get(_8a1,_8a0);},getKeys:function(ns){var _8a2=this._getLocalStorageProviderAttr();return _8a2.getKeys(ns);},clear:function(ns){var _8a3=this._getLocalStorageProviderAttr();if(ns){_8a3.clear(ns);}else{_8a3.clear();}},_stripBadValues:function(key){return key.replace(/[^A-Za-z0-9]/g,"-");}});});},"url:Sage/MainView/IntegrationContract/templates/SalesOrderRTDV.html":"[\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"{%= $.id%}_salesOrderDetailsDialog\" title=\"{%= $.dialogCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hideDetailsDialog\">',\r\n        '<div dojoAttachPoint=\"loadingContainer\">',\r\n            '<br />',\r\n            '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingText %}</label>',\r\n            '<br />',\r\n            '<br />',\r\n        '</div>',\r\n        '<table cellspacing=\"5\" dojoAttachPoint=\"salesOrderDetails\" border=\"0\" width=\"100%\" class=\"display-none\">',\n            '<div>',\r\n                '<tr>',\n\t\t\t        '<td>',\r\n\t\t\t             '<label for=\"SalesOrder_reference\">{%= $.lblSalesOrderCaption %}</label>',\r\n\t\t\t        '</td>',\r\n                    '<td>',\r\n                        '<input type=\"text\" id=\"{%= $.id%}_reference\" name=\"reference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                    '<td>',\n                        '<label for=\"SalesOrder_status\">{%= $.lblStatusCaption %}</label>',\n                    '</td>',\n                    '<td>',\n                        '<input type=\"text\" id=\"{%= $.id%}_status\" name=\"status\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                    '<td>',\n                        '<label for=\"SalesOrder_grossTotal\">{%= $.lblGrossTotalCaption %}</label>',\r\n                    '</td>',\n                    '<td>',\n                        '<input type=\"text\" id=\"{%= $.id%}_grossTotal\" name=\"grossTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                '</tr>',\r\n            '</div>',\r\n        '</table>',\r\n        '<div style=\"height:370px;width:800px\" dojoAttachPoint=\"tabContentDetails\" class=\"display-none\">',\r\n            '<div id=\"{%= $.id%}_salesOrderContainer\" dojoAttachPoint=\"salesOrderContainer\" dojoType=\"dijit.layout.TabContainer\" style=\"width:100%;height:100%;\">',\r\n                '<div id=\"{%= $.id%}_salesOrderContent\" dojoAttachPoint=\"salesOrderContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.detailsTabTitle %}\" selected=\"true\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"{%= $.id%}_divDetails\">',\r\n                        '<table cellspacing=\"5\">',\r\n                            '<col style=\"width:200px\" />',\r\n                            '<col style=\"width:200px\" />',\r\n                            '<tr>',\r\n                                '<td>',\r\n                                    '<label for=\"SalesOrder_OrderDate\">{%= $.lblOrderDateCaption %}</label>',\r\n                                '</td>',\r\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_OrderDate\" name=\"date\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\r\n                                '<td>',\n                                    '<label for=\"SalesOrder_TaxTotal\">{%= $.lblTaxTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_TaxTotal\" name=\"taxTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\r\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\r\n                                    '<label for=\"SalesOrder_HoldStatus\">{%= $.lblHoldStatusCaption %}</label>',\r\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_HoldStatus\" name=\"statusFlagText\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Currency\">{%= $.lblCurrencyCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Currency\" name=\"currency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Type\">{%= $.lblTypeCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Type\" name=\"type\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\r\n                                    '<label for=\"SalesOrder_CostTotal\">{%= $.lblCostTotalCaption %}</label>',\r\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_CostTotal\" name=\"costTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_PONumber\">{%= $.lblPONumberCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_PONumber\" name=\"customerReference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_ProfitTotal\">{%= $.lblProfitTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_ProfitTotal\" name=\"profitTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Quotation\">{%= $.lblQuotationCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Quotation\" name=\"quotation.reference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_InvoiceStatus\">{%= $.lblInvoiceStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_InvoiceStatus\" name=\"invoiceStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Contact\">{%= $.lblContactCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Contact\" name=\"buyerContact.fullName\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DeliveryDate\">{%= $.lblDeliveryDateCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DeliveryDate\" name=\"deliveryDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_PriceList\">{%= $.lblPriceListCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_PriceList\" name=\"pricelist.name\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DueDate\">{%= $.lblDueDateCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DueDate\" name=\"dueDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_NetTotal\">{%= $.lblNetTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_NetTotal\" name=\"netTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Carrier\">{%= $.lblCarrierCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Carrier\" name=\"carrierCompany\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DiscountTotal\">{%= $.lblDiscountTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DiscountTotal\" name=\"discountTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_AllocationStatus\">{%= $.lblAllocationStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_AllocationStatus\" name=\"allocationStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DeliveryStatus\">{%= $.lblDeliveryStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DeliveryStatus\" name=\"deliveryStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_ChargesTotal\">{%= $.lblChargesTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_ChargesTotal\" name=\"chargesTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                        '</table>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soAddressesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.addressTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"sdgrdSalesOrderAddresses\" dojoAttachPoint=\"sdgrdSalesOrderAddresses\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesOrderAddresses_Grid\" dojoAttachPoint=\"sdgrdSalesOrderAddresses_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soSalesPersonsContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.salesPersonsTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_SalesPersons\" dojoAttachEvent=\"onShow:initSalesPersons\">',\r\n                    '<div id=\"sdgrdSalesPersons\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesPersons_Grid\" dojoAttachPoint=\"sdgrdSalesPersons_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soLinesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.salesOrderLinesTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"sdgrdSalesOrderLines\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesOrderLines_Grid\" dojoAttachPoint=\"sdgrdSalesOrderLines_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soPaymentsContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.paymentsTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Payments\" dojoAttachEvent=\"onShow:initPayments\">',\r\n                    '<div id=\"sdgrdSOPayments\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSOPayments_Grid\" dojoAttachPoint=\"sdgrdSOPayments_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soDeliveriesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.deliveriesTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Deliveries\" dojoAttachEvent=\"onShow:initDeliveries\">',\r\n                    '<div id=\"sdgrdSODeliveries\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSODeliveries_Grid\" dojoAttachPoint=\"sdgrdSODeliveries_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n            '</div>',\r\n        '</div>',\r\n        '<div class=\"button-bar alignright\">',\r\n            '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_soBtnClose\" type=\"button\" dojoAttachEvent=\"onClick:hideDetailsDialog\">{%= $.btnCloseCaption %}</button>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]","Sage/UI/SummaryContents":function(){define("Sage/UI/SummaryContents",["dijit/_Widget","Sage/_Templated","dojo/_base/lang","dojo/_base/declare"],function(_8a4,_8a5,lang,_8a6){var _8a7=_8a6("Sage.UI.SummaryContents",[_8a4,_8a5],{widgetsInTemplate:true,templateLocation:"",templateString:"",widgetTemplate:"",constructor:function(_8a8){var _8a9=["Sage"];var _8aa=_8a8.templateLocation.split("/");for(var i=0;i<_8aa.length-1;i++){_8a9.push(_8aa[i]);}var path="dojo/i18n!"+_8a9.join("/")+"/nls/"+_8aa[_8aa.length-1].replace(".html","");require([path],lang.hitch(this,function(nls){lang.mixin(this,nls);}));this.templateString=dojo["cache"]("Sage",_8a8.templateLocation||this.templateLocation),this.widgetTemplate=new Simplate(eval(this.templateString));}});return _8a7;});},"Sage/TaskPane/nls/OpportunityTasksTasklet":function(){define("Sage/TaskPane/nls/OpportunityTasksTasklet",["Sage/LanguageList","dojo/_base/lang"],function(_8ab,lang){var nls={root:{updateOpportunitiesTitle:"Update Opportunities",opportunityStatisticsTitle:"Opportunity Statistics"}};return lang.mixin(_8ab,nls);});},"Sage/UI/Filters/nls/CheckBoxFilter":function(){define("Sage/UI/Filters/nls/CheckBoxFilter",["Sage/LanguageList","dojo/_base/lang"],function(_8ac,lang){var nls={root:{loadingText:"Loading...",moreText:"Edit Items",clearText:"Clear",emptyText:"(Blank)",nullText:"(Null)",ofText:"/"}};return lang.mixin(_8ac,nls);});},"Sage/UI/Alarms/UnconfirmedAlarm":function(){define("Sage/UI/Alarms/UnconfirmedAlarm",["Sage/_Templated","dijit/_Widget","dijit/form/CheckBox","Sage/Utility/Activity","Sage/UI/Alarms/AlarmCountDown","Sage/Link","Sage/UI/Controls/EntityInfoToolTip","dojo/i18n","dojo/i18n!./nls/ActivityAlarm","dojo/_base/declare"],function(_8ad,_8ae,_8af,_8b0,_8b1,link,_8b2,i18n,_8b3,_8b4){var _8b5=_8b4("Sage.UI.Alarms.UnconfirmedAlarm",[_8ae,_8ad],{widgetsInTemplate:true,userNotification:null,selected:false,key:"",_tooltips:[],widgetTemplate:new Simplate(["<div class=\"alarm-item\">","<table style=\"width:100%\" dojoAttachPoint=\"_item\" dojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">","<col width=\"50px\" />","<col width=\"50%\" />","<col width=\"50%\" />","<tr>","{% var imageClass = Sage.Utility.Activity.getActivityImageClass($.userNotification.Activity.Type, \"medium\"); %}","<td class=\"alarm-icon\">","<div class=\"dijitIcon dijitMenuItemIcon Global_Images icon24x24 {%= imageClass %}\" title=\"{%= $.cleanText($.userNotification.Activity.Description) %}\"></div>","<input type=\"checkbox\" data-dojo-type=\"dijit.form.CheckBox\" size=\"30px\" dojoAttachPoint=\"_checkbox\" />","</td>","<td class=\"alarm-content\">","{% var desc = $.userNotification.Activity.Description;if (!desc) { desc = Sage.Utility.Activity.getActivityTypeName($.userNotification.Activity.Type); } %}","<div class=\"alarm-description\">","{% if ($.userNotification.Activity.Recurring) { %}<div class=\"Global_Images icon16x16 icon_recurring\" title=\"{%= $.recurringText %}\" > </div>&nbsp;&nbsp;{% } %}","<a href=\"javascript:Sage.Link.editConfirmation('{%= $.userNotification.$key %}')\">{%= desc %}</a>","</div>","<div>{%= Sage.Utility.Activity.formatActivityStartDate($.userNotification.Activity.StartDate) %}</div>","<div>{%= $.leaderText %}: {%= $.userNotification.Activity.Leader.$descriptor %}</div>","{% if (($.userNotification.Activity.LeadId) && ($.userNotification.Activity.LeadId.trim() !== \"\")) { %}","<div id=\"{%= $.userNotification.Activity.$key %}_lead\" dojoAttachPoint=\"_leadnode\">","{%= $.leadText %}: <a href=\"Lead.aspx?entityid={%= $.userNotification.Activity.LeadId %}\">{%= $.userNotification.Activity.LeadName %}</a>","</div>","{% if ($.userNotification.Activity.AccountName !== \"\") { %}","<div>{%= $.companyText %}: {%= $.userNotification.Activity.AccountName %}</div>","{% } %}","{% } else { %}","{% if ($.userNotification.Activity.ContactName !== \"\") { %}","<div id=\"{%= $.userNotification.Activity.$key %}_con\" dojoAttachPoint=\"_connode\">","{%= $.contactText %}: <a href=\"Contact.aspx?entityid={%= $.userNotification.Activity.ContactId %}\">{%= $.userNotification.Activity.ContactName %}</a>","</div>","{% } %}","{% if ($.userNotification.Activity.AccountName !== \"\") { %}","<div id=\"{%= $.userNotification.Activity.$key %}_acc\" dojoAttachPoint=\"_accnode\">","{%= $.accountText %}: <a href=\"Account.aspx?entityid={%= $.userNotification.Activity.AcountId %}\">{%= $.userNotification.Activity.AccountName %}</a>","</div>","{% } %}","{% } %}","</td><td class=\"alarm-content\">","{% if ($.userNotification.Activity.Location) { %}","<div id=\"{%= $.userNotification.Activity.$key %}_Location\" dojoAttachPoint=\"_location\">","{%= $.locationText %}: {%= $.userNotification.Activity.Location %}&nbsp;","</div>","{% } %}","{% if ($.userNotification.Activity.OpportunityName) { %}","<div id=\"{%= $.userNotification.Activity.$key %}_opp\" dojoAttachPoint=\"_oppnode\">","{%= $.opportunityText %}: <a href=\"Opportunity.aspx?entityid={%= $.userNotification.Activity.OpportunityId %}\">{%= $.userNotification.Activity.OpportunityName %}</a>","</div>","{% } %}","{% if ($.userNotification.Activity.TicketNumber) { %}","<div id=\"{%= $.userNotification.Activity.$key %}_tick\" dojoAttachPoint=\"_ticknode\">","{%= $.ticketText %}: <a href=\"Ticket.aspx?entityid={%= $.userNotification.Activity.TicketId %}\">{%= $.userNotification.Activity.TicketNumber %}</a>","</div>","{% } %}","</td>","</tr>","</table>","</div>"]),constructor:function(){dojo.mixin(this,_8b3);},postCreate:function(){this.inherited(arguments);this._checkbox.set("checked",this.selected);this._setupTooltips();},_setuserNotificationAttr:function(un){this.userNotification=un;this.key=un["$key"];},_setupTooltips:function(){if(this.userNotification.Activity.AccountName!==""){this._tooltips.push(new _8b2({connectId:this._accnode,position:["below"],entityName:"accounts",entityId:this.userNotification.Activity.AccountId}));}if(this.userNotification.Activity.ContactName!==""){this._tooltips.push(new _8b2({connectId:this._connode,position:["below"],entityName:"contacts",entityId:this.userNotification.Activity.ContactId}));}if(this.userNotification.Activity.LeadName!==""){this._tooltips.push(new _8b2({connectId:this._leadnode,position:["below"],entityName:"leads",entityId:this.userNotification.Activity.LeadId}));}},closeTooltips:function(){for(var i=0;i<this._tooltips.length;i++){this._tooltips[i].close();}},cleanText:function(str){if(!str){return "";}var _8b6=new RegExp("[/:\"*?<>|\r\n'\"`]+","g");return str.replace(_8b6,"");},_onHover:function(){dojo.addClass(this.domNode,"alarm-item-hover");},_onUnhover:function(){dojo.removeClass(this.domNode,"alarm-item-hover");},_onClick:function(){this.selected=!this.selected;this._checkbox.set("checked",this.selected);this._setSelectedStyle();},_setSelectedAttr:function(_8b7){this.selected=_8b7;this._checkbox.set("checked",this.selected);this._setSelectedStyle();},_getSelectedAttr:function(){return this.selected;},_setSelectedStyle:function(){if(this.selected){dojo.addClass(this.domNode,"alarm-item-selected");}else{dojo.removeClass(this.domNode,"alarm-item-selected");}}});return _8b5;});},"Sage/Utility/File/nls/LibraryDocument":function(){define("Sage/Utility/File/nls/LibraryDocument",["Sage/LanguageList","dojo/_base/lang"],function(_8b8,lang){var nls={root:{failureNumber:"Failure #${0}: ",percentComplete:"Uploading, please wait...",uploadError:"There was an error attempting to upload one or more files (failed: ${0}; succeeded: ${1}).",invalidContext:"The file(s) cannot be uploaded outside of the Sales Library.",unknownError:"An unknown error occurred uploading a file."}};return lang.mixin(_8b8,nls);});},"Sage/UI/Controls/EntityInfoToolTip":function(){define("Sage/UI/Controls/EntityInfoToolTip",["dijit/Tooltip","Sage/Data/SingleEntrySDataStore","Sage/Utility","dojo/string","dojo/html","dojo/i18n!./nls/EntityInfoToolTip","dojo/_base/lang","dojo/_base/declare"],function(_8b9,_8ba,util,_8bb,_8bc,_8bd,lang,_8be){var _8bf=_8be("Sage.UI.Controls.EntityInfoToolTip",_8b9,{entityName:"",entityId:"",dataProps:[],include:[],_store:null,_storeOptions:null,constructor:function(_8c0){lang.mixin(this,_8bd);this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.label="Loading...";},open:function(_8c1){if(!this.entityId||this.entityId.trim()===""){this.set("label",this.noInfoText);}else{if(!this._store){if(this.dataProps.length<1){this.dataProps=this._findPredefined(this.entityName);}if(this.dataProps.length<1){this.set("label",this.errorText);return;}this._setupStore();this._fetchData(_8c1);}}this.inherited(arguments);},_setDataPropsAttr:function(_8c2){this._store=false;this.set("label",this.loadingText);this.dataProps=_8c2;},_getDataPropsAttr:function(){return this.dataProps;},_setEntityIdAttr:function(_8c3){this._store=false;this.set("label",(_8c3==="")?this.noInfoText:this.loadingText);this.entityId=_8c3;},_getEntityIdAttr:function(){return this.entityId;},_setupStore:function(){var _8c4=[],sel="",_8c5=[],_8c6={};for(var i=0;i<this.dataProps.length;i++){sel=this.dataProps[i].property;if(sel.indexOf(".")>0){var _8c7=sel.split("."),inc="";for(var p=0;p<_8c7.length-1;p++){inc+=_8c7[p];if(!_8c6[inc]){_8c5.push(inc);_8c6[inc]=true;}inc+="/";}sel=sel.replace(/\./g,"/");}_8c4.push(sel);}var self=this;var _8c8={include:dojo.isArray(this.include)?this.include:[],select:_8c4,resourceKind:self.entityName};if(_8c5.length>0){_8c8["include"]=_8c5;}var _8c9=new _8ba(_8c8);self._storeOptions=_8c8;self._store=_8c9;},_fetchData:function(_8ca){var t=_8ca;this._store.fetch({predicate:"\""+this.entityId+"\"",onComplete:function(data){this.displayResults(data,t);},onError:function(e){this.set("label",this.errorText);},scope:this});},displayResults:function(data,_8cb){var html="<table class=\"propertyTip\">";for(var i=0;i<this.dataProps.length;i++){var dp=this.dataProps[i];var val=util.getValue(data,dp.property);if(val){html+=_8bb.substitute("<tr><td class=\"caption\">${0}</td><td class=\"value\">${1}</td></tr>",[dp.label,val]);}}html+="</table>";this.set("label",html);this.close();this.open(_8cb);},_findPredefined:function(_8cc){switch(_8cc){case "accounts":return [{label:this.mainText||"Main Phone:",property:"MainPhone"},{label:this.faxText||"Fax:",property:"Fax"},{label:this.tollFreeText||"Toll Free",property:"TollFree"},{label:this.urlText||"Web URL",property:"WebAddress"}];case "contacts":return [{label:this.workText||"Work:",property:"WorkPhone"},{label:this.mobileText||"Mobile:",property:"Mobile"},{label:this.faxText||"Fax:",property:"Fax"},{label:this.emailText||"Email:",property:"Email"}];case "leads":return [{label:this.workText||"Work:",property:"WorkPhone"},{label:this.mobileText||"Mobile:",property:"Mobile"},{label:this.faxText||"Fax:",property:"Fax"},{label:this.emailText||"Email:",property:"Email"}];case "tickets":return [{label:this.contactNameText||"Contact:",property:"Contact.Name"},{label:this.phoneText||"Phone:",property:"Contact.WorkPhone"},{label:this.emailText||"Email:",property:"Contact.Email"}];case "opportunities":return [{label:this.accountText||"Account:",property:"Account.AccountName"},{label:this.mainText||"Main Phone:",property:"Account.MainPhone"}];}return [];}});return _8bf;});},"Sage/QuickForms/Design/Editors/TextBoxBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/TextBoxBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/TextBoxBasicPropertyEditor"],function(_8cd,lang,_8ce,_8cf,_8d0,_8d1,_8d2,_8d3,_8d4,_8d5,_8d6,_8d7){return _8cd("Sage.QuickForms.Design.Editors.TextBoxBasicPropertyEditor",[_8cf,_8d5,_8d4],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.linesTooltipText %}\">","<label>{%= $.linesText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_lines\" data-dojo-props=\"constraints:{min:0,max:1000,places:0}\" data-dojo-attach-event=\"onChange:_onLinesChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_lines:null,_isReadOnly:null,_tooltip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",linesText:"Lines:",linesTooltipText:"Number of lines of text displayed.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_8d7);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._lines.set("value",this._designer.get("lines"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));var D=Sage.QuickForms.Design,_8d8=this._designer;if(_8d8 instanceof D.PhoneControlDesigner||_8d8 instanceof D.UrlControlDesigner||_8d8 instanceof D.EmailControlDesigner){_8ce.set(this._lines.domNode.parentNode,"display","none");}},_onCaptionChange:function(_8d9){if(this.isSuspended()){return;}this._designer.set("caption",_8d9);},_onCaptionAlignmentChange:function(_8da){if(this.isSuspended()){return;}this._designer.set("captionAlignment",_8da);},_onLinesChange:function(_8db){if(this.isSuspended()||!this._lines.isValid()){return;}this._designer.set("lines",_8db);},_onIsReadOnlyChange:function(_8dc){if(this.isSuspended()){return;}this._designer.set("isReadOnly",_8dc);},_onToolTipChange:function(_8dd){if(this.isSuspended()){return;}this._designer.set("toolTip",_8dd);}});});},"Sage/QuickForms/Design/Editors/DataGridAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/DataGridAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DataGridAdvancedPropertyEditor"],function(_8de,lang,_8df,_8e0,_8e1,_8e2,_8e3,_8e4,_8e5,_8e6,_8e7){return _8de("Sage.QuickForms.Design.Editors.DataGridAdvancedPropertyEditor",[_8df,_8e5,_8e4],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.renderVerticalTooltipText %}\">","<label>{%= $.renderVerticalText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_renderVertical\" data-dojo-attach-event=\"onChange:_onRenderVerticalChange\"></div>","</div>","<div class=\"editor-field\" style=\"display:none;\" title=\"{%= $.showSortIconTooltipText %}\">","<label>{%= $.showSortIconText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_showSortIcon\" data-dojo-attach-event=\"onChange:_onShowSortIconChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.emptyTableRowTooltipText %}\">","<label>{%= $.emptyTableRowText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_emptyTableRowString\" data-dojo-attach-event=\"onChange:_onEmptyTableRowStringChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.expandableRowsTooltipText %}\">","<label>{%= $.expandableRowsText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_expandableRows\" data-dojo-attach-event=\"onChange:_onExpandableRowsChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.dataSourceTooltipText %}\">","<label>{%= $.dataSourceText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_dataSource\" data-dojo-attach-event=\"onChange:_onDataSourceChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlId:null,_controlType:null,_dataSource:null,_emptyTableRowString:null,_expandableRows:null,_renderVertical:null,_showSortIcon:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",dataSourceText:"Data Source:",dataSourceTooltipText:"Source of the data for this control such as another control or an entity.",emptyTableRowText:"Empty Table Row Text:",emptyTableRowTooltipText:"Text to display if grid shows no data.",expandableRowsText:"Expandable Rows:",expandableRowsTooltipText:"Allows user to expand grid rows to show more text.",renderVerticalText:"Render Vertically:",renderVerticalTooltipText:"Show grid rows as columns.",showSortIconText:"Show Sort Icon:",showSortIconTooltipText:"Show sort icon on columns that are sortable.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",constructor:function(){lang.mixin(this,_8e7);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._dataSource.set("value",this._designer.get("dataSource"));this._emptyTableRowString.set("value",this._designer.get("emptyTableRowText"));this._expandableRows.set("value",this._designer.get("expandableRows"));this._renderVertical.set("value",this._designer.get("renderVertical"));this._showSortIcon.set("value",this._designer.get("showSortIcon"));this._visible.set("value",this._designer.get("visible"));},_onControlTypeChange:function(_8e8){},_onControlIdChange:function(_8e9){},_onDataSourceChange:function(_8ea){},_onEmptyTableRowStringChange:function(_8eb){if(this.isSuspended()){return;}this._designer.set("emptyTableRowText",_8eb);},_onExpandableRowsChange:function(_8ec){if(this.isSuspended()){return;}this._designer.set("expandableRows",_8ec);},_onRenderVerticalChange:function(_8ed){if(this.isSuspended()){return;}this._designer.set("renderVertical",_8ed);},_onShowSortIconChange:function(_8ee){if(this.isSuspended()){return;}this._designer.set("showSortIcon",_8ee);},_onVisibleChange:function(_8ef){if(this.isSuspended()){return;}this._designer.set("visible",_8ef);}});});},"Sage/UI/Alarms/AlertPane":function(){define("Sage/UI/Alarms/AlertPane",["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dojo/_base/declare"],function(_8f0,_8f1,_8f2,_8f3){var _8f4=_8f3("Sage.UI.Alarms.AlertPane",[_8f2,_8f0,_8f1],{widgetsInTemplate:true,constructor:function(){this.alertItems=[];this.alertWidgets=[];this.store=null;this._drawn=false;this.selectedAlerts={};},onShow:function(){},_hasDifferentItems:function(_8f5){if(_8f5.length!==this.alertWidgets.length){return true;}if(this.alertItems.length===_8f5.length){for(var i=0;i<_8f5.length;i++){if(this.alertItems[i]["$key"]!==_8f5[i]["$key"]){return true;}}return false;}return true;},_setAlertItemsAttr:function(_8f6,_8f7){if(!this._hasDifferentItems(_8f6)){return;}this.alertItems=_8f6;this._drawn=false;this.selectedAlerts={};var len=this.alertWidgets.length;for(var i=0;i<len;i++){var wid=this.alertWidgets.pop();if(wid.selected){this.selectedAlerts[wid.key]=1;}wid.destroy();}if(len===0&&this.alertItems.length>0){this.selectedAlerts[this.alertItems[0]["$key"]]=1;}this._drawAlerts();this._alertChanged(this.alertWidgets.length);},_ensureOneSelected:function(){var len=this.alertWidgets.length-1;for(var i=0;i<len;i++){if(this.alertWidgets[i].get("selected")){return;}}if(this.alertWidgets.length>0){this.alertWidgets[0].set("selected",true);}},_drawAlerts:function(){if(this._drawn){return;}dojo.html.set(this._alertContents,"");if(this.alertItems){for(var i=0;i<this.alertItems.length;i++){this._addAlert(this.alertItems[i]);}this._drawn=true;}},getUnhandledAlertCount:function(){return this.alertWidgets.length;},_addAlert:function(_8f8){},closeTooltips:function(){for(var i=0;i<this.alertWidgets.length;i++){this.alertWidgets[i].closeTooltips();}},_alertChanged:function(_8f9){this._ensureOneSelected();this.onAlertChanged(_8f9);},onAlertChanged:function(_8fa){}});return _8f4;});},"Sage/TaskPane/SecuredActionTasklet":function(){define("Sage/TaskPane/SecuredActionTasklet",["dojo/i18n!./nls/SecuredActionTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/Utility","dojo/_base/declare"],function(_8fb,_8fc,_8fd,_8fe,_8ff){var _900=_8ff("Sage.TaskPane.SecuredActionTasklet",[_8fc,_8fd],{addToRoleTitle:"Add To Role",taskItems:[],constructor:function(){dojo.mixin(this,_8fb);this.taskItems=[{taskId:"AddToRole",type:"Link",displayName:this.addToRoleTitle,clientAction:"securedActionTaskletActions.addSecuredActionToRole();",securedAction:"Entities/SecuredAction/Add"}];},addSecuredActionToRole:function(){if(_8fe.getModeId()==="detail"){dojo.byId([this.clientId,"_tskAddSecuredActionsToRole"].join("")).click();}else{this.prepareSelectedRecords(this.actionItem(this));}},actionItem:function(self){return function(){dojo.byId([self.clientId,"_tskAddSecuredActionsToRole"].join("")).click();};}});return _900;});},"Sage/QuickForms/Design/DesignPanel":function(){define("Sage/QuickForms/Design/DesignPanel",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/string","dojo/topic","dojo/dom-construct","dojo/dom-class","dojo/dom-attr","dijit/layout/BorderContainer","dijit/layout/ContentPane","dijit/form/Select","Sage/Services/_ServiceMixin","Sage/_Templated","Sage/Utility","Sage/UI/ImageButton","./Help","./DesignSurface","./FormDesigner","./NonVisibleControlContainer","./PropertyEditorContainer","dojo/i18n!./nls/DesignPanel"],function(_901,_902,lang,json,_903,_904,_905,_906,_907,_908,_909,_90a,_90b,_90c,_90d,_90e,Help,_90f,_910,_911,_912,_913){return _901("Sage.QuickForms.Design.DesignPanel",[_908,_90b,_90c],{serviceMap:{"dataService":{type:"sdata",name:"metadata"}},widgetsInTemplate:true,contentTemplate:new Simplate(["<div class=\"design-panel-toolbar\" data-dojo-type=\"dijit.Toolbar\" data-dojo-props=\"region: 'top', align: 'right', splitter: false\">","<span class=\"design-panel-culture-label\">{%: $.cultureText %}</span><div class=\"design-panel-culture\" data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_cultureSelect\" data-dojo-attach-event=\"onChange:_onCultureChange\"></div>","<div data-dojo-type=\"Sage.UI.ImageButton\" icon=\"images/icons/Save_16x16.gif\" tooltip=\"{%: $.saveText %}\" data-dojo-attach-point=\"saveIcon\" data-dojo-attach-event=\"onClick:save\" class=\"design-panel-save\"></div>","<div data-dojo-type=\"Sage.UI.ImageButton\" icon=\"images/icons/Help_16x16.png\" tooltip=\"{%: $.helpText %}\" data-dojo-attach-event=\"onClick:help\" class=\"design-panel-help\"></div>","</div>","<div class=\"design-panel-surface\" data-dojo-type=\"Sage.QuickForms.Design.DesignSurface\"  data-dojo-attach-point=\"designSurface\" data-dojo-props=\"region: 'center'\"></div>","<div class=\"design-panel-hidden\" data-dojo-type=\"Sage.QuickForms.Design.NonVisibleControlContainer\" data-dojo-attach-point=\"nonVisibleContainer\" data-dojo-props=\"region: 'bottom', layoutPriority:2, splitter: true\"></div>","<div class=\"design-panel-editor\" data-dojo-type=\"Sage.QuickForms.Design.PropertyEditorContainer\" data-dojo-attach-point=\"editorContainer\" data-dojo-props=\"region: 'bottom', layoutPriority:1, splitter: true\"></div>"]),loadingTemplate:new Simplate(["<div class=\"design-panel-loading-indicator\"><span>{%: $.loadingText %}</span></div>"]),savingTemplate:new Simplate(["<div class=\"design-panel-saving-indicator\"><span>{%: $.savingText %}</span></div>"]),_designGroup:null,_designGroupTopics:null,_cultureSelect:null,_previousName:null,_previousEntry:null,currentCulture:"iv",designSurface:null,nonVisibleContainer:null,editorContainer:null,form:null,formDirty:false,helpTopicName:"Working_with_forms",helpSubSystemName:"WebForms",designGroup:"default",_saveMode:false,cultureList:["iv","de-DE","fr-FR","it-IT","ru-RU"],cultureListText:{"iv":"[invariant]","de_DE":"de-DE","fr_FR":"fr-FR","it_IT":"it-IT","ru_RU":"ru-RU"},helpText:"Help",saveText:"Save",cultureText:"Culture:",loadingText:"Loading...",savingText:"Saving...",saveErrorText:"An error occurred saving the form.",readErrorText:"Could not load the requested form.",cultureReloadConfirmText:"You have unsaved changes.  Are you sure you want to reload the form with a different culture?",constructor:function(){lang.mixin(this,_913);},_getDesignGroupAttr:function(){return this._designGroup;},_setDesignGroupAttr:function(_914){if(this._designGroupTopics){_902.forEach(this._designGroupTopics,function(_915){this.unsubscribe(_915);},this);}this._designGroup=_914;this._designGroupTopics=[this.subscribe("/quickforms/design/designerModified",this._onDesignerModified)];},_ignoreModifiedOn:{"focused":true},_onDesignerModified:function(_916,name,_917,_918,_919){if(!this._ignoreModifiedOn[name]&&_916.get("form")===this.form){this.formDirty=true;}},buildRendering:function(){this.inherited(arguments);_906.add(this.domNode,"design-panel");_905.place(this.loadingTemplate.apply(this),this.designSurface.domNode);_905.place(this.savingTemplate.apply(this),this.designSurface.domNode);},startup:function(){this.inherited(arguments);_902.forEach(this.cultureList,function(item){this._cultureSelect.addOption({value:item,label:this.cultureListText[item.replace("-","_")]||item,selected:item==this.currentCulture});},this);},_onCultureChange:function(_91a){if(this.currentCulture===_91a){return;}if(this.form&&this.formDirty){if(!confirm(this.cultureReloadConfirmText)){this._cultureSelect._onChangeActive=false;this._cultureSelect.set("value",this.currentCulture);this._cultureSelect._onChangeActive=true;return;}}this.currentCulture=_91a;if(this._previousName){this.read(this._previousName);}else{if(this._previousEntry){this.load(this._previousEntry);}}},help:function(){Help.open(this.helpTopicName,this.helpSubSystemName);},save:function(){if(this._saveMode){return;}this._saveMode=true;var _91b=new Sage.SData.Client.SDataSingleResourceRequest(this.dataService).setResourceKind("forms").setResourceSelector(_903.substitute("\"${0}\"",[this.form.get("name")])).setQueryArg("language",this.currentCulture!="iv"?this.currentCulture:"");var _91c=lang.clone(this.form.get("entry"));_91c["$etag"]=_91c["etag"];delete _91c["etag"];delete _91c["ifMatch"];delete _91c["httpStatus"];this._showSavingIndicator();_91b.update(_91c,{success:lang.hitch(this,this._onSaveFormSuccess,this.form),failure:lang.hitch(this,this._onSaveFormFailure,this.form)});},_onSaveFormSuccess:function(form,_91d){this._hideSavingIndicator();this._saveMode=false;form.set("etag",_91d["etag"]);this.formDirty=false;},_onSaveFormFailure:function(form,xhr){this._hideSavingIndicator();this._saveMode=false;alert(this.saveErrorText);},_showLoadingIndicator:function(){_906.add(this.domNode,"design-panel-loading");},_showSavingIndicator:function(){_907.set(this.saveIcon,"disabled",true);_906.add(this.domNode,"design-panel-saving");},_hideLoadingIndicator:function(){_906.remove(this.domNode,"design-panel-loading");},_hideSavingIndicator:function(){_906.remove(this.domNode,"design-panel-saving");_907.set(this.saveIcon,"disabled",false);},read:function(form){this.clear();this._previousName=form;this._previousEntry=null;var _91e=new Sage.SData.Client.SDataSingleResourceRequest(this.dataService).setResourceKind("forms").setResourceSelector(_903.substitute("\"${0}\"",[form])).setQueryArg("language",this.currentCulture!="iv"?this.currentCulture:"");this._showLoadingIndicator();_91e.read({success:lang.hitch(this,this._onRequestFormSuccess),failure:lang.hitch(this,this._onRequestFormFailure)});},_onRequestFormSuccess:function(_91f){this._hideLoadingIndicator();this._apply(_91f);},_onRequestFormFailure:function(xhr){this._hideLoadingIndicator();alert(this.readErrorText);},clear:function(){_904.publish(_903.substitute("/quickforms/design/${0}/clear",[this._designGroup]),this);this.designSurface.clear();this.nonVisibleContainer.clear();this.editorContainer.clear();if(this.form){this.form.destroy();}this.form=null;this.formDirty=false;},load:function(_920){this.clear();this._previousName=null;this._previousEntry=_920;this._apply(_920);},_apply:function(_921){this.original=_921;this.form=new _910({entry:lang.clone(_921)});this.designSurface.set("form",this.form);_902.forEach(this.form.get("controls"),function(_922){if(_922.designSupport&&_922.designSupport.visible){this.designSurface.addChild(_922);}else{this.nonVisibleContainer.addChild(_922);}},this);this.designSurface.layout();this.nonVisibleContainer.layout();_904.publish(_903.substitute("/quickforms/design/${0}/load",[this._designGroup]),_921,this);_904.publish(_903.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this.form,false,this);}});});},"Sage/Services/SelectionContextService":function(){define("Sage/Services/SelectionContextService",["dojo/_base/declare"],function(_923){var _924=_923("Sage.Services.SelectionContextService",null,{_url:"",constructor:function(){this._url="slxdata.ashx/slx/crm/-/SelectionService";},getSelectionInfo:function(key,_925){if(typeof key==="undefined"||key==null){key="";}dojo.xhrGet({url:this._url,handleAs:"json",load:function(data){_925(data);},error:function(_926,_927,_928){}});},getSelectedIds:function(_929,_92a){if(typeof _929==="undefined"||_929==null){key="";}dojo.xhrGet({url:this._url,handleAs:"json",load:function(data){_92a(data);},error:function(_92b,_92c,_92d){}});},setSelectionContext:function(key,_92e,_92f){dojo.xhrPost({url:dojo.string.substitute("${0}/SetSelectionContext?key=${1}",[this._url,key]),handleAs:"json",load:function(data){_92f(data);},error:function(_930,_931,_932){_92f(_932);},postData:dojo.toJson(_92e)});}});Sage.Services.addService("SelectionContextService",new Sage.Services.SelectionContextService());return _924;});},"Sage/UI/_DialogLoadingMixin":function(){define("Sage/UI/_DialogLoadingMixin",["dojo/_base/declare","dojox/widget/Standby"],function(_933,_934){return _933("Sage.UI._DialogLoadingMixin",null,{_standby:false,showLoading:function(){if(!this._standby&&this.domNode){var _935=this.domNode;if(this.containerNode){_935=this.containerNode;}this._standby=new _934({target:_935,color:"white",image:"images/loader_lg.gif",duration:50});document.body.appendChild(this._standby.domNode);this._standby.startup();}var self=this;window.setTimeout(function(){self._standby.show();},0);},hideLoading:function(){var self=this;window.setTimeout(function(){if(self._standby){self._standby.hide();}},1);}});});},"Sage/UI/nls/ConditionManager":function(){define("Sage/UI/nls/ConditionManager",["Sage/LanguageList","dojo/_base/lang"],function(_936,lang){var nls={root:{addimgalttext:"Add Condition",hideimgalttext:"Remove Condition",addrowlabel:"Lookup by:",hiderowlabel:"And:",srchBtnCaption:"Search",errorOperatorRequiresValue:"The operator requires a value",startingWith:"Starting With",endsWith:"Ends With",contains:"Contains",equalTo:"Equal to",notEqualTo:"Not Equal to",equalOrLessThan:"Equal or Less than",equalOrGreaterThan:"Equal or Greater than",lessThan:"Less than",greaterThan:"Greater than"}};return lang.mixin(_936,nls);});},"Sage/UI/Dashboard/nls/WidgetDefinition":function(){define("Sage/UI/Dashboard/nls/WidgetDefinition",["Sage/LanguageList","dojo/_base/lang"],function(_937,lang){var nls={root:{defaultWidgetText:"Edit Widget Settings",settingsText:"Settings",viewGroupText:"View Group",Bar_Chart:"Bar Chart",Column_Chart:"Column Chart",Group_List:"Group List",Pie_Chart:"Pie Chart",Funnel_Chart:"Funnel Chart",Line_Chart:"Line Chart",Default:"Default",Links:"Link",Recently_Viewed:"Recently Viewed",Todays_Activities:"Today's Activities",Today_s_Activities:"Today's Activities",Welcome:"Welcome",Closing_Opportunities:"Closing Opportunities",Quick_Actions:"Quick Actions",Do_You_Know___:"Do You Know...",All_Leads:"All Leads",My_Notes:"My Notes",Open_Opportunities:"Open Opportunities",My_Top_Opportunities:"My Top Opportunities",My_Pipeline:"My Pipeline",Recent_Lead_Creation_History:"Recent Lead Creation History",My_Activity_trend:"My Activity trend",My_Completed_Activities_by_Type:"My Completed Activities by Type",Active_Campaigns:"Active Campaigns",All_Open_Opportunities:"All Open Opportunities",Top_Opportunities:"Top Opportunities",Open_Defect_Distribution:"Open Defect Distribution",My_Dashboard:"My Dashboard",Sales:"Sales",Group_List_Description:"Displays a list of group records by entity. For example, a group of active campaigns.",Welcome_Description:"Displays an introduction to Sage SalesLogix with a link to the help topic Introducing Sage SalesLogix for Web.",Line_Chart_Description:"Displays data as a series of data points connected by a line. Useful when the data represents many groups or categories.",Bar_Chart_Description:"Displays data as a set of horizontal bars. Useful for comparing several sets of data.",Column_Chart_Description:"Displays data as a set of vertical bars grouped by category. Useful for showing data changes over a period of time or for illustrating comparisons among items.",Funnel_Chart_Description:"Displays data as progressive proportions in a funnel shape. The data is represented as portions of 100%, and there are no axes.",Pie_Chart_Description:"Displays data as proportions of the whole. Each value is calculated as a percentage of the total. This chart has no axes.",Recently_Viewed_Description:"Displays links to recently viewed records with an icon that identifies the type. For example, Account or Contact.",Todays_Activities_Description:"Displays links to your activities for today.",Links_Description:"Displays links you create. For example, to a detail view in Sage SalesLogix or to an external Web site."}};return lang.mixin(_937,nls);});},"Sage/UI/SummaryDetailPane":function(){define("Sage/UI/SummaryDetailPane",["Sage/UI/_DetailPane","Sage/_Templated","Sage/UI/SummaryContainer","dojo/_base/declare"],function(_938,_939,_93a,_93b){var _93c=_93b("Sage.UI.SummaryDetailPane",[_938,_939],{widgetsInTemplate:false,contentNode:null,paneContents:null,attributeMap:{"content":{node:"contentNode",type:"innerHTML"}},widgetTemplate:new Simplate(["<div class=\"EntityCard\">","<div dojoAttachPoint=\"contentNode\"></div>","</div>"]),clear:function(){if(this.paneContents){this.paneContents.destroyRecursive();}},_onSelected:function(_93d,row,grid){if(!this._configuration){return;}if(this.paneContents){this.paneContents.destroyRecursive();}var _93e=Sage.Services.getService("ClientGroupContext");var _93f=_93e.getContext();var _940=_93f.CurrentTableKeyField;if(_940&&this._configuration.requestConfiguration){if(this._configuration.keyField){_940=this._configuration.keyField;}var _941=this._getKeyValue(row,_940);var _942=Sage.Services.getService("SummaryViewDataManager");var pane=new _93a({id:"det_"+_941,templateLocation:this._configuration.templateLocation});pane.postProcessCallBack=this._configuration.postProcessCallBack;dojo.place(pane.domNode,this.contentNode,"only");this.paneContents=pane;_942.requestDataNoWait(_941,pane,this._configuration.requestConfiguration);}else{this.set("content","Please check the configuration for this panel.");}},_getKeyValue:function(data,_943){var _944=_943.split(".");if(_944.length<2){return data[_943];}else{return this._getKeyValue(data[_944[0]],_944[1]);}}});return _93c;});},"Sage/QuickForms/Design/Editors/ColumnBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/ColumnBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dojox/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/ColumnBasicPropertyEditor"],function(_945,lang,_946,_947,_948,_949,_94a,_94b,_94c,_94d,_94e){return _945("Sage.QuickForms.Design.Editors.ColumnBasicPropertyEditor",[_946,_94c,_94b],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.indexTooltipText %}\">","<label>{%= $.indexText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_index\" data-dojo-attach-event=\"onChange:_onIndexChange\" data-dojo-props=\"disabled:true\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.widthTooltipText %}\">","<label>{%= $.widthText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_width\" data-dojo-attach-event=\"onChange:_onWidthChange\" required=\"true\" data-dojo-props=\"constraints:{min:0}\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.sizeTypeTooltipText %}\">","<label>{%= $.sizeTypeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_sizeType\" data-dojo-attach-event=\"onChange:_onSizeTypeChange\">","{% for (var type in $.rowSizeTypeText) { %}","<span value=\"{%= type %}\">{%= $.rowSizeTypeText[type] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>"]),_index:null,_width:null,_sizeType:null,titleText:"Basic",appearanceText:"Appearance",indexText:"Index:",indexTooltipText:"Number of the row or column, beginning with zero.",widthText:"Width:",widthTooltipText:"Width of this column of controls.",sizeTypeText:"Size Type:",sizeTypeTooltipText:"Method of sizing: Absolute, AutoSize, or Percent.",rowSizeTypeText:{"Absolute":"Absolute","Percent":"Percent","AutoSize":"AutoSize"},constructor:function(){lang.mixin(this,_94e);},setup:function(){this.inherited(arguments);this._index.set("value",this._designer.get("index"));this._width.set("value",this._designer.get("width"));this._sizeType.set("value",this._designer.get("sizeType"));},_onWidthChange:function(_94f){if(this.isSuspended()){return;}this._designer.set("width",_94f);},_onSizeTypeChange:function(_950){if(this.isSuspended()){return;}this._designer.set("sizeType",_950);},_onIndexChange:function(_951){if(this.isSuspended()){return;}this._designer.set("index",_951);}});});},"Sage/Utility/File/AddURLAttachment":function(){define("Sage/Utility/File/AddURLAttachment",["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility/File","Sage/Utility","Sage/Utility/File/Attachment","Sage/UI/Dialogs","dojo/i18n","dojo/i18n!./nls/AddURLAttachment","dojo/_base/declare"],function(_952,_953,_954,_955,_956,_957,_958,_959,_95a,_95b,_95c,_95d,_95e,i18n,_95f,_960){var _961=_960("Sage.Utility.File.AddURLAttachment",[_952,_953],{descriptionText:"Description",urlText:"URL",titleText:"Add URL Attachment",okText:"OK",cancelText:"Cancel",requestFailedMsg:"The requested operation could not be completed, please try again later.",urlBlankMsg:"The URL or description property cannot be blank.",attachmentId:"",attachment:false,widgetsInTemplate:true,_bindingMgr:false,_store:false,id:"",widgetTemplate:new Simplate(["<div>","<div dojoType=\"dijit.Dialog\" id=\"addUrlAttachDialog\" title=\"{%= $.titleText %}\" dojoAttachPoint=\"_dialog\">","<div  class=\"attachment-properties-form\">","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\" >","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.urlText %}\" id=\"{%= $.id %}_tb_Url\" dojoAttachPoint=\"tb_Url\" ></div>","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.descriptionText %}\" name=\"description\" id=\"{%= $.id %}_tb_Description\" dojoAttachPoint=\"tb_Description\" maxlength=\"128\" ></div>","</div>","<div class=\"general-dialog-actions\">","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnOK\" name=\"_btnOK\" dojoAttachPoint=\"_btnOK\" dojoAttachEvent=\"onClick:_okClick\" >{%= $.okText %}</div>","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnCancel\" name=\"_btnCancel\" dojoAttachPoint=\"_btnCancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>","</div>","</div>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.Utility.File","AddURLAttachment"));this.inherited(arguments);},show:function(){this._dialog.show();if(!this._dialog._standby){_957.mixin(this._dialog,new _956());}this._loadData();},hide:function(){this.attachmentId="";this.attachment=false;if(this._dialog._standby){this._dialog.hideLoading();}this._dialog.hide();},_loadData:function(){if(this._dialog._standby){this._dialog.showLoading();}if(!this._store){this._store=new _958({include:[],resourceKind:"attachments",service:_959.getService("system")});}this._store.newItem({onComplete:this._receiveAttachment,onError:this._requestFail,scope:this});},_receiveAttachment:function(_962){if(this._dialog._standby){this._dialog.hideLoading();}this.attachment=_962;_95d.getKnownRelationships(this._receiveRelationships,this);},_ensureBindings:function(){if(!this._bindingMgr){this._bindingMgr=new _95a({defaultBinding:{boundEntity:this.attachment},items:[{boundWidget:this.tb_Description,entityProperty:"description"},{boundWidget:this.tb_Url,entityProperty:"url",onChange:dojo.hitch(this,this._urlChange)}]});}},_bind:function(){if(!this._bindingMgr.boundEntity||(this.attachment.$key!==this._bindingMgr.boundEntity.$key)){this._bindingMgr.setBoundEntity(this.attachment);}else{this._bindingMgr.bind();}if(this._dialog._standby){this._dialog.hideLoading();}},_receiveRelationships:function(rels){this.attachment=_957.mixin(this.attachment,rels);this.attachment.user={"$key":_95c.getClientContextByKey("userID")||""};this.attachment.attachDate=_95c.Convert.toIsoStringFromDate(new Date());this._ensureBindings();this._bind();},_urlChange:function(){var desc=this.tb_Description.get("value");if(!desc){var _963=this.tb_Url.get("value");if(_963){var r=new RegExp(/\.([\w]*)/);var _964=r.exec(_963);if(_964.length>1){this.tb_Description.set("value",_964[1]);}}}},_cancelClick:function(){this.hide();},_okClick:function(){if(this._dialog._standby){this._dialog.showLoading();}if((this.attachment.url==null)||(this.attachment.url.trim()=="")){_95e.showError(this.urlBlankMsg);return;}if((this.attachment.description==null)||(this.attachment.description.trim()=="")){_95e.showError(this.urlBlankMsg);return;}this._saveAndHide();},_saveAndHide:function(){if(this._dialog._standby){this._dialog.showLoading();}var self=this;window.setTimeout(function(){var _965=self.attachment;self._store.saveNewEntity(_965,function(_966){dojo.publish("/entity/attachment/create",_966);this.hide();},self._requestFail,self);},10);},_requestFail:function(req){_95e.showError(this.requestFailedMsg);this.hide();}});return _961;});},"Sage/QuickForms/Design/UserControlDesigner":function(){define("Sage/QuickForms/Design/UserControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/UserBasicPropertyEditor","./Editors/UserAdvancedPropertyEditor","dojo/i18n!./nls/UserControlDesigner"],function(_967,_968,lang,_969,_96a,_96b,_96c,_96d,_96e,_96f,_970){return _967("Sage.QuickForms.Design.UserControlDesigner",[_96a,_96b,_969,_96c],{designSupport:{visible:true},editors:[_96e,_96f,_96d],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"{%= $.fieldClass %}-icon\"></div>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-user",helpTopicName:"User_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXUser, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"User",constructor:function(){lang.mixin(this,_970);},_setCaptionAttr:function(_971){this.inherited(arguments);this.set("designCaption",_971);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_972){return (_972["ControlItemName"]=="LookupResultValue");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(_973){lang.setObject("ControlLabelPlacement",_973,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(_974){lang.setObject("Required",_974,this.entry);},_getLookupBindingModeAttr:function(){return lang.getObject("LookupBindingMode",false,this.entry);},_setLookupBindingModeAttr:function(_975){lang.setObject("LookupBindingMode",_975,this.entry);},setupFor:function(_976){this.inherited(arguments);this.set("lookupBindingMode","Object");this.set("required",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"LookupResultValue",DataItemName:_976.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:"null"}]);this.set("designBinding",_976.propertyPath||"");},startup:function(){this.inherited(arguments);var _977=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_977&&_977["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/UI/nls/SearchConditionWidget":function(){define("Sage/UI/nls/SearchConditionWidget",["Sage/LanguageList","dojo/_base/lang"],function(_978,lang){var nls={root:{trueText:"True",falseText:"False",networkText:"Network",remoteText:"Remote",webText:"Web",webViewerText:"Web Viewer",concurrentText:"Concurrent",retiredText:"Retired",templateText:"Template",addonText:"Addon",adminText:"Admin",userText:"User",teamText:"Team",departmentText:"Department",systemText:"System"}};return lang.mixin(_978,nls);});},"Sage/UI/SearchConditionWidget":function(){define("Sage/UI/SearchConditionWidget",["dojo/parser","dojo/i18n","dojo/_base/lang","dojo/has","dojo/_base/array","dijit/_Widget","dijit/form/Button","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/DateTextBox","Sage/_Templated","Sage/UI/ImageButton","Sage/UI/Controls/DropDownSelectPickList","Sage/UI/Controls/DropDownSelectUser","Sage/UI/Controls/Phone","dojo/i18n!./nls/SearchConditionWidget","dojo/_base/declare"],function(_979,i18n,lang,has,_97a,_97b,_97c,_97d,_97e,_97f,_980,_981,_982,_983,_984,_985,_986,_987){var _988=_987("Sage.UI.SearchConditionWidget",[_97b,_981],{widgetsInTemplate:true,isFirstCondition:false,conditionManager:false,label:"",defaultOperator:null,defaultField:null,defaultValue:null,id:"",_valueBox:null,visible:true,_loaded:false,trueText:"true",falseText:"false",networkText:"Network",remoteText:"Remote",webText:"Web",webViewerText:"Web Viewer",concurrentText:"Concurrent",retiredText:"Retired",templateText:"Template",addonText:"Addon",adminText:"Admin",userText:"User",teamText:"Team",departmentText:"Department",systemText:"System",propertyTypeHandler:{},widgetTemplate:new Simplate(["<div id=\"{%= $.id %}\" class=\"lookup-condition-row\" dojoAttachPoint=\"_conditionRow\">","<label class=\"slxlabel lookupLabel\">","{%= $.label %}","</label>","<select id=\"{%= $.id %}_fieldName\" name=\"{%= $.id %}_fieldName\" dojoAttachPoint=\"_fieldNameSelect\" data-dojo-type=\"dijit.form.Select\" style=\"width:150px\">","{% for (var i=0; i < $.conditionManager.fields.length;i++) { %}","<option id=\"{%= $.id %}_fieldOption{%= i %}\" value=\"{%= $.conditionManager.fields[i][$.conditionManager.fieldNameProperty] %}\">{%= $.conditionManager.fields[i][$.conditionManager.fieldDisplayNameProperty] %}</option>","{% } %}","</select>","<select id=\"{%= $.id %}_operators\" name=\"{%= $.id %}_operators\" dojoAttachPoint=\"_operatorSelect\" data-dojo-type=\"dijit.form.Select\" style=\"width:130px\">","</select>","<div style=\"display: inline;\" class=\"searchConditionInput\" dojoAttachPoint=\"_inputWidgetPlaceHolder\"></div>","<div class=\"conditionButton\">","{% if ( $.isFirstCondition ) { %}","<div id=\"{%= $.id %}-AddImageButton\" data-dojo-type=\"Sage.UI.ImageButton\" icon=\"{%= $.conditionManager.addimgurl %}\" tooltip=\"{%= $.conditionManager.addimgalttext %}\" dojoAttachPoint=\"_addConditionButton\" dojoAttachEvent=\"onClick:_addLookupCondition\"></div>","{% } else { %}","<div id=\"{%= $.id %}-RemoveImageButton\" data-dojo-type=\"Sage.UI.ImageButton\" icon=\"{%= $.conditionManager.hideimgurl %}\" tooltip=\"{%= $.conditionManager.hideimgalttext %}\" dojoAttachPoint=\"_removeConditionButton\" dojoAttachEvent=\"onClick:_removeLookupCondition\"></div>","{% } %}","</div>","</div>"]),constructor:function(_989){if(_986){this.trueText=_986.trueText;this.falseText=_986.falseText;this.networkText=_986.networkText;this.remoteText=_986.remoteText;this.webText=_986.webText;this.webViewerText=_986.webViewerText;this.concurrentText=_986.concurrentText;this.retiredText=_986.retiredText;this.templateText=_986.templateText;this.addonText=_986.addonText;this.adminText=_986.adminText;this.userText=_986.userText;this.teamText=_986.teamText;this.departmentText=_986.departmentText;this.systemText=_986.systemText;}this.registerTypeHandlers();},registerTypeHandlers:function(){this.propertyTypeHandler["default"]={getValue:function(){var _98a=this._valueBox.get("value");return _98a;},getTemplate:function(){return ["<input id=\"{%= $.id %}-TextValue\" data-dojo-type=\"dijit.form.TextBox\" dojoAttachPoint=\"_valueBox\" />"];}};this.propertyTypeHandler["System.Boolean"]={getValue:function(){var _98b;if(this._valueBox.value==="true"){_98b=true;}else{_98b=false;}return _98b;},getTemplate:function(){return ["<select id=\"{%= $.id %}-SelectValue\" class=\"dijitDropDown\" data-dojo-type=\"dijit.form.Select\" dojoAttachPoint=\"_valueBox\">","<option id=\"{%= $.id %}-BooleanOptionTrue\" value=\"true\">{%= $.trueText %}</option>","<option id=\"{%= $.id %}-BooleanOptionFalse\" value=\"false\">{%= $.falseText %}</option>","</select>"];}};this.propertyTypeHandler["Boolean"]={getValue:function(){var _98c;if(this._valueBox.value==="true"){_98c="T";}else{_98c="F";}return _98c;},getTemplate:function(){return lang.hitch(this,this.propertyTypeHandler["System.Boolean"].getTemplate)();}};this.propertyTypeHandler["SalesLogix.PickList"]={getValue:function(){return lang.hitch(this,this.propertyTypeHandler["default"].getValue)();},getTemplate:function(){return ["<select id=\"{%= $.id %}-PickValue\" class=\"dijitDropDown\" ","data-dojo-type=\"Sage.UI.Controls.DropDownSelectPickList\" ","dojoAttachPoint=\"_valueBox\" ","pickListName=\"{%= $.pickListName %}\" ","storeMode=\"{%= $.pickListStorageMode %}\" ","style=\"display: inline-block\"","/>"];}};this.propertyTypeHandler["System.DateTime"]={getValue:function(){var _98d=this._valueBox.value;return _98d;},getTemplate:function(){return ["<input data-dojo-type=\"dijit.form.DateTextBox\" id=\"{%= $.id %}-Date\" dojoAttachPoint=\"_valueBox\"","/>"];}};this.propertyTypeHandler["DateTime"]=this.propertyTypeHandler["System.DateTime"];this.propertyTypeHandler["Fixed"]={getValue:function(){var _98e=this._valueBox.get("value");return _98e;},getTemplate:function(){return ["<input id=\"{%= $.id %}-NumericValue\" data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_valueBox\" constraints=\"{ type: 'decimal' }\" value=\"0\" name=\"{%= $.id %}-NumberValue\" />"];}};this.propertyTypeHandler["Integer"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["Positive Integer"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["Percent"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["Currency"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["System.Int32"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["System.Double"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["System.Decimal"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["System.Int16"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["Phone"]={getValue:function(){var _98f=this._valueBox.get("unformattedValue");return _98f;},getTemplate:function(){return ["<input id=\"{%= $.id %}-PhoneValue\" data-dojo-type=\"Sage.UI.Controls.Phone\" shouldPublishMarkDirty=\"false\" dojoAttachPoint=\"_valueBox\" />"];}};this.propertyTypeHandler["User"]={getValue:function(){var _990=this._valueBox.get("value");return _990;},getTemplate:function(){return ["<select id=\"{%= $.id %}-UserValue\" ","data-dojo-type=\"Sage.UI.Controls.DropDownSelectUser\" ","dojoAttachPoint=\"_valueBox\" ","style=\"display: inline-block;\" ","></select>"];}};this.propertyTypeHandler["Sage.Entity.Interfaces.UserType"]={getValue:function(){var _991=parseInt(this._valueBox.get("value"),10);return _991;},getTemplate:function(){return ["<select id=\"{%= $.id %}-UserTypeValue\" class=\"dijitDropDown\" data-dojo-type=\"dijit.form.Select\" dojoAttachPoint=\"_valueBox\">","<option id=\"{%= $.id %}-UserTypeOption0\" value=\"0\">{%= $.networkText %}</option>","<option id=\"{%= $.id %}-UserTypeOption1\" value=\"1\">{%= $.remoteText %}</option>","<option id=\"{%= $.id %}-UserTypeOption2\" value=\"2\">{%= $.webText %}</option>","<option id=\"{%= $.id %}-UserTypeOption3\" value=\"3\">{%= $.webViewerText %}</option>","<option id=\"{%= $.id %}-UserTypeOption4\" value=\"4\">{%= $.concurrentText %}</option>","<option id=\"{%= $.id %}-UserTypeOption5\" value=\"5\">{%= $.retiredText %}</option>","<option id=\"{%= $.id %}-UserTypeOption6\" value=\"6\">{%= $.templateText %}</option>","<option id=\"{%= $.id %}-UserTypeOption7\" value=\"7\">{%= $.addonText %}</option>","<option id=\"{%= $.id %}-UserTypeOption8\" value=\"8\">{%= $.adminText %}</option>","</select>"];}};this.propertyTypeHandler["Sage.Entity.Interfaces.OwnerType"]={getValue:function(){var _992=parseInt(this._valueBox.get("value"),10);return _992;},getTemplate:function(){return ["<select id=\"{%= $.id %}-OwnerTypeValue\" class=\"dijitDropDown\" data-dojo-type=\"dijit.form.Select\" dojoAttachPoint=\"_valueBox\">","<option id=\"{%= $.id %}-OwnerTypeOption0\" value=\"1\">{%= $.userText %}</option>","<option id=\"{%= $.id %}-OwnerTypeOption1\" value=\"2\">{%= $.teamText %}</option>","<option id=\"{%= $.id %}-OwnerTypeOption2\" value=\"3\">{%= $.departmentText %}</option>","<option id=\"{%= $.id %}-OwnerTypeOption3\" value=\"0\">{%= $.systemText %}</option>","</select>"];}};this.propertyTypeHandler["Owner"]=this.propertyTypeHandler["default"];this.propertyTypeHandler["None"]=this.propertyTypeHandler["default"];this.propertyTypeHandler["System.String"]=this.propertyTypeHandler["default"];this.propertyTypeHandler["defaultOperators"]=this.propertyTypeHandler["default"];},postCreate:function(){this.refreshDefaults();if(!this.visible){dojo.style(this._conditionRow,"display","none");}this._fieldNameSelect.on("change",lang.hitch(this,this._fieldChanged));this.inherited(arguments);},getCondition:function(){var _993=false;if(this.isValidCondition()){_993={fieldname:this._fieldNameSelect.get("value"),operator:this._operatorSelect.get("value"),val:this._getFieldValue()};}return _993;},isValidCondition:function(){var val=this._getFieldValue(),_994=false;if(typeof val==="string"){_994=(val.trim()!=="");}else{_994=(val!==null&&val!==undefined);}return _994;},_getFieldValue:function(){var _995=this._fieldNameSelect.get("value"),_996=this._operatorSelect.get("value"),_997=this._getField(_995),_998,_999,_99a;if(_997){_999=this._getFieldPropertyTypeValue(_997);_99a=this.propertyTypeHandler[_999];if(typeof _99a==="undefined"){_99a=this.propertyTypeHandler["default"];}_998=lang.hitch(this,_99a.getValue)();}return _998;},_renderFieldTemplates:function(){var _99b,_99c,_99d,_99e,val=this._fieldNameSelect.get("value"),_99f=this._getField(val),_9a0,temp,_9a1;if(_99f){_9a0=this._getFieldPropertyTypeValue(_99f);_9a1=this.propertyTypeHandler[_9a0];if(typeof _9a1==="undefined"){_9a1=this.propertyTypeHandler["default"];}_99c=lang.hitch(this,_9a1.getTemplate)();_99d=new Simplate(_99c);temp={};dojo.mixin(temp,this);dojo.mixin(temp,{pickListName:_99f.pickListName});dojo.mixin(temp,{pickListStorageMode:_99f.pickListStorageMode});_99e=_99d.apply(temp);if(_99e){dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(wid){wid.destroy();},this);this._inputWidgetPlaceHolder.innerHTML="";dojo.place(_99e,this._inputWidgetPlaceHolder);_979.parse(this._inputWidgetPlaceHolder);dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(wid){wid.startup();this._valueBox=wid;dojo.connect(this._valueBox,"onKeyDown",this,"_onKeyDown");},this);}}},uninitialize:function(){if(this._inputWidgetPlaceHolder){dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(wid){wid.destroy();},this);}this.inherited(arguments);},_fieldChanged:function(_9a2){var val=this._fieldNameSelect.get("value"),_9a3=this._getField(val),_9a4,_9a5,len,i;if(_9a3){this._renderFieldTemplates();_9a4=this.conditionManager.getOperatorsByField(_9a3);if(_9a4){_9a5=this._operatorSelect;len=_9a5.options.length;for(i=len-1;i>=0;i--){_9a5.removeOption(i);}for(i=0;i<_9a4.length;i++){_9a4[i].selected=false;}_9a5.addOption(_9a4);}this._setToDefaultOperator();this._setToDefaultValue();}},_onKeyDown:function(_9a6){if(_9a6.keyCode===13){this.conditionManager._doSearch();}},_getField:function(_9a7){if(this.conditionManager.fieldsHash.hasOwnProperty(_9a7)){return this.conditionManager.fieldsHash[_9a7];}return false;},_getFieldPropertyTypeValue:function(_9a8){if(_9a8&&_9a8.hasOwnProperty(this.conditionManager.fieldTypeProperty)){return _9a8[this.conditionManager.fieldTypeProperty];}return null;},_addLookupCondition:function(){this.onAddLookupCondition();dojo.publish("onAddLookupCondition",this);},onAddLookupCondition:function(){},_removeLookupCondition:function(){this.onRemoveLookupCondition(this);dojo.publish("onRemoveLookupCondition",this);},onRemoveLookupCondition:function(_9a9){},_setToDefaultValue:function(){if(!this._isOnDefaultField()){return;}if(this.defaultValue){this._valueBox.set("value",this.defaultValue);}},_setToDefaultField:function(){var i,_9aa;if(this.defaultField){_9aa=this._fieldNameSelect.getOptions();for(i=0;i<_9aa.length;i++){if(_9aa[i].value===this.defaultField){this._fieldNameSelect.set("value",_9aa[i].value);break;}}}},_setToDefaultOperator:function(){var _9ab,j;if(!this._isOnDefaultField()){return;}if(this.defaultOperator&&typeof this.defaultOperator==="string"){_9ab=this._operatorSelect.getOptions();for(j=0;j<_9ab.length;j++){if(_9ab[j].label===this.defaultOperator||_9ab[j].value===this.defaultOperator){this._operatorSelect.set("value",_9ab[j].value);break;}}}},_isOnDefaultField:function(){var _9ac=false,_9ad;if(this.defaultField){_9ad=this._fieldNameSelect.get("value");_9ac=(_9ad===this.defaultField);}else{_9ac=true;}return _9ac;},refreshDefaults:function(){this._setToDefaultField();this._fieldChanged();}});return _988;});},"Sage/MainView/ActivityMgr/FilterConfigurationProvider":function(){define("Sage/MainView/ActivityMgr/FilterConfigurationProvider",["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/Utility","Sage/Utility/Activity","Sage/Data/SDataStore","Sage/Services/ActivityService","Sage/MainView/ActivityMgr/ActivityGroupContextService","dijit/registry","dojo/_base/declare","Sage/Utility/Filters","dojo/_base/lang","dojo/json"],function(_9ae,_9af,_9b0,_9b1,_9b2,_9b3,_9b4,_9b5,_9b6,_9b7,lang,json){var _9b8=_9b6("Sage.MainView.ActivityMgr.FilterConfigurationProvider",[_9af,_9ae],{_configuration:null,_hasLayoutConfiguration:false,_hasFilterHiddenConfiguration:false,_currentUserId:false,serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"},"systemDataService":{type:"sdata",name:"system"}},constructor:function(_9b9){this.inherited(arguments);if(this.groupContextService.declaredClass!=="Sage.MainView.ActivityMgr.ActivityGroupContextService"){Sage.Services.removeService("ClientGroupContext");this.groupContextService=new _9b4();Sage.Services.addService("ClientGroupContext",this.groupContextService);}var _9ba=Sage.Services.getService("ClientContextService");if(_9ba){if(_9ba.containsKey("userID")){this._currentUserId=_9ba.getValue("userID");}}this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));},_onGroupContextChanged:function(){this.onConfigurationChange();},onConfigurationChange:function(){},_createConfiguration:function(_9bb,_9bc){var _9bd=this.groupContextService.getCurrentListConfig();this._configuration=_9bd.getFilterConfig(this.metaDataService,_9bb,_9bc);if(!this._configuration){this._configuration={};}this._configuration.getFilterManager=function(){var _9be=_9b5.byId("list");return _9be&&_9be.get("filterManager");};this._hasLayoutConfiguration=true;},requestConfiguration:function(_9bf){this._configuration={};this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;this._onRequestConfigurationSuccess(_9bf,null);this._getHiddenFilters(_9bf);},_onRequestConfigurationSuccess:function(_9c0,_9c1){this._createConfiguration(_9c1,_9c0);this._callOptionsSuccess(_9c0);},_onRequestConfigurationFailure:function(_9c2,_9c3){if(_9c2.failure){_9c2.failure.call(_9c2.scope||this,_9c3,_9c2,this);}},getFilterFormatter:function(_9c4){if(_9c4){if(_9c4.filterName==="Duration"){return _9b1.formatDuration;}}return false;},ModifyFilterQuery:function(_9c5,_9c6){var _9c7=false;if(_9c6){_9c7=true;}if(_9c5.propertyName==="Activity.Duration"){if(_9c7){_9c6="("+_9c6+") and (Activity.Timeless ne true)";}else{_9c6="(Activity.Timeless ne true)";}}else{if(_9c5.propertyName==="Duration"){if(_9c7){_9c6="("+_9c6+") and (Timeless ne true)";}else{_9c6="(Timeless ne true)";}}}return _9c6;},_getHiddenFilters:function(_9c8){var key=this._getHiddenFiltersKey();if(key){_9b7.getHiddenFilters(key,lang.hitch(this,this._onHiddenFiltersFetchComplete,_9c8||{}),function(err){console.error(err);});}},_getHiddenFiltersKey:function(){var key=_9b7.getHiddenFiltersKey();return key;},_onHiddenFiltersFetchComplete:function(_9c9,_9ca){if(_9ca&&_9ca.response&&_9ca.response.value){this._configuration._hiddenFilters=json.parse(_9ca.response.value);if(this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array){this._configuration._hiddenFilters={};}}this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey();this._hasFilterHiddenConfiguration=true;this._callOptionsSuccess(_9c9);},_callOptionsSuccess:function(_9cb){if(!this._hasLayoutConfiguration||!this._hasFilterHiddenConfiguration){return;}if(_9cb.success){_9cb.success.call(_9cb.scope||this,this._configuration,_9cb,this);this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;}}});return _9b8;});},"Sage/QuickForms/Design/Editors/nls/GenericBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/GenericBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_9cc,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",alignmentText:{left:"Left",center:"Center",right:"Right"}}};return lang.mixin(_9cc,nls);});},"Sage/UI/Columns/RadioGroup":function(){define("Sage/UI/Columns/RadioGroup",["dojox/grid/cells/_base","dojo/_base/declare"],function(_9cd,_9ce){var _9cf=_9ce("Sage.UI.Columns.RadioGroup",dojox.grid.cells.AlwaysEdit,{options:null,values:null,labels:[],constructor:function(_9d0){this.values=this.values||this.options;if(this.labels&&this.labels.length>0){var _9d1=["<table style=\"width:100%\"><tr>"];for(var i=0;i<this.labels.length;i++){_9d1.push("<td style=\"text-align: center;\">"+this.labels[i]+"</td>");}this.name=_9d1.join("");}},formatEditing:function(_9d2,_9d3){var _9d4=["<table style=\"width:100%\"><tr>"];for(var i=0;i<this.values.length;i++){_9d4.push(["<td style=\"text-align: center;\">","<input type=\"radio\""," id=\""+this.values[i]+"_"+_9d3+"\""," name=\""+this.field+"_"+_9d3+"\""," value=\""+this.values[i]+"\"",_9d2===this.values[i]?" checked=\"checked\" />":" />"].join(""));}_9d4.push("</tr></table>");return _9d4.join("");},doclick:function(e){if(e.target.tagName==="INPUT"){var _9d5=this.grid.edit;_9d5.applyCellEdit(e.target.value,this,e.rowIndex);}}});return _9cf;});},"Sage/UI/Columns/Cell":function(){define("Sage/UI/Columns/Cell",["dojox/grid/cells","dojox/grid/cells/dijit","dojo/_base/declare"],function(_9d6,_9d7,_9d8){var _9d9=_9d8("Sage.UI.Columns.Cell",_9d6._Widget,{formatNode:function(_9da,_9db,_9dc){if(!this.widgetClass){return _9db;}var _9dd=dijit.byId(this._getControlId());if(!_9dd){this.widget=this.createWidget.apply(this,arguments);}else{this.widget=_9dd;if(_9dd.value!==_9db||this.widget.focusNode.value!==_9db){if(this.widget.focusNode.set){this.widget.focusNode.set("value",_9db);}else{this.widget.set("value",_9db);}}this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(_9dc);this.grid.scroller.rowHeightChanged(_9dc,true);this.focus();return undefined;},setCurrentItems:function(){this.editInfo=this.grid.edit.info;this.item=this.grid.getItem(this.editInfo.rowIndex);},_getControlId:function(){this.setCurrentItems();return [this.item.$key,this.editInfo.cell.field,this.index].join("_");}});return _9d9;});},"Sage/UI/Columns/UserType":function(){define("Sage/UI/Columns/UserType",["Sage/Utility","dojo/i18n!../nls/UserType","dojo/_base/declare"],function(_9de,_9df,_9e0){var _9e1=_9e0("Sage.UI.Columns.UserType",dojox.grid.cells._Base,{constructor:function(){dojo.mixin(this,_9df);this.inherited(arguments);},formatter:function(val,_9e2){var _9e3={"W":this.administratorText,"P":this.templateText,"M":this.remoteText,"T":this.webOnlyText,"R":this.retiredText,"C":this.concurrentText,"V":this.webViewerText,"N":this.networkText,"A":this.addOnUserText};return (_9e3[val]?_9de.htmlEncode(_9e3[val]):val);}});return _9e1;});},"Sage/QuickForms/Design/nls/DataSourcePanel":function(){define("Sage/QuickForms/Design/nls/DataSourcePanel",["Sage/LanguageList","dojo/_base/lang"],function(_9e4,lang){var nls={root:{loadingText:"Loading..."}};return lang.mixin(_9e4,nls);});},"Sage/TaskPane/CommonTasksTasklet":function(){define("Sage/TaskPane/CommonTasksTasklet",["dijit/Menu","dijit/Dialog","dijit/form/Button","dijit/form/CheckBox","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/UI/MenuItem","Sage/UI/Dialogs","Sage/Utility/Email","Sage/Groups/GroupManager","dojo/_base/xhr","dojo/_base/lang","dojo/_base/declare","dojo/string","dojo/i18n!./nls/CommonTasksTasklet","dojo/dom-class"],function(_9e5,_9e6,_9e7,_9e8,_9e9,_9ea,_9eb,_9ec,_9ed,xhr,lang,_9ee,_9ef,_9f0,_9f1){var _9f2=_9ee("Sage.TaskPane.CommonTasksTasklet",_9e9,{constructor:function(args){lang.mixin(this,_9f0);},removeCurrentFromGroup:function(){this.getCurrentEntity();var svc=Sage.Services.getService("ClientGroupContext"),_9f3,_9f4;if(svc!==null){_9f3=svc.getContext();_9f4=_9f3.FirstEntityID;if(_9f4===this.currentEntityId){_9f4=_9f3.NextEntityID;}if(_9f4!==""){if(this.contextService){this.contextService.navigateSLXGroupEntity(_9f4,this.currentEntityId);}}Sage.Groups.GroupManager.removeIds(_9f3.CurrentGroupID,_9f3.CurrentName,_9f3.CurrentFamily,[this.currentEntityId],function(){__doPostBack("MainContent","");},function(err){console.error(err);},this);}},removeSelectionsFromGroup:function(){_9ed.removeSelectionsFromGroup();},saveSelectionsAsNewGroup:function(){_9ed.saveSelectionsAsNewGroup();},showAdHocList:function(e){var svc=Sage.Services.getService("ClientGroupContext"),i,item,_9f5;if(typeof (GroupAdHocListMenu)==="undefined"){GroupAdHocListMenu=new _9e5({id:"GroupAdHocList"});GroupAdHocListMenu.addChild(new _9ea({label:this.loadingText}));}svc.getAdHocGroupList(function(list){GroupAdHocListMenu.destroyDescendants();for(i=0;i<list.length;i++){item=list[i];GroupAdHocListMenu.addChild(new _9ea({label:item.$descriptor||item.name,ref:_9ef.substitute("javascript:Sage.Groups.GroupManager.addSelectionsToGroup('${0}')",[item.$key]),onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;dijit.popup.close(GroupAdHocListMenu);}catch(err){}}}}));}GroupAdHocListMenu.on("blur",function(){dijit.popup.close(GroupAdHocListMenu);});GroupAdHocListMenu.startup();},this);if(!e.pageX&&!e.pageY){e.pageX=e.clientX+document.body.scrollLeft;e.pageY=e.clientY+document.body.scrollTop;}dijit.popup.open({popup:GroupAdHocListMenu,x:e.pageX||250,y:e.pageY||250});_9f5=GroupAdHocListMenu.domNode.parentNode;if(_9f5&&!_9f1.contains(_9f5,"commonTaskAdHoc")){_9f1.add(_9f5,"commonTaskAdHoc");}},exportToExcel:function(){this.getCurrentEntity();this.prepareSelectedRecords(this.fileFormatCheck(this));},fileFormatCheck:function(self){return function(){var _9f6=cookie.getCookie("formatIsSaved"),_9f7=cookie.getCookie("format");if(_9f6==="true"&&_9f7.length>0){dojo.byId([self.clientId,"_tskExportToExcel"].join("")).click();}else{self.promptForFileFormat();}};},promptForFileFormat:function(){var self=this,_9f8="promptForFileFormat-Dialog",_9f9=dijit.byId(_9f8);if(!_9f9){_9f9=new _9e6({id:_9f8,title:self.exportToFile_DialogTitle});}_9f9.attr("content",this.getPromptForFileFormatTemplate().apply({dialogId:_9f8}));_9f9.show();},getPromptForFileFormatTemplate:function(){return new Simplate(["<div>","<label style=\"padding-left:5px\">{%= commonTaskActions.selectFileFormat %}</label>","<br />","<div style=\"padding-left:10px; padding-top:7px\">","<input id=\"radioCSV\" name=\"format_type\" type=\"radio\" data-dojo-type=\"dijit.form.RadioButton\" value=\"csv\" checked=\"true\" />{%= commonTaskActions.exportToFile_OptionCSV %}","</div>","<div style=\"padding-left:10px; padding-top:7px\">","<input id=\"radioTab\" name=\"format_type\" type=\"radio\" data-dojo-type=\"dijit.form.RadioButton\" value=\"tab\" />{%= commonTaskActions.exportToFile_OptionTab %}","</div>","<div style=\"padding-left:11px; padding-top:7px\">","<input id=\"exportFormatSaved\" dojoAttachPoint=\"exportFormatSaved\" data-dojo-type=\"dijit.form.CheckBox\" value=\"true\" />{%= commonTaskActions.exportToFile_OptionSaveFormat %}","</div>","<div style=\"padding-right:5px; padding-bottom:5px; text-align:right;\">","<button data-dojo-type=\"dijit.form.Button\" type=\"submit\" class=\"ok-button\" onClick=\"commonTaskActions.onExportToFileClick();\">{%= commonTaskActions.exportToFile_OK %}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" class=\"cancel-button\" onClick=\"dijit.byId('promptForFileFormat-Dialog').hide();\">{%= commonTaskActions.exportToFile_Cancel %}</button>","</div>","</div>"]);},onExportToFileClick:function(){var _9fa=dojo.byId("exportFormatSaved");var _9fb;if(_9fa!==undefined&&_9fa.checked){document.cookie="formatIsSaved=true; expires=1/01/2020";}if(dojo.byId("radioCSV").checked){_9fb="csv";}else{_9fb="tab";}document.cookie="format="+_9fb+"; expires=1/01/2020";dojo.byId([this.clientId,"_tskExportToExcel"].join("")).click();},emailSend:function(){this.getCurrentEntity();var url="slxdata.ashx/slx/crm/-/namedqueries?columnaliases=email&format=json&hql=";var sHql=this.getURL(this.currentEntityTableName);if(sHql===null){_9eb.showError(this.noPrimaryEmail);return;}url=url+sHql;var self=this;dojo.xhrGet({url:url,handleAs:"json",load:function(data){self.sendEmail(data);},error:function(_9fc){_9eb.showError(_9fc.StatusText);}});},getURL:function(_9fd){var url=null;switch(_9fd){case "CONTACT":url=dojo.string.substitute("select con.Email from Contact con where con.id like '${0}'",[this.currentEntityId]);break;case "ACCOUNT":url=dojo.string.substitute("select con.Email from Contact as con where con.Account.id like '${0}' and con.IsPrimary like 'T'",[this.currentEntityId]);break;case "OPPORTUNITY":url=dojo.string.substitute("select con.Email from Opportunity as opp left join opp.Contacts as oppCon left join oppCon.Contact as con where opp.id like '${0}' and oppCon.IsPrimary like 'T'",[this.currentEntityId]);break;case "LEAD":url=dojo.string.substitute("select le.Email from Lead le where le.id like '${0}'",[this.currentEntityId]);break;case "CAMPAIGN":url=dojo.string.substitute("select ufo.Email from Campaign as cam left join cam.AccountManager as usr left join usr.UserInfo as ufo where cam.id like '${0}'",[this.currentEntityId]);break;case "TICKET":url=dojo.string.substitute("select ufo.Email from User as usr left join usr.UserInfo as ufo where usr.DefaultOwner in  (select own.id from Ticket as tic left join tic.AssignedTo as own where tic.id like '${0}')",[this.currentEntityId]);break;case "DEFECT":url=dojo.string.substitute("select ufo.Email from User as usr left join usr.UserInfo as ufo where usr.DefaultOwner in (select own.id from Defect as def left join def.AssignedTo as own where def.id like '${0}')",[this.currentEntityId]);break;case "CONTRACT":url=dojo.string.substitute("select con.Email from Contract as crt left join crt.Contact as con where crt.id like '${0}'",[this.currentEntityId]);break;case "SALESORDER":url=dojo.string.substitute("select so.ShippingContact.Email from SalesOrder as so where so.Id eq '${0}'",[this.currentEntityId]);break;}return url;},sendEmail:function(_9fe){if(_9fe.count>0){var _9ff=_9fe.items[0].email;if(_9ff){_9ff="mailto:"+_9ff;document.location.href=_9ff;return;}}_9eb.showError(this.noPrimaryEmail);},copyUser:function(){var _a00=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyUser",selectionInfoKey:_a00});},copyUserProfile:function(){var _a01=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyUserProfile",selectionInfoKey:_a01});},deleteUsers:function(){var _a02=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"DeleteUsers",selectionInfoKey:_a02});},addToTeam:function(){var _a03=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"AddToTeam",selectionInfoKey:_a03});},removeFromTeam:function(){var _a04=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"RemoveFromTeam",selectionInfoKey:_a04});},removeFromAllTeams:function(){var _a05=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"RemoveFromAllTeams",selectionInfoKey:_a05});},assignRole:function(){var _a06=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"AssignRole",selectionInfoKey:_a06});},replaceTeamMember:function(){var _a07=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"ReplaceTeamMember",selectionInfoKey:_a07});},deleteTeam:function(){var _a08=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"DeleteTeam",selectionInfoKey:_a08});},deleteDepartment:function(){var _a09=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"DeleteDepartment",selectionInfoKey:_a09});},copyTeam:function(){var _a0a=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyTeam",selectionInfoKey:_a0a});},copyDepartment:function(){var _a0b=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyDepartment",selectionInfoKey:_a0b});},showDetailReport:function(){require(["Sage/Reporting/Service"],function(_a0c){var _a0d=Sage.Services.getService("ReportingService");if(_a0d){_a0d.showDefaultReport();}});},writeEmailToGroupSelection:function(){_9ec.writeEmailToGroupSelection();}});return _9f2;});},"Sage/QuickForms/Design/Editors/ComboBoxAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/ComboBoxAdvancedPropertyEditor",["dojo/string","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dojo/store/Memory","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/ComboBoxAdvancedPropertyEditor"],function(_a0e,_a0f,lang,_a10,_a11,_a12,_a13,_a14,_a15,_a16,_a17,_a18,_a19,_a1a){return _a0f("Sage.QuickForms.Design.Editors.ComboBoxAdvancedPropertyEditor",[_a11,_a18,_a17],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.itemGroupText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.dataSourceTooltipText %}\">","<label>{%= $.dataSourceText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_dataSource\" data-dojo-attach-event=\"onChange:_onDataSourceChange\" data-dojo-props=\"disabled:true\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.itemsTooltipText %}\">","<label>{%= $.itemsText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_items\" data-dojo-attach-event=\"onChange:_onItemsChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.textFieldTooltipText %}\">","<label>{%= $.textFieldText %}</label>","<div data-dojo-type=\"dijit.form.ComboBox\" data-dojo-attach-point=\"_textField\" data-dojo-attach-event=\"onChange:_onTextFieldChange\" data-dojo-props=\"disabled:true\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.valueFieldTooltipText %}\">","<label>{%= $.valueFieldText %}</label>","<div data-dojo-type=\"dijit.form.ComboBox\" data-dojo-attach-point=\"_valueField\" data-dojo-attach-event=\"onChange:_onValueFieldChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlId:null,_controlLabelPlacement:null,_controlType:null,_dataSource:null,_defaultDataBinding:null,_enabled:null,_items:null,_textField:null,_valueField:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",itemGroupText:"Items",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",dataSourceText:"Data Source:",dataSourceTooltipText:"Source of the data for this control such as another control or an entity.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",itemsText:"Items:",itemsTooltipText:"Values the user can select.",textFieldText:"Text Field:",textFieldTooltipText:"The name of the data source field used to populate the visible text portion of the list items.",valueFieldText:"Value Field:",valueFieldTooltipText:"The name of the data source field used to populate the value portion of the list items.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},hasItemsText:"Set",noItemsText:"Not Set",constructor:function(){lang.mixin(this,_a1a);},setup:function(){this.inherited(arguments);this._controlId.set("value",this._designer.get("controlId"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._controlType.set("value",this._designer.get("controlName"));this._enabled.set("value",this._designer.get("enabled"));this._items.set("value",this._designer.get("hasItems")?this.hasItemsText:this.noItemsText);this._visible.set("value",this._designer.get("visible"));var _a1b=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_a1b&&_a1b["DataItemName"])||"");this.setDataSources();this._dataSource.set("value",this._designer.get("dataSource"));this._textField.set("value",this._designer.get("textField"));this._valueField.set("value",this._designer.get("valueField"));},setDataSources:function(){var _a1c=this.getDataSources(),_a1d=this._dataSource;_a1d.removeOption(_a1d.getOptions());_a1d.addOption({label:"",value:"_-1"});_a1d.addOption({label:"MainEntity",value:"MainEntity"});_a10.forEach(_a1c,function(_a1e){this.addOption(lang.mixin({label:_a1e.get("controlId"),value:_a1e.get("controlId")},_a1e.entry));},_a1d);},getDataSources:function(){var _a1f=this._designer.get("form").get("controls"),_a20=[];_a10.forEach(_a1f,function(_a21){if(_a21 instanceof Sage.QuickForms.Design.DataSourceDesigner){this.push(_a21);}},_a20);return _a20;},getSelectedItem:function(_a22){var _a23=this._dataSource;for(var i=0;i<_a23.options.length;i++){var item=_a23.options[i];if(item.value===_a22){return item||null;}}return null;},updateFieldStore:function(_a24,_a25,_a26){_a24.store.destroy&&_a24.store.destroy();_a24.set("store",_a25);_a24.set("searchAttr",_a26);_a24.set("disabled",false);},createSDataPropertyStore:function(_a27){return new Sage.Data.SDataStore({service:Sage.Data.SDataServiceRegistry.getService("metadata"),collection:"$resources.0.properties.$resources",resourceKind:"entities",resourcePredicate:_a0e.substitute("'${0}'",[_a27])});},_onControlIdChange:function(_a28){},_onControlLabelPlacementChange:function(_a29){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",_a29);},_onControlTypeChange:function(_a2a){},_onDefaultDataBindingChange:function(_a2b){},_onDataSourceChange:function(_a2c){},_onEnabledChange:function(_a2d){if(this.isSuspended()){return;}this._designer.set("enabled",_a2d);},_onItemsChange:function(_a2e){},_onTextFieldChange:function(_a2f){if(this.isSuspended()){return;}this._designer.set("textField",_a2f);},_onValueFieldChange:function(_a30){if(this.isSuspended()){return;}this._designer.set("valueField",_a30);},_onVisibleChange:function(_a31){if(this.isSuspended()){return;}this._designer.set("visible",_a31);}});});},"Sage/UI/SLXPreviewGrid/Filter/Text":function(){define("Sage/UI/SLXPreviewGrid/Filter/Text",["dijit/form/TextBox","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/_base/declare"],function(_a32,_a33,_a34){var text=_a34("Sage.UI.SLXPreviewGrid.Filter.Text",[_a32,_a33],{postMixInProperties:function(){this.type="text";this.inherited(arguments);}});return text;});},"Sage/UI/nls/GroupsTitlePaneConfigProvider":function(){define("Sage/UI/nls/GroupsTitlePaneConfigProvider",["Sage/LanguageList","dojo/_base/lang"],function(_a35,lang){var nls={root:{groupText:"Groups",addGroupButtonTooltip:"Add Group",groupButtonTooltip:"Manage Groups",lookupText:"Lookup",lookupResultsText:"Lookup Results",groupColumnText:"Group",visibleColumnText:"Visible"}};return lang.mixin(_a35,nls);});},"Sage/MainView/ActivityMgr/EditEventEditor":function(){define("Sage/MainView/ActivityMgr/EditEventEditor",["dijit/_Widget","Sage/_Templated","dijit/Toolbar","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/Textarea","dijit/form/ComboBox","Sage/UI/TextBox","Sage/UI/Controls/DateTimePicker","Sage/UI/SDataLookup","dojox/layout/TableContainer","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","dijit/Dialog","Sage/UI/Dialogs","Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/_base/declare","dojo/i18n!./nls/EditEventEditor"],function(_a36,_a37,_a38,_a39,_a3a,_a3b,_a3c,_a3d,_a3e,_a3f,_a40,_a41,_a42,_a43,_a44,_a45,_a46,_a47,_a48,_a49,_a4a){var _a4b=_a49("Sage.MainView.ActivityMgr.EditEventEditor",[_a36,_a37],{eventId:null,mode:false,_dialog:false,_currentUserId:null,_eventService:false,_eventData:false,_eventStore:false,_bindingMgr:false,_eventChangeConnection:false,lup_User:false,eventDefaultValues:{},eventConnections:[],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"eventDialog\" title=\"\" dojoAttachPoint=\"_dialog\" >","<div class=\"event-dialog\">","<div data-dojo-type=\"dijit.layout.ContentPane\" id=\"{%= $.id%}_cp_event\" title=\"\" dojoAttachPoint=\"cp_Event\" class=\"tabContent\">","<div data-dojo-type=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"140\">","<div data-dojo-type=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" label=\"{%= $.lblStartDateText %}\" id=\"{%= $.id%}_tb_StartDate\" name=\"tb_StartDateName\" dojoAttachPoint=\"tb_StartDate\" displayDate=\"true\" displayTime=\"false\"  ></div>","<div data-dojo-type=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" label=\"{%= $.lblEndDateText %}\" id=\"{%= $.id%}_tb_EndDate\" name=\"tb_EndDateName\" dojoAttachPoint=\"tb_EndDate\" displayDate=\"true\" displayTime=\"false\" ></div>","<select  dojoAttachPoint=\"tb_DayType\" data-dojo-type=\"dijit.form.ComboBox\" required=\"false\" name=\"tb_DayType\"  label=\"{%= $.lblDayTypeText %}\" id=\"{%= $.id%}_tb_DayType\" >","<option value=\"Active\" >{%=$.eventTypeActiveText %}</option>","<option value=\"Business Trip\" >{%=$.eventTypeBusinessTripText %}</option>","<option value=\"Conference\" >{%=$.eventTypeConferenceText%}</option>","<option value=\"Holiday\" selected=\"selected\" >{%=$.eventTypeHolidayText%}</option>","<option value=\"Off\" >{%=$.eventTypeOffText%}</option>","<option value=\"Trade Show\" >{%=$.eventTypeTradeShowText%}</option>","<option value=\"Unavailable\" >{%=$.eventTypeUnavailableText%}</option>","<option value=\"Vacation\" >{%=$.eventTypeVacationText%}</option>","</select>","<input data-dojo-type=\"dijit.form.TextBox\" id=\"{%= $.id %}_tb_Location\" label=\"{%= $.lblLocationText %}\" dojoAttachPoint=\"tb_Location\" maxLength=\"255\" />","<textarea data-dojo-type=\"dijit.form.SimpleTextarea\" label=\"{%= $.lblDescriptionText %}\" id=\"{%= $.id%}_tb_Description\" name=\"tb_Description\" dojoAttachPoint=\"tb_Description\" rows=\"4\" cols=\"1\"  maxLength=\"128\"  ></textarea>","<div class=\"event-dialog remove-padding\">","<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.lblUserText %}\" dojoAttachPoint=\"container_UserLup\" class=\"remove-padding lookup-container\"></div>","</div>","</div>","</div>","<div class=\"button-bar alignright\">","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.btnOkayText %}</div>","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $. btnCancelText %}</div>","</div>","</div>","</div>","</div>"]),constructor:function(){dojo.mixin(this,_a4a);this._eventService=_a46.getSDataService("dynamic");this._setEventStore();this._currentUserId=_a45.getClientContextByKey("userID")||"";},destroy:function(){if(this._eventChangeConnection){dojo.disconnect(this._eventChangeConnection);this._eventChangeConnection=false;}if(this._bindingMgr){this._bindingMgr.destroy();}if(this.lup_User){this.lup_User.destroy();}this.inherited(arguments);},show:function(_a4c){if(!this.lup_User){this._createUserLookup();}if(this.mode==="New"){this._dialog.set("title",this.titleScheduleText);}else{this._dialog.set("title",this.titleEditText);}this.eventDefaultValues=_a4c||{};this._loadData();this._dialog.set("refocus",false);this._dialog.show();if(!this._dialog.helpIcon){_a48.mixin(this._dialog,new _a47());this._dialog.createHelpIconByTopic("addevent");}},hide:function(){this._dialog.hide();},resize:function(){},_setModeAttr:function(mode){this.mode=mode;if(mode.indexOf("New")===0){this.mode="New";this._eventData=false;}},_setEventIdAttr:function(_a4d){if(this.eventId!==_a4d){this.eventId=_a4d;this._eventData=false;}},_getEventIdAttr:function(){return this.eventId;},_setEventStore:function(){if(!this._eventStore){this._eventStore=new _a41({include:[],select:["StartDate","EndDate","Description","Type","Location","UserId"],resourceKind:"events",service:this._eventService});}},onChange:function(_a4e,_a4f,_a50,_a51){},setMode:function(mode){this._mode=mode;},_loadData:function(){this._eventData=false;if(this._eventStore){if(this.mode!=="New"){this._eventStore.fetch({predicate:"'"+this.eventId+"'",onComplete:this._receivedEvent,onError:this._requestFailure,scope:this});}else{this._eventStore.newItem({onComplete:function(_a52){_a45.setValue(_a52,"UserId",this._currentUserId);this._receivedEvent(_a52);},scope:this});}}},_receivedEvent:function(_a53){if(this.mode==="New"){this._eventData=(dojo.mixin(_a53,this.eventDefaultValues));}else{this._eventData=_a53;}this._bind();},_requestFailure:function(msg,_a54,opts){},_bind:function(){if(this._eventData){if(!this._bindingMgr){this._bindingMgr=new _a42({defaultBinding:{boundEntity:this._eventData},items:[{boundWidget:this.tb_StartDate,entityProperty:"StartDate",dataType:"date"},{boundWidget:this.tb_EndDate,entityProperty:"EndDate",dataType:"date"},{boundWidget:this.tb_DayType,entityProperty:"Type"},{boundWidget:this.tb_Description,entityProperty:"Description"},{boundWidget:this.tb_Location,entityProperty:"Location"}]});this._eventChangeConnection=dojo.connect(this._bindingMgr,"onChange",this,"onChange");}else{if(!this._bindingMgr.boundEntity||(this._eventData["$key"]!==this._bindingMgr.boundEntity["$key"])){this._bindingMgr.setBoundEntity(this._eventData);}else{this._bindingMgr.bind();}}this._bindUserLookup();}},_bindUserLookup:function(){if(this._eventData.UserId){if(this._eventData.UserId===this._currentUserId){var _a55={"$key":this._currentUserId,"$descriptor":_a45.getClientContextByKey("userPrettyName")};this.lup_User.set("selectedObject",_a55);}else{this._getUserInfoFor(this._eventData.UserId,function(user){this.lup_User.set("selectedObject",user);});}}else{this.lup_User.set("selectedObject",null);}},_getUserInfoFor:function(_a56,_a57){var _a58=new Sage.SData.Client.SDataSingleResourceRequest(_a46.getSDataService("dynamic",false,true,true));_a58.setResourceKind("userInfo");_a58.setResourceSelector("'"+_a56+"'");_a58.setQueryArg("precedence","0");_a58.read({success:_a57,scope:this,failure:function(){}});},_createUserLookup:function(){var _a59={id:"_eventUser",structure:[{cells:[{name:this.nameText,field:"Name",sortable:true,width:"400px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""}]}],gridOptions:{contextualCondition:function(){return "AllowAdd AND (AccessId eq '"+_a45.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'";},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupUserText,dialogButtonText:this.btnOkayText};this.lup_User=new Sage.UI.Controls.Lookup({id:"event_lu_user",config:_a59});this.eventConnections.push(dojo.connect(this.lup_User,"onChange",this,"_userChanged"));dojo.place(this.lup_User.domNode,this.container_UserLup.domNode,"only");},_userChanged:function(_a5a){_a45.setValue(this._eventData,"UserId",(_a5a)?_a5a["$key"].substr(0,12):"");},datesValid:function(){var _a5b=this.tb_StartDate.value;_a5b=new Date(_a5b.getFullYear(),_a5b.getMonth(),_a5b.getDate(),0,0);var _a5c=this.tb_EndDate.value;_a5c=new Date(_a5c.getFullYear(),_a5c.getMonth(),_a5c.getDate(),0,0);if(_a5b>_a5c){_a44.showError(this.invaildDatesText);return false;}return true;},_okClick:function(){if(!this.datesValid()){return;}if(this.mode==="New"){this._eventStore.saveNewEntity(this._eventData,this._successEventCreated,this._failedEventCreated,this);}else{this._eventStore.save({scope:this,success:this._successEventUpdated,failure:this._failedEventUpdated});}},_cancelClick:function(){this.hide();},_successEventCreated:function(_a5d){dojo.publish("/entity/event/create",[_a5d,this]);this.hide();},_failedEventCreated:function(_a5e){_a44.showError(this.errorText);},_successEventUpdated:function(_a5f){dojo.publish("/entity/event/change",[_a5f,this]);this.hide();},_failedEventUpdated:function(_a60){_a44.showError(this.errorText);}});return _a4b;});},"Sage/UI/SLXPreviewGrid/Grid":function(){define("Sage/UI/SLXPreviewGrid/Grid",["Sage/UI/EditableGrid","dijit/layout/BorderContainer","dijit/form/SimpleTextarea","dijit/_Widget","dijit/_Templated","dojo/i18n!../nls/SLXPreviewGrid","dojo/_base/declare"],function(_a61,_a62,_a63,_a64,_a65,_a66,_a67){var Grid=_a67("Sage.UI.SLXPreviewGrid.Grid",[_a64,_a62],{filterText:"Filter",previewField:"",columns:null,tools:null,slxContext:null,dblClickAction:null,contextualConditionFunction:null,liveSplitters:true,gutters:false,gridNodeId:"",_filter:null,_grid:null,_preview:null,constructor:function(){this.connections=[];},amIInATab:function(){if(this.slxContext&&this.slxContext.workspace){return (this.slxContext.workspace.indexOf("TabWorkspace")>-1);}return false;},isMyTabVisible:function(){if(this.amIInATab()&&TabControl){return TabControl.getState().isTabVisible(this.slxContext.tabId);}return true;},postMixInProperties:function(){dojo.mixin(this,_a66);this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(this.previewField){this._preview=this._buildPreview();}this._filter=this._buildFilter();this._grid=this._buildGrid();},startup:function(){if(this._started){return;}this.inherited(arguments);this.domNode.style.visibility="visible";if(this._preview){var _a68=this.getSplitter("right");this.connections.push(dojo.connect(_a68,"_stopDrag",this,function(){this._setPref("previewSize",this._preview.domNode.style.width);this.layout();}));}},getSelectedRecords:function(_a69){var _a6a=this._grid.selection.getSelected();return dojo.map(_a6a,function(rec){var _a6b={};dojo.forEach(_a69,function(_a6c){_a6b[_a6c]=this._grid.store.getValue(rec,_a6c);},this);return _a6b;},this);},refresh:function(){this._grid.refresh();},setSortIndex:function(_a6d,_a6e){this._grid.setSortIndex(_a6d,_a6e);},setSortColumn:function(_a6f,_a70){var _a71=0;for(var i=0;i<this.columns.length;i++){if(_a6f===this.columns[i].field){_a71=i;}}this._grid.setSortIndex(_a71,_a70);},addAssociatedItems:function(){this._grid.addAssociatedItems.apply(this._grid,arguments);},onSelected:function(){},_buildPreview:function(){var _a72=new _a63({style:"height:100%; overflow: auto; width: "+this._getPref("previewSize","150px"),region:"right",splitter:true,readOnly:true});this.addChild(_a72);dojo.addClass(_a72.domNode,"preview-grid-text");return _a72;},_buildGrid:function(){var _a73=[];if(this._filter){_a73.push({id:this.id+"_Filter",imageClass:"icon_Filter_16x16",tooltip:this.filterText,handler:dojo.hitch(this,function(){this._filter.toggle();this.layout();})});}if(this.tools){dojo.forEach(this.tools,function(item){_a73.push(item);});}var _a74={fn:this.contextualConditionFunction||this.contextualCondition,conditions:this._filter?this._filter.getQuery():null};if(!this.storeOptions){throw ("SLXPreviewGrid configuration is missing storeOptions");}this.storeOptions.select=this.storeOptions.select||[];this.storeOptions.select.push("Id");this.storeOptions.select.push(this.previewField);var grid=new _a61({id:this.domNode.id+"_grid",gridNodeId:this.id,tabId:this.slxContext.tabId,context:this.slxContext,region:"center",columnDefaults:{editable:false},columns:this.columns,tools:_a73,contextualCondition:_a74,storeOptions:this.storeOptions,keepSelection:true});this.connections.push(dojo.connect(grid,"onSelected",this,this._updatePreviewText));this.connections.push(dojo.connect(grid.store,"onSuccess",this,this._updatePreviewText));if(this.dblClickAction){dojo.connect(grid,"onRowDblClick",this,function(e){var rec=grid.getItem(e.rowIndex);var id=grid.store.getValue(rec,"$key");this.dblClickAction(id,rec);});}if(this._filter){dojo.connect(this._filter,"onFilterApply",this,function(_a75){_a74.conditions=this._filter.getQuery();grid.refresh();});}this.addChild(grid);return grid;},destroy:function(){var len=this.connections.length;for(var i=0;i<len;i++){dojo.disconnect(this.connections.pop());}this.inherited(arguments);},resetContextualCondition:function(_a76){this.contextualConditionFunction=_a76;var _a77={fn:this.contextualConditionFunction||this.contextualCondition,conditions:this._filter?this._filter.getQuery():null};this._grid.resetContextualCondition(_a77);},_updatePreviewText:function(){if(this.previewField){var sel=this._grid.selection.getSelected();var note="";if(sel.length>0&&sel[0]){note=sel[0][this.previewField]||this._grid.store.getValue(sel[0],this.previewField);}this._preview.set("value",note);}},_buildFilter:function(){var _a78=[];dojo.forEach(this.columns,function(cc){if(cc.filterConfig){var fc=dojo.mixin(dojo.clone(cc),cc.filterConfig);if(!fc.label){fc.label=cc.name;}_a78.push(fc);}});if(_a78.length===0){return null;}var _a79=new Sage.UI.SLXPreviewGrid.FilterPanel({id:this.id+"_filterpanel",region:"top",filterConfig:_a78,style:"display: none"});this.addChild(_a79);return _a79;},_getPref:function(_a7a,_a7b){var _a7c=window["localStorage"];var key=this.id+_a7a;if(_a7c&&_a7c[key]){return _a7c[key];}return _a7b;},_setPref:function(_a7d,_a7e){var _a7f=window["localStorage"];if(_a7f){_a7f[this.id+_a7d]=_a7e;}}});return Grid;});},"Sage/QuickForms/Design/nls/NonVisibleControlContainer":function(){define("Sage/QuickForms/Design/nls/NonVisibleControlContainer",["Sage/LanguageList","dojo/_base/lang"],function(_a80,lang){var nls={root:{headerText:"Non-Visual Controls"}};return lang.mixin(_a80,nls);});},"Sage/Utility/EntityRelationships":function(){define("Sage/Utility/EntityRelationships",["Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dojo/_base/lang","dojo/string","Sage/Utility"],function(_a81,_a82,_a83,_a84,_a85,_a86){Sage.namespace("Utility.EntityRelationships");Sage.Utility.EntityRelationships={_store:false,getRelationships:function(_a87,_a88,_a89){var _a8a={};if(_a87.EntityId!==""){var id=_a87.EntityId;var _a8b=_a87.EntityType.split(".");var _a8c=_a8b[_a8b.length-1];switch(_a8c){case "IAccount":this._getAccountRelationships(id,_a88,_a89);return;case "IContact":this._getContactRelationships(id,_a88,_a89);return;case "IOpportunity":this._getOpportunityRelationships(id,_a88,_a89);return;case "ITicket":this._getTicketRelationships(id,_a88,_a89);return;case "ISalesOrder":this._getSalesOrderRelationships(id,_a88,_a89);return;case "IActivity":this._getActivityRelationships(id,_a88,_a89);return;case "IHistory":this._getHistoryRelationships(id,_a88,_a89);return;case "IContract":this._getContractRelationships(id,_a88,_a89);return;case "IReturn":this._getReturnRelationships(id,_a88,_a89);return;}var _a8d=_a87.EntityTableName.toLowerCase()+"Id";_a8a[_a8d]=id;_a88.call(_a89||this,_a8a);return;}_a88.call(_a89||this,{});},_getRequest:function(_a8e,id){var req=new Sage.SData.Client.SDataSingleResourceRequest(_a82.getSDataService("dynamic"));req.setResourceKind(_a8e);req.setResourceSelector("\""+id+"\"");req.setQueryArg("precedence","0");return req;},_getAccountRelationships:function(id,_a8f,_a90){var req=this._getRequest("accounts",id);req.setQueryArg("include","Contacts,$descriptors");req.setQueryArg("select","Contacts/IsPrimary");req.read({success:function(acc){var obj={AccountId:_a86.getValue(acc,"$key"),AccountName:_a86.getValue(acc,"$descriptor")};var _a91="";var _a92="";var _a93=acc.Contacts.$resources;if(_a93.length>0){_a91=_a93[0].$key;}for(var i=0;i<_a93.length;i++){if(_a93[i].IsPrimary){_a91=_a93[i].$key;_a92=_a86.getValue(_a93[i],"$descriptor");}}obj["ContactId"]=_a91;obj["ContactName"]=_a92;_a8f.call(_a90||this,obj);},failure:function(){_a8f.call(_a90||this,{"AccountId":id});},scope:this});},_getContactRelationships:function(id,_a94,_a95){var req=this._getRequest("contacts",id);req.setQueryArg("include","Account,$descriptors");req.setQueryArg("select","Account");req.read({success:function(_a96){var obj={AccountId:_a86.getValue(_a96,"Account.$key"),AccountName:_a86.getValue(_a96,"Account.$descriptor"),ContactId:_a96.$key,ContactName:_a86.getValue(_a96,"$descriptor")};_a94.call(_a95||this,obj);},failure:function(){_a94.call(_a95||this,{"ContactId":id});},scope:this});},_getOpportunityRelationships:function(id,_a97,_a98){var req=this._getRequest("opportunities",id);req.setQueryArg("include","Account,Contacts,$descriptors");req.setQueryArg("select","Account,Contacts/IsPrimary");req.read({success:function(opp){var obj={AccountId:_a86.getValue(opp,"Account.$key"),AccountName:_a86.getValue(opp,"Account.$descriptor"),OpportunityId:opp.$key,OpportunityName:_a86.getValue(opp,"$descriptor")};var _a99="";var _a9a="";var _a9b=opp.Contacts.$resources;if(_a9b.length>0){_a99=_a9b[0].$key;}for(var i=0;i<_a9b.length;i++){if(_a9b[i].IsPrimary){_a99=_a9b[i].$key;_a9a=_a86.getValue(_a9b[i],"$descriptor");}}obj["ContactId"]=_a99;obj["ContactName"]=_a9a;_a97.call(_a98||this,obj);},failure:function(){_a97.call(_a98||this,{"OpportunityId":id});},scope:this});},_getSalesOrderRelationships:function(id,_a9c,_a9d){var req=this._getRequest("salesorders",id);req.setQueryArg("include","Account,$descriptors");req.read({success:function(so){var obj={AccountId:_a86.getValue(so,"Account.$key"),SalesOrderId:so.$key};_a9c.call(_a9d||this,obj);},failure:function(){_a9c.call(_a9d||this,{"SalesOrderId":id});},scope:this});},_getTicketRelationships:function(id,_a9e,_a9f){var req=this._getRequest("tickets",id);req.setQueryArg("include","Account,Contact,$descriptors");req.read({success:function(_aa0){var obj={AccountId:_a86.getValue(_aa0,"Account.$key"),AccountName:_a86.getValue(_aa0,"Account.$descriptor"),ContactId:_a86.getValue(_aa0,"Contact.$key"),ContactName:_a86.getValue(_aa0,"Contact.$descriptor"),TicketId:_aa0.$key,TicketNumber:_a86.getValue(_aa0,"$descriptor")};_a9e.call(_a9f||this,obj);},failure:function(){_a9e.call(_a9f||this,{"ticketId":id});},scope:this});},_getReturnRelationships:function(id,_aa1,_aa2){var req=this._getRequest("returns",id);req.setQueryArg("include","Account,ReturnedBy,Ticket,$descriptors");req.read({success:function(rma){var obj={ReturnId:rma.$key,ReturnNumber:_a86.getValue(rma,"$descriptor"),AccountId:_a86.getValue(rma,"Account.$key"),AccountName:_a86.getValue(rma,"Account.$descriptor"),TicketId:_a86.getValue(rma,"Ticket.$key"),TicketNumber:_a86.getValue(rma,"Ticket.$descriptor"),ContactId:_a86.getValue(rma,"ReturnedBy.$key"),ContactName:_a86.getValue(rma,"ReturnedBy.$descriptor")};_aa1.call(_aa2||this,obj);},failure:function(){_aa1.call(_aa2||this,{returnId:id});},scope:this});},_getActivityRelationships:function(id,_aa3,_aa4){var req=this._getRequest("activities",id);req.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId");req.read({success:function(_aa5){var obj={AccountId:_a86.getValue(_aa5,"AccountId"),ActivityId:_aa5.$key,ContactId:_a86.getValue(_aa5,"ContactId"),LeadId:_a86.getValue(_aa5,"LeadId"),OpportunityId:_a86.getValue(_aa5,"OpportunityId"),TicketId:_a86.getValue(_aa5,"TicketId")};_aa3.call(_aa4||this,obj);},failure:function(){_aa3.call(_aa4||this,{"ActivityId":id});},scope:this});},_getHistoryRelationships:function(id,_aa6,_aa7){var req=this._getRequest("history",id);req.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId");req.read({success:function(_aa8){var obj={AccountId:_a86.getValue(_aa8,"AccountId"),HistoryId:_aa8.$key,ContactId:_a86.getValue(_aa8,"ContactId"),LeadId:_a86.getValue(_aa8,"LeadId"),OpportunityId:_a86.getValue(_aa8,"OpportunityId"),TicketId:_a86.getValue(_aa8,"TicketId")};_aa6.call(_aa7||this,obj);},failure:function(){_aa6.call(_aa7||this,{"HistoryId":id});},scope:this});},_getContractRelationships:function(id,_aa9,_aaa){var req=this._getRequest("contracts",id);req.setQueryArg("include","Account,Contact,$descriptors");req.read({success:function(_aab){var obj={AccountId:_a86.getValue(_aab,"Account.$key"),AccountName:_a86.getValue(_aab,"Account.$descriptor"),ContractId:_aab.$key,ContractNumber:_a86.getValue(_aab,".$descriptor"),ContactId:_a86.getValue(_aab,"Contact.$key"),ContactName:_a86.getValue(_aab,"Contact.$descriptor")};_aa9.call(_aaa||this,obj);},failure:function(){_aa9.call(_aaa||this,{"ContractId":id});},scope:this});}};return Sage.Utility.EntityRelationships;});},"Sage/UI/Controls/nls/Name":function(){define("Sage/UI/Controls/nls/Name",["Sage/LanguageList","dojo/_base/lang"],function(_aac,lang){var nls={root:{okText:"OK",cancelText:"Cancel",dialogTitle:"Edit Name",prefixText:"Prefix:",nameFirstText:"First:",nameMiddleText:"Middle:",nameLastText:"Last:",suffixText:"Suffix:",buttonTooltip:"Edit"}};return lang.mixin(_aac,nls);});},"Sage/UI/GridMenuItem":function(){require({cache:{"url:Sage/templates/GridMenuItem.html":"<tr class=\"dijitGridMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-event=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"4\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\" style=\"display:none\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"display:none\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n    <td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\" style=\"display:none\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t</td>\n</tr>\n"}});define("Sage/UI/GridMenuItem",["dijit/MenuItem","dojox/grid/EnhancedGrid","dojo/text!../templates/GridMenuItem.html","dojo/_base/declare","dojo/dom-style","dojo/dom-construct","dojo/aspect","dojo/_base/lang","dojo/topic"],function(_aad,_aae,_aaf,_ab0,_ab1,_ab2,_ab3,lang,_ab4){var _ab5=_ab0("Sage.UI.GridMenuItem",_aad,{grid:null,templateString:_aaf,startup:function(){this.inherited(arguments);_ab3.after(this.getParent(),"onOpen",lang.hitch(this,this.startGrid));var h=this.gridOptions.height||this.height||"250px",w=this.gridOptions.width||this.width||"150px";_ab1.set(this.focusNode,{height:h,width:w});},startGrid:function(){if(this.started){this.grid.resize();this.grid._refresh();return;}if(typeof this.gridOptions!=="undefined"){var _ab6=(this.gridOptions.hasOwnProperty("cssClass"))?this.gridOptions.cssClass:"",_ab7;this.gridOptions.cssClass=_ab6+" menuGrid";this.grid=new _aae(this.gridOptions);_ab2.place(this.grid.domNode,this.containerNode,"only");this.grid.canSort=function(col){if(Math.abs(col)===1){return false;}return true;};if(this.gridOptions.hasOwnProperty("_onCellClick")){this.grid.on("cellClick",lang.hitch(this.gridOptions,this.gridOptions._onCellClick));}if(this.gridOptions.hasOwnProperty("_onCanSelect")){this.grid.on("canSelect",lang.hitch(this.gridOptions,this.gridOptions._onCanSelect));}this.grid.startup();}this.started=true;_ab7=_ab3.after(this.grid,"_onFetchComplete",lang.hitch(this,function(){_ab4.publish("sage/ui/groups/gridMenuStarted",this);_ab7.remove();}));},_onClick:function(e){e.stopPropagation();}});return _ab5;});},"Sage/UI/Controls/DependencyLookup":function(){define("Sage/UI/Controls/DependencyLookup",["dijit/Dialog","Sage/UI/Controls/DependControl","dojo/_base/declare"],function(_ab8,_ab9,_aba){var _abb=_aba("Sage.UI.Controls.DependencyLookup",null,{ClientId:"",PanelId:"",InitCall:null,LookupControls:null,CurrentIndex:0,AutoPostBack:false,panel:null,Title:"",Size:"",constructor:function(_abc,_abd,size,_abe,_abf){this.ClientId=_abc;this.PanelId=_abc+"_Panel";this.InitCall=_abd;this.LookupControls=[];this.CurrentIndex=0;this.Size=size+"px";this.AutoPostBack=_abe;this.panel=null;this.Title=_abf;},CanShow:function(){var _ac0=false;if(Sys){var prm=Sys.WebForms.PageRequestManager.getInstance();_ac0=prm.get_isInAsyncPostBack();}if(!_ac0){return true;}else{var id=this.ClientId+"_obj";var _ac1=function(){window[id].Show("");};Sage.SyncExec.call(_ac1);return false;}},Show:function(){if(this.CanShow()){if(this.panel==null){this.panel=dijit.byId(this.PanelId+"_Dialog");var _ac2=dojo.byId(this.PanelId);if(!this.panel){_ac2.style.display="block";dojo.place(_ac2,dojo.byId("mainform"),"last");this.panel=new _ab8({id:this.PanelId+"_Dialog",content:_ac2,title:this.Title||""});this.panel.startup();dojo.place(this.panel.domNode,dojo.byId("mainform"),"last");}else{this.panel.setContent(_ac2);_ac2.style.display="block";}if((this.CurrentIndex==0)||(this.LookupControls[i]!=undefined)){this.Init();}for(var i=0;i<this.CurrentIndex;i++){if(this.LookupControls[i]!=undefined){var text=dojo.byId(this.LookupControls[i].TextId);var _ac3="";if(i>0){_ac3=this.GetSeeds(i);}if((text.value!="")||(_ac3!="")||(i==0)){this.LookupControls[i].CurrentValue=text.value;var _ac4=this.LookupControls[i].ListId;var list=dojo.byId(_ac4);if(list.options.length==0){this.LookupControls[i].LoadList(_ac3);}}}}}this.panel.show();}},AddControl:function(_ac5,_ac6,_ac7,type,_ac8,_ac9){var _aca=new _ab9(_ac5,_ac6,_ac7,type,_ac8,_ac9);this.LookupControls[this.CurrentIndex]=_aca;this.CurrentIndex++;},AddFilters:function(_acb,_acc){var _acd=new _ab9(listId,textId,type,displayProperty,seedProperty);this.LookupControls[this.CurrentIndex]=_acd;this.CurrentIndex++;},SelectionChanged:function(_ace){if((_ace+1)<this.CurrentIndex){this.LookupControls[_ace+1].LoadList(this.GetSeeds(_ace+1));for(var i=_ace+2;i<this.CurrentIndex;i++){this.LookupControls[i].ClearList();}}},Ok:function(){this.panel.hide();for(var i=0;i<this.CurrentIndex;i++){var text=document.getElementById(this.LookupControls[i].TextId);var list=document.getElementById(this.LookupControls[i].ListId);if((list.selectedIndex!=undefined)&&(list.selectedIndex!=-1)){text.value=list.options[list.selectedIndex].text;}else{text.value="";}this.InvokeChangeEvent(text);}if(this.AutoPostBack){if(Sys){Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.ClientId,null);}else{document.forms(0).submit();}}},Init:function(){eval(this.InitCall);},InvokeChangeEvent:function(_acf){if(document.createEvent){var _ad0=document.createEvent("HTMLEvents");_ad0.initEvent("change",true,true);_acf.dispatchEvent(_ad0);}else{_acf.fireEvent("onchange");}},GetSeeds:function(_ad1){var _ad2="";for(var i=_ad1;i>0;i--){var _ad3=this.LookupControls[i-1];var _ad4=this.LookupControls[i];var list=dojo.byId(_ad3.ListId);if(list.selectedIndex==-1){return _ad2;}var seed=list.options[list.selectedIndex];_ad2+=_ad4.SeedProperty+","+seed.text+"|";}_ad2=_ad2.substr(0,_ad2.length-1);return _ad2;},close:function(){this.panel.hide();}});return _abb;});},"Sage/UI/Columns/SlxEdit":function(){define("Sage/UI/Columns/SlxEdit",["dojo/i18n!./nls/SlxEdit","dojo/_base/declare"],function(_ad5,_ad6){var _ad7=_ad6("Sage.UI.Columns.SlxEdit",dojox.grid.cells.Cell,{field:"",entityType:"",cellValue:"",smartPart:"",appliedSecurity:"",dialogTitle:"",isCentered:true,dialogTop:0,dialogLeft:0,dialogHeight:0,dialogWidth:0,formObjectName:"",constructor:function(){dojo.mixin(this,_ad5);if(!this.hidden){if(!this.appliedSecurity&&arguments.appliedSecurity){this.appliedSecurity=arguments.appliedSecurity;}if(this.appliedSecurity){var svc=Sage.Services.getService("RoleSecurityService");if(svc){this.hidden=!svc.hasAccess(this.appliedSecurity);}}}this.inherited(arguments);},format:function(_ad8,_ad9){if(_ad9===null){return this.defaultValue;}var _ada=this.cellValue;if(this.cellValue===""&&this.field!=""){_ada=Sage.Utility.getValue(_ad9,this.field);}if(this.cellValue===""&&_ada===""){_ada=this.editText;}var _adb=Sage.Utility.getValue(_ad9,"$key");if(_adb.match(/[=]/)){_adb=_adb.match(/[=]\S{12}/g).join(",").replace(/=/g,"");}return String.format("<a href=\"{0}\">{1}</a>",String.format("javascript:Sage.Utility.loadDetailsDialog( {{ entityType:'{0}', smartPart:'{1}', entityId:'{2}', dialogTitle:'{3}', isCentered:{4}, dialogTop:{5}, dialogLeft:{6}, dialogHeight:{7}, dialogWidth:{8} }} );",this.entityType,this.smartPart,_adb,this.dialogTitle,this.isCentered,this.dialogTop,this.dialogLeft,this.dialogHeight,this.dialogWidth),_ada);}});return _ad7;});},"Sage/Services/RoleSecurityService":function(){define("Sage/Services/RoleSecurityService",["dijit/_Widget","Sage/Data/SDataServiceRegistry","Sage/Utility/_LocalStorageMixin","dojo/_base/declare"],function(_adc,_add,_ade,_adf){var _ae0=_adf("Sage.Services.RoleSecurityService",[_adc,_ade],{_currentUserId:"",_accessListCache:false,_enabled:true,_nameSpace:"Sage_SalesLogix_RoleSecurityService",_clearCache:false,constructor:function(_ae1){this.inherited(arguments);dojo.mixin(this,_ae1);this._currentUserId=this._getCurrentUserId();},postCreate:function(_ae2){this._getFromCache();},_getCurrentUserId:function(){if(!this._currentUserId){var _ae3=Sage.Services.getService("ClientContextService");if(_ae3){if(_ae3.containsKey("userID")){this._currentUserId=_ae3.getValue("userID");}}}return this._currentUserId;},_virtuald:function(){var _ae4=/^\/([^\/]+)\//.exec(location.pathname);return _ae4?_ae4[1]:"";},hasAccess:function(_ae5,_ae6){var _ae7=this._internalHasAccess(_ae5);if(_ae6){_ae6(_ae7);}return _ae7;},_internalHasAccess:function(_ae8){if(!this._enabled){return true;}if(!_ae8){return true;}if(_ae8.trim()===""){return true;}if(this._getCurrentUserId().trim()==="ADMIN"){return true;}var _ae9=this._getAccessList();if(_ae9){for(var i=0;i<_ae9.length;i++){if(_ae9[i]===_ae8){return true;}}}return false;},_getAccessList:function(){if(this._accessListCache){return this._accessListCache.securedActions;}else{var _aea=this._getFromCache();if(_aea){return _aea.securedActions;}}return false;},_getFromCache:function(){var me=this;var _aeb=this._getCurrentUserId();var _aec=this.getFromLocalStorage(this._nameSpace,this._nameSpace);if(_aec){for(var i=0;i<_aec.length;i++){if(_aec[i].userId===_aeb){if(this._clearCache){this._clearCache=false;_aec.splice(i,1);}else{this._accessListCache=_aec[i];return _aec[i];}}}}this._loadUserAccessList(function(_aed){if(!_aec){_aec=[];}me._accessListCache=_aed;_aec.push(_aed);me.saveToLocalStorage(me._nameSpace,_aec,me._nameSpace);});return false;},_loadUserAccessList:function(_aee){var _aef=new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("system")).setContractName("system").setOperationName("getCurrentUser");_aef.execute({},{success:function(data){if(_aee){_aee(data.response);}},failure:function(data){},scope:this});}});if(!Sage.Services.hasService("RoleSecurityService")){Sage.Services.addService("RoleSecurityService",new Sage.Services.RoleSecurityService());}return _ae0;});},"url:Sage/MainView/IntegrationContract/templates/InvoiceRTDV.html":"[\n'<div>',\n    '<div dojoType=\"dijit.Dialog\" id=\"{%= $.id%}_invoiceDetailsDialog\" title=\"{%= $.dialogCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hideDetailsDialog\">',\n        '<div dojoAttachPoint=\"loadingContainer\">',\r\n            '<br />',\r\n            '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingText %}</label>',\r\n            '<br />',\r\n            '<br />',\r\n        '</div>',\n        '<div dojoAttachPoint=\"invoiceDialogContent\" class=\"display-none\">',\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\">',\n                 '<input dojoType=\"dijit.form.TextBox\" name=\"reference\" id=\"{%= $.id%}_reference\" label=\"{%= $.lblInvoiceCaption %}\" readonly=\"true\" />',\n                 '<input dojoType=\"dijit.form.TextBox\" name=\"grossTotal\" id=\"{%= $.id%}_grossTotal\" label=\"{%= $.lblNetTotalCaption %}\" readonly=\"readonly\" />',\n            '</div >',\n            '<div style=\"height:350px;width:800px\">',\r\n                '<div id=\"{%= $.id%}_invoiceTabContainer\" dojoAttachPoint=\"invoiceTabContainer\" dojoType=\"dijit.layout.TabContainer\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"{%= $.id%}_invoiceContent\" dojoAttachPoint=\"invoiceContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.detailsTabTitle %}\" selected=\"true\">',\r\n                        '<div id=\"{%= $.id%}_divInvoiceDetails\">',\r\n                            '<table cellspacing=\"5\">',\n                                '<col style=\"width:200px\" />',\r\n                                '<col style=\"width:200px\" />',\n                                '<tr>',\n                                    '<td>',\r\n                                        '<label for=\"Invoice_date\">{%= $.lblInvoiceDateCaption %}</label>',\r\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_invoiceDate\" name=\"date\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"invoiceDiscountPercent\">{%= $.lblInvoiceDiscountPercentCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_discountPercent\" name=\"invoiceDiscountPercent\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\r\n                                        '<label for=\"Invoice_deliveryDate\">{%= $.lblDueDateCaption %}</label>',\r\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_deliveryDate\" name=\"deliveryDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_carrierTotalPrice\">{%= $.lblCarrierTotalPriceCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_carrierTotalPrice\" name=\"carrierTotalPrice\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"Invoice_customerReference\">{%= $.lblCustomerPOCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_customerReference\" name=\"customerReference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\r\n                                        '<label for=\"Invoice_taxTotal\">{%= $.lblTaxCaption %}</label>',\r\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_taxTotal\" name=\"taxTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"settlementDiscountPercent\">{%= $.lblSettlementDiscountPercentCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_settlementDiscountPercent\" name=\"settlementDiscountPercent\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_notes\">{%= $.lblNotesCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_notes\" name=\"notes\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"settlementDiscountTerms\">{%= $.lblSettlementDiscountTermsCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_settlementDiscountTerms\" name=\"settlementDiscountTerms\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_costTotal\">{%= $.lblCostTotalCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_costTotal\" name=\"costTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"operatingCompanyCurrency\">{%= $.lblOCCurrencyCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_operatingCompanyCurrency\" name=\"operatingCompanyCurrency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_profitTotal\">{%= $.lblProfitTotalCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_profitTotal\" name=\"profitTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"operatingCompanyCurrencyExchangeRateDate\">{%= $.lblOperatingCompanyCurrencyExchangeRateDateCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_operatingCompanyCurrencyExchangeRateDate\" name=\"operatingCompanyCurrencyExchangeRateDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_priceList\">{%= $.lblPriceListCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_priceList\" name=\"pricelist.name\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"Invoice_currency\">{%= $.lblCurrencyCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_currency\" name=\"currency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_salesPerson\">{%= $.lblSalesPersonCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_salesPerson\" name=\"buyerContact.fullName\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"Invoice_invoiceDiscountAmount\">{%= $.lblInvoiceDiscountAmountCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_invoiceDiscountAmount\" name=\"invoiceDiscountAmount\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\r\n                            '</table>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_addressesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.addressTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"sdgrdInvoiceAddresses\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdInvoiceAddresses_Grid\" dojoAttachPoint=\"sdgrdInvoiceAddresses_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_invoiceLinesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.invoiceLinesTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"sdgrdInvoiceLines\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdInvoiceLines_Grid\" dojoAttachPoint=\"sdgrdInvoiceLines_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_paymentsContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.paymentsTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Payments\" dojoAttachEvent=\"onShow:initPayments\">',\r\n                        '<div id=\"sdgrdPayments\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdPayments_Grid\" dojoAttachPoint=\"sdgrdPayments_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_deliveriesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.deliveriesTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Deliveries\" dojoAttachEvent=\"onShow:initDeliveries\">',\r\n                        '<div id=\"sdgrdDeliveries\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdDeliveries_Grid\" dojoAttachPoint=\"sdgrdDeliveries_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                '</div>',\r\n            '</div>',\r\n            '<div class=\"button-bar alignright\">',\r\n                 '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_invoiceBtnClose\" type=\"button\" dojoAttachEvent=\"onClick:hideDetailsDialog\">{%= $.btnCloseCaption %}</button>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]","Sage/QuickForms/Design/nls/PhoneControlDesigner":function(){define("Sage/QuickForms/Design/nls/PhoneControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_af0,lang){var nls={root:{displayNameText:"Phone"}};return lang.mixin(_af0,nls);});},"url:Sage/UI/Controls/templates/CopyToClipboard.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" dojoAttachPoint=\"dialogNode\">\r\n        \r\n        <span>${helpText}</span>\r\n        <div style=\"width: 550px; height: 400px;\">\r\n            <div data-dojo-type=\"dijit.layout.TabContainer\" dojoAttachPoint=\"tabNode\" style=\"width: 100%; height: 100%;\">\r\n                <div data-dojo-type=\"dijit.layout.ContentPane\" title=\"${textTab}\">\r\n                    <div dojoAttachPoint=\"contentNode\"></div>\r\n                </div>\r\n            \r\n                <div data-dojo-type=\"dijit.layout.ContentPane\" title=\"${sourceTab}\">\r\n                    <textarea dojoAttachPoint=\"textNode\" data-dojo-type=\"dijit.form.SimpleTextarea\" style=\"width: 100%; height: 95%;\"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n            \r\n        <div style=\"float:right;padding-bottom:8px;\">\r\n            <button data-dojo-type=\"dijit.form.Button\" type=\"submit\" dojoAttachEvent=\"onClick:_closeClicked\">\r\n                ${closeText}\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n","Sage/MainView/Lead/nls/UpdateLeads":function(){define("Sage/MainView/Lead/nls/UpdateLeads",["Sage/LanguageList","dojo/_base/lang"],function(_af1,lang){var nls={root:{updateMultipleLeads_Caption:"Update Multiple Leads",labelWidth:"100",btnCancel_Caption:"Cancel",ok_Text:"OK",update_To_Caption:"To:",update_Property_Caption:"Update:",updateProp_Owner:"Owner",lookupOwnerText:"Lookup Owner:",lookupDescriptionColText:"Description",updateProp_AcctMgr:"Account Manager",lookupActMgrText:"Lookup Account Manager",lookupNameColText:"Name",lookupTitleColText:"Title",lookupDepartmentColText:"Department",lookupRegionColText:"Region",lookupTypeColText:"Type",errorUnspecifiedValue:"Please specify a value before continuing.",errorRequestingJobMgr:"An error occurred requesting the job manager."}};return lang.mixin(_af1,nls);});},"Sage/MainView/BindingsManager":function(){define("Sage/MainView/BindingsManager",["dijit/_Widget","dojo/_base/declare","Sage/Utility/Activity"],function(_af2,_af3,_af4){var _af5=_af3("Sage.MainView.DataBinding",_af2,{boundEntity:false,boundWidget:false,widgetEvent:"onChange",widgetProperty:"value",entityProperty:false,defaultValue:"",twoWay:true,_connection:false,bind:function(){if(this.boundWidget&&this.boundEntity&&this.entityProperty){this.boundWidget.set(this.widgetProperty,this._formatValueFromEntity(Sage.Utility.getValue(this.boundEntity,this.entityProperty,this.defaultValue)));if(this.twoWay&&!this._connection){this._connection=dojo.connect(this.boundWidget,this.widgetEvent,dojo.hitch(this,"applyWidgetChange",this.boundWidget));}}},_formatValueFromEntity:function(val){return val;},applyWidgetChange:function(_af6,_af7){if(!_af7){_af7=_af6.get(this.widgetProperty);}var _af8=Sage.Utility.getValue(this.boundEntity,this.entityProperty);var _af9=this._formatValueFromControl(_af7);if(_af8!=_af9){Sage.Utility.setValue(this.boundEntity,this.entityProperty,_af9);this.onChange(this.boundEntity,this.entityProperty,_af8,_af7);}},_formatValueFromControl:function(val){return val;},_setBoundEntityAttr:function(_afa){this.boundEntity=_afa;this.bind();},destroy:function(){dojo.disconnect(this._connection);this.inherited(arguments);},onChange:function(_afb,_afc,_afd,_afe){}});var _aff=_af3("Sage.MainView.DateDataBinding",_af5,{_formatValueFromEntity:function(val){var _b00=Sage.Utility.Convert.toDateFromString(val);if(_b00&&_af4.isDateFiveSecondRuleTimeless(_b00)){_b00=new Date(_b00.getUTCFullYear(),_b00.getUTCMonth(),_b00.getUTCDate(),0,0,5);}return _b00;},_formatValueFromControl:function(val){if(!val||!val.getUTCFullYear){val=this.boundWidget.get(this.widgetProperty);if(!val||!val.getUTCFullYear){return "";}}return Sage.Utility.Convert.toIsoStringFromDate(val);}});var _b01=_af3("Sage.MainView.BindingsManager",null,{constructor:function(opts){this._bindings=[];this._connections=[];this.boundEntity=false;this._defaultBindingOptions={boundEntity:false,boundWidget:false,widgetEvent:"onChange",widgetProperty:"value",entityProperty:false,defaultValue:"",twoWay:true,dataType:"string"};var o=opts||{};var def=dojo.mixin(this._defaultBindingOptions,o.defaultBinding||{});var bdgs=o.items||[];for(var i=0;i<bdgs.length;i++){this._addNew(dojo.mixin({},def,bdgs[i]));}},add:function(_b02){if(_b02 instanceof Sage.MainView.DataBinding){this._connections.push(dojo.connect(_b02,"onChange",this,"onChange"));this._bindings.push(_b02);}},_addNew:function(_b03){if(_b03.dataType==="date"){this.add(new _aff(_b03));}else{this.add(new _af5(_b03));}},addBindings:function(_b04){if(dojo.isArray(_b04)){for(var i=0;i<_b04.length;i++){this._addNew(dojo.mixin(this._defaultBindingOptions,_b04[i]));}}else{this._addNew(dojo.mixin(this._defaultBindingOptions,_b04));}},bind:function(){for(var i=0;i<this._bindings.length;i++){if(this._bindings[i] instanceof Sage.MainView.DataBinding){this._bindings[i].bind();}}},setBoundEntity:function(_b05){this._entity=_b05;for(var i=0;i<this._bindings.length;i++){if(this._bindings[i] instanceof Sage.MainView.DataBinding){this._bindings[i].set("boundEntity",_b05);}}},destroy:function(){var i,l=this._connections.length;for(i=0;i<l;i++){dojo.disconnect(this._connections.length);}this._connections=[];l=this._bindings.length;for(i=0;i<l;i++){var item=this._bindings.pop();item.destroy();}this._bindings=[];},onChange:function(_b06,_b07,_b08,_b09){}});return _b01;});},"Sage/TaskPane/ActivityTaskPaneItem":function(){define("Sage/TaskPane/ActivityTaskPaneItem",["dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(_b0a,_b0b,_b0c){var _b0d=_b0c("Sage.TaskPane.ActivityTaskPaneItem",[_b0a,_b0b],{securedAction:"",linkText:"",action:"",postCreate:function(){this.checkSecurityAccess();},templateString:"<a dojoAttachPoint=\"linkTextNode\" href=\"#\"></a>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{linkText:{node:"linkTextNode",type:"innerHTML"},action:{node:"linkTextNode",type:"attribute",attribute:"href"}}),_getCurrentUserId:function(){var _b0e="";var _b0f=Sage.Services.getService("ClientContextService");if(_b0f){_b0e=_b0f.getValue("userID");}return _b0e;},checkSecurityAccess:function(){if(this.securedAction.length>0){var _b10=this._getCurrentUserId();var _b11=this.linkTextNode;var _b12=Sage.Services.getService("RoleSecurityService");_b12.hasAccess(this.securedAction,function(_b13){var _b14="none";if(_b13){_b14="inline";}dojo.style(_b11,{"display":_b14});});}else{dojo.style(this.linkTextNode,{"display":"inline"});}}});return _b0d;});},"Sage/MainView/ActivityMgr/SnoozeOptions":function(){define("Sage/MainView/ActivityMgr/SnoozeOptions",["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/Dialog","dijit/form/Button","dijit/form/FilteringSelect","dojo/_base/declare","dojo/i18n!./nls/SnoozeOptions"],function(_b15,_b16,_b17,_b18,_b19,_b1a,_b1b,_b1c){var _b1d=_b1b("Sage.MainView.ActivityMgr.SnoozeOptions",[_b17,_b15,_b16],{fiveMinText:"5 minutes",tenMinText:"10 minutes",fifteenMinText:"15 minutes",thirtyMinText:"30 minutes",oneHourText:"x1 hour",twoHourText:"2 hours",fourHourText:"4 hours",eightHourText:"8 hours",oneDayText:"1 day",twoDayText:"2 days",threeDayText:"3 days",oneWeekText:"1 week",twoWeekText:"2 weeks",snoozeText:"Snooze",snoozeByText:"Snooze by:",snoozeAllText:"Snooze All",snoozeTitle:"Snooze Alarms",widgetsInTemplate:true,templateString:["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"_snoozeDialog\" title=\"${snoozeTitle}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hide\">","<div class=\"alarm-snoozebar\" dojoAttachPoint=\"_snoozebar\">","<table>","<tr>","<td class=\"snoozeText\">${snoozeByText}</td>","<td class=\"snoozeBy\">","<select name=\"selectSnoozeBy\" dojoAttachPoint=\"_selSnoozeBy\" data-dojo-type=\"dijit.form.FilteringSelect\">","<option value=\"5\" selected=\"selected\">${fiveMinText}</option>","<option value=\"10\" >${tenMinText}</option>","<option value=\"15\" >${fifteenMinText}</option>","<option value=\"30\" >${thirtyMinText}</option>","<option value=\"60\" >${oneHourText}</option>","<option value=\"120\" >${twoHourText}</option>","<option value=\"240\" >${fourHourText}</option>","<option value=\"480\" >${eightHourText}</option>","<option value=\"1440\" >${oneDayText}</option>","<option value=\"2880\" >${twoDayText}</option>","<option value=\"4320\" >${threeDayText}</option>","<option value=\"10080\" >${oneWeekText}</option>","<option value=\"20160\" >${twoWeekText}</option>","</select>","</td>","<td class=\"snoozeActions\">","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_snooze\">${snoozeText}</button>","</td>","</tr>","</table>","</div>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,_b1c);},show:function(){this._showWithUserOptions();},_showWithUserOptions:function(){var _b1e=Sage.Services.getService("UserOptions");if(_b1e){_b1e.getByCategory("ActivityAlarm",this._receivedOptions,this);}},_receivedOptions:function(data){var opts=data["$resources"];for(var i=0;i<opts.length;i++){var opt=opts[i];if(opt["name"].toUpperCase()==="DEFAULTSNOOZE"){var _b1f=opt["value"];this._selSnoozeBy.setValue(_b1f);}}this._dialog.show();},hide:function(){this.destroy();},destroy:function(){this._dialog.destroyRecursive();},_snooze:function(_b20){var _b21=Sage.Services.getService("ActivityService");var _b22=this._getNewAlarmTimeOptions();this.hide();_b21.snooze(null,_b22);},_snoozeAll:function(){},_getNewAlarmTime:function(){var _b23=this._getNewAlarmTimeOptions();var _b24=dojo.date.add(new Date(),_b23.interval,_b23.duration);return Sage.Utility.Convert.toIsoStringFromDate(_b24);},_getNewAlarmTimeOptions:function(){var dur=5,_b25="minute";var _b26=this._selSnoozeBy.get("displayedValue");var _b27=this._selSnoozeBy.get("value");switch(_b27){case this.tenMinText:dur=10;break;case this.fifteenMinText:dur=15;break;case this.thirtyMinText:dur=30;break;case this.oneHourText:dur=1;_b25="hour";break;case this.twoHourText:dur=2;_b25="hour";break;case this.fourHourText:dur=4;_b25="hour";break;case this.eightHourText:dur=8;_b25="hour";break;case this.oneDayText:dur=1;_b25="day";break;case this.twoDayText:dur=2;_b25="day";break;case this.threeDayText:dur=3;_b25="day";break;case this.oneWeekText:dur=1;_b25="week";break;case this.twoWeekText:dur=2;_b25="week";break;default:dur=_b27;}var _b28={name:_b26,duration:dur,interval:_b25};return _b28;},_showSnooze:function(){}});return _b1d;});},"Sage/UI/Controls/PickListAsText":function(){require({cache:{"url:Sage/UI/Controls/templates/PickListAsText.html":"<div>\r\n    <span id=\"${id}-Span\" data-dojo-attach-point=\"textSpan\"></span>\r\n</div>\r\n"}});define("Sage/UI/Controls/PickListAsText",["dijit/_Widget","dijit/_Templated","dojo/data/ItemFileReadStore","dojo/data/ObjectStore","dojo/store/Memory","Sage/UI/Controls/PickList","dojo/text!./templates/PickListAsText.html","dojo/_base/declare"],function(_b29,_b2a,_b2b,_b2c,_b2d,_b2e,_b2f,_b30){var _b31=_b30("Sage.UI.Controls.PickListAsText",[_b2e,_b29,_b2a],{constructor:function(_b32){if(_b32.clientId){this.id=_b32.clientId+"-PickListAsText";}this.inherited(arguments);},_loadData:function(){var def=new dojo.Deferred();this.getPickListData(def);def.then(dojo.hitch(this,function(data){if(typeof data==="string"){this.textSpan.innerHTML=data;}var _b33=[];for(var i=0;i<data.items.$resources.length;i++){var item=data.items.$resources[i];_b33.push({id:item.$key,code:item.code,number:item.number,text:item.text});}this.storeData={identifier:"id",label:"text",items:_b33};var _b34=new _b2b({data:this.storeData});var _b35=dojo.byId(this.textId);var _b36=dojo.byId(this.codeId);if(_b35&&_b35.value){this.initialValue=_b35.value;this.textSpan.innerHTML=this.initialValue;}if(!this.initialCode&&_b36&&_b36.value){this.initialCode=_b36.value;}if(this.initialCode){var _b37=this.getStoreItemById(this.initialCode);if(_b37){this.initialValue=_b37.text;this.textSpan.innerHTML=this.initialValue;}}}),function(e){console.error(e);});},getStoreItemById:function(id){if(this.storeData){var _b38=null;dojo.forEach(this.storeData.items,function(item,_b39,_b3a){if(item.id===id){_b38=item;}},this);}return _b38;},_setPickListNameAttr:function(_b3b){this.inherited(arguments);this._loadData();},templateString:_b2f,widgetsInTemplate:true,storeData:null,initialValue:"",initialCode:"",textId:"",codeId:""});return _b31;});},"Sage/UI/WidgetEditor":function(){define("Sage/UI/WidgetEditor",["dojo/data/ItemFileReadStore","dojox/widget/Portlet","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/declare","dojo/i18n!./Dashboard/nls/WidgetDefinition","dojo/dom-style","dojo/on","dojo/_base/lang"],function(_b3c,_b3d,_b3e,_b3f,_b40,_b41,on,lang){var _b42=_b3f("Sage.UI.WidgetEditor",[dojox.widget.PortletDialogSettings],{_grpUrl:new Simplate("slxdata.ashx/slx/crm/-/groups/context/grouplist/{%= $.grp %}"),_dimUrl:new Simplate("slxdata.ashx/slx/crm/-/analytics/dimension/{%= $.dim %}"),_metUrl:new Simplate("slxdata.ashx/slx/crm/-/analytics/metric/{%= $.met %}"),_entityUrl:"slxdata.ashx/slx/crm/-/groups/context/entityList?filter=analytics",_getStore:function(uri){return new _b3c({url:uri});},_addEnt:function(str){return "Sage.Entity.Interfaces.I"+str;},_remEnt:function(str){return str.replace("Sage.Entity.Interfaces.I","");},_remAmp:function(str){return str[str.length-1]==="&"?str.slice(0,-1):str;},_pushEnt:function(val){this._entStr=dojo.string.substitute("entity=${0}&",[val]);},_pushGrp:function(val){this._grpStr=dojo.string.substitute("groupname=${0}&",[val]);},_pushDim:function(val){this._dimStr=dojo.string.substitute("dimension=${0}&",[val]);},_pushMet:function(val){this._metStr=dojo.string.substitute("metric=${0}&",[val]);},_pushLim:function(val){this._limStr=dojo.string.substitute("limit=${0}&",[val]);},_pushOth:function(val){this._othStr=dojo.string.substitute("combineother=${0}",[val]);},_checkHydrate:function(){var opts=this.portlet.widgetOptions;if(opts.groupname&&this._grpField){if(this._originalGroup){opts.groupname=this._originalGroup;}var _b43=this._grpField;_b43.store.fetch({query:{groupName:opts.groupname},onComplete:function(i,r){_b43.set("value",_b43.store.getValue(i[0],"displayName"));},queryOptions:{deep:true}});this._originalGroup=opts.groupname;}if(opts.dimension&&this._dimField){if(this._originalDimension){opts.dimension=this._originalDimension;}var df=this._dimField;df.store.fetch({query:{name:opts.dimension},onComplete:function(i,r){df.set("value",df.store.getValue(i[0],"displayName"));},queryOptions:{deep:true}});this._originalDimension=opts.dimension;}if(opts.metric&&this._metField){if(this._originalMetric){opts.metric=this._originalMetric;}var mf=this._metField;mf.store.fetch({query:{name:opts.metric},onComplete:function(i,r){mf.set("value",mf.store.getValue(i[0],"displayName"));},queryOptions:{deep:true}});this._originalMetric=opts.metric;}this._hydrateChecked=true;},_setFields:function(_b44){switch(_b44.id){case this.portlet.id+"_ttlField":this._ttlField=_b44;break;case this.portlet.id+"_subField":this._subField=_b44;break;case this.portlet.id+"_entCombo":this._entField=_b44;on.once(this._entField._buttonNode,"click",lang.hitch(this,function(){var _b45=dojo.byId(this.portlet.id+"_loading");_b41.set(_b45,"display","block");this._entField.set("store",this._getStore(this._entityUrl));this._entField.store.fetch({query:"",onComplete:function(){_b41.set(_b45,"display","none");entityField.loadAndOpenDropDown();entityField.focus();}});}));break;case this.portlet.id+"_grpCombo":this._grpField=_b44;break;case this.portlet.id+"_dimCombo":this._dimField=_b44;break;case this.portlet.id+"_metCombo":this._metField=_b44;break;case this.portlet.id+"_goalField":this._goalField=_b44;break;case this.portlet.id+"_xField":this._xField=_b44;break;case this.portlet.id+"_yField":this._yField=_b44;break;case this.portlet.id+"_numberMaximum":this._numberMaximum=_b44;this._numberMaximum.constraints.min=1;break;case this.portlet.id+"_rdoOthY":this._rdoOthY=_b44;break;case this.portlet.id+"_rdoOthN":this._rdoOthN=_b44;break;case this.portlet.id+"_rdoLegY":this._rdoLegY=_b44;break;case this.portlet.id+"_rdoLegN":this._rdoLegN=_b44;break;case this.portlet.id+"_rdoLabY":this._rdoLabY=_b44;break;case this.portlet.id+"_rdoLabN":this._rdoLabN=_b44;break;case this.portlet.id+"_rdoTruY":this._rdoTruY=_b44;break;case this.portlet.id+"_rdoTruN":this._rdoTruN=_b44;break;case this.portlet.id+"_truncField":this._truncField=_b44;this._truncField.constraints.min=1;break;case this.portlet.id+"_btnOK":this._btnOK=_b44;break;case this.portlet.id+"_btnCancel":this._btnCancel=_b44;this._btnCancel.set("style","margin-left:10px;");break;default:this[_b44.id]=_b44;if(!this.customOptions){this.customOptions=[];}var _b46=_b44.id.split(this.portlet.id);if(_b46.length==2){if(_b46[1].indexOf("_")==0){_b46[1]=_b46[1].substring(1);}this.customOptions.push({id:_b44.id,option:_b46[1]});}break;}},_validateOOTBRequired:function(){var _b47=true;if(this._entField&&!this._entField.isValid()){this._entField.set("state","Error");_b47=false;}if(this._grpField&&!this._grpField.isValid()){this._grpField.set("state","Error");_b47=false;}if(this._dimField&&!this._dimField.isValid()){this._dimField.set("state","Error");_b47=false;}if(this._metField&&!this._metField.isValid()){this._metField.set("state","Error");_b47=false;}return _b47;},toggle:function(){var that=this;var _b48=dijit.byId(that.portlet._parentId);if(_b48.permission){if(!this._childWidgets){this._childWidgets=this.getChildren();for(var i=0,len=this._childWidgets.length;i<len;i++){this._setFields(this._childWidgets[i]);}}if(!this.dialog){dojo.require("dijit.Dialog");this.dialog=new dijit.Dialog({title:this.title});this.dialog.containerNode.style.height=this.dimensions[1]+"px";if(!this.dialog.helpIcon){dojo.mixin(this.dialog,new _b3e());this.dialog.createHelpIconByTopic("Using_Widgets");}dojo.body().appendChild(this.dialog.domNode);this.dialog.containerNode.appendChild(this.domNode);dojo.style(this.dialog.domNode,{"width":this.dimensions[0]+"px","height":(this.dimensions[1]+50)+"px"});dojo.style(this.domNode,"display","");}if(this.dialog.open){this._hydrateChecked=false;this.dialog.hide();}else{var opts=this.portlet.widgetOptions;this.dialog.show(this.domNode);if(opts.title&&this._ttlField){var _b49=opts.title.replace(/'/g,"_").replace(/ /g,"_");this._ttlField.set("value",_b40[_b49]||opts.title);}if(this._entField){if(this._entField&&!this._entChange){this._entChange=dojo.connect(this._entField,"onChange",this,function(arg){var _b4a=this._entField.item?this._entField.item.fullName[0]:this._addEnt(arg),_b4b=this._remEnt(_b4a);this._pushEnt(_b4a);opts.entity=_b4a;opts.resource=_b4b;if(this._grpField){this._grpField.set("store",this._getStore(this._grpUrl.apply({grp:_b4b})));this._grpField.store.urlPreventCache=true;this._grpField.set("value","");}if(this._dimField){this._dimField.set("store",this._getStore(this._dimUrl.apply({dim:_b4b})));this._dimField.set("value","");}if(this._metField){this._metField.set("store",this._getStore(this._metUrl.apply({met:_b4b})));this._metField.set("value","");}this._checkHydrate();});}if(this._grpField&&!this._grpChange){this._grpChange=dojo.connect(this._grpField,"onChange",this,function(arg){if(!this._grpField.isValid()){return false;}var _b4c=this._grpField.store;_b4c.fetch({query:{displayName:arg},onComplete:function(i,r){var gn=_b4c.getValue(i[0],"groupName");that._pushGrp(gn);opts.groupname=gn;},queryOptions:{deep:true}});});}if(this._dimField&&!this._dimChange){this._dimChange=dojo.connect(this._dimField,"onChange",this,function(arg){if(!this._dimField.isValid()){return false;}var _b4d=this._dimField.store;_b4d.fetch({query:{displayName:arg},onComplete:function(i,r){var n=_b4d.getValue(i[0],"name");that._pushDim(n);opts.dimension=n;},queryOptions:{deep:true}});});}if(this._metField&&!this._metChange){this._metChange=dojo.connect(this._metField,"onChange",this,function(arg){if(!this._metField.isValid()){return false;}var _b4e=this._metField.store;_b4e.fetch({query:{displayName:arg},onComplete:function(i,r){var m=_b4e.getValue(i[0],"name");that._pushMet(m);opts.metric=m;},queryOptions:{deep:true}});});}if(opts.entity){if(this._originalEntity){if(this._originalEntity===opts.entity){this._checkHydrate();}else{this._entField.set("value",this._remEnt(this._originalEntity));}}else{this._entField.set("value",this._remEnt(opts.entity));this._originalEntity=opts.entity;}}}if(this._subField){if(opts.subtitle){this._subField.set("value",opts.subtitle);}else{this._subField.set("value","");}}if(this._xField){if(opts.xAxisName){this._xField.set("value",opts.xAxisName);}else{this._xField.set("value","");}}if(this._yField){if(opts.yAxisName){this._yField.set("value",opts.yAxisName);}else{this._yField.set("value","");}}if(this._numberMaximum){if(opts.numberMaximum){this._numberMaximum.set("value",opts.numberMaximum);}else{this._numberMaximum.set("value","10");}}if(this._goalField){if(opts.goal){this._goalField.set("value",opts.goal);}else{this._goalField.set("value","");}}if(this._rdoOthY){if(!opts.combineother){this._rdoOthN.set("checked",true);}else{if(opts.combineother==="true"){this._rdoOthY.set("checked",true);}else{this._rdoOthN.set("checked",true);}}}if(this._rdoLegY){if(!opts.showLegend){this._rdoLegN.set("checked",true);}else{if(opts.showLegend==="true"){this._rdoLegY.set("checked",true);}else{this._rdoLegN.set("checked",true);}}}if(this._rdoLabY){if(!opts.showLabels){this._rdoLabN.set("checked",true);}else{if(opts.showLabels==="true"){this._rdoLabY.set("checked",true);}else{this._rdoLabN.set("checked",true);}}}if(this._rdoTruY){if(!opts.truncLabels){this._rdoTruN.set("checked",true);}else{if(opts.truncLabels==="true"){this._rdoTruY.set("checked",true);}else{this._rdoTruN.set("checked",true);}}}if(this._truncField){if(opts.truncNum){this._truncField.set("value",opts.truncNum);}else{this._truncField.set("value","");}}if(this.customOptions){for(var i=0;i<this.customOptions.length;i++){var _b4f=this.customOptions[i].option,_b50=this.customOptions[i].id;if(opts[_b4f]){this[_b50].set("value",opts[_b4f]);}}}for(var i=0;i<this._childWidgets.length;i++){if(this._childWidgets[i]._myEditRowInit){this._childWidgets[i]._myEditRowInit(opts);}}if(!this._cancelClick){this._cancelClick=dojo.connect(this._btnCancel,"onClick",this,function(){for(var i=0;i<this._childWidgets.length;i++){if(this._childWidgets[i]._myEditRowCancel){this._childWidgets[i]._myEditRowCancel(opts);}}this.toggle();if(this.portlet.isNew){this.portlet.onClose();this.portlet.destroy();}});}if(!this._okClick){this._okClick=dojo.connect(this._btnOK,"onClick",this,function(){var _b51=["slxdata.ashx/slx/crm/-/analytics?"];if(this._ttlField){if(!this._ttlField.isValid()){return false;}var _b52=this._ttlField.get("value");var _b53=opts.title.replace(/'/g,"_").replace(/ /g,"_");if(_b52){this.portlet.set("title",_b52);if(_b52!=_b40[_b53]){opts.title=_b52;}}}if(this._subField){var sub=this._subField.get("value");if(sub){opts.subtitle=sub;}else{opts.subtitle="";}if(!this._subField.isValid()){return false;}}if(this._xField){var xa=this._xField.get("value");if(xa){opts.xAxisName=xa;}else{opts.xAxisName="";}if(!this._xField.isValid()){return false;}}if(this._yField){var ya=this._yField.get("value");if(ya){opts.yAxisName=ya;}else{opts.yAxisName="";}if(!this._yField.isValid()){return false;}}if(this._numberMaximum){var _b54=this._numberMaximum.get("value");if(_b54){opts.numberMaximum=_b54;}else{opts.numberMaximum="5";}this._pushLim(opts.numberMaximum);if(!this._numberMaximum.isValid()){return false;}}if(this._goalField){var gl=this._goalField.get("value");if(gl){opts.goal=gl;}else{opts.goal="";}if(!this._goalField.isValid()){return false;}}if(this._rdoLabY){var _b55=this._rdoLabY.get("value");if(_b55){opts.showLabels="true";}else{opts.showLabels="false";}}if(this._rdoTruY){var _b56=this._rdoTruY.get("value");if(_b56){opts.truncLabels="true";}else{opts.truncLabels="false";}}if(this._rdoOthY){var _b57=this._rdoOthY.get("value");if(_b57){opts.combineother="true";this._pushOth("true");}else{opts.combineother="false";this._pushOth("false");}}if(this._rdoLegY){var _b58=this._rdoLegY.get("value");if(_b58){opts.showLegend="true";}else{opts.showLegend="false";}}if(this._truncField){var num=this._truncField.get("value");if(num){opts.truncNum=num;}if(!this._truncField.isValid()){return false;}}if(!this._validateOOTBRequired()){return false;}if(this._grpField){if(!this._grpStr){this._grpField.store.fetch({query:{displayName:this._grpField.get("value")},onComplete:function(i,r){that._pushGrp(that._grpField.store.getValue(i[0],"groupName"));},queryOptions:{deep:true}});}}if(this._dimField){if(!this._dimStr){this._dimField.store.fetch({query:{displayName:this._dimField.get("value")},onComplete:function(i,r){that._pushDim(that._dimField.store.getValue(i[0],"name"));},queryOptions:{deep:true}});}}if(this._metField){if(!this._metStr){this._metField.store.fetch({query:{displayName:this._metField.get("value")},onComplete:function(i,r){that._pushMet(that._metField.store.getValue(i[0],"name"));},queryOptions:{deep:true}});}}if(this.customOptions){for(var i=0;i<this.customOptions.length;i++){var _b59=this.customOptions[i].option,_b50=this.customOptions[i].id;opts[_b59]=this[_b50].value;}}for(var i=0;i<this._childWidgets.length;i++){if(this._childWidgets[i]._myEditRowSave){this._childWidgets[i]._myEditRowSave(opts);}}if(this._dimStr){_b51.push(this._dimStr);}if(this._metStr){_b51.push(this._metStr);}if(this._entStr){_b51.push(this._entStr);}if(this._grpStr){_b51.push(this._grpStr);}if(this._limStr){_b51.push(this._limStr);}if(this._othStr){_b51.push(this._othStr);}opts.datasource=this._remAmp(_b51.join(""));dojo.publish("/ui/dashboard/pageSave",[this.portlet._page]);if(this.portlet.isNew){this.portlet.isNew=false;}this.portlet.refresh(true);this.toggle();});}}}else{_b48._raisePermissionInvalidMessage();}}});return _b42;});},"Sage/QuickForms/Design/ColumnDesigner":function(){define("Sage/QuickForms/Design/ColumnDesigner",["dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_WidgetBase","./Editors/ColumnBasicPropertyEditor","dojo/i18n!./nls/ColumnDesigner"],function(_b5a,_b5b,_b5c,lang,_b5d,_b5e,_b5f,_b60){return _b5c("Sage.QuickForms.Design.ColumnDesigner",[_b5e],{entry:null,editors:[_b5f],helpTopicName:"Column_properties",displayNameText:"Column",constructor:function(){lang.mixin(this,_b60);},set:function(name,_b61){var _b62=this.inherited(arguments);var _b63=this._getAttrNames(name),_b64=this[_b63.s];if(lang.isFunction(_b64)){_b5b.publish("/quickforms/design/designerModified",this,name,_b61,_b62,this);}return _b62;},_getWidthAttr:function(){return lang.getObject("Width",false,this.entry);},_setWidthAttr:function(_b65){lang.setObject("Width",_b65,this.entry);},_getSizeTypeAttr:function(){return lang.getObject("SizeType",false,this.entry);},_setSizeTypeAttr:function(_b66){lang.setObject("SizeType",_b66,this.entry);}});});},"Sage/UI/Controls/DropDownSelectPickList":function(){require({cache:{"url:Sage/UI/Controls/templates/DropDownSelectPickList.html":"<div>\r\n    <select id=\"${id}-Select\" data-dojo-type=\"Sage.UI.ComboBox\" shouldPublishMarkDirty=\"false\" dojoAttachPoint=\"comboBox\" value=\"${value}\" dojoAttachEvent=\"onBlur: _onBlur,onChange:_onChange\">\r\n    </select>\r\n</div>\r\n"}});define("Sage/UI/Controls/DropDownSelectPickList",["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/ComboBox","dojo/data/ItemFileReadStore","dojo/data/ObjectStore","dojo/store/Memory","Sage/UI/ComboBox","Sage/UI/Controls/PickList","dojo/_base/array","dojo/text!./templates/DropDownSelectPickList.html","dojo/_base/declare"],function(_b67,_b68,_b69,_b6a,_b6b,_b6c,_b6d,_b6e,_b6f,_b70,_b71,_b72){var _b73=_b72("Sage.UI.Controls.DropDownSelectPickList",[_b6f,_b69,_b67,_b68],{constructor:function(_b74){if(_b74.clientId){this.id=_b74.clientId+"-DropDownSelectPickList";}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);},_onChange:function(_b75){this.onChange(_b75);},_loadData:function(){var def=new dojo.Deferred();this.getPickListData(def);def.then(dojo.hitch(this,function(data){if(typeof data==="string"){this.comboBox.set("value",data);}var _b76=[];for(var i=0;i<data.items.$resources.length;i++){var item=data.items.$resources[i];_b76.push({id:item.$key,code:item.code,number:item.number,text:item.text});}this.storeData={identifier:"id",label:"text",items:_b76};var _b77=new _b6b({data:this.storeData});this.comboBox.set("store",_b77);this.comboBox.set("searchAttr","text");}),function(e){console.error(e);});},uninitialize:function(){this.inherited(arguments);},_getValueAttr:function(){var _b78=this.comboBox.get("value");if(this.storeMode==="id"){_b70.forEach(this.storeData.items,function(item){if(_b78==item.text){_b78=item.id;}},this);}return _b78;},_setPickListNameAttr:function(_b79){this.inherited(arguments);this._loadData();},value:"",templateString:_b71,widgetsInTemplate:true,storeData:null,lastValidValue:"",onChange:function(_b7a){}});return _b73;});},"Sage/UI/SLXPreviewGrid":function(){define("Sage/UI/SLXPreviewGrid",["./SLXPreviewGrid/Grid","./SLXPreviewGrid/FilterPanel","./SLXPreviewGrid/Filter/DateRange","./SLXPreviewGrid/Filter/Text"],function(Grid,_b7b,_b7c,Text){return {Grid:Grid,FilterPanel:_b7b,Filter:{DateRange:_b7c,Text:Text}};});},"Sage/QuickForms/Design/EmailControlDesigner":function(){define("Sage/QuickForms/Design/EmailControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","./TextBoxControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/EmailControlDesigner"],function(_b7d,_b7e,lang,_b7f,_b80,_b81,_b82,_b83){return _b7d("Sage.QuickForms.Design.EmailControlDesigner",[_b7f],{designSupport:{visible:true},editors:[_b81,_b82,_b80],widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %} design-email\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"design-email-icon\"></div>","</div>","</div>"]),helpTopicName:"Email_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXEmail, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Email",constructor:function(){lang.mixin(this,_b83);}});});},"Sage/Utility/PickList":function(){define("Sage/Utility/PickList",["dojo/_base/lang","dojo/_base/declare","Sage/Data/SDataServiceRegistry","dojo/json","./_LocalStorageMixin","../Utility"],function(lang,_b84,_b85,json,_b86,util){var _b87=_b84("Sage.Utility.PickList",[_b86],{_storageNameSpace:"PickListData",checkStaleCache:function(){var _b88=this.getFromLocalStorage("modified_at",this._storageNameSpace);var _b89=sessionStorage.getItem("PickListChangeStateCheck");if(_b88&&_b89===null){_b88=new Date(Date.parse(_b88));var _b8a,_b8b,_b8c,data;data=sessionStorage.getItem("pickListExpireCheck");if(data===null){_b8a=_b85.getSDataService("system");_b8b=new Sage.SData.Client.SDataServiceOperationRequest(_b8a);_b8b.setOperationName("getPickListsChangeState");_b8b.execute({},{success:lang.hitch(this,function(data){if(!data||!data.response||!data.response.lastModifiedDate){return;}var _b8d=util.Convert.toDateFromString(data.response.lastModifiedDate);if(this._isLocalStorageExpired(_b88,_b8d)){this.clear(this._storageNameSpace);}})});sessionStorage.setItem("PickListChangeStateCheck","true");}}},_isLocalStorageExpired:function(_b8e,_b8f){_b8e.setSeconds(0);_b8f.setSeconds(0);_b8e.setMilliseconds(0);_b8f.setMilliseconds(0);return _b8f.valueOf()>=_b8e.valueOf();},});Sage.namespace("Utility.PickList");lang.mixin(Sage.Utility.PickList,new _b87());return Sage.Utility.PickList;});},"Sage/UI/Dashboard/BaseWidget":function(){define("Sage/UI/Dashboard/BaseWidget",["Sage/UI/Dashboard/BaseWidget","Sage/Utility","dojo/i18n","Sage/UI/EditorContainer","dojo/_base/declare","dojo/i18n!./nls/WidgetDefinition"],function(_b90,util,i18n,_b91,_b92){var _b93=_b92("Sage.UI.Dashboard.BaseWidget",null,{constructor:function(def){dojo.safeMixin(this,def);},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","WidgetDefinition"));this.inherited(arguments);},family:"System",prefHeight:0.33,timestamp:true,_getEditorString:function(_b94,_b95){var _b96=i18n.getLocalization("Sage.UI.Dashboard","WidgetDefinition");var _b97=_b96[this.name];if(_b97){_b97+=" "+_b96["settingsText"];}else{_b97=_b96["defaultWidgetText"];}_b94._pcid=_b95;var cont=new _b91(_b94);if(!cont){}if(this._editorTpl){return this._editorTpl.apply({title:_b97,id:_b95+"_editor",content:cont.doTemplate()});}return "";}});return _b93;});},"Sage/TaskPane/ActivityTaskConfigurationProvider":function(){define("Sage/TaskPane/ActivityTaskConfigurationProvider",["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/Services/ActivityService","Sage/TaskPane/ActivityTaskContents","Sage/TaskPane/ActivityTaskPaneItem","dojo/on","dojo/_base/lang","dojo/i18n!./nls/ActivityTaskConfigurationProvider","dojo/_base/declare"],function(_b98,_b99,_b9a,_b9b,_b9c,on,lang,_b9d,_b9e){var _b9f=_b9e("Sage.TaskPane.ActivityTaskConfigurationProvider",[_b99,_b98],{serviceMap:{"groupContextService":"ClientGroupContext"},_roleSecurityService:null,_currentUserId:null,scheduleText:"Schedule",eventText:"Event",phoneCallText:"Phone Call",toDoText:"To-Do",meetingText:"Meeting",personalActivityText:"Personal Activity",deleteConfirmationText:"Delete Confirmation",acceptConfirmationText:"Accept Confirmation",declineConfirmationText:"Decline Confirmation",completeActivityText:"Complete Activity",deleteActivityText:"Delete Activity",deleteEventText:"Delete Event",scheduleEventText:"Schedule Event",scheduleRequestText:"Schedule Request",deleteRequestText:"Delete Request",recordsSelectedText:"record(s) selected",clearText:"Clear",actionNameSpace:"Sage.TaskPane.ActivityTaskPaneActions",_taskConfigs:false,constructor:function(_ba0){lang.mixin(this,_b9d);this.inherited(arguments);this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));var _ba1=Sage.Services.getService("ClientContextService");if(_ba1){if(_ba1.containsKey("userID")){this._currentUserId=_ba1.getValue("userID");}}this._roleSecurityService=Sage.Services.getService("RoleSecurityService");},_onGroupContextChanged:function(){this.onConfigurationChange();},onConfigurationChange:function(){},_createConfiguration:function(){var _ba2;var _ba3=this.groupContextService&&this.groupContextService.getContext();var _ba4=_ba3&&_ba3["CurrentGroupID"];var _ba5=this.getTaskConfiguration(_ba4);var _ba6=new _b9b({taskTemplate:_ba5.configuration.taskTemplate});_ba6.startup();var _ba7={tabId:_ba5.configuration.key,taskPane:_ba6};return _ba7;},getTaskConfiguration:function(key){var _ba8=this.getTaskConfigurations();for(var i=0;i<_ba8.length;i++){if(_ba8[i].key.toUpperCase()===key.toUpperCase()){return _ba8[i];}}var _ba9={key:"default",configuration:this._getDefaultConfig()};return _ba9;},getTaskConfigurations:function(){if(this._taskConfigs){return this._taskConfigs;}this._taskConfigs=[{key:"activities",configuration:this._getActivityConfig()},{key:"allopen",configuration:this._getActivityConfig()},{key:"pastdue",configuration:this._getPastDueConfig()},{key:"alarms",configuration:this._getAlarmConfig()},{key:"events",configuration:this._getEventConfig()},{key:"confirmations",configuration:this._getConfirmConfig()},{key:"literature",configuration:this._getLitRequestConfig()}];return this._taskConfigs;},_getTaskTemplateString:function(_baa,_bab){var ts=[];ts.push("<div class=\"task-pane-item-common-tasklist\">");ts.push("<span id=\"selectionCount\" class=\"task-pane-item-common-selectionText\"> 0 </span><span id=\"selectionText\"> "+this.recordsSelectedText+"</span><br>");ts.push("<a id=\"clearSelection\" href=\"#\" class=\"task-pane-item-common-clearselection\" dojoAttachEvent=\"click:_clearSelection\">"+this.clearText+"</a><br>");ts.push("<hr>");for(var i=0;i<_baa.length;i++){var task=_baa[i];var _bac=this.actionNameSpace;if(task.actionNameSpace){_bac=task.actionNameSpace;}if(task.template){ts.push(task.template);}else{ts.push("<li>");var _bad="";if(task.style){_bad=task.style;}ts.push(dojo.string.substitute("<div dojotype=\"Sage.TaskPane.ActivityTaskPaneItem\" class=\"task-pane-item-common-tasklist\" style=\"${4}\"  linkText=\"${3}\" securedAction=\"${4}\" action=\"javascript: ${1}.${2}\"></div>",[task.taskId,_bac,task.action,task.displayName,task.securedAction,_bad]));}}ts.push("</div>");return ts;},_getCommonTasks:function(){var _bae=[];return _bae;},_getCommonActivityTasks:function(){var _baf=this._getCommonTasks();_baf.push({template:"<div class='slxLabel'>"+this.scheduleText+"</div>"});_baf.push({template:"<div style='padding-left:15px;'>"});_baf.push({taskId:"SchedulePhoneCall",type:"Link",displayName:this.phoneCallText,action:"schedulePhoneCall();",securedAction:"",style:"padding-left:15px;"});_baf.push({taskId:"ScheduleMeeting",displayName:this.meetingText,action:"scheduleMeeting()",securedAction:"",style:"padding-left:15px;"});_baf.push({taskId:"ScheduleToDo",type:"Link",displayName:this.toDoText,action:"scheduleToDo();",securedAction:"",style:"padding-left:15px;"});_baf.push({taskId:"SchedulePersonal",type:"Link",displayName:this.personalActivityText,action:"schedulePerosnalActivity();",securedAction:"",style:"padding-left:15px;"});_baf.push({template:"</div>"});_baf.push({taskId:"Complete",type:"Link",displayName:this.completeActivityText,action:"completeActivity();",securedAction:""});_baf.push({taskId:"Delete",type:"Link",displayName:this.deleteActivityText,action:"deleteActivity();",securedAction:""});return _baf;},_getActivityConfig:function(_bb0,_bb1){var _bb2=this._getCommonActivityTasks();var _bb3="Activities";var _bb4=this._getTaskTemplateString(_bb2,_bb3);var _bb5=new Simplate(_bb4);var _bb6={key:"activities",taskTemplate:_bb5};return _bb6;},_getPastDueConfig:function(_bb7,_bb8){var _bb9=this._getCommonActivityTasks();var _bba="Past Due";var _bbb=this._getTaskTemplateString(_bb9,_bba);var _bbc=new Simplate(_bbb);var _bbd={key:"PastDue",taskTemplate:_bbc};return _bbd;},_getAlarmConfig:function(_bbe,_bbf){var _bc0="<div>Test</div>";var _bc1=this._getCommonActivityTasks();var _bc2="Alarms";var _bc3=this._getTaskTemplateString(_bc1,_bc2);var _bc4=new Simplate(_bc3);var _bc5={key:"Alarms",taskTemplate:_bc4};return _bc5;},_getLitRequestConfig:function(_bc6,_bc7){var _bc8=this._getCommonTasks();_bc8.push({taskId:"ScheduleLitRequest",displayName:this.scheduleRequestText,action:"scheduleLitRequest();",securedAction:"",style:"padding-left:15px;"});_bc8.push({taskId:"DeleteRequest",displayName:this.deleteRequestText,action:"deleteLitRequest();",securedAction:""});var _bc9="Litature Requests";var _bca=this._getTaskTemplateString(_bc8,_bc9);var _bcb=new Simplate(_bca);var _bcc={key:"LitRequests",taskTemplate:_bcb};return _bcc;},_getEventConfig:function(_bcd,_bce){var _bcf=this._getCommonTasks();_bcf.push({taskId:"ScheduleEvent",displayName:this.scheduleEventText,action:"scheduleEvent();",securedAction:"",style:"padding-left:15px;"});_bcf.push({taskId:"DeleteEvent",displayName:this.deleteEventText,action:"deleteEvent();",securedAction:""});var _bd0="Events";var _bd1=this._getTaskTemplateString(_bcf,_bd0);var _bd2=new Simplate(_bd1);var _bd3={key:"Events",taskTemplate:_bd2};return _bd3;},_getConfirmConfig:function(_bd4,_bd5){var _bd6=this._getCommonTasks();_bd6.push({taskId:"AcceptConfirmation",displayName:this.acceptConfirmationText,action:"acceptConfirmation();",securedAction:""});_bd6.push({taskId:"DeclineConfirmation",displayName:this.declineConfirmationText,action:"declineConfirmation();",securedAction:""});_bd6.push({taskId:"DeleteConfirmation",displayName:this.deleteConfirmationText,action:"deleteConfirmation();",securedAction:""});var _bd7="Confirmations";var _bd8=this._getTaskTemplateString(_bd6,_bd7);var _bd9=new Simplate(_bd8);var _bda={key:"Confirmations",taskTemplate:_bd9};return _bda;},_getDefaultConfig:function(_bdb,_bdc){var _bdd={};var _bde="Default";var _bdf=this._getTaskTemplateString(_bdd,_bde);var _be0=new Simplate(_bdf);var _be1={key:"Default",taskTemplate:_be0};return _be1;},buildTaskConfiguration:function(key,_be2,_be3){var _be4=this._getTaskTemplateString(_be3,_be2);var _be5=new Simplate(_be4);var _be6={key:key,taskTemplate:_be5};return _be6;},addTaskConfiguration:function(_be7){var _be8=this.getTaskConfiguration(_be7.key);if(_be8.key==="default"){var _be9={key:_be7.key,configuration:_be7};var _bea=this.getTaskConfigurations();_bea.push(_be9);}else{_be8.configuration=_be7;}},requestConfiguration:function(_beb){this._onRequestConfigurationSuccess(_beb,null);},_onRequestConfigurationSuccess:function(_bec,_bed){if(_bec.success){_bec.success.call(_bec.scope||this,this._createConfiguration(_bed,_bec),_bec,this);}this._createConfiguration(_bed,_bec);},_onRequestConfigurationFailure:function(_bee,_bef){if(_bee.failure){_bee.failure.call(_bee.scope||this,_bef,_bee,this);}},_scheduleMeeting:function(_bf0){}});return _b9f;});},"Sage/UI/nls/ListPanel":function(){define("Sage/UI/nls/ListPanel",["Sage/LanguageList","dojo/_base/lang"],function(_bf1,lang){var nls={root:{listText:"List",summaryText:"Summary",detailText:"Detail",hideDetailText:"Hide Detail",unsavedDataText:"*unsaved data",helpText:"Help",refreshText:"Refresh",displayingText:"Displaying",ofText:"of"}};return lang.mixin(_bf1,nls);});},"Sage/UI/ActivityScheduler":function(){define("Sage/UI/ActivityScheduler",["dojo/i18n","dojo/date","dijit/Menu","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility/UserOptions","Sage/Utility/Activity","Sage/Utility","Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg","dojo/i18n!./nls/ActivityScheduler","dojo/_base/declare","dojo/_base/lang","dojo/string"],function(i18n,_bf2,_bf3,_bf4,_bf5,_bf6,_bf7,_bf8,_bf9,_bfa,_bfb,_bfc,_bfd){var _bfe=_bfb("Sage.UI.ActivityScheduler",null,{_weekStart:null,_scheduler:null,_schedulerId:"slxLogixScheduler",schedulerContextMenu:null,eventConnections:[],_menuItems:null,_contentWindow:null,_iFrameId:null,_userOptions:{},_schedulerLaunched:false,self:this,_recurringIcon:"../../images/icons/recurring_14x14.png",_attachmentIcon:"../../images/icons/attach_14x14.png",_alarmIcon:"../../images/icons/alarm_14x14.png",_activityCompleteIcon:"../../images/icons/completed_step_14x14.png",_userActivityData:{},_currentActivity:{},_securityAccessData:[],constructor:function(_bff,_c00,_c01,_c02){_bfc.mixin(this,_bfa);this._userOptions={daystarttime:"9",dayendtime:"6",defaultactivity:"meeting",starttime:"8",endtime:"5",weekstart:"1",numevents:"3",defaultcalendarview:"month",defaultinterval:15,displaycontactaccount:"0",rememberusers:true,workweekmon:true,workweektue:true,workweekwed:true,workweekthu:true,workweekfri:true,workweeksat:false,workweeksun:false,workweek:[1,2,3,4,5],showonopportunities:false,showonregarding:false,showonphonenumber:false,showontime:false};_scheduler=_c01.scheduler;_schedulerId=_c00;this._menuItems=[];this._contentWindow=_c01;this._iFrameId=_c02;this._preloadCalendarUserOptions();var self=this;dojo.subscribe("/entity/activity/updateScheduler",function(data){self._updateSchedulerEvent(data);});dojo.subscribe("/entity/activity/clearScheduler",function(){self._clearScheduler();});dojo.subscribe("/entity/activity/addToScheduler",function(data){self._addSchedulerEvent(data);});dojo.subscribe("/entity/activity/deleteFromScheduler",function(id){if(id){if(id.indexOf("result")==-1){self._deleteSchedulerEvent(id);}}});},_loadAllEvents:function(data){setTimeout(function(){this._scheduler.parse(data,"json");},100);},_addSchedulerEvent:function(data){if(data!=null){var _c03=dojo.clone(data);var _c04=[];_c04.push(_c03);self._scheduler.parse(_c04,"json");}},_updateSchedulerEvent:function(data){if(data!=null){var _c05=dojo.clone(data);self._scheduler.deleteEvent(_c05.id);var _c06=[];_c06.push(_c05);self._scheduler.parse(_c06,"json");}},_deleteSchedulerEvent:function(_c07){_scheduler.deleteEvent(_c07);},_setCurrentDate:function(date){_scheduler.setCurrentView(date);},_getSchedulerDate:function(){return _scheduler._date;},_launchScheduler:function(){_scheduler.init(_schedulerId,new Date(),this._userOptions["defaultcalendarview"]);this._schedulerLaunched=true;this._userOptions["date"]=_scheduler.date;this._userOptions["weekStartDate"]=_scheduler._week_min_date;this._userOptions["weekEndDate"]=_scheduler._week_max_date;this._userOptions["workWeekStartDate"]=_scheduler._workweek_min_date;this._userOptions["workWeekEndDate"]=_scheduler._workweek_max_date;dojo.publish("/entity/activity/SchedulerCreated",[this._userOptions,this]);},_clearScheduler:function(){_scheduler.clearAll();},_clearSchedulerEvents:function(data){if(data){for(var i=0;i<data.length;i++){_scheduler.deleteEvent(data[i]);}}},_loadTimelessActivities:function(){var ar=[];ar.push(_scheduler._mode);ar.push(_scheduler._date);ar.push(self._getWeekStart(date));dojo.publish("/entity/activity/calendar/schedulerDateChanged",[ar,this]);},_initScheduler:function(){_scheduler.config.scroll_hour=this._userOptions["daystarttime"];_scheduler.config.workWeek=this._userOptions["workweek"];_scheduler.config.workHours=[0,this._userOptions["daystarttime"]*60,this._userOptions["dayendtime"]*60,24*60];_scheduler.config.eventsMaxCount=this._userOptions["numevents"];_scheduler.locale={date:this.scheduler_dates,labels:this.scheduler_labels};_scheduler.templates.day_scale_date=function(d){var _c08=_scheduler.date.date_to_str("%l");return _c08(d);};_scheduler.templates.day_date=function(dt){return _bf7.formatLongDate(dt);};_scheduler.templates.week_date=function(d1,d2){var _c09=_scheduler.date.date_to_str("%F %d");var _c0a=_scheduler.date.date_to_str("%d, %Y");if(d1.getMonth()!=d2.getMonth()){return _bf7.formatLongDate(d1)+" &ndash; "+_bf7.formatLongDate(_scheduler.date.add(d2,-1,"day"));}else{var d3=scheduler.date.add(d2,-1,"day");return _bf7.formatLongDate(d1)+" &ndash; "+_bf7.formatLongDate(_scheduler.date.add(d2,-1,"day"));}};var _c0b=function(id){var _c0c=false;if(id){if(id.trim()!=""){_c0c=true;}}return _c0c;};var _c0d=_scheduler.date.date_to_str("%g:%i %A");var _c0e=_scheduler.date.date_to_str("%m/%d/%Y");_scheduler.templates.tooltip_text=function(_c0f,end,_c10){var type=_c10.type;var _c11="";var _c12=(_c10.subType==null)?"":_c10.subType.replace("at","");if(type=="event"){_c11="<b>"+self.tooltipType+" :</b> Event<br><b>"+self.tooltipDayType+" :</b> "+_c12;_c11+="<br/><b>"+self.tooltipStartDate+" :</b> "+_bf7.formatEventDate(_c0f);_c11+="<br/><b>"+self.tooltipEndDate+" :</b> "+_bf7.formatDateAdd(end,"day",-1);if(_c10.location){_c11+="<br/><b>"+self.tooltipLocation+" :</b> "+_c10.location;}if(_c10.description){_c11+="<br/><b>"+self.tooltipDescription+" :</b> "+_c10.description;}}else{_c11="<b>"+self.tooltipTime+" :</b> "+_c0d(_c0f)+" - "+_c0d(end);if(_c0b(_c10.leadId)){if(_c10.leadName){_c11+="<br/><b>"+self.tooltipLeadName+" :</b> "+_c10.leadName;}if(_c10.accountName){_c11+="<br/><b>"+self.tooltipCompanyName+" :</b> "+_c10.accountName;}}else{if(_c10.contactName){_c11+="<br/><b>"+self.tooltipContactName+" :</b> "+_c10.contactName;}if(_c10.accountName){_c11+="<br/><b>"+self.tooltipAccountName+" :</b> "+_c10.accountName;}}if(_c10.phoneNumber){_c11+="<br/><b>"+self.tooltipPhoneNumber+" :</b> "+_c10.phoneNumber;}if(_c10.location){_c11+="<br/><b>"+self.tooltipLocation+" :</b> "+_c10.location;}if(_c10.regarding){_c11+="<br/><b>"+self.tooltipRegarding+" :</b> "+_c10.regarding;}if(_c10.priority){_c11+="<br/><b>"+self.tooltipPriority+" :</b> "+_c10.priority;}if(_c10.notes){_c11+="<br/><b>"+self.tooltipNotes+" :</b> "+_c10.notes;}}return _c11;};_scheduler.clearAll();var self=this;_scheduler.attachEvent("onTemplatesReady",function(){_scheduler.date.workweek_start=_scheduler.date.WorkWeekStart;_scheduler.templates.workweek_date=_scheduler.templates.week_date;_scheduler.templates.workweek_scale_date=_scheduler.templates.week_scale_date;_scheduler.date.add_workweek=function(date,inc){return _scheduler.date.add(date,inc*7,"day");};_scheduler.date.get_workweek_end=function(date){var _c13=self._userOptions["workweek"][(self._userOptions["workweek"].length)-1]-self._userOptions["workweek"][0];return _scheduler.date.add(date,_c13,"day");};});_scheduler.date.WorkWeekStart=function(date){var _c14=self._userOptions["workweek"][0];if(date==null){date=new Date();}var _c15=date.getDay();_c15=_c14-_c15;var _c16=_scheduler.date.add(date,_c15,"day");if(_c16>date){_c16=_scheduler.date.add(_c16,-7,"day");}return _scheduler.date.date_part(_c16);};_scheduler.templates.event_title_class=function(_c17,end,_c18){var mode=_scheduler.getState().mode;if(mode!=="month"&&_c18.type!=="event"){if(!_c18.confirmed){return "pending";}}return "";};_scheduler.date.getDay=function(_c19){var _c1a=_c19;if(_c19.length>1){var _c1b=[];_c1b["SUNDAY"]=0;_c1b["MONDAY"]=1;_c1b["TUESDAY"]=2;_c1b["WEDNESDAY"]=3;_c1b["THURSDAY"]=4;_c1b["FRIDAY"]=5;_c1b["SATURDAY"]=6;_c1a=_c1b[_c19.toUpperCase()];}if(!_c1a){_c1a=1;}return _c1a;};_scheduler.templates.event_header=function(_c1c,end,ev){var html="";var _c1d=_scheduler.date.date_to_str("%g:%i %A");var _c1e=_scheduler.date.date_to_str("%g:%i");if(ev.iconSrc){html+="<img src=\""+ev.iconSrc+"\" style=\"float:left;padding-right:4px;\"/>";}if(ev["recurring"]){html+="  <img src=\""+self._recurringIcon+"\" style=\"float:left;padding-right:4px;\"/>";}if(_scheduler._mode==="day"){if(ev["attachment"]){html+="  <img src=\""+self._attachmentIcon+"\" style=\"float:left;padding-right:4px;\"/>";}if(ev["alarm"]){html+="  <img src=\""+self._alarmIcon+"\" style=\"float:left;padding-right:4px;\"/>";}}if(ev["id"].toString().indexOf("-hist")>0){html+="  <img src=\""+self._activityCompleteIcon+"\" style=\"float:left;padding-right:4px;\"/>";}if(_scheduler._mode==="day"){html+=_c1d(_c1c)+"-"+_c1d(end);}else{html+=_c1e(_c1c)+"-"+_c1e(end);}return html;},_scheduler.templates.event_text=function(_c1f,end,ev){var _c20="";var _c21=_scheduler.date.date_to_str("%g:%i %A");if(_scheduler._mode!=="month"){var _c22=ev["contactId"];var _c23=ev["contactName"];var _c24=ev["leadId"];var _c25=ev["leadName"];var _c26=ev["accountId"];var _c27=ev["accountName"];var _c28=ev["opportunityId"];var _c29=ev["opportunity"];var _c2a="";var _c2b="";var _c2c=false;if(_c2c){_c20+="</br>";}if(_c0b(_c24)&&_c27){if(_c25){_c2a="<a href=\"javascript:void(window.parent.location ='../../Lead.aspx?entityid="+_c24+"')\" >"+_c25+"</a><br>";}_c2b="<a href=\"javascript:void(window.parent.location ='../../Lead.aspx?entityid="+_c24+"')\" >"+_c27+"</a><br>";}else{if(_c0b(_c26)&&_c27){_c2b="<a href=\"javascript:void(window.parent.location = '../../Account.aspx?entityid="+_c26+"')\">"+_c27+"</a><br>";}if(_c0b(_c22)){_c2a="<a href=\"javascript:void(window.parent.location ='../../Contact.aspx?entityid="+_c22+"')\" >"+_c23+"</a><br>";}}switch(self._userOptions["displaycontactaccount"]){case "0":_c20+=_c2a;break;case "1":_c20+=_c2b;break;case "2":_c20+=_c2a;_c20+=_c2b;break;case "3":_c20+=_c2b;_c20+=_c2a;break;case "4":_c20+="";break;}if(self._userOptions["showonopportunities"]&&_c0b(_c28)){_c20+="<a href=\"javascript:void(window.parent.location ='../../Opportunity.aspx?entityid="+_c28+"&modeid=Detail')\" >"+_c29+"</a><br>";}if(self._userOptions["showonphonenumber"]&&ev["phoneNumber"]){_c20+=ev["phoneNumber"]+"<br/>";}if(self._userOptions["showonregarding"]&&ev["regarding"]){_c20+=ev["regarding"]+"<br/>";}if(self._userOptions["showontime"]){_c20+=_c21(_c1f)+"-"+_c21(end)+"<br/>";}if(ev["location"]){_c20+=ev["location"]+"<br/>";}if(ev["priority"]){_c20+=ev["priority"]+"<br/>";}if(ev["notes"]){_c20+=ev["notes"];}}else{_c20=ev.text;}return _c20;};_scheduler.date.week_start=function(date){var _c2d=self._userOptions["weekstart"];if(date==null){date=new Date();}var _c2e=date.getDay();_c2e=_c2d-_c2e;var _c2f=_scheduler.date.add(date,_c2e,"day");if(_c2f>date){_c2f=_scheduler.date.add(_c2f,-7,"day");}return _scheduler.date.date_part(_c2f);};_scheduler.date.arraySort=function(a,b){return a-b;};_scheduler.addEventNow=function(_c30,end,type){var _c31,_c32,_c33;if(_c30==null){if(_scheduler._mode==="month"){_c31=_bf7.roundDateToNextQuarterHour(new Date());}else{_c31=new Date();}}else{var _c34=new Date(_c30);if(_scheduler._mode==="month"){_c34.setMinutes(new Date().getMinutes());_c34.setHours(new Date().getHours());_c31=_bf7.roundDateToNextQuarterHour(_c34);}else{_c31=_c34;}}_c32=end==null?_c31:new Date(end);if(type==null||typeof type=="object"){type=self._userOptions["defaultactivity"];}if(end!=null){_c33=dojo.date.difference(_c31,new Date(end),"minute");}else{_c33="60";}var svc=Sage.Services.getService("ActivityService");if(type=="event"){var args={StartDate:Sage.Utility.Convert.toIsoStringFromDate(_c31),EndDate:Sage.Utility.Convert.toIsoStringFromDate(_c32)};svc.scheduleEvent(args);}else{if(type!=null){if(type.toLowerCase().indexOf("phone")>-1){type="PhoneCall";}else{if(type.toLowerCase().indexOf("meeting")>-1){type="Meeting";}else{if(type.toLowerCase().indexOf("to")>-1){type="ToDo";}else{if(type.toLowerCase().indexOf("personal")>-1){type="PersonalActivity";}else{type="Meeting";}}}}}svc.scheduleActivity({type:type,preConfigured:{StartDate:Sage.Utility.Convert.toIsoStringFromDate(_c31),Duration:_c33}});}};_scheduler.xy.menu_width=0;_scheduler.config.details_on_dblclick=true;_scheduler.config.details_on_create=true;_scheduler.attachEvent("onClick",function(){return false;});_scheduler.showLightbox=function(_c35){if(_c35!=null&&_c35!=undefined){if(typeof _c35=="string"){var eId=_c35.replace("0:","");var _c36=eId.split("-");if(_c36[2]=="act"){if(_scheduler._events[_c35]&&!_scheduler._events[_c35].confirmed){Sage.Link.confirmActivityFor(_c36[0],_c36[1]);}else{Sage.Link.editActivity(_c36[0],false,_c36[1]);}}else{if(_c36[1]=="evt"||_c36[2]=="evt"){Sage.Link.editEvent(_c36[0]);}else{if(_c36[1]=="hist"||_c36[2]=="hist"){Sage.Link.editHistory(_c36[0]);}}}}}};_scheduler.getCalendarEventID=function(_c37){var _c38=_c37;if(_c37!=null&&_c37!=undefined){if(typeof _c37=="string"){_c37=_c37.replace("0:","");var eId=_c37.split("-");_c38=eId[0];}}return _c38;};_scheduler.getCalendarEventUserID=function(_c39){var _c3a=_c39;if(_c39!=null&&_c39!=undefined){if(typeof _c39=="string"){_c39=_c39.replace("0:","");var eId=_c39.split("-");_c3a=eId[1];}}return _c3a;};_scheduler.goToActivityAssociation=function(_c3b,_c3c){var _c3d=null;if(_scheduler._events&&_scheduler._events[_c3c]){switch(_c3b){case "Contact":_c3d=_scheduler._events[_c3c].contactId;break;case "Account":_c3d=_scheduler._events[_c3c].accountId;break;case "Lead":_c3d=_scheduler._events[_c3c].leadId;break;case "Opportunity":_c3d=_scheduler._events[_c3c].opportunityId;break;case "Ticket":_c3d=_scheduler._events[_c3c].ticketId;break;}}if(_c0b(_c3d)){Sage.Link.entityDetail(_c3b,_c3d);}};_scheduler.openActivity=function(_c3e){_scheduler.showLightbox(_c3e);};_scheduler.completeActivity=function(_c3f){Sage.Link.completeActivity(_scheduler.getCalendarEventID(_c3f));};_scheduler.getMenuActivityAction=function(_c40,_c41){if(!_c40){return false;}var _c42=false;var _c43=_scheduler.getCalendarEventUserID(_c40);var _c44=_scheduler._events[_c40]["leaderUserId"];var _c45=_bf8.getClientContextByKey("userID");var _c46=_scheduler._events[_c40]["confirmed"]||false;var _c47=_scheduler._events[_c40]["allowDelete"];var _c48=_scheduler._events[_c40]["allowEdit"];switch(_c41){case "delete":if(_c47){if(_c43===_c44){_c42="delete";}else{if(_c46){_c42="declineConfirmed";}else{_c42="decline";}}}else{if(_c45===_c43){if(_c45===_c44){_c42="delete";}else{if(_c46){_c42="declineConfirmed";}else{_c42="decline";}}}else{_c42=false;}}break;case "complete":if(_c46&&_c43===_c44&&_c48){_c42=true;}break;}return _c42;};_scheduler.deleteActivity=function(_c49){var _c4a=_scheduler.getCalendarEventID(_c49);Sage.Link.deleteActivity(_c4a);};_scheduler.declineConfirmedUserActivity=function(_c4b){var _c4c=_scheduler.getCalendarEventID(_c4b);var _c4d=_scheduler.getCalendarEventUserID(_c4b);var _c4e=_scheduler._events[_c4b]["leaderUserId"];_c4c=_c4c.indexOf(";")>0?_c4c.substring(0,12):_c4c;var _c4f={"$key":_c4c,"Leader":{"$key":_c4e}};var _c50=Sage.Services.getService("ActivityService");_c50.declineMemberConfirmation(_c4f,_c4d);};_scheduler.declineActivity=function(_c51){var _c52=_scheduler.getCalendarEventID(_c51);var _c53=_scheduler.getCalendarEventUserID(_c51);var _c54=Sage.Services.getService("ActivityService");_c54.confirmActivityFor(_c52,_c53,self._loadNotification,self);};_scheduler.deleteActivityEvent=function(_c55){Sage.Link.deleteEvent(_scheduler.getCalendarEventID(_c55));};_scheduler.attachEvent("onEventAdded",function(_c56,_c57){if(typeof _c56!="string"){_scheduler.addEventNow(_c57.start_date,_c57.end_date,"atAppointment");_scheduler.deleteEvent(_c56);}});_scheduler.attachEvent("onBeforeEventChanged",function(_c58,_c59,_c5a){if(_c5a){switch(this._mode){case "day":case "week":case "workweek":_scheduler.addEventNow(_c58.start_date,_c58.end_date,self._userOptions["defaultactivity"]);_scheduler.deleteEvent(_c58.id);break;case "month":var _c5b=_c58.end_date;if(dojo.date.compare(_c58.end_date,_c58.start_date)>0){_c5b=dojo.date.add(_c58.end_date,"day",-1);}_scheduler.addEventNow(_c58.start_date,_c5b,"event");_scheduler.deleteEvent(_c58.id);break;}}else{var _c5c={Id:_c58.id,Text:_c58.text,StartDate:_c58.start_date,Alarm:_c58.alarm,EndDate:Sage.Utility.Convert.toIsoStringFromDate(_c58.end_date),AlarmMinutesBefore:_c58.alarmMinutesBefore||-15,Duration:dojo.date.difference(_c58.start_date,_c58.end_date,"minute")};if(typeof _c58.id=="string"){if(_c58.id&&_c58.id.indexOf("-act")>0){_c5c.Id=_scheduler.getCalendarEventID(_c58.id);_c5c.UserId=_scheduler.getCalendarEventUserID(_c58.id);if(_c5c.AlarmMinutesBefore){_c5c.AlarmTime=dojo.date.add(_c5c.StartDate,"minute",_c5c.AlarmMinutesBefore);_c5c.AlarmTime=Sage.Utility.Convert.toIsoStringFromDate(_c5c.AlarmTime);}_c5c.StartDate=Sage.Utility.Convert.toIsoStringFromDate(_c5c.StartDate);self._currentActivity=_c5c;if(_c58.id.indexOf(";")>0){self.onEditRecurrenceActivity(_c5c.Id);}else{self._updateUserActivity();}}else{if(_c58.id&&_c58.id.indexOf("-evt")>0){_c5c.Id=_c58.id.replace("-evt","");_c5c.EndDate=dojo.date.add(_c58.end_date,"day",-1);self._updateEvent(_c5c);}}}}return true;});_scheduler.attachEvent("onViewChange",function(mode,date){var _c5d={};_c5d.mode=mode;_c5d.date=date;_c5d.weekStartDate=_scheduler._week_min_date;_c5d.weekEndDate=_scheduler._week_max_date;_c5d.workWeekStartDate=_scheduler._workweek_min_date;_c5d.workWeekEndDate=_scheduler._workweek_max_date;dojo.publish("/entity/activity/calendar/schedulerDateChanged",[_c5d,this]);});_scheduler.attachEvent("onContextMenu",function(_c5e,_c5f){var pos=_scheduler._mouse_coords(_c5f);var _c60=_scheduler._min_date.valueOf()+(pos.y*_scheduler.config.time_step+(_scheduler._table_view?0:pos.x)*24*60)*60000;_c60=_scheduler._correct_shift(_c60);self._bindContextMenu(_c5e,_c60);});var _c61=_scheduler.date.date_to_str("%g %A");_scheduler.config.hour_size_px=(60/this._userOptions["defaultinterval"])*42;_scheduler.templates.hour_scale=function(date){html="";for(var i=0;i<60/self._userOptions["defaultinterval"];i++){if(i===0){html+="<div style='height:21px;line-height:21px;border-bottom: 1px solid #DcDcDc;'>"+_c61(date)+"</div>";date=_scheduler.date.add(date,self._userOptions["defaultinterval"],"minute");}else{html+="<div style='height:21px;line-height:21px;'></div>";}}return html;};_scheduler.render_event_bar=function(ev){if(this._cols[ev._sday]==0){return;}var _c62=this._rendered_location;var x=this._colsS[ev._sday];var x2=this._colsS[ev._eday];if(x2==x){x2=this._colsS[ev._eday+1];}var hb=this.xy.bar_height;var y=this._colsS.heights[ev._sweek]+(this._colsS.height?(this.xy.month_scale_height+2):2)+(ev._sorder*hb);var d=document.createElement("DIV");var cs=ev._timed?"dhx_cal_event_clear":"dhx_cal_event_line";var cse=_scheduler.templates.event_class(ev.start_date,ev.end_date,ev);if(cse){cs=cs+" "+cse;}var _c63=(ev.color?("background-color:"+ev.color+";"):"");var _c64=(ev.textColor?("color:"+ev.textColor+";"):"");var html="";var _c65=10;var _c66=(this.xy.month_scale_height+_c65)+2;var _c67=this._colsS.heights[ev._sweek+1]-y;if(this._mode!=="month"||(this._mode==="month"&&(_c67>_c66))){var _c68=x2-x-15;if(ev["id"].toString().indexOf("-evt")===-1){x+=5;_c68=x2-x-8;}html="<div event_id=\""+ev.id+"\" class=\""+cs+"\" style=\"position:absolute; top:"+y+"px; left:"+x+"px; width:"+_c68+"px;"+_c64+""+_c63+""+(ev._text_style||"")+"\" id =\""+_scheduler.uid()+"\">";if(ev._timed){if(ev.iconSrc){html+="<img src=\""+ev.iconSrc+"\" style=\"float:left;padding-right:4px;\"/>";}if(ev["id"].toString().indexOf("-hist")>0){html+="  <img src=\""+self._activityCompleteIcon+"\" style=\"float:left;padding-right:4px;\"/>";}html+=_scheduler.templates.event_bar_date(ev.start_date,ev.end_date,ev);}html+=_scheduler.templates.event_bar_text(ev.start_date,ev.end_date,ev)+"</div>";html+="</div>";}else{if(_c67>(_c65+2)){var uId=_scheduler.uid();html="<div style=\"position:absolute; top:"+y+"px; left:"+x+"px;width:"+(x2-x-5)+"px;\" id =\""+uId+"\">";html+="<a title=\""+self.tooltipMoreActivities+"\" href =\"javascript:window.scheduler.setCurrentView(new Date('"+ev.start_date+"'),'day');\">";html+="<img src=\"../../images/CalendarMoreArrow.png\" style=\"float:right\" />";html+="</a></div>";}else{html="<div></div>";}}d.innerHTML=html;this._rendered.push(d.firstChild);_c62.appendChild(d.firstChild);};this.eventConnections.push(dojo.connect(document.body,"onclick",this,"_bodyClicked"));this.eventConnections.push(dojo.connect(window.parent.document.body,"onclick",this,"_bodyClicked"));this._bindContextMenu(null,new Date());},_loadNotification:function(_c69){this._notificationData=false;if(!this._notificationStore){this._notificationStore=new _bf4({include:["Activity","$descriptors"],resourceKind:"userNotifications",service:_bf5.getSDataService("system")});}this._notificationStore.fetch({predicate:"'"+_c69+"'",onComplete:this._receivedNotification,onError:this._requestFailure,scope:this});},_requestFailure:function(){},_receivedNotification:function(_c6a){this._notificationData=_c6a;var _c6b=Sage.Services.getService("ActivityService");_c6b.declineConfirmation({notification:this._notificationData,success:this._successfulDeclineConfirmation,failure:this._failedAcceptDecline,scope:this});},_successfulDeclineConfirmation:function(){dojo.publish("/entity/activity/decline",[this._getActivityDataFromNotificationData(),null]);dojo.publish("/entity/userNotification/delete",[this._notificationData["$key"],this]);},_getActivityDataFromNotificationData:function(){var _c6c=null;var _c6d=null;if(this._notificationData){if(this._notificationData.Activity){_c6c=this._notificationData.Activity.$key;}if(this._notificationData.ToUser){_c6d=this._notificationData.ToUser.$key;}}var _c6e={"activityId":_c6c,"userId":_c6d};return _c6e;},onEditRecurrenceActivity:function(_c6f){if(!this._editOccSeriesDlg){this._editOccSeriesDlg=new _bf9({id:"editOccSeriesQueryCalendar",mode:"edit",disableSeriesOption:"disabled"});dojo.connect(this._editOccSeriesDlg,"onSelectOccurrence",this,function(_c70,_c71){this._updateActivity(this._currentActivity);});}this._editOccSeriesDlg.set("activityId",_c6f);this._editOccSeriesDlg.show();},_bodyClicked:function(){if(this.schedulerContextMenu&&this.schedulerContextMenu.isShowingNow){this.schedulerContextMenu._popupWrapper.style.display="none";}},_updateUserActivity:function(){var _c72=this._currentActivity;var _c73=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));_c73.setResourceKind("userActivities");var key=dojo.string.substitute("\"ActivityId=${0};UserId=${1}\"",[_c72.Id,_c72.UserId]);_c73.setResourceSelector(key);this._userActivityData={$key:key,Id:_c72.Id,StartDate:_c72.StartDate,Alarm:_c72.Alarm,Duration:_c72.Duration};if(_c72.AlarmMinutesBefore){this._userActivityData.AlarmTime=_c72.AlarmTime;}_c73.update(this._userActivityData,{scope:this,success:function(act){this._updateActivity();},failure:function(e){}});},_updateActivity:function(_c74){if(!_c74){_c74=this._userActivityData;}_c74.$key=_c74.Id;var _c75=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));_c75.setResourceKind("activities");_c75.setResourceSelector(dojo.string.substitute("\"${0}\"",[_c74.$key]));_c75.update(_c74,{success:function(act){var _c76=[];var _c77=_c74.$key.substring(0,12);for(var i in this._scheduler._events){var evt=this._scheduler._events[i];if(evt.id.indexOf(_c77)>-1){_c76.push(evt.id);}}if(_c76){for(var i=0;i<_c76.length;i++){this._scheduler.deleteEvent(_c76[i]);}}dojo.publish("/entity/activity/activityScheduler/reloadActivity",[_c77,this]);if(_c77!==act.$key){dojo.publish("/entity/activity/activityScheduler/reloadActivity",[act.$key,this]);}},failure:function(){},scope:dojo.global});},_getWeekStart:function(date){var _c78=this._userOptions["weekstart"];if(date==null){date=new Date();}var _c79=date.getDay();_c79=_c78-_c79;var _c7a=_scheduler.date.add(date,_c79,"day");if(_c7a>date){_c7a=_scheduler.date.add(_c7a,-7,"day");}return _scheduler.date.date_part(_c7a);},_getWorkWeekStart:function(date){},_getMonthStart:function(date){return date.setDate(1);},_updateEvent:function(_c7b){var _c7c=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));_c7c.setResourceKind("events");_c7c.setResourceSelector(dojo.string.substitute("\"${0}\"",[_c7b.Id]));var _c7d={$key:_c7b.Id,StartDate:Sage.Utility.Convert.toIsoStringFromDate(_c7b.StartDate),EndDate:Sage.Utility.Convert.toIsoStringFromDate(_c7b.EndDate)};_c7c.update(_c7d,{success:function(act){},failure:function(){},scope:dojo.global});},_preloadCalendarUserOptions:function(){var _c7e=Sage.Services.getService("UserOptions");if(_c7e){_c7e.getByCategory("Calendar",this._receivedCalendarOptions,this,this._failedCalendarOptions);}},_receivedCalendarOptions:function(data){var opts=data["$resources"];if(opts.length>0){this._userOptions["workweek"]=[];}for(var i=0;i<opts.length;i++){var opt=opts[i];switch(opt["name"].toUpperCase()){case "WEEKSTART":this._userOptions["weekstart"]=_bf6.getDay(opt["value"]);break;default:this._userOptions[opt["name"].toLowerCase()]=_bf6.getConvertedOptionValue(opt["name"],opt["value"]);break;}}if(this._userOptions["workweeksun"]){this._userOptions["workweek"].push(0);}if(this._userOptions["workweekmon"]){this._userOptions["workweek"].push(1);}if(this._userOptions["workweektue"]){this._userOptions["workweek"].push(2);}if(this._userOptions["workweekwed"]){this._userOptions["workweek"].push(3);}if(this._userOptions["workweekthu"]){this._userOptions["workweek"].push(4);}if(this._userOptions["workweekfri"]){this._userOptions["workweek"].push(5);}if(this._userOptions["workweeksat"]){this._userOptions["workweek"].push(6);}if(this._userOptions["workweek"]){this._userOptions["workweek"].sort(_bf6.arraySort);}this._initScheduler();this._launchScheduler();},_failedCalendarOptions:function(data){this._initScheduler();this._launchScheduler();},_bindContextMenu:function(_c7f,_c80){if(this.schedulerContextMenu){this.schedulerContextMenu.unBindDomNode(this._iFrameId);}this.schedulerContextMenu=new dijit.Menu({});var _c81=null;if(_c7f==null){_c81="mnuCalendarSchedule";}else{if(_c7f.indexOf("-act")>0){_c81="mnuCalendarActivity";}else{if(_c7f.indexOf("-evt")>0){_c81="mnuCalendarEvent";}else{if(_c7f.indexOf("-hist")>0){_c81="mnuCalendarHistory";}}}}var _c82=Sage.UI.DataStore.ContextMenus.calendar_activityContextMenu.items;var len=_c82.length;for(var i=0;i<len;i++){var mDef=_c82[i];if(mDef.id===_c81){this._buildChildMenu(mDef.submenu,null,_c7f,_c80);break;}}this.schedulerContextMenu.bindDomNode(this._iFrameId);},_buildChildMenu:function(_c83,_c84,_c85,_c86){var len=_c83.length;for(var i=0;i<len;i++){var mDef=_c83[i];if(mDef.submenu.length>0){var _c87=new dijit.Menu();this._buildChildMenu(mDef.submenu,_c87,_c85,_c86);var _c88=new dijit.PopupMenuItem({label:mDef.text,popup:_c87});if(_c84){_c84.addChild(_c88);}else{this.schedulerContextMenu.addChild(_c88);}}else{var _c89=null;if((mDef.text==="-")||(mDef.text===" ")||(mDef.isspacer)){_c89=new dijit.MenuSeparator();}else{var href=mDef.href;href=href.replace("javascript:Sage.Link.","javascript:parent.Sage.Link.");var _c8a=false;var _c8b=false;if(href.toUpperCase()==="DELETEACTIVITY"){_c8b=_scheduler.getMenuActivityAction(_c85,"delete");if(!_c8b){_c8a=true;}}else{if(href.toUpperCase()==="COMPLETEACTIVITY"){var _c8c=_scheduler.getMenuActivityAction(_c85,"complete");if(!_c8c){_c8a=true;}}}_c89=new Sage.UI.MenuItem({label:mDef.text||"...",icon:"Libraries/dojo/dojo/resources/blank.gif",title:mDef.tooltip||"",ref:href,deleteAction:_c8b,disabled:_c8a,onClick:function(){switch(this.ref.toUpperCase()){case "SCHEDULEPHONECALL":_scheduler.addEventNow(_c86,null,"PhoneCall");break;case "SCHEDULEMEETING":_scheduler.addEventNow(_c86,null,"Meeting");break;case "SCHEDULETODO":_scheduler.addEventNow(_c86,null,"ToDo");break;case "SCHEDULEPERSONALACTIVITY":_scheduler.addEventNow(_c86,null,"PersonalActivity");break;case "SCHEDULEEVENT":_scheduler.addEventNow(_c86,null,"event");break;case "OPENACTIVITY":case "OPENEVENT":case "OPENHISTORY":_scheduler.openActivity(_c85);break;case "COMPLETEACTIVITY":_scheduler.completeActivity(_scheduler.getCalendarEventID(_c85));break;case "DELETEACTIVITY":if(this.deleteAction==="delete"){_scheduler.deleteActivity(_c85);}else{if(this.deleteAction==="decline"){_scheduler.declineActivity(_c85);}else{if(this.deleteAction==="declineConfirmed"){_scheduler.declineConfirmedUserActivity(_c85);}}}break;case "GOTOACCOUNT":_scheduler.goToActivityAssociation("Account",_c85);break;case "GOTOCONTACT":_scheduler.goToActivityAssociation("Contact",_c85);break;case "GOTOOPPORTUNITY":_scheduler.goToActivityAssociation("Opportunity",_c85);break;case "GOTOTICKET":_scheduler.goToActivityAssociation("Ticket",_c85);break;case "GOTOLEAD":_scheduler.goToActivityAssociation("Lead",_c85);break;case "DELETEEVENT":_scheduler.deleteActivityEvent(_scheduler.getCalendarEventID(_c85));break;}}});}if(_c84){_c84.addChild(_c89);}else{this.schedulerContextMenu.addChild(_c89);}}}}});return _bfe;});},"Sage/UI/Columns/DataType":function(){define("Sage/UI/Columns/DataType",["dojox/grid/cells/_base","dojo/string","dojo/_base/declare","Sage/Utility/Filters"],function(_c8d,_c8e,_c8f,_c90){var _c91=_c8f("Sage.UI.Columns.DataType",_c8d,{constructor:function(){this.inherited(arguments);},formatter:function(val,_c92){var t=_c90.resolveDataTypeQB(val),_c93="string";switch(t){case "Integer":_c93="int";break;case "Decimal":_c93="float";break;case "Date/Time":_c93="date";break;case "Memo/Blob":_c93="blob";break;case "String":default:_c93="string";break;}return _c8e.substitute("<img src=\"images/ft_${0}.gif\" class=\"dataTypeColumnDimensions\" />",[_c93]);}});return _c91;});},"Sage/QuickForms/Design/Editors/DateTimePickerAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/DateTimePickerAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DateTimePickerAdvancedPropertyEditor"],function(_c94,lang,_c95,_c96,_c97,_c98,_c99,_c9a,_c9b,_c9c,_c9d){return _c94("Sage.QuickForms.Design.Editors.DateTimePickerAdvancedPropertyEditor",[_c95,_c9b,_c9a],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.buttonToolTipTooltipText %}\">","<label>{%= $.buttonToolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_buttonToolTip\" data-dojo-attach-event=\"onChange:_onButtonToolTipChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.displayModeTooltipText %}\">","<label>{%= $.displayModeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_displayMode\" data-dojo-attach-event=\"onChange:_onDisplayModeChange\">","{% for (var mode in $.displayModeTypeText) { %}","<span value=\"{%= mode %}\">{%= $.displayModeTypeText[mode] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.timelessTooltipText %}\">","<label>{%= $.timelessText %}</label>","<div data-dojo-attach-point=\"_timeless\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onTimelessChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_buttonToolTip:null,_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_displayMode:null,_required:null,_timeless:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",buttonToolTipText:"Button Tooltip:",buttonToolTipTooltipText:"The tooltip  to display when the user's mouse hovers over the button part of the control.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",timelessText:"Timeless:",timelessTooltipText:"Use date without time and no DST conversion.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},displayModeTypeText:{"AsControl":"As Control","AsText":"As Text","AsHyperlink":"As Hyperlink"},constructor:function(){lang.mixin(this,_c9d);},setup:function(){this.inherited(arguments);this._buttonToolTip.set("value",this._designer.get("buttonToolTip"));this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._displayMode.set("value",this._designer.get("displayMode"));this._enabled.set("value",this._designer.get("enabled"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._required.set("value",this._designer.get("required"));this._timeless.set("value",this._designer.get("timeless"));this._visible.set("value",this._designer.get("visible"));var _c9e=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_c9e&&_c9e["DataItemName"])||"");},_onButtonToolTipChange:function(_c9f){if(this.isSuspended()){return;}this._designer.set("buttonToolTip",_c9f);},_onControlTypeChange:function(_ca0){},_onControlIdChange:function(_ca1){},_onDefaultDataBindingChange:function(_ca2){},_onDisplayModeChange:function(_ca3){if(this.isSuspended()){return;}this._designer.set("displayMode",_ca3);},_onEnabledChange:function(_ca4){if(this.isSuspended()){return;}this._designer.set("enabled",_ca4);},_onControlLabelPlacementChange:function(_ca5){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",_ca5);},_onRequiredChange:function(_ca6){if(this.isSuspended()){return;}this._designer.set("required",_ca6);},_onTimelessChange:function(_ca7){if(this.isSuspended()){return;}this._designer.set("timeless",_ca7);},_onVisibleChange:function(_ca8){if(this.isSuspended()){return;}this._designer.set("visible",_ca8);}});});},"url:Sage/templates/MenuBarItem.html":"<div class=\"dijitReset dijitInline dijitMenuItem\" data-dojo-attach-point=\"focusNode\" waiRole=\"menuitem\" tabIndex=\"-1\"\r\n    data-dojo-attach-event=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\r\n    <span>\r\n    <img src=\"${_blankGif}\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\r\n    <div class=\"dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}\" data-dojo-attach-point=\"iconNodeSprite\"></div>\r\n    <span class=\"dijitMenuItemLabel\" data-dojo-attach-point=\"containerNode\"></span>\n    </span>\n</div>\n","url:Sage/MainView/Opportunity/templates/OpportunityStatistics.html":" [\r\n    '<div>',\r\n        '<div data-dojo-type=\"dijit.Dialog\" id=\"{%= $.id%}_dlgOpportunityStatistics\" title=\"{%= $.opportunityStatistics_Caption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">',\r\n            '<div dojoAttachPoint=\"loadingContainer\">',\r\n                '<br />',\r\n                '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingMessge %}</label>',\r\n                '<br />',\r\n                '<br />',\r\n            '</div>',\r\n            '<table cellspacing=\"20\" dojoAttachPoint=\"statisticsContentsContainer\" class=\"display-none\">',\r\n                '<tr>',\r\n                    '<td >',\r\n                        '<label>{%= $.opportunityCount %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"opportunityCount\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.salesPotentialTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"salesPotential\" dojoAttachPoint=\"salesPotentialTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"salesPotentialAverage\" dojoAttachPoint=\"salesPotentialAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.weightedPotentialTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"weightedPotential\" dojoAttachPoint=\"weightedPotentialTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"weightedPotentialAverage\" dojoAttachPoint=\"weightedPotentialAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.averageCloseProbability %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div dojoType=\"Sage.UI.Controls.Numeric\" constraints=\"{ places: 2, maxPlaces: 2, type: \\'percent\\' }\" dojoAttachPoint=\"closeProbability_Container\" readonly=\"readonly\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.actualAmountTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"actualAmount\" dojoAttachPoint=\"actualAmountTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"actualAmountAverage\" dojoAttachPoint=\"actualAmountAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.averageDaysOpen %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"daysOpen_Container\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.rangeEstClose %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"rangeEstClose_Container\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n            '<div class=\"button-bar alignright\">',\r\n                '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" type=\"button\" dojoAttachEvent=\"onClick:_close\">{%= $.btnClose_Caption %}</button>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>'\r\n]","Sage/UI/Filters/nls/EditFilters":function(){define("Sage/UI/Filters/nls/EditFilters",["Sage/LanguageList","dojo/_base/lang"],function(_ca9,lang){var nls={root:{selectAllText:"Select All",dialogTitle:"Edit Filters",okText:"OK",cancelText:"Cancel"}};return lang.mixin(_ca9,nls);});},"Sage/UI/Controls/Numeric":function(){define("Sage/UI/Controls/Numeric",["dojo/_base/html","dijit/_Widget","Sage/_Templated","Sage/UI/NumberTextBox","dojo/currency","dojo/_base/declare"],function(html,_caa,_cab,_cac,_cad,_cae){dojo.mixin(dijit.form.ValidationTextBox.prototype.attributeMap,{slxchangehook:"focusNode"});var _caf=_cae("Sage.UI.Controls.Numeric",[_caa,_cab],{displayModes:{"AsHyperlink":0,"AsControl":1,"AsText":2},modeTemplates:{"AsHyperlink":new Simplate(["<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\">ONE</div>"]),"AsControl":new Simplate(["<input  data-dojo-type=\"Sage.UI.NumberTextBox\" ","dojoAttachEvent=\"onChange:onChanged\" ","constraints=\"{ {%= $.constraintsToString() %} }\" ","formatType=\"{%= $.formatType %}\" ","ignorechange=\"true\" ","required=\"{%= $.required %}\" ","id=\"{%= $.id %}_NumberTextBox\" ","style=\"width:inherit;\" ","textAlign=\"{%= $.textAlign %}\" ","hotKey=\"{%= $.hotKey %}\" ","{% if($.disabled === \"disabled\") { %} ","disabled=\"disabled\" ","{% } %}","{% if($.readonly === \"readonly\") { %} ","readonly=\"readonly\" ","{% } %}","name=\"{%= $.name %}\" type=\"text\" ","value=\"{%= $.value %}\" required=\"{%= $.required %}\" dojoAttachPoint=\"focusNode\" ","maxLength=\"{%= $.maxLength %}\">"]),"AsText":new Simplate(["<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\">{%= $.formattedText() %}</div>"])},postMixInProperties:function(){this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.domNode.parentNode&&this.domNode.parentNode.tagName=="SPAN"){this.domNode.parentNode.tabIndex=-1;}},constructor:function(_cb0){this.constraints={};this.inherited(arguments);},widgetTemplate:new Simplate(["<div style=\"width:inherit;\" slxcompositecontrol=\"true\" id=\"{%= $.id %}\" >","{%= $.modeTemplates[$.displayMode].apply($) %}","</div>"]),value:0,autoPostBack:false,width:15,maxLength:128,style:"",enabled:true,visible:true,readonly:"",disabled:"",hotKey:"",tabIndex:0,required:false,displayMode:"AsControl",widgetsInTemplate:true,styles:"text-align: right;",constraints:null,name:"",formattedText:function(){return this.value;},formatType:"",constraintsToString:function(){var tmp=[];for(prop in this.constraints){if(this.constraints.hasOwnProperty(prop)){var _cb1=this.constraints[prop];if(typeof _cb1==="string"){_cb1="'"+_cb1+"'";}tmp.push(prop+":"+_cb1);}}var _cb2=tmp.join(",");return _cb2;},onChanged:function(e){if(this.autoPostBack){if(Sys){Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,null);}}}});return _caf;});},"Sage/UI/Controls/Address":function(){require({cache:{"url:Sage/UI/Controls/templates/Address.html":"<div class=\"address-container\" id=\"{%= $.clientId %}\" >\r\n    <!--\r\n    -- IMPORTANT: Comments in a widget template must be placed inside the root node.\r\n    Simplate template\r\n    https://github.com/mmorton/simplate\r\n    https://github.com/mmorton/simplate/blob/master/demo/index.html\r\n    Basic formatting example: {%= $.id %}\r\n    -->\r\n    <textarea id=\"{%= $.clientId %}_displayText\" class=\"address-textarea\" style=\"height:{%= $.height %};\"\r\n        data-dojo-type=\"Sage.UI.Controls.SimpleTextarea\" readonly=\"readonly\" dragRestriction=\"true\"  tabindex=\"{%= $.tabIndex %}\"\r\n    {% if ($.enabled && !$.readOnly) { %}\r\n        data-dojo-attach-event=\"onDblClick: showDialog, ondijitclick: showDialog\"\r\n    {% } %}\r\n        slxchangehook=\"true\" >{%= $.displayValue %}</textarea>\r\n    {% if ($.enabled && !$.readOnly) { %}\r\n    <img alt=\"{%= $.imageData.imageEditAltText %}\" data-dojo-attach-event=\"ondijitclick: showDialog\" class=\"address-edit-button\"\r\n         src=\"{%= $.imageData.imageEditUrl %}\" title=\"{%= $.imageData.imageEditToolTip %}\" id=\"{%= $.clientId %}-Button\" \r\n          tabindex=\"{%= $.tabIndex %}\" />\r\n    {% } %}\r\n    {% if ($.enabled && $.showButton) { %}\r\n    <img alt=\"{%= $.imageData.imageMapQuestAltText %}\" data-dojo-attach-event=\"ondijitclick: showMap\" class=\"address-map-button\"\r\n         src=\"{%= $.imageData.imageMapQuestUrl %}\" title=\"{%= $.imageData.imageMapQuestToolTip %}\" id=\"{%= $.clientId %}-MapQuest\" \r\n          tabindex=\"{%= $.tabIndex %}\" />\r\n    {% } %}\r\n</div>","url:Sage/UI/Controls/templates/AddressEdit.html":"<!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n-->\r\n<div>\r\n        <table style=\"width:100%;height:100%;\">\r\n                {% for (var i = 0; i < $.fields.length; i++) { %}\r\n                {% if ($.fields[i].visible) { %}\r\n                    <tr>\r\n                        <td><label>{%= $.fields[i].fieldLabel %}</label></td>\r\n                        <td style=\"width: 150px;\">\r\n                            {% if ($.fields[i].xtype === 'picklistcombo') { %}\r\n                            <select data-dojo-type=\"Sage.UI.Controls.DropDownSelectPickList\"\r\n                                dojoAttachPoint=\"_valueBox\"\r\n                                pickListName=\"{%= $.fields[i].pickList.pickListName %}\"\r\n                                storeMode=\"text\"\r\n                                style=\"width: 100%;\"\r\n                                value=\"{%= $.fields[i].value %}\"\r\n                           {% } %}\r\n                           {% if ($.fields[i].xtype === 'checkbox') { %}\r\n                                <input data-dojo-type=\"Sage.UI.Controls.CheckBox\"\r\n                                checked=\"{%= $.fields[i].value %}\"\r\n                           {% } %}\r\n                           {% if ($.fields[i].xtype === 'textfield') { %}\r\n                                <input data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                                style=\"width: 100%;\" type=\"text\"\r\n                                value=\"{%= $.fields[i].value %}\"\r\n                           {% } %}\r\n                                id=\"{%= $.id %}-{%= $.fields[i].name %}\"\r\n                                name=\"{%= $.fields[i].formClientId %}\"\r\n                                shouldPublishMarkDirty=\"false\"\r\n                                onChange=\"dijit.byId('{%= $.id %}').editorChange();\"\r\n                                textAlign=\"{%= $.fields[i].textAlign %}\" data-dojo-attach-point=\"focusNode\"\r\n                                maxLength=\"{%= $.fields[i].maxLength %}\" />\r\n                        </td>\r\n                   </tr>\r\n                {% } %}          \r\n                {% } %}            \r\n        </table>                    \r\n        <div class=\"button-bar alignright\" style=\"clear: both\">\r\n            <button id=\"{%= $.id %}-OKButton\" data-dojo-type=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId('{%= $.id %}')._okClicked();\">\r\n                {%= $.okText %}\r\n            </button>\r\n            <button id=\"{%= $.id %}-CancelButton\" data-dojo-type=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId('{%= $.id %}')._cancelClicked();\">\r\n                {%= $.cancelText %}\r\n            </button>\r\n        </div>\r\n</div>"}});define("Sage/UI/Controls/Address",["dijit/_Widget","Sage/_Templated","Sage/Utility","Sage/UI/Controls/TextBox","Sage/UI/Controls/PickList","Sage/UI/Controls/DropDownSelectPickList","dijit/Dialog","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n!./nls/Address","dojo/text!./templates/Address.html","dojo/text!./templates/AddressEdit.html","dojo/_base/declare","dojo/_base/array"],function(_cb3,_cb4,_cb5,_cb6,_cb7,_cb8,_cb9,_cba,_cbb,_cbc,_cbd,_cbe,_cbf){var _cc0=_cbe("Sage.UI.Controls.Address",[_cb3,_cb4],{widgetTemplate:new Simplate(_cbc.split("\r")),dialogContent:new Simplate(_cbd.split("\r")),templateOverridePath:"",widgetsInTemplate:true,clientId:"",tabIndex:0,autoPostBack:false,readOnly:false,enabled:true,showButton:true,displayValue:"",displayValueClientId:"",height:"",imageData:{imageEditUrl:"",imageEditToolTip:"",imageEditAltText:"",imageMapQuestUrl:"",imageMapQuestToolTip:"",imageMapQuestAltText:""},fields:[],mapQuestValues:{},editorChange:function(){this.isDirty=true;},isDirty:false,name:"",constructor:function(_cc1){dojo.mixin(this,_cc1);_cc1.id=_cc1.clientId;this.resources=_cbb;if(_cc1.templateOverridePath&&_cc1.templateOverridePath.length>0){try{this.dialogContent=new Simplate(dojo["cache"]("Sage.UI.Controls",_cc1.templateOverridePath).split("\r"));}catch(e){}}this.inherited(arguments);},setAttribute:function(attr,val){this.set(attr,val);},postCreate:function(){this.inherited(arguments);this.setAttribute("tabindex","-1");},showDialog:function(){this.editDialog=dijit.byId([this.id,"-Dialog"].join(""));if(!this.editDialog){this.editDialog=new _cb9({title:this.resources.dialogTitle,id:[this.id,"-Dialog"].join(""),"class":"address-edit"});dojo.mixin(this.editDialog,new _cba());this.editDialog.createHelpIconByTopic("accountaddresschange");}this.htmlEncodeForEditDialog();this.editDialog.set("content",this.dialogContent.apply({id:this.id,cancelText:this.resources.cancelText,okText:this.resources.okText,fields:this.fields}));this.isDirty=false;this.editDialog.show();if(this.modality==="modeless"){dojo.destroy([this.id,"-Dialog_underlay"].join(""));}},htmlEncodeForEditDialog:function(){_cbf.forEach(this.fields,function(_cc2,i){if(_cc2.xtype==="textfield"&&_cc2.value.indexOf("\"")>-1){_cc2.value=_cb5.htmlEncode(_cc2.value);}});},showMap:function(){this.createFormItems();var _cc3=this.getAddressValues();var map={"streetaddress":"addr1","city":"city","state":"state","zip":"postalcode","country":"country"};var _cc4={};for(var key in map){if(_cc3[map[key]]){_cc4[key]=(typeof _cc3[map[key]]==="object")?_cc3[map[key]].text:_cc3[map[key]];}}_cc4.level=9;_cc4.iconid=0;_cc4.height=300;_cc4.width=500;var _cc5=[];for(var _cc6 in _cc4){_cc5.push(_cc6+"="+encodeURIComponent(_cc4[_cc6]));}var url="http://www.mapquest.com/cgi-bin/ia_free?"+_cc5.join("&");var _cc7="directories=no,location=no,menubar=no,pageXOffset=0px,pageYOffset=0px,scrollbars=yes,status=no,titlebar=no,toolbar=yes";window.open(url,"",_cc7);},createFormItems:function(){var _cc8=[];for(var i=0;i<this.fields.length;i++){if(this.fields[i].visible===false){continue;}this.mapQuestValues[this.fields[i].name]=this.fields[i];var f=$.extend(this.fields[i],this.fields[i].pickList,{id:this._clientId+"_field_"+this.fields[i].name,stateful:false,anchor:(this.fields[i].xtype!="checkbox")?"100%":false});if(f.maxLength>0){f.autoCreate={tag:"input",type:"text",maxlength:this.fields[i].maxLength};}f.tabIndex=i+1;_cc8.push(f);}return _cc8;},getAddressValues:function(){var _cc9={};for(var name in this.mapQuestValues){var _cca=this.mapQuestValues[name];if(_cca){_cc9[name]=_cca.value;}}return _cc9;},getEditFields:function(){this.setDataFields();},setDataFields:function(){var _ccb,_ccc,_ccd;for(var i=0;i<this.fields.length;i++){_ccb=dijit.byId([this.id,"-",this.fields[i].name].join(""));_ccc=dojo.byId(this.fields[i].formClientId);_ccd=this.fields[i].xtype;if(_ccb){if(_ccd==="picklistcombo"){if(_ccc){_ccc.value=_ccb.get("value");}this.fields[i].value=_ccb.get("value");}if(_ccd==="checkbox"){if(_ccc){_ccc.checked=_ccb.get("checked");}this.fields[i].value=_ccb.get("checked");}if(_ccd==="textfield"){if(_ccc){_ccc.value=_ccb.get("value");}this.fields[i].value=_ccb.get("value");}}}},_okClicked:function(){var that=this;setTimeout((function(d){return function(){that._updateValues();};})(that),1);},_updateValues:function(){if(this.isDirty){this.getEditFields();var _cce=dojo.byId(this.resultValueClientId);dijit.byId(this.clientId+"_displayText").set("value",Sage.Format.Address.formatAddress(this.fields,true));_cce.value=Sage.Format.Address.formatAddress(this.fields,true);dojo.publish("Sage/events/markDirty");if(this.autoPostBack){__doPostBack(_cce.name,"");}}},_cancelClicked:function(){this.editDialog.hide();}});return _cc0;});},"Sage/QuickForms/Design/Editors/nls/FormUsagesPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/FormUsagesPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_ccf,lang){var nls={root:{titleText:"Usage",portalText:"Portal",viewText:"View",modesText:"Modes",descriptionText:"Description"}};return lang.mixin(_ccf,nls);});},"Sage/UI/Controls/nls/DurationSelect":function(){define("Sage/UI/Controls/nls/DurationSelect",["Sage/LanguageList","dojo/_base/lang"],function(_cd0,lang){var nls={root:{minuteText:"minute",minutesText:"minutes",hourText:"hour",hoursText:"hours",dayText:"day",daysText:"days"}};return lang.mixin(_cd0,nls);});},"Sage/UI/Alarms/nls/AlarmCountDown":function(){define("Sage/UI/Alarms/nls/AlarmCountDown",["Sage/LanguageList","dojo/_base/lang"],function(_cd1,lang){var nls={root:{startsInText:"Starts in",overduebyText:"Overdue by",minuteText:"minute",minutesText:"minutes",hourText:"hour",hoursText:"hours",dayText:"day",daysText:"days",weekText:"week",weeksText:"weeks",monthText:"month",monthsText:"months",yearText:"year",yearsText:"years",startsNowText:"Starts now"}};return lang.mixin(_cd1,nls);});},"Sage/UI/Dashboard/DashboardTabController":function(){define("Sage/UI/Dashboard/DashboardTabController",["dijit/layout/ScrollingTabController","dojo/i18n","dijit/Menu","dijit/MenuItem","dijit/MenuSeparator","dojo/i18n!./nls/DashboardTabController","dojo/i18n!../nls/Boolean","dojo/_base/declare"],function(_cd2,i18n,menu,_cd3,_cd4,_cd5,_cd6,_cd7){var _cd8=_cd7("dijit.layout._TabButton",dijit.layout._ScrollingTabControllerButton,{baseClass:"dijitTab",postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","DashboardTabController"));dojo.mixin(this,i18n.getLocalization("Sage.UI","Boolean"));},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.containerNode,false);},_setCloseButtonAttr:function(disp){var _cd9=i18n.getLocalization("dijit","common");if(disp){if(this.closeNode){dojo.attr(this.closeNode,"title",_cd9.itemClose);}this._closeMenu=new menu({id:this.id+"_Menu",dir:this.dir,targetNodeIds:[this.domNode]});this._closeMenu.addChild(new _cd3({label:this.newTabText,dir:this.dir,id:this._closeMenu.id+"_New",onClick:function(){var db=dijit.byId("Dashboard");db._createPage(true,db.newTabText);}}));this._closeMenu.addChild(new _cd3({label:this.addContentText,dir:this.dir,id:this._closeMenu.id+"_AddContent",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);d._newWidgetMenu();})}));this._closeMenu.addChild(new _cd3({label:this.editOptionsText,dir:this.dir,id:this._closeMenu.id+"_Edit",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);d._editOptionsMenu();})}));this._closeMenu.addChild(new _cd3({label:this.shareTabText,dir:this.dir,id:this._closeMenu.id+"_Share",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);d._releaseManager.page=d;d._releaseManager.share();})}));this._closeMenu.addChild(new _cd3({label:this.hideTabText,dir:this.dir,id:this._closeMenu.id+"_Hide",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);var db=dijit.byId("Dashboard");db._hidePage(d);})}));this._closeMenu.addChild(new _cd3({label:this.copyTabText,dir:this.dir,id:this._closeMenu.id+"_Copy",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);var db=dijit.byId("Dashboard");db._copyPage(d);})}));this._closeMenu.addChild(new _cd3({label:this.showTabText,dir:this.dir,id:this._closeMenu.id+"_Show",onClick:dojo.hitch(this,function(){var d=dijit.byId("Dashboard");d._showTabMenu();})}));var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);if(d.permission){this._closeMenu.addChild(new _cd3({label:this.deleteTabText,dir:this.dir,id:this._closeMenu.id+"_Delete",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);var fn=function(ans){if(ans){if(d.permission){dojo.publish("/ui/dashboard/pageDelete",[d]);}else{var opts={title:d.resources.errorText,query:d.resources.permissionErrorText,yesText:d.resources.okButton,style:{width:"350px"},align:"right"};Sage.UI.Dialogs.raiseQueryDialogExt(opts);}}};var opts={title:this.deleteTabText,query:this.deleteTabConfirmText,callbackFn:fn,yesText:this.yesText,noText:this.noText,style:{width:"350px"},align:"right"};Sage.UI.Dialogs.raiseQueryDialogExt(opts);})}));}this._closeMenu.addChild(new _cd4());this._closeMenu.addChild(new _cd3({label:this.helpText,dir:this.dir,id:this._closeMenu.id+"_Help",onClick:dojo.hitch(this,function(){Sage.Utility.openHelp("Working_with_the_Dashboard","MCWebHelp");})}));}else{if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}}},_setLabelAttr:function(_cda){this.inherited(arguments);if(this.showLabel===false&&!this.params.title){this.iconNode.alt=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}},destroy:function(){if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}this.inherited(arguments);}});var _cdb=_cd7("Sage.UI.Dashboard.DashboardTabController",_cd2,{tabPosition:"top",buttonWidget:"dijit.layout._TabButton",addChild:function(){this.inherited(arguments);if(!this.perfomedHeightResizing){this.perfomedHeightResizing=true;dojo.style(this.containerNode,"height","37px");dojo.style(this.containerNode,"top","4px");}},_rectifyRtlTabList:function(){if(0>=this.tabPosition.indexOf("-h")){return;}if(!this.pane2button){return;}var _cdc=0;for(var pane in this.pane2button){var ow=this.pane2button[pane].innerDiv.scrollWidth;_cdc=Math.max(_cdc,ow);}for(pane in this.pane2button){this.pane2button[pane].innerDiv.style.width=_cdc+"px";}}});return _cdb;});},"Sage/Utility/Validate":function(){define("Sage/Utility/Validate",[],function(){Sage.namespace("Utility.Validate");dojo.mixin(Sage.Utility.Validate,{findNestedWidgets:function(_cdd){return dojo.query("[widgetid]",_cdd).map(dijit.byNode).filter(function(wid){return wid;});},shouldSubmit:function(){if(!this._isValid){this._isValid=true;return false;}return true;},_isValid:true,_getWorkspaceNode:function(_cde){var node;switch(_cde){case "Sage.Platform.WebPortal.Workspaces.DialogWorkspace":node="DialogWorkspace_window";break;default:node="mainform";}return node;},onWorkSpaceSave:function(_cdf){var node=this._getWorkspaceNode(_cdf);this._isValid=this.runValidation(node);},runValidation:function(node){var _ce0=this.findNestedWidgets(dojo.byId(node)),_ce1=false;dojo.forEach(_ce0,function(_ce2){if(_ce2.validate){_ce2._hasBeenBlurred=true;var _ce3=_ce2.disabled||!_ce2.validate||_ce2.validate();if(!_ce3&&!_ce1){dojo.window.scrollIntoView(_ce2.containerNode||_ce2.domNode);_ce2.focus();_ce1=true;}}},this);if(_ce1){return false;}return true;}});});},"Sage/UI/Controls/CurrencyTextBox":function(){define("Sage/UI/Controls/CurrencyTextBox",["dijit/form/CurrencyTextBox","dojo/currency","Sage/Utility","dojo/_base/declare","dojo/_base/lang"],function(_ce4,_ce5,_ce6,_ce7,lang){var _ce8=_ce7("Sage.UI.Controls.CurrencyTextBox",[_ce4],{shouldPublishMarkDirty:true,autoPostBack:false,hotKey:"",attributeMap:{hotKey:{node:"textbox",type:"attribute",attribute:"accessKey"}},onBlur:function(){this.textbox.value=_ce6.maximizeDecimalDigit(this.textbox.value,this.constraints.places);},_sageUICurrencyTextBox_IsValid:function(){if(this.constraints.places>-1){var _ce9=_ce6.restrictDecimalDigit(this.textbox.value,this.constraints.places);this.textbox.value=lang.trim(_ce9.replace(Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol,""));}this.inherited(arguments);},postCreate:function(){this.connect(this,"isValid",this._sageUICurrencyTextBox_IsValid);this.connect(this,"onChange",this.onChanged);this.connect(this,"onBlur",this.onBlur);this.inherited(arguments);},onChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){if(Sys){Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,null);}}},setAttribute:function(attr,val){this.set(attr,val);}});return _ce8;});},"Sage/QuickForms/Design/Editors/OwnerAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/OwnerAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/OwnerAdvancedPropertyEditor"],function(_cea,lang,_ceb,_cec,_ced,_cee,_cef,_cf0,_cf1,_cf2,_cf3){return _cea("Sage.QuickForms.Design.Editors.OwnerAdvancedPropertyEditor",[_ceb,_cf1,_cf0],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},constructor:function(){lang.mixin(this,_cf3);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._enabled.set("value",this._designer.get("enabled"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._required.set("value",this._designer.get("required"));this._visible.set("value",this._designer.get("visible"));var _cf4=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_cf4&&_cf4["DataItemName"])||"");},_onControlTypeChange:function(_cf5){},_onControlIdChange:function(_cf6){},_onDefaultDataBindingChange:function(_cf7){},_onEnabledChange:function(_cf8){if(this.isSuspended()){return;}this._designer.set("enabled",_cf8);},_onControlLabelPlacementChange:function(_cf9){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",_cf9);},_onRequiredChange:function(_cfa){if(this.isSuspended()){return;}this._designer.set("required",_cfa);},_onVisibleChange:function(_cfb){if(this.isSuspended()){return;}this._designer.set("visible",_cfb);}});});},"Sage/Groups/BaseGroupContextService":function(){define("Sage/Groups/BaseGroupContextService",["Sage/Utility","dojo/string","Sage/Data/SDataServiceRegistry","dojo/ready","dojo/_base/lang","dojo/_base/declare","dojo/_base/array"],function(_cfc,_cfd,_cfe,_cff,lang,_d00,_d01){var _d02=_d00("Sage.Groups.BaseGroupContextService",null,{_adHocGroupList:null,_connects:null,_subscribes:null,_emptyContext:null,_currentRequestHandle:null,_isAdHocGroupListRetrieved:false,constructor:function(){this._connects=[];this._subscribes=[];this._adHocGroupList=[];this._emptyContext={DefaultGroupID:null,CurrentGroupID:null,CurrentTable:null,CurrentName:null,CurrentEntity:null,CurrentFamily:null};_cff(lang.hitch(this,function(){if(!this.isContextRequired()){var _d03=_cfc.getValue(window,"Sage.Groups._groupContext"),_d04=_cfc.getValue(window,"Sage.UI.DataStore.Filters");if(_d04){if(_d03["AppliedFilterInfo"]){_d04["default"]=this.createFilterExtendedSet(_d03["AppliedFilterInfo"]);}}}if(this.isContextRequired()){this.requestContext();}}));},createFilterExtendedSet:function(_d05){var _d06=_d05["definitionSet"]||[],_d07=_d05["applied"]||[],_d08={},_d09={},_d0a,_d0b,i,j,_d0c;for(i=0;i<_d06.length;i++){_d0a=_d06[i];_d0b={"$key":_d0a["id"],"$partial":true,"filterName":_d0a["filterName"],"displayName":_d0a["displayName"],"propertyName":_d0a["propertyName"],"propertyDataTypeId":_d0a["propertyDataTypeId"],"details":{}};if(_d0a["filterType"]=="rangeFilter"){_d0b["details"]["rangeFilter"]={"characters":_d0a["characters"]};}else{_d0b["details"]["distinctFilter"]={};}_d08[_d0a["id"]]=_d0b;}for(i=0;i<_d07.length;i++){_d0a=_d07[i];_d0b={};for(j=0;j<_d0a["rangeValues"].length;j++){_d0c=_d0a["rangeValues"][j];_d0b[_d0c["rangeName"]]=lang.mixin({},_d0c);}for(j=0;j<_d0a["distinctValues"].length;j++){_d0c=_d0a["distinctValues"][j];if(typeof _d0c==="string"){_d0b[_d0c]=_d0c;}}_d09[_d0a["id"]]=_d0b;}return {"definitionSet":_d08,"applied":_d09};},destroy:function(){_d01.forEach(this._connects,function(_d0d){dojo.disconnect(_d0d);});this.unsubscribeConnects();this.uninitialize();},unsubscribeConnects:function(){_d01.forEach(this._subscribes,function(_d0e){dojo.unsubscribe(_d0e);});},uninitialize:function(){},isContextRequired:function(){var _d0f=!(Sage&&Sage.Groups&&Sage.Groups._groupContext);return _d0f;},createCompatibleContext:function(_d10){if(_d10["currentGroupId"]=="LOOKUPRESULTS"){_d10["currentName"]="Lookup Results";}var _d11={"AppliedFilterInfo":_d10["appliedFilterInfo"],"ContainsPositionState":_d10["containsPositionState"],"CurrentDisplayName":_d10["currentDisplayName"],"CurrentEntity":_d10["currentEntity"],"CurrentEntityID":_d10["currentEntityId"],"CurrentEntityPosition":_d10["currentEntityPosition"],"CurrentFamily":_d10["currentFamily"],"CurrentGroupCount":_d10["currentGroupCount"],"CurrentGroupID":_d10["currentGroupId"],"CurrentName":_d10["currentName"],"CurrentTable":_d10["currentTable"],"CurrentTableKeyField":_d10["currentTableKeyField"],"DefaultGroupID":_d10["defaultGroupId"],"FirstEntityID":_d10["firstEntityId"],"LastEntityID":_d10["lastEntityId"],"LookupLayoutGroupName":_d10["lookupLayoutGroupName"],"NextEntityID":_d10["nextEntityId"],"PreviousEntityID":_d10["previousEntityId"],"RetrievedOn":_d10["retrievedOn"],"isAdhoc":_d10["isAdHoc"]};if(!_d10["appliedFilterInfo"]){delete _d11.AppliedFilterInfo;}return _d11;},_onDefaultFilterRefresh:function(_d12,_d13,_d14){},getContext:function(){},setContext:function(_d15){var _d16=Sage&&Sage.Groups;if(_d16&&_d15){lang.mixin(_d16._groupContext,_d15);this.onContextSet(_d16._groupContext);}},setCurrentGroup:function(_d17,_d18){},_onSetContextRequestSuccess:function(_d19){var _d1a=_d19&&_d19["response"],_d1b=_d1a&&this.createCompatibleContext(_d1a);if(_d1b){this.setContext(_d1b);}this.onCurrentGroupChanged({current:_d1b});},_onSetContextRequestFailure:function(_d1c,o){},onSuccessfulGroupChanged:function(data){var _d1d=this.getContext();this.setContext(data);this.onCurrentGroupChanged({current:data,previous:_d1d});},onCurrentGroupChanged:function(_d1e){},publishFiltersApplied:function(){var _d1f=this.getContext();if(_d1f.AppliedFilterInfo){_cff(lang.hitch(this,function(){var _d20=this.createFilterExtendedSet(_d1f.AppliedFilterInfo),_d21=_cfc.getValue(window,"Sage.UI.DataStore.Filters");_d21["default"]=_d20;dojo.publish("/ui/filters/default/apply",[_d20["applied"],_d20["definitionSet"],this]);}));}},applyFilters:function(_d22){var _d23=this.getContext();if(_d23.AppliedFilterInfo){var _d24=this.createFilterExtendedSet(_d23.AppliedFilterInfo),_d25=_cfc.getValue(window,"Sage.UI.DataStore.Filters");_d25["default"]=_d24;if(_d22){_d22._onApply(_d24["applied"],_d24["definitionSet"],this);}}},onContextSet:function(_d26){}});return _d02;});},"Sage/UI/PopupMenuBarItem":function(){define("Sage/UI/PopupMenuBarItem",["Sage/UI/MenuBarItem","Sage/UI/PopupMenuItem","dojo/_base/declare"],function(_d27,_d28,_d29){return _d29("Sage.UI.PopupMenuBarItem",[_d28,_d27],{});});},"Sage/UI/NotesHistoryList":function(){define("Sage/UI/NotesHistoryList",["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","Sage/Utility/Activity","Sage/Utility/Email","Sage/Utility","Sage/UI/SLXPreviewGrid","Sage/UI/Columns/DateTime","Sage/UI/Columns/SlxLink","Sage/UI/SLXPreviewGrid/Filter/Text","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/data/ItemFileReadStore","dijit/form/FilteringSelect","dijit/form/CheckBox","Sage/UI/Dialogs","dojo/string","dojo/date/locale","dojo/i18n!./nls/NotesHistoryList","dojo/_base/declare"],function(_d2a,_d2b,_d2c,_d2d,_d2e,_d2f,_d30,_d31,_d32,_d33,_d34,_d35,_d36,_d37,_d38,_d39,_d3a,_d3b,_d3c){var _d3d=_d3c("Sage.UI.HistoryTypeFilterWidget",[_d2a,_d2b,_d2c,_d34],{templateString:["<div>","<div dojoAttachPoint=\"selectContainer\"></div>","<div class=\"chkShowDBChanges\">","<input id=\"chkShowDbChanges\" type=\"checkbox\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"chkShowDbChanges\" />","<label for=\"chkShowDbChanges\">",_d3b.showDbChangesText,"</label>","</div>","</div>"].join(""),buildRendering:function(){this.inherited(arguments);var _d3e=[];dojo.forEach(["atAppointment","atPhoneCall","atToDo","atNote","atPersonal","atInternal","atSchedule","atEMail","atDoc","atFax","atLiterature","atDatabaseChange"],function(item){_d3e.push({name:_d2d.getActivityTypeName(item),id:item});});var _d3f=new _d35({data:{items:_d3e,label:"name",identifier:"id"}});this._select=new _d36({store:_d3f,required:false},this.selectContainer);},getQuery:function(){var _d40=this.chkShowDbChanges.get("checked");var type=this._select.get("value");if(type){var c="(Type eq \""+type+"\"";if(_d40){c+=" or Type eq \"atDatabaseChange\"";}c+=")";return c;}else{if(!_d40){return "Type ne \"atDatabaseChange\"";}}return "";},reset:function(){this._select.set("value","");this.chkShowDbChanges.set("checked",false);},getState:function(){return {"value":this._select.get("value"),"showDBChanges":this.chkShowDbChanges.get("checked")};},applyState:function(_d41){if(_d41){this._select.set("value",_d41["value"]||"");this.chkShowDbChanges.set("checked",_d41["showDBChanges"]);}}});var _d42=_d3c(Sage.UI.SLXPreviewGrid.Filter.DateRange,{getQuery:function(){var _d43=function(_d44,_d45){if(!_d44){return "";}if(_d44.constructor!==Date){_d44=Date.parse(_d44);}if(_d45){_d44.setUTCDate(_d44.getUTCDate()+1);}return _d2f.Convert.toIsoStringFromDate(_d44);};var _d46=function(_d47,_d48){if(!_d47){return "";}if(_d47.constructor!==Date){_d47=Date.parse(_d47);}var pad=function(n){return n<10?"0"+n:n;};return [_d47.getFullYear(),"-",pad(_d47.getMonth()+1),"-",pad(_d47.getDate()),(_d48)?"T23:59:59Z":"T00:00:00Z"].join("");};var _d49=this.dteFrom.get("value");var dTo=this.dteTo.get("value");var fmt;var qry="";if(!_d49&&!dTo){return "";}if(dTo&&_d49){fmt=["((((Timeless eq true and CompletedDate eq OriginalDate) and (CompletedDate ge '${0}' and CompletedDate lt '${1}'))) or","(((Timeless eq false) or (Timeless eq true and CompletedDate ne OriginalDate)) and (CompletedDate ge '${2}' and CompletedDate lt '${3}')))"].join("");qry=_d39.substitute(fmt,[_d46(_d49),_d46(dTo,true),_d43(_d49),_d43(dTo,true)]);}else{if(_d49&&!dTo){fmt=["((((Timeless eq true and CompletedDate eq OriginalDate) and CompletedDate ge '${0}')) or","(((Timeless eq false) or (Timeless eq true and CompletedDate ne OriginalDate)) and CompletedDate ge '${1}'))"].join("");qry=_d39.substitute(fmt,[_d46(_d49),_d43(_d49)]);}else{if(dTo&&!_d49){fmt=["((((Timeless eq true and CompletedDate eq OriginalDate) and CompletedDate lt '${0}')) or","(((Timeless eq false) or (Timeless eq true and CompletedDate ne OriginalDate)) and CompletedDate lt '${1}'))"].join("");qry=_d39.substitute(fmt,[_d46(dTo,true),_d43(dTo,true)]);}}}return qry;}});var _d4a=_d3c("Sage.UI.NotesHistoryList",[_d2a],{placeholder:"",parentRelationshipName:"",workspace:"",tabId:"",connections:[],constructor:function(){this.connections=[];},startup:function(){var _d4b=[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(_d4c,_d4d,cel){var _d4e=[cel.grid.id,"-row",_d4d].join("");var id=(_d2f.getModeId()==="insert")?_d4e:_d4c;var _d4f=["<div id=",id," >",id,"</ div>"].join("");return _d4f;}},{field:"Type",name:_d3b.typeText,type:_d2d.historyTypeCell,width:"90px",filterConfig:{widgetType:_d3d}},{field:"CompletedDate",name:_d3b.dateTimeText,type:_d31,useFiveSecondRuleToDetermineTimeless:true,width:"100px",filterConfig:{widgetType:_d42,label:_d3b.dateRangeText}},{field:"UserName",name:_d3b.userText,width:"90px",filterConfig:{widgetType:_d33}}];this._addEntitySpecificColumns(_d4b);_d4b.push({field:"Description",name:_d3b.regardingText,width:"200px",filterConfig:{widgetType:_d33}});_d4b.push({field:"Result",name:_d3b.resultText,width:"90px"});_d4b.push({field:"Category",name:_d3b.categoryText,width:"90px"});var _d50=[{id:"SendEmail",imageClass:"icon_Send_Write_email_16x16",tooltip:_d3b.sendEmailText,handler:this.onSendEmailClick,scope:this},{id:"SendWord",imageClass:"icon_Document_Type_16x16",tooltip:_d3b.sendToWordText,handler:this.onSendToWordClick,scope:this},{id:"NewNote",imageClass:"icon_New_Note_16x16",tooltip:_d3b.addNoteText,handler:Sage.Link.newNote,scope:Sage.Link},{id:"CompleteActivity",imageClass:"icon_complete_activity_16x16",tooltip:_d3b.completeAnActivityText,handler:Sage.Link.scheduleCompleteActivity,scope:Sage.Link},{id:"Help",imageClass:"icon_Help_16x16",handler:function(){_d2f.openHelp("noteshistory");},tooltip:_d3b.helpText}];var _d51=this.parentRelationshipName;var _d52={tools:_d50,columns:_d4b,previewField:"LongNotes",storeOptions:{select:["Type","CompletedDate","UserName","AccountName","ContactName","ContactId","OpportunityName","OpportunityId","Description","LongNotes","Timeless","Result"],resourceKind:"history",sort:[{attribute:"CompletedDate"}]},slxContext:{workspace:this.workspace,tabId:this.tabId},contextualCondition:function(){var fmt="${0} eq '${1}'";return _d39.substitute(fmt,[_d51,_d2f.getCurrentEntityId()]);},dblClickAction:Sage.Link.editHistory};this.onBeforeCreateGrid(_d52);var grid=new Sage.UI.SLXPreviewGrid.Grid(_d52,this.placeHolder);grid.startup();var _d53=dijit.byId("tabContent");_d53.resize();_d53.resize();this.connections.push(dojo.subscribe("/entity/history/create",this,this.onHistoryChanges));this.connections.push(dojo.subscribe("/entity/history/change",this,this.onHistoryChanges));this.connections.push(dojo.subscribe("/entity/history/delete",this,this.onHistoryChanges));dojo.connect(grid,"destroy",this,this.destroy);this._grid=grid;},onHistoryChanges:function(_d54){this._grid.refresh();},destroy:function(){for(var i=0;i<this.connections.length;i++){dojo.unsubscribe(this.connections.pop());}this.inherited(arguments);},_addEntitySpecificColumns:function(list){var _d55=Sage.Services.getService("ClientEntityContext").getContext().EntityType;switch(_d55){case "Sage.Entity.Interfaces.IAccount":case "Sage.Entity.Interfaces.IOpportunity":list.push({field:"ContactName",name:_d3b.contactText,width:"100px",type:_d32,idField:"ContactId",pageName:"Contact"});break;case "Sage.Entity.Interfaces.IContact":list.push({field:"OpportunityName",name:_d3b.opportunityText,width:"100px",type:_d32,idField:"OpportunityId",pageName:"Opportunity"});break;}},onSendEmailClick:function(){var _d56=this._grid.getSelectedRecords(["Description","LongNotes","AccountName","ContactName","CompletedDate","UserName"]);if(_d56.length==0){_d38.showWarning(_d3b.pleaseSelectRecordsText);return;}var body=dojo.map(_d56,function(n){var txt=_d3b.accountText+": "+n.AccountName+"\n";if(n.ContactName){txt+=_d3b.contactText+": "+n.ContactName+"\n";}var _d57=_d2f.Convert.toDateFromString(n.CompletedDate);txt+=_d3b.dateText+": ";txt+=_d3a.format(_d57)+"\n";txt+=_d3b.userText+": "+n.UserName+"\n";txt+=_d3b.regardingText+": "+n.Description+"\n\n";txt+=_d3b.notesText+":\n"+n.LongNotes;return txt;}).join("\n\n---------------------------------------------\n\n");var _d58=dojo.map(_d56,function(n){return n.Description;}).join("; ");_d2e.writeEmail("",_d58,body);},onSendToWordClick:function(){var _d59=function(){if(Sage.gears){try{var cf=Sage.gears.factory.create("com.factory");return cf.newActiveXObject("Word.Application");}catch(e){}}if(typeof ActiveXObject!="undefined"){try{return new ActiveXObject("Word.Application");}catch(e){}}return null;};var _d5a=this._grid.getSelectedRecords(["Description","LongNotes","AccountName","ContactName","CompletedDate","UserName","Type"]);if(_d5a.length==0){_d38.showWarning(_d3b.pleaseSelectRecordsText);return;}var _d5b=_d59();if(!_d5b){_d38.showWarning(_d3b.UnableToFindWordMsg);return;}var _d5c=9;var _d5d=0;var doc=_d5b.Documents.Add();_d5b.PrintPreview=true;_d5b.Visible=true;_d5b.ActiveWindow.ActivePane.View.SeekView=_d5c;_d5b.Selection.TypeText(_d3b.accountText+": "+_d5a[0].AccountName+"            "+_d3b.printedOnText+": "+_d3a.format(new Date(),{selector:"date",fullYear:true}));_d5b.ActiveWindow.ActivePane.View.SeekView=_d5d;dojo.forEach(_d5a,function(note){_d5b.Selection.TypeText("___________________________________________________________");_d5b.Selection.TypeParagraph();_d5b.Selection.TypeParagraph();if(note.ContactName){_d5b.Selection.TypeText(_d3b.contactText+":        ");_d5b.Selection.TypeText(note.ContactName);_d5b.Selection.TypeParagraph();}if(note.CompletedDate){var _d5e=_d2f.Convert.toDateFromString(note.CompletedDate);_d5b.Selection.TypeText(_d3b.dateText+":        ");_d5b.Selection.TypeText(_d3a.format(_d5e));_d5b.Selection.TypeParagraph();}if(note.UserName){_d5b.Selection.TypeText(_d3b.userText+":        ");_d5b.Selection.TypeText(note.UserName);_d5b.Selection.TypeParagraph();}_d5b.Selection.TypeText(_d3b.typeText+":        ");_d5b.Selection.TypeText(_d2d.getActivityTypeName(note.Type));_d5b.Selection.TypeParagraph();if(note.Description){_d5b.Selection.TypeText(_d3b.regardingText+":        ");_d5b.Selection.TypeText(note.Description);_d5b.Selection.TypeParagraph();}if(note.LongNotes){_d5b.Selection.TypeText(_d3b.notesText+":        ");_d5b.Selection.TypeText(note.LongNotes);_d5b.Selection.TypeParagraph();}});_d5b.Selection.TypeText("___________________________________________________________");_d5b.Selection.TypeParagraph();_d5b.Visible=true;},onBeforeCreateGrid:function(_d5f){}});return _d4a;});},"Sage/UI/nls/AttachmentList":function(){define("Sage/UI/nls/AttachmentList",["Sage/LanguageList","dojo/_base/lang"],function(_d60,lang){var nls={root:{attachmentText:"Attachment",userText:"User",modDateText:"Modify Date/Time",dateRangeText:"Modify Date Range",sizeText:"Size",extensionText:"File Extension",addFileText:"Add File",addUrlText:"Add URL",editText:"Edit",helpText:"Help",addGoogleText:"Add Google Document",deleteText:"Delete",request:"Request File",delivered:"Delivered",requested:"Requested",available:"Available"}};return lang.mixin(_d60,nls);});},"Sage/QuickForms/Design/Editors/nls/RowBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/RowBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_d61,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",indexText:"Index:",indexTooltipText:"Number of the row or column, beginning with zero."}};return lang.mixin(_d61,nls);});},"Sage/Store/SData":function(){define("Sage/Store/SData",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/store/util/QueryResults","dojo/string","dojo/json","../Utility"],function(_d62,lang,_d63,_d64,_d65,_d66,json,_d67){return _d62("Sage.Store.SData",null,{doDateConversion:false,where:null,select:null,include:null,orderBy:null,service:null,request:null,queryName:null,entityName:null,contractName:null,resourceKind:null,resourceProperty:null,resourcePredicate:null,executeQueryAs:null,executeGetAs:null,itemsProperty:"$resources",idProperty:"$key",labelProperty:"$descriptor",entityProperty:"$name",versionProperty:"$etag",constructor:function(_d68){lang.mixin(this,_d68);},_createEntryRequest:function(id,_d69){var _d6a=_d67.expand(this,_d69.request||this.request);if(_d6a){_d6a=_d6a.clone();}else{var _d6b=_d67.expand(this,_d69.contractName||this.contractName),_d6c=_d67.expand(this,_d69.resourceKind||this.resourceKind),_d6d=_d67.expand(this,_d69.resourceProperty||this.resourceProperty),_d6e=id?/(\s+)/.test(id)?id:_d66.substitute("'${0}'",[id]):_d67.expand(this,_d69.resourcePredicate||this.resourcePredicate);if(_d6d){_d6a=new Sage.SData.Client.SDataResourcePropertyRequest(this.service).setResourceProperty(_d6d).setResourceSelector(_d6e);}else{_d6a=new Sage.SData.Client.SDataSingleResourceRequest(this.service).setResourceSelector(_d6e);}if(_d6b){_d6a.setContractName(_d6b);}if(_d6c){_d6a.setResourceKind(_d6c);}}var _d6f=_d67.expand(this,_d69.select||this.select),_d70=_d67.expand(this,_d69.include||this.include);if(_d6f&&_d6f.length>0){_d6a.setQueryArg("select",_d6f.join(","));}if(_d70&&_d70.length>0){_d6a.setQueryArg("include",_d70.join(","));}return _d6a;},_createFeedRequest:function(_d71,_d72){var _d73=_d67.expand(this,_d72.request||this.request);if(_d73){_d73=_d73.clone();}else{var _d74=_d67.expand(this,_d72.queryName||this.queryName),_d75=_d67.expand(this,_d72.contractName||this.contractName),_d76=_d67.expand(this,_d72.resourceKind||this.resourceKind),_d77=_d67.expand(this,_d72.resourceProperty||this.resourceProperty),_d78=_d67.expand(this,_d72.resourcePredicate||this.resourcePredicate);if(_d74){_d73=new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(_d74);if(_d78){_d73.getUri().setCollectionPredicate(_d78);}}else{if(_d77){_d73=new Sage.SData.Client.SDataResourcePropertyRequest(this.service).setResourceProperty(_d77).setResourceSelector(_d78);}else{_d73=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);}}if(_d75){_d73.setContractName(_d75);}if(_d76){_d73.setResourceKind(_d76);}}var _d79=_d67.expand(this,_d72.select||this.select),_d7a=_d67.expand(this,_d72.include||this.include),_d7b=_d67.expand(this,_d72.sort||this.orderBy);if(_d79&&_d79.length>0){_d73.setQueryArg("select",_d79.join(","));}if(_d7a&&_d7a.length>0){_d73.setQueryArg("include",_d7a.join(","));}if(_d7b){if(typeof _d7b==="string"){_d73.setQueryArg("orderby",_d7b);}else{if(_d7b.length>0){var _d7c=[];_d63.forEach(_d7b,function(v){if(v.descending){this.push(v.attribute+" desc");}else{this.push(v.attribute);}},_d7c);_d73.setQueryArg("orderby",_d7c.join(","));}}}var _d7d=_d67.expand(this,this.where),_d71=_d67.expand(this,_d71),_d7e=[];if(_d7d){_d7e.push(_d7d);}if(_d71){_d7e.push(_d71);}if(_d7e.length>0){_d73.setQueryArg("where","("+_d7e.join(") and (")+")");}if(typeof _d72.start!=="undefined"){_d73.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,_d72.start+1);}if(typeof _d72.count!=="undefined"){_d73.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.Count,_d72.count);}return _d73;},_onRequestFeedSuccess:function(_d7f,feed){if(feed){var _d80=lang.getObject(this.itemsProperty,false,feed),_d81=typeof feed["$totalResults"]==="number"?feed["$totalResults"]:-1;_d7f.total=_d81;_d7f.resolve(_d80);}else{var _d82=new Error("The feed result is invalid.");_d7f.reject(_d82);}},_onRequestEntrySuccess:function(_d83,_d84){if(_d84){_d83.resolve(this.doDateConversion?this._handleDateConversion(_d84):_d84);}else{var _d85=new Error("The entry result is invalid.");_d83.reject(_d85);}},_onRequestFailure:function(_d86,xhr,_d87){var _d88=new Error("An error occurred requesting: "+_d87.url);_d88.xhr=xhr;_d88.status=xhr.status;_d88.responseText=xhr.responseText;_d88.aborted=false;_d86.reject(_d88);},_onRequestAbort:function(_d89,xhr,_d8a){var _d8b=new Error("An error occurred requesting: "+_d8a.url);_d8b.xhr=xhr;_d8b.status=0;_d8b.responseText=null;_d8b.aborted=true;_d89.reject(_d8b);},_onCancel:function(_d8c){this.store.abort(_d8c.value);},_handleDateConversion:function(_d8d){for(var prop in _d8d){if(_d67.Convert.isDateString(_d8d[prop])){_d8d[prop]=_d67.Convert.toDateFromString(_d8d[prop]);}}return _d8d;},get:function(id,_d8e){var _d8f={},_d90=new _d64(lang.hitch(this,this._onCancel,_d8f)),_d91=this._createEntryRequest(id,_d8e||{});var _d92=this.executeGetAs?_d91[this.executeGetAs]:_d91.read;_d8f.value=_d92.call(_d91,{success:lang.hitch(this,this._onRequestEntrySuccess,_d90),failure:lang.hitch(this,this._onRequestFailure,_d90),abort:lang.hitch(this,this._onRequestAbort,_d90)});return _d90;},getIdentity:function(_d93){return lang.getObject(this.idProperty,false,_d93);},getLabel:function(_d94){return lang.getObject(this.labelProperty,false,_d94);},getEntity:function(_d95){return lang.getObject(this.entityProperty,false,_d95);},getVersion:function(_d96){return lang.getObject(this.versionProperty,false,_d96);},put:function(_d97,_d98){_d98=_d98||{};var id=_d98.id||this.getIdentity(_d97),_d99=_d98.entity||this.entityName,_d9a=_d98.version||this.getVersion(_d97),atom=!this.service.isJsonEnabled();if(id){_d97["$key"]=id;}if(_d99&&atom){_d97["$name"]=_d99;}if(_d9a){_d97["$etag"]=_d9a;}var _d9b={},_d9c=new _d64(lang.hitch(this,this._onCancel,_d9b)),_d9d=this._createEntryRequest(id,_d98);var _d9e=_d98.overwrite?_d9d.update:_d9d.create;_d9b.value=_d9e.call(_d9d,_d97,{success:lang.hitch(this,this._onTransmitEntrySuccess,_d9c),failure:lang.hitch(this,this._onRequestFailure,_d9c),abort:lang.hitch(this,this._onRequestAbort,_d9c)});return _d9c;},_onTransmitEntrySuccess:function(_d9f,_da0){_d9f.resolve(this.doDateConversion?this._handleDateConversion(_da0):_da0);},add:function(_da1,_da2){_da2=_da2||{};_da2.overwrite=false;return this.put(_da1,_da2);},remove:function(id){},query:function(_da3,_da4){var _da5={},_da6=new _d64(lang.hitch(this,this._onCancel,_da5)),_da7=this._createFeedRequest(_da3,_da4||{});_da6.total=-1;var _da8=this.executeQueryAs?_da7[this.executeQueryAs]:_da7 instanceof Sage.SData.Client.SDataResourcePropertyRequest?_da7.readFeed:_da7.read;_da5.value=_da8.call(_da7,{success:lang.hitch(this,this._onRequestFeedSuccess,_da6),failure:lang.hitch(this,this._onRequestFailure,_da6),abort:lang.hitch(this,this._onRequestAbort,_da6),httpMethodOverride:_da4&&_da4["httpMethodOverride"]});return _d65(_da6);},transaction:function(){},getChildren:function(_da9,_daa){},getMetadata:function(_dab){if(_dab){return {id:this.getIdentity(_dab),label:this.getLabel(_dab),entity:this.getEntity(_dab),version:this.getVersion(_dab)};}return null;}});});},"Sage/UI/Filters/EditFilters":function(){require({cache:{"url:Sage/UI/Filters/templates/EditFilters.html":"<div>\r\n    <div class=\"filter-dialog\" data-dojo-type=\"dijit.Dialog\" data-dojo-props=\"title:'${dialogTitle}'\" data-dojo-attach-point=\"dialogNode\">\r\n        <div class=\"filter-clear-all\">\r\n            <input data-dojo-attach-point=\"checkAll\" data-dojo-type=\"dijit.form.CheckBox\" />\r\n            <label>${selectAllText}</label>\r\n        </div>\r\n        <div class=\"filter-dialog-content\" data-dojo-attach-point=\"contentNode\">\r\n            \r\n        </div>\r\n        \r\n        <div class=\"button-bar alignright\">\r\n            <button data-dojo-attach-point=\"buttonOK\" data-dojo-attach-event=\"onClick:_onOKClick\" data-dojo-type=\"dijit.form.Button\">${okText}</button>\r\n            <button data-dojo-attach-point=\"buttonCancel\" data-dojo-attach-event=\"onClick:_onCancelClick\" data-dojo-type=\"dijit.form.Button\">${cancelText}</button>\r\n        </div>\r\n    </div>\r\n</div>"}});define("Sage/UI/Filters/EditFilters",["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/Dialog","dijit/form/Button","dijit/form/CheckBox","dojo/_base/declare","dojo/i18n","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dijit/registry","Sage/UI/Controls/_DialogHelpIconMixin","Sage/Utility/Filters","dojo/json","dojo/text!./templates/EditFilters.html","dojo/i18n!./nls/EditFilters"],function(_dac,_dad,_dae,_daf,_db0,_db1,_db2,i18n,_db3,lang,_db4,_db5,_db6,_db7,json,_db8){return _db2("Sage.UI.Filters.EditFilters",[_dac,_dad,_dae],{templateString:_db8,widgetsInTemplate:true,id:"editFilters",store:null,filterPanel:null,checkBoxes:null,selectAllText:"Select All",dialogTitle:"Edit Filters",okText:"OK",cancelText:"Cancel",constructor:function(){var _db9=i18n.getLocalization("Sage.UI.Filters","EditFilters");this.inherited(arguments);this.checkBoxes=[];if(_db9){this.selectAllText=_db9.selectAllText;this.okText=_db9.okText;this.cancelText=_db9.cancelText;this.dialogTitle=_db9.dialogTitle;}},postCreate:function(){this.inherited(arguments);this.checkAll.on("click",lang.hitch(this,this._onCheckAllClick));},_onCheckAllClick:function(){if(this.checkAll.checked){this._onSelectAllClick();}else{this._onClearAllClick();}},showDialog:function(){this.requestData();lang.mixin(this.dialogNode,new _db6());this.dialogNode.createHelpIconByTopic("editFilters");this.dialogNode.show();},hideDialog:function(){this.dialogNode.hide();},uninitialize:function(){this._destroyContent();this.checkAll.destroy(false);this.buttonCancel.destroy(false);this.buttonOK.destroy(false);this.dialogNode.destroy(false);this.checkBoxes=null;this.inherited(arguments);},requestData:function(){this._destroyContent();if(this.store){this.store.fetch({onItem:lang.hitch(this,this._onFetchItem),onError:lang.hitch(this,this._onFetchError),onComplete:lang.hitch(this,this._onFetchComplete)});}},_onClearAllClick:function(){_db3.forEach(this.checkBoxes,function(_dba){_dba.set("checked",false);});},_onSelectAllClick:function(){_db3.forEach(this.checkBoxes,function(_dbb){_dbb.set("checked",true);});},_onCancelClick:function(){this.dialogNode.hide();},_onOKClick:function(){this.dialogNode.hide();var data=this.filterPanel._configuration._hiddenFilters,key=this.filterPanel._configuration._hiddenFiltersKey,_dbc=Sage.Services.getService("ClientGroupContext"),_dbd=_dbc&&_dbc.getContext();_db3.forEach(this.checkBoxes,function(_dbe){var prop;prop=_dbd.CurrentEntity+"_"+_dbe.get("label");if(data[prop]){data[prop].hidden=!_dbe.get("checked");}else{data[prop]={expanded:false,hidden:!_dbe.get("checked"),items:[]};}});_db7.setHiddenFilters(key,json.stringify(data));this.filterPanel.refreshFilters(false);},_destroyContent:function(){_db3.forEach(_db5.findWidgets(this.contentNode),function(_dbf){_dbf.destroy(false);});this.checkBoxes=[];this.contentNode.innerHTML="";},_onFetchError:function(){},_onFetchItem:function(_dc0){var type=_dc0.filterType,_dc1=_dc0.filterName,_dc2=_dc0.displayName||_dc0.filterName,id=_dc1+"_check",_dc3=new _db1({"id":id,"label":_dc1});_db4.place(_dc3.domNode,this.contentNode,"last");_db4.create("br",{},_dc3.domNode,"after");_db4.create("label",{"for":id,innerHTML:_dc2},_dc3.domNode,"after");_dc3.on("click",lang.hitch(this,this._onCheckClick));this.checkBoxes.push(_dc3);},_onCheckClick:function(e){if(e.target&&e.target.checked===false){this.checkAll.set("checked",false);}},_onFetchComplete:function(){this.startup();this.setupCheckState();},setupCheckState:function(){var data=this.filterPanel._configuration._hiddenFilters||{},key=_db7.getHiddenFiltersKey(),_dc4=Sage.Services.getService("ClientGroupContext"),_dc5=_dc4&&_dc4.getContext(),_dc6=false;this.checkAll.set("checked",true);this._onSelectAllClick();_db3.forEach(this.checkBoxes,function(_dc7){var prop;prop=_dc5.CurrentEntity+"_"+_dc7.get("label");if(data[prop]){if(data[prop].hidden){_dc7.set("checked",false);_dc6=true;}else{_dc7.set("checked",true);}}});this.checkAll.set("checked",!_dc6);}});});},"Sage/UI/Controls/DependControl":function(){define("Sage/UI/Controls/DependControl",["dojo/_base/declare"],function(_dc8){var _dc9=_dc8("Sage.UI.Controls.DependControl",null,{BaseId:"",ListId:"",TextId:"",Type:"",DisplayProperty:"",SeedProperty:"",CurrentValue:"",constructor:function(_dca,_dcb,_dcc,type,_dcd,_dce){this.BaseId=_dca;this.ListId=_dcb;this.TextId=_dcc;this.Type=type;this.DisplayProperty=_dcd;this.SeedProperty=_dce;this.CurrentValue="";},LoadList:function(_dcf){var _dd0="SLXDependencyHandler.aspx";dojo.xhrGet({url:_dd0,handleAs:"text",preventCache:true,sync:true,content:{cacheid:this.BaseId,type:this.Type,displayprop:this.DisplayProperty,seeds:_dcf,currentval:this.CurrentValue},load:dojo.hitch(this,function(data){var list=dojo.byId(this.ListId);list.innerHTML="";var _dd1=data.split("|");for(var i=0;i<_dd1.length;i++){if(_dd1[i]===""){continue;}var _dd2=_dd1[i].split(",");var _dd3=document.createElement("OPTION");list.options.add(_dd3);if(_dd2[0].charAt(0)=="@"){_dd2[0]=_dd2[0].substr(1);_dd3.selected=true;}_dd3.innerHTML=_dd2[1];_dd3.value=_dd2[0];}}),error:function(_dd4){console.error(_dd4);}});},ClearList:function(){var list=dojo.byId(this.ListId);list.innerHTML="";}});return _dc9;});},"Sage/QuickForms/Design/nls/CheckBoxControlDesigner":function(){define("Sage/QuickForms/Design/nls/CheckBoxControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_dd5,lang){var nls={root:{displayNameText:"CheckBox"}};return lang.mixin(_dd5,nls);});},"Sage/QuickForms/Design/Editors/OwnerBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/OwnerBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/OwnerBasicPropertyEditor"],function(_dd6,lang,_dd7,_dd8,_dd9,_dda,_ddb,_ddc,_ddd,_dde,_ddf,_de0){return _dd6("Sage.QuickForms.Design.Editors.OwnerBasicPropertyEditor",[_dd7,_dde,_ddd],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_de0);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(_de1){if(this.isSuspended()){return;}this._designer.set("caption",_de1);},_onCaptionAlignmentChange:function(_de2){if(this.isSuspended()){return;}this._designer.set("captionAlignment",_de2);},_onIsReadOnlyChange:function(_de3){if(this.isSuspended()){return;}this._designer.set("isReadOnly",_de3);},_onToolTipChange:function(_de4){if(this.isSuspended()){return;}this._designer.set("toolTip",_de4);}});});},"Sage/QuickForms/Design/Editors/UserBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/UserBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/UserBasicPropertyEditor"],function(_de5,lang,_de6,_de7,_de8,_de9,_dea,_deb,_dec,_ded,_dee,_def){return _de5("Sage.QuickForms.Design.Editors.UserBasicPropertyEditor",[_de6,_ded,_dec],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_def);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(_df0){if(this.isSuspended()){return;}this._designer.set("caption",_df0);},_onCaptionAlignmentChange:function(_df1){if(this.isSuspended()){return;}this._designer.set("captionAlignment",_df1);},_onIsReadOnlyChange:function(_df2){if(this.isSuspended()){return;}this._designer.set("isReadOnly",_df2);},_onToolTipChange:function(_df3){if(this.isSuspended()){return;}this._designer.set("toolTip",_df3);}});});},"Sage/UI/Columns/SlxLink":function(){define("Sage/UI/Columns/SlxLink",["Sage/Format","Sage/Utility","dojo/_base/declare","dojox/grid/cells/_base"],function(_df4,_df5,_df6,_df7){Sage.Region={decimalSeparator:".",numberGroupSeparator:",",numberGroupDigits:3,decimalDigits:2,currencySymbol:"$",positiveCurrencyPattern:0,negativeCurrencyPattern:0,numberNegativeSign:"-"};var _df8=_df6("Sage.UI.Columns.SlxLink",dojox.grid.cells.Cell,{_dataTypeChecked:null,_layout:null,_getDisplayValue:function(_df9,_dfa,_dfb){var _dfc=_dfb||"";if(this._layout==null){if(_df5.getModeId()=="list"){var _dfd=dijit.byId("list");if(_dfd&&_df5.isDefined(_dfd)&&_df5.isDefined(_dfd._configuration)){this._layout=_dfd._configuration.list.layout[this.layoutIndex];}else{return _dfc;}}else{var _dfe=this.get?this.get(_df9,_dfa):(this.value||this.defaultValue);if(this._dataTypeChecked==null&&_df5.isStringWithLength(_dfe)){this._dataTypeChecked=true;if(_dff.isDateString(_dfe)){this._layout={"fieldType":"DateTime","format":"DateTime","formatString":this.displayFormatString||""};}else{return _dfc;}}else{return _dfc;}}}if(this._layout.fieldType==="DateTime"&&this._layout.format==="DateTime"){var _e00=this.get?this.get(_df9,_dfa):(this.value||this.defaultValue);if(dojo.isString(_e00)&&_dff.isDateString(_e00)){var _e01=_dff.toDateFromString(_e00);_e01=new Date(_e01.getUTCFullYear(),_e01.getUTCMonth(),_e01.getUTCDate());if(_df5.isStringWithLength(this._layout.formatString)){try{return dojo.date.locale.format(_e01,{selector:"date",datePattern:this._layout.formatString});}catch(e){if(typeof console!=="undefined"){}return dojo.date.locale.format(_e01,{selector:"date",fullYear:true});}}else{return dojo.date.locale.format(_e01,{selector:"date",fullYear:true});}}}return _dfc;},displayFields:[],displayFormatString:"",idField:"",pageName:"",appliedSecurity:"",urlFields:[],urlFormatString:"",target:"",image:"",queryParams:null,getPageName:function(){if(this.pageName===""){var url=document.location.href;if(url.indexOf("?")>-1){url=url.substring(0,url.indexOf("?"));}url=url.substring(url.lastIndexOf("/")+1);this.pageName=url.replace(".aspx","");}return this.pageName;},formatEditing:function(_e02,_e03){},format:function(_e04,_e05){if(_e05===null){return this.defaultValue;}var _e06,_e07,_e08,vals=[],_e09="",_e0a="",_e0b="",i=this.grid.edit.info,idx=0,d=this.get?this.get(_e04,_e05):(this.value||this.defaultValue);if((this.displayFormatString)&&(this.displayFormatString!=="")){if(this.displayFields.length<1){vals.push(d);}for(idx;idx<this.displayFields.length;idx++){vals.push(_df5.getValue(_e05,this.displayFields[idx].trim()));}d=dojo.string.substitute(this.displayFormatString,vals);}if(this.target!==""){_e09=dojo.string.substitute(" target=\"${0}\" ",[this.target]);}if(this.queryParams){if(typeof this.queryParams==="object"){_e0b="&"+dojo.objectToQuery(this.queryParams);}else{if(typeof this.queryParams==="string"){_e0b="&"+this.queryParams;}}}d=(d&&d.replace&&this.grid.escapeHTMLInData)?d.replace(/&/g,"&amp;").replace(/</g,"&lt;"):d;if(this.editable&&(this.alwaysEditing||(i.rowIndex==_e04&&i.cell==this))){return this.formatEditing(d,_e04);}else{_e08=this._defaultFormat(d,[d,_e04,this]);if(this.image!==""){_e08=dojo.string.substitute("<img src=\"${0}\" alt=\"${1}\" />",[this.image.replace(/^~\//,""),_e08]);}if(this.appliedSecurity!==""){var svc=Sage.Services.getService("RoleSecurityService");if(svc){if(!svc.hasAccess(this.appliedSecurity)){_e08=this._getDisplayValue(_e04,_e05,_e08);return _e08;}}}if(this.idField!==""){var _e0c=this.getPageName();_e07=_df5.getValue(_e05,this.idField);if(!_e07){var _e0d=(this.idField==="id")?"$key":this.idField.replace(/\.[iI]d/g,".$key");_e07=_df5.getValue(_e05,_e0d);}if(_e07){_e08=this._getDisplayValue(_e04,_e05,_e08);if(_e0c.toUpperCase()==="HISTORY"){return dojo.string.substitute("<a href=\"javascript:Sage.Link.editHistory('${0}')\" id=\"${0}\" title=\"${1}\">${1}</a>",[_e07,_e08]);}else{return dojo.string.substitute("<a href=\"${0}.aspx?entityid=${1}&modeid=Detail${2}\"${3} id=\"${1}\" title=\"${4}\">${4}</a>",[_e0c,_e07,_e0b,_e09,_e08]);}}}else{var _e0e=(this.urlFormatString!=="")?this.urlFormatString:"${0}";vals=[];if(this.urlFields.length<1){vals.push(d);}for(idx=0;idx<this.urlFields.length;idx++){vals.push(_df5.getValue(_e05,dojo.trim(this.urlFields[idx])));}_e08=this._getDisplayValue(_e04,_e05,_e08);return dojo.string.substitute("<a href=\"http://${0}${1}\"${2}>${3}</a>",[dojo.string.substitute(this.urlFormatString,vals),_e0b,_e09,_e08]);}return _e08;}},markupFactory:function(node,cell){dojox.grid.cells.Cell.markupFactory(node,cell);var d=dojo;var _e0f=d.trim(d.attr(node,"displayFields")||"");if(_e0f){var f=_e0f.split(",");cell.displayFields=f;}cell.displayFormatString=d.trim(d.attr(node,"displayFormatString")||"");cell.idField=d.trim(d.attr(node,"idField")||"");cell.pageName=d.trim(d.attr(node,"pageName")||"");cell.appliedSecurity=d.trim(d.attr(node,"appliedSecurity")||"");cell.image=d.trim(d.attr(node,"image")||"");var _e10=d.trim(d.attr(node,"urlFields")||"");if(_e10){var u=_e10.split(",");cell.urlFields=u;}cell.urlFormatString=d.trim(d.attr(node,"urlFormatString")||"");cell.target=d.trim(d.attr(node,"target")||"");if(d.hasAttr(node,"queryParams")){cell["queryParams"]=d.trim(d.attr(node,"queryParams")||"");}}});var _dff=_df5.Convert;return _df8;});},"Sage/QuickForms/Design/nls/EditableGridControlDesigner":function(){define("Sage/QuickForms/Design/nls/EditableGridControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_e11,lang){var nls={root:{displayNameText:"Editable Grid"}};return lang.mixin(_e11,nls);});},"Sage/QuickForms/Design/nls/HiddenControlDesigner":function(){define("Sage/QuickForms/Design/nls/HiddenControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_e12,lang){var nls={root:{displayNameText:"Hidden Text"}};return lang.mixin(_e12,nls);});},"Sage/UI/Dashboard/nls/DashboardWidgetCell":function(){define("Sage/UI/Dashboard/nls/DashboardWidgetCell",["Sage/LanguageList","dojo/_base/lang"],function(_e13,lang){var nls={root:{closeTooltipText:"Close",minimizeTooltipText:"Minimize",settingsTooltipText:"Settings"}};return lang.mixin(_e13,nls);});},"Sage/Layout/_SplitterEnhancedMixin":function(){define("Sage/Layout/_SplitterEnhancedMixin",["dojo/_base/declare","dojo/_base/connect","dojox/storage/LocalStorageProvider","dojo/dom-style","dojo/_base/sniff"],function(_e14,_e15,_e16,_e17,has){return _e14("Sage.Layout._SplitterEnhancedMixin",null,{postCreate:function(){this.inherited(arguments);this.storageId=this.id;},startup:function(){this.inherited(arguments);if(has("ie")){this._widthPadding=19;}if(this.splitter===true){this._addEventHandlers();this._addEventSubscribers();var dim=this._getFromLocalStorage(this.storageId);if(dim===null){dim={h:this.domNode.scrollHeight+5,w:this.domNode.scrollWidth};}this._setupStyle(dim);this.resize(dim);this._setDefaults(dim);}},splitterDblClick:null,splitterStopDrag:null,storageId:null,_defaultHeight:310,_defaultWidth:180,_widthPadding:2,_setDefaults:function(dim){if((this.region==="top"||this.region==="bottom")&&dim.h!==this.minSize){this._defaultHeight=dim.h;}if((this.region==="right"||this.region==="left")&&dim.w>this.minSize+this._widthPadding){this._defaultWidth=dim.w;}},_addEventHandlers:function(){var _e18=dijit.byId([this.id,"_splitter"].join(""));if(typeof _e18!=="undefined"){if(this.splitterStopDrag===null){this.splitterStopDrag=this.connect(_e18,"_stopDrag",function(){if(this.region==="top"){if(this.h===this.minSize){_e15.publish(["Sage/events/",this.id,"/splitterMinSize"].join(""),this);}else{_e15.publish(["Sage/events/",this.id,"/splitterMovedNotMin"].join(""),this);}}this._setDefaults({h:this.h,w:this.w});this._saveToLocalStorage(this.storageId,{h:this.h,w:this.w});});}if(this.splitterDblClick===null){this.splitterDblClick=this.connect(_e18,"onDblClick",function(){this.toggleSplitter();_e15.publish(["Sage/events/",this.id,"/splitterToggled"].join(""),this);});}}},_addEventSubscribers:function(){_e15.subscribe(["Sage/events/",this.id,"/toggleSplitter"].join(""),this,"toggleSplitter");},toggleSplitter:function(){var dim={},_e19=dijit.byId([this.id,"_splitter"].join("")),_e1a=dijit.byId("Viewport");if(typeof _e19!=="undefined"&&_e19!==null){if(this.region==="top"||this.region==="bottom"){dim=(this.h===this.minSize)?{h:this._defaultHeight,w:this.w}:{h:this.minSize,w:this.w};}if(this.region==="right"||this.region==="left"){dim=(this.w<this.minSize+this._widthPadding)?{h:this.h,w:this._defaultWidth}:{h:this.h,w:this.minSize};}if(dim.w===19){dim.w=this._defaultWidth;}this._setupStyle(dim);this.resize(dim);_e1a.resize();this._saveToLocalStorage(this.storageId,dim);}},_setupStyle:function(dim){if(!this.domNode){return;}var _e1b=false;if(this.region==="top"||this.region==="bottom"){_e1b=(dim.h===this.minSize);}if(this.region==="right"||this.region==="left"){_e1b=(dim.w<this.minSize+this._widthPadding);}if(_e1b){_e17.set(this.domNode,"overflow","hidden");}else{_e17.set(this.domNode,"overflow","auto");}},_saveToLocalStorage:function(key,_e1c){var _e1d=new _e16();_e1d.initialize();_e1d.put(key,_e1c,function(_e1e,key,_e1f){if(_e1e===_e1d.FAILED){console.error("Failed writing key: "+key+" in local storage. Message: "+_e1f);}});},_getFromLocalStorage:function(key,_e20){var _e21=new _e16();_e21.initialize();return _e21.get(key,_e20);}});});},"Sage/MainView/IntegrationContract/AdvancedSearchOptions":function(){require({cache:{"url:Sage/MainView/IntegrationContract/templates/AdvancedSearchOptions.html":"[\r\n'<div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\">{%= $.searchOptionsHeader %}',\r\n            '<span class=\"boldtext\">{%= $.configOptions.targetAccount %}</span>',\r\n        '</label>',\r\n        '<br /><br />',\r\n    '</div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontext padBottom\" style=\"padding-left:20px\">{%= $.searchOptionsText %}</label>',\r\n    '</div>',\r\n    '<div>',\r\n        '<br />',\r\n        '<label class=\"slxlabel\" style=\"padding-left:20px\">{%= $.propertyText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:136px\">{%= $.operatorText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:118px\">{%= $.searchText %}</label>',\r\n    '</div>',\r\n    '<div dojoAttachPoint=\"conditionContainer\" style=\"padding:10px;\" id=\"{%= $.id %}-Condition-container\"></div>',\r\n    '<div class=\"button-bar alignright\">',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').refineSearchObject.getSelections();\">',\r\n            '{%= $.okText %}',\r\n        '</button>',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').hide();\">',\r\n            '{%= $.cancelText %}',\r\n        '</button>',\r\n    '</div>',\r\n'</div>'\r\n]\r\n"}});define("Sage/MainView/IntegrationContract/AdvancedSearchOptions",["dojo/_base/declare","dojo/i18n!./nls/AdvancedSearchOptions","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","dojo/text!./templates/AdvancedSearchOptions.html","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","dijit/Dialog"],function(_e22,_e23,_e24,_e25,_e26,_e27){var _e28=_e22("Sage.MainView.IntegrationContract.AdvancedSearchOptions",[_e24,_e25],{configOptions:[],id:"",refineSearchId:"",index:0,selectedFieldIndex:0,fields:[{FieldName:"",DisplayName:""}],operators:[],selectedFilters:[],hideimgurl:"images/icons/Find_Remove_16x16.gif",addimgurl:"images/icons/Find_Add_16x16.gif",widgetsInTemplate:true,constructor:function(){dojo.mixin(this,_e23);},init:function(_e29){this.id=_e29.Id;this.configOptions=_e29;},conditionTemplate:new Simplate(["<div >","<div id=\"filterCondition_{%= $.index %}\" class=\"lookup-condition-row\" style=\"padding-left:10px\">","<select id=\"fieldnames_{%= $.index %}\" class=\"lookup-fieldnames-list\" style=\"width:160px\" onchange=\"dijit.byId('{%= $.refineSearchId %}').refineSearchObject.onPropertyChange({%= $.index %});\" >","{% for (var i=0;i<$.fields.length;i++) { %}","<option value=\"{%= $.fields[i].FieldName %}\" {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.fields[i].DisplayName %}</option>","{% } %}","</select>","<select id=\"operators_{%= $.index %}\" class=\"lookup-operators-list\" style=\"width:160px; margin-left:20px\">","{% for (var i=0;i<$.operators.length;i++) { %}","<option value=\"{%= $.operators[i].symbol %}\"  {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.operators[i].display %}</option>","{% } %}","</select>","<input type=\"text\" id=\"searchValue_{%= $.index %}\" class=\"search-value-list\" style=\"width:160px;margin-left:5px\" />","{% if ($.index == 1 ) { %}","<img id=\"addCondition_{%= $.index %}\" src=\"{%= $.addimgurl %}\" alt=\"{%= $.addImgAltText %}\" style=\"cursor:pointer;padding:0px 5px;\" onclick=\"dijit.byId('{%= $.id %}-Dialog').refineSearchObject.addLookupCondition();\" />","{% } %}","{% if ($.index > 1 ) { %}","<img src=\"{%= $.hideimgurl %}\" alt=\"{%= $.hideImgAltText %}\" style=\"cursor:pointer;padding:0px 5px;\" onclick=\"dijit.byId('{%= $.id %}-Dialog').refineSearchObject.removeLookupCondition({%= $.index %});\" />","{% } %}","</div>","</div>"]),onRefineSearch:function(){var _e2a=dojo.byId(this.configOptions.optionRefineSearchId);if(_e2a!=null&&_e2a.checked){this.getDefaultMatchProperties();return true;}return false;},getDefaultMatchProperties:function(){var self=this;var _e2b=dijit.byId([this.id,"-Dialog"].join(""));if(!_e2b){dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/resources/getmatchproperties?resourceKind=${0}&targetMapping=${1}",[this.configOptions.resourceKind,true]),cache:false,preventCache:true,handleAs:"json",load:function(data){self.fields=data.fields;self.operators=data.operators;self.selectedFilters=data.filters;self.showDialog();},error:function(_e2c,_e2d,_e2e){_e26.ShowError("request: "+_e2c+" \nstatus: "+_e2d+" \nerror: "+_e2e);}});}else{self.showDialog();}},showDialog:function(){this.index=0;var _e2f=dijit.byId([this.id,"-Dialog"].join(""));if(!_e2f){_e2f=new dijit.Dialog({title:this.dialogCaption,id:[this.id,"-Dialog"].join(""),style:["height:",300,"px;width:",600,"px;"].join(""),closable:true,loadingMessage:this.loadingText,refineSearchObject:this});var _e30=new Simplate(eval(_e27));_e2f.attr("content",_e30.apply(this));}this.refineSearchId=_e2f.id;_e2f.show();this.loadMatchingFilters();dojo.style(_e2f.domNode,"zIndex",9050);},loadMatchingFilters:function(){for(var i=0;i<this.selectedFilters.length;i++){this.addLookupCondition();var _e31=dojo.byId(["fieldnames_",this.index].join(""));if(_e31!=null){_e31.value=this.selectedFilters[i].Property;}var _e32=dojo.byId(["operators_",this.index].join(""));if(_e32!=null){_e32.value=this.selectedFilters[i].Operator;_e32.symbol=this.selectedFilters[i].Operator;}var _e33=dojo.byId(["searchValue_",this.index].join(""));if(_e33!=null){_e33.value=this.selectedFilters[i].SearchValue;}}},getSelections:function(){var _e34=[];this.updateDisplay();var _e35=dojo.query(".lookup-condition-row");for(var i=0;i<_e35.length;i++){var _e36=dojo.query(".lookup-fieldnames-list",_e35[i]);var _e37=dojo.query(".lookup-operators-list",_e35[i]);var _e38=dojo.query(".search-value-list",_e35[i]);var _e39={fieldName:_e36[0].value,operator:_e37[0].value,searchValue:_e38[0].value};_e34.push(_e39);}var _e3a=dojo.byId(this.configOptions.filtersId);if(_e3a!=null){_e3a.value=Sys.Serialization.JavaScriptSerializer.serialize(_e34);}this.invokeClickEvent(dojo.byId(this.configOptions.refreshGridId));},updateDisplay:function(){var _e3b=dojo.byId(this.configOptions.resultsMsgId);if(_e3b!=null){_e3b.innerHTML=this.loadingDisplay;}_e3b=dojo.byId(this.configOptions.rowSearchResultsId);if(_e3b!=null){_e3b.style.display="none";}_e3b=dojo.byId(this.configOptions.rowLinkToId);if(_e3b!=null){_e3b.style.display="none";}},invokeClickEvent:function(_e3c){if(document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",true,true);_e3c.dispatchEvent(e);}else{_e3c.click();}},onPropertyChange:function(_e3d){var _e3e=dojo.byId(["searchValue_",_e3d].join(""));if(_e3e!=null){_e3e.value="";}},addLookupCondition:function(){this.index++;var _e3f=dojo.byId([this.id,"-Condition-container"].join(""));var _e40=this.conditionTemplate.apply(this);dojo.place(_e40,_e3f);this.dialogResize();},dialogResize:function(){dojo.style([this.id,"-Dialog"].join(""),"height","auto");},removeLookupCondition:function(idx){dojo.query(dojo.byId(["filterCondition_",idx].join(""))).orphan();},reloadOperators:function(_e41,_e42){this.selectedFieldIndex=_e41;this.index=_e42;var _e43=this.conditionTemplate.apply(this);dojo.place(_e43,["filterCondition_",_e42].join(""),"replace");},clearTargetSelection:function(){var _e44=document.getElementsByName("TargetsGroup");if(_e44!=null){for(var i=0;i<_e44.length;i++){_e44[i].checked=false;}}},onMatchSelection:function(_e45){var _e46=document.getElementById(_e45);if(_e46!=null){_e46.checked=true;}},closeDetailsDialog:function(){}});return _e28;});},"Sage/QuickForms/Design/Editors/GenericBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/GenericBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/GenericBasicPropertyEditor"],function(_e47,lang,_e48,_e49,_e4a,_e4b,_e4c,_e4d,_e4e,_e4f,_e50,_e51){return _e47("Sage.QuickForms.Design.Editors.GenericBasicPropertyEditor",[_e48,_e4f,_e4e],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,titleText:"Basic",appearanceText:"Appearance",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_e51);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));},_onCaptionChange:function(_e52){if(this.isSuspended()){return;}this._designer.set("caption",_e52);},_onCaptionAlignmentChange:function(_e53){if(this.isSuspended()){return;}this._designer.set("captionAlignment",_e53);}});});},"Sage/QuickForms/Design/Editors/nls/UserBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/UserBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_e54,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"}}};return lang.mixin(_e54,nls);});},"url:Sage/UI/Controls/templates/DropDownSelectUser.html":"<div>\r\n    <select data-dojo-type=\"Sage.UI.ComboBox\" shouldPublishMarkDirty=\"false\" dojoAttachPoint=\"comboBox\" dojoAttachEvent=\"onBlur: _onBlur\">\r\n    </select>\r\n</div>\r\n","Sage/UI/nls/Dialogs":function(){define("Sage/UI/nls/Dialogs",["Sage/LanguageList","dojo/_base/lang"],function(_e55,lang){var nls={root:{yesText:"Yes",noText:"No",okText:"OK",cancelText:"Cancel"}};return lang.mixin(_e55,nls);});},"Sage/UI/DashboardGroupListConfigurationProvider":function(){define("Sage/UI/DashboardGroupListConfigurationProvider",["Sage/UI/GroupListConfigurationProvider","dojo/string","dojo/_base/declare"],function(_e56,_e57,_e58){var _e59=_e58("Sage.UI.DashboardGroupListConfigurationProvider",[_e56],{formatPredicate:function(_e5a){_e5a.family=_e5a.family&&_e5a.family.toUpperCase();return _e57.substitute("name eq '${name}' and upper(family) eq '${family}'",_e5a);},_createConfigurationForList:function(_e5b){var _e5c=Sage.Services.getService("ClientGroupContext"),_e5d;if(_e5c){_e5d=_e5c.getContext();}_e5d.CurrentTable="";return this.inherited(arguments);},_getListContextMenuItems:function(){return [];},_onListContext:function(e){return;}});return _e59;});},"Sage/TaskPane/nls/SecuredActionTasklet":function(){define("Sage/TaskPane/nls/SecuredActionTasklet",["Sage/LanguageList","dojo/_base/lang"],function(_e5e,lang){var nls={root:{addToRoleTitle:"Add to Role"}};return lang.mixin(_e5e,nls);});},"Sage/Layout/main":function(){define("Sage/Layout/main",["Sage/Layout/ContentPane","Sage/Layout/TabContainer","Sage/Layout/MainContentDetailsPane","Sage/Layout/_SplitterEnhancedMixin"],function(){});},"Sage/UI/Dashboard/nls/DashboardTabController":function(){define("Sage/UI/Dashboard/nls/DashboardTabController",["Sage/LanguageList","dojo/_base/lang"],function(_e5f,lang){var nls={root:{newTabText:"New Tab",addContentText:"Add Content",editOptionsText:"Edit Options",hideTabText:"Hide Tab",closeText:"Close",copyTabText:"Copy Tab",showTabText:"Show Tab",shareTabText:"Share Tab",deleteTabText:"Delete Tab",deleteTabConfirmText:"Are you sure you want to delete this tab?",descriptionText:"Description",everyoneText:"Everyone",saveTabText:"Save Tab",helpText:"Help",addText:"Add",invalidMessage:"Invalid Character",invalidDuplicateMessage:"Title must be unique.",deleteText:"Delete",titleText:"Title:",chooseTemplateText:"Choose the template you want to use:",oneColumnText:"One column",twoColumnText:"Two columns split",fatLeftText:"Two column larger left",fatRightText:"Two column larger right",makeDefaultText:"Make default",releaseFetchErrorText:"Error fetching release list.",releaseDeleteNoneSelected:"No items selected.",releasedToText:"Released To:",typeText:"Type",addLookup:"Add",okButton:"OK",errorText:"Error",warningText:"Warning",permissionErrorText:"Error: User does not have the right to perform this action.",permissionErrorPerformCopyText:"Would you like to create a personal copy of the page?",yesText:"Yes",noText:"No"}};return lang.mixin(_e5f,nls);});},"Sage/UI/PopupMenuItem":function(){define("Sage/UI/PopupMenuItem",["Sage/UI/MenuItem","dojo/_base/declare"],function(_e60,_e61){var _e62=_e61("Sage.UI.PopupMenuItem",_e60,{_fillContent:function(){if(this.srcNodeRef){var _e63=dojo.query("*",this.srcNodeRef);Sage.UI.PopupMenuItem.superclass._fillContent.call(this,_e63[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(node);}dojo.body().appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","");}dijit.setWaiState(this.focusNode,"haspopup","true");},destroyDescendants:function(){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive();}delete this.popup;}this.inherited(arguments);}});return _e62;});},"url:Sage/Utility/File/templates/FallbackFilePicker_Attachment.html":"[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"uploadFileDialog\" title=\"{%= $.attachFileText %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onHide\">',\r\n        '<iframe src=\"about:blank\" style=\"width:0px;height:0px;border-width:0px;\" name=\"{%= $._iframeId %}\" id=\"{%= $._iframeId %}\" dojoAttachPoint=\"_iframe\" dojoAttachEvent=\"onload:_iframeLoad\"></iframe>',\r\n        '<form method=\"post\" enctype=\"multipart/form-data\" action=\"{%= $._buildPostUrl() %}\" target=\"{%= $._iframeId %}\" dojoAttachPoint=\"_postForm\" class=\"attachment-properties-form\">',\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\">',\r\n                '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.uploadFileText %}\" >',\r\n                    '<input name=\"file\" multiple=\"false\" type=\"file\" dojoAttachEvent=\"onchange:_onNewFile\" dojoAttachPoint=\"btn_FileSelect\" class=\"uploadButton\" />',\r\n                '</div>',\r\n                 '<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.descriptionText %}\" name=\"description\" id=\"{%= $.id %}_tb_Description\" dojoAttachPoint=\"tb_Description\" maxlength=\"128\" ></div>',\r\n                 '<input type=\"hidden\" dojoType=\"dijit.form.TextBox\" name=\"fileName\" id=\"{%= $.id %}_tb_realFileName\" dojoAttachPoint=\"tb_realFileName\" maxlength=\"255\" />',\r\n            '</div>',\r\n            '<div class=\"general-dialog-actions\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                '<span>&nbsp;&nbsp</span>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n            '</div>',\r\n            '<input type=\"hidden\" name=\"dataType\" value=\"R\" />',\r\n            '<input type=\"hidden\" name=\"attachDate\" dojoAttachPoint=\"_attachDate\"/>',\r\n            '<input type=\"hidden\" name=\"accountId\" dojoAttachPoint=\"_accountId\"/>',\r\n            '<input type=\"hidden\" name=\"activityId\" dojoAttachPoint=\"_activityId\" />',\r\n            '<input type=\"hidden\" name=\"contactId\" dojoAttachPoint=\"_contactId\" />',\r\n            '<input type=\"hidden\" name=\"contractId\" dojoAttachPoint=\"_contractId\" />',\r\n            '<input type=\"hidden\" name=\"defectId\" dojoAttachPoint=\"_defectId\" />',\r\n            '<input type=\"hidden\" name=\"historyId\" dojoAttachPoint=\"_historyId\" />',\r\n            '<input type=\"hidden\" name=\"leadId\" dojoAttachPoint=\"_leadId\" />',\r\n            '<input type=\"hidden\" name=\"opportunityId\" dojoAttachPoint=\"_opportunityId\" />',\r\n            '<input type=\"hidden\" name=\"productId\" dojoAttachPoint=\"_productId\" />',\r\n            '<input type=\"hidden\" name=\"returnId\" dojoAttachPoint=\"_returnId\" />',\r\n            '<input type=\"hidden\" name=\"salesOrderId\" dojoAttachPoint=\"_salesOrderId\" />',\r\n            '<input type=\"hidden\" name=\"ticketId\" dojoAttachPoint=\"_ticketId\" />',\r\n            '<input type=\"hidden\" name=\"userId\" dojoAttachPoint=\"_userId\" />',\r\n        '</form>',\r\n    '</div>',\r\n'</div>'\r\n]","Sage/UI/Controls/HelpMenu":function(){define("Sage/UI/Controls/HelpMenu",["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/PopupMenuBarItem","Sage/UI/OrientableMenuBar","dojo/i18n!./nls/HelpMenu","dojo/_base/declare","dojo/dom-class"],function(_e64,_e65,_e66,_e67,_e68,_e69,_e6a){var _e6b=_e69("Sage.UI.Controls.HelpMenu",_e67,{orientation:{"BR":"TR","BL":"TL"},postMixInProperties:function(){this.inherited(arguments);},postCreate:function(){this.inherited(arguments);var menu=new dijit.Menu();menu.addChild(new _e65({label:_e68.webClientHelpText,imageClass:"icon_Help_16x16",title:_e68.webClientHelpText,id:"helpRoot",onClick:function(){Sage.Utility.openHelp("slxoverview");}}));menu.addChild(new _e65({label:_e68.gettingStartedText,imageClass:"icon_pdf_16x16",title:_e68.gettingStartedText,id:"helpGettingStarted",onClick:function(){window.open("help/Getting Started with Sage SalesLogix Web Client.pdf","MCWebHelp");}}));menu.addChild(new _e65({label:_e68.quickReferenceText,imageClass:"icon_pdf_16x16",title:_e68.quickReferenceText,id:"helpQuickReference",onClick:function(){window.open("help/Sage SalesLogix Quick Reference for the Web User.pdf","MCWebHelp");}}));menu.addChild(new _e65({label:_e68.aboutText,imageClass:"icon_Help_16x16",title:_e68.aboutText,id:"helpAbout",onClick:function(){Sage.Utility.openHelp("slxthirdparty");}}));var _e6c=menu.getChildren();_e6a.add(_e6c[1].domNode,"hiddenHelpButton");_e6a.add(_e6c[2].domNode,"hiddenHelpButton");this.addChild(new _e66({label:"",iconStyle:"width: 16px",imageClass:"icon_Help_16x16",title:_e68.helpText,id:"btnHelpMenu",popup:menu}));}});return _e6b;});},"Sage/Services/SystemOptions":function(){define("Sage/Services/SystemOptions",["Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(_e6d,_e6e){var svc=_e6e("Sage.Services.SystemOptions",null,{_systemOptions:false,_systemOptionsByName:false,notFoundrrorMsg:"A system option was requested that cannot be found.",requestFailedErrorMsg:"A request for system options has failed to return results.",get:function(_e6f,_e70,_e71,_e72){if(!this._systemOptions){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_e6d.getSDataService("system",false,true,true));req.setResourceKind("systemoptions");req.read({success:function(_e73){this._buildHash(_e73);this._returnOption(_e6f,_e70,_e71,_e72);},failure:function(_e74){_e71.call(_e72||this,this.requestFailedErrorMsg);},scope:this});}else{this._returnOption(_e6f,_e70,_e71,_e72);}},_buildHash:function(_e75){var _e76=_e75.$resources;this._systemOptionsByName={};dojo.forEach(_e76,function(item){this._systemOptionsByName[item.name]=item;},this);this._systemOptions=_e75.$resources;},_returnOption:function(_e77,_e78,_e79,_e7a){if(this._systemOptionsByName[_e77]){_e78.call(_e7a||this,this._systemOptionsByName[_e77].value);}else{_e79.call(_e7a||this,this.notFoundrrorMsg);}}});Sage.Services.addService("SystemOptions",new Sage.Services.SystemOptions());return svc;});},"Sage/MainView/IntegrationContract/nls/SalesOrderRTDV":function(){define("Sage/MainView/IntegrationContract/nls/SalesOrderRTDV",["Sage/LanguageList","dojo/_base/lang"],function(_e7b,lang){var nls={root:{dialogCaption:"Sales Order Details",loadingText:"loading...",lblSalesOrderCaption:"Sales Order:",lblStatusCaption:"Status:",lblGrossTotalCaption:"Order Amount:",lblOrderDateCaption:"Order Date:",lblTaxTotalCaption:"Tax Total:",lblHoldStatusCaption:"Hold Status:",lblCurrencyCaption:"Currency:",lblTypeCaption:"Type:",lblCostTotalCaption:"Total Cost:",lblPONumberCaption:"PO Number:",lblProfitTotalCaption:"Total Profit:",lblQuotationCaption:"Quotation:",lblInvoiceStatusCaption:"Invoice Status:",lblContactCaption:"Contact:",lblDeliveryDateCaption:"Delivery Date:",lblDueDateCaption:"Due Date:",lblPriceListCaption:"Price List:",lblCarrierCaption:"Carrier:",lblNetTotalCaption:"Net Total:",lblAllocationStatusCaption:"Allocation Status:",lblDiscountTotalCaption:"Discount Total:",lblDeliveryStatusCaption:"Delivery Status:",lblChargesTotalCaption:"Charges Total:",detailsTabTitle:"Details",salesPersonsTabTitle:"Sales Persons",addressTabTitle:"Addresses",salesOrderLinesTabTitle:"Sales Order Lines",paymentsTabTitle:"Payments",deliveriesTabTitle:"Deliveries",grdSalesOrder_Edit:"Edit",grdSalesOrder_OrderNumber:"Order Number",grdSalesOrder_OrderDate:"Order Date",grdSalesOrder_Status:"Status",grdSalesOrder_HoldStatus:"Hold Status",grdSalesOrder_Type:"Type",grdSalesOrder_PO:"PO Number",grdSalesOrder_NetTotal:"Net Total",grdSalesOrder_DiscountTotal:"Discount Total",grdSalesOrder_ChargesTotal:"Charges Total",grdSalesOrder_TaxTotal:"Tax Total",grdSalesOrder_GrossTotal:"Gross Total",grdSalesOrder_Currency:"Currency",grdSalesPersons_Name:"Name",grdSalesPersons_Type:"Type",grdSalesPersons_Extension:"Extension",grdSalesPersons_Relationship:"Relationship",grdAddress_Name:"Name",grdAddress_Address1:"Address 1",grdAddress_Address2:"Address 2",grdAddress_City:"City",grdAddress_State:"State",grdAddress_Zip:"Zip",grdItems_Line:"Line Number",grdItems_Type:"Type",grdItems_Commodity:"Commodity",grdItems_CommodityVariant:"Variant",grdItems_CommodityDimension:"Dimension",grdItems_UnitOfMeasure:"Unit",grdItems_Location:"Location",grdItems_PriceList:"Price List",grdItems_Quantity:"Quantity",grdItems_InitialPrice:"Initial Price",grdItems_ActualPrice:"Actual Price",grdItems_NetTotal:"Net Total",grdItems_ChargesTotal:"Charges Total",grdItems_DiscountTotal:"Discount Total",grdItems_TaxTotal:"Tax Total",grdItems_GrossTotal:"Gross Total",grdPayments_Date:"Payment Date",grdPayments_Name:"Name",grdPayments_Type:"Type",grdPayments_Status:"Status",grdPayments_NetTotal:"Net Total",grdPayments_Discounts:"Discounts",grdPayments_Charges:"Charges",grdPayments_Tax:"Tax",grdPayments_GrossTotal:"Gross Total",grdPayments_Currency:"Currency",grdPayments_TenderType:"Tender Type",grdPayments_TenderReference:"Tender Reference",grdPayments_ProcessDate:"Process Date",grdDeliveries_Number:"Number",grdDeliveries_Type:"Type",grdDeliveries_Status:"Status",grdDeliveries_RequestedDate:"Requested Date",grdDeliveries_ActualDate:"Actual Date",grdDeliveries_ActualTime:"Actual Time",grdDeliveries_RequestedQuantity:"Requested Quantity",grdDeliveries_DeliveredQuantity:"Delivered Quantity",grdDeliveries_Method:"Method",grdDeliveries_Carrier:"Carrier",grdDeliveries_CarrierReference:"Carrier Reference",grdDeliveries_ExceptionReason:"Exception Reason",errorERPRequest:"An occured occured opening accounting systems sales order detail view. ",errorERPRequestDetails:"${0}, ${1} Request: ${2}",btnCloseCaption:"Close"}};return lang.mixin(_e7b,nls);});},"Sage/UI/Controls/main":function(){define("Sage/UI/Controls/main",["Sage/UI/Controls/_customSelectMixin","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/Controls/Address","Sage/UI/Controls/CheckBox","Sage/UI/Controls/CopyToClipboard","Sage/UI/Controls/Currency","Sage/UI/Controls/CurrencyTextBox","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/DependControl","Sage/UI/Controls/DependencyLookup","Sage/UI/Controls/DropDownSelectPickList","Sage/UI/Controls/DropDownSelectUser","Sage/UI/Controls/DurationSelect","Sage/UI/Controls/Email","Sage/UI/Controls/HelpMenu","Sage/UI/Controls/LogOffButton","Sage/UI/Controls/Lookup","Sage/UI/Controls/EntityInfoToolTip","Sage/UI/Controls/MultiSelectPickList","Sage/UI/Controls/Name","Sage/UI/Controls/Numeric","Sage/UI/Controls/Phone","Sage/UI/Controls/PickList","Sage/UI/Controls/PickListAsText","Sage/UI/Controls/Select","Sage/UI/Controls/SimpleTextarea","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/SummaryAggregate","Sage/UI/Controls/TextBox"],function(){});},"Sage/QuickForms/Design/RowDesigner":function(){define("Sage/QuickForms/Design/RowDesigner",["dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_WidgetBase","./Editors/RowBasicPropertyEditor","dojo/i18n!./nls/RowDesigner"],function(_e7c,_e7d,_e7e,lang,_e7f,_e80,_e81,_e82){return _e7e("Sage.QuickForms.Design.RowDesigner",[_e80],{entry:null,editors:[_e81],helpTopicName:"Row_properties",displayNameText:"Row",constructor:function(){lang.mixin(this,_e82);},set:function(name,_e83){var _e84=this.inherited(arguments);var _e85=this._getAttrNames(name),_e86=this[_e85.s];if(lang.isFunction(_e86)){_e7d.publish("/quickforms/design/designerModified",this,name,_e83,_e84,this);}return _e84;}});});},"Sage/MailMerge/MenuHelper":function(){define("Sage/MailMerge/MenuHelper",["Sage/MailMerge/Helper","dojo/_base/declare"],function(_e87,_e88){var _e89=_e88("Sage.MailMerge.MenuHelper",null,{_populateWriteMenu:function(){require(["Sage/MailMerge/Service"],function(){var _e8a=_e87.GetMailMergeService();if(_e8a){if(!_e8a.MenuPopulated){_e8a.PopulateWriteMenu();}}});},_getMenuInfo:function(){var info={toolbar:null,menu:null};var _e8b=dojo.byId("ToolBar");if(typeof _e8b!=="undefined"&&_e8b!==null){info.toolbar=_e8b;for(var i=0;i<_e8b.children.length;i++){var _e8c=_e8b.children[i];if(_e8c.id=="mnuMailMerge"){info.menu=_e8c;return info;}}}return info;},attachWriteMenuPopulator:function(){var info=this._getMenuInfo();if(info.menu!==null){dojo.connect(info.menu,"onclick",this._populateWriteMenu);}},removeWriteMenu:function(){var info=this._getMenuInfo();if(info.toolbar!==null&&info.menu!==null){info.toolbar.removeChild(info.menu);}}});return _e89;});},"Sage/Workspaces/Dialog":function(){define("Sage/Workspaces/Dialog",["dojo/dom","dojo/dom-style","dojo/dom-construct","dijit/Dialog","dojo/NodeList-manipulate","dojo/_base/declare","Sage/UI/Controls/_DialogHelpIconMixin","dojo/query"],function(dom,_e8d,_e8e,_e8f,_e90,_e91,_e92,_e93){return _e91("Sage.Workspaces.Dialog",[_e8f,_e92],{constructor:function(_e94,_e95){this._initialized=false;this._clientId=_e94.clientId;this._stateClientId=_e94.stateClientId;this._panelClientId=_e94.panelClientId;this._contentClientId=_e94.contentClientId;this._context=null;this._dialog=null;this._dialogPanel=null;this._closedOnServerSide=false;this._dialogInfo={};this.closable=true;this._width=200;this._height=500;this._toolbarId=this._clientId+"_"+this._clientId+"_toolbar";if(this._clientId){this.statics.__instances[this._clientId]=this;this.statics.__initRequestManagerEvents();}this.inherited(arguments);},init:function(){this._context=dom.byId(this._clientId);dom.byId(this._contentClientId).style.display="";this.handleEvents();},clearState:function(){var _e96=dom.byId(this._stateClientId);_e96.value="";},disable:function(){if(!this.open){return;}this.hide();},enable:function(){if(this.open){return;}this.show();},show_:function(evt){var _e97,_e98,_e99;if(typeof evt==="string"){evt={id:evt};}evt.event="open";evt.from=evt.from||"client";_e97=evt.title||"";this.set("title",_e97);var help=evt.help;if(help){this.createHelpIcon(help.url,help.target);}_e98=evt.width||500;_e8d.set(this.domNode,"width",_e98+"px");_e99=evt.height||200;_e93(".dijitDialogPaneContent").style({"height":_e99+"px","overflow":"auto"});var _e9a=Sys.Serialization.JavaScriptSerializer.serialize(evt);var _e9b=dom.byId(this._stateClientId);_e9b.value=_e9a;var _e9c=dojo.byId(this._toolbarId);if(_e9c){if(this.helpIcon){dojo.place(_e9c,this.helpIcon,"before");}}},setSize:function(_e9d,_e9e){this._width=_e9d||this._width||500;_e8d.set(this.domNode,"width",this._width+"px");this._height=_e9e||this._height||200;_e8d.set(this.domNode,"height",this._height+"px");},fitToViewport:function(){},handleEvents:function(){var _e9f=dom.byId(this._stateClientId);var _ea0=_e9f.value;var evt={};if(_ea0){evt=eval("("+_ea0+")");}_e9f.value="";switch(evt.event){case "open":this._dialogInfo=evt;this.title=this._dialogInfo.title;this.show_(evt);this.enable();break;case "close":if(this.open){this._closedOnServerSide=false;this.hide_();this.disable();this._dialogInfo={};this._closedOnServerSide=true;}break;}},hide:function(evt){if(this._toolbarId){_e8e.destroy(this._toolbarId);}if(evt&&((evt.originalTarget&&evt.originalTarget.className.indexOf("dijitDialogCloseIcon")>-1)||(evt.srcElement&&evt.srcElement.className.indexOf("dijitDialogCloseIcon")>-1))){var _ea1=Sage.Services.getService("ClientBindingManagerService");if(_ea1){_ea1.rollbackCurrentTransaction();}dom.byId(this._stateClientId).value="{\"event\":\"close\",\"id\":\""+this._dialogInfo.id+"\"}";__doPostBack(this._stateClientId,"");}this.inherited(arguments);},hide_:function(evt){if(this._closedOnServerSide){return;}var evt={event:"close",id:this._dialogInfo.id};var _ea2=Sage.Services.getService("ClientBindingManagerService");if(_ea2){_ea2.rollbackCurrentTransaction();}var _ea3=Sys.Serialization.JavaScriptSerializer.serialize(evt);dom.byId(this._stateClientId).value=_ea3;__doPostBack(this._stateClientId,"");},statics:{__instances:{},__requestManagerEventsInitialized:false,__initRequestManagerEvents:function(){var self=this;if(self.__requestManagerEventsInitialized){return;}var _ea4=function(a,b){if(!a||!b){return false;}else{return a.contains?(a!=b&&a.contains(b)):(!!(a.compareDocumentPosition(b)&16));}};var prm=Sys.WebForms.PageRequestManager.getInstance();prm.add_pageLoaded(function(_ea5,args){var _ea6=args.get_panelsUpdated();if(_ea6){for(var id in self.__instances){for(var i=0;i<_ea6.length;i++){var _ea7=self.__instances[id];if(_ea4(_ea6[i],document.getElementById(_ea7._stateClientId))){_ea7.handleEvents();break;}}}}});prm.add_endRequest(function(_ea8,args){for(var id in self.__instances){var _ea9=self.__instances[id];_ea9.clearState();}});self.__requestManagerEventsInitialized=true;}}});});},"Sage/QuickForms/Design/nls/UserControlDesigner":function(){define("Sage/QuickForms/Design/nls/UserControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_eaa,lang){var nls={root:{displayNameText:"User"}};return lang.mixin(_eaa,nls);});},"Sage/MainView/ActivityMgr/EventListPanelConfig":function(){define("Sage/MainView/ActivityMgr/EventListPanelConfig",["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Columns/DateTime","dojo/_base/declare","dojo/i18n!./nls/EventListPanelConfig"],function(_eab,_eac,_ead,_eae,_eaf,_eb0,_eb1,_eb2){var _eb3=_eb1("Sage.MainView.ActivityMgr.EventListPanelConfig",[_eab],{constructor:function(){this._nlsResources=_eb2;this._listId="events";this._resourceKind="events";this.entityName="Event";this._contextMenu="EventListContextMenu";this._securedAction="ActivitiesViewEvents";this._structure=this._getStructure();this._select=this._getSelect();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.toolBar=this._getToolBars();dojo.subscribe("/entity/event/create",this._onListRefresh);dojo.subscribe("/entity/event/change",this._onListRefresh);dojo.subscribe("/entity/event/delete",this._onListRefresh);},_onListRefresh:function(_eb4){var _eb5=Sage.Services.getService("ActivityService");_eb5.refreshList("events");},_getSelect:function(){var _eb6=["$key","Type","StartDate","EndDate","Location","Description","User/UserInfo/UserName","User/UserAccessToOtherCal/OthersAccessToUserCal/Id"];return _eb6;},_getSort:function(){var sort=[{attribute:"StartDate",descending:true}];return sort;},_getWhere:function(){var _eb7=(this._currentUserId)?dojo.string.substitute("(User.UserAccessToOtherCal.OthersAccessToUserCal.Id eq \"${0}\")",[this._currentUserId]):"";return _eb7;},_getStructure:function(){var _eb8=this._nlsResources.colNameType||"Type";var _eb9=this._nlsResources.colNameStartDate||"Start Date";var _eba=this._nlsResources.colNameEndDate||"End Date";var _ebb=this._nlsResources.colNameDescription||"Description";var _ebc=this._nlsResources.colNameUser||"User";var _ebd=this._nlsResources.colNameLocation||"Location";_eb1("Sage.MainView.ActivityMgr.EventListPanelConfig.EditEventCell",dojox.grid.cells.Cell,{format:function(_ebe,_ebf){var type=this.get(_ebe,_ebf);var key=Sage.Utility.getValue(_ebf,"$key");var html="<a href='javascript:Sage.Link.editEvent(\""+key+"\")' >"+"Edit"+"</a>";return html;}});_eb1("Sage.MainView.ActivityMgr.EventListPanelConfig.EventTypeCell",dojox.grid.cells.Cell,{format:function(_ec0,_ec1){var key=Sage.Utility.getValue(_ec1,"$key");var type=Sage.Utility.getValue(_ec1,"Type");var html="<a href='javascript:Sage.Link.editEvent(\""+key+"\")' >"+type+"</a>";return html;}});var _ec2=[{field:"Type",name:_eb8,type:Sage.MainView.ActivityMgr.EventListPanelConfig.EventTypeCell,width:"100px"},{field:"StartDate",name:_eb9,type:_eb0,dateOnly:true,width:"100px"},{field:"EndDate",name:_eba,type:_eb0,dateOnly:true,width:"100px"},{field:"User.UserInfo.UserName",name:_ebc,width:"120px"},{field:"Location",name:_ebd,width:"200px"},{field:"Description",name:_ebb,width:"300px"}];return _ec2;},_getDetailConfig:function(){var _ec3=this._getFormatterScope();var _ec4={resourceKind:this._resourceKind,requestConfiguration:{mashupName:"ActivityManager",queryName:"EventSummary_query"},templateLocation:"MainView/ActivityMgr/Templates/EventSummary.html",postProcessCallBack:false};return _ec4;},_getFormatterScope:function(){var _ec5=new _eae({requestConfiguration:{mashupName:"ActivityManager",queryName:"EventSummary_query"},templateLocation:"MainView/ActivityMgr/Templates/EventSummary.html"});return _ec5;},_getToolBars:function(){var _ec6={items:[]};return _ec6;}});return _eb3;});},"url:Sage/UI/Controls/templates/Address.html":"<div class=\"address-container\" id=\"{%= $.clientId %}\" >\r\n    <!--\r\n    -- IMPORTANT: Comments in a widget template must be placed inside the root node.\r\n    Simplate template\r\n    https://github.com/mmorton/simplate\r\n    https://github.com/mmorton/simplate/blob/master/demo/index.html\r\n    Basic formatting example: {%= $.id %}\r\n    -->\r\n    <textarea id=\"{%= $.clientId %}_displayText\" class=\"address-textarea\" style=\"height:{%= $.height %};\"\r\n        data-dojo-type=\"Sage.UI.Controls.SimpleTextarea\" readonly=\"readonly\" dragRestriction=\"true\"  tabindex=\"{%= $.tabIndex %}\"\r\n    {% if ($.enabled && !$.readOnly) { %}\r\n        data-dojo-attach-event=\"onDblClick: showDialog, ondijitclick: showDialog\"\r\n    {% } %}\r\n        slxchangehook=\"true\" >{%= $.displayValue %}</textarea>\r\n    {% if ($.enabled && !$.readOnly) { %}\r\n    <img alt=\"{%= $.imageData.imageEditAltText %}\" data-dojo-attach-event=\"ondijitclick: showDialog\" class=\"address-edit-button\"\r\n         src=\"{%= $.imageData.imageEditUrl %}\" title=\"{%= $.imageData.imageEditToolTip %}\" id=\"{%= $.clientId %}-Button\" \r\n          tabindex=\"{%= $.tabIndex %}\" />\r\n    {% } %}\r\n    {% if ($.enabled && $.showButton) { %}\r\n    <img alt=\"{%= $.imageData.imageMapQuestAltText %}\" data-dojo-attach-event=\"ondijitclick: showMap\" class=\"address-map-button\"\r\n         src=\"{%= $.imageData.imageMapQuestUrl %}\" title=\"{%= $.imageData.imageMapQuestToolTip %}\" id=\"{%= $.clientId %}-MapQuest\" \r\n          tabindex=\"{%= $.tabIndex %}\" />\r\n    {% } %}\r\n</div>","Sage/Groups/nls/GroupNavigator":function(){define("Sage/Groups/nls/GroupNavigator",["Sage/LanguageList","dojo/_base/lang"],function(_ec7,lang){var nls={root:{firstText:"Move First",previousText:"Move Previous",nextText:"Move Next",lastText:"Move Last",listText:"List View",noRecordsText:"No Records",labelFmtText:"${0} of ${1}"}};return lang.mixin(_ec7,nls);});},"Sage/Utility/File/nls/AddURLAttachment":function(){define("Sage/Utility/File/nls/AddURLAttachment",["Sage/LanguageList","dojo/_base/lang"],function(_ec8,lang){var nls={root:{descriptionText:"Description",urlText:"URL",titleText:"Add URL Attachment",okText:"OK",cancelText:"Cancel",requestFailedMsg:"The requested operation could not be completed, please try again later.",urlBlankMsg:"The URL or description property cannot be blank."}};return lang.mixin(_ec8,nls);});},"Sage/UI/Filters/nls/EditFilterItems":function(){define("Sage/UI/Filters/nls/EditFilterItems",["Sage/LanguageList","dojo/_base/lang"],function(_ec9,lang){var nls={root:{selectAllText:"Select All",findItemText:"Find Item:",findText:"Find",clearText:"Clear",dialogTitle:"Edit Filter Items",okText:"OK",cancelText:"Cancel"}};return lang.mixin(_ec9,nls);});},"Sage/QuickForms/Design/nls/DesignSurface":function(){define("Sage/QuickForms/Design/nls/DesignSurface",["Sage/LanguageList","dojo/_base/lang"],function(_eca,lang){var nls={root:{bisectionErrorText:"The placement will cause another control to be bisected.",rowBoundsErrorText:"The chosen row is out of bounds.",columnBoundsErrorText:"The chosen column is out of bounds.",rowSpanBoundsErrorText:"The chosen row span is out of bounds.",columnSpanBoundsErrorText:"The chosen column span is out of bounds.",occupiedErrorText:"There is not enough empty space for the chosen size."}};return lang.mixin(_eca,nls);});},"Sage/Utility/File/nls/DragDropWatcher":function(){define("Sage/Utility/File/nls/DragDropWatcher",["Sage/LanguageList","dojo/_base/lang"],function(_ecb,lang){var nls={root:{query0:"The feature you are requesting requires the Sage SalesLogix Desktop <br> Integration Module.",query1:"Find out more...",query2:"Would you like to install this feature now?",query3:"Note: This module can be installed at any time from the logon or options pages."}};return lang.mixin(_ecb,nls);});},"url:Sage/MainView/Opportunity/templates/UpdateOpportunities.html":"[\r\n'<div>',\r\n    '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.updateMultipleOpps_Caption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmUpdateMultipleOpps\">',\r\n            '<table cellspacing=\"20\">',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.update_Property_Caption %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<select title=\"{%= $.update_Property_Caption %}\" labelWidth=\"20\" name=\"{%= $.id %}_PropertyName\" dojoAttachPoint=\"propertyNameSelect\" dojoAttachEvent=\"onChange:_propertyChanged\" data-dojo-type=\"dijit.form.Select\" style=\"width:150px\">',\r\n                            '{% for (var i=0; i < $._updateableProperties.length;i++) { %}',\r\n                                '<option value=\"{%= $._updateableProperties[i].propertyName %}\" {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $._updateableProperties[i].propertyDisplayName %}</option>',\r\n                            '{% } %}',\r\n                        '</select>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"divUpdateOppsTolbl\" dojoAttachPoint=\"divUpdateOppsTolbl\" class=\"display-none\">',\r\n                            '<label>{%= $.update_To_Caption %}</label>',\r\n                        '</div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div dojoAttachPoint=\"divAcctMgrContainer\">',\r\n                            '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_luAccountMgr\" dojoAttachPoint=\"accountMgr_Container\" allowClearingResult=\"false\" class=\"removePadding\"></div>',\r\n                        '</div>',\r\n                        '<div dojoAttachPoint=\"divCloseProbContainer\" class=\"display-none\">',\r\n                            '<select id=\"{%= $.id %}_pkl_CloseProbability\" PickListName=\"Opportunity Probability\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_pkl_CloseProbability\" data-dojo-type=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pkl_CloseProbability\" canEditText=\"false\" itemMustExist=\"true\"></select>',\r\n                        '</div>',\r\n                        '<div data-dojo-type=\"dojox.layout.TableContainer\" dojoAttachPoint=\"divForecastContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"2\" baseClass=\"display-none\">',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"addToForecast\" label=\"{%= $.addToForecast_Yes %}\" value=\"yesForecast\" id=\"{%= $.id %}_rdgYesForecast\" dojoAttachPoint=\"rdoYesForecast\" checked=\"true\" />',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"addToForecast\" label=\"{%= $.addToForecast_No %}\" value=\"noForecast\" id=\"{%= $.id %}_rdgNoForecast\" />',\r\n                        '</div>',\r\n                        '<div data-dojo-type=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"2\" dojoAttachPoint=\"divEstCloseContainer\" baseClass=\"display-none\">',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"estimatedClose\" id=\"{%= $.id %}_rdgEstClose\" checked=\"true\" label=\"{%= $.estimatedClose_To %}\" value=\"estimatedClose\" dojoAttachPoint=\"rdoEstClose\" dojoAttachEvent=\"onChange:estimatedCloseDateChange\" />',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"estimatedClose\" value=\"move\" id=\"{%= $.id %}_rdgEstMove\" label=\"{%= $.estimatedClose_MoveOut %}\" />',\r\n                        '</div>',\r\n                        '<div dojoAttachPoint=\"divCommentsContainer\" class=\"display-none\">',\r\n                            '<textarea data-dojo-type=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_txtComments\" dojoAttachPoint=\"txtComments\" style=\"font-size: 85%\"></textarea>',\r\n                        '</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td></td>',\r\n                    '<td></td>',\r\n                    '<td></td>',\r\n                    '<td>',\r\n                        '<div id=\"divEstCloseDateContainer\" class=\"display-none\" dojoAttachPoint=\"divEstCloseDateContainer\">',\r\n                            '<div data-dojo-type=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtpEstCloseDate\" displayDate=\"true\" displayTime=\"false\" dojoAttachPoint=\"dtpEstCloseDate\"></div>',\r\n                        '</div>',\r\n                        '<div id=\"divMoveEstimatedCloseContainer\" class=\"display-none\" dojoAttachPoint=\"divMoveEstimatedCloseContainer\">',\r\n                            '<select data-dojo-type=\"dijit.form.Select\" name=\"moveEstCloseDate\" id=\"{%= $.id %}_moveEstCloseDateList\" dojoAttachPoint=\"moveEstCloseDateList\">',\r\n                                '<option value=\"Forward\">{%= $.moveEstCloseDate_Forward %}</option>',\r\n                                '<option value=\"Backward\">{%= $.moveEstCloseDate_Backward %}</option>',\r\n                            '</select>',\r\n                            '<div data-dojo-type=\"dijit.form.TextBox\" labelWidth=\"20\" dojoAttachPoint=\"daysToMove\"></div>&nbsp',\r\n                            '<label>{%= $.estimatedClose_Days %}</label>',\r\n                        '</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n            '<div class=\"button-bar\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.btnOK_Caption %}</div>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCancel_Caption %}</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]\r\n","Sage/MainView/ActivityMgr/nls/ConfirmListPanelConfig":function(){define("Sage/MainView/ActivityMgr/nls/ConfirmListPanelConfig",["Sage/LanguageList","dojo/_base/lang"],function(_ecc,lang){var nls={root:{colNameType:"Activity Type",colNameNotification:"Notification",colNameStartDate:"Start Date",colNameDuration:"Duration",colNameRegarding:"Regarding",colNameFromUser:"From",colNameToUser:"To User"}};return lang.mixin(_ecc,nls);});},"Sage/TaskPane/TaskPaneItem":function(){define("Sage/TaskPane/TaskPaneItem",["dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(_ecd,_ece,_ecf){var _ed0=_ecf("Sage.TaskPane.TaskPaneItem",[_ecd,_ece],{securedAction:"",linkText:"",confirmMsg:"",clientAction:"",serverAction:"",currentActionIndex:-1,actions:[],selectedItemList:{},action:"",type:"",postCreate:function(_ed1){this.checkSecurityAccess();},templateString:"<a dojoAttachPoint=\"linkTextNode\" href=\"#\"></a>",attributeMap:dojo.delegate(_ecd.prototype.attributeMap,{linkText:{node:"linkTextNode",type:"innerHTML"},action:{node:"linkTextNode",type:"attribute",attribute:"href"}}),setActionList:function(){this.actions.push(this.startConfirm);this.actions.push(this.startGetSelectedItems);this.actions.push(this.startClientAction);this.actions.push(this.startServerAction);},doNextAction:function(){this.currentActionIndex++;this.actions[this.currentActionIndex].call();},startConfirm:function(){var _ed2=true;if(this.confirmMsg){_ed2=confirm(this.confirmMsg);}this.processConfirmResult(_ed2);},processConfirmResult:function(_ed3){if(_ed3===true){this.doNextAction();}},startClientAction:function(){var _ed4=true;if(this.clientAction){if(typeof (this.clientAction)==="function"){_ed4=this.clientAction.call();}}this.processClientActionResult(_ed4);},processClientActionResult:function(_ed5){this.doNextAction();},startServerAction:function(){if(this.serverAction){if(this.selectedItemList.length>0){__doPostBack(this.serverAction,this.selectedItemList);}}},startGetSelectedItems:function(){var _ed6={key:"selectAll"};var _ed7=Sage.Services.getService("SelectionContextService");if(_ed7){_ed7.getSelectedIds(_ed6,this.processGetSelectedItemsResult);}},processGetSelectedItemsResult:function(_ed8){this.selectedItemList=_ed8;this.doNextAction();},getCurrentUserId:function(){var _ed9="";var _eda=Sage.Services.getService("ClientContextService");if(_eda){_ed9=_eda.getValue("userID");}return _ed9;},checkSecurityAccess:function(){var _edb="none";if(this.securedAction.length>0){var _edc=Sage.Services.getService("RoleSecurityService");_edc.hasAccess(this.securedAction,function(_edd){if(_edd){_edb="inline";}});}dojo.style(this.domNode,{"display":_edb});}});return _ed0;});},"Sage/QuickForms/Design/Editors/nls/FormAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/FormAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_ede,lang){var nls={root:{titleText:"Advanced",generalText:"General",useEntityNameAsTitleText:"Use Entity Name As Title:",useEntityNameAsTitleTooltipText:"Use name of current entity in form title."}};return lang.mixin(_ede,nls);});},"Sage/MainView/ActivityMgr/nls/EventListPanelConfig":function(){define("Sage/MainView/ActivityMgr/nls/EventListPanelConfig",["Sage/LanguageList","dojo/_base/lang"],function(_edf,lang){var nls={root:{colNameType:"Type",colNameStartDate:"Start Date",colNameEndDate:"End Date",colNameDescription:"Description",colNameUser:"User",colNameLocation:"Location"}};return lang.mixin(_edf,nls);});},"url:Sage/MainView/IntegrationContract/templates/AdvancedSearchOptions.html":"[\r\n'<div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\">{%= $.searchOptionsHeader %}',\r\n            '<span class=\"boldtext\">{%= $.configOptions.targetAccount %}</span>',\r\n        '</label>',\r\n        '<br /><br />',\r\n    '</div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontext padBottom\" style=\"padding-left:20px\">{%= $.searchOptionsText %}</label>',\r\n    '</div>',\r\n    '<div>',\r\n        '<br />',\r\n        '<label class=\"slxlabel\" style=\"padding-left:20px\">{%= $.propertyText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:136px\">{%= $.operatorText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:118px\">{%= $.searchText %}</label>',\r\n    '</div>',\r\n    '<div dojoAttachPoint=\"conditionContainer\" style=\"padding:10px;\" id=\"{%= $.id %}-Condition-container\"></div>',\r\n    '<div class=\"button-bar alignright\">',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').refineSearchObject.getSelections();\">',\r\n            '{%= $.okText %}',\r\n        '</button>',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').hide();\">',\r\n            '{%= $.cancelText %}',\r\n        '</button>',\r\n    '</div>',\r\n'</div>'\r\n]\r\n","Sage/QuickForms/Design/GenericControlDesigner":function(){define("Sage/QuickForms/Design/GenericControlDesigner",["dojo/string","dojo/_base/declare","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/GenericBasicPropertyEditor","./Editors/GenericAdvancedPropertyEditor","dojo/i18n!./nls/GenericControlDesigner"],function(_ee0,_ee1,lang,_ee2,_ee3,_ee4,_ee5,_ee6,_ee7,_ee8,_ee9){return _ee1("Sage.QuickForms.Design.GenericControlDesigner",[_ee3,_ee4,_ee2,_ee5],{designSupport:{visible:true},editors:[_ee7,_ee8,_ee6],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div data-dojo-attach-point=\"containerNode\">","<span data-dojo-attach-point=\"designCaptionNode\"></span>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},helpTopicName:"visual_control",displayNameText:"Unknown",constructor:function(){lang.mixin(this,_ee9);},_setControlIdAttr:function(_eea){this.inherited(arguments);this.set("designCaption",_eea);},getFormattedType:function(){var type=lang.getObject("$type",false,this.entry)||this.displayNameText,name=(type.indexOf(", ")!==-1)?type.split(", ")[0]:type,_eeb=(type.indexOf(".")!==-1)?name.split("."):[name];return _eeb[_eeb.length-1];},startup:function(){this.inherited(arguments);this.displayNameText=this.getFormattedType();this.set("designCaption",this.get("controlId"));this.applyVisibility();}});});},"Sage/MainView/ActivityMgr/BaseListPanelConfig":function(){define("Sage/MainView/ActivityMgr/BaseListPanelConfig",["Sage/_ConfigurationProvider","Sage/Data/SDataStore","dijit/Menu","dijit/PopupMenuItem","dijit/MenuSeparator","Sage/UI/MenuItem","dojo/i18n!./nls/BaseListPanelConfig","dijit/registry","dojo/_base/declare"],function(_eec,_eed,Menu,_eee,_eef,_ef0,_ef1,_ef2,_ef3){var _ef4=_ef3("Sage.MainView.ActivityMgr.BaseListPanelConfig",[_eec],{list:false,detail:false,summary:false,toolBar:false,_listId:false,_store:false,_service:false,_where:false,_sort:false,_select:false,_include:false,_structure:false,_currentUserId:false,_resourceKind:false,_nlsResources:false,_securedAction:"",keyField:"$key",hasCompositeKey:false,_menuItems:null,_contextMenu:false,_schedeContextMenu:false,_activityService:false,_summaryformaterScope:false,entityName:false,rebuildMenus:true,rebuildOnRefresh:false,constructor:function(){this._nlsResources=_ef1;this._service=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");this._activityService=Sage.Services.getService("ActivityService");var _ef5=Sage.Services.getService("ClientContextService");if(_ef5){if(_ef5.containsKey("userID")){this._currentUserId=_ef5.getValue("userID");}}this._include=this._getInclude();this._menuItems=[];},rebuild:function(){this._where=this._getWhere();this._structure=this._getStructure();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();},_onListRefresh:function(_ef6){var _ef7=Sage.Services.getService("ActivityService");_ef7.refreshList();},_getListConfig:function(){if(!this._store){this._store=this._getStore();}else{this._store.where=this._where;}var _ef8={id:this._listId,structure:this._structure,store:this._store,selectedRegionContextMenuItems:this._getListContextMenuItems(),onSelectedRegionContextMenu:this._onListContext};return _ef8;},_getStore:function(){var _ef9=new _eed({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:this._include,select:this._select,sort:this._sort,where:this._where});return _ef9;},_getSelect:function(){var _efa=[];return _efa;},_getInclude:function(){var _efb=[];return _efb;},_getSort:function(){var sort=[];return sort;},_getWhere:function(){var _efc="";return _efc;},_getStructure:function(){var _efd=[];return _efd;},_getSummaryConfig:function(){var _efe=new _eed({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:[],select:["$key"],where:this._where});var _eff=[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}];var _f00=this._getFormatterScope();var _f01={structure:_eff,layout:"layout",store:_efe,rowHeight:170,rowsPerPage:10,formatterScope:_f00};return _f01;},_getFormatterScope:function(){return false;},_getDetailConfig:function(){return false;},_getToolBars:function(){var _f02={items:[]};return _f02;},_getListContextMenuItems:function(){if(!this._contextMenu){return;}if(this._menuItems.length>0){return this._menuItems;}if(!Sage.UI.DataStore.ContextMenus){return [];}if(!Sage.UI.DataStore.ContextMenus.listContextMenu){return [];}if(this._menuItems.length>0){this._menuItems[0].destroyDescendants();}this._menuItems=[];var _f03=Sage.UI.DataStore.ContextMenus.listContextMenu.items;var len=_f03.length;for(var i=0;i<len;i++){var mDef=_f03[i];if(mDef.id===this._contextMenu){this._buildChildMenu(mDef.submenu,null);}else{if(mDef.id===this._scheduleContextMenu){var _f04=new _eef();this._menuItems.push(_f04);var _f05=new Menu();var _f06=new _eee({label:mDef.text,popup:_f05});this._buildChildMenu(mDef.submenu,_f05);this._menuItems.push(_f06);}}}return this._menuItems;},_getGridMenu:function(){var _f07=dijit.byId("_listContextmenu");return _f07;},_buildChildMenu:function(_f08,_f09){var len=_f08.length;for(var i=0;i<len;i++){var mDef=_f08[i];if(mDef.submenu.length>0){var _f0a=new Menu();this._buildChildMenu(mDef.submenu,_f0a);var _f0b=new _eee({label:mDef.text,popup:_f0a});if(_f09){_f09.addChild(_f0b);}else{this._menuItems.push(_f0b);}}else{var _f0c=null;if((mDef.text==="-")||(mDef.text===" ")||(mDef.isspacer)){_f0c=new _eef();}else{var href=mDef.href;if(href.indexOf("javascript:")<0){href=dojo.string.substitute("javascript:${0}()",[href]);}_f0c=new _ef0({label:mDef.text||"...",icon:mDef.img,title:mDef.tooltip||"",ref:href,onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}});}if(_f09){_f09.addChild(_f0c);}else{this._menuItems.push(_f0c);}}}},_onListContext:function(){},getFilterConfig:function(_f0d,_f0e,_f0f){var _f10=this._service;var _f11=_f0d;var _f12=this.entityName;var _f13=this._resourceKind;var _f14=this._where;var _f15={};_f15["groupId"]=this._listId;_f15["store"]=new _eed({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(_f11).setResourceKind("entities").setResourceSelector("\""+_f12+"\"").setResourceProperty("filters").setQueryArg("where","filterType ne \"analyticsMetric\"").setQueryArg("count",20)});_f15["createStoreForFilter"]=function(_f16){return _f16&&_f16["filterName"]?new _eed({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(_f10).setResourceKind(_f13).setResourceProperty("$queries/executeMetric").setQueryArg("_filterName",_f16["filterName"]).setQueryArg("orderby","displayName").setQueryArg("_activeFilter",_f14)}):null;};_f15["getFilterManager"]=function(){var _f17=_ef2.byId("list");return _f17&&_f17.get("filterManager");};return _f15;},getTimelessProperty:function(_f18){return false;}});return _ef4;});},"Sage/UI/Columns/CheckBox":function(){define("Sage/UI/Columns/CheckBox",["dojo/_base/declare"],function(_f19){var _f1a=_f19("Sage.UI.Columns.CheckBox",dojox.grid.cells.Bool,{formatter:function(_f1b,_f1c,cel){var _f1d=(_f1b===true||_f1b===1)?"<input type=\"checkbox\" checked=\"checked\" disabled=\"disabled\" />":"<input type=\"checkbox\" disabled=\"disabled\" />";return _f1d;}});return _f1a;});},"Sage/UI/TitleContentPane":function(){define("Sage/UI/TitleContentPane",["dijit/MenuSeparator","dijit/Menu","dijit/layout/ContentPane","dijit/MenuItem","dijit/PopupMenuItem","dijit/MenuBar","dijit/MenuBarItem","Sage/UI/PopupMenuBarItem","dojox/grid/DataGrid","Sage/UI/OrientableMenuBar","Sage/UI/GridMenuItem","Sage/UI/ImageButton","Sage/Utility","Sage/Groups/GroupContextService","Sage/Data/BaseSDataStore","Sage/UI/GroupsTitlePaneConfigProvider","dojo/dom-style","dojo/_base/array","dojo/dom-class","dojo/_base/declare","dojo/_base/lang"],function(_f1e,Menu,_f1f,_f20,_f21,_f22,_f23,_f24,_f25,_f26,_f27,_f28,_f29,_f2a,_f2b,_f2c,_f2d,_f2e,_f2f,_f30,lang){var _f31=_f30("Sage.UI.TitleContentPane",_f1f,{started:false,_configurationProvider:null,_configuration:{},_titleFmtString:"${0}",_groupMenuBar:false,_groupMenu:false,title:false,tabConnects:null,startup:function(){this.inherited(arguments);var _f32,mode=_f29.getModeId();if(typeof mode==="string"&&mode.toLowerCase()==="list"){_f32=dojo.subscribe("/listView/applyConfiguration",lang.hitch(this,function(){dojo.disconnect(_f32);this._doStartup();}));}else{this._doStartup();}},_doStartup:function(){if(this.started){return;}this.tabConnects=[];if(this._configurationProvider===null){var eCtx=Sage.Services.getService("ClientEntityContext");if(eCtx){var c=eCtx.getContext();if(c["IsGroupsBasedEntity"]){this._configurationProvider=new _f2c();}}}if(this._configurationProvider!==null){var _f33=dojo.create("div",{"id":"GroupMenuSpace","class":"GroupButton"});dojo.place(_f33,this.domNode);dojo.connect(this._configurationProvider,"onTitlePaneConfigurationChange",this,"resetConfiguration");this._configurationProvider.requestTitlePaneConfiguration({scope:this,success:function(_f34){this._setConfiguration(_f34);this.started=true;}});}},_resize:function(){var tabs=dijit.byId("GroupTabs");tabs.resize();},_setConfiguration:function(_f35){this._configuration=_f35;if(this._configuration){if(this._configuration.menu){this._addMenu(this._configuration.menu);}if(this._configuration.tabs){this._addTabs(this._configuration.tabs);}else{this._hideEmptyTabBar();}if(this._configuration.titleFmtString){this._titleFmtString=this._configuration.titleFmtString;}}},resetConfiguration:function(){var tabs=dijit.byId("GroupTabs");if(tabs){_f2e.forEach(this.tabConnects,function(_f36){dojo.disconnect(_f36);});this.tabConnects=[];try{tabs.removeChildren();}catch(err){console.error(err);}}this.started=false;this._doStartup();},_setTitleAttr:function(_f37){dojo.html.set(dojo.byId("PageTitleText"),dojo.string.substitute(this._titleFmtString,[_f37]));},_setConfigurationProviderAttr:function(_f38){this._configurationProvider=_f38;this._doStartup();this._resize();},_addMenu:function(_f39){if(_f39){if(this._groupMenu){return;}this._groupMenuBar=new _f26({id:"groupMenuBar",title:_f39.tooltip,orientation:{"BR":"TR","BL":"TL"},baseClass:"group-menu-bar"});_f2f.remove(this._groupMenuBar.containerNode,"dijitMenuBar");this._groupMenu=new Menu({id:"groupMenu",style:{width:_f39.width||"350px"}});this._addItemsToMenu(this._groupMenu,_f39.items);this._groupMenuBar.addChild(new _f24({label:_f39.text||"...",icon:_f39.img||this._blankGif,imageClass:_f39.imageClass||"",baseClass:"group-menu-button",id:_f39.id||Sage.guid("groupMenuItem"),popup:this._groupMenu,style:"width:80px"}));this._groupMenuBar.placeAt("GroupsWrapper","before");this._groupMenuBar.startup();var _f3a=new _f28({id:"addGroupButton",imageClass:"icon_plus_16x16",title:_f39.addGroupTooltip,onClick:function(){Sage.Groups.GroupManager.CreateGroup();}});_f3a.placeAt("GroupsWrapper","before");_f3a.startup();}},_addItemsToMenu:function(menu,_f3b){var len=_f3b.length,itm;for(var i=0;i<len;i++){itm=_f3b[i];if(itm.fn){menu.addChild(itm.fn.call(itm.scope||this));}else{if(itm.items&&itm.items.length>0){var _f3c=new Menu({parentMenu:menu,id:itm.id+"_submenu"});this._addItemsToMenu(_f3c,itm.items);menu.addChild(new _f20({label:itm.text||"...",icon:itm.img||this._blankGif,title:itm.tooltip||"",popup:_f3c,id:itm.id}));}else{if(itm.isSeparator||itm.text==="-"){menu.addChild(new _f1e());}else{menu.addChild(new _f20({label:itm.text||"...",icon:itm.img||this._blankGif,title:itm.tooltip||"",id:itm.id,onClick:itm.onClick||function(){document.location=itm.href;}}));}}}}},_addTabs:function(_f3d){try{var _f3e={selectedTabId:"",tabKeyProperty:"$key",tabNameProperty:"$descriptor",tabGroupNameProperty:"name",tabFamilyProperty:"family",tabHiddenProperty:false};dojo.mixin(_f3e,_f3d);if(_f3e){var tabs=dijit.byId("GroupTabs");tabs.startup();var _f3f=this._blankGif;var _f40=typeof _f3e.onTabClose==="function";var _f41;if(_f3e.staticTabs){var len=_f3e.staticTabs.length;for(var i=0;i<len;i++){var t=_f3e.staticTabs[i];var _f42=t[_f3e.tabKeyProperty];var sTab=dijit.byId(_f42)||new _f1f({id:_f42,title:t[_f3e.tabNameProperty],closable:true,dataItem:t,onClose:function(){return false;}});var _f43=tabs.addChild(sTab);if(_f3e.selectedTabId===_f42){tabs.selectChild(sTab);}var _f44=dijit.byId(dojo.string.substitute("GroupTabs_tablist_${0}_Menu",[t[_f3e.tabKeyProperty]]));_f44.destroyDescendants();if(_f44&&_f3e.showTabContextMenus&&t["contextMenuItems"]){_f41=t["contextMenuItems"];for(var x=0;x<_f41.length;x++){var _f45=_f41[x];if(_f45.isspacer||_f45.text===""){_f44.addChild(new _f1e());}else{var href=_f45.href;if(href.indexOf("javascript:")<0){href=dojo.string.substitute("javascript:${0}('${1}','${2}','${3}');",[href,t[_f3e.tabKeyProperty],t[_f3e.tabNameProperty],t[_f3e.tabFamilyProperty]]);}else{var _f46={"groupId":t[_f3e.tabKeyProperty],"groupName":t[_f3e.tabNameProperty],"family":t[_f3e.tabFamilyProperty]};href=dojo.string.substitute(href,_f46);}var _f47=t[_f3e.tabFamilyProperty]+"_LOOKUP_"+x;var _f48=new _f20({id:_f47,label:_f45.text||"...",icon:_f45.img||_f3f,title:_f45.tooltip||"",ref:href,onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}});_f44.addChild(_f48);}}}}}if(_f3e.lookupButton){_f3e.lookupButton.startup();dojo.place(_f3e.lookupButton.domNode,tabs.domNode,"before");}var _f49=_f29.getClientContextByKey("userID");var _f4a={onComplete:function(data){var _f4b,i,_f4c=[],_f4d,_f4e=[],_f42;for(i=0;i<data.length;i++){_f4b=data[i];if(_f3e.tabHiddenProperty&&_f4b[_f3e.tabHiddenProperty]===true){continue;}_f42=_f4b[_f3e.tabKeyProperty];var aTab=dijit.byId(_f42)||new _f1f({id:_f42,title:_f4b[_f3e.tabNameProperty],closable:_f40,dataItem:_f4b});_f4c.push(aTab);if(_f3e.selectedTabId===_f4b[_f3e.tabKeyProperty]){_f4d=aTab;}_f4e.push((function menuFunction(_f4f,_f50){var _f51=_f4f[_f3e.tabKeyProperty];return function(){var _f52=dijit.byId(dojo.string.substitute("GroupTabs_tablist_${0}_Menu",[_f4f[_f3e.tabKeyProperty]])),_f53=false,_f54=false,_f55=_f50.trim()==="ADMIN";if(_f4f.userId!==_f50){_f54=true;}else{_f54=false;}if(!_f52){return;}_f52.destroyDescendants();if(Sage.UI.DataStore.ContextMenus&&Sage.UI.DataStore.ContextMenus.groupTabContextMenu){var _f56=Sage.UI.DataStore.ContextMenus.groupTabContextMenu.items;for(var mi=0;mi<_f56.length;mi++){var _f57=_f56[mi];if((_f57.id==="gtcDelete"&&_f54&&!_f55)||(_f57.id==="gtcShare"&&_f54)){_f53=true;}else{_f53=false;}if(_f57.isspacer||_f57.text===""){_f52.addChild(new _f1e());}else{var href=_f57.href;if(href.indexOf("javascript:")<0){href=dojo.string.substitute("javascript:${0}('${1}','${2}','${3}');",[href,_f4f[_f3e.tabKeyProperty],(_f4f[_f3e.tabGroupNameProperty]||_f4f[_f3e.tabNameProperty]),_f4f[_f3e.tabFamilyProperty]]);}else{var _f58={"groupId":_f4f[_f3e.tabKeyProperty],"groupName":_f4f[_f3e.tabNameProperty]||_f4f[_f3e.tabGroupNameProperty],"family":_f4f[_f3e.tabFamilyProperty]};href=dojo.string.substitute(href,_f58);}_f52.addChild(new _f20({id:_f51+"_tab_"+mi,label:_f57.text||"...",icon:_f57.img||_f3f,title:_f57.tooltip||"",ref:href,disabled:_f53,onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}}));}}}};})(_f4b,_f49));}dojo.connect(tabs,"onAddChildrenComplete",this,function(){dojo.forEach(_f4e,function(func){func.call();});_f4e=null;if(_f4d){tabs.selectChild(_f4d);}});tabs.addChildren(_f4c);}};dojo.mixin(_f4a,_f3e.fetchParams);if(_f3e.store){_f3e.store.fetch(_f4a);}if(_f3e.onTabClick){this.tabConnects.push(dojo.connect(tabs,"onClick",_f3e,"onTabClick",true));}if(_f3e.onTabSelect){this.tabConnects.push(dojo.connect(tabs,"selectChild",_f3e,"onTabSelect"));}if(_f40){this.tabConnects.push(dojo.connect(tabs,"closeChild",_f3e,"onTabClose"));}}else{this._hideEmptyTabBar();}}catch(err){console.error(err);}},_hideEmptyTabBar:function(){var tabs=dijit.byId("GroupTabs");if(tabs){_f2d.set(this.domNode,"height","37px");this.getParent().layout();tabs.set("style","display:none");}}});return _f31;});},"Sage/UI/nls/ActivityScheduler":function(){define("Sage/UI/nls/ActivityScheduler",["Sage/LanguageList","dojo/_base/lang"],function(_f59,lang){var nls={root:{tooltipTime:"Time",tooltipContactName:"Contact",tooltipAccountName:"Account",tooltipCompanyName:"Company",tooltipLeadName:"Lead",tooltipPhoneNumber:"Phone",tooltipRegarding:"Regarding",tooltipPriority:"Priority",tooltipNotes:"Notes",tooltipType:"Type",tooltipDayType:"Day Type",tooltipStartDate:"Start Date",tooltipEndDate:"End Date",tooltipLocation:"Location",tooltipDescription:"Description",completedText:"(Completed)",tooltipMoreActivities:"Click for more activities",scheduler_dates:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},scheduler_labels:{dhx_cal_today_button:"Today",day_tab:"Day",week_tab:"Week",workweek_tab:"Work week",month_tab:"Month",new_event:"New event",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Event will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",full_day:"Full day",confirm_recurring:"Do you want to edit the whole set of repeated events?",section_recurring:"Repeat event",button_recurring:"Disabled",button_recurring_open:"Enabled",agenda_tab:"Agenda",date:"Date",description:"Description",year_tab:"Year",week_agenda_tab:"Agenda"}}};return lang.mixin(_f59,nls);});},"Sage/MainView/nls/SecurityManager":function(){define("Sage/MainView/nls/SecurityManager",["Sage/LanguageList","dojo/_base/lang"],function(_f5a,lang){var nls={root:{accessText:"Access",columnText:"Column",entityText:"Entity",noAccessText:"No Access",profilesText:"Profiles",propertyText:"Property",securityManagerText:"Security Manager",readOnlyText:"Read Only",readWriteText:"Read Write",resetText:"Reset",saveText:"Save",tableText:"Table"}};return lang.mixin(_f5a,nls);});},"url:Sage/templates/GridMenuItem.html":"<tr class=\"dijitGridMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-event=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"4\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\" style=\"display:none\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"display:none\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n    <td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\" style=\"display:none\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t</td>\n</tr>\n","Sage/TaskPane/nls/ActivityTaskConfigurationProvider":function(){define("Sage/TaskPane/nls/ActivityTaskConfigurationProvider",["Sage/LanguageList","dojo/_base/lang"],function(_f5b,lang){var nls={root:{scheduleText:"Schedule",eventText:"Event",phoneCallText:"Phone Call",toDoText:"To-Do",meetingText:"Meeting",personalActivityText:"Personal Activity",deleteConfirmationText:"Delete Confirmation",acceptConfirmationText:"Accept Confirmation",declineConfirmationText:"Decline Confirmation",completeActivityText:"Complete Activity",deleteActivityText:"Delete Activity",deleteEventText:"Delete Event",scheduleEventText:"Schedule Event",scheduleRequestText:"Schedule Request",deleteRequestText:"Delete Request",recordsSelectedText:"record(s) selected",clearText:"Clear"}};return lang.mixin(_f5b,nls);});},"Sage/Data/WritableStore":function(){define("Sage/Data/WritableStore",["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/_base/lang"],function(_f5c,_f5d,_f5e,lang){var _f5f=_f5e("Sage.Data.WritableStore",_f5c,{isInsertMode:false,constructor:function(o){lang.mixin(this,o);this.features["dojo.data.api.Write"]=true;this.features["dojo.data.api.Notification"]=true;this.identityAttributes=["$cacheID"];this.dirtyDataCache={isDirty:false};this.singleResourceRequest=null;if(!o.hasOwnProperty("isInsertMode")){this.isInsertMode=_f5d.getModeId()==="insert";}},entry:"",fetch:function(_f60){var _f61={};_f61.$resources=[];if(_f60.isRender&&this.dataCarrierId){var _f62=dojo.query([".",this.dataCarrierId].join(""));if(_f62[0].value.length>0){var _f63=dojo.fromJson(_f62[0].value);this.addItemsToCache(_f60,_f63.$resources);}}for(var item in this.dataCache){if(this.dataCache.hasOwnProperty(item)&&item!=="query"){_f61.$resources.push(this.dataCache[item]);}}this.setContext(_f60);this.verifyService();if(this.isInsertMode){var self=this;window.setTimeout(function(){self.onSuccess(_f60,_f61);},5);return;}var _f64=new Sage.SData.Client.SDataResourceCollectionRequest(this.service).setResourceKind(this.resourceKind).setStartIndex(_f60.start+1).setCount(_f60.count);var qry="";if(this.query){if(!_f60.query){_f60.query={};}lang.mixin(_f60.query,this.query);}if(_f60.query){if(typeof _f60.query==="function"){qry=_f60.query();}else{if(typeof _f60.query==="string"){qry=_f60.query;}else{if(typeof _f60.query==="object"){if(_f60.query.hasOwnProperty("fn")){qry=_f60.query.fn.call(_f60.query.scope||this);}if(_f60.query.hasOwnProperty("conditions")){if(typeof _f60.query.conditions==="string"){qry+=(qry.length>0)?" and "+_f60.query.conditions:_f60.query.conditions;}}}}}}_f60.evaluatedQuery=qry||"";if(qry&&qry!==""){_f64.setQueryArg("where",qry);}if(this.select&&this.select.length>0){_f64.setQueryArg("select",this.select.join(","));}if(this.include&&this.include.length>0){_f64.setQueryArg("include",this.include.join(","));}var key=_f64.read({success:lang.hitch(this,this.onSuccess,_f60),failure:lang.hitch(this,this.onFailure,_f60)});return {abort:lang.hitch(this,this.abortRequest,key)};},onSuccess:function(_f65,feed){if(this.entry===""){this.entry=feed;}if(_f65.onBegin){_f65.onBegin.call(_f65.scope||this,feed.$resources.length,_f65);}if(_f65.onComplete){_f65.onComplete.call(_f65.scope||this,feed.$resources,_f65);}},addToCache:function(_f66,item,_f67){var key;_f67=(typeof _f67==="undefined")?(Math.random()*11):_f67;if(this.isInsertMode){item.$cacheID=new Date().getTime()+_f67;}key=this.getIdentity(item);this.dataCache[key]=item;},addItemsToCache:function(_f68,_f69){for(var i=0;i<_f69.length;i++){this.addToCache(_f68,_f69[i],i);}},clearCache:function(){this.inherited(arguments);this.clearDirtyDataCache();},clearDirtyDataCache:function(){for(var key in this.dirtyDataCache){if(key!=="isDirty"){delete this.dirtyDataCache[key];}}this.dirtyDataCache.isDirty=false;},isItem:function(_f6a){var id=this.getIdentity(_f6a);if(id&&id!==""){return this.dataCache.hasOwnProperty(id);}return false;},isItemLoaded:function(_f6b){return this.isItem(_f6b);},loadItem:function(_f6c){if(!this.isItem(_f6c.item)){throw new Error("Unable to load "+_f6c.item);}},getValues:function(item,_f6d){if(this.isItem(item)&&(typeof _f6d==="string")){return (item[_f6d]||[]).slice(0);}return [];},hasAttribute:function(item,_f6e){if(this.isItem(item)&&(typeof _f6e==="string")){return _f6e in item;}return false;},close:function(){this.clearCache();},deleteItem:function(item,_f6f){var id=this.getIdentity(item);if(id&&id!==""){delete this.dataCache[id];}var _f70={};_f70.scope=_f6f||this;var _f71=function(){if(typeof this.onResponse==="function"){this.onResponse.call(this);}};_f70.success=_f71;_f70.success.call(_f70.scope);},isDirty:function(item){if(item){var id=this.getIdentity(item);if(id&&id!==""){return this.dirtyDataCache.hasOwnPropery(id);}}return this.dirtyDataCache.isDirty;},newItem:function(args){var _f72=this.createTemplateRequest();if(_f72){_f72.read({success:function(_f73){if((args)&&(args.onComplete)&&(typeof args.onComplete==="function")){args.onComplete.call(args.scope||this,_f73);}},failure:this.requestTemplateFailure,scope:this});}},createTemplateRequest:function(){var _f74=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);if((this.resourceKind)&&(this.resourceKind!=="")){_f74.setResourceKind(this.resourceKind);}return _f74;},requestTemplateFailure:function(){},saveNewEntity:function(_f75,_f76,_f77,_f78){this.addToCache(_f78,_f75);_f76();},createItem:function(item,_f79){var _f7a={};_f7a.scope=_f79||this;_f7a.scope.store=this;var _f7b=function(_f7c){if(typeof this.onResponse==="function"){this.onResponse.call(this,_f7c);}};_f7a.success=_f7b;this.addToCache(_f79,item);_f7a.success.call(_f7a.scope,item);},revert:function(){this.clearDirtyDataCache();this.onDataReset();},setValue:function(item,_f7d,_f7e){var _f7f=this.getValue(item,_f7d,"");_f5d.setValue(item,_f7d,_f7e);this.onSet(item,_f7d,_f7f,_f7e);return true;},setValues:function(item,_f80,_f81){alert("not implemented - setValues");},unsetAttribute:function(item,_f82){alert("not implemented - unsetAttribute");},dataCacheToArray:function(){var _f83=[];for(var item in this.dataCache){if(this.dataCache.hasOwnProperty(item)&&item!=="query"){_f83.push(this.dataCache[item]);}}return _f83;},onDataChange:function(){this.clearDirtyDataCache();var _f84=dojo.query([".",this.dataCarrierId].join(""));if(_f84[0]){this.entry.$resources=this.dataCacheToArray();_f84[0].value=JSON.stringify(this.entry);}},onSet:function(item,_f85,_f86,_f87){},onNew:function(_f88,_f89){},onDelete:function(_f8a){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(_f8b,_f8c){},onItemNotSaved:function(_f8d,_f8e){}});return _f5f;});},"Sage/QuickForms/Design/Editors/CurrencyAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/CurrencyAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CurrencyAdvancedPropertyEditor"],function(_f8f,lang,_f90,_f91,_f92,_f93,_f94,_f95,_f96,_f97,_f98){return _f8f("Sage.QuickForms.Design.Editors.CurrencyAdvancedPropertyEditor",[_f90,_f96,_f95],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.displayModeTooltipText %}\">","<label>{%= $.displayModeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_displayMode\" data-dojo-attach-event=\"onChange:_onDisplayModeChange\">","{% for (var type in $.displayTypeText) { %}","<span value=\"{%= type %}\">{%= $.displayTypeText[type] %}</span>","{% } %}","</div>","</div>","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.decimalDigitsTooltipText %}\">","<label>{%= $.decimalDigitsText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_decimalDigits\" data-dojo-props=\"constraints:{min:-1,max:100,places:0}\" data-dojo-attach-event=\"onChange:_onDecimalDigitsChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.maxLengthTooltipText %}\">","<label>{%= $.maxLengthText %}</label>","<div data-dojo-attach-point=\"_maxLength\" data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-event=\"onChange:_onMaxLengthChange\" data-dojo-props=\"constraints:{min:-1,places:0}\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.exchangeRateTypeTooltipText %}\">","<label>{%= $.exchangeRateTypeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_exchangeRateType\" data-dojo-attach-event=\"onChange:_onExchangeRateTypeChange\">","{% for (var rate in $.exchangeTypeText) { %}","<span value=\"{%= rate %}\">{%= $.exchangeTypeText[rate] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlId:null,_controlLabelPlacement:null,_controlType:null,_decimalDigits:null,_defaultDataBinding:null,_displayCurrencyCode:null,_displayMode:null,_enabled:null,_exchangeRateType:null,_maxLength:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",decimalDigitsText:"Decimal Digits:",decimalDigitsTooltipText:"The number of digits after the decimal to display and allow for data entry.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",exchangeRateTypeText:"Exchange Rate Type:",exchangeRateTypeTooltipText:"Type of exchange rate to show in currency fields.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",displayTypeText:{"AsHyperlink":"As Hyperlink","AsControl":"As Control","AsText":"As Text"},exchangeTypeText:{"BaseRate":"Base Rate","OpportunityRate":"Opportunity Rate (Deprecated)","MyRate":"My Rate","SalesOrderRate":"Sales Order Rate (Deprecated)","EntityRate":"Entity Rate"},labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},constructor:function(){lang.mixin(this,_f98);},setup:function(){this.inherited(arguments);this._controlId.set("value",this._designer.get("controlId"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._controlType.set("value",this._designer.get("controlName"));this._decimalDigits.set("value",this._designer.get("decimalDigits"));this._displayMode.set("value",this._designer.get("displayMode"));this._enabled.set("value",this._designer.get("enabled"));this._exchangeRateType.set("value",this._designer.get("exchangeRateType"));this._maxLength.set("value",this._designer.get("maxLength"));this._required.set("value",this._designer.get("required"));this._visible.set("value",this._designer.get("visible"));var _f99=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_f99&&_f99["DataItemName"])||"");},_onControlIdChange:function(_f9a){},_onControlLabelPlacementChange:function(_f9b){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",_f9b);},_onControlTypeChange:function(_f9c){},_onDecimalDigitsChange:function(_f9d){if(this.isSuspended()||!this._decimalDigits.isValid()){return;}this._designer.set("decimalDigits",_f9d);},_onDefaultDataBindingChange:function(_f9e){},_onDisplayModeChange:function(_f9f){if(this.isSuspended()){return;}this._designer.set("displayMode",_f9f);},_onEnabledChange:function(_fa0){if(this.isSuspended()){return;}this._designer.set("enabled",_fa0);},_onExchangeRateTypeChange:function(_fa1){if(this.isSuspended()){return;}this._designer.set("exchangeRateType",_fa1);},_onMaxLengthChange:function(_fa2){if(this.isSuspended()||!this._maxLength.isValid()){return;}this._designer.set("maxLength",_fa2);},_onRequiredChange:function(_fa3){if(this.isSuspended()){return;}this._designer.set("required",_fa3);},_onVisibleChange:function(_fa4){if(this.isSuspended()){return;}this._designer.set("visible",_fa4);}});});},"Sage/QuickForms/Design/PhoneControlDesigner":function(){define("Sage/QuickForms/Design/PhoneControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","./TextBoxControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/PhoneControlDesigner"],function(_fa5,_fa6,lang,_fa7,_fa8,_fa9,_faa,_fab){return _fa5("Sage.QuickForms.Design.PhoneControlDesigner",[_fa7],{designSupport:{visible:true},editors:[_fa9,_faa,_fa8],widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %} design-phone\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"design-phone-icon\"></div>","</div>","</div>"]),helpTopicName:"Phone_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXPhone, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Phone",constructor:function(){lang.mixin(this,_fab);}});});},"Sage/UI/Controls/nls/EntityInfoToolTip":function(){define("Sage/UI/Controls/nls/EntityInfoToolTip",["Sage/LanguageList","dojo/_base/lang"],function(_fac,lang){var nls={root:{errorText:"Information not found.",loadingText:"Loading...",noInfoText:"No information to show.",mainText:"Main:",faxText:"Fax:",tollFreeText:"Toll Free:",urlText:"Web URL:",workText:"Work:",mobileText:"Mobile:",emailText:"Email:",contactNameText:"Name:",phoneText:"Phone:",accountText:"Account:"}};return lang.mixin(_fac,nls);});},"Sage/MainView/ActivityMgr/ActivityEditor":function(){require({cache:{"url:Sage/MainView/ActivityMgr/templates/ActivityEditor.html":"[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"activityDialog\" title=\"\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onDlgHide\">',\r\n        '<div class=\"activity-dialog\">',  //body\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"regardingContainer\">',\r\n                '<select id=\"pk_Regarding\" label=\"{%= $.regardingText %}\" id=\"{%= $.id %}_pk_Regarding\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Regarding\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\" ></select>',\r\n                '<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.locationText %}\" id=\"{%= $.id %}_tb_Location\" dojoAttachPoint=\"tb_Location\" maxLength=\"255\" ></div>',\r\n            '</div>', //first tablecontainer 1 col\r\n        //Dates section for add/edit mode..................\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"dateSection_AddEdit\">',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtp_startDate\" dojoAttachPoint=\"dtp_startDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.startTimeText %}\"></div>',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DurationSelect\" label=\"{%= $.durationText %}\" id=\"{%= $.id %}_sel_Duration\" dojoAttachPoint=\"sel_Duration\" includeDisablingCheckbox=\"false\" valuesAreAfterStart=\"true\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"{%= $.timeLessText %}\" id=\"{%= $.id %}_cb_Timeless\" dojoAttachPoint=\"cb_Timeless\" ></div>',\r\n                    '<label class=\"checkbox-label\" for=\"{%= $.id %}_cb_Timeless\">{%= $.timeLessText %}</label>',\r\n                '</div>',\r\n                '<div dojoType=\"dojox.layout.TableContainer\" label=\"{%= $.alarmText %}\" cols=\"2\" showLabels=\"false\" class=\"removeExtraSpace\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" id=\"{%= $.id %}_cb_Alarm\" dojoAttachPoint=\"cb_Alarm\" ></div>',\r\n                    '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DurationSelect\" id=\"{%= $.id %}_sel_AlarmDur\" dojoAttachPoint=\"sel_AlarmDur\" valuesAreAfterStart=\"false\" ></div>',\r\n                '</div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"{%= $.id %}_cb_AutoRollover\" dojoAttachPoint=\"cb_AutoRollover\"></div>',\r\n                    '<label class=\"checkbox-label\" for=\"{%= $.id %}_cb_AutoRollover\">{%= $.rolloverText %}</label>',\r\n                '</div>',\r\n            '</div>',\r\n        //Dates section for complete mode...................\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"dateSection_Complete\">',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtp_completedDate\" dojoAttachPoint=\"dtp_completedDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.completedText %}\"></div>',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtp_scheduledDate\" dojoAttachPoint=\"dtp_scheduledDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.scheduledText %}\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"{%= $.timeLessText %}\" id=\"{%= $.id %}_cb_TimelessComplete\" dojoAttachPoint=\"cb_TimelessComplete\" ></div>',\r\n                    '<label class=\"checkbox-label\" for=\"{%= $.id %}_cb_TimelessComplete\">{%= $.timeLessText %}</label>',\r\n                '</div>',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DurationSelect\" label=\"{%= $.durationText %}\" id=\"{%= $.id %}_sel_DurationComplete\" dojoAttachPoint=\"sel_DurationComplete\" includeDisablingCheckbox=\"false\" valuesAreAfterStart=\"true\"></div>',\r\n            '</div>',\r\n\r\n            '<div dojoType=\"dijit.layout.TabContainer\" id=\"{%= $.id %}_tc_EditActivity\"  dojoAttachPoint=\"tc_EditActivity\" class=\"tab-container\">',\r\n/*  General Tab   */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_General\" title=\"{%= $.tabNameGeneralText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_General\">',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"resultContainer\" class=\"bottom-border-section\">', \r\n                        '<select shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" label=\"{%= $.resultText %}\" id=\"{%= $.id %}_pl_Result\"  name=\"pl_Result\" dojoAttachPoint=\"pl_Result\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\"></select>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"4\" labelWidth=\"4\" baseClass=\"contact-lead-radios\" >',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.contactText %}\" value=\"contact\" id=\"{%= $.id %}_rdo_Contact\" dojoAttachPoint=\"rdo_Contact\" dojoAttachEvent=\"onChange:_setContactLeadVisibility\" checked=\"true\" />',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.leadText %}\" value=\"lead\" id=\"{%= $.id %}_rdo_Lead\" dojoAttachPoint=\"rdo_Lead\" />',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"contactContainer\" baseClass=\"bottom-border-section\">',\r\n\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_ContactLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.opportunityText %}\" dojoAttachPoint=\"container_OppLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.accountText %}\" dojoAttachPoint=\"container_AccountLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.ticketText %}\" dojoAttachPoint=\"container_TicketLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"leadContainer\"  baseClass=\"bottom-border-section\" class=\"display-none\">',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_LeadLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_tb_LeadCompanyName\" label=\"{%= $.companyText %}\" dojoAttachPoint=\"tb_LeadCompanyName\" readonly=\"true\" />',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" class=\"bottom-border-section\" >',\r\n                        '<select label=\"{%= $.priorityText %}\" id=\"{%= $.id %}_pk_Priority\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Priority\" canEditText=\"true\" itemMustExist=\"false\" pickListName=\"Priorities\" sort=\"false\" maxLength=\"64\" style=\"width: {%= 472 - $.labelWidth %}px;\"></select>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.leaderText %}\" dojoAttachPoint=\"container_LeaderLup\" class=\"remove-padding lookup-container\" style=\"width: {%= 472 - $.labelWidth %}px;\"></div>',\r\n                        '<select label=\"{%= $.categoryText %}\" id=\"{%= $.id %}_pk_Category\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Category\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\" style=\"width: {%= 472 - $.labelWidth %}px;\"></select>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"&nbsp;\" class=\"dijitTextBox\" style=\"border-width:0px\">&nbsp;</div>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" class=\"valigntop\" dojoAttachPoint=\"notesContainer\">',\r\n                        '<textarea dojoType=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_ta_Notes\" label=\"{%= $.notesText %}\" dojoAttachPoint=\"ta_Notes\" class=\"notes-text\"></textarea>',\r\n                    '</div>',\r\n                '</div>',  // end general tab\r\n/* Availability Tab   */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Availability\" title=\"{%= $.tabNameAvailabilityText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_Availability\" dojoAttachEvent=\"onShow:_onShowAvailabilityTab\">',\r\n                    '<div dojoType=\"dijit.Toolbar\" region=\"top\" splitter=\"false\" class=\"right-tools\" >',  // list-panel-tbar                                  \r\n                        '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"container_ResourcesLup\" class=\"remove-padding\"></div>',\r\n                    '</div>',\r\n/* Scheduler ........... */\r\n                    '<div id=\"scheduler_here\" class=\"dhx_cal_container\" style=\"width:100%;height:230px;\">',\r\n                        '<div class=\"dhx_cal_navline\">',\r\n                            '<div class=\"dhx_cal_prev_timeline_button\" style=\"right:50px;\">&nbsp;</div>',\r\n\t\t\t                '<div class=\"dhx_cal_next_timeline_button\" style=\"right:19px;\">&nbsp;</div>',\r\n//'<div class=\"dhx_cal_today_button\"></div>',\r\n\t\t\t                '<div class=\"dhx_cal_date\"></div>',\r\n//'<div class=\"dhx_cal_tab\" name=\"day_tab\" style=\"right:204px;\"></div>',\r\n//'<div class=\"dhx_cal_tab\" name=\"week_tab\" style=\"right:140px;\"></div>',\r\n                            '<div class=\"dhx_cal_tab\" name=\"timeline_tab\" style=\"right:280px;\"></div>',\r\n//'<div class=\"dhx_cal_tab\" name=\"month_tab\" style=\"right:76px;\"></div>',\r\n\t\t                '</div>',\r\n\t\t                '<div class=\"dhx_cal_header\"></div>',\r\n\t\t                '<div class=\"dhx_cal_data\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n/* Recurring Tab  */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Recurring\" title=\"{%= $.recurringText %}\" class=\"tabContent\" dojoAttachPoint=\"cp_Recurring\" dojoAttachEvent=\"onShow:_showRecurringTab\">',\r\n                    '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.MainView.ActivityMgr.RecurringEditor\" id=\"{%= $.id %}_recEd\" labelWidth=\"{%= $.labelWidth - 20 %}\" dojoAttachPoint=\"_recurringEditor\"></div>',\r\n                '</div>',\r\n/* Attachments Tab  */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Attachments\" title=\"{%= $.tabNameAttachmentsText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_Attachments\" dojoAttachEvent=\"onShow:_showAttachmentsTab\">',\r\n                    '<div id=\"{%= $.id %}_attachmentsGridPlaceholder\" dojoAttachPoint=\"_attachmentGridPlaceholder\" style=\"width:100%;height:100%\"></div>',\r\n                '</div>',\r\n            '</div>',  //tab container\r\n/* Buttons       */\r\n        // Add/edit activity buttons\r\n            '<table class=\"button-bar\" id=\"add_edit_buttons\" dojoAttachPoint=\"add_edit_buttons\">',\r\n                '<tr>',\r\n                    '<td class=\"alignleft\">',\r\n                        '<div class=\"scheduled-by-label\" dojoAttachPoint=\"lbl_ScheduledBy\"></div>',\r\n                    '</td><td class=\"alignright\">',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Complete\" name=\"btn_Complete\" dojoAttachPoint=\"btn_Complete\" dojoAttachEvent=\"onClick:_completeClick\">{%= $.completeBtnText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Delete\" name=\"btn_Delete\" dojoAttachPoint=\"btn_Delete\" dojoAttachEvent=\"onClick:_deleteClick\">{%= $.deleteText %}</div>',\r\n                        '<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n\r\n\r\n        //complete activity buttons\r\n            '<table class=\"button-bar display-none\" id=\"complete_buttons\" dojoAttachPoint=\"complete_buttons\">',\r\n                '<tr>',\r\n                    '<col width=\"50%\" /><col width=\"50%\" />',\r\n                    '<td class=\"alignleft\">',\r\n                        '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" >',\r\n                            '<select label=\"{%= $.followupText %}\" id=\"sel_Followup\" dojoType=\"dijit.form.ComboBox\" dojoAttachPoint=\"sel_Followup\">',\r\n                                '<option value=\"none\" selected=\"selected\">{%= $.noneText %}</option>',\r\n                                '<option value=\"phone\">{%= Sage.Utility.Activity.getActivityTypeName(\"atPhoneCall\") %}</option>',\r\n                                '<option value=\"meeting\">{%= Sage.Utility.Activity.getActivityTypeName(\"atAppointment\") %}</option>',\r\n                                '<option value=\"todo\">{%= Sage.Utility.Activity.getActivityTypeName(\"atToDo\") %}</option>',\r\n                            '</select>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"ck_coAttachments\" dojoAttachPoint=\"ck_coAttachments\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coAttachments\">{%= $.carryOverAttachmentsText %}</label>',\r\n                            '</div>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"ck_coNotes\" dojoAttachPoint=\"ck_coNotes\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coNotes\">{%= $.carryOverNotesText %}</label>',\r\n                            '</div>',\r\n                        '</div>',\r\n                    '</td><td class=\"alignright valignbottom\" rowspan=\"2\">',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_asScheduled\" name=\"btn_asScheduled\" dojoAttachPoint=\"btn_asScheduled\" dojoAttachEvent=\"onClick:_asScheduledClick\">{%= $.asScheduledText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Now\" name=\"btn_Now\" dojoAttachPoint=\"btn_Now\" dojoAttachEvent=\"onClick:_nowClick\">{%= $.nowText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_CancelComplete\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_CancelComplete\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n                    '</td>',\r\n                '</tr><tr>',\r\n                    '<td class=\"alignleft\" >',\r\n                        '<div class=\"scheduled-by-label\" dojoAttachPoint=\"lbl_ScheduledByComp\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n\r\n\r\n\r\n        //Confirmations button bar...\r\n            '<table class=\"button-bar display-none\" id=\"confirmation_edit_buttons\" dojoAttachPoint=\"confirmation_edit_buttons\">',\r\n                '<tr>',\r\n                    '<td class=\"alignleft\" style=\"width:{%= $.labelWidth %}px;\">',\r\n                        '<label for=\"{%= $.id %}_ta_confirmationResponse\" id=\"responseLabel\" dojoAttachPoint=\"responseLabel\">{%= $.responseText %}</label>',\r\n                    '</td>',\r\n                    '<td class=\"alignleft\">',\r\n                        '<textarea dojoType=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_ta_confirmationResponse\" dojoAttachPoint=\"ta_confirmationResponse\" class=\"notes-text dijitTextBox\" maxLength=\"128\" ></textarea>',\r\n                    '</td><td class=\"alignright valignbottom\">',\r\n                        '<span id=\"newConfButtons\" dojoAttachPoint=\"newConfButtons\">',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_accept\" name=\"btn_accept\" dojoAttachPoint=\"btn_accept\" dojoAttachEvent=\"onClick:_acceptConfClick\">{%= $.acceptText %}</div>',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_decline\" name=\"btn_decline\" dojoAttachPoint=\"btn_decline\" dojoAttachEvent=\"onClick:_declineClick\">{%= $.declineText %}</div>',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_cancelConf\" name=\"btn_cancelConf\" dojoAttachPoint=\"btn_cancelConf\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n                        '</span>',\r\n                        '<span id=\"otherConfButtons\" dojoAttachPoint=\"otherConfButtons\" class=\"display-none\">',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_deleteConf\" name=\"btn_deleteConf\" dojoAttachPoint=\"btn_deleteConf\" dojoAttachEvent=\"onClick:_deleteConfClick\">{%= $.deleteConfText %}</div>',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_closeConf\" name=\"btn_closeConf\" dojoAttachPoint=\"btn_closeConf\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.closeText %}</div>',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n        '</div>', //body\r\n    '</div>',  //dialog\r\n'</div>' //root node\r\n]\r\n"}});define("Sage/MainView/ActivityMgr/ActivityEditor",["dijit/_Widget","Sage/_Templated","dojo/_base/declare","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","Sage/Utility","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","Sage/Utility/Activity","dojo/date","dojo/date/locale","dojo/string","Sage/UI/Dialogs","dijit/Tooltip","Sage/UI/AttachmentList","Sage/Data/SDataServiceRegistry","Sage/Utility/File","Sage/Utility/File/Attachment","Sage/UI/Controls/Lookup","dojo/i18n!./nls/ActivityEditor","dojo/text!./templates/ActivityEditor.html","dojo/dom-class","Sage/Utility/UserOptions","dijit/Toolbar","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/Textarea","dojox/layout/TableContainer","dijit/layout/BorderContainer","dijit/form/ComboBox","Sage/Services/UserOptions","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/Lookup","Sage/MainView/ActivityMgr/RecurringEditor","dijit/Dialog","Sage/UI/Controls/DurationSelect","Sage/Services/CalendarSecurityService"],function(_fad,_fae,_faf,_fb0,_fb1,_fb2,_fb3,_fb4,_fb5,_fb6,_fb7,_fb8,_fb9,_fba,_fbb,_fbc,_fbd,_fbe,_fbf,_fc0,_fc1,_fc2,_fc3,_fc4){var _fc5=_faf("Sage.MainView.ActivityMgr.ActivityEditor",[_fad,_fae],{activityId:"",activityMemberId:"",_memberSecurityData:[],mode:"",userNotificationId:"",id:"",activityType:"",_options:{},_dialog:false,_currentUserId:null,_originalLeaderId:false,_activityService:false,_activityData:false,_activityStore:false,_currentUserActivityData:false,_tempUAData:false,_currentUserActivityStore:false,_notificationData:false,_notificationStore:false,_notificationBindingMgr:false,_historyStore:false,_deleteAttendeeConnects:[],_attendeesData:[],_newAttendeesData:[],_attendeesForRemoval:[],_userActivitiesRequestCount:0,_resourceRequestCount:0,_resourceDeleteRequestCount:0,_availabilityShowing:false,_bindingMgr:false,_uaBindingMgr:false,_activityChangeConnection:false,lup_Account:false,lup_Contact:false,lup_Opportunity:false,lup_Ticket:false,lup_Lead:false,lup_Leader:false,accountLookupConfig:{},contactLookupConfig:{},opportunityLookupConfig:{},ticketLookupConfig:{},leadLookupConfig:{},resourcesLookupConfig:{},_isBinding:false,_activitySaved:false,_userActivitiesSaved:false,_currentUserActivitySaved:false,_resourcesSaved:false,_resourcesRemoved:false,_attachmentsSaved:false,_completeAfterSaving:false,_attachmentList:false,_tempIdForAttachments:false,confirmationDisableList:["pk_Regarding","tb_Location","dtp_startDate","sel_Duration","cb_Timeless","cb_Alarm","sel_AlarmDur","cb_AutoRollover","rdo_Contact","rdo_Lead","lup_Account","lup_Contact","lup_Opportunity","lup_Ticket","lup_Lead","ta_Notes","pk_Priority","lup_Leader","pk_Category"],noEditDisableList:["pk_Regarding","tb_Location","dtp_startDate","sel_Duration","cb_Timeless","cb_AutoRollover","rdo_Contact","rdo_Lead","lup_Account","lup_Contact","lup_Opportunity","lup_Ticket","lup_Lead","ta_Notes","pk_Priority","lup_Leader","pk_Category"],_readOnlyMode:false,_isProcessing:false,eventConnections:[],activityDefaultValues:{},widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_fc2)),constructor:function(){_fb4.mixin(this,_fc1);this._preloadActivityOptions();this._activityService=_fbd.getSDataService("system");this._setupStore();this._currentUserId=_fb2.getClientContextByKey("userID")||"";this._currentUserId=this._currentUserId.trim();dojo.subscribe("/entity/attachment/create",this,this._updateActivityETag);dojo.subscribe("/entity/attachment/update",this,this._updateActivityETag);dojo.subscribe("/entity/attachment/delete",this,this._updateActivityETag);},destroy:function(){if(this._activityChangeConnection){dojo.disconnect(this._activityChangeConnection);this._activityChangeConnection=false;}if(this._bindingMgr){this._bindingMgr.destroy();}if(this._uaBindingMgr){this._uaBindingMgr.destroy();}for(var i=0;i<this.eventConnections.length;i++){dojo.disconnect(this.eventConnections[i]);}this.lup_Account.destroy();this.lup_Contact.destroy();this.lup_Opportunity.destroy();this.lup_Ticket.destroy();this.lup_Lead.destroy();this.lup_Leader.destroy();this.eventConnections=[];this.inherited(arguments);},postCreate:function(){this._asScheduledTooltip=new _fbb({connectId:[this.btn_asScheduled.id],label:" ",position:["below"]});dojo.connect(this.dtp_scheduledDate,"onChange",this,function(){this._asScheduledTooltip.set("label",_fb8.format(this.dtp_scheduledDate.get("value"),{selector:"datetime",fullYear:true}));});this._nowTooltip=new _fbb({connectId:[this.btn_Now.id],label:" ",position:["below"]});dojo.connect(this.dtp_completedDate,"onChange",this,function(){this._nowTooltip.set("label",_fb8.format(this.dtp_completedDate.get("value"),{selector:"datetime",fullYear:true}));});},isFirstOpen:true,show:function(_fc6){this._isProcessing=false;this._dialog.set("refocus",false);this._dialog.show();if(this.isFirstOpen){this.isFirstOpen=false;this._ensureLookupsCreated();this.connect(this._recurringEditor,"onStartDateChanged",this._recurringStartDateChanged);this.connect(this._recurringEditor,"onRecurPeriodChanged",this._recurringPeriodChanged);this.connect(this._dialog,"onHide",this._cleanOnClose);}this.activityDefaultValues={};if(this.mode==="New"){this.activityDefaultValues=_fc6||{};this._loadData();}if(this.mode==="CompleteUnscheduled"&&!this.historyId){this.activityDefaultValues=_fc6||{};this._loadHistory();}if(!this._dialog._standby){_fb4.mixin(this._dialog,new _fb5());if(!this._activityData&&!this._notificationData){this._dialog.showLoading();}}if(!this._dialog.helpIcon){_fb4.mixin(this._dialog,new _fb3());this._dialog.createHelpIconByTopic(this._getHelpTopicByMode());}this._availabilityShowing=false;this.tc_EditActivity.selectChild(this.cp_General);this._dialog.resize();},hide:function(){this._dialog.hide();},_onDlgHide:function(){this.onHide();},onHide:function(){},_cleanOnClose:function(){var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();this.set("activityId","");this.set("activityMemberId","");if(this._activityStore){this._activityStore.clearCache();}if(this._historyStore){this._historyStore.clearCache();}this._hideLookupTooltip(this.lup_Account);this._hideLookupTooltip(this.lup_Contact);this._hideLookupTooltip(this.lup_Opportunity);this._hideLookupTooltip(this.lup_Ticket);this._hideLookupTooltip(this.lup_Lead);this._hideLookupTooltip(this.lup_Leader);},_hideLookupTooltip:function(_fc7){if(_fc7){_fc7.hideTooltip();}},_updateActivityETag:function(_fc8){if(_fc8){this._activityData.AttachmentCount++;}else{this._activityData.AttachmentCount--;}if(this._dialog.open&&this.activityId){var req=new Sage.SData.Client.SDataSingleResourceRequest(_fbd.getSDataService("system"));req.setResourceKind("activities");req.setResourceSelector("\""+this.activityId+"\"");req.setQueryArg("precedence","0");req.read({success:function(_fc9){this._activityData["$etag"]=_fc9["$etag"];},scope:this});}},_getHelpTopicByMode:function(){switch(this.mode){case "Confirm":return "confirmnotifications";case "Complete":case "CompleteUnscheduled":return "completeactivity";}return "activitydetailview";},_showCorrectButtonBar:function(mode){if(mode==="Confirm"){_fc3.add(this.add_edit_buttons,"display-none");_fc3.add(this.complete_buttons,"display-none");_fc3.remove(this.confirmation_edit_buttons,"display-none");}else{if(mode==="Complete"||mode==="CompleteUnscheduled"){_fc3.add(this.add_edit_buttons,"display-none");_fc3.add(this.confirmation_edit_buttons,"display-none");_fc3.remove(this.complete_buttons,"display-none");}else{_fc3.add(this.confirmation_edit_buttons,"display-none");_fc3.add(this.complete_buttons,"display-none");_fc3.remove(this.add_edit_buttons,"display-none");}}},_setModeAttr:function(mode){this.mode=mode;this._showCorrectButtonBar(mode);if(mode==="Confirm"){this._ensureLookupsCreated();this._bulkSetProperty(this,this.confirmationDisableList,"disabled",true);}else{this._bulkSetProperty(this,this.confirmationDisableList,"disabled",false);}if(mode.indexOf("New")===0){this.mode="New";var _fca=mode.replace("New ","").toLowerCase();switch(_fca){case "phonecall":case "atphonecall":this.activityType="atPhoneCall";break;case "meeting":case "atappointment":this.activityType="atAppointment";break;case "todo":case "attodo":this.activityType="atToDo";break;case "personalactivity":case "atpersonal":case "personal":this.activityType="atPersonal";break;case "letter":case "atletter":case "doc":case "atdoc":this.activityType="atDoc";break;case "fax":case "atfax":this.activityType="atFax";break;default:this.activityType="atAppointment";break;}this._activityData=false;_fc3.add(this.btn_Delete.domNode,"display-none");_fc3.add(this.btn_Complete.domNode,"display-none");}else{_fc3.remove(this.btn_Delete.domNode,"display-none");_fc3.remove(this.btn_Complete.domNode,"display-none");}if(mode==="Complete"||mode==="CompleteUnscheduled"){_fc3.add(this.dateSection_AddEdit.domNode,"display-none");_fc3.remove(this.dateSection_Complete.domNode,"display-none");_fc3.remove(this.resultContainer.domNode,"display-none");var idx=this.tc_EditActivity.getIndexOfChild(this.cp_Recurring);if(idx>0){this.tc_EditActivity.removeChild(this.cp_Recurring);var self=this;window.setTimeout(function(){self._dialog.resize();},10);}if(this._dialog.open){this._setUI();this._completeModeManualBind();}var _fcb=this._options.followUp.defaultFollowUpType;var _fcc=(_fcb==="None")?this.noneText:_fb6.getActivityTypeName(_fcb);this.sel_Followup.set("value",_fcc);this.ck_coAttachments.set("checked",this._options.followUp.carryOverAttachments);this.ck_coNotes.set("checked",this._options.followUp.carryOverNotes);}else{_fc3.add(this.dateSection_Complete.domNode,"display-none");_fc3.remove(this.dateSection_AddEdit.domNode,"display-none");_fc3.add(this.resultContainer.domNode,"display-none");var idx=this.tc_EditActivity.getIndexOfChild(this.cp_Recurring);if(idx<0){var _fcd=this.tc_EditActivity.getIndexOfChild(this.cp_Attachments);this.tc_EditActivity.addChild(this.cp_Recurring,_fcd);var self=this;window.setTimeout(function(){self._dialog.resize();},10);}}if(this._dialog.helpIcon){this._dialog.set("helpTopic",this._getHelpTopicByMode());}},_setActivityIdAttr:function(_fce){_fce=_fce||"";this.activityId=_fce;this._activityData=false;if(_fce!==""){this.historyId="";this._loadData();}},_getActivityIdAttr:function(){return this.activityId;},_setActivityMemberIdAttr:function(_fcf){_fcf=_fcf||"";this.activityMemberId=_fcf;},_getActivityMemberIdAttr:function(){return this.activityMemberId;},_setUserNotificationIdAttr:function(_fd0){_fd0=_fd0||"";if(_fd0!==this.userNotificationId){this.userNotificationId=_fd0;this.set("activityId","");this._notificationData=false;this._loadNotification();}},_getUserNotificationId:function(){return this.userNotificationId;},_setHistoryIdAttr:function(_fd1){_fd1=_fd1||"";if(this.historyId!==_fd1){this.historyId=_fd1;this._activityData=false;if(_fd1!==""){this.activityId="";this._loadHistory();}}},_getHistoryIdAttr:function(){return this.historyId;},_preloadActivityOptions:function(){this._options={atAppointment:{alarmLead:"15",duration:"60",autoRollover:false,timeless:false},atPhoneCall:{alarmLead:"15",duration:"15",autoRollover:false,timeless:false},atToDo:{alarmLead:"none",duration:"15",autoRollover:false,timeless:false},atPersonal:{alarmLead:"none",duration:"5",autoRollover:false,timeless:false},followUp:{defaultFollowUpType:"None",carryOverNotes:false,carryOverAttachments:false},calendar:{dayStartTime:"9",dayEndTime:"6"}};var _fd2=Sage.Services.getService("UserOptions");if(_fd2){_fd2.getByCategories(["ActivityMeetingOptions","ActivityPhoneOptions","ActivityToDoOptions","ActivityPersonalOptions","Calendar"],this._receivedOptions,this);}},_receivedOptions:function(data){var _fd3={"0":"None","1":"atPhoneCall","2":"atAppointment","3":"atToDo"};var opts=data["$resources"];for(var i=0;i<opts.length;i++){var opt=opts[i];var _fd4=(opt.category==="ActivityMeetingOptions")?"atAppointment":(opt.category==="ActivityPhoneOptions")?"atPhoneCall":(opt.category==="ActivityToDoOptions")?"atToDo":(opt.category==="ActivityPersonalOptions")?"atPersonal":false;if(_fd4&&this._options[_fd4]&&opt.value){switch(opt.name){case "AlarmLead":this._options[_fd4].alarmLead=(parseInt(opt.value,10)>0)?opt.value:"none";break;case "Duration":this._options[_fd4].duration=opt.value;break;case "Timeless":var tval=opt.value.substring(0,1).toUpperCase();this._options[_fd4].timeless=tval==="T";break;case "AutoRollover":var _fd5=opt.value.substring(0,1).toUpperCase();this._options[_fd4].autoRollover=_fd5==="T";break;}}else{if(opt.category==="Calendar"){switch(opt.name){case "DayStartTime":this._options.calendar.dayStartTime=_fc4.getConvertedOptionValue(opt["name"],opt["value"]);break;case "DayEndTime":this._options.calendar.dayEndTime=_fc4.getConvertedOptionValue(opt["name"],opt["value"]);break;case "DefaultFollowUpType":this._options.followUp.defaultFollowUpType=_fd3[opt.value]||"None";break;case "CarryOverNotes":var nval=opt.value.substring(0,1).toUpperCase();this._options.followUp.carryOverNotes=nval==="T";break;case "CarryOverAttachments":var aval=opt.value.substring(0,1).toUpperCase();this._options.followUp.carryOverAttachments=aval==="T";}}}}},_setupStore:function(){if(!this._activityStore){this._activityStore=new _fb0({include:["$descriptors"],resourceKind:"activities",service:this._activityService});}if(!this._currentUserActivityStore){this._currentUserActivityStore=new _fb0({include:["$descriptors"],select:["Alarm","AlarmTime","Activity/StartDate"],resourceKind:"userActivities",service:this._activityService});}if(!this._historyStore){this._historyStore=new _fb0({include:["$descriptors"],resourceKind:"history",service:_fbd.getSDataService("dynamic")});}},_resetDataProps:function(){this._activityData=false;this._currentUserActivityData=false;this._tempUAData=false;this._notificationData=false;this._attendeesData=[];this._attendeesForRemoval=[];this._newAttendeesData=[];this._userActivitiesRequestCount=0;this._resourceRequestCount=0;this._resourceDeleteRequestCount=0;this._activitySaved=false;this._userActivitiesSaved=false;this._currentUserActivitySaved=false;this._resourcesSaved=false;this._resourcesRemoved=false;this._attachmentsSaved=false;this._originalLeaderId=false;if(this._attachmentList){this._attachmentList.clearNewAttachments();}this._availabilityDataDateRange={fromDate:false,toDate:false,users:[]};},_loadData:function(){if(this._dialog._standby){this._dialog.showLoading();}this._resetDataProps();if(this._activityStore){if(this.mode==="New"){this._activityStore.newItem({onComplete:function(act){Sage.Utility.setValue(act,"Type",this.activityType);this._receivedActivity(act);},onError:this._requestFailure,scope:this});}else{this._activityStore.fetch({predicate:"\""+this.activityId+"\"",onComplete:this._receivedActivity,onError:this._requestFailure,scope:this});}}},_receivedActivity:function(_fd6){this._activityData=_fd6;if((this._currentUserActivityStore)&&(this.mode!=="New")&&(this.mode!="CompleteUnscheduled")){var id=this.activityId||_fd6.$key;id=(id.indexOf(";")>0)?id.substring(0,12):id;var _fd7=this.activityMemberId||this._currentUserId;this._currentUserActivityStore.fetch({predicate:_fb9.substitute("'ActivityId=${0};UserId=${1}'",[id,_fd7]),onComplete:this._receivedUserActivity,onError:this._noUserActivity,scope:this});}if(_fd6.AttachmentCount>0){this._activityData.Attachment=true;}this._tempIdForAttachments=false;var _fd8=Sage.Services.getService("ClientEntityContext");var _fd9=(this.historyId)?{"EntityId":this.historyId,"EntityType":"Sage.Entity.Interfaces.IHistory","Description":this._activityData.$descriptor,"EntityTableName":"HISTORY"}:{"EntityId":this.activityId,"EntityType":"Sage.Entity.Interfaces.IActivity","Description":this._activityData.$descriptor,"EntityTableName":"ACTIVITY"};_fd8.setTemporaryContext(_fd9);if(this.mode!=="New"&&this.mode!="CompleteUnscheduled"){this.activityType=_fd6.Type;}else{this._applyUserOptionsForNewActivity();}if(this.activityMemberId&&this.activityMemberId!==this._currentUserId&&!this._memberSecurityData[this.activityMemberId]){this._checkSecurityAccess(this._currentUserId,this.activityMemberId,function(_fda){if(_fda){this._memberSecurityData[this.activityMemberId]=[];this._memberSecurityData[this.activityMemberId].AllowAdd=_fda.AllowAdd;this._memberSecurityData[this.activityMemberId].AllowEdit=_fda.AllowEdit;this._memberSecurityData[this.activityMemberId].AllowDelete=_fda.AllowDelete;}this._setUIForActivityType(_fd6.Type);this._bind();},this);}else{this._setUIForActivityType(_fd6.Type);this._bind();}if(this._activityData["Leader"]){this._originalLeaderId=this._activityData.Leader["$key"];}else{this._originalLeaderId=this._activityData["UserId"]||this._currentUserId;}if(this._dialog._standby){this._dialog.hideLoading();}},_receivedUserActivity:function(_fdb){if(this._dialog._standby){this._dialog.hideLoading();}this._currentUserActivityData=_fdb;if(_fdb.Alarm===null){_fdb.Alarm=this._activityData.Alarm;}if(_fdb.AlarmTime===null){_fdb.AlarmTime=this._activityData.AlarmTime;}this._tempUAData={Alarm:_fdb.Alarm,AlarmTime:_fb2.Convert.toDateFromString(_fdb.AlarmTime)};this._bindUserActivity();},_loadNotification:function(){if(this._dialog._standby){this._dialog.showLoading();}this._resetDataProps();if(!this._notificationStore){this._notificationStore=new _fb0({include:["Activity","$descriptors"],resourceKind:"userNotifications",service:_fbd.getSDataService("system")});}this._notificationStore.fetch({predicate:"'"+this.userNotificationId+"'",onComplete:this._receivedNotification,onError:this._requestFailure,scope:this});},_loadHistory:function(){if(this._dialog._standby){this._dialog.showLoading();}if(this._historyStore){if(!this.historyId){this._historyStore.newItem({onComplete:function(hist){this._receivedActivity(_fb4.mixin(hist,this.activityDefaultValues));this._formatHeader();},scope:this});}else{this._historyStore.fetch({predicate:this.historyId,onComplete:function(hist){this._receivedActivity(hist);this._formatHeader();},onError:this._requestFailure,scope:this});}}},_receivedNotification:function(_fdc){this._receivedActivity(_fdc.Activity||this._emptyActivity);this._notificationData=_fdc;this._formatHeader();this._bindUserNotification();if(_fdc.Type==="New"){this._setUIAsUnConfirmed();}else{_fc3.remove(this.otherConfButtons,"display-none");_fc3.add(this.newConfButtons,"display-none");if(_fdc.Type==="Confirm"||_fdc.Type==="Decline"){this.ta_confirmationResponse.set("disabled",true);_fc3.remove(this.responseLabel,"display-none");_fc3.remove(this.ta_confirmationResponse.domNode,"display-none");}else{_fc3.add(this.responseLabel,"display-none");_fc3.add(this.ta_confirmationResponse.domNode,"display-none");}if(_fdc.Type==="Change"){this._checkUserConfirmationStatus();}}},_checkUserConfirmationStatus:function(){var req=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system")).setResourceKind("userActivities").setResourceSelector("\""+this._notificationData.Activity["$key"]+";"+this._notificationData.ToUser["$key"]+"\"");req.read({success:function(ua){if(ua.Status==="asUnconfirmed"){this._setUIAsUnConfirmed();}},failure:function(){},scope:this});},_setUIAsUnConfirmed:function(){_fc3.add(this.otherConfButtons,"display-none");_fc3.remove(this.newConfButtons,"display-none");this.ta_confirmationResponse.set("disabled",false);_fc3.remove(this.responseLabel,"display-none");_fc3.remove(this.ta_confirmationResponse.domNode,"display-none");},_applyUserOptionsForNewActivity:function(){var _fdd=_fb6.roundDateToNextQuarterHour(new Date());_fb2.setValue(this._activityData,"StartDate",_fb2.Convert.toIsoStringFromDate(_fdd));var _fde="15";if(this._options[this.activityType]){var _fdf=this._options[this.activityType];_fb2.setValue(this._activityData,"Duration",_fdf["duration"]||"60");_fde=_fdf["alarmLead"];_fb2.setValue(this._activityData,"Rollover",_fdf["autoRollover"]);_fb2.setValue(this._activityData,"Timeless",_fdf["timeless"]);}this._activityData=_fb4.mixin(this._activityData,this.activityDefaultValues);if(_fde.toLowerCase()==="none"){_fb2.setValue(this._activityData,"Alarm",false);_fde=15;}else{Sage.Utility.setValue(this._activityData,"Alarm",true);_fde=parseInt(_fde,10);}var d=_fb2.Convert.toDateFromString(_fb2.getValue(this._activityData,"StartDate"));var _fe0=_fb7.add(d,"minute",_fde*-1);_fb2.setValue(this._activityData,"AlarmTime",_fb2.Convert.toIsoStringFromDate(_fe0));var ldr={"$key":this._currentUserId,"$descriptor":_fb2.getClientContextByKey("userPrettyName")};_fb2.setValue(this._activityData,"Leader",ldr);if(this.activityDefaultValues.hasOwnProperty("carryOverAttachmentsFrom")){var self=this,_fe1=this.activityDefaultValues["carryOverAttachmentsFrom"];window.setTimeout(function(){self.doCarryOverAttachments(_fe1);},1000);}},_noUserActivity:function(){this._bindUserActivity();},_requestFailure:function(_fe2){if(this._dialog._standby){this._dialog.hideLoading();}_fba.showError(this.failedLoadingDataMsg);this.hide();},_createBindings:function(){if(this._bindingMgr){this._bindingMgr.destroy();this._bindingMgr=false;}this._bindingMgr=new _fb1({defaultBinding:{boundEntity:this._activityData},items:[{boundWidget:this.tb_Location,entityProperty:"Location"},{boundWidget:this.pk_Regarding,entityProperty:"Description",onChange:dojo.hitch(this,"_descriptionChanged")},{boundWidget:this.pk_Category,entityProperty:"Category"},{boundWidget:this.pk_Priority,entityProperty:"Priority"},{boundWidget:this.ta_Notes,entityProperty:"LongNotes",onChange:dojo.hitch(this,"_notesChanged")},{boundWidget:this.dtp_startDate,dataType:"date",entityProperty:"StartDate",onChange:dojo.hitch(this,"_startDateChanged")},{boundWidget:this.sel_Duration,entityProperty:"Duration"},{boundWidget:this.sel_Duration,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:false},{boundWidget:this.sel_AlarmDur,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:false},{boundWidget:this.cb_Timeless,entityProperty:"Timeless",widgetProperty:"checked",onChange:dojo.hitch(this,"_timelessChange")},{boundWidget:this.cb_AutoRollover,entityProperty:"Rollover",widgetProperty:"checked"},{boundWidget:this.dtp_scheduledDate,dataType:"date",entityProperty:"StartDate"},{boundWidget:this.sel_DurationComplete,entityProperty:"Duration"},{boundWidget:this.sel_DurationComplete,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:false},{boundWidget:this.cb_TimelessComplete,entityProperty:"Timeless",widgetProperty:"checked",onChange:dojo.hitch(this,"_timelessChange")}]});},_createUABindings:function(){this._uaBindingMgr=new _fb1({items:[{boundWidget:this.cb_Alarm,entityProperty:"Alarm",widgetProperty:"checked",onChange:dojo.hitch(this,"_alarmCheckChanged")}]});},_createNotificationBindings:function(){this._notificationBindingMgr=new _fb1({items:[{boundWidget:this.ta_confirmationResponse,entityProperty:"Notes",boundEntity:this._notificationData}]});},_bind:function(){if(this._activityData){if(!this._bindingMgr){this._createBindings();}else{if(!this._bindingMgr.boundEntity||(this._activityData["$key"]!==this._bindingMgr.boundEntity["$key"])){this._bindingMgr.setBoundEntity(this._activityData);}else{this._bindingMgr.bind();}}if(this.mode==="New"||this.mode==="CompleteUnscheduled"){this._noUserActivity();}this._manualBind();this._setUI();}},_bindUserNotification:function(){if(!this._notificationBindingMgr){this._createNotificationBindings();}else{this._notificationBindingMgr.setBoundEntity(this._notificationData);}},_isNullOrWhitespace:function(str){return (!str||str.trim()==="");},_manualBind:function(){if(this._activityData){this._isBinding=true;var act=this._activityData;var _fe3=this._isNullOrWhitespace(act.AccountId)?null:{"$key":act.AccountId,"$descriptor":act.AccountName};this.lup_Account.set("selectedObject",_fe3);var _fe4=this._isNullOrWhitespace(act.ContactId)?null:{"$key":act.ContactId,"$descriptor":act.ContactName};this.lup_Contact.set("selectedObject",_fe4);var _fe5=this._isNullOrWhitespace(act.OpportunityId)?null:{"$key":act.OpportutunityId,"$descriptor":act.OpportunityName};this.lup_Opportunity.set("selectedObject",_fe5);var _fe6=this._isNullOrWhitespace(act.TicketId)?null:{"$key":act.TicketId,"$descriptor":act.TicketNumber};this.lup_Ticket.set("selectedObject",_fe6);var _fe7=this._isNullOrWhitespace(act.LeadId)?null:{"$key":act.LeadId,"$descriptor":act.LeadName};this.lup_Lead.set("selectedObject",_fe7);this.tb_LeadCompanyName.set("value",this._isNullOrWhitespace(act.LeadId)?"":act.AccountName);this._updateLookupSeedValues(act.AccountId);this.lup_Leader.set("selectedObject",act.Leader);if(this.mode!=="Complete"){this._recurringEditor.set("activity",act);}this._completeModeManualBind();this._isBinding=false;}},_completeModeManualBind:function(){if(this.mode==="Complete"||this.mode==="CompleteUnscheduled"){this.dtp_completedDate.set("value",new Date());this.pl_Result.set("value",this.completeText);if(this.mode==="Complete"){this.pl_Result.focus();}}},_bindUserActivity:function(){if(!this._uaBindingMgr){this._createUABindings();}this.sel_AlarmDur.set("disabled",false);var _fe8=this._getActivityStartDate();this.sel_AlarmDur.set("startTime",_fe8);var ent=(this._currentUserActivityData)?this._currentUserActivityData:this._activityData;var _fe9=_fb2.Convert.toDateFromString(ent.AlarmTime);if(this._currentUserActivityData&&_fb2.getValue(this._activityData,"RecurrenceState")==="rstOccurrence"){var _fea=_fb2.Convert.toDateFromString(this._currentUserActivityData.Activity.StartDate);var _feb=_fb2.Convert.toDateFromString(this._currentUserActivityData.AlarmTime);var dur=_fb7.difference(_fea,_feb,"minute");_fe9=_fb7.add(_fe8,"minute",dur);}this._uaBindingMgr.setBoundEntity(ent);this.sel_AlarmDur.set("timeValue",_fe9);this.sel_AlarmDur.set("disabled",!ent.Alarm||this.mode==="Confirm");},_getActivityStartDate:function(){if(this._activityData){var _fec=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate);if((this._activityData.Timeless)&&(_fb6.isDateFiveSecondRuleTimeless(_fec))){return new Date(_fec.getUTCFullYear(),_fec.getUTCMonth(),_fec.getUTCDate(),0,0,5);}return _fec;}return new Date();},_onShowAvailabilityTab:function(){if(!this._availabilityShowing){this._resetAttendeesList();this._loadAttendeesData();}else{scheduler.setCurrentView(this._getActivityStartDate(),"timeline");}},_accountChanged:function(_fed){if(this._isBinding){return;}var _fee=(_fed)?_fed["$key"]:"";var _fef=(_fed)?_fed["$descriptor"]:"";var act=this._activityData;var _ff0=this._isNullOrWhitespace(act.ContactId);act.AccountId=_fee;act.AccountName=_fef;act.ContactId=null;act.ContactName="";act.PhoneNumber="";act.OpportunityId=null;act.OpportunityName="";act.TicketId=null;act.TicketNumber="";act.LeadId=null;act.LeadName="";this._isBinding=true;this.lup_Contact.set("selectedObject",null);this.lup_Opportunity.set("selectedObject",null);this.lup_Ticket.set("selectedObject",null);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._updateLookupSeedValues(_fee);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");if(_ff0){this._setContactToCurrentAccountPrimary();}this._isBinding=false;},_contactChanged:function(_ff1){if(this._isBinding){return;}var act=this._activityData;if(!_ff1){act.ContactId=null;act.ContactName="";act.PhoneNumber="";return;}act.ContactId=_ff1["$key"];act.ContactName=_ff1["$descriptor"];act.PhoneNumber=Sage.Utility.getValue(_ff1,"WorkPhone");act.LeadId=null;act.LeadName="";act.AccountId=_ff1.Account["$key"];act.AccountName=_ff1.Account.AccountName;this._updateLookupSeedValues(_ff1.Account["$key"]);this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_ff1.Account["$key"],"$descriptor":_ff1.Account.AccountName});this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;},_opportunityChanged:function(_ff2){if(this._isBinding){return;}var act=this._activityData;if(!_ff2){act.OpportunityId=null;act.OpportunityName="";return;}act.OpportunityId=_ff2["$key"];act.OpportunityName=_ff2["$descriptor"];if(this._isNullOrWhitespace(act.AccountId)||act.AccountId!==_ff2.Account["$key"]){act.AccountId=_ff2.Account["$key"];act.AccountName=_ff2.Account.AccountName;act.LeadId=null;act.LeadName="";this._updateLookupSeedValues(_ff2.Account["$key"]);this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_ff2.Account["$key"],"$descriptor":_ff2.Account.AccountName});this.lup_Contact.set("selectedObject",null);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;this._setContactBasedOnOpportunity();}},_ticketChanged:function(_ff3){if(this._isBinding){return;}var act=this._activityData;if(!_ff3){act.TicketId=null;act.TicketNumber="";return;}act.TicketId=_ff3["$key"];act.TicketNumber=_ff3["$descriptor"];if(this._isNullOrWhitespace(act.AccountId)||act.AccountId!==_ff3.Account["$key"]){act.AccountId=_ff3.Account["$key"];act.AccountName=_ff3.Account["AccountName"];act.LeadId=null;act.LeadName="";this._updateLookupSeedValues();act.ContactId=Sage.Utility.getValue(_ff3,"Contact.$key");act.ContactName=Sage.Utility.getValue(_ff3,"Contact.NameLF");act.PhoneNumber=Sage.Utility.getValue(_ff3,"Contact.WorkPhone");this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_ff3.Account["$key"],"$descriptor":_ff3.Account["AccountName"]});this.lup_Contact.set("selectedObject",{"$key":_ff3.Contact["$key"],"$descriptor":_ff3.Contact["NameLF"]});this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;}},_leadChanged:function(_ff4){if(this._isBinding){return;}var act=this._activityData;if(!_ff4){act.LeadId=null;act.LeadName="";act.PhoneNumber="";this.tb_LeadCompanyName.set("value","");return;}act.ContactId=null;act.ContactName="";act.AccountId=null;act.TicketId=null;act.TicketNumber="";act.OpportunityId=null;act.OpportunityName="";this._updateLookupSeedValues();this._isBinding=true;this.lup_Contact.set("selectedObject",null);this.lup_Account.set("selectedObject",null);this.lup_Opportunity.set("selectedObject",null);this.lup_Ticket.set("selectedObject",null);this._isBinding=false;act.LeadId=_ff4["$key"];act.LeadName=_ff4["LeadFullName"];act.AccountName=_ff4["Company"];act.PhoneNumber=_ff4["WorkPhone"];this.tb_LeadCompanyName.set("value",_ff4["Company"]);},_leaderChanged:function(_ff5){if(this._isBinding){return;}var _ff6=this._activityData.Leader["$key"]||this._activityData["UserId"];if(_ff5){var key=_ff5["$key"].substr(0,12);this._activityData.Leader={"$key":key,"$descriptor":_ff5["$descriptor"]||_ff5["Name"]};this._activityData.LeaderChanged=true;}this._updateUsersListWithNewLeader(_ff6,this._activityData.Leader);},_setContactBasedOnOpportunity:function(){if(this._isNullOrWhitespace(this._activityData.OpportunityId)){this._rebindToCurrentContact();return;}var req=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));req.setResourceKind("opportunities");var _ff7=req.uri.pathSegments.length-1;var _ff8=req.uri.getPathSegment(_ff7);_ff8["predicate"]="\""+this._activityData.OpportunityId+"\"";req.uri.setPathSegment(_ff7+1,"Contacts");req.setQueryArg("select","IsPrimary,Contact/NameLF,Contact/IsPrimary,Contact/WorkPhone");req.setQueryArg("orderby","IsPrimary desc");req.read({success:function(data){var _ff9=data["$resources"];if(_ff9.length<1){this._setContactToCurrentAccountPrimary();return;}var _ffa=false,_ffb=false,_ffc=_ff9[0],_ffd;for(var i=0;i<_ff9.length;i++){if(!_isNullOrWhitespace(_ff9[i])){if(_ff9.IsPrimary){if(!_ffa||_ff9[i].Contact.IsPrimary){_ffa=_ff9[i];}}if(!_ffb&&_ff9[i].Contact.IsPrimary){_ffb=_ff9[i];}}}_ffd=_ffa||_ffb||_ffc;if(_ffd){this._activityData.ContactId=Sage.Utility.getValue(_ffd,"Contact.$key");this._activityData.ContactName=Sage.Utility.getValue(_ffd,"Contact.NameLF");this._activityData.PhoneNumber=Sage.Utility.getValue(_ffd,"Contact.WorkPhone");this._rebindToCurrentContact();}},failure:function(){this._rebindToCurrentContact();},scope:this});},_setContactToCurrentAccountPrimary:function(){if(this._isNullOrWhitespace(this._activityData.AccountId)){this._rebindToCurrentContact();return;}var req=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));req.setResourceKind("accounts");var _ffe=req.uri.pathSegments.length-1;var _fff=req.uri.getPathSegment(_ffe);_fff["predicate"]="\""+this._activityData.AccountId+"\"";req.uri.setPathSegment(_ffe+1,"Contacts");req.setQueryArg("select","NameLF,IsPrimary,WorkPhone");req.setQueryArg("orderby","IsPrimary desc");req.setQueryArg("count","1");req.read({success:function(data){var _1000=data["$resources"];if(_1000.length<1){this._rebindToCurrentContact();return;}var _1001=_1000[0];this._activityData.ContactId=Sage.Utility.getValue(_1001,"$key");this._activityData.ContactName=Sage.Utility.getValue(_1001,"NameLF");this._activityData.PhoneNumber=Sage.Utility.getValue(_1001,"WorkPhone");this._isBinding=true;this.lup_Contact.set("selectedObject",_1001);this._isBinding=false;},failure:function(){this._rebindToCurrentContact();},scope:this});},_rebindToCurrentContact:function(){this._isBinding=true;this.lup_Contact.set("selectedObject",{"$key":this._activityData.ContactId,"$descriptor":this._activityData.ContactName});this._isBinding=false;},_updateLookupSeedValues:function(_1002){var accId=_1002||this._activityData.AccountId;this.contactLookupConfig.seedValue=accId;this.opportunityLookupConfig.seedValue=accId;this.ticketLookupConfig.seedValue=accId;},_setUI:function(){this._formatHeader();this._setDisabledByTimlessValue();this._setHasAlarmUI();if(this._isNullOrWhitespace(this._activityData.LeadId)){this.rdo_Contact.set("checked",true);}else{this.rdo_Lead.set("checked",true);}this._setContactLeadVisibility();this._setScheduledByLabel();},_checkSecurityAccess:function(_1003,_1004,_1005,scope){this.accessData=false;if(!this._accessStore){this._accessStore=new _fb0({include:["$descriptors"],resourceKind:"activityresourceviews",service:_fbd.getSDataService("dynamic")});}this._accessStore.fetch({predicate:"'"+_1004+"-"+_1003+"'",onComplete:function(_1006){_1005.call(scope,_1006);},onError:function(){_1005.call(scope,null);},scope:this});},_setUIForActivityType:function(_1007){this.pk_Regarding.set("pickListName",_fb6.getActivityPicklistName("Regarding",_1007));this.pk_Category.set("pickListName",_fb6.getActivityPicklistName("Category",_1007));this.pl_Result.set("pickListName",_fb6.getActivityPicklistName("Result",_1007));this.btn_Complete.set("disabled",!this._activityData.AllowComplete);if(this.mode!=="Confirm"){var _1008=this._activityData.AllowEdit;var _1009=this._activityData.AllowDelete;if(this.activityMemberId&&this.activityMemberId!==this._activityData.Leader.$key){_1008=false;_1009=false;}this._bulkSetProperty(this,this.noEditDisableList,"disabled",(!_1008));if((this.activityMemberId&&this._memberSecurityData[this.activityMemberId]&&this._memberSecurityData[this.activityMemberId].AllowEdit)||this.activityMemberId===this._currentUserId||this._activityData["UserId"]===this._currentUserId){this.btn_OK.set("disabled",false);}else{this.btn_OK.set("disabled",!this._activityData.AllowEdit);}this.btn_Delete.set("disabled",!_1009);}if(this.mode==="Complete"){this.btn_asScheduled.set("disabled",!this._activityData.AllowComplete);this.btn_Now.set("disabled",!this._activityData.AllowComplete);}this.pk_Category.set("disabled",(_1007==="atPersonal")||(this.mode==="Confirm")||this.pk_Category.get("disabled"));if((!this._canEdit())||(_1007==="atPersonal"||_1007==="atToDo")){_fc3.add(this.lup_Resources.domNode,"display-none");}else{_fc3.remove(this.lup_Resources.domNode,"display-none");}},_setDisabledByTimlessValue:function(){if(!this._activityData){return;}var tless=this._activityData["Timeless"];this._handleAutoRolloverState();this.dtp_startDate.set("displayTime",!tless);var _100a=this._activityData.AllowEdit;if(this.activityMemberId&&this.activityMemberId!==this._activityData.Leader.$key){_100a=false;}this.sel_Duration.set("disabled",tless||(this.mode==="Confirm")||!_100a);this.sel_DurationComplete.set("disabled",tless);this.dtp_scheduledDate.set("displayTime",!tless);},_handleAutoRolloverState:function(){var _100b=(this._activityData["Timeless"]&&!this._activityData["Recurring"]);if(_100b){this.cb_AutoRollover.set("disabled",false);}else{this.cb_AutoRollover.set("disabled",true);this.cb_AutoRollover.set("checked",false);}},_bulkSetProperty:function(ui,_100c,prop,val){for(var i=0;i<_100c.length;i++){var ctrl=ui[_100c[i]];if(ctrl){ctrl.set(prop,val);}}},_timelessChange:function(){this._setDisabledByTimlessValue();if(this.mode==="Complete"||this.mode==="CompleteUnscheduled"){if(this.cb_TimelessComplete.get("checked")){var _100d=this.dtp_scheduledDate.get("value");_100d.setHours(0);_100d.setMinutes(0);_100d.setSeconds(5);this.dtp_scheduledDate.set("value",_100d);}}else{if(this.cb_Timeless.get("checked")){var d=this.dtp_startDate.get("value");d.setHours(0);d.setMinutes(0);d.setSeconds(5);this.dtp_startDate.set("value",d);}}},_alarmCheckChanged:function(_100e,_100f,_1010,_1011){this._setHasAlarmUI(_1011);},_descriptionChanged:function(){this._formatHeader();},_notesChanged:function(_1012,_1013,_1014,_1015){_fb2.setValue(this._activityData,"Notes",(_1015)?_1015.substr(0,255):_1015);},_startDateChanged:function(){var _1016=this.dtp_startDate.get("value");this.sel_Duration.set("startTime",_1016);this.sel_AlarmDur.set("startTime",_1016);var act=(this._currentUserActivityData)?this._currentUserActivityData:this._activityData;Sage.Utility.setValue(act,"AlarmTime",Sage.Utility.Convert.toIsoStringFromDate(this.sel_AlarmDur.get("timeValue")));if(this._availabilityShowing){scheduler.setCurrentView(_1016,"timeline");this._requestAvailability();}this._recurringEditor.set("startDate",_1016);},_setHasAlarmUI:function(_1017){if(typeof _1017==="undefined"){_1017=Sage.Utility.getValue(this._currentUserActivityData||this._activityData,"Alarm");}this.sel_AlarmDur.set("disabled",!_1017||this.mode==="Confirm");},_setContactLeadVisibility:function(){var _1018=this.rdo_Contact.get("checked");_fc3.remove((_1018)?this.contactContainer.domNode:this.leadContainer.domNode,"display-none");_fc3.add((_1018)?this.leadContainer.domNode:this.contactContainer.domNode,"display-none");},_formatHeader:function(){var _1019="";var _101a=_fb6.getActivityTypeName(this._activityData["Type"]||"atAppointment");switch(this.mode){case "New":_1019=this.scheduleText;break;case "Complete":case "CompleteUnscheduled":_1019=this.completeText;break;}if(this.mode==="Confirm"){if(!this._notificationData){return;}this._getUserInfoFor(this._notificationData.FromUser["$key"],function(user){if(this._notificationData){var _101b=this._notificationData.Type;switch(_101b){case "Change":_1019=this.updatedText;break;case "Confirm":_1019=this.acceptedText;break;case "Deleted":_1019=this.deletedText;break;case "Leader":_1019=this.scheduledText;break;case "Decline":_1019=this.declinedText;break;}var _101c=(_101b==="New")?this.newConfirmationHeaderFormatText:this.otherConfimationHeaderFormatText;this._setHeader(_fb9.substitute(_101c,{activityType:_101a,actionText:_1019,user:user["UserName"]||user["$descriptor"]}));}});}else{this._setHeader(_fb9.substitute(this.dialogHeaderFormatText,{actionText:_1019,activityType:_101a,description:this._activityData["Description"]||""}));}},_setHeader:function(_101d){var html=_fb9.substitute("<div class=\"Global_Images icon16x16 ${0}\" > </div>&nbsp;<span class=\"activity-dialog-title\">${1}</span>",[_fb6.getActivityImageClass(this._activityData["Type"]||"atAppointment","small"),_101d]);this._dialog.titleNode.innerHTML=html;},_setScheduledByLabel:function(){var _101e=_fb2.Convert.toDateFromString(_fb2.getValue(this._activityData,"CreateDate"));if(!_101e||_101e.getFullYear()<1000){_101e=new Date();}var _101f=this._getActivityStartDate();var _1020=_fb2.getValue(this._activityData,"CreateUser").trim();var _1021=(this.mode==="Complete"||this.mode==="CompleteUnscheduled")?this.completeScheduledByFormatText:this.scheduledByFormatText;var lbl;if(!_1020||this._currentUserId===_1020){_1020=_fb2.getClientContextByKey("userPrettyName");}else{if(_1020==="PROCESS"||_1020==="ADMIN"){_1020="Administrator";}else{this._getUserInfoFor(_1020,function(user){lbl=_fb9.substitute(_1021,{user:user["$descriptor"],date:_fb8.format(_101e,{selector:"date",fullYear:true}),startDate:_fb8.format(_101f,{selector:"date",fullYear:true})});dojo.html.set(this.lbl_ScheduledBy,lbl);dojo.html.set(this.lbl_ScheduledByComp,lbl);});return;}}lbl=_fb9.substitute(_1021,{user:_1020,date:_fb8.format(_101e,{selector:"date",fullYear:true}),startDate:_fb8.format(_101f,{selector:"date",fullYear:true})});dojo.html.set(this.lbl_ScheduledBy,lbl);dojo.html.set(this.lbl_ScheduledByComp,lbl);},_getUserInfoFor:function(_1022,_1023){if(_1022){var _1024=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic",false,true,true));_1024.setResourceKind("userInfo");_1024.setResourceSelector("'"+_1022+"'");_1024.setQueryArg("precedence","0");_1024.read({success:_1023,scope:this,failure:function(){}});}},_showRecurringTab:function(){this._recurringEditor.onTabShow();this._recurringEditor._setReadOnly(!this._canEdit());},_showAttachmentsTab:function(){var self=this;window.setTimeout(function(){self._ensureAttachmentList();},100);},_ensureAttachmentList:function(){if(!this._attachmentList){this._attachmentList=new _fbc({workspace:"",tabId:"",placeHolder:this.id+"_attachmentsGridPlaceholder",parentRelationshipName:"activityId"});var self=this;this._attachmentList.startup(function(){if(self.cp_Attachments){self.cp_Attachments.resize();}if(self._canEdit()){self._attachmentList.setToReadOnly(false);}else{self._attachmentList.setToReadOnly(true);}});}else{if(this._canEdit()){this._attachmentList.setToReadOnly(false);}else{this._attachmentList.setToReadOnly(true);}this._attachmentList.resetEntityContext();}},_completeClick:function(){this._completeAfterSaving=true;this._saveAndClose();},_deleteClick:function(){if(this._activityData&&this._activityStore){_fba.raiseQueryDialogExt({title:"",query:this.areYouSureText,callbackFn:function(_1025){if(_1025){this._activityStore.deleteEntity(this._activityData,this._successfulActivityDelete,this._failedActivityDelete,this);}},yesText:this.okText,noText:this.cancelText,icon:"questionIcon",scope:this});}},_asScheduledClick:function(){this._completeActivity(this.dtp_scheduledDate.get("value"));},_nowClick:function(){this._completeActivity(this.dtp_completedDate.get("value"));},_completeActivity:function(_1026){if(this._isProcessing){return;}this._isProcessing=true;if(this.mode==="Complete"){var _1027={"$name":"Complete","request":{"entity":this._activityData,"userId":this._currentUserId,"result":this.pl_Result.get("value"),"resultCode":"","completeDate":_fb2.Convert.toIsoStringFromDate(_1026)}};var _1028=new Sage.SData.Client.SDataServiceOperationRequest(_fbd.getSDataService("system")).setResourceKind("activities").setOperationName("Complete");_1028.execute(_1027,{success:this._successfulComplete,failure:this._failedComplete,scope:this});}else{if(this.mode==="CompleteUnscheduled"){var _1029=new _fb0({include:["$descriptors"],resourceKind:"history",service:_fbd.getSDataService("dynamic")});_fb2.setValue(this._activityData,"CompletedDate",_fb2.Convert.toIsoStringFromDate(_1026));_1029.saveNewEntity(this._activityData,this._successfulComplete,this._failedComplete,this);}}},_okClick:function(){this._saveAndClose();},_saveAndClose:function(){if(this.mode==="New"){if(this._attachmentList){var _102a=this._attachmentList.getNewAttachments();if(_102a.length>0){this._activityData.Attachment=true;}}this._currentUserActivitySaved=true;_fb2.setValue(this._activityData,"Alarm",this.cb_Alarm.get("checked"));_fb2.setValue(this._activityData,"AlarmTime",_fb2.Convert.toIsoStringFromDate(this.sel_AlarmDur.get("timeValue")));this._activityStore.saveNewEntity(this._activityData,this._successfulActivitySave,this._failedActivitySave,this);}else{this._activityData.Attachment=this._activityData.AttachmentCount>0?true:false;if(this._currentUserActivityData){var _102b=this.sel_AlarmDur.get("timeValue");if(_fb2.getValue(this._activityData,"RecurrenceState")==="rstOccurrence"){_fb2.setValue(this._activityData,"Alarm",this.cb_Alarm.get("checked"));_fb2.setValue(this._activityData,"AlarmTime",_fb2.Convert.toIsoStringFromDate(this.sel_AlarmDur.get("timeValue")));this._currentUserActivitySaved=true;}else{if((this._tempUAData)&&(this._tempUAData.Alarm===this._currentUserActivityData.Alarm&&this._tempUAData.AlarmTime.getTime()===_102b.getTime())){this._currentUserActivitySaved=true;}else{delete (this._currentUserActivityData.Activity);this._currentUserActivityData.AlarmTime=_fb2.Convert.toIsoStringFromDate(_102b);this._currentUserActivityStore.save({scope:this,success:this._successfulCurrentUserActivitySave,failure:this._failedUserActivitySave});}}}else{_fb2.setValue(this._activityData,"AlarmTime",_fb2.Convert.toIsoStringFromDate(this.sel_AlarmDur.get("timeValue")));this._currentUserActivitySaved=true;}if(this._activityData.AllowEdit){this._activityStore.save({scope:this,success:this._successfulActivitySave,failure:this._failedActivitySave});}else{this._activitySaved=true;this._userActivitiesSaved=true;this._resourcesSaved=true;this._resourcesRemoved=true;this._attachmentsSaved=true;this._hideIfComplete();}}},_successfulActivitySave:function(_102c){if(this._activityData.LeaderChanged){_102c.LeaderChanged=true;}this._activityData=_102c;var isNew=false;var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();if(this.activityId===""){dojo.publish("/entity/activity/create",[this._activityData,this]);isNew=true;}this.activityId=_102c["$key"];var _102d=false,_102e=false;var ldr=_102c.Leader["$key"];for(var i=0;i<this._newAttendeesData.length;i++){_102d=(_102d||(this._newAttendeesData[i]["Type"]==="User"&&this._newAttendeesData[i]["$key"]!==ldr));_102e=(_102e||this._newAttendeesData[i]["Type"]==="Resource");}if(_102d){var uareq=new Sage.SData.Client.SDataTemplateResourceRequest(_fbd.getSDataService("system"));uareq.setResourceKind("userActivities");uareq.read({success:this._onGetUserActivityTemplate,failure:this._failedUserActivitySave,scope:this});}else{this._userActivitiesSaved=true;}if(_102e){var _102f=new Sage.SData.Client.SDataTemplateResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));_102f.setResourceKind("resourceSchedules");_102f.read({success:this._onGetResourceScheduleTemplate,failure:this._failedUserActivitySave,scope:this});}else{this._resourcesSaved=true;}this._attachmentsSaved=true;if(this._attachmentList){var _1030=this._attachmentList.getNewAttachments();if(_1030.length>0&&this.mode==="New"){this._saveAttachments(_1030);this._attachmentsSaved=false;}}if(this._attendeesForRemoval.length>0){this._removeResources();}else{this._resourcesRemoved=true;}if(!this._completeAfterSaving&&!isNew){dojo.publish("/entity/activity/change",[_102c,this]);}this._activitySaved=true;this._hideIfComplete();},_saveAttachments:function(_1031){this._attachmentRequests=_1031.length;for(var i=0;i<_1031.length;i++){var att=_1031[i];var req=new Sage.SData.Client.SDataSingleResourceRequest(_fbd.getSDataService("system"));req.setResourceKind("attachments");req.setResourceSelector("'"+att.$key+"'");att.activityId=this.activityId;for(var p in this._activityData){if(p.substring(p.length-2)==="Id"&&p!=="UserId"){var _1032=p.substring(0,1).toLowerCase()+p.substring(1);att[_1032]=this._activityData[p];}}req.update(att,{ignoreETag:true,success:this._successfulAttachmentSave,failure:this._failedAttachmentSave,scope:this});}},_removeAttachments:function(){if(!this._attachmentList){return;}var _1033=this._attachmentList.getNewAttachments();for(var i=0;i<_1033.length;i++){var att=_1033[i];var req=new Sage.SData.Client.SDataSingleResourceRequest(_fbd.getSDataService("system"));req.setResourceKind("attachments");req.setResourceSelector("'"+att.$key+"'");req["delete"](att,{success:function(){},failure:function(){},scope:this});}},getRelationshipsForAttachments:function(){var obj={};for(var p in this._activityData){if(p.substring(p.length-2)==="Id"&&p!=="UserId"){var _1034=p.substring(0,1).toLowerCase()+p.substring(1);obj[_1034]=this._activityData[p];}}if(this.mode==="New"&&!_fbe.supportsHTML5File&&!Sage.gears){this._tempIdForAttachments=this._makeTempID();obj["activityId"]=this._tempIdForAttachments;}return obj;},doCarryOverAttachments:function(_1035){this._ensureAttachmentList();_fbf.getAttachmentTemplate(function(_1036){this._getHistoryAttachments(_1035,_1036);},this);},_getHistoryAttachments:function(_1037,_1038){var _1039=new Sage.SData.Client.SDataResourceCollectionRequest(_fbd.getSDataService("system"));_1039.setResourceKind("attachments");_1039.setQueryArg("where","historyId eq '"+_1037+"'");_1039.read({success:function(data){var items=data["$resources"];var mixin={activityId:this._makeTempID(),historyId:null};var req=new Sage.SData.Client.SDataSingleResourceRequest(_fbd.getSDataService("system"));req.setResourceKind("attachments");if(items&&items.length){var l=items.length;for(var i=0;i<l;i++){var _103a=_fb4.mixin(items[i],mixin);var _103b=_fb4.mixin(_1038,_103a);delete _103b.createDate;delete _103b.modifyDate;delete _103b.createUser;delete _103b.modifyUser;delete _103b.$key;delete _103b.$etag;_103b.fileName=_103b.physicalFileName;_103b.attachDate=_fb2.Convert.toIsoStringFromDate(new Date());req.create(_103b,{success:function(_103c){dojo.publish("/entity/attachment/create",[_103c]);},failure:function(){},scope:this});}}},failure:function(){},scope:this});},_makeTempID:function(){if(!this._tempIdForAttachments){var uid=this._currentUserId;var dstr=_fb2.Convert.toIsoStringFromDate(this.dtp_startDate.get("value"));dstr=dstr.replace(/[T:-]/g,"").substr(6,6);this._tempIdForAttachments="NE"+uid.substr(uid.length-4,4)+dstr;}return this._tempIdForAttachments;},_attachmentRequests:0,_successfulAttachmentSave:function(_103d){this._attachmentRequests--;if(this._attachmentRequests<1){this._attachmentsSaved=true;this._hideIfComplete();}},_failedAttachmentSave:function(){this._attachmentRequests--;if(this._attachmentRequests<1){this._attachmentsSaved=true;this._hideIfComplete();}},_successfulCurrentUserActivitySave:function(_103e){this._currentUserActivitySaved=true;dojo.publish("/entity/userActivity/change",[_103e,this]);this._hideIfComplete();},_successfulActivityDelete:function(){var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();dojo.publish("/entity/activity/delete",[this._activityData["$key"],this]);if(this._activityData["Timeless"]){dojo.publish("/entity/activity/timeless/delete",[this._activityData["$key"],this]);}this.hide();},_successfulComplete:function(_103f){this._isProcessing=false;var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();var hist=_103f;if(this.mode==="Complete"){if(_103f.Response){hist=_103f.Response;}dojo.publish("/entity/activity/delete",[this._activityData["$key"],this]);if(this._activityData["Timeless"]){dojo.publish("/entity/activity/timeless/delete",[this._activityData["$key"],this]);}}dojo.publish("/entity/history/create",[hist,this]);var _1040=this.sel_Followup.get("value");switch(_1040){case this.noneText:this.hide();return;case _fb6.getActivityTypeName("atPhoneCall"):_1040="atPhoneCall";break;case _fb6.getActivityTypeName("atAppointment"):_1040="atAppointment";break;case _fb6.getActivityTypeName("atToDo"):_1040="atToDo";break;}var _1041=null;if(this.mode==="Complete"){if(_103f.Response){_1041=_103f.Response.HistoryId;}}else{_1041=hist.$key;}if(typeof _1041==="undefined"||_1041===null){this.hide();_fba.showError(this.scheduleFollowUpErrorText);return;}var _1042=this._getFollowUpActivityData(_1041);this.hide();window.setTimeout(function(){var _1043=Sage.Services.getService("ActivityService");if(_1043){_1043.scheduleActivity({"type":_1040,"preConfigured":_1042});}},250);},_getFollowUpActivityData:function(_1044){var a=this._activityData;var ret={AccountId:a.AccountId,AccountName:a.AccountName,ContactId:a.ContactId,ContactName:a.ContactName,Description:a.Description,LeadId:a.LeadId,LeadName:a.LeadName,OpportunityId:a.OpportunityId,OpportunityName:a.OpportunityName,TicketId:a.TicketId,TicketNumber:a.TicketNumber};if(this.ck_coNotes.get("checked")){ret["LongNotes"]=a.LongNotes;ret["Notes"]=a.Notes;}if(this.ck_coAttachments.get("checked")){ret["carryOverAttachmentsFrom"]=_1044;}return ret;},_failedActivitySave:function(_1045){var msg=_fb6.findFailedRequestMessage(_1045,this.couldNotSaveErrorText);_fba.showError(msg);this._completeAfterSaving=false;},_failedActivityDelete:function(_1046){var msg=_fb6.findFailedRequestMessage(_1046,this.couldNotDeleteErrorText);_fba.showError(msg);this._completeAfterSaving=false;},_failedUserActivitySave:function(_1047){var msg=_fb6.findFailedRequestMessage(_1047,this.couldNotSaveErrorText);_fba.showError(msg);},_failedResourceSave:function(_1048){var msg=_fb6.findFailedRequestMessage(_1048,this.couldNotSaveErrorText);_fba.showError(msg);},_failedComplete:function(_1049){var msg=_fb6.findFailedRequestMessage(_1049,this.couldNotCompleteErrorText);_fba.showError(msg);this._isProcessing=false;},_onGetUserActivityTemplate:function(_104a){this._userActivitiesRequestCount=0;var ldr=this.lup_Leader.get("selectedObject");ldr=ldr["$key"].substr(0,12);var act=this._activityData;var _104b=_fb2.Convert.toDateFromString(act.AlarmTime);for(var i=0;i<this._newAttendeesData.length;i++){var nat=this._newAttendeesData[i];if(nat["Type"]==="User"&&nat["$key"]!==ldr){var newua=dojo.mixin({},_104a);var _104c={User:{"$key":nat["$key"]},ActivityId:this.activityId,Activity:{"$key":this.activityId},Alarm:act.Alarm,AlarmTime:_fb2.Convert.toIsoStringFromDate(_104b),Status:"asUnconfirmed"};newua=_fb4.mixin(newua,_104c);var req=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));req.setResourceKind("userActivities");this._userActivitiesRequestCount++;req.create(newua,{success:function(_104d){this._userActivitiesRequestCount--;dojo.publish("/entity/userActivity/create",[_104d,this]);if(this._userActivitiesRequestCount<1){this._userActivitiesSaved=true;this._hideIfComplete();}},failure:this._failedUserActivitySave,scope:this});}}if(this._userActivitiesRequestCount<1){this._userActivitiesSaved=true;if(act.Timeless){dojo.publish("/entity/userActivities/timeless/saved",[act,this]);}this._hideIfComplete();}},_onGetResourceScheduleTemplate:function(_104e){this._resourceRequestCount=0;for(var i=0;i<this._newAttendeesData.length;i++){var nat=this._newAttendeesData[i];if(nat["Type"]==="Resource"){var newRe=_fb4.mixin({},_104e);var act=this._activityData;var sd=Sage.Utility.Convert.toDateFromString(act["StartDate"]);var ed=_fb7.add(sd,"minute",act["Duration"]);var _104f={ResourceId:nat["$key"],ActivityId:this.activityId,Description:nat["Name"],StartDate:act["StartDate"],EndDate:Sage.Utility.Convert.toIsoStringFromDate(ed),UserId:act.Leader["$key"]};newRe=_fb4.mixin(newRe,_104f);var req=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));req.setResourceKind("resourceSchedules");this._resourceRequestCount++;req.create(newRe,{success:function(_1050){this._resourceRequestCount--;if(this._resourceRequestCount<1){this._resourcesSaved=true;this._hideIfComplete();}},failure:this._failedResourceSave,scope:this});}}},_removeResources:function(){this._resourceDeleteRequestCount=0;for(var i=0;i<this._attendeesForRemoval.length;i++){var rem=this._attendeesForRemoval[i];var _1051;var _1052;var _1053;if(rem["type"]==="user"){_1051=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));_1051.setResourceKind("userActivities");_1052=_fb9.substitute("'ActivityId=${0};UserId=${1}'",[this.activityId,rem["id"]]);_1053="/entity/userActivity/delete";}else{_1051=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));_1051.setResourceKind("resourceSchedules");_1052="'"+rem["rsid"]+"'";_1053="/entity/resourceSchedule/delete";}_1051.setResourceSelector(_1052);this._resourceDeleteRequestCount++;var _1054={notify:function(){dojo.publish(this.evt,[this.predicate]);this.editor._resourceDeleteRequestCount--;if(this.editor._resourceDeleteRequestCount<1){this.editor._resourcesRemoved=true;this.editor._hideIfComplete();}},evt:_1053,predicate:_1052,editor:this};var _1055={success:_1054.notify,aborted:function(){},failure:this._failedResourceSave,scope:_1054};_1051["delete"]({"$key":_1052},_1055);}},_cancelClick:function(){if(this.mode==="New"){this._removeAttachments();}this.hide();},_hideIfComplete:function(){if(this._activitySaved&&this._userActivitiesSaved&&this._currentUserActivitySaved&&this._resourcesSaved&&this._resourcesRemoved&&this._attachmentsSaved){var actId=this.activityId;if(this._completeAfterSaving){this._completeAfterSaving=false;var svc=Sage.Services.getService("ActivityService");if(svc){svc.completeActivity(actId);}}else{this.hide();}}},_acceptConfClick:function(){var _1056=Sage.Services.getService("ActivityService");_1056.acceptConfirmation({notification:this._notificationData,success:this._successfulAcceptConfirmation,failure:this._failedAcceptDecline,scope:this});},_declineClick:function(){var _1057=Sage.Services.getService("ActivityService");_1057.declineConfirmation({notification:this._notificationData,success:this._successfulDeclineConfirmation,failure:this._failedAcceptDecline,scope:this});},_deleteConfClick:function(){if(this._notificationData&&this._notificationStore){this._notificationStore.deleteEntity(this._notificationData,this._successfulNotificationDelete,this._failedActivityDelete,this);}},_getActivityDataFromNotificationData:function(){var _1058=null;var _1059=null;if(this._notificationData){if(this._notificationData.Activity){_1058=this._notificationData.Activity.$key;}if(this._notificationData.ToUser){_1059=this._notificationData.ToUser.$key;}}var _105a={"activityId":_1058,"userId":_1059};return _105a;},_successfulAcceptConfirmation:function(){dojo.publish("/entity/activity/confirm",[this._getActivityDataFromNotificationData(),null]);this._successfulNotificationDelete();},_successfulDeclineConfirmation:function(){dojo.publish("/entity/activity/decline",[this._getActivityDataFromNotificationData(),null]);this._successfulNotificationDelete();},_successfulNotificationDelete:function(){dojo.publish("/entity/userNotification/delete",[this._notificationData["$key"],this]);this.hide();},_ensureLookupsCreated:function(){if(!this.lup_Account){this.createAccountLookup();this.createContactLookup();this.createOpportunityLookup();this.createTicketLookup();this.createLeadLookup();this.createLeaderlookup();this.createResourcesLookup();}},createAccountLookup:function(){this.accountLookupConfig={id:"_activityAcc",structure:[{"cells":[{"name":this.accountText,"field":"AccountName"},{"name":this.cityText,"field":"Address.City"},{"name":this.stateText,"field":"Address.State"},{"name":this.mainPhoneText,"field":"MainPhone"},{"name":this.typeText,"field":"Type"},{"name":this.subTypeText,"field":"SubType"},{"name":this.statusText,"field":"Status"},{"name":this.acctMgrText,"field":"AccountManager.UserInfo.UserName"},{"name":this.ownerText,"field":"Owner.OwnerDescription"}],"defaultCell":{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""}}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"accounts",sort:[{attribute:"AccountName"}]},isModal:true,seedProperty:"",seedValue:"",overrideSeedValueOnSearch:false,initializeLookup:false,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupActText,dialogButtonText:this.okText},this.lup_Account=new _fc0({id:"lu_account",allowClearingResult:true,showEntityInfoToolTip:true,readonly:true,config:this.accountLookupConfig});this.eventConnections.push(dojo.connect(this.lup_Account,"onChange",this,"_accountChanged"));dojo.place(this.lup_Account.domNode,this.container_AccountLup.domNode,"only");},createContactLookup:function(){this.contactLookupConfig={id:"_activityContact",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.nameText,field:"NameLF"},{name:this.accountText,field:"Account.AccountName"},{name:this.cityText,field:"Address.City"},{name:this.stateText,field:"Address.State"},{name:this.workphoneText,field:"WorkPhone"},{name:this.emailText,field:"Email"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"contacts",sort:[{attribute:"NameLF"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupContactText,dialogButtonText:this.okText};this.lup_Contact=new _fc0({id:"lu_contact",allowClearingResult:true,config:this.contactLookupConfig,readonly:true,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Contact,"onChange",this,"_contactChanged"));dojo.place(this.lup_Contact.domNode,this.container_ContactLup.domNode,"only");},createOpportunityLookup:function(){this.opportunityLookupConfig={id:"_activityOpp",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.descriptionText,field:"Description"},{name:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{name:this.accountText,field:"Account.AccountName"},{name:this.stageText,field:"Stage"},{name:this.statusText,field:"Status"},{name:this.ownerText,field:"Owner.OwnerDescription"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"opportunities",sort:[{attribute:"Description"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupOpportunityText,dialogButtonText:this.okText};this.lup_Opportunity=new _fc0({id:"lu_opportunity",allowClearingResult:true,config:this.opportunityLookupConfig,readonly:true,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Opportunity,"onChange",this,"_opportunityChanged"));dojo.place(this.lup_Opportunity.domNode,this.container_OppLup.domNode,"only");},createTicketLookup:function(){this.ticketLookupConfig={id:"_activityTicket",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.ticketNumberText,field:"TicketNumber"},{name:this.accountText,field:"Account.AccountName"},{name:this.nameText,field:"Contact.NameLF"},{name:this.phoneText,field:"Contact.WorkPhone"},{name:this.statusText,field:"StatusCode",pickListName:"Ticket Status",propertyType:"SalesLogix.PickList",type:Sage.UI.Columns.PickList},{name:this.urgencyText,field:"Urgency.Description"},{name:this.areaText,field:"Area"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"tickets",sort:[{attribute:"TicketNumber"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupTicketText,dialogButtonText:this.okText};this.lup_Ticket=new _fc0({id:"lu_ticket",allowClearingResult:true,config:this.ticketLookupConfig,readonly:true,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Ticket,"onChange",this,"_ticketChanged"));dojo.place(this.lup_Ticket.domNode,this.container_TicketLup.domNode,"only");},createLeadLookup:function(){this.leadLookupConfig={id:"_activityLead",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.leadFullNameText,field:"LeadFullName"},{name:this.companyText,field:"Company"},{name:this.cityText,field:"Address.City"},{name:this.stateText,field:"Address.State"},{name:this.postalText,field:"Address.PostalCode"},{name:this.statusText,field:"Status"},{name:this.workphoneText,field:"WorkPhone"},{name:this.ownerText,field:"Owner.OwnerDescription"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"leads",sort:[{attribute:"LeadFullName"}]},isModal:true,initialLookup:false,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupLeadText,dialogButtonText:this.okText};this.lup_Lead=new _fc0({id:"lu_lead",allowClearingResult:true,config:this.leadLookupConfig,readonly:true,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Lead,"onChange",this,"_leadChanged"));dojo.place(this.lup_Lead.domNode,this.container_LeadLup.domNode,"only");},createLeaderlookup:function(){var _105b={id:"_activityLeader",structure:[{cells:[{name:this.nameText,field:"Name",sortable:true,width:"400px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""}]}],gridOptions:{contextualCondition:function(){return "AllowAdd AND (AccessId eq '"+_fb2.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'";},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupLeaderText,dialogButtonText:this.okText};this.lup_Leader=new _fc0({id:"lu_leader",readonly:true,config:_105b});this.eventConnections.push(dojo.connect(this.lup_Leader,"onChange",this,"_leaderChanged"));dojo.place(this.lup_Leader.domNode,this.container_LeaderLup.domNode,"only");},createResourcesLookup:function(){this.resourcesLookupConfig={id:"_activityResources",btnToolTip:this.lookupResourcesText,structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.nameText,field:"Name"},{name:this.typeText,field:"Type",width:"100px"},{name:this.locationText,field:"IsLocation",propertyType:"System.Boolean",format:function(_105c,_105d){var type=_fb2.getValue(_105d,"Type");if(!type){return this.defaultValue;}if(type==="User"){return "";}return (_105d["IsLocation"]===null||_105d["IsLocation"]==="false")?this.noText:this.yesText;}},{name:this.descriptionText,field:"Subtype",width:"200px"}]}],gridOptions:{},displayMode:5,storeOptions:{resourceKind:"activityresourceviews",select:["AccessId","ResourceId","AllowAdd","AllowEdit","AllowDelete"],sort:[{attribute:"Type"},{attribute:"Name"}]},isModal:true,initialLookup:false,preFilters:[],query:{conditions:"AllowAdd AND (AccessId eq '"+this._currentUserId+"' OR AccessId eq 'EVERYONE')"},dialogTitle:this.lookupResourcesText,dialogButtonText:this.addResourceText,doSelected:function(items){var _105e=dijit.byId("activityEditor");if(_105e){_105e.addMembers(items);}this.lookupDialog.hide();}};this.lup_Resources=new Sage.UI.SDataLookup(this.resourcesLookupConfig);dojo.place(this.lup_Resources.domNode,this.container_ResourcesLup.domNode,"only");},_schedulerInitialized:false,_resetAttendeesList:function(){if(!this._schedulerInitialized){scheduler.showLightbox=function(){return false;};scheduler.config.timelineStep=30;scheduler.config.timelineStart=(this._options.calendar.dayStartTime*2);scheduler.config.timelineSize=((this._options.calendar.dayEndTime-this._options.calendar.dayStartTime)*2);scheduler.createTimelineView({name:"timeline",x_unit:"minute",x_date:"%g:%i",x_step:scheduler.config.timelineStep,x_start:scheduler.config.timelineStart,x_size:scheduler.config.timelineSize,y_unit:[],y_property:"section_id",render:"bar",section_autoheight:false,dy:30});scheduler.init("scheduler_here",new Date(),"timeline");scheduler.attachEvent("onBeforeDrag",function(){return false;});scheduler.config.dblclick_create=false;var self=this;dojo.query(".dhx_cal_prev_timeline_button").connect("onclick",function(){if(!scheduler.config.timelineStart==0){self.reRenderTimeline("left");}});dojo.query(".dhx_cal_next_timeline_button").connect("onclick",function(){if(scheduler.config.timelineStart+scheduler.config.timelineSize<48){self.reRenderTimeline("right");}});this._schedulerInitialized=true;}scheduler.clearAll();},_loadAttendeesData:function(){this._availabilityShowing=true;if(this.mode==="New"){var ldr=this.lup_Leader.get("selectedObject");var _105f=ldr["$descriptor"],_1060=ldr["$key"].substr(0,12);this.addMembers([{$descriptor:_105f,$key:_1060,IsLocation:false,Name:_105f,Subtype:"",Type:"User"}]);return;}var actid=this.activityId;if(!actid&&this._activityData){actid=this._activityData.$key;}if(!actid){return;}realActivityId=actid.substr(0,12);var req=new Sage.SData.Client.SDataNamedQueryRequest(Sage.Data.SDataServiceRegistry.getSDataService("mashups")).setApplicationName("$app").setResourceKind("mashups").setQueryName("execute").setQueryArg("_resultName","GetMembers").setQueryArg("_activityId",realActivityId);req.uri.setCollectionPredicate("'ActivityFreeBusy'");req.read({success:dojo.hitch(this,this._onReceiveAttendees),failure:dojo.hitch(this,this._availabilityFailed)});},_attendeesTemplate:new Simplate(["<table class=\"attendee-item\">","<tr>","<td class=\"attendee-name\">{%= $.name %}</td>","{% if (($.isNotLeader) && ($.allowDelete)) { %}","<td class=\"remove-attendee\" id=\"{%= $.id %}\"><img src=\"images/icons/Delete_16x16.png\" alt=\"{%= $.removeText %}\" title=\"{%= $.removeText %}\" onclick=\"{%= $.deleteCode %}\" /></td>","{% } %}","<td class=\"attendee-status\"><img src=\"{%= $.img %}\" alt=\"{%= $.imgToolTipText %}\" title=\"{%= $.imgToolTipText %}\"/></td>","</tr>","</table>"]),_onReceiveAttendees:function(data){this._attendeesData=data["$resources"];if(this._originalLeaderId&&this._originalLeaderId!==this._activityData.Leader["$key"]){var len=this._attendeesData.length;for(var i=0;i<len;i++){if(this._attendeesData[i]["id"]===this._originalLeaderId){this._attendeesData.splice(i,1);break;}}}this._rebuildTimeLine();this._requestAvailability();},_rebuildTimeLine:function(_1061){var i;for(i=0;i<this._deleteAttendeeConnects.length;i++){dojo.disconnect(this._deleteAttendeeConnects[i]);}this._deleteAttendeeConnects=[];var _1062=[];var _1063={};var _1064=[];var _1065=[];var _1066=this._activityData.Leader["$key"].trim();var _1067="Sage.Utility.Activity.removeMember('${0}','${1}');";for(i=0;i<this._attendeesData.length;i++){var img=this._blankGif;var _1068="";var _1069=this._attendeesData[i]["status"]||0;if(_1069===1||_1069==="asAccepted"){img="images/icons/Accept.png";_1068=this.acceptedText;}else{if(_1069===2||_1069==="asDeclned"){img="images/icons/Decline.png";_1068=this.declinedText;}}var yUnit={key:this._attendeesData[i]["id"],label:this._attendeesTemplate.apply({name:this._attendeesData[i]["name"],img:img,imgToolTipText:_1068,id:this._attendeesData[i]["id"],isNotLeader:this._attendeesData[i]["id"].trim()!==_1066,allowDelete:this._canEdit(),removeText:this.removeText,deleteCode:dojo.string.substitute(_1067,[this.id,this._attendeesData[i]["id"]])})};if(this._attendeesData[i]["id"].trim()===_1066){_1063=yUnit;}else{if(this._attendeesData[i]["type"]==="user"){_1064.push(yUnit);}else{_1065.push(yUnit);}}}_1062=(_1063.key)?[_1063].concat(_1064.concat(_1065)):_1064.concat(_1065);for(i=0;i<this._newAttendeesData.length;i++){_1062.push({key:this._newAttendeesData[i]["$key"],label:this._attendeesTemplate.apply({name:this._newAttendeesData[i]["Name"],img:this._blankGif,id:this._newAttendeesData[i]["$key"],isNotLeader:this._newAttendeesData[i]["$key"].trim()!==_1066,allowDelete:this._canEdit(),removeText:this.removeText,deleteCode:dojo.string.substitute(_1067,[this.id,this._newAttendeesData[i]["$key"]])})});}if(_1061=="left"){if((scheduler.config.timelineStart-scheduler.config.timelineSize)>0){scheduler.config.timelineStart=scheduler.config.timelineStart-scheduler.config.timelineSize;}else{scheduler.config.timelineStart=0;}}else{if(_1061=="right"){var st=(scheduler.config.timelineSize+scheduler.config.timelineStart);if(st>(48-scheduler.config.timelineSize)){scheduler.config.timelineStart=48-scheduler.config.timelineSize;}else{scheduler.config.timelineStart=st;}}}var self=this;scheduler.createTimelineView({name:"timeline",x_unit:"minute",x_date:"%g:%i",x_step:scheduler.config.timelineStep,x_start:scheduler.config.timelineStart,x_size:scheduler.config.timelineSize,y_unit:_1062,y_property:"section_id",render:"bar",section_autoheight:false,dy:30});scheduler.setCurrentView(this._getActivityStartDate(),"timeline");},_updateLocation:function(_106a,isAdd){var _106b=this._activityData.Location;if(!_106b||_106b===""){if(isAdd){_106b=_106a;}}else{var parts=_106b.split("; ");var _106c=[];var _106d=false;for(var i=0;i<parts.length;i++){if(parts[i]===_106a){if(isAdd){_106d=true;}else{continue;}}_106c.push(parts[i]);}if(!_106d&&isAdd){_106c.push(_106a);}_106b=_106c.join("; ");}Sage.Utility.setValue(this._activityData,"Location",_106b);this.tb_Location.set("value",_106b);},_removeMember:function(args){var i;var id=args.memberId;var lst=[];for(i=0;i<this._attendeesData.length;i++){if(this._attendeesData[i]["id"]===id){if(this._attendeesData[i]["type"]==="resource"&&this._attendeesData[i]["IsLocation"]){this._updateLocation(this._attendeesData[i]["name"],false);}this._attendeesForRemoval.push(this._attendeesData[i]);}else{lst.push(this._attendeesData[i]);}}this._attendeesData=lst;lst=[];for(i=0;i<this._newAttendeesData.length;i++){if(this._newAttendeesData[i]["$key"]===id){if(this._newAttendeesData[i]["Type"]==="Resource"&&this._newAttendeesData[i]["IsLocation"]===true){this._updateLocation(this._newAttendeesData[i]["Name"],false);}}else{lst.push(this._newAttendeesData[i]);}}this._newAttendeesData=lst;this._rebuildTimeLine();},addMembers:function(items){for(var i=0;i<items.length;i++){var item=items[i];if(item["$key"].length>12){item["$key"]=item["$key"].substr(0,12);}if(this._isMember(item)){continue;}if(item["ResourceId"]){item["$key"]=item["ResourceId"];}if(item["Type"]==="Resource"&&item["IsLocation"]===true){this._updateLocation(item["Name"],true);}this._newAttendeesData.push(item);}if(this._availabilityShowing){this._rebuildTimeLine();this._requestAvailability();}},_isMember:function(_106e){var i,len=this._attendeesData.length;for(i=0;i<len;i++){if(this._attendeesData[i]["id"]===_106e["$key"]){return true;}}len=this._newAttendeesData.length;for(i=0;i<len;i++){if(this._newAttendeesData[i]["$key"]===_106e["$key"]){return true;}}return false;},_updateUsersListWithNewLeader:function(_106f,_1070){var i,len=this._attendeesData.length;for(i=0;i<len;i++){if(this._attendeesData[i]["id"]===_106f){this._attendeesData.splice(i,1);break;}}len=this._newAttendeesData.length;for(i=0;i<len;i++){if(this._newAttendeesData[i]["$key"]===_106f){this._newAttendeesData.splice(i,1);break;}}this.addMembers([{$descriptor:_1070["$descriptor"],$key:_1070["$key"],IsLocation:false,Name:_1070["$descriptor"],Subtype:"",Type:"User"}]);},_requestAvailability:function(){if(this._attendeesData.length<1&&this._newAttendeesData.length<1){return;}var _1071=[];for(var i=0;i<this._attendeesData.length;i++){_1071.push("'"+this._attendeesData[i]["id"]+"'");}for(i=0;i<this._newAttendeesData.length;i++){_1071.push("'"+this._newAttendeesData[i]["$key"]+"'");}if(this._availabilityDataDateRange.fromDate){var _1072=Sage.Utility.Convert.toDateFromString(this._activityData["StartDate"]);if((_1072>this._availabilityDataDateRange.fromDate)&&(_1072<this._availabilityDataDateRange.toDate)&&(_1071.join("")===this._availabilityDataDateRange.users.join(""))){return;}}this._requestAvailabilityFor(_1071);},_availabilityDataDateRange:{fromDate:false,toDate:false,users:[]},_requestAvailabilityFor:function(_1073){var _1074=Sage.Utility.Convert.toDateFromString(this._activityData["StartDate"]);var _1075=_fb7.add(_1074,"day",-7);var _1076=_fb7.add(_1074,"day",7);this._availabilityDataDateRange.fromDate=_1075;this._availabilityDataDateRange.toDate=_1076;this._availabilityDataDateRange.users=_1073;var _1077=Sage.Services.getService("ActivityService");if(_1077){var _1078={quotedIds:_1073,startDate:_1075,endDate:_1076,expandRecurrences:true,includeTimless:false,timelessOnly:false};_1077.getActivityFreeBusyFor(this,_1078,this._onReceiveAvailability,this._availabilityFailed);}},_onReceiveAvailability:function(data){this._availabilityData=data["$resources"];this._applyAvailability();},_applyAvailability:function(){scheduler.clearAll();for(var i=0;i<this._availabilityData.length;i++){var item=this._availabilityData[i];if(item.type===262162&&item.itemId!==this._currentUserId){item["description"]=_fb6.getActivityTypeName("atPersonal");}var _1079=(item["activityId"]==this.activityId)?true:false;var _107a=Sage.Utility.Convert.toDateFromString(item["startDate"]);var eDate=_fb7.add(_107a,"minute",item["duration"]);scheduler.addEvent(_107a,eDate,item["description"],null,{section_id:item["itemId"],activity_Id:item["activityId"],current_event:_1079});}},reRenderTimeline:function(_107b){this._rebuildTimeLine(_107b);this._applyAvailability();},_availabilityFailed:function(req,msg){},_recurringStartDateChanged:function(_107c){var _107d=this.dtp_startDate.get("value");if(_107c.getMonth()===_107d.getMonth()&&_107c.getDate()===_107d.getDate()&&_107c.getFullYear()===_107d.getFullYear()){return;}if(this._activityData.StartDate){var _107e=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate).getHours();var _107f=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate).getMinutes();_107c.setHours(_107e);_107c.setMinutes(_107f);}this._activityData.StartDate=(_107c.getFullYear)?_fb2.Convert.toIsoStringFromDate(_107c):_107c;this.dtp_startDate.set("value",_107c);this._startDateChanged();},_recurringPeriodChanged:function(_1080){this._handleAutoRolloverState();},_isOccurence:function(){if(this.activityId.length>12){return true;}return false;},_canEdit:function(){if((this.mode==="Confirm")||(!this._activityData.AllowEdit)||this._isOccurence()){return false;}return true;},_emptyActivity:{"$key":"","AccountId":null,"AccountName":"","ActivityBasedOn":null,"Alarm":false,"AlarmTime":_fb2.Convert.toIsoStringFromDate(new Date()),"Attachment":false,"Category":null,"ContactId":null,"ContactName":"","CreateDate":"","CreateUser":"","Description":"","Duration":15,"ForeignId1":null,"ForeignId2":null,"ForeignId3":null,"ForeignId4":null,"LeadId":null,"LeadName":"","LongNotes":null,"Notes":null,"OpportunityId":null,"OpportunityName":null,"OriginalDate":"","PhoneNumber":"","Priority":null,"ProcessId":null,"ProcessNode":null,"ProjectId":null,"RecurIterations":0,"RecurPeriod":0,"RecurPeriodSpec":0,"Recurring":false,"RecurSkip":"","Rollover":false,"StartDate":_fb2.Convert.toIsoStringFromDate(new Date()),"TicketId":null,"TicketNumber":null,"Timeless":false,"Type":"atAppointment","UserDef1":null,"UserDef2":null,"UserDef3":null,"AttachmentCount":null,"Location":null,"EndDate":"","Resources":{},"Leader":{"$key":""},"UserActivities":{},"UserNotifications":{}}});return _fc5;});},"Sage/MainView/ActivityMgr/nls/ActivityGroupContextService":function(){define("Sage/MainView/ActivityMgr/nls/ActivityGroupContextService",["Sage/LanguageList","dojo/_base/lang"],function(_1081,lang){var nls={root:{activityTabDisplayName:"My Activities",litTabDisplayName:"Literature",eventTabDisplayName:"Events",confirmTabDisplayName:"Confirmations",pastDueTabDisplayName:"Past Due",alarmTabDisplayName:"Alarms",allOpenTabDisplayName:"All Open"}};return lang.mixin(_1081,nls);});},"Sage/UI/Controls/TextBox":function(){define("Sage/UI/Controls/TextBox",["dijit/form/ValidationTextBox","dojo/dom-class","dojo/query","dojo/_base/declare"],function(_1082,_1083,_1084,_1085){var _1086=_1085("Sage.UI.Controls.TextBox",[_1082],{maxLength:"",textWithIcons:false,shouldPublishMarkDirty:true,autoPostBack:false,hotKey:"",_setHotKeyAttr:{node:"textbox",type:"attribute",attribute:"accessKey"},slxchangehook:"true",_setslxchangehookAttr:{node:"focusNode",type:"attribute",attribute:"slxchangehook"},postCreate:function(){this.connect(this,"onChange",this.onChanged);this.inherited(arguments);},startup:function(_1087){if(this.textWithIcons){var self=this;dojo.ready(function(){if(_1084("#"+self.id)[0]){var _1088=_1084("#"+self.id)[0];_1083.add(_1088.parentNode,"textcontainer-with-icons");}});}this.inherited(arguments);},onChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){__doPostBack(this.id,"");}},setAttribute:function(attr,val){this.set(attr,val);}});return _1086;});},"Sage/Services/ActivityService":function(){define("Sage/Services/ActivityService",["Sage/UI/Dialogs","Sage/MainView/ActivityMgr/ActivityEditor","Sage/MainView/ActivityMgr/EditEventEditor","Sage/MainView/ActivityMgr/QuickCompleteEditor","Sage/Services/ActivityActionProcessor","Sage/Services/ActivityAction","Sage/MainView/ActivityMgr/HistoryEditor","Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","dojo/string","Sage/Utility","dojo/i18n!./nls/ActivityService","dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(_1089,_108a,_108b,_108c,_108d,_108e,_108f,_1090,_1091,_1092,_1093,_1094,_1095,_1096,topic,lang){var _1097=_1096("Sage.Services.ActivityService",null,{_defaultActivitManagerTabId:null,_activityEditor:false,_eventEditor:false,_historyEditor:false,_editOccSeriesDlg:false,_deleteOccSeriesDlg:false,_compOccSeriesDlg:false,_processor:false,_actCompleteQueue:false,_histCompleteQueue:[],activityEditorType:_108a,eventEditorType:_108b,historyEditorType:_108f,constructor:function(){dojo.mixin(this,_1095);},_ensureEditor:function(){if(!this._activityEditor){this._activityEditor=new this.activityEditorType({id:"activityEditor"});this.onActivityEditorCreated(this._activityEditor);}},onActivityEditorCreated:function(_1098){},_ensureEventEditor:function(){if(!this._eventEditor){this._eventEditor=new this.eventEditorType();this.onEventEditorCreated(this._eventEditor);}},onEventEditorCreated:function(_1099){},_ensureHistoryEditor:function(){if(!this._historyEditor){this._historyEditor=new this.historyEditorType({id:"historyEditor"});this.onHistoryEditorCreated(this._historyEditor);}},onHistoryEditorCreated:function(_109a){},_ensureProcessor:function(){if(!this._processor){this._processor=new _108d();}},_getIdFromGridSelection:function(){var _109b=this.getSelectedItem();if(!_109b){return false;}if(_109b.hasCompositeKey){return _109b.entity.Activity["$key"];}else{return _109b.id;}},_getRecurringFromGridSelection:function(){var _109c=false,_109d=this.getSelectedItem();if(_109d&&_109d.entity){if(_109d.entity.hasOwnProperty("Activity")){_109c=_109d.entity.Activity["Recurring"]===true;if((_109c)&&(_109d.entity.Activity["RecurIterations"]<0)){_109c=false;}}else{_109c=_109d.entity["Recurring"]===true;if((_109c)&&(_109d.entity["RecurIterations"]<0)){_109c=false;}}}return _109c;},editActivity:function(id,_109e,_109f){if(!id){id=this._getIdFromGridSelection();_109e=this._getRecurringFromGridSelection();}if(!id){return;}if(id.length===12&&!_109e){this._ensureEditor();this._activityEditor.set("mode","Update");this._activityEditor.set("activityId",id);this._activityEditor.set("activityMemberId",_109f);this._activityEditor.show();}else{this.editOccurrenceOrSeriesQuery(id,_109f);}},editOccurrence:function(id,_10a0,_10a1){this._ensureEditor();this._activityEditor.set("mode","Update");this._activityEditor.set("activityId",id);this._activityEditor.set("activityMemberId",_10a1);this._activityEditor.show();},editOccurrenceOrSeriesQuery:function(id,_10a2){if(!this._editOccSeriesDlg){this._editOccSeriesDlg=new _1090({id:"editOccSeriesQuery",mode:"edit"});dojo.connect(this._editOccSeriesDlg,"onSelectSeries",this,function(actid,mId){this.editActivity(actid.substring(0,12),false,mId);});dojo.connect(this._editOccSeriesDlg,"onSelectOccurrence",this,function(actid,_10a3,mId){this.editOccurrence(actid,_10a3,mId);});}this._editOccSeriesDlg.set("activityMemberId",_10a2);this._editOccSeriesDlg.set("activityId",id);this._editOccSeriesDlg.show();},editTempActivity:function(id){this._ensureEditor();this._activityEditor.set("mode","deleteOnCancel");this._activityEditor.set("activityId",id);this._activityEditor.show();},completeOccurrenceOrSeriesQuery:function(id){if(!this._compOccSeriesDlg){this._compOccSeriesDlg=new _1090({id:"compOccSeriesQuery",mode:"complete"});dojo.connect(this._compOccSeriesDlg,"onSelectSeries",this,function(id){this.completeActivity(id.substring(0,12),false);});dojo.connect(this._compOccSeriesDlg,"onSelectOccurrence",this,this.completeActivityOccurrence);}this._compOccSeriesDlg.set("activityId",id);this._compOccSeriesDlg.show();},scheduleActivity:function(args){var type=args["type"]||args["Type"];if(type==="CompleteActivity"){this.scheduleCompletedActivity(type,args);return;}this._ensureEditor();this._activityEditor.set("mode","New "+args["type"]||"Meeting");if(args.hasOwnProperty("preConfigured")){this._activityEditor.show(args.preConfigured);}else{this.getActivityEntityContext(this._activityEditor,function(_10a4,_10a5){_10a4.show(_10a5);});}},completeActivityOccurrence:function(id,_10a6){this._ensureEditor();if(id.indexOf(";")<0){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1092.getSDataService("system")).setResourceKind("activities").setQueryArg("select","StartDate").setQueryArg("where","id eq '"+id+"'").setQueryArg("orderby","StartDate asc").setQueryArg("count","1");req.read({success:function(data){var acts=data["$resources"];if(acts.length>0){this._activityEditor.set("mode","Complete");this._activityEditor.set("activityId",acts[0]["$key"]);this._activityEditor.show();}},scope:this});}else{this._activityEditor.set("mode","Complete");this._activityEditor.set("activityId",id);this._activityEditor.show();}},completeActivity:function(id,_10a7){var _10a8=this._getSelectionContext(id,this.txtActivity,this.txtActivities);if(_10a8.count>1){this.completeActivitiesInSelectionContext(_10a8);}else{if(_10a8.id){var selid=_10a8.id;if(_10a8.selectionInfo&&_10a8.selectionInfo.selections[0].entity){var _10a9=_10a8.selectionInfo.selections[0].entity;if(_10a8.selectionInfo.hasCompositeKey){selid=_10a9["Activity"]["$key"];}if(selid.length===12){if(_10a9.hasOwnProperty("Activity")){_10a9=_10a9.Activity;}_10a7=_10a9["Recurring"]===true;if((_10a7)&&(_10a9["RecurIterations"]<0)){_10a7=false;}}}if(selid.length===12&&!_10a7){this._ensureEditor();this._activityEditor.set("mode","Complete");this._activityEditor.set("activityId",selid);this._activityEditor.show();}else{this.completeOccurrenceOrSeriesQuery(selid);}}}},_quickCompleteConnections:[],completeActivitiesInSelectionContext:function(_10aa){if(_10aa.count<1){return;}this._actCompleteQueue=_10aa;var _10ab={selectionContext:_10aa};var qce=new _108c(_10ab);this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteIndividually",this,"_completeActivitiesInQueue"));this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteNow",this,"_completeActivitiesNow"));this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteAsScheduled",this,"_completeActivitiesAsScheduled"));this._quickCompleteConnections.push(dojo.connect(qce,"onCancel",this,function(){this._actCompleteQueue=false;}));this._quickCompleteConnections.push(dojo.connect(qce._dialog,"onHide",this,"_quickCompleteHide"));qce.show();},_actEditorHideConnection:null,_quickCompleteHide:function(){if(!this._completingActivitiesIndividually){this._actCompleteQueue=false;}dojo.forEach(this._quickCompleteConnections,function(_10ac){dojo.disconnect(_10ac);});this._quickCompleteConnections=[];},_completingActivitiesIndividually:false,_completeActivitiesInQueue:function(){this._completingActivitiesIndividually=true;this._ensureEditor();this._actEditorHideConnection=dojo.connect(this._activityEditor,"onHide",this,this._completeNextActivityInQueue);this._completeNextActivityInQueue();},_completeNextActivityInQueue:function(){var _10ad=this._actCompleteQueue.selectionInfo.selections.pop();var id=_10ad.id;var _10ae=false;if(_10ad.entity){var _10af=_10ad.entity.hasOwnProperty("Activity")?_10ad.entity["Activity"]:_10ad.entity;if(this._actCompleteQueue.selectionInfo.hasCompositeKey){id=_10ad.entity["Activity"]["$key"];}_10ae=(id.length>12||_10af["Recurring"]===true);}this.completeActivity(id,_10ae);if(this._actCompleteQueues.selectionInfo.selections.length<1){dojo.disconnect(this._actEditorHideConnection);this._completingActivitiesIndividually=false;}},_completeActivitiesAsScheduled:function(_10b0){var args={selectionInfo:_10b0.selectionContext.selectionInfo,mode:"asScheduled",note:_10b0.note,resultCode:_10b0.resultCode};var _10b1=new _108e();_10b1.set("OperationName","completeActivities");_10b1.set("PublishMap","/entity/activity/change");_10b1.set("args",args);_10b1.execute({success:function(_10b2){topic.publish("/entity/activity/bulkComplete","true");},failure:function(){_1089.showError(this.txtErrorActionMsg);}});},_completeActivitiesNow:function(_10b3){var args={selectionInfo:_10b3.selectionContext.selectionInfo,mode:"completeNow",note:_10b3.note,resultCode:_10b3.resultCode};var _10b4=new Sage.Services.ActivityAction();_10b4.set("OperationName","completeActivities");_10b4.set("PublishMap","/entity/activity/change");_10b4.set("Args",args);_10b4.execute({success:function(_10b5){topic.publish("/entity/activity/bulkComplete","true");},failure:function(){_1089.showError(this.txtErrorActionMsg);}});},completeHistoriesInList:function(_10b6){if(_10b6.length<1){return;}if(_10b6.length===1){this.completeHistory(_10b6[0]);return;}this._histCompleteQueue=_10b6;var _10b7={selectionContext:{count:_10b6.length,selectionInfo:{selectedIds:_10b6}}};this._histCompleteQueue=_10b6;var qce=new _108c(_10b7);this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteIndividually",this,"_completeHistoriesInQueue"));this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteNow",this,"_updateHistoriesFromQuickComplete"));this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteAsScheduled",this,"_updateHistoriesFromQuickComplete"));this._quickCompleteConnections.push(dojo.connect(qce,"onCancel",this,"_cancelCompleteHistoryQueue"));this._quickCompleteConnections.push(dojo.connect(qce._dialog,"onHide",this,"_quickCompleteHide"));qce.show();},completeHistory:function(_10b8){this._ensureHistoryEditor();this._historyEditor.set("historyId",_10b8);this._historyEditor.set("mode","Complete");this._historyEditor.show();},_histEditorHideConnection:null,_quickHistoryCompleteHide:function(){dojo.forEach(this._histEditorHideConnection,function(_10b9){dojo.disconnect(_10b9);});dojo.forEach(this._actEditorHideConnection,function(_10ba){dojo.disconnect(_10ba);});this._histEditorHideConnection=false;this._actEditorHideConnection=false;},_completeHistoriesInQueue:function(){this._ensureHistoryEditor();this._historyEditor._doingFollowup=false;this._histEditorHideConnection=dojo.connect(this._historyEditor,"onHide",this,this._completeNextHisotryInQueue);this._completeNextHisotryInQueue();},_completeNextHisotryInQueue:function(e){if(this._histCompleteQueue.length<1){dojo.disconnect(this._histEditorHideConnection);dojo.disconnect(this._actEditorHideConnection);return;}if(this._historyEditor._doingFollowup){this._ensureEditor();if(this._actEditorHideConnection){dojo.disconnect(this._actEditorHideConnection);}this._actEditorHideConnection=dojo.connect(this._activityEditor,"onHide",this,this._followupCompleteNextHistoryInQueue);return;}var _10bb=this._histCompleteQueue.pop();var self=this;this.completeHistory(_10bb);},_followupCompleteNextHistoryInQueue:function(){this._historyEditor._doingFollowup=false;this._completeNextHisotryInQueue();},_cancelCompleteHistoryQueue:function(){this._deleteHistoryFromQuickComplete();},_deleteHistoryFromQuickComplete:function(){var _10bc=function(_10bd){var store=new _1091({resourceKind:"history",service:_1092.getSDataService("dynamic")});store.fetch({predicate:"\""+_10bd+"\"",onComplete:function(_10be){store.deleteEntity(_10be,this,null,null);},onError:function(){},scope:this});};var count=this._histCompleteQueue.length;for(var i=0;i<count;i++){_10bc(this._histCompleteQueue.pop());}},_updateHistoriesFromQuickComplete:function(_10bf){var _10c0=function(_10c1){var store=new _1091({resourceKind:"history",select:["LongNotes","Result"],service:_1092.getSDataService("dynamic")});store.fetch({predicate:"\""+_10c1+"\"",onComplete:function(_10c2){_10c2.Result=_10bf.resultCode||_10c2.Result;_10c2.LongNotes=(_10c2.LongNotes)?_10c2.LongNotes+"\n"+_10bf.note:_10bf.note;store.save({scope:this,success:function(hist){dojo.publish("/entities/history/create",hist);},failure:function(){}});},onError:function(){},scope:this});};var count=this._histCompleteQueue.length;for(var i=0;i<count;i++){_10c0(this._histCompleteQueue.pop());}},completeNewActivity:function(type,args){this._ensureEditor();if(!args||typeof args!="object"){args={};}args["Type"]=args["Type"]||type||"atAppointment";this._activityEditor.set("mode","CompleteUnscheduled");this._activityEditor.show(args);},deleteActivity:function(id,_10c3,_10c4){var _10c5=this._getSelectionContext(id,this.txtActivity,this.txtActivities);if(id){if((id.length===12&&!_10c3)||id.indexOf("ActivityId")>-1){this.deleteActivitiesInSelectionContext(_10c5,_10c4);}else{this.deleteOccurrenceOrSeriesQuery(id);}return;}if(_10c5.count<1){return;}if(_10c5.count>1){this.deleteActivitiesInSelectionContext(_10c5);}else{var _10c6=_10c5.selectionInfo.selections[0];if(_10c5.selectionInfo.hasCompositeKey){if(_10c6.entity){id=_10c6.entity["Activity"]["$key"];}}else{id=_10c6.id;}_10c3=false;if(_10c6.entity){if(_10c6.entity.hasOwnProperty("Activity")){_10c3=_10c6.entity.Activity["Recurring"]===true;}else{_10c3=_10c6.entity["Recurring"]===true;}}}if(!id){return;}if(id.length===12&&!_10c3){this.deleteActivitiesInSelectionContext(_10c5);}else{this.deleteOccurrenceOrSeriesQuery(id);}},deleteActivitiesInSelectionContext:function(_10c7,_10c8,_10c9){if(_10c7.count<1){return;}var _10ca=this.txtActionDeleteActivites;var _10cb=String.format(this.txtActionDeleteActivitiesQuestion,_10c7.count,_10c7.name);var _10cc=new _108e();var args={selectionInfo:_10c7.selectionInfo};if(_10c7.count===1){var _10cd=_10c7.selectionInfo.selections[0];if(_10cd&&_10cd.id&&_10cd.id.indexOf("ActivityId")>-1){_10cc.set("PublishMapWithId","/entity/userActivity/delete");_10cc.set("ActivityId",_10cd.id);}else{if(_10cd){_10cc.set("PublishMapWithId","/entity/activity/delete/single");_10cc.set("ActivityId",_10cd.id);}}}_10cc.set("OperationName","deleteActivities");_10cc.set("PublishMap","/entity/activity/delete");_10cc.set("ActionDescription",_10ca);_10cc.set("ActionMessage",_10cb);_10cc.set("Args",args);this._ensureProcessor();this._processor.set("Action",_10cc);this._processor.set("SelectionContext",_10c7);if(_10c8){var _10ce=dojo.connect(this._processor,"onActionComplete",this,function(_10cf){dojo.disconnect(_10ce);_10c8.call(_10c9||this,_10cf);});}this._processor.start();},declineMemberConfirmation:function(_10d0,_10d1){if(_10d0&&_10d1){var _10d2={"$name":"DeclineMember","request":{"entity":_10d0,"memberId":_10d1}};var _10d3=new Sage.SData.Client.SDataServiceOperationRequest(_1092.getSDataService("dynamic")).setResourceKind("activities").setOperationName("DeclineMember");_10d3.execute(_10d2,{success:function(ua){var _10d4=_1093.substitute("'ActivityId=${0};UserId=${1}'",[_10d0.$key,_10d1]);topic.publish("/entity/userActivity/delete",_10d4);},failure:function(){},scope:this});}},deleteOccurrenceOrSeriesQuery:function(id){if(!this._deleteOccSeriesDlg){this._deleteOccSeriesDlg=new _1090({id:"deleteOccSeriesQuery",mode:"delete"});dojo.connect(this._deleteOccSeriesDlg,"onSelectOccurrence",this,function(id){this.deleteOccurrence(id);});dojo.connect(this._deleteOccSeriesDlg,"onSelectSeries",this,function(id){this.deleteAllOccurrence(id);});}this._deleteOccSeriesDlg.set("activityId",id);this._deleteOccSeriesDlg.show();},deleteOccurrence:function(id){var _10d5=this._getSelectionContext(id,this.txtActivity,this.txtActivities);this.deleteActivitiesInSelectionContext(_10d5);},deleteAllOccurrence:function(id){var _10d6=this._getSelectionContext(id,this.txtActivity,this.txtActivities);if(_10d6.count<1){return;}var _10d7=this.txtActionDeleteActivites;var _10d8=String.format(this.txtActionDeleteActivitiesQuestion,_10d6.count,_10d6.name);var _10d9=new _108e();var args={selectionInfo:_10d6.selectionInfo};if(_10d6.count===1){var _10da=_10d6.selectionInfo.selections[0];if(_10da){_10d9.set("PublishMapWithId","/entity/activity/delete/recurrence");_10d9.set("ActivityId",_10da.id);}}_10d9.set("OperationName","deleteAllOccurrence");_10d9.set("PublishMap","/entity/activity/delete");_10d9.set("ActionDescription",_10d7);_10d9.set("ActionMessage",_10d8);_10d9.set("Args",args);this._ensureProcessor();this._processor.set("Action",_10d9);this._processor.set("SelectionContext",_10d6);this._processor.start();},snooze:function(id,_10db){var _10dc=this._getSelectionContext(id,this.txtAlarm,this.txtAlarms);var _10dd=this.txtActionSnoozeAlarm;var _10de=String.format(this.txtActionSnoozeQuestion,_10dc.count,_10dc.name,_10db.name);var _10df=new _108e();var args={selectionInfo:_10dc.selectionInfo,interval:_10db.interval,duration:_10db.duration};_10df.set("OperationName","SnoozeAlarms");_10df.set("PublishMap","/entity/UserActivity/change");_10df.set("ActionDescription",_10dd);_10df.set("ActionMessage",_10de);_10df.set("Args",args);this._ensureProcessor();this._processor.set("Action",_10df);this._processor.set("SelectionContext",_10dc);this._processor.start();},snoozeAll:function(_10e0){var id=null;var _10e1=this._getSelectionContext(id,this.txtAlarm,this.txtAlarms);_10e1.mode="ALL";var _10e2=this.txtActionSnoozeAlarm;var _10e3=String.format(this.txtActionSnoozeAllQuestion,_10e1.name,_10e0.name);var _10e4=new _108e();var args={selectionInfo:_10e1.selectionInfo,interval:_10e0.interval,duration:_10e0.duration};_10e4.set("OperationName","SnoozeAlarms");_10e4.set("PublishMap","/entity/UserActivity/change");_10e4.set("ActionDescription",_10e2);_10e4.set("ActionMessage",_10e3);_10e4.set("Args",args);this._ensureProcessor();this._processor.set("Action",_10e4);this._processor.set("SelectionContext",_10e1);this._processor.start();},dismissAlarm:function(id){var _10e5=this._getSelectionContext(id,this.txtAlarm,this.txtAlarms);var _10e6=this.txtActionDismissAlarms;var _10e7=String.format(this.txtActionDismissAlarmsQuestion,_10e5.count,_10e5.name);var _10e8=new _108e();var args={selectionInfo:_10e5.selectionInfo};_10e8.set("OperationName","DismissAlarms");_10e8.set("ActionDescription",_10e6);_10e8.set("ActionMessage",_10e7);_10e8.set("PublishMap","/entity/UserActivity/change");_10e8.set("Args",args);this._ensureProcessor();this._processor.set("Action",_10e8);this._processor.set("SelectionContext",_10e5);this._processor.start();},scheduleCompletedActivity:function(_10e9){if(_10e9){this._ensureHistoryEditor();this._historyEditor.set("activityType",_10e9);this._historyEditor.set("mode","New");this._historyEditor.set("historyId","");this.getActivityEntityContext(this._historyEditor,function(scope,_10ea){scope.show(_10ea);});}else{alert("Show Schedule Completed Dialog");}},insertNote:function(){this._ensureHistoryEditor();this._historyEditor.set("activityType","Note");this._historyEditor.set("mode","New");this._historyEditor.set("historyId","");this.getActivityEntityContext(this._historyEditor,function(scope,_10eb){scope.show(_10eb);});},editHistory:function(_10ec){if(!_10ec){_10ec=this.getSelectedId();}if(!_10ec){return;}this._ensureHistoryEditor();this._historyEditor.set("mode","Edit");this._historyEditor.set("historyId",_10ec);this._historyEditor.show();},scheduleEvent:function(args){this._ensureEventEditor();this._eventEditor.set("mode","New");this._eventEditor.set("eventId","");this._eventEditor.show(args);},editEvent:function(id){if(!id){id=this.getSelectedId();}if(!id){return;}this._ensureEventEditor();this._eventEditor.set("mode","Update");this._eventEditor.set("eventId",id);this._eventEditor.show();},deleteEvent:function(id){var _10ed=this._getSelectionContext(id,this.txtEvent,this.txtEvents);var _10ee=this.txtActionDeleteEvents;var _10ef=String.format(this.txtActionDeleteEventsQuestion,_10ed.count,_10ed.name);var args={selectionInfo:_10ed.selectionInfo};var _10f0=new _108e();if(_10ed.count===1){var _10f1=_10ed.selectionInfo.selections[0];if(_10f1){_10f0.set("PublishMapWithId","/entity/event/delete/single");_10f0.set("ActivityId",_10f1.id);}}_10f0.set("OperationName","deleteEvents");_10f0.set("PublishMap","/entity/event/delete");_10f0.set("ActionDescription",_10ee);_10f0.set("ActionMessage",_10ef);_10f0.set("Args",args);this._ensureProcessor();this._processor.set("Action",_10f0);this._processor.set("SelectionContext",_10ed);this._processor.start();},confirmActivityFor:function(actId,_10f2,_10f3,_10f4){if(actId){actId=actId.substring(0,12);}var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1092.getSDataService("dynamic"));req.setResourceKind("userNotifications");req.setQueryArg("where",_1093.substitute("ActivityId eq '${0}' and ToUser.Id eq '${1}'",[actId,_10f2]));req.setQueryArg("precedence","0");req.read({success:function(_10f5){if(_10f5["$resources"]&&_10f5["$resources"].length>0){if(_10f3){_10f3.call(_10f4||this,_10f5["$resources"][0]["$key"]);}else{this.editConfirmation(_10f5["$resources"][0]["$key"],_10f2);}}else{this.editActivity(actId,false);}},failure:function(){},scope:this});},editActivityIfConfirmed:function(_10f6,_10f7){if(!_10f6){_10f6=this._getIdFromGridSelection();_10f7=this._getRecurringFromGridSelection();}var _10f8=_1094.getClientContextByKey("userID");var _10f9=_1093.substitute("\"${0};${1}\"",[(_10f6.indexOf(";")>0)?_10f6.substring(0,12):_10f6,_10f8]);var req=new Sage.SData.Client.SDataSingleResourceRequest(_1092.getSDataService("dynamic")).setResourceKind("userActivities").setResourceSelector(_10f9);req.read({success:function(ua){if(ua.Status==="asUnconfirmed"){this.confirmActivityFor(_10f6,_10f8);}else{this.editActivity(_10f6,_10f7);}},failure:function(){this.editActivity(_10f6,_10f7);},scope:this});},editConfirmation:function(id,_10fa){if(!id){id=this.getSelectedId();}if(!id){return;}this._ensureEditor();this._activityEditor.set("mode","Confirm");this._activityEditor.set("userNotificationId",id);this._activityEditor.set("activityMemberId",_10fa);this._activityEditor.show();},acceptConfirmation:function(_10fb){var id=false;if(_10fb){if(_10fb.id){id=_10fb.id;}else{if(_10fb.notification){if(_10fb.notes){_10fb.notification.Notes=_10fb.notes;}var _10fc={"$name":"Accept","request":{"entity":_10fb.notification,"UserNotificationId":_10fb.notification["$key"]}};var _10fd=new Sage.SData.Client.SDataServiceOperationRequest(_1092.getSDataService("dynamic")).setResourceKind("usernotifications").setOperationName("accept");_10fd.execute(_10fc,{success:_10fb.success||function(){},failure:_10fb.failure||function(){},scope:_10fb.scope||this});return;}}}var _10fe=this._getSelectionContext(id,this.txtConfirmation,this.txtConfirmations);if(_10fe.count>1){var args={selectionInfo:_10fe.selectionInfo,mode:"accept",note:""};var _10ff=this.txtActionAcceptConfirmations;var _1100=String.format(this.txtActionAcceptConfirmQuestion,_10fe.count,_10fe.name);var _1101=new _108e();_1101.set("OperationName","acceptConfirmations");_1101.set("PublishMap","/entity/userNotification/change");_1101.set("ActionDescription",_10ff);_1101.set("ActionMessage",_1100);_1101.set("Args",args);this._ensureProcessor();this._processor.set("Action",_1101);this._processor.set("SelectionContext",_10fe);this._processor.start();}else{this.editConfirmation(_10fe.id);}},declineConfirmation:function(_1102){var id=false;if(_1102){if(_1102.id){id=_1102.id;}else{if(_1102.notification){if(_1102.notes){_1102.notification.Notes=_1102.notes;}var _1103={"$name":"Decline","request":{"entity":_1102.notification,"UserNotificationId":_1102.notification["$key"]}};var _1104=new Sage.SData.Client.SDataServiceOperationRequest(_1092.getSDataService("dynamic")).setResourceKind("usernotifications").setOperationName("decline");_1104.execute(_1103,{success:_1102.success||function(){},failure:_1102.failure||function(){},scope:_1102.scope||this});return;}}}var _1105=this._getSelectionContext(id,this.txtConfirmation,this.txtConfirmations);if(_1105.count>1){var args={selectionInfo:_1105.selectionInfo,mode:"decline",note:""};var _1106=this.txtDeclineConfirmations;var _1107=String.format(this.txtActionDeclineConfrimQuestion,_1105.count,_1105.name);var _1108=new _108e();_1108.set("OperationName","declineConfirmations");_1108.set("PublishMap","/entity/userNotification/change");_1108.set("ActionDescription",_1106);_1108.set("ActionMessage",_1107);_1108.set("Args",args);this._ensureProcessor();this._processor.set("Action",_1108);this._processor.set("SelectionContext",_1105);this._processor.start();}else{this.editConfirmation(_1105.id);}},deleteConfirmation:function(id){var _1109=this._getSelectionContext(id,this.txtConfirmation,this.txtConfirmations);var args={selectionInfo:_1109.selectionInfo};var _110a=this.txtActionRemoveConfirmations;var _110b=String.format(this.txtActionRemoveConfirmationsQuestion,_1109.count,_1109.name);var _110c=new _108e();_110c.set("OperationName","deleteConfirmations");_110c.set("PublishMap","/entity/userNotification/change");_110c.set("ActionDescription",_110a);_110c.set("ActionMessage",_110b);_110c.set("Args",args);this._ensureProcessor();this._processor.set("Action",_110c);this._processor.set("SelectionContext",_1109);this._processor.start();},goToActivityAssociation:function(_110d,id){if(!id){id=this.getSelectedId();}if(!id){return;}this._getActivityAssociationId(_110d,id,function(_110e){var _110f="";switch(_110e.Association){case "Account":_110f=_110e.AccountId;break;case "Contact":_110f=_110e.ContactId;break;case "Opportunity":_110f=_110e.OpportunityId;break;case "Lead":_110f=_110e.LeadId;break;case "Ticket":_110f=_110e.TicketId;break;default:}if(!_110f){return;}Sage.Link.entityDetail(_110d,_110f);});},goToLitRequest:function(id){if(!id){id=this.getSelectedId();}if(!id){return;}Sage.Link.entityDetail("LitRequest",id);},scheduleLitRequest:function(){var url="Literature.aspx?modeid=Insert";document.location.href=url;},deleteLitRequest:function(id){var _1110=this._getSelectionContext(id,this.txtLiteratureRequest,this.txtLiteratureRequests);var _1111=this.txtActionDeleteLiteratureRequests;var _1112=String.format(this.txtActionDeleteLiteratureRequestsQuestion,_1110.count,_1110.name);var _1113=new _108e();var args={selectionInfo:_1110.selectionInfo};_1113.set("Args",args);_1113.set("OperationName","deleteLitRequests");_1113.set("ActionDescription",_1111);_1113.set("ActionMessage",_1112);_1113.set("PublishMap","/entity/litRequest/change");this._ensureProcessor();this._processor.set("Action",_1113);this._processor.set("SelectionContext",_1110);this._processor.start();},getActivityEntityContext:function(scope,_1114){var cec=Sage.Services.getService("ClientEntityContext");var _1115=cec.getContext();var _1116=_1115.EntityType;var _1117=_1115.EntityId;var _1118={};if((_1117==="")||(_1117==="Insert")){if(_1114){_1114(scope,_1118);}return;}switch(_1116){case "Sage.Entity.Interfaces.IAccount":this.getAccountContext(_1115,scope,_1114);break;case "Sage.Entity.Interfaces.IContact":this.getContactContext(_1115,scope,_1114);break;case "Sage.Entity.Interfaces.IOpportunity":this.getOpportunityContext(_1115,scope,_1114);break;case "Sage.Entity.Interfaces.ILead":this.getLeadContext(_1115,scope,_1114);break;case "Sage.Entity.Interfaces.ITicket":this.getTicketContext(_1115,scope,_1114);break;case "Sage.Entity.Interfaces.IReturn":this.getReturnContext(_1115,scope,_1114);break;default:if(_1114){_1114(scope,_1118);}}},getAccountContext:function(_1119,scope,_111a){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1092.getSDataService("dynamic"));req.setResourceKind("accounts");var _111b=req.uri.pathSegments.length-1;var _111c=req.uri.getPathSegment(_111b);_111c["predicate"]="\""+_1119.EntityId+"\"";req.uri.setPathSegment(_111b+1,"Contacts");req.setQueryArg("select","NameLF,IsPrimary,WorkPhone");req.setQueryArg("orderby","IsPrimary desc");req.setQueryArg("count","1");req.read({success:function(data){var _111d={AccountId:_1119.EntityId,AccountName:_1119.Description,ContactId:"",ContactName:"",PhoneNumber:""};var _111e=data["$resources"];if(_111e.length>0){var _111f=_111e[0];_111d.ContactId=_1094.getValue(_111f,"$key");_111d.ContactName=_1094.getValue(_111f,"NameLF");_111d.PhoneNumber=_1094.getValue(_111f,"WorkPhone");}if(_111a){_111a(scope,_111d);}},failure:function(){var _1120={AccountId:_1119.EntityId,AccountName:_1119.Description,ContactId:"",ContactName:"",PhoneNumber:""};if(_111a){_111a(scope,_1120);}},scope:this});},getContactContext:function(_1121,scope,_1122){var req=new Sage.SData.Client.SDataSingleResourceRequest(_1092.getSDataService("dynamic"));req.setResourceKind("contacts");req.setResourceSelector("\""+_1121.EntityId+"\"");req.setQueryArg("select","NameLF,IsPrimary,WorkPhone,Account,AccountName");req.read({success:function(_1123){var _1124={AccountId:_1094.getValue(_1123,"Account.$key"),AccountName:_1094.getValue(_1123,"AccountName"),ContactId:_1121.EntityId,ContactName:_1094.getValue(_1123,"NameLF"),PhoneNumber:_1094.getValue(_1123,"WorkPhone")};if(_1122){_1122(scope,_1124);}},failure:function(){var _1125={AccountId:"",AccountName:"",ContactId:_1121.EntityId,ContactName:_1121.Description,PhoneNumber:""};if(_1122){_1122(scope,_1125);}},scope:this});},getOpportunityContext:function(_1126,scope,_1127){var store=new _1091({include:["Contacts","Account"],select:["Description","Contacts/IsPrimary","Contacts/Contact/NameLF","Contacts/Contact/WorkPhone","Account/Id","Account/AccountName"],resourceKind:"opportunities",service:_1092.getSDataService("dynamic")});store.fetch({predicate:"\""+_1126.EntityId+"\"",onComplete:function(opp){var _1128={AccountId:opp.Account.$key,AccountName:opp.Account.AccountName,ContactId:"",ContactName:"",OpportunityId:_1126.EntityId,OpportunityName:opp.Description,PhoneNumber:""};var _1129=opp.Contacts.$resources;var _112a=true;for(var i=0;i<_1129.length;i++){if(_1129[i].IsPrimary||_112a){_1128["ContactId"]=_1129[i].Contact.$key;_1128["ContactName"]=_1129[i].Contact.NameLF;_1128["PhoneNumber"]=_1129[i].Contact.WorkPhone||"";}_112a=false;}if(_1127){_1127(scope,_1128);}},onError:function(){var _112b={AccountId:"",AccountName:"",ContactId:"",ContactName:"",OpportunityId:_1126.EntityId,OpportunityName:_1126.Description,PhoneNumber:""};if(_1127){_1127(scope,_112b);}},scope:this});},getLeadContext:function(_112c,scope,_112d){var store=new _1091({include:[],select:["LeadFullName","Company","WorkPhone"],resourceKind:"leads",service:_1092.getSDataService("dynamic")});store.fetch({predicate:"\""+_112c.EntityId+"\"",onComplete:function(_112e){var _112f={LeadId:_112c.EntityId,LeadName:_112e.LeadFullName,AccountName:_112e.Company,PhoneNumber:_112e.WorkPhone};if(_112d){_112d(scope,_112f);}},onError:function(){var _1130={LeadId:_112c.EntityId,LeadName:_112c.Description,AccountName:"",PhoneNumber:""};if(_112d){_112d(scope,_1130);}},scope:this});},getTicketContext:function(_1131,scope,_1132){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1092.getSDataService("dynamic"));req.setResourceKind("tickets");var _1133=req.uri.pathSegments.length-1;var _1134=req.uri.getPathSegment(_1133);_1134["predicate"]="\""+_1131.EntityId+"\"";req.setQueryArg("select","Account,Account/AccountName,Contact,Contact/NameLF,Contact/WorkPhone");req.read({success:function(data){var _1135={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:_1131.EntityId,TicketNumber:_1131.Description,PhoneNumber:""};var _1136=data["$resources"];if(_1136.length>0){var _1137=_1136[0];_1135.AccountId=_1094.getValue(_1137,"Account.$key");_1135.AccountName=_1094.getValue(_1137,"Account.AccountName");_1135.ContactId=_1094.getValue(_1137,"Contact.$key");_1135.ContactName=_1094.getValue(_1137,"Contact.NameLF");_1135.PhoneNumber=_1094.getValue(_1137,"Contact.WorkPhone");}if(_1132){_1132(scope,_1135);}},failure:function(){var _1138={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:_1131.EntityId,TicketNumber:_1131.Description,PhoneNumber:""};if(_1132){_1132(scope,_1138);}},scope:this});},getReturnContext:function(_1139,scope,_113a){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1092.getSDataService("dynamic"));req.setResourceKind("returns");var _113b=req.uri.pathSegments.length-1;var _113c=req.uri.getPathSegment(_113b);_113c["predicate"]="\""+_1139.EntityId+"\"";req.setQueryArg("select","Account,Account/AccountName,ReturnedBy,ReturnedBy/NameLF,ReturnedBy/WorkPhone,Ticket,Ticket/TicketNumber");req.read({success:function(data){var _113d={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:"",TicketNumber:"",PhoneNumber:""};var _113e=data["$resources"];if(_113e.length>0){var rma=_113e[0];_113d.AccountId=_1094.getValue(rma,"Account.$key");_113d.AccountName=_1094.getValue(rma,"Account.AccountName");_113d.ContactId=_1094.getValue(rma,"ReturnedBy.$key");_113d.ContactName=_1094.getValue(rma,"ReturnedBy.NameLF");_113d.PhoneNumber=_1094.getValue(rma,"ReturnedBy.WorkPhone");_113d.TicketNumber=_1094.getValue(rma,"Ticket.TicketNumber");_113d.TicketId=_1094.getValue(rma,"Ticket.$key");}if(_113a){_113a(scope,_113d);}},failure:function(){var _113f={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:"",TicketNumber:"",PhoneNumber:""};if(_113a){_113a(scope,_113f);}},scope:this});},_getActivityAssociationId:function(_1140,_1141,_1142){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1092.getSDataService("dynamic"));req.setResourceKind("activities");var _1143=req.uri.pathSegments.length-1;var _1144=req.uri.getPathSegment(_1143);_1144["predicate"]="\""+_1141+"\"";req.setQueryArg("select","AccountId,ContactId,OpportunityId,TicketId,LeadId");req.read({success:function(data){var _1145={Association:_1140,ActivityId:_1141,AccountId:"",ContactId:"",OpportunityId:"",TicketId:"",LeadId:""};var acts=data["$resources"];if(acts.length>0){var act=acts[0];_1145.AccountId=_1094.getValue(act,"AccountId");_1145.ContactId=_1094.getValue(act,"ContactId");_1145.OpportunityId=_1094.getValue(act,"OpportunityId");_1145.TicketId=_1094.getValue(act,"TicketId");_1145.LeadId=_1094.getValue(act,"LeadId");}if(_1142){_1142(_1145);}},failure:function(){var _1146={Association:_1140,ActivityId:_1141,AccountId:"",ContactId:"",OpportunityId:"",TicketId:"",LeadId:""};if(_1142){_1142(_1146);}},scope:this});},getActivityFreeBusyFor:function(scope,_1147,_1148,_1149){var self=this;this.getResourceActivitiesFor(self,_1147,function(_114a){self.getUserActivitiesFor(self,_1147,function(_114b){var _114c=self._buildFreeBusyData(_114a,_114b);if(_1148){_1148.call(scope,_114c);}},function(_114d){if(_1149){_1149.call(scope,data);}});},function(data){if(_1149){_1149.call(scope,data);}});},getResourceActivitiesFor:function(scope,_114e,_114f,_1150){var _1151=["Timeless","Type","StartDate","Duration","Description","Resources/Resource"];var _1152=["$descriptors"];var _1153="activities";var _1154=_1092.getSDataService("system");var _1155=_1094.Convert.toIsoStringFromDate(_114e.startDate);var _1156=_1094.Convert.toIsoStringFromDate(_114e.endDate);var self=this;var where="(Resources.ResourceId in ("+_114e.quotedIds.join(",")+"))"+dojo.string.substitute("and (Timeless ne true) and (StartDate between @${0}@ and @${1}@)",[_1155,_1156]);var _1157=new Sage.SData.Client.SDataResourceCollectionRequest(_1154);if(_114e.select){_1151=_114e.select;}_1157.setResourceKind(_1153);_1157.setQueryArg("select",_1151.join(","));_1157.setQueryArg("where",where);_1157.setQueryArg("include",_1152.join(","));_1157.uri.queryArgs["_expandRecurrences"]=_114e.expandRecurrences;_1157.read({success:function(data){if(_114f){var _1158=self._processResourceActivityData(data);_114f.call(scope,_1158);}},failure:dojo.hitch(scope,_1150)});},getUserActivitiesFor:function(scope,_1159,_115a,_115b){var _115c=["Timeless","Type","StartDate","Duration","Description","Leader","UserActivities/User","UserActivities/Status"];var _115d=["$descriptors"];var _115e="activities";var _115f=_1092.getSDataService("system");var _1160=_1094.Convert.toIsoStringFromDate(_1159.startDate);var _1161=_1094.Convert.toIsoStringFromDate(_1159.endDate);var self=this;var where="(UserActivities.UserId in ("+_1159.quotedIds.join(",")+")) and (Type ne 'atLiterature') and (UserActivities.Status ne 'asDeclned')"+dojo.string.substitute("and (StartDate between @${0}@ and @${1}@)",[_1160,_1161]);var _1162=new Sage.SData.Client.SDataResourceCollectionRequest(_115f);if(_1159.timelessOnly){where=where+" and (Timeless eq true)";}else{if(!_1159.includeTimless){where=where+" and (Timeless ne true)";}}if(_1159.select){_115c=_1159.select;}_1162.setResourceKind(_115e);_1162.setQueryArg("select",_115c.join(","));_1162.setQueryArg("where",where);_1162.setQueryArg("include",_115d.join(","));_1162.uri.queryArgs["_expandRecurrences"]=_1159.expandRecurrences;_1162.read({success:function(data){var _1163=self._processUserActivityData(data);if(_115a){_115a.call(scope,_1163);}},failure:dojo.hitch(scope,_115b)});},_processUserActivityData:function(_1164){var _1165=[];_1165["$resources"]=[];var data=_1164["$resources"];if(data){var cnt=data.length;for(var i=0;i<cnt;i++){var _1166=false;var _1167=data[i]["$key"];if(data[i].UserActivities){var _1168=data[i].UserActivities.$resources;var ln=_1168.length;for(var j=0;j<ln;j++){var _1169=data[i].UserActivities.$resources[j].User.$key;var _116a=_1169+":"+_1167;_1166=_1165[_116a];if(!_1166){var _116b={$Key:_116a,UserId:data[i].UserActivities.$resources[j].User.$key,ActivityId:_1167,UserActivity:data[i].UserActivities.$resources[j],Activity:data[i]};_1165[_116a]=_116b;_1165[_116a]=_116a;_1165["$resources"].push(_116b);continue;}}}else{var uId=data[i].Leader.$key;var _116a=uId+":"+_1167;data[i].UserActivities=[];data[i].UserActivities.$resources=[];var _116c={};_116c.$key=uId;_116c.User={$key:uId};data[i].UserActivities.$resources.push(_116c);var _116b={$key:_116a,UserId:data[i].Leader.$key,ActivityId:_1167,UserActivity:data[i].UserActivities.$resources,Activity:data[i]};_1166=_1165[_116a];if(_1166){_1165[_116a]=_116a;_1165["$resources"].push(_116b);}}}}var _116d=[];_116d["$resources"]=_1165["$resources"];return _116d;},_processResourceActivityData:function(_116e){var _116f=[];_116f["$resources"]=[];var data=_116e["$resources"];if(data){var cnt=data.length;for(var i=0;i<cnt;i++){var _1170=false;var _1171=data[i]["$key"];if(data[i].Resources){var _1172=data[i].Resources.$resources;var ln=_1172.length;for(var j=0;j<ln;j++){var _1173=data[i].Resources.$resources[j].Resource.$key;var _1174=_1173+":"+_1171;_1170=_116f[_1174];if(!_1170){var _1175={$Key:_1174,ResourceId:_1173,ActivityId:_1171,ResourceActivity:data[i].Resources.$resources[j],Activity:data[i]};_116f[_1174]=_1175;_116f[_1174]=_1174;_116f["$resources"].push(_1175);continue;}}}}}var _1176=[];_1176["$resources"]=_116f["$resources"];return _1176;},_buildFreeBusyData:function(_1177,_1178){var rData=_1177["$resources"];var uData=_1178["$resources"];var vData=[];vData["$resources"]=[];for(var i=0;i<uData.length;i++){var _1179={id:uData[i].$key,activityId:uData[i].ActivityId,itemId:uData[i].UserId,type:uData[i].Activity.Type,startDate:uData[i].Activity.StartDate,duration:uData[i].Activity.Duration,timless:uData[i].Activity.Timeless,description:uData[i].Activity.Description};vData["$resources"].push(_1179);}for(var i=0;i<rData.length;i++){var _1179={id:rData[i].$key,activityId:rData[i].ActivityId,itemId:rData[i].ResourceId,type:rData[i].Activity.Type,startDate:rData[i].Activity.StartDate,duration:rData[i].Activity.Duration,timless:rData[i].Activity.Timeless,description:rData[i].Activity.Description};vData["$resources"].push(_1179);}return vData;},getDefaultActivityManagerTabId:function(){if(!this._defaultActivitManagerTabId){var _117a=Sage.Services.getService("UserOptions");var self=this;if(_117a){_117a.get("DefaultView","ActivityAlarm",function(data){self._defaultActivitManagerTabId=self.getTabIdFromCode(data.value);},null,this,false);}}return this._defaultActivitManagerTabId;},setDefaultActivityManagerTabId:function(tabId){this._defaultActivitManagerTabId=tabId;},getTabIdFromCode:function(code){var tabId="activities";switch(code){case "0":tabId="activities";break;case "1":tabId="allopen";break;case "2":tabId="pastdue";break;case "3":tabId="alarms";break;case "4":tabId="events";break;case "5":tabId="confirmations";break;case "6":tabId="literature";break;}return tabId;},getSelectedId:function(){var _117b=this.getSelectionInfo();var id="";if(_117b){if(_117b.hasCompositeKey){var _117c=_117b.selections[0].entity;return _117c["Activity"]["$key"];}if(_117b.selections.length==1){id=_117b.selections[0].id;}else{id=_117b.selections[0].id;}}return id;},getSelectedItem:function(){var _117d=this.getSelectionInfo();var _117e={id:false,hasCompositeKey:false,entity:false};if(_117d){_117e.hasCompositeKey=_117d.hasCompositeKey;_117e.entity=_117d.entity;if(_117d.selections.length==1){_117e.id=_117d.selections[0].id;_117e.entity=_117d.selections[0].entity;}else{_117e.id=_117d.selections[0].id;_117e.entity=_117d.selections[0].entity;}}return _117e;},getSelections:function(){var _117f=this.getSelectionInfo();var _1180=null;if(_117f){_1180=_117f.selections;}return _1180;},prepareSelections:function(){return this.getSelectionInfo();},getSelectionInfo:function(){var _1181=false;try{var panel=dijit.byId("list");if(panel){_1181=panel.getSelectionInfo(true);}}catch(e){_1089.alert(this.txtErrorActionMsg||"error getting selectionInfo");}return _1181;},getTotalSelectionCount:function(){var count=0;try{var panel=dijit.byId("list");if(panel){count=panel.getTotalSelectionCount();}}catch(e){}return count;},verifySelection:function(_1182){if(_1182!=null){return (_1182.selectionCount!=0);}return false;},verifySingleSelection:function(_1183){if(_1183!=null){return (_1183.selectionCount===1);}return false;},setSelectionCount:function(){try{var panel=dijit.byId("list");if(panel){$("#selectionCount").text(panel.getTotalSelectionCount());}}catch(e){}},refreshList:function(tabId){try{var panel=dijit.byId("list");if(panel){var _1184=Sage.Services.getService("ClientGroupContext");if(_1184){var ctx=_1184.getContext();if(tabId===ctx.CurrentGroupID){panel.refreshView(tabId);}}}}catch(e){}},_getSelectionContext:function(id,_1185,_1186){var _1187={id:null,selectionInfo:null,count:0,mode:"select",name:null};if(!id){_1187.selectionInfo=this.getSelectionInfo();_1187.count=_1187.selectionInfo.selectionCount;if(_1187.count===1){_1187.id=_1187.selectionInfo.selectedIds[0];}}else{var _1188=[];var _1189=[];_1188.push(id);_1189.push({rn:0,id:id});var _118a={key:"",mode:"singleSelect",selectionCount:1,recordCount:1,sortDirection:"",sortField:"",keyField:"",hasCompositeKey:id.indexOf("Activity")>-1?true:false,ranges:[],selections:_1189,selectedIds:_1188};_1187.selectionInfo=_118a;_1187.id=id;_1187.count=1;}_1187.name=(_1187.count>1)?_1186:_1185;return _1187;},getActivityService:function(){var _118b=_1092.getSDataService("dynamic");return _118b;}});if(!Sage.Services.hasService("ActivityService")){Sage.Services.addService("ActivityService",new _1097());}return _1097;});},"Sage/UI/JsonPrintDetailPane":function(){define("Sage/UI/JsonPrintDetailPane",["Sage/UI/_DetailPane","Sage/_Templated","dojo/_base/declare"],function(_118c,_118d,_118e){return _118e("Sage.UI.JsonPrintDetailPane",[_118c,_118d],{widgetsInTemplate:true,contentNode:null,attributeMap:{"content":{node:"contentNode",type:"innerHTML"}},widgetTemplate:new Simplate(["<div class=\"json-print-detail-pane\">","<pre dojoAttachPoint=\"contentNode\"></pre>","</div>"]),_onSelected:function(index,row,grid){this.set("content",dojo.toJson(row,true));}});});},"Sage/UI/Alarms/AlarmButton":function(){define("Sage/UI/Alarms/AlarmButton",["dojo/_base/declare","Sage/_Templated","dijit/_Widget","Sage/Utility","Sage/Utility/Activity","dojo/string","dojox/storage/LocalStorageProvider","dojo/date","dijit/form/ComboButton","dojo/_base/event","dojo/_base/lang","dojo/dom-class","Sage/Data/SDataServiceRegistry","Sage/UI/Alarms/AlarmPopup","Sage/UI/ImageButton","Sage/Services/UserOptions"],function(_118f,_1190,_1191,_1192,_1193,_1194,_1195,ddate,_1196,event,lang,_1197,_1198){var _1199=_118f("Sage.UI.Alarms.AlarmButton",[_1191,_1190],{pastDueToolTipFmt:" You have ${0} activities that are past due.",pastDueButtonIconClass:"icon_alertIcon_16x16",widgetsInTemplate:true,options:{displayPastDueInToolbar:true,displayAlertsInToolbar:true,promptAlerts:true,includeAlarms:true,includeConfirmations:true,defaultSnooze:"5"},pollInterval:1,_localStore:null,_alertCountKey:"AlertsCount",_pastDueCountKey:"PastDueCount",_started:false,_pastDueVisible:false,_alertBtnVisible:false,widgetTemplate:new Simplate(["<span class=\"alarm-button-container\">","<button data-dojo-type=\"Sage.UI.ImageButton\" id=\"pastDueButton\" imageClass=\"{%= $.pastDueButtonIconClass %}\" class=\"past-due-button display-none\" data-dojo-attach-point=\"_pastDueBtn\" data-dojo-attach-event=\"onClick:_pastDueClick\" >","</button>","<span id=\"alertButton\" data-dojo-attach-point=\"_alertButton\" class=\"alarm-button-container alarm-button display-none\">","<button data-dojo-type=\"dijit.form.ComboButton\" data-dojo-attach-point=\"_button\" data-dojo-attach-event=\"onClick:_cboClick\" class=\"\" >","<div data-dojo-type=\"Sage.UI.Alarms.AlarmPopup\" id=\"alarmPopup\" data-dojo-attach-point=\"_popup\" data-dojo-attach-event=\"onClose:_popupClosed\"></div>","</button>","</span>","</span>"]),_setPollIntervalAttr:function(val){this.pollInterval=val;},_getPollIntervalAttr:function(){return this.pollInterval;},startup:function(){if(this._started){return;}this.inherited(arguments);this.connect(this._popup,"onAlertChanged",this._alarmChanged);var _119a=Sage.Services.getService("UserOptions");if(_119a){_119a.getByCategory("ActivityAlarm",this._receivedOptions,this);}this._localStore=new _1195();this._localStore.initialize();if(this._button.valueNode){this.connect(this._button.valueNode,"click",function(e){event.stop(e);});}},_receivedOptions:function(_119b){this._sortOptions(_119b["$resources"]||_119b);this._popup.set("options",this.options);if((this.options.displayPastDueInToolbar||this.options.displayAlertsInToolbar)&&(this.pollInterval>0)){var self=this;window.setTimeout(function(){self._poll();},15000);this._initializeButton();}this._started=true;},_sortOptions:function(_119c){var _119d=function(_119e){return ((_119e==="T")||(_119e==="Y")||(_119e==="1"));};for(var i=0;i<_119c.length;i++){var _119f=_119c[i];switch(_119f.name){case "DisplayPastDueInToolbar":this.options.displayPastDueInToolbar=_119d(_119f.value);break;case "DisplayAlertsInToolbar":this.options.displayAlertsInToolbar=_119d(_119f.value);break;case "PromptAlerts":this.options.promptAlerts=_119d(_119f.value);break;case "DisplayAlertAlarms":this.options.includeAlarms=_119d(_119f.value);break;case "DisplayAlertConfirmations":this.options.includeConfirmations=_119d(_119f.value);break;case "DefaultSnooze":this.options.defaultSnooze=_119f.value;break;}}if(!this.options.includeAlarms&&!this.options.includeConfirmations){this.options.promptAlerts=false;}},_poll:function(){var req=new Sage.SData.Client.SDataNamedQueryRequest(_1198.getSDataService("mashups")).setApplicationName("$app").setResourceKind("mashups").setQueryName("execute").setQueryArg("_resultName","GetCounts").setQueryArg("_beforeDate",_1192.Convert.toIsoStringFromDate(new Date())).setQueryArg("_timelessBeforeDate",_1193.formatTimelessEndDate(new Date(),"day",-1)).setQueryArg("_userId",_1192.getClientContextByKey("userID"));req.uri.setCollectionPredicate("'RemindersAndAlarms'");req.read({success:lang.hitch(this,this._onReceiveCounts),failure:lang.hitch(this,this._countsFailed)});},_onReceiveCounts:function(data){var _11a0=data["$resources"];if(_11a0&&_11a0.length>0){var _11a1=_11a0[0];var _11a2=(this.options.includeAlarms)?_11a1["ringingAlarms"]:0;var confs=(this.options.includeConfirmations)?_11a1["notifications"]:0;var _11a3=_11a1["pastDue"];this._handlePastDueCount(_11a3);this._handleAlertCount(_11a2,confs);}var self=this;window.setTimeout(function(){self._poll();},this.pollInterval*60000);},_countsFailed:function(req){},_handlePastDueCount:function(_11a4){if(_11a4>0&&this.options.displayPastDueInToolbar){this._showPastDue();var _11a5=this._getFromSessionStorage(this._pastDueCountKey)||0;if(_11a4!=_11a5){this._pastDueBtn.set("title",_1194.substitute(this.pastDueToolTipFmt,[_11a4]));this._pastDueBtn.set("label",_11a4);this._saveToSessionStorage(this._pastDueCountKey,_11a4);}}else{this._hidePastDue();}},_showPastDue:function(){if(!this._pastDueVisible){_1197.remove(this._pastDueBtn.domNode,"display-none");this._pastDueVisible=true;}},_hidePastDue:function(){if(this._pastDueVisible){_1197.add(this._pastDueBtn.domNode,"display-none");this._pastDueVisible=false;this._pastDueBtn.set("title","");this._pastDueBtn.set("label","");}},_pastDueClick:function(){Sage.Link.toActivityListView("pastdue");},_initializeButton:function(){var _11a6=this._getFromSessionStorage(this._pastDueCountKey)||0;if(this.options.displayPastDueInToolbar&&(_11a6)>0){this._showPastDue();this._pastDueBtn.set("title",_1194.substitute(this.pastDueToolTipFmt,[_11a6]));this._pastDueBtn.set("label",_11a6);}var _11a7=this._getFromSessionStorage(this._alertCountKey)||0;if(this.options.displayAlertsInToolbar&&(_11a7)>0){this._button.set("label"," "+_11a7+" ");this._showAlertButton();}},_handleAlertCount:function(_11a8,confs){if(this.options.displayAlertsInToolbar){if(_11a8>0||confs>0){var _11a9=false;var _11aa=this._getFromSessionStorage(this._alertCountKey)||0;if((_11aa*1)!==(_11a8+confs)){_11a9=true;}_11aa=_11a8+confs;this._saveToSessionStorage(this._alertCountKey,_11aa);this._button.set("label"," "+_11aa+" ");this._showAlertButton();this._checkShowPopup(_11a9,_11aa);}else{this._hideAlertButton();}}},_showAlertButton:function(){if(!this._alertBtnVisible){_1197.remove(this._alertButton,"display-none");this._alertBtnVisible=true;}},_hideAlertButton:function(){if(this._alertBtnVisible){_1197.add(this._alertButton,"display-none");this._alertBtnVisible=false;}},_checkShowPopup:function(_11ab,_11ac){if(!this.options.promptAlerts){return;}if(_11ab){this._popup._dataRequested=false;}if(!this._popup.isOpen&&_11ac>0&&_11ab){this._button.openDropDown();}},_cboClick:function(e){(this._popup.isOpen)?this._button.closeDropDown():this._button.openDropDown();return false;},_popupClosed:function(){},_alarmChanged:function(){var items=this._popup.getAlertCount();if(items===0){dijit.popup.hide(this._popup);this._hideAlertButton();}else{this._showAlertButton();}this._button.set("label"," "+items+" ");this._saveToSessionStorage(this._alertCountKey,items);},_saveToSessionStorage:function(key,value){sessionStorage.setItem(key,value);},_getFromSessionStorage:function(key){return sessionStorage.getItem(key);}});return _1199;});},"Sage/UI/Controls/_DialogHelpIconMixin":function(){define("Sage/UI/Controls/_DialogHelpIconMixin",["dojo/_base/declare","dojo/dom-construct","dojo/dom-attr","dojo/i18n!./nls/_DialogHelpIconMixin"],function(_11ad,_11ae,_11af,nls){return _11ad("Sage.UI.Controls._DialogHelpIconMixin",null,{helpTopic:"",createHelpIcon:function(url,_11b0){if(!url||this.helpIcon){_11ae.destroy(this.helpIcon);}var link=_11ae.create("a",{href:url,"target":_11b0||"help","class":"dialogHelpIcon"},this.titleBar,"first"),node=_11ae.create("div",{"class":"Global_Images icon16x16 icon_Help_16x16",title:nls.helpTooltip},link);this.helpIcon=link;},createHelpIconByTopic:function(topic,_11b1){if(!topic){topic=this.helpTopic;}else{this.helpTopic=topic;}var _11b2=Sage.Link.getHelpUrlTarget(),url=Sage.Link.getHelpUrl(topic,_11b1);this.createHelpIcon(url,_11b2);},destroy:function(){_11ae.destroy(this.helpIcon);this.inherited(arguments);},_setHelpTopicAttr:function(topic){this.helpTopic=topic;if(this.helpIcon){var url=Sage.Link.getHelpUrl(topic);_11af.set(this.helpIcon,"href",url);}else{this.createHelpIconByTopic(topic);}},_getHelpTopicAttr:function(){return this.helpTopic;}});});},"Sage/TaskPane/TaskPaneContent":function(){define("Sage/TaskPane/TaskPaneContent",["dijit/_Widget","Sage/_Templated","Sage/TaskPane/TaskPaneItem","dojo/_base/declare"],function(_11b3,_11b4,_11b5,_11b6){var _11b7=_11b6("Sage.TaskPane.TaskPaneContent",[_11b3,_11b4],{widgetsInTemplate:true,widgetTemplate:new Simplate(["<div dojoAttachPoint=\"taskletContainerNode\" class=\"task-pane-item-common-tasklist\">","{% for (var i = 0; i < $.taskItems.length; i++) { ","var task = $.taskItems[i]; %}","<div data-dojo-type=\"Sage.TaskPane.TaskPaneItem\" linkText=\"{%= task.displayName %}\" securedAction=\"{%= task.securedAction %}\" action=\"javascript: {%= task.clientAction %}\"></div>","<br />","{% } %}","</div>"])});return _11b7;});},"Sage/UI/Alarms/AlarmCountDown":function(){define("Sage/UI/Alarms/AlarmCountDown",["Sage/_Templated","dijit/_Widget","Sage/Utility","dojo/date","dojo/html","dojo/i18n","dojo/i18n!./nls/AlarmCountDown","dojo/_base/declare"],function(_11b8,_11b9,_11ba,_11bb,_11bc,i18n,_11bd,_11be){var _11bf=_11be("Sage.UI.Alarms.AlarmCountDown",[_11b9,_11b8],{widgetsInTemplate:false,startDate:"",_isOverdue:false,_timer:false,widgetTemplate:new Simplate(["<div>","<div dojoAttachPoint=\"_startsIn\"></div>","<div>","<span dojoAttachPoint=\"_countDownAmount\" class=\"alarm-countdown\"></span>","<span dojoAttachPoint=\"_countDownTimeFrame\"></span>","</div>","<div dojoAttachPoint=\"_countDown2\">","<span dojoAttachPoint=\"_countDown2Amount\" class=\"alarm-countdown\"></span>","<span dojoAttachPoint=\"_countDown2TimeFrame\"></span>","</div>","</div>"]),constructor:function(){dojo.mixin(this,_11bd);},postCreate:function(){this.inherited(arguments);var c=_11ba.Convert;if(c.isDateString(this.startDate)){this.startDate=c.toDateFromString(this.startDate);}if(!this.startDate){return;}this._calculate();},_calculate:function(){var n=new Date();var _11c0,_11c1;if(_11bb.difference(this.startDate,n,"minute")<0){_11c0=n;_11c1=this.startDate;this._isOverdue=false;}else{_11c0=this.startDate;_11c1=n;this._isOverdue=true;}var diff;if(_11c0.getFullYear()===_11c1.getFullYear()&&_11c0.getMonth()===_11c1.getMonth()&&_11c0.getDate()===_11c1.getDate()){diff=_11bb.difference(_11c0,_11c1,"minute");if(diff<61){this._setUI(diff,(diff>1)?this.minutesText:this.minuteText);}else{var _11c2=diff%60;var hours=Math.floor(diff/60);this._setUI(hours,(hours>1)?this.hoursText:this.hourText,_11c2,(_11c2>1)?this.minutesText:this.minuteText);}var self=this;window.setTimeout(function(){self._update();},60000);return;}diff=_11bb.difference(_11c0,_11c1,"day");if(diff<31){this._setUI(diff,(diff>1)?this.daysText:this.dayText,false,false);return;}diff=_11bb.difference(_11c0,_11c1,"month");if(diff<13){this._setUI(diff,(diff>1)?this.monthsText:this.monthText,false,false);return;}diff=_11bb.difference(_11c0,_11c1,"year");this._setUI(diff,(diff>1)?this.yearsText:this.yearText);},_setUI:function(amt,_11c3,amt2,_11c4){if(amt!==0){_11bc.set(this._startsIn,(this._isOverdue)?this.overduebyText:this.startsInText);_11bc.set(this._countDownAmount," "+amt+" ");if(amt2){_11bc.set(this._countDown2Amount," "+amt2+" ");dojo.removeClass(this._countDown2,"display-none");}else{dojo.addClass(this._countDown2,"display-none");}}else{_11bc.set(this._startsIn,"");_11bc.set(this._countDownAmount,"");_11c3=this.startsNowText;}_11bc.set(this._countDownTimeFrame,_11c3);if(_11c4){_11bc.set(this._countDown2TimeFrame,_11c4);}if(this._isOverdue){dojo.addClass(this.domNode,"overdue-alarm");}else{dojo.removeClass(this.domNode,"overdue-alarm");}},_update:function(){this._calculate();},destroy:function(){if(this._timer){window.clearTimeout(this._timer);}this.inherited(arguments);}});return _11bf;});},"Sage/main":function(){define("Sage/main",["Sage/_ActionMixin","Sage/Utility","Sage/LanguageList","Sage/Link","Sage/Array","Sage/_ConfigurationProvider","Sage/_Templated","Sage/Format","Sage/Data/main","Sage/Store/main","Sage/Groups/main","Sage/Layout/main","Sage/MailMerge/main","Sage/MainView/main","Sage/QuickForms/Design/main","Sage/Services/main","Sage/TaskPane/main","Sage/UI/main","Sage/Utility/main","Sage/Workspaces/main","dojo/i18n!dijit/nls/common"],function(){});},"Sage/QuickForms/Design/DataSourcePanel":function(){define("Sage/QuickForms/Design/DataSourcePanel",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/string","dojo/dom","dojo/on","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/DeferredList","dijit/_Widget","Sage/Services/_ServiceMixin","Sage/_EventMapMixin","Sage/_Templated","dojo/dnd/Source","dojo/dnd/Manager","dojo/i18n!./nls/DataSourcePanel"],function(_11c5,array,lang,_11c6,_11c7,dom,on,_11c8,_11c9,_11ca,_11cb,_11cc,_11cd,_11ce,_11cf,_11d0,_11d1,_11d2){var _11d3=_11c5("Sage.QuickForms.Design.DataSourcePanelDnDSource",[_11d0],{avatarTemplate:new Simplate(["<div class=\"design-property\" data-property-type=\"{%: $.data.dataTypeId %}\">","<div class=\"design-property-icon\"></div>","<span>{%: $.propertyPath %}</span>","</div>"]),owner:null,accept:["none"],constructor:function(){this.creator=true;lang.mixin(this,_11d2);var _11d4=dojo.byId("TaskPane_taskPaneHelp");if(_11d4){_11d4.target="";_11d4.href="javascript:Sage.Utility.openHelp(\"Adding_Data_Field\");";}},checkAcceptance:function(_11d5,nodes){if(_11d5==this){return false;}return this.inherited(arguments);},onDropInternal:function(_11d6,nodes,copy){},onDropExternal:function(_11d7,nodes,copy){},onDndStart:function(_11d8,nodes,copy){this.inherited(arguments);},onDndCancel:function(){this.inherited(arguments);},getItem:function(key){var value=this.inherited(arguments),node=dom.byId(key),path=_11c8.get(node,"data-property"),_11d9=node&&this.owner._context[path];return lang.mixin({context:_11d9},value);},_normalizedCreator:function(data,hint){var _11da=this.owner._context[data],_11db=_11ca.toDom(this.avatarTemplate.apply(_11da,this)),_11dc=_11ca.create("div",{"class":"design-surface-dnd-avatar"});_11ca.place(_11db,_11dc);return {node:_11dc};}});var _11dd=_11c5("Sage.QuickForms.Design.DataSourcePanel",[_11cc,_11cd,_11ce,_11cf],{events:{"li:click":true},serviceMap:{"dataService":{type:"sdata",name:"metadata"}},widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"design-property-panel\">","<div class=\"design-property-panel-search\">","<div>","<input type=\"text\" data-dojo-attach-point=\"queryNode\" />","</div>","<input type=\"button\" />","</div>","<div class=\"design-property-panel-tree\" data-dojo-attach-point=\"treeNode\">","</div>","</div>"]),containerTemplate:new Simplate(["<ul></ul>"]),propertyTemplate:new Simplate(["<li class=\"design-property\" data-property=\"{%: $.propertyPath %}\" data-property-category=\"{%: $.type %}\" data-property-type=\"{%: $.data.dataTypeId %}\" data-action=\"_toggle\">","<div class=\"design-property-expando\"></div>","<div class=\"design-property-icon\"></div>","<span>{%: $.displayName %}</span>","</li>"]),loadingTemplate:new Simplate(["<ul class=\"design-property-loading\"><li>{%: $.loadingText %}</li></ul>"]),_context:null,_designGroup:null,_designGroupTopics:null,designGroup:"default",queryNode:null,treeNode:null,sortProperty:"propertyName",loadingText:"Loading...",_getDesignGroupAttr:function(){return this._designGroup;},_setDesignGroupAttr:function(value){if(this._designGroupTopics){array.forEach(this._designGroupTopics,function(topic){this.unsubscribe(topic);},this);}this._designGroup=value;this._designGroupTopics=[this.subscribe(_11c7.substitute("/quickforms/design/${0}/clear",[this._designGroup]),this._onFormCleared),this.subscribe(_11c7.substitute("/quickforms/design/${0}/load",[this._designGroup]),this._onFormLoaded)];},constructor:function(){this._context={};this._sources=[];},uninitialize:function(){if(this._sources){array.forEach(this._sources,function(_11de){_11de.destroy();});}this._sources=[];},clear:function(){_11ca.empty(this.treeNode);this._context={};},_onFormCleared:function(){this.clear();},_onFormLoaded:function(entry){var _11df=entry["entity"]["EntityTypeName"].substr(1);this._load(_11df,this.treeNode);},_toggle:function(evt,node){var path=_11c8.get(node,"data-property"),_11e0=this._context[path];if(_11e0&&_11e0.data["entityName"]){if(_11e0["loaded"]){_11c9.toggle(node,"design-property-expanded");}else{_11c9.add(node,"design-property-expanded");_11e0["loaded"]=true;this._load(_11e0.data["entityName"],node);}}},_load:function(_11e1,node){var _11e2=_11ca.place(this.loadingTemplate.apply(this,this),node);var wait=[],_11e3;_11e3=new _11c6();new Sage.SData.Client.SDataSingleResourceRequest(this.dataService).setResourceKind("entities").setResourceSelector("\""+_11e1+"\"").setQueryArg("select","properties/*").read({success:lang.hitch(this,this._onPropertyRequestSuccess,_11e3,_11e1),failure:lang.hitch(this,this._onRequestFailure,_11e3)});wait.push(_11e3);_11e3=new _11c6();new Sage.SData.Client.SDataResourceCollectionRequest(this.dataService).setResourceKind("relationships").setQueryArg("where",_11c7.substitute("(parentEntity.name eq \"${0}\" and cardinality eq \"M:1\") or (childEntity.name eq \"${0}\" and cardinality eq \"1:M\")",[_11e1])).read({success:lang.hitch(this,this._onRelationshipRequestSuccess,_11e3,_11e1),failure:lang.hitch(this,this._onRequestFailure,_11e3)});wait.push(_11e3);_11e3=new _11c6();new Sage.SData.Client.SDataResourceCollectionRequest(this.dataService).setResourceKind("entities").setQueryArg("where",_11c7.substitute("extendedEntity.name eq \"${0}\"",[_11e1])).setQueryArg("select","extendedEntityPropertyName").read({success:lang.hitch(this,this._onExtendedRequestSuccess,_11e3,_11e1),failure:lang.hitch(this,this._onRequestFailure,_11e3)});wait.push(_11e3);new _11cb(wait,false,true,true).then(lang.hitch(this,this._process,node,_11e2),lang.hitch(this,this._error,node,_11e2));},_onPropertyRequestSuccess:function(_11e4,_11e5,feed){_11e4.resolve(feed["properties"]["$resources"]);},_onExtendedRequestSuccess:function(_11e6,_11e7,feed){var _11e8=array.map(feed["$resources"],function(entry){return {displayName:entry["$descriptor"],propertyName:entry["$key"],entityName:entry["$key"]};});_11e6.resolve(_11e8);},_onRelationshipRequestSuccess:function(_11e9,_11ea,feed){var _11eb=[],_11ec=feed["$resources"];array.forEach(_11ec,function(entry){if(_11ea==entry["parentEntity"]["$key"]&&entry["parentProperty"]["isIncluded"]){_11eb.push({displayName:entry["parentProperty"]["displayName"],propertyName:entry["parentProperty"]["propertyName"],propertyId:entry["parentProperty"]["id"],entityName:entry["childEntity"]["$key"],includes:array.map(entry["columns"]["$resources"],function(_11ed){return _11ed["parentPropertyId"];})});}else{if(_11ea==entry["childEntity"]["$key"]&&entry["childProperty"]["isIncluded"]){_11eb.push({displayName:entry["childProperty"]["displayName"],propertyName:entry["childProperty"]["propertyName"],propertyId:entry["childProperty"]["id"],entityName:entry["parentEntity"]["$key"],includes:array.map(entry["columns"]["$resources"],function(_11ee){return _11ee["childPropertyId"];})});}}},this);_11e9.resolve(_11eb);},_onRequestFailure:function(_11ef,_11f0){_11ef.reject(_11f0);},_error:function(node,_11f1,error){_11ca.destroy(_11f1);},_process:function(node,_11f2,_11f3){var _11f4=_11c8.get(node,"data-property"),_11f5={},_11f6=[],_11f7=[],_11f8;array.forEach(_11f3[1][1],function(_11f9){array.forEach(_11f9["includes"],function(id){_11f5[id]=true;});_11f6.push({propertyPath:_11f4?_11f4+"."+_11f9["propertyName"]:_11f9["propertyName"],propertyName:_11f9["propertyName"],displayName:_11f9["displayName"]||_11f9["propertyName"],type:"relationship",data:_11f9});});array.forEach(_11f3[0][1],function(_11fa){if(_11f5[_11fa["id"]]){return;}if(_11fa["isIncluded"]){_11f7.push({propertyPath:_11f4?_11f4+"."+_11fa["propertyName"]:_11fa["propertyName"],propertyName:_11fa["propertyName"],displayName:_11fa["displayName"]||_11fa["propertyName"],type:"standard",data:_11fa,dataTypeData:_11fa["dataTypeData"]?dojo.fromJson(_11fa["dataTypeData"]):{}});}});_11f8=array.map(_11f3[2][1],function(_11fb){return {propertyPath:_11f4?_11f4+"."+_11fb["propertyName"]:_11fb["propertyName"],propertyName:_11fb["propertyName"],displayName:_11fb["displayName"]||_11fb["propertyName"],type:"extended",data:_11fb};});var all=_11f7.concat(_11f6,_11f8),_11fc=this.sortProperty;all.sort(function(a,b){var nameA=a[_11fc],nameB=b[_11fc];return (nameA<nameB)?-1:(nameA>nameB)?1:0;});_11ca.destroy(_11f2);this.render(node,all);},render:function(node,_11fd){var _11fe=_11ca.place(this.containerTemplate.apply(this,this),node);var self=this;array.forEach(_11fd,function(_11ff){this._context[_11ff.propertyPath]=_11ff;var _1200=_11ca.place(this.propertyTemplate.apply(_11ff,this),_11fe);if(_1200&&_11ff["type"]=="standard"){_11c8.set(_1200,"dndType","property");_11c8.set(_1200,"dndData",_11ff.propertyPath);_11c9.add(_1200,"dojoDndItem");}else{on(_1200,"mousedown",function(){if(self._sources&&self._sources.length>0){self._sources[0].selectNone();}});}},this);var _1201=new _11dd.Source(_11fe,{owner:this,copyOnly:true,selfAccept:false});_1201.startup();this._sources.push(_1201);}});_11dd.Source=_11d3;return _11dd;});},"Sage/Groups/GroupNavigator":function(){define("Sage/Groups/GroupNavigator",["Sage/_Templated","dijit/_Widget","Sage/UI/ToolBarLabel","Sage/UI/ImageButton","Sage/Groups/GroupContextService","Sage/Services/ClientEntityContext","dojo/i18n!./nls/GroupNavigator","dojo/_base/lang","dojo/_base/declare","dojo/topic"],function(_1202,_1203,_1204,_1205,_1206,_1207,nls,lang,_1208,topic){var _1209=_1208("Sage.Groups.GroupNavigator",[_1203,_1202],{widgetsInTemplate:true,firstText:"Move First",previousText:"Move Previous",nextText:"Move Next",lastText:"Move Last",listText:"List View",labelFmtText:"${0} of ${1}",noRecordsText:"No Records",id:"groupNavigator",_entityContextService:false,_groupContextService:false,_entityChangedHandle:false,_groupChangedHandle:false,widgetTemplate:new Simplate(["<span class=\"list-panel-tbar\">","<div id=\"{%= $.id %}-Start\" data-dojo-type=\"Sage.UI.ImageButton\" imageClass=\"icon_Start_16x16\" tooltip=\"{%= $.firstText %}\" alt=\"{%= $.firstText %}\" dojoAttachPoint=\"_firstButton\" dojoAttachEvent=\"onClick:_moveFirst\"></div>","<div id=\"{%= $.id %}-Previous\"  data-dojo-type=\"Sage.UI.ImageButton\" imageClass=\"icon_Browse_Previous_16x16\" tooltip=\"{%= $.previousText %}\" alt=\"{%= $.previousText %}\" dojoAttachPoint=\"_previousButton\" dojoAttachEvent=\"onClick:_movePrevious\"></div>","<div id=\"{%= $.id %}-Label\"  data-dojo-type=\"Sage.UI.ToolBarLabel\" label=\"\" dojoAttachPoint=\"_groupNavLabel\"></div>","<div id=\"{%= $.id %}-Next\"  data-dojo-type=\"Sage.UI.ImageButton\" imageClass=\"icon_Browse_Next_16x16\" tooltip=\"{%= $.nextText %}\" alt=\"{%= $.nextText %}\" dojoAttachPoint=\"_nextButton\" dojoAttachEvent=\"onClick:_moveNext\"></div>","<div id=\"{%= $.id %}-End\"  data-dojo-type=\"Sage.UI.ImageButton\" imageClass=\"icon_End_16x16\" tooltip=\"{%= $.lastText %}\" alt=\"{%= $.lastText %}\" dojoAttachPoint=\"_lastButton\" dojoAttachEvent=\"onClick:_moveLast\"></div>","<div id=\"{%= $.id %}-Switcher\"  data-dojo-type=\"Sage.UI.ImageButton\" imageClass=\"icon_Switch_to_List_View_16x16\" tooltip=\"{%= $.listText %}\" alt=\"{%= $.listText %}\" dojoAttachPoint=\"_listButton\" dojoAttachEvent=\"onClick:_moveToList\"></div>","</span>"]),startup:function(){this._setLabel();},destroy:function(){if(this._groupChangedHandle){dojo.disconnect(this._groupChangedHandle);this._groupChangedHandle=false;}this.inherited(arguments);},postMixInProperties:function(){this._entityContextService=Sage.Services.getService("ClientEntityContext");this._groupContextService=Sage.Services.getService("ClientGroupContext");lang.mixin(this,nls);},_setLabel:function(args){var _120a=this._getGroupContext(),_120b=_120a.CurrentEntityPosition,count=_120a.CurrentGroupCount,eCtx=this._entityContextService.getContext();this._enableButtons();if(this._groupNavLabel&&_120a){if(count===0){_120b=0;}var lbl=dojo.string.substitute(this.labelFmtText,[_120b,count]);this._groupNavLabel.set("label",lbl);if(_120b===0||_120b===1){this._previousButton.set("disabled",true);this._firstButton.set("disabled",true);}if(_120b===_120a.CurrentGroupCount||_120b===0){this._nextButton.set("disabled",true);this._lastButton.set("disabled",true);}}},_enableButtons:function(){this._nextButton.set("disabled",false);this._lastButton.set("disabled",false);this._previousButton.set("disabled",false);this._firstButton.set("disabled",false);},_moveFirst:function(){var _120c=this._getGroupContext();var eCtx=this._entityContextService.getContext();if(_120c.FirstEntityID!==""&&_120c.FirstEntityID!=eCtx.EntityId){this._publishTopic("/group/nav/first",_120c.FirstEntityID,eCtx.EntityId,_120c.CurrentEntityPosition,_120c.CurrentGroupCount);this._entityContextService.navigateSLXGroupEntity(_120c.FirstEntityID,eCtx.EntityId);}},_movePrevious:function(){var _120d=this._getGroupContext();var eCtx=this._entityContextService.getContext();if(_120d.PreviousEntityID!==""&&_120d.PreviousEntityID!=eCtx.EntityId){this._publishTopic("/group/nav/previous",_120d.PreviousEntityID,eCtx.EntityId,_120d.CurrentEntityPosition,_120d.CurrentGroupCount);this._entityContextService.navigateSLXGroupEntity(_120d.PreviousEntityID,eCtx.EntityId);}},_moveNext:function(){var _120e=this._getGroupContext();var eCtx=this._entityContextService.getContext();if(_120e.NextEntityID!==""&&_120e.NextEntityID!=eCtx.EntityId){this._publishTopic("/group/nav/next",_120e.NextEntityID,eCtx.EntityId,_120e.CurrentEntityPosition,_120e.CurrentGroupCount);this._entityContextService.navigateSLXGroupEntity(_120e.NextEntityID,eCtx.EntityId);}},_moveLast:function(){var _120f=this._getGroupContext();var eCtx=this._entityContextService.getContext();if(_120f.LastEntityID!==""&&_120f.LastEntityID!=eCtx.EntityId){this._publishTopic("/group/nav/last",_120f.LastEntityID,eCtx.EntityId,_120f.CurrentEntityPosition,_120f.CurrentGroupCount);this._entityContextService.navigateSLXGroupEntity(_120f.LastEntityID,eCtx.EntityId);}},_moveToList:function(){Sage.Link.toListView();},_getGroupContext:function(){return this._groupContextService.getContext();},_publishTopic:function(key,_1210,_1211,_1212,count){topic.publish(key,{"toEntityId":_1210,"fromEntityId":_1211,"position":_1212,"count":count});}});return _1209;});},"Sage/QuickForms/Design/DesignSurface":function(){define("Sage/QuickForms/Design/DesignSurface",["dojo/query","dojo/keys","dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/event","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/dom-construct","dojo/NodeList-traverse","dojo/NodeList-manipulate","dijit/registry","dijit/focus","dijit/layout/_LayoutWidget","dijit/Menu","dijit/MenuItem","dijit/MenuSeparator","dijit/PopupMenuItem","Sage/_EventMapMixin","dojo/dnd/Source","dojo/dnd/Manager","./ControlDesignerRegistry","./ControlDesigner","./FormDesigner","./RowDesigner","./ColumnDesigner","dojo/i18n!./nls/DesignSurface"],function(query,keys,_1213,topic,_1214,array,lang,event,_1215,_1216,_1217,_1218,_1219,_121a,_121b,_121c,focus,_121d,Menu,_121e,_121f,_1220,_1221,_1222,_1223,_1224,_1225,_1226,_1227,_1228,_1229){var _122a=_1214([_1222],{owner:null,accept:["designer","property"],constructor:function(){this.creator=true;},checkAcceptance:function(_122b,nodes){if(_122b==this){return false;}return this.inherited(arguments);},onDropInternal:function(_122c,nodes,copy){},onDropExternal:function(_122d,nodes,copy){if(_122d.isInstanceOf(_122a)){var node=nodes[0],item=node&&_122d.getItem(node.id);if(item){_122d.selectNone();this.selectNone();this.onDropDesigner(this,_121c.byId(item.data));}}else{var node=nodes[0],item=node&&_122d.getItem(node.id);if(item&&array.indexOf(item.type,"property")>=0){_122d.selectNone();this.selectNone();this.onDropProperty(this,item.context);}}},onDropProperty:function(_122e,_122f){},onDropDesigner:function(_1230,_1231){},onDndStart:function(_1232,nodes,copy){this.inherited(arguments);},onDndCancel:function(){this.inherited(arguments);},_normalizedCreator:function(data,hint){var _1233=_121c.byId(data),_1234=_1219.toDom(_1233.domNode.parentNode.innerHTML),_1235=_1219.create("div",{"class":"design-surface-dnd-avatar"});_1219.place(_1234,_1235);return {node:_1235};},onDraggingOver:function(){this.inherited(arguments);if(this.empty){var _1236=_1223.manager();if(_1236.source.isInstanceOf(_122a)){var _1237=this.owner.validateMoveFromSource(this,_1236.source);_1236.canDrop(!_1237);}else{}}},onMouseMove:function(e){var _1238,_1239;if(this.isDragging&&!this.empty){_1238=this.before;_1239=this.targetAnchor;}this.inherited(arguments);if(this.isDragging&&!this.empty){if(this.targetAnchor!=_1239||this.before!=_1238){var _123a=_1223.manager();if(_123a.source.isInstanceOf(_122a)){var _123b=this.owner.validateMoveFromSource(this,_123a.source);_123a.canDrop(!_123b);}else{}}}}});var _123c=_1214([Menu],{owner:null,aboveText:"Above",belowText:"Below",leftText:"Left",rightText:"Right",insertRowText:"Insert Row",insertColumnText:"Insert Column",constructor:function(){lang.mixin(this,_1229);},postCreate:function(){this.inherited(arguments);var _123d=new Menu(),_123e=new Menu();_123d.addChild(new _121e({label:this.aboveText,onClick:lang.hitch(this,this._insertRow,true)}));_123d.addChild(new _121e({label:this.belowText,onClick:lang.hitch(this,this._insertRow,false)}));_123e.addChild(new _121e({label:this.leftText,onClick:lang.hitch(this,this._insertColumn,true)}));_123e.addChild(new _121e({label:this.rightText,onClick:lang.hitch(this,this._insertColumn,false)}));this.addChild(new _1220({label:this.insertRowText,popup:_123d}));this.addChild(new _1220({label:this.insertColumnText,popup:_123e}));},_insertColumn:function(_123f){if(this.owner){this.owner.insertColumnAround(this.target,_123f);}},_insertRow:function(_1240){if(this.owner){this.owner.insertRowAround(this.target,_1240);}},open:function(_1241,node,_1242){this.target=_1241;if(this.target){this._scheduleOpen(node,null,_1242);}}});var _1243=_1214([Menu],{owner:null,aboveText:"Above",belowText:"Below",insertRowText:"Insert Row",deleteRowText:"Delete Row",constructor:function(){lang.mixin(this,_1229);},postCreate:function(){this.inherited(arguments);var _1244=new Menu();_1244.addChild(new _121e({label:this.aboveText,onClick:lang.hitch(this,this._insertRow,true)}));_1244.addChild(new _121e({label:this.belowText,onClick:lang.hitch(this,this._insertRow,false)}));this.addChild(new _1220({label:this.insertRowText,popup:_1244}));this.addChild((this._delete=new _121e({label:this.deleteRowText,onClick:lang.hitch(this,this._deleteRow,false)})));},open:function(_1245,node,_1246){this.target=_1245;if(this.target){this._delete.set("disabled",this.owner.validateDeleteRowAt(this.target.index));this._scheduleOpen(node,null,_1246);}},_insertRow:function(_1247){if(this.owner){var index=_1247?this.target.get("index"):this.target.get("index")+1;this.owner.insertRowAt(index);}},_deleteRow:function(){if(this.owner){this.owner.deleteRowAt(this.target.index);}}});var _1248=_1214([Menu],{owner:null,leftText:"Left",rightText:"Right",insertColumnText:"Insert Column",deleteColumnText:"Delete Column",constructor:function(){lang.mixin(this,_1229);},postCreate:function(){this.inherited(arguments);var _1249=new Menu();_1249.addChild(new _121e({label:this.leftText,onClick:lang.hitch(this,this._insertColumn,true)}));_1249.addChild(new _121e({label:this.rightText,onClick:lang.hitch(this,this._insertColumn,false)}));this.addChild(new _1220({label:this.insertColumnText,popup:_1249}));this.addChild((this._delete=new _121e({label:this.deleteColumnText,onClick:lang.hitch(this,this._deleteColumn)})));},open:function(_124a,node,_124b){this.target=_124a;if(this.target){this._delete.set("disabled",!!this.owner.validateDeleteColumnAt(this.target.index));this._scheduleOpen(node,null,_124b);}},_insertColumn:function(_124c){if(this.owner){var index=_124c?this.target.get("index"):this.target.get("index")+1;this.owner.insertColumnAt(index);}},_deleteColumn:function(){if(this.owner){this.owner.deleteColumnAt(this.target.index);}}});var _124d=_1214("Sage.QuickForms.Design.DesignSurface",[_121d,_1221],{events:{"click":"_onClick","keydown":"_onKeyDown",".design-surface-selector-cell[data-select-row]:contextmenu":"_onRowContextMenu",".design-surface-selector-cell[data-select-column]:contextmenu":"_onColumnContextMenu",".dojoDndSource:contextmenu":"_onCellContextMenu"},_designGroup:null,_designGroupTopics:null,_rowContextMenu:null,_columnContextMenu:null,_cellContextMenu:null,baseClass:"design-surface",selections:null,form:null,columns:null,rows:null,columnCount:3,currentLayout:null,tableNode:null,singleSelection:true,designGroup:"default",bisectionErrorText:"The placement will cause another control to be bisected.",rowBoundsErrorText:"The chosen row is out of bounds.",columnBoundsErrorText:"The chosen column is out of bounds.",rowSpanBoundsErrorText:"The chosen row span is out of bounds.",columnSpanBoundsErrorText:"The chosen column span is out of bounds.",occupiedErrorText:"There is not enough empty space for the chosen size.",_getDesignGroupAttr:function(){return this._designGroup;},_setDesignGroupAttr:function(value){if(this._designGroupTopics){array.forEach(this._designGroupTopics,function(topic){this.unsubscribe(topic);},this);}this._designGroup=value;this._designGroupTopics=[this.subscribe(_1213.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this._onDesignerSelected)];},_onRowContextMenu:function(evt){event.stop(evt);if(this._rowContextMenu){this._rowContextMenu.open(this.findDesignerByNode(evt.target),evt.target,{x:evt.pageX,y:evt.pageY});}},_onColumnContextMenu:function(evt){event.stop(evt);if(this._columnContextMenu){this._columnContextMenu.open(this.findDesignerByNode(evt.target),evt.target,{x:evt.pageX,y:evt.pageY});}},_onCellContextMenu:function(evt){event.stop(evt);if(this._cellContextMenu){this._cellContextMenu.open(this.findDesignerByNode(evt.target),evt.target,{x:evt.pageX,y:evt.pageY});}},constructor:function(){this.selections=[];lang.mixin(this,_1229);},buildRendering:function(){this.inherited(arguments);_1215.set(this.domNode,"tabIndex",0);},createContextMenus:function(){this._rowContextMenu=new _1243({owner:this});this._rowContextMenu.startup();this._columnContextMenu=new _1248({owner:this});this._columnContextMenu.startup();this._cellContextMenu=new _123c({owner:this});this._cellContextMenu.startup();},postCreate:function(){this.inherited(arguments);},uninitialize:function(){if(this._sources){array.forEach(this._sources,function(_124e){_124e.destroy();});}if(this._contextMenu){this._contextMenu.destroyRecursive();}this._sources=[];this.inherited(arguments);},startup:function(){if(this._started){return;}this.inherited(arguments);this.createContextMenus();},resize:function(){this.inherited(arguments);array.forEach(this.getChildren(),function(child){if(typeof child.resize=="function"){child.resize();}});if(this._sources){array.forEach(this._sources,function(_124f){_124f.sync();});}},_buildKeyHandlerMap:function(){var map={};map[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]="_onLeftArrow";map[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]="_onRightArrow";map[keys.UP_ARROW]="_onUpArrow";map[keys.DOWN_ARROW]="_onDownArrow";return map;},_onKeyDown:function(evt){var key=evt.keyCode,map=this._keyHandlerMap||(this._keyHandlerMap=this._buildKeyHandlerMap());if(map[key]&&this[map[key]]){this[map[key]](evt);event.stop(evt);}},_onLeftArrow:function(evt){this._moveSelectionIndicator("l");},_onRightArrow:function(evt){this._moveSelectionIndicator("r");},_onUpArrow:function(evt){this._moveSelectionIndicator("u");},_onDownArrow:function(evt){this._moveSelectionIndicator("d");},_moveSelectionIndicator:function(_1250){var _1251=this.selections.length==1?this.selections[0]:null,_1252=_1251&&_1251.designer;if(_1252&&_1252.isInstanceOf(_1225)){var next=this._findNextWidget(_1252,_1250),cell=next&&query(next.domNode).closest(".design-surface-cell")[0];if(next){this._handleSelectionOf(next,false,cell,next.domNode);}}},_findNextWidget:function(_1253,_1254){var _1255=this.currentLayout,_1256=_1253.get("row")||0,_1257=_1253.get("column")||0,_1258=_1253.get("rowSpan")||1,_1259=_1253.get("columnSpan")||1,spanV=[_1256,_1256+_1258-1],spanH=[_1257,_1257+_1259-1],_125a,_125b,_125c,_125d;switch(_1254){case "u":_125a=[_1256-1,0];_125b=-1;_125c=spanH;_125d=1;break;case "d":_125a=[_1256+_1258,_1255.rows.length-1];_125b=1;_125c=spanH;_125d=1;break;case "l":_125a=spanV;_125b=1;_125c=[_1257-1,0];_125d=-1;break;case "r":_125a=spanV;_125b=1;_125c=[_1257+_1259,_1255.columnCount-1];_125d=1;break;}for(var row=_125a[0];_125b*row<=_125a[1];row+=_125b){for(var _125e=_125c[0];_125d*_125e<=_125c[1];_125e+=_125d){var data=this._readFromLayout(_1255,row,_125e);if(!data){continue;}var _125f=data.widget;if(_125f===_1253){continue;}return _125f;}}return null;},_handleSelectionOf:function(_1260,_1261,_1262,_1263){if(_1260){var _1264=array.some(this.selections,function(_1265){return (_1265.designer===_1260);});if(_1261&&!this.singleSelection){if(!_1264){array.forEach(this.selections,function(_1266){_1266.focusNode&&_1215.set(_1266.focusNode,"tabIndex","-1");});this.selections.push({designer:_1260,styleNode:_1262,focusNode:_1263});if(_1263){_1215.set(_1263,"tabIndex",0);focus.focus(_1263);}if(_1262){_1216.add(_1262,"design-surface-cell-selected");}this.onSelectionChanged(this.selections,true);topic.publish(_1213.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),_1260,true,this);}}else{this._clearSelectionDom();this._clearSelectionState(false);this.selections=[{designer:_1260,styleNode:_1262,focusNode:_1263}];if(_1263){_1215.set(_1263,"tabIndex",0);focus.focus(_1263);}if(_1262){_1216.add(_1262,"design-surface-cell-selected");}this.onSelectionChanged(this.selections,false);topic.publish(_1213.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),_1260,false,this);}}else{if(this.singleSelection||!_1261){this._clearSelectionDom();this._clearSelectionState();}}},findDesignerByNode:function(_1267){var _1268=this._findSelectableDesignerByNode(_1267);return _1268&&_1268.designer;},_findSelectableDesignerByNode:function(_1269){var cell=query(_1269).closest(".design-surface-cell")[0],node=cell&&query(".dojoDndItem > *",cell)[0],_126a=node&&_121c.byNode(node);if(_126a){return {designer:_126a,styleNode:cell,focusNode:_126a.domNode};}if(cell&&_1215.has(cell,"data-select-row")){return {designer:this.form&&this.form.get("rows")[parseInt(_1215.get(cell,"data-select-row"))],styleNode:cell,focusNode:cell};}if(cell&&_1215.has(cell,"data-select-column")){return {designer:this.form&&this.form.get("columns")[parseInt(_1215.get(cell,"data-select-column"))],styleNode:cell,focusNode:cell};}return null;},_onClick:function(evt){var _126b=evt.shiftKey,_126c=this._findSelectableDesignerByNode(evt.target);if(_126c){if(_126c.designer.isInstanceOf(_1225)){this._handleSelectionOf(_126c.designer,_126b,_126c.styleNode,_126c.focusNode);}else{this._handleSelectionOf(_126c.designer,false,_126c.styleNode,_126c.focusNode);}}else{this._handleSelectionOf(this.form,_126b);}},onSelectionChanged:function(_126d,_126e){},_clearSelectionDom:function(){if(this.selections.length>0){array.forEach(this.selections,function(_126f){_126f.focusNode&&_1215.set(_126f.focusNode,"tabIndex","-1");_126f.styleNode&&_1216.remove(_126f.styleNode,"design-surface-cell-selected");});}},_clearSelectionState:function(_1270){if(this.selections.length>0){this.selections=[];if(_1270!==false){this.onSelectionChanged(this.selections);topic.publish(_1213.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),false,false,this);}}},_syncDomWithSelectionState:function(){array.forEach(this.selections,function(_1271){var _1272=_1271.designer;if(_1272.isInstanceOf(_1225)){_1271.styleNode=query(_1272.domNode).closest(".design-surface-cell")[0];_1271.focusNode=_1272.domNode;}else{if(_1272.isInstanceOf(_1227)){_1271.styleNode=query(_1213.substitute(".design-surface-selector-cell[data-select-row=\"${0}\"]",[_1272.index]),this.domNode)[0];_1271.focusNode=_1271.styleNode;}else{if(_1272.isInstanceOf(_1228)){_1271.styleNode=query(_1213.substitute(".design-surface-selector-cell[data-select-column=\"${0}\"]",[_1272.index]),this.domNode)[0];_1271.focusNode=_1271.styleNode;}}}_1215.set(_1271.focusNode,"tabIndex",0);focus.focus(_1271.focusNode);_1216.add(_1271.styleNode,"design-surface-cell-selected");},this);},_onDesignerSelected:function(_1273,_1274,_1275){if(_1273&&_1275!==this){this._clearSelectionDom();this._clearSelectionState(false);}},_buildLayoutFor:function(_1276){var rows=[],_1277=this.form?this.form.get("columnCount"):this.columnCount;array.forEach(_1276,function(child){var _1278=child.get("row")||0,_1279=child.get("column")||0,_127a=child.get("rowSpan")||1,_127b=child.get("columnSpan")||1,row,edge,i,j;if(_127a>1||_127b>1){edge=[_1279,_1279+(_127b-1)];for(i=0;i<_127a;i++){row=rows[_1278+i]||(rows[_1278+i]=[]);for(j=0;j<_127b;j++){row[_1279+j]={widget:child,span:(i>0||j>0),edge:edge};}}}else{row=rows[_1278]||(rows[_1278]=[]);row[_1279]={widget:child,span:false,edge:[_1279,_1279]};}if((_1279+_127b)>_1277){_1277=(_1279+_127b);}},this);return {rows:rows,columnCount:_1277,children:_1276};},_syncNonVisibleDesigners:function(_127c){if(!this.form){return;}var _127d=_127c.rows,_127e=_127d.length,_127f=_127c.columnCount;if(this.form.get("rowCount")>_127e){var rows=this.form.get("rows");for(var i=(rows.length-1);i>(_127e-1);i--){if(rows[i].added){this.form.removeRow(i);}else{break;}}}else{if(this.form.get("rowCount")<_127e){var rows=this.form.get("rows"),count=rows.length;for(var i=0;i<(_127e-count);i++){this.form.addRow(new _1227({entry:{"Height":35,"SizeType":"Absolute"},form:this.form,index:count+i,added:true}));}}}if(this.form.get("columnCount")>_127f){var _1280=this.form.get("columns");for(var i=(_1280.length-1);i>(_127f-1);i--){if(_1280[i].added){this.form.removeColumn(i);}else{break;}}}else{if(this.form.get("columnCount")<_127f){var _1280=this.form.get("columns"),count=_1280.length;for(var i=0;i<(_127f-count);i++){this.form.addColumn(new _1228({entry:{"Width":10,"SizeType":"Percent"},form:this.form,index:count+i,added:true}));}}}},_renderLayout:function(_1281){if(this._sources){array.forEach(this._sources,function(_1282){_1282.destroy();});}this._sources=[];var rows=_1281.rows,_1283=_1281.children,_1284=Math.max((this.form&&this.form.get("rowCount"))||0,rows.length),_1285=Math.max((this.form&&this.form.get("columnCount"))||0,_1281.columnCount),_1286=_1219.create("table",{"class":"design-surface-table"},this.domNode),_1287=_1219.create("colgroup",null,_1286),_1288=_1219.create("tbody",null,_1286),_1289,_128a,_128b,_128c;_1219.create("col",{},_1287);var _128d=100/_1285;for(var j=0;j<_1285;j++){_1219.create("col",{"width":_128d+"%"},_1287);}var _128e=[];if(rows.length>0){_1289=_1219.create("tr",{"class":"design-surface-selector-row"},_1288);for(var i=0;i<_1285+1;i++){_128a=_1219.create("td",{"class":"design-surface-cell design-surface-selector-cell","data-select-column":i-1},_1289);}}for(var j=0;j<_1284;j++){var row=rows[j];_1289=_1219.create("tr",{"class":"design-surface-row"},_1288);_128a=_1219.create("td",{"class":"design-surface-cell design-surface-selector-cell","data-select-row":j},_1289);for(var i=0;i<_1285;i++){var cell=row&&row[i];if(cell){if(cell.span){continue;}var _128f=cell.widget,_1290=_128f.get("row")||0,_1291=_128f.get("rowSpan")||1,_1292=_128f.get("column")||0,_1293=_128f.get("columnSpan")||1;_128a=_1219.create("td",{"colspan":_1293,"rowspan":_1291,"class":"design-surface-cell","data-design-row":_1290,"data-design-column":_1292},_1289);_128e.push({node:_128a,widget:_128f});}else{_128a=_1219.create("td",{"class":"design-surface-cell design-surface-cell-empty"},_1289);}_128c=new _124d.Source(_128a,{owner:this,empty:!cell,row:j,column:i,copyOnly:true,selfAccept:false,onDropProperty:lang.hitch(this,this._onDropProperty),onDropDesigner:lang.hitch(this,this._onDropDesigner)});_128c.startup();this._sources.push(_128c);}}array.forEach(_128e,function(_1294){var _1295=_1217.getComputedStyle(_1294.node),_1296=_1218.getMarginBox(_1294.node,_1295),_1297=_1218.getPadExtents(_1294.node,_1295),_1298=_1218.getBorderExtents(_1294.node,_1295);_128b=_1219.create("div",{"dndType":"designer","dndData":_1294.widget.id,"class":"dojoDndItem","style":{"padding":"0px"}},_1294.node);var _1299=_1217.getComputedStyle(_128b),_129a=_1218.getBorderExtents(_128b,_1299);_1218.setContentSize(_128b,{h:(_1296.h-_1297.h-_1298.h-_129a.h)});_128b.appendChild(_1294.widget.domNode);},this);if(this.tableNode){this.tableNode.parentNode.removeChild(this.tableNode);}array.forEach(_1283,function(child){if(typeof child.layout=="function"){child.layout();}});this.currentLayout=_1281;this.tableNode=_1286;if(this._sources){array.forEach(this._sources,function(_129b){_129b.sync();});}},_readFromLayout:function(_129c,row,_129d){return (_129c.rows[row]&&_129c.rows[row][_129d]);},_applyPushToConnectionTree:function(_129e,_129f,_12a0){_12a0=_12a0||{};for(var i=0;i<_129f.children.length;i++){var _12a1=_129f.children[i],_12a2=_129e-_12a1.distance,node=_12a1.node;if(_12a0[node.id]){if(_12a2>_12a0[node.id].value){_12a0[node.id].value=_12a2;}}else{_12a0[node.id]={widget:node.widget,value:_12a2};}this._applyPushToConnectionTree(_12a2,node,_12a0);}return _12a0;},_buildConnectionTree:function(_12a3,_12a4,nodes,root){var span=[_12a4.column,_12a4.column+_12a4.columnSpan],_12a5=_12a3.rows.length,_12a6=_12a3.columnCount,_12a7={},nodes=nodes||{},root=root||_12a4;for(var _12a8=span[0];_12a8<span[1];_12a8++){for(var row=(_12a4.row+_12a4.rowSpan);row<_12a5;row++){var data=this._readFromLayout(_12a3,row,_12a8);if(!data){continue;}var _12a9=data.widget;if(_12a9===_12a4.widget){continue;}if(_12a9===root.widget){continue;}if(_12a7[_12a9.id]){continue;}_12a7[_12a9.id]=true;if(nodes[_12a9.id]){_12a4.children.push({distance:row-(_12a4.row+_12a4.rowSpan),node:nodes[_12a9.id]});}else{var node={id:_12a9.id,widget:_12a9,row:_12a9.get("row"),rowSpan:_12a9.get("rowSpan")||1,column:_12a9.get("column"),columnSpan:_12a9.get("columnSpan")||1,children:[]};nodes[_12a9.id]=node;_12a4.children.push({distance:row-(_12a4.row+_12a4.rowSpan),node:node});this._buildConnectionTree(_12a3,node,nodes,root);}break;}}},moveWidget:function(_12aa,_12ab,_12ac){var _12ad=this.currentLayout,_12ae=_12aa.get("rowSpan")||1,_12af=_12aa.get("columnSpan")||1,root={id:_12aa.id,widget:_12aa,row:_12ab,rowSpan:0,column:_12ac,columnSpan:_12af,children:[]};this._buildConnectionTree(_12ad,root);var push=this._applyPushToConnectionTree(_12ae,root);for(var name in push){var _12b0=push[name].widget,value=push[name].value;if(value>0){_12b0.unchecked(function(){this.set("row",this.get("row")+value);});}}_12aa.unchecked(function(){this.set("row",_12ab);this.set("column",_12ac);});topic.publish(_1213.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),_12aa,this);setTimeout(lang.hitch(this,function(){this.layout(true);}),50);},_onDropProperty:function(_12b1,_12b2){var ctor=_1224.getDesignerForDataType(_12b2.data["dataTypeId"]);if(!ctor){return;}var _12b3=new ctor({form:this.form});_12b3.setupFor(_12b2);this.form.addControl(_12b3);this.addChild(_12b3);this._handleSelectionOf(_12b3,false);this._onDropDesigner(_12b1,_12b3);},_onDropDesigner:function(_12b4,_12b5){var _12b6=this.currentLayout,_12b7=_12b6.columnCount,_12b8=this._readFromLayout(_12b6,_12b4.row,_12b4.column),_12b9=_12b8&&_12b8.widget,_12ba=(_12b9&&_12b9.get("rowSpan"))||1,_12bb=(_12b5&&_12b5.get("rowSpan"))||1,_12bc=(_12b5&&_12b5.get("columnSpan"))||1,_12bd=(!_12b8||_12b4.before)?_12b4.row:_12b4.row+_12ba,_12be=((_12b4.column+_12bc)>_12b7)?_12b7-_12bc:_12b4.column;this.moveWidget(_12b5,_12bd,_12be);},insertRowAround:function(_12bf,_12c0){var _12c1=_12bf.get("row")||0,_12c2=_12bf.get("rowSpan")||1,_12c3=_12c0?_12c1:_12c1+_12c2;this.insertRowAt(_12c3);},insertRowAt:function(_12c4){this.form.addRow(new _1227({entry:{"Height":35,"SizeType":"Absolute"},form:this.form,index:_12c4}),_12c4);array.forEach(this.getChildren(),function(_12c5){var _12c6=_12c5.get("row")||0;if(_12c6>=_12c4){_12c5.unchecked(function(){this.set("row",this.get("row")+1);});topic.publish(_1213.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),_12c5,this);}},this);setTimeout(lang.hitch(this,function(){this.layout(true);}),50);},deleteRowAt:function(_12c7){var _12c8=this.currentLayout,_12c9=_12c8.rows.length,_12ca=_12c8.columnCount;for(var _12cb=0;_12cb<_12ca;_12cb++){var _12cc=this._readFromLayout(_12c8,_12c7,_12cb);if(_12cc){return;}}this.form.removeRow(_12c7);array.forEach(this.getChildren(),function(_12cd){var _12ce=_12cd.get("row")||0;if(_12ce>=_12c7){_12cd.unchecked(function(){this.set("row",this.get("row")-1);});topic.publish(_1213.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),_12cd,this);}},this);setTimeout(lang.hitch(this,function(){this.layout(true);}),50);},validateDeleteRowAt:function(_12cf){var _12d0=this.currentLayout,_12d1=_12d0.rows.length,_12d2=_12d0.columnCount;for(var _12d3=0;_12d3<_12d2;_12d3++){var _12d4=this._readFromLayout(_12d0,_12cf,_12d3);if(_12d4){return {error:"occupied"};}}return false;},insertColumnAround:function(_12d5,_12d6){var _12d7=_12d5.get("column")||0,_12d8=_12d5.get("columnSpan")||1,_12d9=_12d6?_12d7:_12d7+_12d8;this.insertColumnAt(_12d9);},insertColumnAt:function(_12da){this.form.addColumn(new _1228({entry:{"Width":10,"SizeType":"Percent"},form:this.form,index:_12da}),_12da);array.forEach(this.getChildren(),function(_12db){var _12dc=_12db.get("column")||0;if(_12dc>=_12da){_12db.unchecked(function(){this.set("column",this.get("column")+1);});topic.publish(_1213.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),_12db,this);}},this);setTimeout(lang.hitch(this,function(){this.layout(true);}),50);},deleteColumnAt:function(_12dd){var _12de=this.currentLayout,_12df=_12de.rows.length,_12e0=_12de.columnCount;for(var row=0;row<_12df;row++){var _12e1=this._readFromLayout(_12de,row,_12dd);if(_12e1){return;}}this.form.removeColumn(_12dd);array.forEach(this.getChildren(),function(_12e2){var _12e3=_12e2.get("column")||0;if(_12e3>=_12dd){_12e2.unchecked(function(){this.set("column",this.get("column")-1);});topic.publish(_1213.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),_12e2,this);}},this);setTimeout(lang.hitch(this,function(){this.layout(true);}),50);},validateDeleteColumnAt:function(_12e4){var _12e5=this.currentLayout,_12e6=_12e5.rows.length,_12e7=_12e5.columnCount;for(var row=0;row<_12e6;row++){var _12e8=this._readFromLayout(_12e5,row,_12e4);if(_12e8){return {error:"occupied"};}}return false;},validateSize:function(_12e9,_12ea,_12eb){var _12ec=this.currentLayout,_12ed=_12ec.rows.length,_12ee=_12ec.columnCount,_12ef=_12e9.get("row")||0,_12f0=_12e9.get("rowSpan")||1,_12f1=_12e9.get("column")||0,_12f2=_12e9.get("columnSpan")||1;if(_12ea<1){return {error:"bounds",what:"rowSpan",message:this.rowSpanBoundsErrorText};}if(_12eb<1){return {error:"bounds",what:"columnSpan",message:this.columnSpanBoundsErrorText};}if(_12ea<=_12f0&&_12eb<=_12f2){return false;}if(_12ee<(_12f1+_12eb)){return {error:"bounds",what:"column",message:this.columnBoundsErrorText};}for(var row=_12ef;row<(_12ef+_12ea)&&row<_12ed;row++){var span=[row<(_12ef+_12f0)?_12f1+_12f2:_12f1,_12f1+_12eb];for(var _12f3=span[0];_12f3<span[1];_12f3++){var _12f4=this._readFromLayout(_12ec,row,_12f3);if(!_12f4){continue;}var _12f5=_12f4.widget;if(_12f5===_12e9){continue;}return {error:"occupied",what:_12f5.id,message:this.occupiedErrorText};}}return false;},validateMove:function(_12f6,_12f7,_12f8){var _12f9=this.currentLayout,_12fa=_12f9.columnCount,_12fb=_12f6.get("columnSpan")||1,_12fc={};if(_12f7<0){return {error:"bounds",what:"row",message:this.rowBoundsErrorText};}if(_12f8<0){return {error:"bounds",what:"column",message:this.columnBoundsErrorText};}if(_12fa<(_12f8+_12fb)){return {error:"bounds",what:"column",message:this.columnBoundsErrorText};}for(var _12fd=_12f8;_12fd<(_12f8+_12fb);_12fd++){var _12fe=this._readFromLayout(_12f9,_12f7,_12fd);if(!_12fe){continue;}var _12ff=_12fe.widget;if(_12ff===_12f6){continue;}if(_12fe.span){if(_12fc[_12ff.id]){continue;}return {error:"bisection",what:_12ff.id,message:this.bisectionErrorText};}_12fc[_12ff.id]=true;}return false;},validateMoveFromSource:function(_1300,_1301){var _1302=this.currentLayout,_1303=_1302.columnCount,_1304=this._readFromLayout(_1302,_1300.row,_1300.column),_1305=_1304&&_1304.widget,_1306=(_1305&&_1305.get("rowSpan"))||1,_1307=_1301.row,_1308=_1301.column,_1309=this._readFromLayout(_1302,_1307,_1308),_130a=_1309&&_1309.widget,_130b=(_130a&&_130a.get("rowSpan"))||1,_130c=(_130a&&_130a.get("columnSpan"))||1,_130d=(!_1304||_1300.before)?_1300.row:_1300.row+_1306,_130e=((_1300.column+_130c)>_1303)?_1303-_130c:_1300.column;return this.validateMove(_130a,_130d,_130e);},clearSelections:function(){this._clearSelectionDom();this._clearSelectionState();},clear:function(){this._clearSelectionState();array.forEach(this.getChildren(),function(child){this.removeChild(child);},this);this.form=null;this.layout();},layout:function(force){if(!this._borderBox||!this._borderBox.h){return;}var _130f=this.currentLayout,_1310=this.getChildren(),_1311={},_1312=false;if(_130f){array.forEach(_130f.children,function(child){_1311[child.id]=true;});for(var i=0;i<_1310.length;i++){if(!_1311[_1310[i].id]){break;}}_1312=(_1310.length!=i)||(_1310.length!=_130f.children.length);}else{_1312=true;}if(_1312||force){_130f=this._buildLayoutFor(_1310);this._syncNonVisibleDesigners(_130f);this._renderLayout(_130f);this._syncDomWithSelectionState();}}});_124d.Source=_122a;_124d.RowContextMenu=_1243;_124d.ColumnContextMenu=_1248;_124d.CellContextMenu=_123c;return _124d;});},"Sage/TaskPane/LeadTasksTasklet":function(){define("Sage/TaskPane/LeadTasksTasklet",["dojo/i18n!./nls/LeadTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/MainView/Lead/UpdateLeads","Sage/UI/Dialogs","dojo/_base/declare"],function(_1313,_1314,_1315,_1316,_1317,_1318){var _1319=_1318("Sage.TaskPane.LeadTasksTasklet",[_1314,_1315],{taskItems:[],constructor:function(){dojo.mixin(this,_1313);this.taskItems=[{taskId:"UpdateLeads",type:"Link",displayName:this.updateLeadsTitle,clientAction:"leadTasksActions.updateLeads();",securedAction:"Entities/Lead/MultiUpdate"},{taskId:"DeleteLeads",type:"Link",displayName:this.deleteLeadsTitle,clientAction:"leadTasksActions.deleteLeads();",securedAction:"Entities/Lead/MultiDelete"}];},updateLeads:function(){this.prepareSelectedRecords(this.updateLeadsActionItem(this.getSelectionInfo()));},updateLeadsActionItem:function(_131a){return function(){var _131b=dijit.byId("dlgUpdateMultipleLeads");if(!_131b){_131b=new _1316(_131a);}else{_131b.setSelectionInfo(_131a);}_131b.show();};},deleteLeads:function(){this.prepareSelectedRecords(this.confirmDeleteLeadJob(this));},confirmDeleteLeadJob:function(self){return function(){_1317.raiseQueryDialog(_1313.deleteLeadsTitle,dojo.string.substitute("${0}",[_1313.confirmDeleteLeads]),function(_131c){self.deleteLeadsActionItem(_131c,self);},self.yesButtonText,self.noButtonText);};},deleteLeadsActionItem:function(_131d,self){if(_131d){self.getSelectionInfo();var _131e=Sage.Data.SDataServiceRegistry.getSDataService("scheduling");var _131f=new Sage.SData.Client.SDataServiceOperationRequest(_131e).setApplicationName("$app").setOperationName("trigger").setResourceKind("jobs('Sage.SalesLogix.BusinessRules.Jobs.DeleteEntityJob')");var entry={"$name":"Sage.SalesLogix.BusinessRules.Jobs.DeleteEntityJob","request":{"parameters":[{"name":"EntityName","value":"Lead"},{"name":"SelectedIds","value":(self.selectionInfo.selectionCount>0)?self.selectionInfo.selectedIds.join(",")||"":""},{"name":"GroupId","value":(this.selectionInfo.selectionCount==0)?this.getCurrentGroupId()||"":""}]}};_131f.execute(entry,{success:function(_1320){},failure:function(_1321){_1317.showError(dojo.string.substitute(_1313.deleteJobError,[_1321.statusText]));}});}},getCurrentGroupId:function(){var _1322=Sage.Services.getService("ClientGroupContext");if(_1322){var _1323=_1322.getContext();return _1323.CurrentGroupID;}return "";}});return _1319;});},"Sage/MainView/Opportunity/nls/UpdateOpportunities":function(){define("Sage/MainView/Opportunity/nls/UpdateOpportunities",["Sage/LanguageList","dojo/_base/lang"],function(_1324,lang){var nls={root:{addToForecast_No:"No",addToForecast_Yes:"Yes",btnCancel_Caption:"Cancel",btnOK_Caption:"OK",estimatedClose_Days:"days",estimatedClose_MoveOut:"Move",estimatedClose_To:"To",moveEstCloseDate_Backward:"Backward",moveEstCloseDate_Forward:"Forward",update_To_Caption:"To:",update_Property_Caption:"Update:",updateMultipleOpps_Caption:"Update Opportunities",updateProp_AcctMgr:"Account Manager",updateProp_Comments:"Comments",updateProp_EstClose:"Estimated Close",updateProp_Forecast:"Add To Forecast",updateProp_Probability:"Close Probability %",lookupActMgrText:"Lookup Account Manager",lookupNameColText:"Name",lookupTitleColText:"Title",lookupDepartmentColText:"Department",lookupRegionColText:"Region",lookupTypeColText:"Type",errorUnspecifiedValue:"Please specify a value before continuing.",errorRequestingJobMgr:"An error occured performing update: ${0}"}};return lang.mixin(_1324,nls);});},"url:Sage/UI/Filters/templates/EditFilterItems.html":"<div>\r\n    <div class=\"filter-items-dialog\" data-dojo-type=\"dijit.Dialog\" data-dojo-props=\"title:'${dialogTitle}'\" data-dojo-attach-point=\"dialogNode\">\r\n        <div class=\"filter-items-search\">\r\n            <label>${findItemText}</label> <input data-dojo-attach-point=\"textFind\" data-dojo-type=\"dijit.form.TextBox\" />\r\n            <span data-dojo-attach-point=\"buttonFind\" title=\"${findText}\" data-dojo-type=\"Sage.UI.ImageButton\" data-dojo-props=\"imageClass: 'icon_Find_16x16'\" data-dojo-attach-event=\"onClick:_onFindClick\"></span>&nbsp;\r\n\t\t\t<span data-dojo-attach-point=\"buttonClear\" title=\"${clearText}\" data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:_onClearClick\">${clearText}</span>\r\n        </div>\r\n        <div class=\"filter-clear-all\">\r\n            <input data-dojo-attach-point=\"checkAll\" data-dojo-type=\"dijit.form.CheckBox\" />\r\n            <label>${selectAllText}</label>\r\n        </div>\r\n        <div class=\"filter-items-dialog-content\" data-dojo-attach-point=\"contentNode\">\r\n        </div>\r\n        <div class=\"button-bar alignright\">\r\n            <button data-dojo-attach-point=\"buttonOK\" data-dojo-attach-event=\"onClick:_onOKClick\" data-dojo-type=\"dijit.form.Button\">${okText}</button>\r\n            <button data-dojo-attach-point=\"buttonCancel\" data-dojo-attach-event=\"onClick:_onCancelClick\" data-dojo-type=\"dijit.form.Button\">${cancelText}</button>\r\n        </div>\r\n    </div>\r\n</div>","Sage/Store/main":function(){define("Sage/Store/main",["Sage/Store/SData"],function(){});},"Sage/UI/main":function(){define("Sage/UI/main",["Sage/UI/Columns/main","Sage/UI/Controls/main","Sage/UI/Dashboard/main","Sage/UI/Alarms/main","Sage/UI/SLXPreviewGrid/main","Sage/UI/_DetailPane","Sage/UI/_DialogLoadingMixin","Sage/UI/widgetEditorLookup","Sage/UI/_DetailPanelConfigurationProvider","Sage/UI/_TitlePaneConfigProvider","Sage/UI/AttachmentList","Sage/UI/ActivityList","Sage/UI/NotesHistoryList","Sage/UI/ComboBox","Sage/UI/ConditionManager","Sage/UI/DashboardGroupListConfigurationProvider","Sage/UI/DateTextBox","Sage/UI/DetailPanel","Sage/UI/Dialogs","Sage/UI/EditableGrid","Sage/UI/EditorContainer","Sage/UI/Filters/CheckBoxFilter","Sage/UI/Filters/LookupFilter","Sage/UI/Filters/EditFilterItems","Sage/UI/Filters/EditFilters","Sage/UI/FilteringSelect","Sage/UI/Filters/FilterManager","Sage/UI/Filters/FilterPanel","Sage/UI/Filters/GroupFilterConfigurationProvider","Sage/UI/GridContainer","Sage/UI/GridMenuItem","Sage/UI/GroupListConfigurationProvider","Sage/UI/GroupMenuFmtScope","Sage/UI/GroupsTitlePaneConfigProvider","Sage/UI/GroupTabPane","Sage/UI/ImageButton","Sage/UI/JsonPrintDetailPane","Sage/UI/ListPanel","Sage/UI/MenuBar","Sage/UI/MenuBarItem","Sage/UI/MenuItem","Sage/UI/NavBar","Sage/UI/NavBarPane","Sage/UI/NumberTextBox","Sage/UI/OrientableMenuBar","Sage/UI/PopupMenuBarItem","Sage/UI/PopupMenuItem","Sage/UI/SDataLookup","Sage/UI/SearchConditionWidget","Sage/UI/SLXPreviewGrid","Sage/UI/SpeedSearch","Sage/UI/SummaryContainer","Sage/UI/SummaryContents","Sage/UI/SummaryDetailPane","Sage/UI/SummaryFormatterScope","Sage/UI/TextBox","Sage/UI/TimeZoneItem","Sage/UI/TitleContentPane","Sage/UI/ToggleButton","Sage/UI/ToolBarLabel","Sage/UI/UniqueToListValidationTextBox","Sage/UI/URL","Sage/UI/WidgetEditor","Sage/UI/ActivityScheduler","Sage/UI/TimelessActivitiesPane","Sage/UI/Calendar","Sage/UI/CalendarUsersListPane"],function(){});},"Sage/UI/Columns/PickList":function(){define("Sage/UI/Columns/PickList",["Sage/UI/Controls/PickList","Sage/UI/Controls/DropDownSelectPickList","Sage/Data/BaseSDataStore","dojo/_base/declare"],function(_1325,_1326,_1327,_1328){var _1329=_1328("Sage.UI.Columns.PickList",dojox.grid.cells._Widget,{icon:"",widgetClass:_1326,storeData:null,pickList:null,storageMode:"id",displayMode:"AsText",constructor:function(args){this.inherited(arguments);if(this.storageMode==="id"&&this.displayMode==="AsText"){if(this.pickListName&&this.storeData===null){this._loadPickList();}}},formatter:function(val,index){if(this.storageMode==="id"){val=this.getStoreTextById(val);}return val;},_loadPickList:function(){var _132a=new dojo.Deferred();var _132b={pickListName:this.pickListName,canEditText:false,itemMustExist:true,maxLength:-1,storeMode:this.storageMode,sort:false,displayMode:this.displayMode};this.pickList=new _1325(_132b);this.pickList.getPickListData(_132a);_132a.then(dojo.hitch(this,this._loadData),function(e){console.error(e);});},getStoreTextById:function(val){if(this.storeData){var _132c=val;dojo.forEach(this.storeData.items,function(item,index,array){if(item.id===val){_132c=item.text;}},this);}return _132c;},_loadData:function(data){var items=[];for(var i=0;i<data.items.$resources.length;i++){var item=data.items.$resources[i];items.push({id:item.$key,code:item.code,number:item.number,text:item.text});}this.storeData={identifier:"id",label:"text",items:items};}});return _1329;});},"Sage/UI/Controls/DurationSelect":function(){define("Sage/UI/Controls/DurationSelect",["Sage/UI/Controls/_customSelectMixin","Sage/Utility/Activity","dojo/date","dojo/data/ItemFileReadStore","dojo/i18n!./nls/DurationSelect","dojo/_base/declare"],function(_132d,_132e,_132f,_1330,_1331,_1332){var _1333=_1332("Sage.UI.Controls.DurationSelect",_132d,{id:"",startTime:new Date(),timeValue:new Date(),valuesAreAfterStart:true,_store:null,_storeData:{},labelFmt:"${amount} ${interval} (${endTime})",splitAmoutLabelFmt:"${amount1} ${interval1}, ${amount2} ${interval2} (${endTime})",minuteText:"minute",minutesText:"minutes",hourText:"hour",hoursText:"hours",dayText:"day",daysText:"days",timeIncrements:[0,5,10,15,30,60,120,240],items:[],itemsByDur:{},constructor:function(){dojo.mixin(this,_1331);},resetItems:function(){this.items=[];this.itemsByDur={};},_fillSelect:function(){if(this._select){this.resetItems();var _1334=false;for(var i=0;i<this.timeIncrements.length;i++){var inc=this.timeIncrements[i];this.items.push(this._createItem(inc));_1334=_1334||(this.value===inc);}if(!_1334&&(this.value)){this.items.push(this._createItem(this.value));}this._storeData={identifier:"value",label:"label",items:this.items};this._store=new _1330({data:this._storeData});this._select.set("store",this._store);this._select.set("searchAttr","label");if(this.value||this.value===0){this.set("value",this.value);}}},_createItem:function(inc){var st=this.startTime;var newD;newD=_132f.add(st,"minute",(this.valuesAreAfterStart)?inc:inc*-1);var obj={"value":inc,"dateValue":newD,"label":this._formatLabel(inc,newD)};this.itemsByDur[inc]=obj;return obj;},_formatLabel:function(inc,_1335){var _1336;var _1337={amount:inc,interval:(inc===1)?this.minuteText:this.minutesText,endTime:_132f.locale.format(_1335,{selector:"time"})};var _1338=this.labelFmt;if(inc>59){var mod=inc%60;_1336=Math.floor(inc/60);if(mod===0){_1337["amount"]=_1336;_1337["interval"]=(_1336===1)?this.hourText:this.hoursText;}else{_1337["amount1"]=_1336;_1337["interval1"]=(_1336===1)?this.hourText:this.hoursText;_1337["amount2"]=mod;_1337["interval2"]=(mod===1)?this.minuteText:this.minutesText;_1338=this.splitAmoutLabelFmt;}if(_1336>23){var _1339=Math.round(_1336/24);_1337["amount"]=_1339;_1337["interval"]=(_1339===1)?this.dayText:this.daysText;_1337["endTime"]=_132f.locale.format(_1335,{selector:"datetime"});}}return dojo.string.substitute(_1338,_1337);},_handleValueNotInStore:function(_133a){var _133b=this.text;var _133c=/\(([\s\S]*)\)/;var _133d=_133c.exec(_133a);var _133e=_133c.exec(_133b);if((_133d)&&(_133e)){if(_133d[1]===_133e[1]){_133a=_133a.replace(_133d[0],"");}else{var _133f=_132f.locale.parse(_133d[1],{selector:"time"});if(_133f){_133f.setFullYear(this.startTime.getFullYear());_133f.setMonth(this.startTime.getMonth());_133f.setDate(this.startTime.getDate());this._setTimeValueAttr(_133f);return this.value;}}}var dur=0;if(typeof _133a==="number"){dur=_133a;}else{if(_133a.indexOf(",")>0){var _1340=_133a.split(",");for(var i=0;i<_1340.length;i++){var _1341=this._getMinutesFromStringPart(_1340[i]);if(_1341){dur+=_1341;}}}else{dur=this._getMinutesFromStringPart(_133a);}}if(!dur){this._select.set("value",this.text);return this.value;}var _1342=this._createItem(dur);this.value=_1342.value;this.text=_1342.label;this._select.set("displayedValue",_1342.label);return _1342.value;},_setValueAttr:function(value){this._removeOldValueFromStore();this.text=value;this.value=value;if(this._store){this._store.fetchItemByIdentity({identity:value,onItem:function(item){if(item){this._select.set("value",this._store.getValue(item,this._storeData.label));this.value=this._store.getValue(item,this._storeData.identifier);this.text=this._store.getValue(item,this._storeData.label);}else{this._handleValueNotInStore(value);}},onError:function(){},scope:this});}},_removeOldValueFromStore:function(){for(var i=0;i<this.timeIncrements.length;i++){if(this.value===this.timeIncrements[i]){return;}}delete (this.itemsByDur[this.value]);var l=this.items.length;for(i=0;i<l;i++){if(this.items[i].value===this.value||this.items[i].value[0]===this.value){this.items.splice(i,1);return;}}},_getMinutesFromStringPart:function(str){var parts=str.trim().split(" ");var num=parseInt(parts[0],10);if(isNaN(num)){return false;}if(parts.length>1){if(this.hoursText.indexOf(parts[1])>-1){num=num*60;}}return num;},_setStartTimeAttr:function(_1343){if(_132f.compare(this.startTime,_1343,"datetime")!==0){this.startTime=_1343;this._fillSelect();}},_setValuesAreAfterStartAttr:function(_1344){if(this.valuesAreAfterStart!==_1344){this.valuesAreAfterStart=_1344;this._fillSelect();}},_getTimeValueAttr:function(){if(this.itemsByDur.hasOwnProperty(this.value)){var dVal=this.itemsByDur[this.value].dateValue;return (dojo.isArray(dVal))?dVal[0]:dVal;}else{if(this.value&&this.startTime){var d=_132f.add(this.startTime,"minute",(this.valuesAreAfterStart)?this.value:this.value*-1);this.dateValue=d;return this.dateValue;}return null;}},_setTimeValueAttr:function(time){if(!time){return;}if(this.items.length<1){this._fillSelect();}var d=this.startTime;if(d.getHours()===0&&d.getMinutes===0&&d.getSeconds()===5){time=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds());}for(var obj in this.itemsByDur){if(obj&&this.itemsByDur[obj].dateValue){var _1345=dojo.isArray(this.itemsByDur[obj].dateValue)?this.itemsByDur[obj].dateValue[0]:this.itemsByDur[obj].dateValue;if(_132f.compare(_1345,time,"datetime")===0){this.set("value",this.itemsByDur[obj].value);this.text=this.itemsByDur[obj].label;this._select.set("displayedValue",this.itemsByDur[obj].label);return;}}}var dur=_132f.difference(this.startTime,time,"minute");if(dur<0){dur=dur*-1;}var o={"value":dur,"dateValue":time,"label":this._formatLabel(dur,time)};this.set("value",dur);this.text=o.label;this.itemsByDur[dur]=o;this._select.set("displayedValue",o.label);},_setTimeIncrementsAttr:function(_1346){if(this.timeIncrements===_1346){return;}this.timeIncrements=_1346;this._fillSelect();}});return _1333;});},"Sage/Services/ClientEntityContext":function(){define("Sage/Services/ClientEntityContext",["dojo/_base/declare"],function(_1347){var _1348=_1347("Sage.Services.ClientEntityContext",null,{hasClearListener:false,tempContext:false,constructor:function(_1349){this.inherited(arguments);dojo.mixin(this,_1349);this.emptyContext={"EntityId":"","EntityType":"","Description":"","EntityTableName":""};},getContext:function(){if(this.tempContext){return this.tempContext;}if((Sage.Data)&&(Sage.Data.EntityContextStore)){return Sage.Data.EntityContextStore;}return this.emptyContext;},setContext:function(obj){Sage.Data.EntityContextStore=dojo.mixin(this.emptyContext,obj);this.onEntityContextChanged(Sage.Data.EntityContextStore);},setTemporaryContext:function(obj){this.tempContext=obj;},clearTemporaryContext:function(){this.tempContext=false;},navigateSLXGroupEntity:function(_134a,_134b,_134c){if(Sage.Services){var mgr=Sage.Services.getService("ClientBindingManagerService");if((mgr)&&(!mgr.canChangeEntityContext())){return false;}var _134d=Sage.Services.getService("ClientContextService");if(_134d.containsKey("ClientEntityId")){_134d.setValue("ClientEntityId",_134a);}else{_134d.add("ClientEntityId",_134a);}_134b=(_134b)?_134b:Sage.Data.EntityContextStore.EntityId;if(_134d.containsKey("PreviousEntityId")){_134d.setValue("PreviousEntityId",_134b);}else{_134d.add("PreviousEntityId",_134b);}if(_134c){if(_134d.containsKey("ClientEntityPosition")){_134d.setValue("ClientEntityPosition",_134c);}else{_134d.add("ClientEntityPosition",_134c);}}if(!this.hasClearListener){Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(function(){if(Sage.Services){var _134e=Sage.Services.getService("ClientContextService");if(_134e.containsKey("PreviousEntityId")){_134e.remove("PreviousEntityId");}}});this.hasClearListener=true;}Sage.Data.EntityContextStore.EntityId=_134a;Sage.Data.EntityContextStore.Description="";}if(window.TabControl){var _134f=TabControl.getState();if(_134f){_134f.clearUpdatedTabs();TabControl.updateStateProxy();}}__doPostBack("MainContent","");return true;},onEntityContextChanged:function(_1350){}});if(!Sage.Services.hasService("ClientEntityContext")){Sage.Services.addService("ClientEntityContext",new Sage.Services.ClientEntityContext());}return _1348;});},"Sage/QuickForms/Design/Editors/CheckBoxAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/CheckBoxAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CheckBoxAdvancedPropertyEditor"],function(_1351,lang,_1352,_1353,_1354,_1355,_1356,_1357,_1358,_1359,_135a){return _1351("Sage.QuickForms.Design.Editors.CheckBoxAdvancedPropertyEditor",[_1352,_1358,_1357],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" style=\"display:none;\" title=\"{%= $.checkedTooltipText %}\">","<label>{%= $.checkedText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_checked\" data-dojo-attach-event=\"onChange:_onCheckedChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_checked:null,_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",checkedText:"Checked:",checkedTooltipText:"Sets default state of checkbox to selected.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},constructor:function(){lang.mixin(this,_135a);},setup:function(){this.inherited(arguments);this._checked.set("value",this._designer.get("checked"));this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._enabled.set("value",this._designer.get("enabled"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._visible.set("value",this._designer.get("visible"));var _135b=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_135b&&_135b["DataItemName"])||"");},_onCheckedChange:function(value){if(this.isSuspended()){return;}this._designer.set("checked",value);},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onDefaultDataBindingChange:function(value){},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"url:Sage/MainView/Contact/templates/ContactDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Contact.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccount_Caption || \"Account:\" %}</td>',\r\n                        '<td class=\"DataItem\"><a href=\"Account.aspx?entityid={{%= $.templateData.account_id %}}\">{%= Sage.Utility.htmlEncode($.templateData.accountname) %}</a></td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTitle_Caption || \"Title:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.title %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWorkPhone_Caption || \"Work Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.workphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svHomePhone_Caption || \"Home Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.homephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMobilePhone_Caption || \"Mobile Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mobilephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n] ","Sage/UI/GridContainer":function(){define("Sage/UI/GridContainer",["dojox/layout/GridContainer","dojo/_base/declare"],function(_135c,_135d){var _135e=_135d("Sage.UI.GridContainer",_135c,{_updateColumnsWidth:function(_135f){if(!_135f){var _1360=[];_1360.push(this._dragManager);_1360.callee=arguments.callee;this.inherited(_1360);}else{this.inherited(arguments);}}});return _135e;});},"Sage/QuickForms/Design/nls/DateTimePickerControlDesigner":function(){define("Sage/QuickForms/Design/nls/DateTimePickerControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_1361,lang){var nls={root:{displayNameText:"DateTime Picker"}};return lang.mixin(_1361,nls);});},"Sage/UI/DateTextBox":function(){define("Sage/UI/DateTextBox",["dijit/form/DateTextBox","Sage/Utility","dojo/_base/declare"],function(_1362,util,_1363){var _1364=_1363("Sage.UI.DateTextBox",_1362,{_getValueAttr:function(){var d=this.inherited(arguments);return (d)?util.Convert.toJsonStringFromDate(d):d;},_setValueAttr:function(value,_1365,_1366){if(Sage.Utility.Convert.isDateString(value)){value=util.Convert.toDateFromString(value);}this.inherited(arguments,[value,_1365,_1366]);}});return _1364;});},"Sage/UI/Controls/nls/HelpMenu":function(){define("Sage/UI/Controls/nls/HelpMenu",["Sage/LanguageList","dojo/_base/lang"],function(_1367,lang){var nls={root:{helpText:"Help",aboutText:"About",webClientHelpText:"Web Client Help",gettingStartedText:"Getting Started Guide",quickReferenceText:"Quick Reference Card"}};return lang.mixin(_1367,nls);});},"Sage/QuickForms/Design/Editors/nls/LayoutPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/LayoutPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1368,lang){var nls={root:{titleText:"Layout",positionText:"Position",sizeText:"Size",rowText:"Row:",rowTooltipText:"Row number of the control.",columnText:"Column:",columnTooltipText:"Column number of the control.",rowSpanText:"Row Span:",rowSpanTooltipText:"Number of cells the control occupies vertically.",columnSpanText:"Column Span:",columnSpanTooltipText:"Number of cells the control occupies horizontally."}};return lang.mixin(_1368,nls);});},"Sage/UI/_DetailPanelConfigurationProvider":function(){define("Sage/UI/_DetailPanelConfigurationProvider",["dojo/_base/declare"],function(_1369){var _136a=_1369("Sage.UI._DetailPanelConfigurationProvider",null,{detailModeConfiguration:false,constructor:function(_136b){dojo.mixin(this,_136b);},requestDetailModeConfiguration:function(_136c){if(_136c.success&&this.detailModeConfiguration){_136c.success.call(_136c.scope||this,this.detailModeConfiguration,this);}}});return _136a;});},"Sage/TaskPane/nls/UserTasklet":function(){define("Sage/TaskPane/nls/UserTasklet",["Sage/LanguageList","dojo/_base/lang"],function(_136d,lang){var nls={root:{addToRoleTitle:"Add to Role",resetUsersTitle:"Reset Users"}};return lang.mixin(_136d,nls);});},"Sage/Utility/File/LibraryDocument":function(){define("Sage/Utility/File/LibraryDocument",["Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility/File","Sage/UI/Dialogs","dojo/_base/lang","dojo/string","Sage/Utility","Sage/Utility/ErrorHandler","Sage/Utility/File/DescriptionsForm","dojo/i18n!./nls/LibraryDocument"],function(_136e,_136f,_1370,_1371,dLang,_1372,_1373,_1374,_1375,nls){Sage.namespace("Utility.File.LibraryDocument");Sage.Utility.File.LibraryDocument={_stateInfo:{total:0,processed:0,successCount:0,failedCount:0},_errors:[],_store:false,_target:false,_totalProgress:0,_attachmentTemplate:false,_files:[],_fileCount:0,_uploadAttemptCount:0,_isUploading:false,_descriptionsForm:false,_uploadUrlFmt:"slxdata.ashx/slx/system/-/libraryDirectories('${0}')/documents/file",_uploadUrl:false,createDocuments:function(files,_1376){this._target=(_1376&&typeof _1376!=="undefined")?_1376:false;var _1377="Library Document";this._ensureDescriptionsForm();this._descriptionsForm.set("entityDesc",_1377);this._descriptionsForm.set("files",files);this._descriptionsForm.show();},handleDescriptions:function(files,_1378){var _1379="";var id="";for(var i=0;i<_1378.length;i++){_1378[i][_1379]=id;}for(var i=0;i<files.length;i++){this._files.push(files[i]);}this.uploadFiles();},_checkState:function(){if(this._stateInfo.processed==this._stateInfo.total){_1371.closeProgressBar();if(this._errors.length>0){var crlf="<br>";var _137a=[];_137a.push(_1372.substitute(this.uploadError,[this._stateInfo.failedCount,this._stateInfo.successCount]));_137a.push(crlf);var self=this;dojo.forEach(this._errors,function(err,idx){if(err&&typeof err==="object"&&err.hasOwnProperty("message")){_137a.push(_1372.substitute(self.failureNumber,[(idx+1)])+err.message);if(idx!==(self._errors.length-1)){_137a.push(crlf);}}});this._errors=[];Sage.UI.Dialogs.showError(_137a.join(crlf));}dojo.publish("/sage/library/manager/libraryDocuments/refresh",null);this._resetCounts();}},_resetCounts:function(){this._fileCount=0;this._uploadAttemptCount=0;this._isUploading=false;this._totalProgress=0;this._stateInfo.processed=0;this._stateInfo.total=0;this._stateInfo.failedCount=0;this._stateInfo.successCount=0;},_failAdd:function(xhr){var _137b={url:this._uploadUrl};var _137c=_1374.getHttpStatusInfo(xhr,_137b);if(_137c&&typeof _137c==="object"){this._errors.push(_137c);}else{this._errors.push({message:this.unknownError});}this._uploadAttemptCount=this._uploadAttemptCount+1;this._updateProgress((this._fileCount<1)?100:(this._uploadAttemptCount/this._fileCount)*100);this._stateInfo.processed++;this._stateInfo.failedCount++;this._checkState();},_ensureDescriptionsForm:function(){if(!this._descriptionsForm){this._descriptionsForm=new _1375({entityDesc:"",fileType:Sage.Utility.File.fileType.ftLibraryDocs,files:this._files||[]});dojo.connect(this._descriptionsForm,"onDescriptionsEntered",this,"handleDescriptions");}},_successUpload:function(_137d){this._uploadAttemptCount=this._uploadAttemptCount+1;this._updateProgress((this._fileCount<1)?100:(this._uploadAttemptCount/this._fileCount)*100);this._stateInfo.processed++;this._stateInfo.successCount++;this._checkState();},_updateProgress:function(_137e){var pct=this._totalProgress;if(_137e&&_137e.lengthComputable){var _137f=(_137e.loaded/_137e.total)*100;pct+=Math.round(_137f/this._fileCount);}else{if(_137e){pct=_137e;}}this._totalProgress=pct;if(pct<99){_1371.showProgressBar({pct:pct,title:this.percentComplete});}},uploadFiles:function(_1380){this._isUploading=true;this._fileCount=this._files.length;if(_1380&&!this._attachmentTemplate){this._attachmentTemplate=_1380;}var _1381="";if(Sage.Library&&Sage.Library.FileHandler){_1381=Sage.Library.FileHandler.findDirectoryId(this._target);}var sUrl=_1372.substitute(this._uploadUrlFmt,[_1381]);this._uploadUrl=sUrl;this._stateInfo.processed=0;this._stateInfo.total=this._files.length;while(this._files.length>0){var file=this._files.pop();Sage.Utility.File.uploadFile(file,this._uploadUrl,this._updateProgress,this._successUpload,this._failAdd,this);}}};dLang.mixin(Sage.Utility.File.LibraryDocument,nls);return Sage.Utility.File.LibraryDocument;});},"Sage/UI/Controls/DropDownSelectUser":function(){require({cache:{"url:Sage/UI/Controls/templates/DropDownSelectUser.html":"<div>\r\n    <select data-dojo-type=\"Sage.UI.ComboBox\" shouldPublishMarkDirty=\"false\" dojoAttachPoint=\"comboBox\" dojoAttachEvent=\"onBlur: _onBlur\">\r\n    </select>\r\n</div>\r\n"}});define("Sage/UI/Controls/DropDownSelectUser",["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/ComboBox","dojo/data/ItemFileReadStore","Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry","Sage/UI/ComboBox","dojo/text!./templates/DropDownSelectUser.html","dojo/_base/declare"],function(_1382,_1383,_1384,_1385,_1386,_1387,_1388,_1389,_138a,_138b){var _138c=_138b("Sage.UI.Controls.DropDownSelectUser",[_1384,_1382,_1383],{dataStore:null,storeOptions:null,storeData:null,templateString:_138a,widgetsInTemplate:true,constructor:function(_138d){this.storeOptions=_138d.storeOptions||{include:["UserInfo"],select:["Id","UserName","UserInfo/FirstName","UserInfo/LastName","Type"],sort:[{attribute:"UserInfo.LastName",descending:false}],service:_1388.getSDataService("dynamic",false,true,true),resourceKind:"users"};this.dataStore=new _1387(this.storeOptions);this.inherited(arguments);},postCreate:function(){var def=new dojo.Deferred();this.getUserData(def);def.then(dojo.hitch(this,function(data){if(!data){return;}var items=[];var count=data.length;var item=null;for(var i=0;i<count;i++){item=data[i];if(item.Type!=="Template"){items.push({id:item.$key,text:[item.UserInfo.FirstName,item.UserInfo.LastName].join(" ")});}}this.storeData={identifier:"id",label:"text",items:items};var _138e=new _1386({data:this.storeData});this.comboBox.set("store",_138e);this.comboBox.set("searchAttr","text");}),function(e){console.error(e);});this.inherited(arguments);},getUserData:function(_138f){this.dataStore.fetch({onComplete:function(data){_138f.callback(data);},onError:function(e){_138f.errback(e);},scope:this});},_getValueAttr:function(){return this.comboBox.get("value");}});return _138c;});},"Sage/QuickForms/Design/Editors/PickListAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/PickListAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dojo/data/ItemFileWriteStore","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/PickListAdvancedPropertyEditor"],function(_1390,lang,_1391,_1392,_1393,_1394,_1395,_1396,_1397,_1398,_1399,_139a){return _1390("Sage.QuickForms.Design.Editors.PickListAdvancedPropertyEditor",[_1391,_1398,_1397],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.displayModeTooltipText %}\">","<label>{%= $.displayModeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_displayMode\" data-dojo-attach-event=\"onChange:_onDisplayModeChange\">","{% for (var mode in $.displayModeTypeText) { %}","<span value=\"{%= mode %}\">{%= $.displayModeTypeText[mode] %}</span>","{% } %}","</div>","</div>","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.allowMultiplesTooltipText %}\">","<label>{%= $.allowMultiplesText %}</label>","<div data-dojo-attach-point=\"_allowMultiples\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onAllowMultiplesChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.canEditTextTooltipText %}\">","<label>{%= $.canEditTextText %}</label>","<div data-dojo-attach-point=\"_canEditText\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onCanEditTextChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.mustExistInListTooltipText %}\">","<label>{%= $.mustExistInListText %}</label>","<div data-dojo-attach-point=\"_mustExistInList\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onMustExistInListChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.maxLengthTooltipText %}\">","<label>{%= $.maxLengthText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_maxLength\" data-dojo-attach-event=\"onChange:_onMaxLengthChange\" data-dojo-props=\"constraints:{min:-1,places:0}\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.pickListNameTooltipText %}\">","<label>{%= $.pickListNameText %}</label>","<div data-dojo-type=\"dijit.form.ComboBox\" data-dojo-attach-point=\"_pickListName\" data-dojo-attach-event=\"onChange:_onPickListNameChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.storageModeTooltipText %}\">","<label>{%= $.storageModeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_storageMode\" data-dojo-attach-event=\"onChange:_onStorageModeChange\" data-dojo-props=\"disabled:true\">","{% for (var mode in $.storageModeTypeText) { %}","<span value=\"{%= mode %}\">{%= $.storageModeTypeText[mode] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_allowMultiples:null,_canEditText:null,_controlType:null,_controlId:null,_controlLabelPlacement:null,_defaultDataBinding:null,_displayMode:null,_enabled:null,_maxLength:null,_mustExistInList:null,_pickListName:null,_required:null,_storageMode:null,_visible:null,pickListRequest:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",allowMultiplesText:"Allow Multiple Selections:",allowMultiplesTooltipText:"Allows user to select more than one item.",canEditTextText:"Can Edit Text:",canEditTextTooltipText:"Allows user to type value.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",mustExistInListText:"Item Must Exist:",mustExistInListTooltipText:"Requires typed value to be on list.",pickListNameText:"Pick List Name:",pickListNameTooltipText:"Name of the list of values the user can select from when entering data.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",storageModeText:"Storage Mode:",storageModeTooltipText:"How the value is stored: Text, Id, or Code.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},displayModeTypeText:{"AsControl":"As Control","AsText":"As Text","AsHyperlink":"As Hyperlink"},storageModeTypeText:{"Text":"Text","Id":"ID","Code":"Code"},pickListRequestErrorText:"Unable to retrieve picklists from server.",constructor:function(){lang.mixin(this,_139a);},setup:function(){this.inherited(arguments);this._allowMultiples.set("value",this._designer.get("allowMultiples"));this._canEditText.set("value",this._designer.get("canEditText"));this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._displayMode.set("value",this._designer.get("displayMode"));this._enabled.set("value",this._designer.get("enabled"));this._maxLength.set("value",this._designer.get("maxLength"));this._mustExistInList.set("value",this._designer.get("mustExistInList"));this._pickListName.set("value",this._designer.get("pickListName"));this._required.set("value",this._designer.get("required"));this._storageMode.set("value",this._designer.get("storageMode"));this._visible.set("value",this._designer.get("visible"));var _139b=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_139b&&_139b["DataItemName"])||"");},destroy:function(){if(this.pickListRequest){this.pickListRequest.abort();}this.inherited(arguments);},createPickListRequest:function(){var _139c=new Sage.SData.Client.SDataResourceCollectionRequest(this.dataService).setCount(300).setStartIndex(0);_139c.setResourceKind("picklists");_139c.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.OrderBy,"name asc");return _139c;},requestPickListNames:function(){var _139d=this.createPickListRequest();if(_139d){this.pickListRequest=_139d.read({success:this.onRequestPickListNamesSuccess,failure:this.onRequestPickListNamesFailure,scope:this});}},onRequestPickListNamesSuccess:function(feed){this.pickListRequest=null;this.processPickListFeed(feed);},onRequestPickListNamesFailure:function(_139e,o){this.pickListRequest=null;alert(string.substitute(this.pickListRequestErrorText,[_139e,o]));},processPickListFeed:function(feed){if(!feed["$resources"]){return;}var _139f=new _1396({data:{identifier:"$key",label:"name",items:[]}});for(var i=0;i<feed["$resources"].length;i++){var entry=feed["$resources"][i];if(entry.name){_139f.newItem(entry);}}this._pickListName.set({store:_139f,disabled:false});},_onAllowMultiplesChange:function(value){if(this.isSuspended()){return;}this._designer.set("allowMultiples",value);},_onCanEditTextChange:function(value){if(this.isSuspended()){return;}this._designer.set("canEditText",value);},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onDefaultDataBindingChange:function(value){},_onDisplayModeChange:function(value){if(this.isSuspended()){return;}this._designer.set("displayMode",value);},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onMaxLengthChange:function(value){if(this.isSuspended()){return;}this._designer.set("maxLength",value);},_onMustExistInListChange:function(value){if(this.isSuspended()){return;}this._designer.set("mustExistInList",value);},_onPickListNameChange:function(value){if(this.isSuspended()){return;}this._designer.set("pickListName",value);var _13a0=this._pickListName.get("item");this._designer.set("pickListId",_13a0["$key"][0]);},_onRequiredChange:function(value){if(this.isSuspended()){return;}this._designer.set("required",value);},_onStorageModeChange:function(value){if(this.isSuspended()){return;}this._designer.set("storageMode",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/TaskPane/ActivityTaskContents":function(){define("Sage/TaskPane/ActivityTaskContents",["dijit/_Widget","Sage/_Templated","dojo/_base/declare"],function(_13a1,_13a2,_13a3){var _13a4=_13a3("Sage.TaskPane.ActivityTaskContents",[_13a1,_13a2],{widgetsInTemplate:true,templateLocation:"",templateString:"",widgetTemplate:"",constructor:function(_13a5){this.widgetTemplate=_13a5.taskTemplate;dojo.subscribe("/sage/ui/list/selectionChanged",function(_13a6){var _13a7=dojo.byId("selectionCount");if(_13a7){_13a7.innerHTML=_13a6.getTotalSelectionCount();}});},_clearSelection:function(e){var _13a8=dijit.byId("list");if(_13a8){_13a8._listGrid.selection.clear();}}});return _13a4;});},"Sage/UI/Controls/Phone":function(){define("Sage/UI/Controls/Phone",["dijit/_Widget","Sage/_Templated","Sage/UI/Controls/TextBox","dojo/_base/declare"],function(_13a9,_13aa,_13ab,_13ac){var _13ad=_13ac("Sage.UI.Controls.Phone",_13ab,{slxchangehook:"true",_setslxchangehookAttr:{node:"focusNode",type:"attribute",attribute:"slxchangehook"},shouldPublishMarkDirty:true,autoPostBack:false,postCreate:function(){this.inherited(arguments);this.unformattedValue=this.unformatNumber(this.get("value"));},unformattedValue:"",formatPhoneChange:function(_13ae){var _13af=this.formatNumberForDisplay(_13ae);this.unformattedValue=this.unformatNumber(_13ae);this.set("value",_13af);},formatters:[{test:/^\+.*/,format:"{0}"},{test:/^(\d{3})(\d{3,4})$/,format:"{3}-{4}"},{test:/^(\d{3})(\d{3})(\d{2,4})$/,format:"({3}) {4}-{5}"},{test:/^(\d{3})(\d{3})(\d{2,4})([^0-9]{1,}.*)$/,format:"({3}) {4}-{5}{6}"},{test:/^(\d{11,})(.*)$/,format:"{1}"}],unformatNumber:function(_13b0){var n=_13b0;n=n.replace("(","");n=n.replace(")","");n=n.replace(" ","");n=n.replace("-","");return n;},formatNumberForDisplay:function(_13b1,clean){var n=_13b1;if(typeof clean==="undefined"){clean=n;}for(var i=0;i<this.formatters.length;i++){var _13b2=this.formatters[i],match;if((match=_13b2.test.exec(clean))){return String.format.apply(String,[_13b2.format,n,clean].concat(match));}}return n;},onChange:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}this.formatPhoneChange(e);}});return _13ad;});},"Sage/UI/Alarms/nls/ActivityAlarm":function(){define("Sage/UI/Alarms/nls/ActivityAlarm",["Sage/LanguageList","dojo/_base/lang"],function(_13b3,lang){var nls={root:{noSubjectText:"No Subject",contactText:"Contact",accountText:"Account",opportunityText:"Opportunity",leadText:"Lead",companyText:"Company",recurringText:"Recurring",ticketText:"Ticket",leaderText:"Leader",locationText:"Location"}};return lang.mixin(_13b3,nls);});},"url:Sage/Utility/File/templates/FallbackFilePicker_LibraryDoc.html":"[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"uploadFileDialog\" title=\"{%= $.addLibraryFileText %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onHide\">',\r\n        '<iframe src=\"about:blank\" style=\"width:0px;height:0px;border-width:0px;\" name=\"{%= $._iframeId %}\" id=\"{%= $._iframeId %}\" dojoAttachPoint=\"_iframe\" dojoAttachEvent=\"onload:_iframeLoad\"></iframe>',\r\n        '<form method=\"post\" enctype=\"multipart/form-data\" action=\"\" target=\"{%= $._iframeId %}\" dojoAttachPoint=\"_postForm\" class=\"attachment-properties-form\">',\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\">',\r\n                 '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.uploadFileText %}\" >',\r\n                    '<input name=\"file\" multiple=\"false\" type=\"file\" dojoAttachEvent=\"onchange:_onNewFile\" dojoAttachPoint=\"btn_FileSelect\" class=\"uploadButton\" />',\r\n                 '</div>',\r\n                 '<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.descriptionText %}\" name=\"description\" id=\"{%= $.id %}_tb_Description\" dojoAttachPoint=\"tb_Description\" maxlength=\"255\" ></div>',\r\n                 '<input type=\"hidden\" dojoType=\"dijit.form.TextBox\" name=\"fileName\" id=\"{%= $.id %}_tb_realFileName\" dojoAttachPoint=\"tb_realFileName\" maxlength=\"255\" />',\r\n            '</div>',\r\n            '<div class=\"general-dialog-actions\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                '<span>&nbsp;&nbsp</span>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n            '</div>',\r\n        '</form>',\r\n    '</div>',\r\n'</div>'\r\n]","Sage/TaskPane/ActivityTaskPaneActions":function(){define("Sage/TaskPane/ActivityTaskPaneActions",["dojo/parser","dojo/ready"],function(_13b4,ready){Sage.namespace("TaskPane.ActivityTaskPaneActions");Sage.TaskPane.ActivityTaskPaneActions={scheduleMeeting:function(){this._getActivityService().scheduleActivity({type:"Meeting"});},scheduleToDo:function(){this._getActivityService().scheduleActivity({type:"ToDo"});},schedulePhoneCall:function(){this._getActivityService().scheduleActivity({type:"PhoneCall"});},schedulePerosnalActivity:function(){this._getActivityService().scheduleActivity({type:"Personal"});},completeActivity:function(){this._getActivityService().completeActivity();},deleteActivity:function(){this._getActivityService().deleteActivity();},acceptConfirmation:function(){this._getActivityService().acceptConfirmation();},declineConfirmation:function(){this._getActivityService().declineConfirmation();},deleteConfirmation:function(){this._getActivityService().deleteConfirmation();},scheduleEvent:function(){this._getActivityService().scheduleEvent();},deleteEvent:function(){this._getActivityService().deleteEvent();},scheduleLitRequest:function(){this._activityService.scheduleLitRequest();},deleteLitRequest:function(){this._getActivityService().deleteLitRequest();},_getActivityService:function(){return Sage.Services.getService("ActivityService");}};return Sage.TaskPane.ActivityTaskPaneActions;});},"Sage/MainView/Opportunity/nls/OpportunityStatistics":function(){define("Sage/MainView/Opportunity/nls/OpportunityStatistics",["Sage/LanguageList","dojo/_base/lang"],function(_13b5,lang){var nls={root:{opportunityStatistics_Caption:"Opportunity Statistics",loadingMessge:"Loading...",opportunityCount:"# of Opportunities",salesPotentialTotal:"Sales Potential Total (Average)",weightedPotentialTotal:"Weighted Potential Total (Average)",averageCloseProbability:"Average Close Probability",actualAmountTotal:"Actual Amount Total (Average)",averageDaysOpen:"Average # of Days Open",rangeEstClose:"Range of Est. Close (Min - Max)",btnClose_Caption:"Close",errorRequestingStatistics:"Sorry an error occured attempting to request opportunity statistics."}};return lang.mixin(_13b5,nls);});},"Sage/UI/Filters/GroupFilterConfigurationProvider":function(){define("Sage/UI/Filters/GroupFilterConfigurationProvider",["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/Data/GroupLayoutSingleton","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang","dijit/registry","dojo/string","Sage/Utility/Filters","dojo/json"],function(_13b6,_13b7,_13b8,_13b9,_13ba,lang,_13bb,_13bc,_13bd,json){var _13be=_13ba("Sage.UI.Filters.GroupFilterConfigurationProvider",[_13b7,_13b6],{FILTER_COUNT:150,_configuration:null,_hasLayoutConfiguration:false,_hasFilterHiddenConfiguration:false,serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"},"systemDataService":{type:"sdata",name:"system"}},constructor:function(_13bf){this.inherited(arguments);this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));},_onGroupContextChanged:function(){this.onConfigurationChange();},onConfigurationChange:function(){},_createConfiguration:function(entry,_13c0){var _13c1=entry&&entry.layout,_13c2=[],_13c3=[],i=0,_13c4=this.groupContextService&&this.groupContextService.getContext(),_13c5=_13c4&&_13c4.CurrentGroupID,_13c6=_13c4&&_13c4.CurrentEntity,_13c7=this.systemDataService,_13c8=this.metaDataService,_13c9,where;for(i=0;i<_13c1.length;i++){_13c2.push("\""+_13c1[i].propertyPath+"\"");_13c3.push("\""+_13c1[i].caption+"\"");}_13c9=new Sage.SData.Client.SDataResourcePropertyRequest(_13c8);_13c9.setResourceKind("entities");_13c9.setResourceSelector("\""+_13c6+"\"");_13c9.setResourceProperty("filters");_13c9.setQueryArg("count",this.FILTER_COUNT);if(_13c6==="User"){_13c3.push("\"Role\"");_13c3.push("\"Team\"");}where=_13bc.substitute("filterType ne \"analyticsMetric\" and (propertyName in (${0}) or displayName in (${1}))",[_13c2.join(","),_13c3.join(",")]);_13c9.setQueryArg("where",where);this._configuration.store=new _13b9({executeReadWith:"readFeed",request:_13c9});this._configuration.createStoreForFilter=function(_13ca){var _13cb=new Sage.SData.Client.SDataResourcePropertyRequest(_13c7);_13cb.setResourceKind("groups");_13cb.setResourceSelector("\""+_13c5+"\"");_13cb.setResourceProperty("$queries/executeMetric");_13cb.setQueryArg("_filterName",_13ca.filterName);_13cb.setQueryArg("orderby","displayName");return _13ca&&_13ca.filterName?new _13b9({executeReadWith:"readFeed",request:_13cb}):null;};this._configuration.getFilterManager=function(){var _13cc=_13bb.byId("list");return _13cc&&_13cc.get("filterManager");};this._configuration.groupId=_13c5;},requestConfiguration:function(_13cd){this._configuration={};this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;var _13ce=new _13b8(),group=this.getCurrentGroup(),_13cf=lang.hitch(this,this._onRequestConfigurationSuccess,_13cd||{}),_13d0=lang.hitch(this,this._onRequestConfigurationFailure,_13cd||{});_13ce.getGroupLayout(this.formatPredicate(group),_13cf,_13d0,group.$key);this._getHiddenFilters(_13cd);},formatPredicate:function(group){return "'"+group.$key+"'";},getCurrentGroup:function(){var _13d1=this.groupContextService&&this.groupContextService.getContext(),_13d2=_13d1&&_13d1.CurrentFamily,name=_13d1&&_13d1.CurrentName,id=_13d1&&_13d1.CurrentGroupID;return {name:name,family:_13d2,$key:id};},_onRequestConfigurationSuccess:function(_13d3,entry){this._createConfiguration(entry,_13d3);this._hasLayoutConfiguration=true;this._callOptionsSuccess(_13d3);},_onRequestConfigurationFailure:function(_13d4,_13d5){if(_13d4.failure){_13d4.failure.call(_13d4.scope||this,_13d5,_13d4,this);}},_getHiddenFilters:function(_13d6){var key=this._getHiddenFiltersKey();if(key){_13bd.getHiddenFilters(key,lang.hitch(this,this._onHiddenFiltersFetchComplete,_13d6||{}),function(err){console.error(err);});}},_getHiddenFiltersKey:function(){var key=_13bd.getHiddenFiltersKey();return key;},_onHiddenFiltersFetchComplete:function(_13d7,_13d8){if(_13d8&&_13d8.response&&_13d8.response.value){this._configuration._hiddenFilters=json.parse(_13d8.response.value);if(this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array){this._configuration._hiddenFilters={};}}this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey();this._hasFilterHiddenConfiguration=true;this._callOptionsSuccess(_13d7);},_callOptionsSuccess:function(_13d9){if(!this._hasLayoutConfiguration||!this._hasFilterHiddenConfiguration){return;}if(_13d9.success){_13d9.success.call(_13d9.scope||this,this._configuration,_13d9,this);this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;}}});return _13be;});},"Sage/UI/NavBarPane":function(){define("Sage/UI/NavBarPane",["dijit/layout/_LayoutWidget","Sage/_Templated","Sage/UI/MenuItem","dijit/Menu","dojo/_base/declare"],function(_13da,_13db,_13dc,_13dd,_13de){var _13df=_13de("Sage.UI.NavBarPane",[_13da,_13db],{textImageRelationMap:{0:new Simplate(["<div class=\"Global_Images icon32x32 {%: $.imageClass %}\"></div>","<br />","<span>{%: $.text %}</span>"]),1:new Simplate(["<span>{%: $.text %}</span>","<br />","<div class=\"Global_Images icon32x32 {%: $.imageClass %}\"></div>"]),2:new Simplate(["<div class=\"Global_Images icon32x32 {%: $.imageClass %}\"></div>","<span>{%: $.text %}</span>"]),3:new Simplate(["<span>{%: $.text %}</span>","<div class=\"Global_Images icon32x32 {%: $.imageClass %}\"></div>"])},attributeMap:{"listContent":{node:"listNode",type:"innerHTML"}},widgetTemplate:new Simplate(["<div class=\"nav-bar-pane\">","<ul dojoAttachPoint=\"listNode,containerNode\"></ul>","</div>"]),itemTemplate:new Simplate(["<li id=\"{%: $.id %}\" class=\"{%: $.className %}\" aria-haspopup=\"{%: $.haspopup %}\">","<a href=\"{%: $.href %}\">","{%= $.innerTemplate.apply($) %}","</a>","</li>"]),title:null,items:null,_requiredContextMenus:null,_contextMenus:null,constructor:function(){this._requiredContextMenus=[];this._contextMenus=[];},postCreate:function(){this.inherited(arguments);this._processItemCollection(this.items);},startup:function(){this.inherited(arguments);this._processContextMenus(this._requiredContextMenus);},destroy:function(_13e0){this.inherited(arguments);dojo.forEach(this._contextMenus,function(item){item.destroy(_13e0);});},_processItemCollection:function(items){var _13e1=[];dojo.forEach(items,function(item){item.id=item.id||Sage.guid("NavItem");if(window.location.href.indexOf(item.href)!==-1){item.className="nav-bar-item-current-page";}else{item.className="nav-bar-item";}if(item.contextmenu){this._requiredContextMenus.push({id:item.id,name:item.contextmenu});item.haspopup="true";}else{item.haspopup="false";}item.innerTemplate=this.textImageRelationMap[item.textImageRelation];_13e1.push(this.itemTemplate.apply(item,this));},this);this.set("listContent",_13e1.join(""));},_processContextMenus:function(menus){var i,j,menu,_13e2,item,_13e3,items;for(i=0;i<menus.length;i++){menu=menus[i];_13e3=Sage.UI.DataStore.ContextMenus&&Sage.UI.DataStore.ContextMenus[menu.name];items=_13e3&&_13e3.items;if(items&&items.length>0){_13e2=new _13dd({targetNodeIds:[menu.id]});for(j=0;j<items.length;j++){item=items[j];_13e2.addChild(new _13dc({id:_13e2.id+"_"+item.id,label:item.text||"...",title:item.tooltip||"...",img:item.img||this._blankGif,ref:item.href,onClick:this._onContextMenuClick}));}this._contextMenus.push(_13e2);}}},_onContextMenuClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}});return _13df;});},"Sage/UI/URL":function(){define("Sage/UI/URL",["dijit/_Widget","Sage/_Templated","dijit/form/ValidationTextBox","dojox/validate/regexp","Sage/UI/Controls/TextBox","dojo/_base/declare"],function(_13e4,_13e5,_13e6,_13e7,_13e8,_13e9){dojo.mixin(_13e6.prototype.attributeMap,{slxchangehook:"focusNode"});var _13ea=_13e9("Sage.UI.URL",[_13e4,_13e5],{widgetTemplate:new Simplate(["<div class=\"urlcontrol\" slxcompositecontrol=\"true\" id=\"{%= $.id %}\" >","<input data-dojo-type=\"Sage.UI.Controls.TextBox\" name=\"{%= $.name %}\" ","data-dojo-props=\"textWithIcons: {%= $.buttonVisible %}\"","dojoAttachPoint=\"focusNode\" type=\"text\" style=\"\" ","hotKey=\"{%= $.hotKey %}\" ","{% if($.disabled === \"disabled\") { %} ","disabled=\"disabled\" ","{% } %}","{% if($.readonly === \"readonly\") { %} ","readonly=\"readonly\" ","{% } %}","{% if ($.disabled !== \"disabled\") { %} "," dojoAttachEvent=\"onChange:formatURLChange, onDblClick:launchWebSite\" ","{% } %}"," regExpGen=\"dojox.validate.regexp.url\" tabindex=\"{%= $.tabIndex %}\" ","value=\"{%= $.url %}\" required=\"{%= $.required %}\" ","id=\"{%= $.id %}_urlText\" maxlength=\"{%= $.maxLength %}\" > ","{% if ($.buttonVisible && $.disabled !== \"disabled\") { %}","<img alt=\"{%= $.buttonToolTip %}\" data-dojo-attach-event=\"ondijitclick: launchWebSite\"   "," tabindex=\"{%= $.tabIndex %}\" alt=\"{%= $.buttonToolTip %}\" ","src=\"{%= $.buttonImageUrl %}\" title=\"{%= $.buttonToolTip %}\" id=\"{%= $.id %}_urlButton\"> ","{% } %}","</div>"]),name:"",autoPostBack:false,readonly:"",disabled:"",hotKey:"",buttonVisible:true,maxLength:128,buttonImageUrl:"",buttonToolTip:"WWW",required:false,tabIndex:0,url:"",webAddressId:"",constructor:function(_13eb){_13eb.id=_13eb.webAddressId;},postCreate:function(){this.formatURL();this.inherited(arguments);},widgetsInTemplate:true,attributeMap:{slxchangehook:{node:"focusNode",type:"attribute",attribute:"slxchangehook"}},formatURL:function(){dojo.style(this.focusNode.focusNode,"color","#000099");dojo.style(this.focusNode.focusNode,"font-family","Tahoma");},formatURLChange:function(){if(this.url!==this.focusNode.value){this.url=this.focusNode.value;}},launchWebSite:function(){var url=this.url;if(url.length<1){return;}var _13ec="http://";var _13ed="https://";var winH;if(url.indexOf(_13ec)===-1&&url.indexOf(_13ed)===-1){url=_13ec+url;}winH=window.open(url,"",["dependent=no","directories=yes","location=yes","menubar=yes","resizeable=yes","pageXOffset=0px","pageYOffset=0px","scrollbars=yes","status=yes","titlebar=yes","toolbar=yes"].join(","));}});return _13ea;});},"Sage/UI/Grid/Plugins/ShowHideColumns":function(){define("Sage/UI/Grid/Plugins/ShowHideColumns",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojox/grid/enhanced/_Plugin","dojox/grid/EnhancedGrid","dijit/Menu","dijit/CheckedMenuItem","dojo/on","dojo/topic"],function(_13ee,array,lang,_13ef,_13f0,Menu,_13f1,on,topic){var _13f2=_13ee("Sage.UI.Grid.Plugins.ShowHideColumns",_13ef,{name:"showHideColumns",privates:{},hideQueue:null,constructor:function(){this.hideQueue=[];this.inherited(arguments);},onStartUp:function(){var menu=new Menu(),_13f3;menu.startup();on(menu,"open",lang.hitch(this,function(){if(this.grid.headerMenu){this.grid.headerMenu.destroyDescendants();}array.forEach(this.grid.layout.cells,function(cell){_13f3=new _13f1({label:cell.name||"",checked:!cell.hidden});_13f3._onClick=lang.hitch({plugin:this,item:_13f3,cell:cell},function(e){this.plugin.hideQueue.push(this.cell);this.item.set("checked",!this.item.checked);e.cancelBubble=true;});this.grid.headerMenu.addChild(_13f3);},this);}));on(menu,"blur",lang.hitch(this,function(){array.forEach(this.hideQueue,function(item){this.grid.layout.setColumnVisibility(item.index,item.hidden);topic.publish("/sage/ui/grid/columnToggle/"+this.grid.id,item);},this);topic.publish("/sage/ui/grid/columnsToggled/"+this.grid.id);this.hideQueue=[];}));this.grid.set("headerMenu",menu);}});_13f0.registerPlugin(_13f2);return _13f2;});},"Sage/MainView/IntegrationContract/nls/AdvancedSearchOptions":function(){define("Sage/MainView/IntegrationContract/nls/AdvancedSearchOptions",["Sage/LanguageList","dojo/_base/lang"],function(_13f4,lang){var nls={root:{dialogCaption:"Link to Accounting",searchOptionsHeader:"Search for Matches in ",searchOptionsText:"The following criteria was used in the previous search. Modify the criteria for a new search. Click OK to begin searching.",propertyText:"Property",operatorText:"Operator",searchText:"Search Value",loadingText:"loading...",loadingDisplay:"Searching for results...",hideImgAltText:"Remove Condition",addImgAltText:"Add Condition",okText:"OK",cancelText:"Cancel"}};return lang.mixin(_13f4,nls);});},"Sage/QuickForms/Design/Editors/FormAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/FormAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/FormAdvancedPropertyEditor"],function(_13f5,lang,_13f6,_13f7,_13f8,_13f9,_13fa,_13fb,_13fc,_13fd){return _13f5("Sage.QuickForms.Design.Editors.FormAdvancedPropertyEditor",[_13f6,_13fb,_13fa],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.generalText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.useEntityNameAsTitleTooltipText %}\">","<label>{%= $.useEntityNameAsTitleText %}</label>","<div data-dojo-attach-point=\"_useEntityNameAsTitle\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onUseEntityNameAsTitleChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_useEntityNameAsTitle:null,titleText:"Advanced",generalText:"General",useEntityNameAsTitleText:"Use Entity Name As Title:",useEntityNameAsTitleTooltipText:"Use name of current entity in form title.",constructor:function(){lang.mixin(this,_13fd);},setup:function(){this.inherited(arguments);this._useEntityNameAsTitle.set("value",this._designer.get("useEntityNameAsTitle"));},_onUseEntityNameAsTitleChange:function(value){if(this.isSuspended()){return;}this._designer.set("useEntityNameAsTitle",value);}});});},"Sage/QuickForms/Design/nls/ColumnDesigner":function(){define("Sage/QuickForms/Design/nls/ColumnDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_13fe,lang){var nls={root:{displayNameText:"Column"}};return lang.mixin(_13fe,nls);});},"Sage/UI/Controls/SingleSelectPickList":function(){require({cache:{"url:Sage/UI/Controls/templates/SingleSelectPickList.html":"<div>\r\n    <select id=\"${id}-Combo\" data-dojo-type=\"Sage.UI.ComboBox\" shouldPublishMarkDirty=\"false\" required=\"${required}\" dojoAttachPoint=\"comboBox\" dojoAttachEvent=\"onBlur: _onBlur,onChange:_onChange\">\r\n    </select>\r\n</div>\r\n"}});define("Sage/UI/Controls/SingleSelectPickList",["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/ComboBox","dojo/data/ItemFileReadStore","dojo/data/ObjectStore","dojo/store/Memory","Sage/UI/ComboBox","Sage/UI/Controls/PickList","dojo/text!./templates/SingleSelectPickList.html","dojo/_base/declare"],function(_13ff,_1400,_1401,_1402,_1403,_1404,_1405,_1406,_1407,_1408,_1409){var _140a=_1409("Sage.UI.Controls.SingleSelectPickList",[_1407,_13ff,_1400,_1401],{constructor:function(_140b){if(_140b.clientId){this.id=_140b.clientId+"-SingleSelectPickList";}this.inherited(arguments);},postCreate:function(){this._setupTooltips(this.comboBox._buttonNode,this.comboBox.textbox);this._setupRenderAsHyperlink();this._setupTooltips();this.inherited(arguments);var _140c=dojo.byId(this._textId);if(_140c&&_140c.value&&(this.comboBox.value!==_140c.value)){this.comboBox.set("value",_140c.value);}},_setupTooltips:function(){if(this.controlTooltip&&this.controlTooltip!==""){this.comboBox.set("title",this.controlTooltip);}if(this.buttonTooltip&&this.buttonTooltip!==""){if(this.comboBox._buttonNode){this.comboBox._buttonNode.title=this.buttonTooltip;}}},_setupRenderAsHyperlink:function(){if(!this.renderAsHyperlink){return;}dojo.addClass(this.comboBox.domNode,"comboAsHyperlink");dojo.connect(this.comboBox.domNode,"onclick",this,function(){this.comboBox.loadDropDown();});},_loadData:function(){var def=new dojo.Deferred();this.getPickListData(def);def.then(dojo.hitch(this,function(data){if(typeof data==="string"){this.comboBox.set("value",data);}var items=[];for(var i=0;i<data.items.$resources.length;i++){var item=data.items.$resources[i];items.push({id:item.$key,code:item.code,number:item.number,text:item.text});}this.storeData={identifier:"id",label:"text",items:items};var _140d=new _1403({data:this.storeData});this.comboBox.set("store",_140d);this.comboBox.set("searchAttr","text");var _140e=dojo.byId(this._textId);var _140f=dojo.byId(this._codeId);if(_140e&&_140e.value){this.lastValidValue=_140e.value;this.initialValue=this.lastValidValue;this.comboBox.set("value",this.lastValidValue);}if(_140f&&_140f.value){var _1410=this.getStoreItemById(_140f.value);if(_1410){this.lastValidValue=_1410.text;this.initialValue=this.lastValidValue;this.comboBox.set("value",this.lastValidValue);}}else{var val=this.comboBox.get("value");if(val||val===""){this.lastValidValue=val;}else{this.lastValidValue=items[0].text;this.comboBox.set("value",this.lastValidValue);}}}),function(e){console.error(e);});if(this.get("canEditText")===false){this.comboBox.textbox.disabled=true;}var len=this.get("maxLength");if(len>0){this.comboBox.set("maxLength",len);}if(this.get("itemMustExist")){dojo.connect(this.comboBox,"onChange",dojo.hitch(this,function(_1411){var valid=dojo.some(this.storeData.items,function(item){if(item.text==_1411||_1411==""){return true;}else{return false;}},this);if(valid){this.lastValidValue=_1411;}if(!valid){if(this.lastValidValue!=="undefined"&&this.lastValidValue!==null){this.comboBox.set("value",this.lastValidValue);}}}));}},uninitialize:function(){this.inherited(arguments);},_onBlur:function(){if(this.comboBox.isValid()&&this.storeData){var val=this.comboBox.get("value");if(val!=this.initialValue){var code="";dojo.forEach(this.storeData.items,function(item,index,array){if(item.text==val){code=item.id;}},this);this.setASPNETInputs(val,code);}}},getStoreItemById:function(id){if(this.storeData){var _1412=null;dojo.forEach(this.storeData.items,function(item,index,array){if(item.id===id){_1412=item;}},this);}return _1412;},_onChange:function(_1413){this.onChange(_1413);},_setPickListNameAttr:function(value){this.inherited(arguments);this._loadData();},_setValueAttr:function(value){this.inherited(arguments);this.comboBox.set("value",value);},_getValueAttr:function(){return this.comboBox.get("value");},templateString:_1408,widgetsInTemplate:true,storeData:null,lastValidValue:"",initialValue:"",disabled:false,_setDisabledAttr:function(_1414){this.disabled=_1414;this.comboBox.set("disabled",_1414);},_getDisabledAttr:function(){return this.disabled=this.comboBox.get("disabled");},focus:function(){this.comboBox.focus();},onChange:function(_1415){}});return _140a;});},"Sage/UI/OrientableMenuBar":function(){define("Sage/UI/OrientableMenuBar",["dijit/MenuBar","dojo/_base/declare"],function(_1416,_1417){var _1418=_1417("Sage.UI.OrientableMenuBar",_1416,{postCreate:function(args){this.inherited(arguments);if(typeof this.orientation!=="undefined"){this._orient=this.orientation;}}});return _1418;});},"Sage/UI/nls/SearchMenuItem":function(){define("Sage/UI/nls/SearchMenuItem",["Sage/LanguageList","dojo/_base/lang"],function(_1419,lang){var nls={root:{findText:"Find",clearText:"Clear",showHiddenText:"Show Hidden: "}};return lang.mixin(_1419,nls);});},"Sage/QuickForms/Design/Help":function(){define("Sage/QuickForms/Design/Help",["dojo/string"],function(_141a){return {defaultTarget:"MCWebHelp",defaultTopic:null,defaultSubSystem:null,defaultUrlFormat:"help/WebClient_CSH.htm#${0}",subSystemUrlFormat:"help/Subsystems/${1}/${1}_CSH.htm#${0}",open:function(topic,_141b,_141c){var url=Sage.Link.getHelpUrl(topic,_141b);window.open(url,_141c||this.defaultTarget);}};});},"Sage/UI/nls/NotesHistoryList":function(){define("Sage/UI/nls/NotesHistoryList",["Sage/LanguageList","dojo/_base/lang"],function(_141d,lang){var nls={root:{typeText:"Type",showDbChangesText:"Show Database Changes",selectAllText:"Select All",dateText:"Date",dateTimeText:"Date/Time",dateRangeText:"Date Range",userText:"User",accountText:"Account",contactText:"Contact",opportunityText:"Opportunity",regardingText:"Regarding",notesText:"Notes",resultText:"Result",categoryText:"Category",sendEmailText:"Send via E-Mail",sendToWordText:"Send to Word",addNoteText:"Add Note",completeAnActivityText:"Complete an Activity",helpText:"Help",pleaseSelectRecordsText:"Please select one or more records",UnableToFindWordMsg:"Cannot start Microsoft Word.  Please check your security settings.",printedOnText:"Printed On"}};return lang.mixin(_141d,nls);});},"Sage/UI/Columns/Lookup":function(){define("Sage/UI/Columns/Lookup",["Sage/Utility","dojox/grid/cells","dojo/_base/declare"],function(_141e,cells,_141f){var _1420=_141f("Sage.UI.Columns.Lookup",cells._Widget,{widgetClass:Sage.UI.SDataLookup,defaultValue:"",constructor:function(o){if(o.lookupOptions.returnObject){this.formatter=function(_1421,_1422,_1423){if(_1421!=null){var _1424=o.lookupOptions.field.split(".");var _1425=_1421;for(var i=0;i<_1424.length;i++){if(_1425){_1425=_1425[_1424[i]];}}return _1425;}return null;};}},getWidgetProps:function(_1426){var luId=this.LuId();var _1427="";if(this.lookupOptions.seedOnRelatedEntity){var oItem=this.item[this.lookupOptions.seedOnRelatedEntity];if(oItem&&typeof oItem.$key!=="undefined"){_1427=oItem.$key;}else{}}return dojo.mixin({},this.widgetProps||{},{id:luId,value:_1426,displayMode:this.lookupOptions.displayMode,seedOnRowEntity:this.lookupOptions.seedOnRowEntity,seedOnRelatedEntity:this.lookupOptions.seedOnRelatedEntity,relatedEntityId:_1427,rowEntityId:this.item.$key,returnObject:this.lookupOptions.returnObject,addEmptyListItem:this.lookupOptions.addEmptyListItem,field:this.lookupOptions.field,name:this.lookupOptions.name,structure:this.lookupStructure,storeOptions:this.lookupStoreOptions,gridOptions:this.lookupGridOptions,shouldPublishMarkDirty:false});},formatNode:function(_1428,_1429,_142a){if(!this.widgetClass){return _1429;}var _142b=dijit.byId(this.LuId());if(!_142b){this.widget=this.createWidget.apply(this,arguments);}else{this.widget=_142b;this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(_142a);this.grid.scroller.rowHeightChanged(_142a,true);this.focus();return undefined;},setCurrentItems:function(){this.editInfo=this.grid.edit.info;this.item=this.grid.getItem(this.editInfo.rowIndex);},LuId:function(){this.setCurrentItems();var _142c=[this.item.$key,this.editInfo.cell.field].join("_");if(_141e.getModeId()==="insert"){_142c=[this.item.$cacheID,this.editInfo.cell.field].join("_");}return _142c;},getValue:function(){this.setCurrentItems();if(this.lookupOptions.returnObject){return (this.widget.focusNode.item!==null)?this.widget.focusNode.item:this.widget.focusNode.value;}return this.widget.focusNode.value;}});return _1420;});},"Sage/UI/Columns/Dnd":function(){define("Sage/UI/Columns/Dnd",["Sage/UI/Columns/DndCell","dojo/_base/declare"],function(_142d,_142e){var _142f=_142e("Sage.UI.Columns.Dnd",dojox.grid.cells._Base,{formatter:function(val,index){var item=this.grid.getItem(index);var _1430=item.displayName||item.columnName||this.defaultValue;var cell=new _142d({value:_1430,index:index});return cell;}});return _142f;});},"Sage/QuickForms/Design/EditableGridControlDesigner":function(){define("Sage/QuickForms/Design/EditableGridControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/GenericBasicPropertyEditor","./Editors/GenericAdvancedPropertyEditor","dojo/i18n!./nls/EditableGridControlDesigner"],function(_1431,array,lang,_1432,_1433,_1434,_1435,_1436,_1437,_1438,_1439,_143a,_143b){return _1431("Sage.QuickForms.Design.EditableGridControlDesigner",[_1435,_1436,_1434,_1437],{designSupport:{visible:true},editors:[_1439,_143a,_1438],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<table class=\"{%= $.fieldClass %}-table\" data-dojo-attach-point=\"tableNode\">","</table>","</div>"]),tableHeaderTemplate:new Simplate(["<th>{%: $.ColumnHeading || $.Text %}</th>"]),fieldClass:"design-editablegrid",helpTopicName:"visual_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.SDataGrid.QFSDataGrid, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Editable Grid",constructor:function(){lang.mixin(this,_143b);},_getColumnsAttr:function(){return lang.getObject("Columns",false,this.entry);},_setColumnsAttr:function(value){lang.setObject("Columns",value,this.entry);},renderColumns:function(){var _143c=this.get("columns"),row=_1432.create("tr");for(var i=0;i<_143c.length;i++){var _143d=lang.clone(_143c[i]);_143d.widthStyle=_143d.Width>0?_143d.Width+"em":"auto";_1432.place(this.tableHeaderTemplate.apply(_143d,this),row,"last");}_1432.place(row,this.tableNode,"only");},startup:function(){this.inherited(arguments);this.renderColumns();}});});},"Sage/QuickForms/Design/nls/UrlControlDesigner":function(){define("Sage/QuickForms/Design/nls/UrlControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_143e,lang){var nls={root:{displayNameText:"Url"}};return lang.mixin(_143e,nls);});},"Sage/Data/QBTreeStoreModel":function(){define("Sage/Data/QBTreeStoreModel",["dijit/tree/ForestStoreModel","Sage/Data/SDataServiceRegistry","dojo/string","dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(_143f,_1440,_1441,array,_1442,lang){return _1442("Sage.Data.QBTreeStoreModel",_143f,{insertedChildren:null,constructor:function(){this.insertedChildren=[];},convertDescriptionToFilter:function(_1443){if(_1443.$descriptor){var _1444=_1443.$descriptor;_1444=_1444.replace(this.rootId+":","");return _1444;}return _1443.id;},getChildren:function(_1445,_1446,_1447){this.store.fetch({queryArgs:{"_pathFilter":this.convertDescriptionToFilter(_1445)},resourcePredicate:_1445.root?undefined:"",onComplete:lang.hitch(this,function(data,obj){var _1448=_1440.getSDataService("metadata",false,true,false),_1449,table,i,temp,_144a=[],_144b,_144c;table=_1445.id||_1445.toTable;array.forEach(this.insertedChildren,lang.hitch(this,function(child){if(child.parentItem===_1445){data.push(child);}}));_144b=[function(item){if(item.toTable===table){item.toTable=item.fromTable;temp=item.toField;item.toField=item.fromField;item.fromTable=table;item.fromField=temp;}},function(item){var _144d=item.joinType,_144e={"Left":"[left]",">":"[left]","Inner":"[inner]","=":"[inner]","Right":"[right]","<":"[right]"},_144f=_144e[_144d];if(item.toTable){item.label=_1441.substitute("${2} (${1} -> ${3})${4}",[item.fromTable,item.fromField,item.toTableDisplayName,item.toField,_144f]);}},function(item){item.parentItem=_1445;},function(item){item.children=[];},function(item){var _1450=item.joinType,_1451={"Left":">","Inner":"=","Right":"<",},_1452=_1451[_1450]||item.joinType;item.dataPathSegment=_1441.substitute("${0}${1}${2}.${3}",[item.fromField,_1452,item.toField,item.toTable]);},function(item){item.displayPathSegment=_1441.substitute("${0}",[item.toTable]);},function(item){var _1453;function _1454(path,_1455){if(_1455.root){if(path&&path.length>0){if(path.startsWith("!")){path=path.substring(1,path.length);}}return _1455.id+":"+path;}return _1454(_1441.substitute("!${0}",[_1455.dataPathSegment])+path,_1455.parentItem);};_1453=_1454("!",item);item.dataPath=_1453;item["$descriptor"]=item["$descriptor"]||_1453;},function(item){var _1456;function _1457(path,_1458){if(_1458.root){return _1458.id+path;}return _1457(_1441.substitute(".${0}${1}",[_1458.displayPathSegment,path]),_1458.parentItem);};_1456=_1457("",item);item.displayPath=_1456;}];_144c=function(item){return function(func){func(item);};};for(i=0;i<data.length;i++){array.forEach(_144b,lang.hitch(this,_144c(data[i])));}data=array.filter(data,lang.hitch(this,function(item){var _1459=item.parentItem;while(!_1459.root){if(item.fromField===_1459.fromField){return false;}_1459=_1459.parentItem;}if(item.fromField===_1459.id){return false;}return true;}));data.sort(function(a,b){if(a.toTable<b.toTable){return -1;}if(a.toTable>b.toTable){return 1;}return 0;});_1445.children=data;_1446(data,obj);}),onError:_1447});},getIdentity:function(item){return item.$descriptor;},mayHaveChildren:function(item){return item.root||true;},newItem:function(args,_145a){var child={"$descriptor":args.fromtable,"$etag":"","$httpStatus":200,"fromTable":args.fromtable,"fromField":args.fromfield,"toTable":args.totable,"toTableDisplayName":args.fromtable,"toField":args.tofield,"cascadeType":args.cascadetype,"joinType":args.jointype,"parentItem":_145a.item,"children":[]};this.insertedChildren.push(child);this.addItemToStore(child,_145a.item);},addItemToStore:function(_145b,_145c){var store=this.store,_145d=this.childrenAttrs[0],_145e=store.getValue(_145c,_145d),_145f;if(_145c){if(_145e){_145f=_145e.slice(0);_145f.push(_145b);store.setValue(_145c,_145d,_145f);}}}});});},"Sage/UI/ImageButton":function(){require({cache:{"url:Sage/templates/ImageButton.html":"<span id=\"${id}\" class=\"dijit dijitReset dijitInline\" role=\"presentation\">\r\n<span class=\"dijitReset dijitInline dijitButtonNode imageButtonNode\" data-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\">\r\n        <span class=\"dijitReset dijitStretch dijitButtonContents\"\r\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\r\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\r\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\">\r\n                <img alt=\"\" src=\"\" data-dojo-attach-point=\"iconNode\"/>\r\n                <div class=\"dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}\" data-dojo-attach-point=\"iconNodeSprite\"></div>\r\n            </span\r\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\r\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\r\n\t\t\t\tid=\"${id}_label\"\r\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\r\n\t\t\t></span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\r\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\r/></span>\r\r\n"}});define("Sage/UI/ImageButton",["dijit/form/Button","dijit/_Widget","dojo/text","dojo/dom-style","dojo/_base/declare","dojo/text!../templates/ImageButton.html"],function(_1460,_1461,text,_1462,_1463,_1464){var _1465=_1463("Sage.UI.ImageButton",_1460,{hoverText:"",templateString:_1464,iconClass:"",_setIconClassAttr:{node:"iconNode",type:"class"},label:"",_setLabelAttr:{node:"containerNode",type:"innerHTML"},icon:"",_setIconAttr:{node:"iconNode",type:"attribute",attribute:"src"},imageClass:"",iconStyle:"",_setIconStyleAttr:{node:"iconNode",type:"style"},tooltip:"",_setTooltipAttr:{node:"titleNode",type:"attribute",attribute:"title"},alt:"",_setAltAttr:{node:"valueNode",type:"attribute",attribute:"title"},postMixInProperties:function(){if(this.hasImageClass()&&this.hasIcon()){this.icon=this._blankGif;}else{this.icon=this.icon||this._blankGif;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.hasImageClass()){this.set("icon",this._blankGif);_1462.set(this.iconNode,"display","none");}else{_1462.set(this.iconNodeSprite,"display","none");}},hasImageClass:function(){if(this.imageClass&&this.imageClass!=="noIcon"){return true;}return false;},hasIcon:function(){if(this.icon&&this.icon!==this._blankGif){return true;}return false;},_onButtonClick:function(e){}});return _1465;});},"Sage/MainView/ActivityMgr/PastDueListPanelConfig":function(){define("Sage/MainView/ActivityMgr/PastDueListPanelConfig",["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/UI/SDataSummaryFormatterScope","Sage/Data/SDataStore","Sage/Data/SDataStore","Sage/UI/Columns/DateTime","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/i18n!./nls/ActivityListPanelConfig"],function(_1466,_1467,_1468,_1469,_146a,_146b,_146c,_146d,_146e,_146f,_1470){var _1471=_146f("Sage.MainView.ActivityMgr.PastDueListPanelConfig",[_1466],{constructor:function(){this._nlsResources=_1470;this._listId="pastdue";this._resourceKind="useractivities";this.entityName="UserActivity";this._contextMenu="ActivityListContextMenu";this._scheduleContextMenu="ScheduleContextMenu";this._service=_146e.getSDataService("system");this._structure=this._getStructure();this._select=this._getSelect();this._include=this._getInclude();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.toolBar=this._getToolBars();this.keyField="$key";this.hasCompositeKey=true;this.rebuildOnRefresh=true,dojo.subscribe("/entity/activity/change",this._onListRefresh);dojo.subscribe("/entity/activity/delete",this._onListRefresh);dojo.subscribe("/entity/activity/create",this._onListRefresh);dojo.subscribe("/entity/userActivity/change",this._onListRefresh);dojo.subscribe("/entity/userActivity/delete",this._onListRefresh);dojo.subscribe("/entity/userActivity/create",this._onListRefresh);dojo.subscribe("/entity/activity/confirm",this._onListRefresh);dojo.subscribe("/entity/activity/decline",this._onListRefresh);dojo.subscribe("/entity/userNotification/delete",this._onListRefresh);},_onListRefresh:function(event){var _1472=Sage.Services.getService("ActivityService");_1472.refreshList("pastdue");},_getSelect:function(){var _1473=["Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Alarm","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","UserId","AlarmTime","Alarm","Status"];return _1473;},_getInclude:function(){var _1474=["Activity","$descriptors"];return _1474;},_getSort:function(){var sort=[];return sort;},_getWhere:function(){var where;var dt=new Date();var dtNow=Sage.Utility.Convert.toIsoStringFromDate(dt);var _1475=_1468.formatTimelessEndDate(dt,"day",-1);where=dojo.string.substitute("(User.Id eq '${0}') and ( Activity.Type ne \"atLiterature\" ) and ((Alarm eq 'false') or (Alarm eq null)) and ((Activity.StartDate lt '${1}') and ((Activity.Timeless eq 'false') or (Activity.Timeless eq null )) or ((Activity.StartDate lt '${2}') and (Activity.Timeless eq 'true' )))",[this._currentUserId,dtNow,_1475]);return where;},_getStructure:function(){var _1476="<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />";var _1477="<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />";var _1478="<div class='Global_Images icon16x16 icon_unconfirmedActivity16x16' title='"+this._nlsResources.colNameUnConfirmStatus+"' />";var _1479=this._nlsResources.colNameType||"Activity Type";var _147a=this._nlsResources.colNameStartDate||"Start Date";var _147b=this._nlsResources.colNameDuration||"Duration";var _147c=this._nlsResources.colNameContact||"Name";var _147d=this._nlsResources.colNameAccount||"Account/Company";var _147e=this._nlsResources.colNameRegarding||"Regarding";var _147f=this._nlsResources.colNamePriority||"Priority";var _1480=this._nlsResources.colNameUserId||"Leader";var _1481=this._nlsResources.colNameTypeName||"Type";var _1482=[{field:"Status",name:_1478,type:_1468.activityConfirmStatusCell,width:"20px"},{field:"Attachment",name:_1476,type:_1468.activityAttachCell,width:"20px"},{field:"Activity.Recurring",name:_1477,type:_1468.activityRecurringCell,width:"20px"},{field:"Activity.Type",name:_1479,type:_1468.activityTypeCell,width:"90px"},{field:"Activity.StartDate",name:_147a,type:_146d,timelessField:"Activity.Timeless",width:"100px"},{field:"Activity.Duration",name:_147b,type:_1468.activityDurationCell,width:"40px"},{field:"Activity.ContactId",name:_1481,type:_1468.activityNameTypeCell,width:"40px"},{field:"Activity.ContactName",name:_147c,type:_1468.activityNameCell,width:"200px"},{field:"Activity.AccountName",name:_147d,type:_1468.activityAccountCell,width:"200px"},{field:"Activity.Description",name:_147e,width:"100px"},{field:"Activity.Priority",name:_147f,width:"40px"},{field:"Activity.Leader",name:_1480,type:_1468.activityLeaderCell,width:"200px"}];return _1482;},_getSummaryConfig:function(){var store=new _146b({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:["Activity","$descriptors"],select:["$key"],expandRecurrences:false,where:this._where});var _1483=[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}];var _1484=this._getFormatterScope();var _1485={structure:_1483,layout:"layout",store:store,rowHeight:120,rowsPerPage:10,formatterScope:_1484};return _1485;},_getDetailConfig:function(){var _1486=this._getFormatterScope();var _1487=this._getSummaryDetailRequestConfig();var _1488={resourceKind:this._resourceKind,requestConfiguration:_1487,templateLocation:"MainView/ActivityMgr/Templates/UserActivityDetailSummary.html"};return _1488;},_getSummaryListRequestConfig:function(){var _1489={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/Notes","Activity/PhoneNumber"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};return _1489;},_getSummaryDetailRequestConfig:function(){var _148a={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/LongNotes","Activity/PhoneNumber"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};return _148a;},_getFormatterScope:function(){var _148b=this._getSummaryListRequestConfig();var _148c=new _146a({templateLocation:"MainView/ActivityMgr/templates/UserActivityListSummary.html",resetDataManager:true,requestConfiguration:_148b});return _148c;},_getToolBars:function(){var _148d={items:[]};return _148d;},getTimelessProperty:function(_148e){return "Activity.Timeless";}});return _1471;});},"Sage/Utility/File/nls/GoogleDocPicker":function(){define("Sage/Utility/File/nls/GoogleDocPicker",["Sage/LanguageList","dojo/_base/lang"],function(_148f,lang){var nls={root:{googleDocumentsTitle:"Google Documents",couldNotOpenWindowMsg:"Could not open authentication window - please check your popup blocker settings."}};return lang.mixin(_148f,nls);});},"Sage/QuickForms/Design/nls/ComboBoxControlDesigner":function(){define("Sage/QuickForms/Design/nls/ComboBoxControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_1490,lang){var nls={root:{displayNameText:"ComboBox"}};return lang.mixin(_1490,nls);});},"Sage/UI/SDataSummaryFormatterScope":function(){define("Sage/UI/SDataSummaryFormatterScope",["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/Data/SDataSummaryViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(_1491,i18n,_1492,_1493,_1494,_1495){var _1496=_1495("Sage.UI.SDataSummaryFormatterScope",[_1492],{constructor:function(args){dojo.mixin(this,args);this.widgets=[];this.preFetchResources();this._setupDataManager();},_setupDataManager:function(){this.dataManager=new _1493(this.requestConfiguration);if(Sage.Services.hasService("SummaryViewDataManager")){Sage.Services.removeService("SummaryViewDataManager");}Sage.Services.addService("SummaryViewDataManager",this.dataManager);}});return _1496;});},"Sage/MainView/ActivityMgr/nls/LitRequestListPanelConfig":function(){define("Sage/MainView/ActivityMgr/nls/LitRequestListPanelConfig",["Sage/LanguageList","dojo/_base/lang"],function(_1497,lang){var nls={root:{colNameView:"View",colNameContact:"Contact",colNameDescription:"Description",colNameFillDate:"Filled",colNameFillStatus:"Status",colNameOptions:"Options",colNamePriority:"Priority",colNameReqestDate:"Request Date",colNameSendDate:"Send Date",colNameSendVia:"Send Via",colNameTotalCost:"Total Cost",colNameFillUser:"Fill User",colNameReqestUser:"Request User",colNameAccount:"Account",colNamePostalCode:"Postal Code"}};return lang.mixin(_1497,nls);});},"Sage/MainView/ActivityMgr/nls/HistoryEditor":function(){define("Sage/MainView/ActivityMgr/nls/HistoryEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1498,lang){var nls={root:{labelWidth:"100",tabNameGeneralText:"General",tabNameAttachmentsText:"Attachments",scheduleText:"Schedule",startTimeText:"Scheduled",completedDateText:"Completed",timeLessText:"Timeless",durationText:"Duration",contactText:"Contact",accountText:"Account",leadText:"Lead",opportunityText:"Opportunity",ticketText:"Ticket",companyText:"Company",regardingText:"Regarding",resultText:"Result",notesText:"Notes",priorityText:"Priority",leaderText:"Leader",categoryText:"Category",locationText:"Location",scheduledByFormatText:"Scheduled by ${user} on ${date}",cancelText:"Cancel",okText:"OK",deleteText:"Delete",lookupActText:"Lookup Account",lookupContactText:"Lookup Contact",lookupOpportunityText:"Lookup Opportunity",lookupTicketText:"Lookup Ticket",lookupLeadText:"Lookup Lead",lookupLeaderText:"Lookup Leader",lookupResourcesText:"Lookup",mainPhoneText:"Main Phone",typeText:"Type",subTypeText:"Sub-Type",nameText:"Name",cityText:"City",stateText:"State",workphoneText:"Work Phone",emailText:"Email",acctMgrText:"Acct Manager",descriptionText:"Description",stageText:"Stage",statusText:"Status",ownerText:"Owner",ticketNumberText:"Ticket Number",phoneText:"Phone",urgencyText:"Urgency",areaText:"Area",recurringText:"Recurring",followupText:"Follow-up",noneText:"None",carryOverAttachmentsText:"Carry Over Attachments",carryOverNotesText:"Carry Over Notes",asScheduledText:"As Scheduled",insertText:"Insert",couldNotSaveErrorText:"We're sorry, the history could not be saved because an error occurred.",deleteMessage:"You are about to permanently delete this record.",deleteTitle:"Delete History",couldNotDeleteErrorText:"We're sorry, the history could not be deleted because an error occurred.",postalText:"Postal Code"}};return lang.mixin(_1498,nls);});},"Sage/UI/DetailPanel":function(){define("Sage/UI/DetailPanel",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/i18n","dijit/registry","dijit/layout/BorderContainer","dijit/Toolbar","dijit/ToolbarSeparator","Sage/_Templated","Sage/UI/_DetailPanelConfigurationProvider"],function(_1499,lang,array,_149a,_149b,i18n,_149c,_149d,_149e,_149f,_14a0,_14a1,_14a2){return _1499("Sage.UI.DetailPanel",[_149d,_14a0],{widgetsInTemplate:true,contentTemplate:new Simplate(["<div class=\"detail-panel-toolbar listPanelToolbar rightTools\" data-dojo-type=\"dijit.Toolbar\" style=\"{%= $.toolbarStyle %}\" data-dojo-attach-point=\"_toolbar\" data-dojo-props=\"region: 'top', align: 'right', splitter: false\">","<span data-dojo-type=\"dijit.ToolbarSeparator\" data-dojo-attach-point=\"_buttonSeparator\"></span>","<div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"_helpButton\" data-dojo-attach-event=\"onClick:showHelp\" data-dojo-props=\"showLabel:true\">{%= $.helpText %}</div>","</div>"]),helpText:"Help",helpTopicName:"detailview",toolbarStyle:"",toolbarActive:true,id:"detailPanel",buildRendering:function(){this.inherited(arguments);_149b.add(this.domNode,"detail-panel");},startup:function(){this.inherited(arguments);this.requestConfiguration();},showHelp:function(){Sage.Utility.openHelp(this.helpTopicName);},requestConfiguration:function(){if(this.configurationProvider){this.configurationProvider.requestDetailModeConfiguration({scope:this,success:this._applyConfiguration});}},_applyConfiguration:function(_14a3){this._configuration=_14a3;this._configureToolbar(_14a3);this._configureContent(_14a3);},_configureContent:function(_14a4){var _14a5=_14a4&&_14a4.content;if(_14a5){var _14a6=_14a5;if(lang.isFunction(_14a6)){_14a6=_14a6.call(this,_14a4,this);}if(_14a6){if(this._content){this.removeChild(this._content);this._content.destroyRecursive();this._content=null;}_14a6.set("region","center");this._content=_14a6;this.addChild(_14a6);this.layout();}}},_configureToolbar:function(_14a7){if(this._toolbarApplied){return;}var _14a8=_14a7&&_14a7.toolBar;if(_14a8===false){if(this.toolbarActive){this.removeChild(this._toolbar);this.toolbarActive=false;}}else{if(_14a8){if(!this.toolbarActive){this.addChild(this._toolbar);this.toolbarActive=true;}array.forEach(_14a8.items,function(item,index){this._toolbar.addChild(new dijit.form.Button(item),index);},this);}}this._toolbarApplied=true;}});});},"Sage/Groups/nls/GroupManager":function(){define("Sage/Groups/nls/GroupManager",["Sage/LanguageList","dojo/_base/lang"],function(_14a9,lang){var nls={root:{ConfirmDeleteMessage:"Are you sure you want to delete the current group?",ConfirmDeleteFmtMessage:"Are you sure you want to delete this group: ${0}",InvalidSortStringMessage:"Error: Invalid sort string - ",InvalidConditionStringMessage:"Error: Invalid condition string - ",InvalidLayoutConditionStringMessage:"Error: Invalid layout string - ",noneSelectedTitle:"No records selected",noneSelectedPromptFmt:"No records selected. The full group, ${0} record(s), will be added.  Proceed?",noneSelectedRemovePromptFmt:"No records selected. The full group, ${0} record(s), will be removed.  Proceed?",noRecordsInGroup:"There are no records to be selected from this group.",newGroupTitle:"Add Records to new Group",newGroupNamePrompt:"${0} selected record(s) will be added to this new group.<br><br>Group Name:<br>${1}",newGroupRePrompt:"&nbsp;&nbsp;<i>Please enter a group name.</i>",invalidCharMsg:"Name Cannot contain: / \\ : * ? \" <> | or '",groupNameText:"Group Name:",saveLookupDlgTitle:"Save Lookup Results as New Group",yesCaption:"Yes",noCaption:"No",cancelCaption:"Cancel",okCaption:"OK",LOCALSTORE_NAMESPACE:"SageGroups"}};return lang.mixin(_14a9,nls);});},"Sage/UI/TimelessActivitiesPane":function(){define("Sage/UI/TimelessActivitiesPane",["dijit/_Widget","dojo/i18n","Sage/UI/SLXPreviewGrid","Sage/UI/EditableGrid","Sage/UI/Columns/ActivityType","Sage/UI/Columns/HistoryType","Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/Data/WritableSDataStore","dojo/_base/lang","dojo/string","dojo/i18n!./nls/TimelessActivitiesPane","dojo/_base/declare"],function(_14aa,i18n,_14ab,_14ac,_14ad,_14ae,_14af,_14b0,_14b1,lang,_14b2,_14b3,_14b4){var _14b5=_14b4("Sage.UI.TimelessActivitiesPane",_14aa,{gridMode:null,Id:null,grid:null,currentUserIds:[],userColor:[],queryStartDate:null,queryEndDate:null,currentUserDeafultCalendarView:null,schedulerDate:null,weekStart:null,workWeekStart:null,users:{},userActivities:[],constructor:function(_14b6){lang.mixin(this,i18n.getLocalization("Sage.UI","TimelessActivitiesPane",this.lang));this.Id=_14b6.Id;this.users=_14b6.users;this.gridMode=_14b6.mode;var _14b7;var self=this;var _14b8=function(data){var ndate=data.date.valueOf();switch(data.mode){case "day":var _14b9=new Date(ndate);_14b9.setHours(0,0,0,0);self.queryStartDate=Sage.Utility.Activity.formatTimelessStartDate(_14b9);self.queryEndDate=Sage.Utility.Activity.formatTimelessEndDate(_14b9);break;case "month":var _14ba=dojo.date.getDaysInMonth(new Date(ndate));var _14bb=new Date(new Date(ndate).setDate(1));_14bb.setHours(0,0,0,0);var _14bc=new Date(new Date(ndate).setDate(_14ba));_14bc.setHours(0,0,0,0);self.queryStartDate=Sage.Utility.Activity.formatTimelessStartDate(_14bb);self.queryEndDate=Sage.Utility.Activity.formatTimelessEndDate(_14bc);break;case "week":var _14bd=new Date(data.weekStartDate.valueOf());var _14be=new Date(data.weekEndDate.valueOf());_14bd.setHours(0,0,0,0);_14be.setHours(0,0,0,0);self.queryStartDate=Sage.Utility.Activity.formatTimelessStartDate(_14bd);self.queryEndDate=Sage.Utility.Activity.formatTimelessEndDate(_14be);break;case "workweek":var _14bf=new Date(data.workWeekStartDate.valueOf());var _14c0=new Date(data.workWeekEndDate.valueOf());_14bf.setHours(0,0,0,0);_14c0.setHours(0,0,0,0);self.queryStartDate=Sage.Utility.Activity.formatTimelessStartDate(_14bf);self.queryEndDate=Sage.Utility.Activity.formatTimelessEndDate(_14c0);break;default:var sDate=new Date(ndate);sDate.setHours(0,0,0,0);self.queryStartDate=Sage.Utility.Activity.formatTimelessStartDate(sDate);self.queryEndDate=Sage.Utility.Activity.formatTimelessEndDate(sDate,"day",1);break;}};if(this.users){for(var i in this.users){_14b7=lang.trim(this.users[i]["userId"].toString());var _14c1=_14b2.substitute("'${0}'",[_14b7]);if(dojo.indexOf(this.currentUserIds,_14c1)==-1){this.currentUserIds.push(_14c1);}if(this.users[i]["usercolor"]){this.userColor[_14b7]=lang.trim(this.users[i]["usercolor"].toString());}if(this.currentUserDeafultCalendarView==null){this.currentUserDeafultCalendarView=this.users[i]["defaultcalendarview"].toString();}if(this.weekStart==null){this.weekStart=this.users[i]["weekstartdate"];}if(this.weekEnd==null){this.weekEnd=this.users[i]["weekenddate"];}if(this.workWeekStart==null){this.workWeekStart=this.users[i]["workweekstartdate"];}if(this.workWeekEnd==null){this.workWeekEnd=this.users[i]["workweekenddate"];}}var _14c2={};_14c2.mode=this.currentUserDeafultCalendarView;_14c2.date=new Date();_14c2.weekStartDate=this.weekStart;_14c2.weekEndDate=this.weekEnd;_14c2.workWeekStartDate=this.workWeekStart;_14c2.workWeekEndDate=this.workWeekEnd;_14b8(_14c2);}dojo.subscribe("/sage/ui/calendarUser/selectionChanged/add",function addUser(data){var _14c3=lang.trim(data.userId.toString());var _14c4=_14b2.substitute("'${0}'",[_14c3]);if(dojo.indexOf(self.currentUserIds,_14c4)==-1){self.currentUserIds.push(_14c4);}self.userColor[_14c3]=data.usercolor.toString();self.userActivities=[];setTimeout(function(){self.grid.refresh();},"1");});dojo.subscribe("/sage/ui/calendarUser/selectionChanged/remove",function removeUser(data){self.currentUserIds=dojo.filter(self.currentUserIds,function(item){return item!="'"+data.userId.toString()+"'";});self.userActivities=[];self.grid.refresh();});dojo.subscribe("/entity/activity/calendar/schedulerDateChanged",function refreshList(data){_14b8(data);self.userActivities=[];self.grid.refresh();});dojo.subscribe("/entity/activity/create",function(data){self.refreshGrid(data);});dojo.subscribe("/entity/userActivities/timeless/saved",function(data){self.grid.refresh();});dojo.subscribe("/entity/activity/change",function(data){self.refreshGrid(data);});dojo.subscribe("/entity/activity/timeless/delete",function(data){self.userActivities=[];self.grid.refresh();});},refreshGrid:function(data){if(data!=null){if(data.Timeless){this.userActivities=[];this.grid.refresh();}}},startup:function(){var self=this;var _14c5;if(this.gridMode==="completed"){_14c5={context:null,readOnly:true,columns:[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(value,_14c6,cel){var _14c7=[cel.grid.id,"-row",_14c6].join("");var id=(Sage.Utility.getModeId()==="insert")?_14c7:value;var _14c8=["<div id=",id," >",id,"</ div>"].join("");return _14c8;}},{field:"UserId",name:" ",sortable:false,width:"20px",formatter:function(value){return "<div class='userStyles "+self.userColor[value]+"'></div>";}},{field:"Type",keyField:"$key",name:this.header_type,type:_14ae,width:"90px"},{field:"ContactName",name:this.header_contact,width:"100px"},{field:"Description",name:this.header_regarding,width:"100px"}],storeOptions:{service:_14b0.getSDataService("dynamic"),resourceKind:"history",include:["$descriptors"],select:["$key","Regarding","Description","AccountId","AccountName","ActivityId","ContactName","Recurring","StartDate","Timeless","Type","Priority","Leader/$key","PhoneNumber","LeadId","LeadName","LongNotes","Location","UserName"],sort:[{attribute:"StartDate",descending:true}]},tools:[],contextualCondition:function(){if(self.queryStartDate==null){self.queryStartDate=Sage.Utility.Activity.formatTimelessStartDate(new Date());}if(self.queryEndDate==null){self.queryEndDate=Sage.Utility.Activity.formatTimelessEndDate(new Date());}return dojo.string.substitute("UserId in (${0}) and Timeless and StartDate between @${1}@ and @${2}@ and Type in ('atPhoneCall','atToDo','atAppointment','atPersonal')",[self.currentUserIds.toString(),self.queryStartDate,self.queryEndDate]);},id:this.Id,tabId:"ActivityCalendar",gridNodeId:this.gridNodeId,rowsPerPage:10,singleClickEdit:true,dblClickAction:Link.editActivity};}else{_14c5={context:null,readOnly:true,columns:[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(value,_14c9,cel){var _14ca=[cel.grid.id,"-row",_14c9].join("");var id=(Sage.Utility.getModeId()==="insert")?_14ca:value;var _14cb=["<div id=",id," >",id,"</ div>"].join("");return _14cb;}},{field:"UserActivities.$resources",name:" ",sortable:false,width:"20px",formatter:function(data){var uId;if(data){for(var i=0;i<data.length;i++){var _14cc=data[i];if(!_14cc["remove"]){var _14cd=_14cc.User.$key;uId=_14cd;}}}return "<div class='userStyles "+self.userColor[uId]+"'></div>";}},{field:"Type",keyField:"$key",name:this.header_type,type:_14ad,width:"90px"},{field:"ContactName",name:this.header_contact,width:"100px"},{field:"Description",name:this.header_regarding,width:"100px"}],storeOptions:{service:_14b0.getSDataService("system"),resourceKind:"activities",include:["$descriptors,UserInfo"],select:["$key","Regarding","Description","AccountId","AccountName","ActivityId","ContactName","Recurring","StartDate","Timeless","Type","Priority","Leader/$key","PhoneNumber","LeadId","LeadName","LongNotes","Location","UserActivities/User/$key"],sort:[{attribute:"StartDate",descending:true}],onComplete:this._onComplete},tools:[],contextualCondition:function(){if(self.queryStartDate==null){self.queryStartDate=Sage.Utility.Activity.formatTimelessStartDate(new Date());}if(self.queryEndDate==null){self.queryEndDate=Sage.Utility.Activity.formatTimelessEndDate(new Date());}return dojo.string.substitute("UserActivities.UserId in (${0}) and Timeless and UserActivities.Status ne 'asDeclned' and StartDate between @${1}@ and @${2}@ and Type in ('atPhoneCall','atToDo','atAppointment','atPersonal')",[self.currentUserIds.toString(),self.queryStartDate,self.queryEndDate]);},id:this.Id,tabId:"ActivityCalendar",gridNodeId:this.gridNodeId,rowsPerPage:10,singleClickEdit:true,dblClickAction:Link.editActivity};}var grid=new _14ac(_14c5);var _14ce=dijit.byId(grid.gridNodeId);_14ce.addChild(grid);window.setTimeout(function(){grid.startup();_14ce.resize();},1);this.grid=grid;grid.onRowContextMenu=function(e){var item=e.grid.getItem(e.rowIndex);self._bindContextMenu(item.$key,new Date(),e.grid.domNode);};var _14cf=function(id){var valid=false;if(id){if(id.trim()!=""){valid=true;}}return valid;};grid.onRowMouseOver=function(e){var item=e.grid.getItem(e.rowIndex);var html="";var _14d0,_14d1="";if(item.Type){html+=self.tooltip_type+" : "+Sage.Utility.Activity.getActivityTypeName(item.Type)+"<br>";}if(_14cf(item.LeadId)){html+=self.tooltip_lead+" : "+item.LeadName+"<br>";if(item.AccountName){html+=self.tooltip_company+" : "+item.AccountName+"<br>";}}else{if(item.ContactName){html+=self.tooltip_contact+" : "+item.ContactName+"<br>";}if(item.AccountName){html+=self.tooltip_account+" : "+item.AccountName+"<br>";}}if(item.PhoneNumber){html+=self.tooltip_phone+" : "+item.PhoneNumber+"<br>";}if(item.UserId){_14d0=item.UserId;_14d1=item.UserName;}else{if(item.Leader){_14d0=item.Leader.$key;_14d1=item.Leader.$descriptor;}}if(lang.trim(_14af.getClientContextByKey("userID")).toUpperCase()!==_14d0){if(_14d1){html+=self.tooltip_leader+" : "+_14d1+"<br>";}}if(item.Description){html+=self.tooltip_regarding+" : "+item.Description+"<br>";}if(item.Location){html+=self.tooltip_location+" : "+item.Location+"<br>";}if(item.LongNotes){html+=self.tooltip_notes+" : "+item.LongNotes+"<br>";}dijit.showTooltip(html,e.cellNode);};grid.onRowMouseOut=function(e){dijit.hideTooltip(e.cellNode);};dojo.connect(this.grid,"onHeaderCellClick",function(e){self.userActivities=[];this.inherited(arguments);});dojo.connect(dijit.byId("TaskPane_splitter"),"onMouseUp",function(e){self.userActivities=[];});},_startGrid:function(data){this.grid.startup();},_onComplete:function(data){if(data){self.userActivities=[];var cnt=data.length;for(var i=0;i<cnt;i++){var _14d2=false;var _14d3=data[i]["$key"];if(data[i].UserActivities){var _14d4=data[i].UserActivities.$resources;var ln=_14d4.length;for(var j=0;j<ln;j++){if(_14d2){data[i].UserActivities.$resources[j]["remove"]=true;continue;}var _14d5=_14d4[j];var _14d6=_14d5.User.$key;var _14d7=self.userActivities[_14d3];if(_14d7){if(dojo.indexOf(_14d7,_14d6)<0){self.userActivities[_14d3].push(_14d6);_14d2=true;}else{data[i].UserActivities.$resources[j]["remove"]=true;}}else{self.userActivities[_14d3]=[];self.userActivities[_14d3].push(_14d6);_14d2=true;}}}else{var uId=data[i].Leader.$key;var uIds=self.userActivities[_14d3];if(uIds){if(dojo.indexOf(uIds,uId)<0){self.userActivities[_14d3].push(uId);}}else{self.userActivities[_14d3]=[];self.userActivities[_14d3].push(uId);}data[i].UserActivities=[];data[i].UserActivities.$resources=[];var _14d8={};_14d8.$key=uId;_14d8.User={$key:uId};data[i].UserActivities.$resources.push(_14d8);}}}},_bindContextMenu:function(_14d9,_14da,_14db){if(this.pMenu1){this.pMenu1.unBindDomNode(_14db);}this.pMenu1=null;this.pMenu1=new dijit.Menu({});var _14dc="mnuCalendarActivity";if(this.gridMode==="completed"){_14dc="mnuCalendarHistory";}var _14dd=Sage.UI.DataStore.ContextMenus.calendar_activityContextMenu.items;var len=_14dd.length;for(var i=0;i<len;i++){var mDef=_14dd[i];if(mDef.id===_14dc){this._buildChildMenu(mDef.submenu,null,_14d9,_14da);break;}}this.pMenu1.bindDomNode(_14db);},_buildChildMenu:function(_14de,_14df,_14e0,_14e1){var len=_14de.length;for(var i=0;i<len;i++){var mDef=_14de[i];if(mDef.submenu.length>0){var _14e2=new dijit.Menu();this._buildChildMenu(mDef.submenu,_14e2,_14e0,_14e1);var _14e3=new dijit.PopupMenuItem({label:mDef.text,popup:_14e2});if(_14df){_14df.addChild(_14e3);}else{this.pMenu1.addChild(_14e3);}}else{var _14e4=null;if((mDef.text==="-")||(mDef.text===" ")||(mDef.isspacer)){_14e4=new dijit.MenuSeparator();}else{var href=mDef.href;var self=this;_14e4=new Sage.UI.MenuItem({label:mDef.text||"...",icon:"Libraries/dojo/dojo/resources/blank.gif",title:mDef.tooltip||"",ref:href,onClick:function(){switch(this.ref.toUpperCase()){case "OPENACTIVITY":Sage.Link.editActivity(_14e0);break;case "OPENHISTORY":Sage.Link.editHistory(_14e0);break;case "COMPLETEACTIVITY":Sage.Link.completeActivity(_14e0);break;case "DELETEACTIVITY":Sage.Link.deleteActivity(_14e0,function(data){self.grid.refresh();});break;case "GOTOACCOUNT":Sage.Link.goToActivityAssociation("Account",_14e0);break;case "GOTOCONTACT":Sage.Link.goToActivityAssociation("Contact",_14e0);break;case "GOTOOPPORTUNITY":Sage.Link.goToActivityAssociation("Opportunity",_14e0);break;case "GOTOTICKET":Sage.Link.goToActivityAssociation("Ticket",_14e0);break;case "GOTOLEAD":Sage.Link.goToActivityAssociation("Lead",_14e0);break;}}});}if(_14df){_14df.addChild(_14e4);}else{this.pMenu1.addChild(_14e4);}}}}});return _14b5;});},"url:Sage/MainView/ActivityMgr/templates/RecurringEditor.html":"\r\n['<div>',\r\n    '<table style=\"width:100%\">',\r\n        '<tr>',\r\n            '<td class=\"recurring-selectors\">',  //radio buttons...\r\n                '<div>{%= $.activityOccurrsText %}</div>',\r\n                '<div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"None\" id=\"{%= $.id %}_rdo_Once\" dojoAttachPoint=\"rdo_Once\" checked=\"true\" dojoAttachEvent=\"onChange:_onceChanged\" />',  //  \r\n                    '<label for=\"{%= $.id %}_rdo_Once\">&nbsp;{%= $.onceText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"daily\" id=\"{%= $.id %}_rdo_Daily\" dojoAttachPoint=\"rdo_Daily\" dojoAttachEvent=\"onChange:_dailyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Daily\">&nbsp;{%= $.dailyText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"weekly\" id=\"{%= $.id %}_rdo_Weekly\" dojoAttachPoint=\"rdo_Weekly\" dojoAttachEvent=\"onChange:_weeklyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Weekly\">&nbsp;{%= $.weeklyText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"monthly\" id=\"{%= $.id %}_rdo_Monthly\" dojoAttachPoint=\"rdo_Monthly\" dojoAttachEvent=\"onChange:_monthlyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Monthly\">&nbsp;{%= $.monthlyText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"yearly\" id=\"{%= $.id %}_rdo_Yearly\" dojoAttachPoint=\"rdo_Yearly\" dojoAttachEvent=\"onChange:_yearlyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Yearly\">&nbsp;{%= $.yearlyText %}</label>',\r\n                '</div>',\r\n            '</td>',\r\n            '<td>',  //panel for each different recurring type...\r\n                '<div dojoType=\"dijit.layout.StackContainer\" dojoAttachPoint=\"_panelContainer\" class=\"recurring-body\" >',\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_oncePanel\" class=\"recurring-panel\"  >',\r\n                        '{%= $.occursOnceText %}',\r\n                    '</div>',\r\n//daily panel...............................\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_dailyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"dailyEvery\" value=\"days\" id=\"{%= $.id %}_rdoDailyEvery\" checked=\"true\" dojoAttachPoint=\"_rdoDailyEvery\" dojoAttachEvent=\"onChange:_dailyEveryChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoDailyEvery\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_dailyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.daysText %}</span>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"dailyEvery\" value=\"daysAfter\" id=\"{%= $.id %}_rdoDailyEveryAfter\" dojoAttachPoint=\"_rdoDailyEveryAfter\" />',\r\n                                '<label for=\"{%= $.id %}_rdoDailyEveryAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_dailyEveryAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.daysAfterText %}</span>',\r\n                            '</div>',\r\n                    '</div>',\r\n//weekly panel............................\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_weeklyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"weeklyEvery\" value=\"weeksOn\" id=\"{%= $.id %}_rdoWeeklyEvery\" checked=\"true\" dojoAttachPoint=\"_rdoWeeklyEvery\" dojoAttachEvent=\"onChange:_weeklyEveryChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoWeeklyEvery\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_weeklyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.weeksOnText %}</span>',\r\n                        '</div>',\r\n                        '<div style=\"white-space:normal;padding-bottom:10px;\">',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkMonday\" value=\"mon\" id=\"{%= $.id %}_chkMonday\" dojoAttachPoint=\"_chkMonday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkMonday\" class=\"padded-inline-label\">{%= $.monText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkTuesday\" value=\"tue\" id=\"{%= $.id %}_chkTuesday\" dojoAttachPoint=\"_chkTuesday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkTuesday\" class=\"padded-inline-label\">{%= $.tueText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkWednesday\" value=\"wed\" id=\"{%= $.id %}_chkWednesday\" dojoAttachPoint=\"_chkWednesday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkWednesday\" class=\"padded-inline-label\">{%= $.wedText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkThursday\" value=\"thu\" id=\"{%= $.id %}_chkThursday\" dojoAttachPoint=\"_chkThursday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkThursday\" class=\"padded-inline-label\">{%= $.thurText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkFriday\" value=\"fri\" id=\"{%= $.id %}_chkFriday\" dojoAttachPoint=\"_chkFriday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkFriday\" class=\"padded-inline-label\">{%= $.friText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkSaturday\" value=\"sat\" id=\"{%= $.id %}_chkSaturday\" dojoAttachPoint=\"_chkSaturday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkSaturday\" class=\"padded-inline-label\">{%= $.satText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkSunday\" value=\"sun\" id=\"{%= $.id %}_chkSunday\" dojoAttachPoint=\"_chkSunday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkSunday\" class=\"padded-inline-label\">{%= $.sunText %}</label>',\r\n                            '</span>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"weeklyEvery\" value=\"weeksAfter\" id=\"{%= $.id %}_rdoWeeklyEveryAfter\" dojoAttachPoint=\"_rdoWeeklyEveryAfter\" />',\r\n                                '<label for=\"{%= $.id %}_rdoWeeklyEveryAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_weeklyEveryAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_calculateEnd\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.weeksAfterText %}</span>',\r\n                        '</div>',\r\n                    '</div>',\r\n//monthly panel.........................................................\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_monthlyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"monthlyOn\" value=\"monthyOn\" id=\"{%= $.id %}_rdoMonthlyOn\" checked=\"true\" dojoAttachPoint=\"_rdoMonthlyOn\" dojoAttachEvent=\"onChange:_monthlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoMonthlyOn\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_monthlyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.monthsOnText %}</span>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_datesSelect\" dojoAttachEvent=\"onChange:_calculateEnd\" maxHeight=\"300\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"monthlyOn\" value=\"monthyOnThe\" id=\"{%= $.id %}_rdoMonthlyOnThe\" dojoAttachPoint=\"_rdoMonthlyOnThe\" />', // dojoAttachEvent=\"onChange:_monthlyOnChanged\"\r\n                                '<label for=\"{%= $.id %}_rdoMonthlyOnThe\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_monthlyOnTheText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.monthsOnTheText %}</span>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_weeksSelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_calculateEnd\"></select>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_weekdaySelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_calculateEnd\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"monthlyOn\" value=\"monthyAfter\" id=\"{%= $.id %}_rdoMonthlyAfter\" dojoAttachPoint=\"_rdoMonthlyAfter\" dojoAttachEvent=\"onChange:_monthlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoMonthlyAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_monthlyAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_calculateEnd\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.monthsAfterText %}</span>',\r\n                        '</div>',\r\n                    '</div>',\r\n// yearly panel..............\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_yearlyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"yearlyOn\" value=\"yearlyOn\" id=\"{%= $.id %}_rdoYearlyOn\" checked=\"true\" dojoAttachPoint=\"_rdoYearlyOn\" dojoAttachEvent=\"onChange:_yearlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoYearlyOn\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_yearlyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.yearsOnText %}</span>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_monthNamesSelect\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                            '<select dojoType=\"dijit.form.Select\" maxHeight=\"300\" dojoAttachPoint=\"_yearDatesSelect\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= ($.labelWidth - 3) %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"yearlyOn\" value=\"yearlyOnThe\" id=\"{%= $.id %}_rdoYearlyOnThe\" dojoAttachPoint=\"_rdoYearlyOnThe\" />',\r\n                                '<label for=\"{%= $.id %}_rdoYearlyOnThe\" class=\"padded-inline-label\">{%= $.theText %}</label>',\r\n                            '</div>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_yearWeeksSelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_yearWeekdaySelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                            '<label class=\"padded-inline-label\">{%= $.inText %}</label>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_yearMonthNamesSelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"yearlyOn\" value=\"yearlyEveryAfter\" id=\"{%= $.id %}_rdoYearlyEveryAfter\" dojoAttachPoint=\"_rdoYearlyEveryAfter\" dojoAttachEvent=\"onChange:_yearlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoYearlyEveryAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_yearlyEveryAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_calculateEnd\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.yearsAfterText %}</span>',\r\n                            '</div>',\r\n                    '</div>',\r\n                '</div>', //stack container\r\n// End date calculator section.........................................\r\n                '<div dojoAttachPoint=\"_startEndCalculator\" class=\"display-none\">',\r\n                    '<hr />',\r\n                    '<table>',\r\n                        '<tr>',\r\n                            '<td>{%= $.startRecurringText %}</td>',\r\n                            '<td>',\r\n                                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_StartRecur\" value=\"{%= $.startDate %}\" dojoAttachPoint=\"dtp_startRecur\" displayDate=\"true\" displayTime=\"false\" dojoAttachEvent=\"onChange:_recurringStartDateChanged\" readOnly=\"true\" ></div>',\r\n                            '</td>',\r\n                        '</tr>',\r\n                        '<tr>',\r\n                            '<td>',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"endRecur\" value=\"endAfterNum\" id=\"{%= $.id %}_rdoEndAfterNum\" dojoAttachPoint=\"_rdoEndAfter\" dojoAttachEvent=\"onChange:_endCalcModeChanged\" checked=\"true\" />',\r\n                                '<label for=\"{%= $.id %}_rdoEndAfterNum\" class=\"padded-inline-label\">{%= $.endAfterText  %}</label>',\r\n                            '</td><td>',\r\n                                '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"2\" constraints=\"{places: 0, type: \\'decimal\\', max: 999, min: 1}\" maxlength=\"3\" id=\"{%= $.id %}_num_Occurances\" dojoAttachPoint=\"num_Occurances\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_numOccurancesChanged\" />',\r\n                                '<span class=\"padded-inline-label\">{%= $.occurrencesText %}</span>',\r\n                            '</td>',\r\n                        '</tr><tr>',\r\n                            '<td>',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"endRecur\" value=\"endOn\" id=\"{%= $.id %}_rdoEndOn\" dojoAttachPoint=\"_rdoEndOn\" />',\r\n                                '<label for=\"{%= $.id %}_rdoEndOn\" class=\"padded-inline-label\">{%= $.endOnText %}</label>',\r\n                            '</td>',\r\n                            '<td>',\r\n                                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_EndRecur\" dojoAttachPoint=\"dtp_endRecur\" displayDate=\"true\" displayTime=\"false\" dojoAttachEvent=\"onChange:_endRecurChanged\" ></div>',\r\n                            '</td>',\r\n                        '</tr>',\r\n                    '</table>',\r\n                '</div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>']","Sage/UI/Columns/DndCell":function(){require({cache:{"url:Sage/UI/Columns/templates/DndCell.html":"<div>\r\n    <div data-dojo-type=\"dojo.dnd.Source\" dojoAttachPoint=\"sourceNode\" copyOnly=\"true\" accept=\"\">\r\n        <div class=\"dojoDndItem\" dojoAttachPoint=\"dndItem\"></div>\r\n    </div>\r\n</div>\r\n"}});define("Sage/UI/Columns/DndCell",["dijit/_Widget","dijit/_Templated","dojo/dnd/Source","dojo/text!./templates/DndCell.html","dojo/_base/declare"],function(_14e5,_14e6,_14e7,_14e8,_14e9){var _14ea=_14e9("Sage.UI.Columns.DndCell",[_14e5,_14e6],{templateString:_14e8,widgetsInTemplate:true,value:null,index:-1,constructor:function(_14eb){this.inherited(arguments);},postCreate:function(){this.dndItem.innerHTML=this.get("value");this.dndItem.type="cell";this.dndItem.data={value:this.get("value"),index:this.index};this.inherited(arguments);}});return _14ea;});},"Sage/QuickForms/Design/Editors/nls/DateTimePickerAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/DateTimePickerAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_14ec,lang){var nls={root:{titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",buttonToolTipText:"Button Tooltip:",buttonToolTipTooltipText:"The tooltip  to display when the user\\'s mouse hovers over the button part of the control.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",timelessText:"Timeless:",timelessTooltipText:"Use date without time and no DST conversion.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},displayModeTypeText:{AsControl:"As Control",AsText:"As Text",AsHyperlink:"As Hyperlink"}}};return lang.mixin(_14ec,nls);});},"Sage/QuickForms/Design/Editors/nls/ComboBoxBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/ComboBoxBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_14ed,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"}}};return lang.mixin(_14ed,nls);});},"Sage/UI/ComboBox":function(){define("Sage/UI/ComboBox",["dijit/form/ComboBox","dojo/currency","dojo/_base/declare"],function(_14ee,_14ef,_14f0){var _14f1=_14f0("Sage.UI.ComboBox",[_14ee],{_hClickBody:false,maxHeight:dojo.isIE?160:170,shouldPublishMarkDirty:true,autoPostBack:false,_onKeyPress:function(e){dojo.stopEvent(e);},postCreate:function(){this.connect(this,"onChange",this.onChanged);this.inherited(arguments);},onChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){__doPostBack(this.id,"");}},onClickBody:function(e){if(dojo.isIE>=9&&this._opened){var obj=dijit.getEnclosingWidget(e.target);if(obj&&obj===this){return;}this.closeDropDown();}},closeDropDown:function(focus){if(dojo.isIE>=9&&this._hClickBody){dojo.disconnect(this._hClickBody);this._hClickBody=false;}this.inherited(arguments);},openDropDown:function(){if(dojo.isIE>=9){this._hClickBody=dojo.connect(document.body,"onclick",this,this.onClickBody);}this.inherited(arguments);}});return _14f1;});},"Sage/UI/Dialogs":function(){define("Sage/UI/Dialogs",["dijit/form/Button","dijit/Dialog","dijit/ProgressBar","dijit/form/TextBox","dijit/form/ValidationTextBox","dojo/i18n!./nls/Dialogs","dojo/_base/array"],function(_14f2,_14f3,_14f4,_14f5,_14f6,_14f7,array){Sage.namespace("UI.Dialogs");dojo.mixin(Sage.UI.Dialogs,{raiseQueryDialog:function(title,query,_14f8,_14f9,_14fa,_14fb){return this.raiseQueryDialogExt({title:title,query:query,callbackFn:_14f8,yesText:_14f9,noText:_14fa,icon:_14fb});},raiseQueryDialogExt:function(opts){var dlg=dijit.byId("queryDialog"),_14fc,_14fd,_14fe,_14ff,i,_1500,_1501,_1502;if(dlg){dlg.destroyRecursive();}_14fc=(opts&&typeof opts.width==="number")?opts.width:700;_14fd=new dijit.Dialog({id:"queryDialog",title:opts.title,style:opts.style||{"width":_14fc}});_14fe=function(_1503){_14fd.hide();if(!opts.callbackFn||typeof opts.callbackFn!=="function"){return;}if(_1503){opts.callbackFn.call(opts.scope||this,true);}else{opts.callbackFn.call(opts.scope||this,false);}};_14fd.on("hide",function(){_14fd.destroyRecursive();});if(opts.icon){var _1504=new dojo.create("div",{id:"queryDialog-iconDiv","class":"messageIcon "+opts.icon});_14fd.containerNode.appendChild(_1504);}_14ff=[];if(opts.query instanceof Array){for(i=0;i<opts.query.length;i++){_14ff.push(dojo.create("div",{id:"queryDialog-questionDiv_"+i,innerHTML:opts.query[i]}));}}else{var div=dojo.create("div",{id:"queryDialog-questionDiv",innerHTML:opts.query});var _1505=div.getElementsByTagName("script");array.forEach(_1505,function(_1506){var src=_1506.getAttribute("src");if(src===null&&_1506.innerHTML!==""){eval(_1506.innerHTML);}else{if(src!==null&&_1506.innerHTML===""){var head=document.getElementsByTagName("head")[0];var clone=dojo.clone(_1506);(head||document.body).appendChild(clone);}else{if(typeof console!=="undefined"){}}}div.removeChild(_1506);});_14ff.push(div);}_1500=new dojo.create("div",{id:"queryDialog-buttonDiv",style:"text-align: "+(opts.align||"center")+"; margin-top: 10px"});_1501=new dijit.form.Button({label:opts.yesText||_14f7.yesText,id:"qry_yesButton",onClick:function(_1507){_14fe(true);}});_1500.appendChild(_1501.domNode);if((opts.noText)||(opts.showNoButton)){_1502=new dijit.form.Button({label:opts.noText||_14f7.noText,id:"qry_noButton",style:"padding-left: 10px",onClick:function(_1508){_14fe(false);}});_1500.appendChild(_1502.domNode);}dojo.forEach(_14ff,function(_1509){_14fd.containerNode.appendChild(_1509);});_14fd.containerNode.appendChild(_1500);_14fd.show();},raiseInputDialog:function(title,query,_150a,_150b,_150c,_150d,_150e,_150f){return this.raiseInputDialogExt({title:title,query:query,callbackFn:_150a,yesText:_150b,noText:_150c,defaultValue:_150d,regExp:_150e,invalidMessage:_150f});},raiseInputDialogExt:function(opts){var _1510,_1511,_1512,_1513,_1514,_1515,_1516;_1510=dijit.byId("inputDialog");if(_1510){_1510.destroyRecursive();}_1510=new dijit.Dialog({id:"inputDialog",title:opts.title});_1511=dojo.create("div",{id:"inputDialog-questionDiv",innerHTML:opts.query});_1512=(opts.regExp&&dojo.isString(opts.regExp))?new dijit.form.ValidationTextBox({id:"inputDialog-inputBox",value:opts.defaultValue||"",style:"margin-top: 8px",regExp:opts.regExp||"",invalidMessage:opts.invalidMessage||""}):new dijit.form.TextBox({id:"inputDialog-inputBox",value:opts.defaultValue||"",style:"margin-top: 8px"});_1513=function(_1517){if(_1517){opts.callbackFn(true,_1512.get("value"));}else{opts.callbackFn(false,_1512.get("value"));}_1510.hide();};_1514=new dijit.form.Button({label:opts.yesText||_14f7.yesText,id:"inp_yesButton",onClick:function(_1518){_1513(true);}});_1515=new dijit.form.Button({label:opts.noText||_14f7.noText,id:"inp_noButton",onClick:function(_1519){_1513(false);}});_1516=new dojo.create("div",{id:"inputDialog-buttonDiv"});_1510.on("hide",function(){_1510.destroyRecursive();});_1516.appendChild(_1514.domNode);_1516.appendChild(_1515.domNode);_1510.containerNode.appendChild(_1511);_1510.containerNode.appendChild(_1512.domNode);_1510.containerNode.appendChild(_1516);if(opts.closable===false){dojo.destroy(_1510.closeButtonNode);}_1510.show();},showProgressBar:function(opts){var iMax=(opts&&typeof opts.maximum!=="undefined")?opts.maximum:100,prog,_151a=(opts&&typeof opts.width==="number")?opts.width:300,_151b=(opts&&typeof opts.width==="number")?opts.height:125,_151c=dojo.string.substitute("width: ${0}px; height: ${1}px",[_151a,_151b]),_151d=(opts&&typeof opts.canclose==="boolean")?opts.canclose:true,_151e,sMsg,_151f,bar,msg;if(!dijit.byId("progressDialog")){prog=new dijit.ProgressBar({id:"progressDialogBar",style:"margin-top: 10px; margin-bottom: 10px",indeterminate:(opts&&opts.indeterminate!=="undefined")?opts.indeterminate:false,maximum:iMax});_151e=new dijit.Dialog({id:"progressDialog",title:opts.title,style:_151c,closable:_151d});if(opts&&typeof opts.showmessage==="boolean"&&opts.showmessage){sMsg=(opts&&typeof opts.message==="string")?opts.message:"";_151f=new dojo.create("div",{innerHTML:sMsg,style:"text-align: left; margin-top: 10px; margin-bottom: 10px",id:"progressDialogMessage"});_151e.containerNode.appendChild(_151f);}_151e.containerNode.appendChild(prog.domNode);_151e.show();}bar=dijit.byId("progressDialogBar");bar.update({progress:opts.pct,title:opts.title});if(opts&&typeof opts.showmessage==="boolean"&&opts.showmessage&&typeof opts.message==="string"){msg=dojo.byId("progressDialogMessage");if(msg){msg.innerHTML=opts.message;}}},closeProgressBar:function(opts){var dlg=dijit.byId("progressDialog");if(dlg){dlg.hide();dlg.destroyRecursive();}},alert:function(msg,title,icon){var opts={title:title||"Sage SalesLogix",query:msg,callbackFn:false,yesText:_14f7.okText||"OK",noText:false,scope:window,icon:icon||"noIcon",style:{width:"700px"}};Sage.UI.Dialogs.raiseQueryDialogExt(opts);},showInfo:function(msg,title){this.alert(msg,title,"infoIcon");},showWarning:function(msg,title){this.alert(msg,title,"warningIcon");},showError:function(msg,title){this.alert(msg,title,"errorIcon");}});Sage.WebClientMessageService=function(_1520){};Sage.WebClientMessageService.prototype.hideClientMessage=function(){if(typeof console!=="undefined"){}};Sage.WebClientMessageService.prototype.showClientMessage=function(title,msg,fn,scope){if(typeof console!=="undefined"){}if(typeof title==="object"){Sage.UI.Dialog.raiseQueryDialogEx(title);}var o={title:(typeof msg==="string")?title:"",query:(typeof msg==="string")?msg:title,callbackFn:fn,yesText:_14f7.yesText||"Yes",noText:_14f7.noText||"No",scope:scope};Sage.UI.Dialogs.raiseQueryDialogExt(o);};Sage.Services.addService("WebClientMessageService",new Sage.WebClientMessageService());return Sage.UI.Dialogs;});},"Sage/_EventMapMixin":function(){define("Sage/_EventMapMixin",["dojo/on","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-attr","dojo/query"],function(on,_1521,array,lang,_1522,query){var proxy=function(fn,scope){return function(evt){fn.call(scope,evt,this);};};return _1521("Sage._EventMapMixin",null,{events:null,_eventSignals:null,postCreate:function(){this.inherited(arguments);this._eventSignals=(this._eventSignals||[]);if(this.events){for(var name in this.events){var item=this.events[name];if(item){var event=null,fn=null;if(lang.isObject(item)){event=item.selector?on.selector(item.selector,item.event||name):item.event||name;fn=lang.isFunction(this[item.action])?this[item.action]:this._invokeDynamicAction;}else{event=name;fn=lang.isFunction(this[item])?this[item]:this._invokeDynamicAction;}this._eventSignals.push(on(this.domNode,event,proxy(fn,this)));}}}},_invokeDynamicAction:function(evt,node){var _1523=_1522.get(node,"data-action"),fn=lang.isFunction(this[_1523])?this[_1523]:null;if(fn){fn.call(this,evt,node);}},uninitialize:function(){this.inherited(arguments);array.forEach(this._eventSignals,function(_1524){_1524.remove();});}});});},"Sage/UI/SLXPreviewGrid/Filter/Lookup":function(){define("Sage/UI/SLXPreviewGrid/Filter/Lookup",["dojo/_base/declare","dijit/_Widget","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin"],function(_1525,_1526,_1527){var _1528=_1525("Sage.UI.SLXPreviewGrid.Filter.Lookup",[_1526,_1527],{okText:"OK",lookupStructure:[],lookupGridOptions:{},lookupStoreOptions:{},postCreate:function(){this.inherited(arguments);var _1529={structure:this.lookupStructure,gridOptions:this.lookupGridOptions,storeOptions:this.lookupStoreOptions,isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.name,dialogButtonText:this.okText};this._lup=new Sage.UI.Controls.Lookup({id:this.id+"_lup",config:_1529,required:false},this.domNode);var div=document.createElement("div");this.domNode.appendChild(div);dojo.place(this._lup.domNode,div,"only");},getQuery:function(){var obj=this._lup.get("selectedObject");if(obj&&obj["$key"]){return this.field+" eq '"+obj["$key"]+"'";}return "";},reset:function(){this._lup.set("selectedObject",null);},getState:function(){return {"value":this._lup.get("selectedObject")};},applyState:function(state){if(state){this._lup.set("selectedObject",state["value"]||"");}}});return _1528;});},"Sage/Data/SingleEntryPropertySDataStore":function(){define("Sage/Data/SingleEntryPropertySDataStore",["Sage/Data/SingleEntrySDataStore","dojo/_base/declare"],function(_152a,_152b){var _152c=_152b("Sage.Data.SingleEntryPropertySDataStore",_152a,{propertyName:null,fetch:function(_152d){var _152e=this._getRequest(_152d),key;if(this.sort){_152e.setQueryArg("orderby",this.sort);}this.verifyService();if(_152d.predicate){if(this._entity&&(_152d.predicate===this._entity.$key)&&this._okToCache){if(_152d.onComplete){_152d.onComplete.call(_152d.scope||this,this._entity,_152d);return;}}_152e.setResourceSelector(_152d.predicate);}if(this.select&&this.select.length>0){_152e.setQueryArg("select",this.select.join(","));}if(this.include&&this.include.length>0){_152e.setQueryArg("include",this.include.join(","));}if(this.predicate&&this.predicate.length>0){_152e.setResourceSelector(this.predicate);}if(_152d.beforeRequest){_152d.beforeRequest.call(_152d.scope||this,_152e);}_152e.setQueryArg("startIndex",_152d.start+1);_152e.setQueryArg("count",_152d.count||100);key=_152e.readFeed({success:dojo.hitch(this,this.onSuccess,_152d),failure:dojo.hitch(this,this.onFailure,_152d)});return {abort:dojo.hitch(this,this.abortRequest,key)};},abortRequest:function(key){this.service.abortRequest(key);},onSuccess:function(_152f,feed){if(_152f.onBegin){_152f.onBegin.call(_152f.scope||this,feed.$totalResults,_152f);}if(_152f.onComplete){_152f.onComplete.call(_152f.scope||this,feed.$resources,_152f);}},_getRequest:function(_1530){if(!this._request){var req=new Sage.SData.Client.SDataResourcePropertyRequest(this.service);req.setResourceKind(this.resourceKind);req.setResourceProperty(this.propertyName);this._request=req;}return this._request;},});return _152c;});},"Sage/MainView/ActivityMgr/nls/RecurringEditor":function(){define("Sage/MainView/ActivityMgr/nls/RecurringEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1531,lang){var nls={root:{activityOccurrsText:"This activity occurs...",onceText:"Once",dailyText:"Daily",weeklyText:"Weekly",monthlyText:"Monthly",yearlyText:"Yearly",occursOnceText:"This activity occurs only once",everyText:"Every",daysText:"Day(s)",daysAfterText:"Day(s) after completion",startRecurringText:"Start Recurring: ",endAfterText:"End After",endOnText:"End Recurring",occurrencesText:"occurrences",weeksOnText:"Week(s) on",monText:"Monday",tueText:"Tuesday",wedText:"Wednesday",thurText:"Thursday",friText:"Friday",satText:"Saturday",sunText:"Sunday",weeksAfterText:"Week(s) after completion",monthsOnText:"Month(s) on day",monthsOnTheText:"Month(s) on the",monthsAfterText:"Month(s) after completion",firstText:"1st",secondText:"2nd",thirdText:"3rd",fourthText:"4th",lastText:"last",yearsOnText:"Year(s) on",yearsAfterText:"Year(s) after completion",janText:"January",febText:"February",marText:"March",aprText:"April",mayText:"May",junText:"June",julText:"July",augText:"August",sepText:"September",octText:"October",novText:"November",decText:"December",theText:"The",inText:"in"}};return lang.mixin(_1531,nls);});},"Sage/QuickForms/Design/Editors/nls/DataGridAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/DataGridAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1532,lang){var nls={root:{titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",dataSourceText:"Data Source:",dataSourceTooltipText:"Source of the data for this control such as another control or an entity.",emptyTableRowText:"Empty Table Row Text:",emptyTableRowTooltipText:"Text to display if grid shows no data.",expandableRowsText:"Expandable Rows:",expandableRowsTooltipText:"Allows user to expand grid rows to show more text.",renderVerticalText:"Render Vertically:",renderVerticalTooltipText:"Show grid rows as columns.",showSortIconText:"Show Sort Icon:",showSortIconTooltipText:"Show sort icon on columns that are sortable.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form."}};return lang.mixin(_1532,nls);});},"Sage/UI/EditableGrid":function(){define("Sage/UI/EditableGrid",["dojox/grid/DataGrid","dijit/Toolbar","dijit/form/Button","dijit/layout/ContentPane","Sage/Data/WritableSDataStore","Sage/Data/WritableStore","Sage/UI/SDataLookup","dojo/i18n","dojo/_base/lang","Sage/Utility","Sage/UI/ImageButton","Sage/UI/Dialogs","Sage/Utility/_LocalStorageMixin","dojo/i18n!./nls/EditableGrid","Sage/UI/ToolBarLabel","dojo/parser","dojo/dom-construct","dojo/_base/declare","dojo/_base/array"],function(_1533,_1534,_1535,_1536,_1537,_1538,_1539,i18n,_153a,_153b,_153c,_153d,_153e,_153f,_1540,_1541,_1542,_1543,array){var _1544=_1543("Sage.UI.EditableGrid",[_1533,_153e],{recordCountLabel:null,STORE_KEY_COLUMN_SIZE:"_COLUMN_UNIT_WIDTH_",STORE_NS:"SAGE_UI_EDITABLEGRID",STORE_KEY_SORT:"_SORT_INFO_",lookupControl:null,mode:"",region:"center",_dataChangeConnections:[],_registeredWidgets:null,constructor:function(opts){this.mode=_153b.getModeId();if(opts.storeOptions&&opts.storeOptions.isInsertMode){this.mode="insert";}this._dataChangeConnections=[];this._registeredWidgets=[];},_setModeAttr:function(mode){if(this.mode!==mode){this.mode=mode;if(!this.store){return;}if(((mode==="insert")&&(this.store.declaredClass!=="Sage.Data.WritableStore"))||((mode!=="insert")&&(this.store.declaredClass!="Sage.Data.WritableSDataStore"))){this._replaceStore();}}},_getModeAttr:function(){return this.mode;},onBlur:function(){if(this.edit&&this.edit.isEditing()){this.edit.apply();}},postMixInProperties:function(){dojo.mixin(this,_153f);dojo.mixin(this,i18n.getLocalization("dijit","common"));this.setEditable();if(!this.storeOptions){this.storeOptions={};}this.ensureValue(this.storeOptions,"pagesize",this.rowsPerPage||20);this.ensureValue(this,"singleClickEdit",true);if(typeof this.contextualCondition==="function"){this.query={fn:this.contextualCondition,scope:this};}else{if(typeof this.contextualCondition==="object"){if(this.contextualCondition.fn){this.ensureValue(this.contextualCondition,"scope",this);this.query=this.contextualCondition;}}}this.structure=[{defaultCell:_153a.mixin({defaultValue:""},this.columnDefaults),cells:this.columns}];function _1545(item,list){for(var i=0;i<list.length;i++){if(item===list[i]){return;}}list.push(item);};if((this.tabId)&&(this.tabId!=="")){this.addToolsToWorkspaceToolbar();this.currentEntityId=_153b.getCurrentEntityId();}else{this.createOwnToolbar();}this._setUserPrefColumnWidths();var cols=this.columns,sel,i,p,inc,parts,_1546;if(!this.store){sel=this.storeOptions.select||[];for(i=0;i<sel.length;i++){sel[i]=sel[i].replace(/\./g,"/");}inc=this.storeOptions.include||[];var field;for(i=0;i<cols.length;i++){if(cols[i].field){field=cols[i].field;_1545(field.replace(/\./g,"/"),sel);}if(cols[i].field.indexOf(".")>0){parts=cols[i].field.split(".");_1546="";for(p=0;p<parts.length-1;p++){_1546+=parts[p];_1545(_1546,inc);_1546+="/";}}}this.store=this.getStore();this.markClean();}else{sel=this.store.select=this.store.select||[];inc=this.store.include=this.store.include||[];for(i=0;i<sel.length;i++){sel[i]=sel[i].replace(/\./g,"/");}for(i=0;i<cols.length;i++){if(cols[i].field){field=cols[i].field;_1545(field.replace(/\./g,"/"),sel);}if(cols[i].field.indexOf(".")>0){parts=cols[i].field.split(".");_1546="";for(p=0;p<parts.length-1;p++){_1546+=parts[p];_1545(_1546,inc);_1546+="/";}}}}this._setSortInfo();this.inherited(arguments);},postCreate:function(){dojo.connect(this,"onKeyDown",this.customKeyDown);dojo.connect(this,"onResizeColumn",this._onResizeColumn);dojo.subscribe("Sage/events/TabWorkspace/MIDDLE_AREA_DROP",this,this._setMiddleAreaHeight);this.connect(this,"_onNew",this.showLoading);this.connect(this.scroller,"scroll",this._onScroll);dojo.connect(this,"onResizeColumn",this._onScroll);this.setupHeader();this.inherited(arguments);},showLoading:function(){this.showMessage(this.loadingMessage);this._clearData();this.markClean();},headerTemplate:new Simplate(["<div>","<div id=\"{%= $.id %}_HeaderBar\"  data-dojo-type=\"dijit.layout.ContentPane\" gutters=\"false\"  region=\"top\" ","style=\"{%= $.headerStyle %}\" class=\"editable-grid-hbar\">","<div class=\"editable-grid-hbar-left\"></div>","<div class=\"editable-grid-hbar-center\"></div>","<div class=\"editable-grid-hbar-right\"><div id=\"{%= $.gridNodeId %}_recordCountLabel\"></div></div>","</div>","</div>"]),setupHeader:function(){this.recordCountLabel=new _1540();this.recordCountLabel.set("label",dojo.string.substitute(this.recordCountFormatString,this._getRecordCount()));var _1547=this.headerTemplate.apply(this);_1547=dojo.toDom(_1547);this.headerContentPane=_1541.parse(_1547);var _1548=dijit.byId(this.gridNodeId);_1548.addChild(this.headerContentPane[0]);dojo.place(this.recordCountLabel.domNode,this.gridNodeId+"_recordCountLabel","replace");},resetContextualCondition:function(_1549){if(typeof _1549==="function"){this.query={fn:_1549,scope:this};}else{if(typeof _1549==="object"){if(_1549.fn){this.ensureValue(_1549,"scope",this);this.query=_1549;}}}this.contextualCondition=_1549;},_getRecordCount:function(){var _154a,_154b,_154c,count;_154a=this.scroller;count=_154a.rowCount;if(count<=0){_154b=0;_154c=0;count=0;}else{_154b=(_154a.firstVisibleRow===0)?1:_154a.firstVisibleRow+1;_154c=(_154a.lastVisibleRow>=_154a.rowCount)?_154a.rowCount:_154a.lastVisibleRow;}return [_154b,_154c,count];},_onScroll:function(inTop){if(this.recordCountLabel){this.recordCountLabel.set("label",dojo.string.substitute(this.recordCountFormatString,this._getRecordCount()));}},_setMiddleAreaHeight:function(data){var _154d=["#",data.tab.ElementId," #",this.id].join("");var self=dojo.query(_154d)[0];if(self){var _154e=["#",data.tab.ElementId," .tws-tab-view-body"].join("");var _154f=dojo.query(_154e)[0];dojo.style(_154f,"height","10px");TabControl.setViewBodyHeight();}},_setUserPrefColumnWidths:function(){var self=this;dojo.forEach(this.columns,function(col){if(col&&col.field){var key=self._getColumnSizeKey(col),value=self.getFromLocalStorage(key,self.STORE_NS);if(value){col.width=value;}}});},_getColumnSizeKey:function(cell){var _1550=cell.field.replace(/[\.\$]/g,"_"),id=[this.id,"_",this.STORE_KEY_COLUMN_SIZE,_1550].join("");return id;},_onResizeColumn:function(_1551){var cell=this.getCell(_1551),value=cell.unitWidth,key=this._getColumnSizeKey(cell);this.saveToLocalStorage(key,value,this.STORE_NS);},listenForPageSave:function(){var _1552=Sage.Services.getService("ClientBindingManagerService");if(_1552){_1552.addListener(_1552.ON_SAVE,this.saveChanges,this);}},removePageSaveListener:function(){var _1553=Sage.Services.getService("ClientBindingManagerService");if(_1553){_1553.removeListener(_1553.ON_SAVE,this.saveChanges);}},setEditable:function(){var _1554=true;if(this.appliedSecurity){var svc=Sage.Services.getService("RoleSecurityService");if(svc){_1554=svc.hasAccess(this.appliedSecurity);}}if(this.readOnly){_1554=false;}if(!_1554){for(var i=0;i<this.columns.length;i++){if(this.columns[i].editable){this.columns[i].editable=false;}}this.editable=false;}else{for(var i=0;i<this.columns.length;i++){if(this.columns[i].editable){this.editable=true;break;}}}},onHeaderCellClick:function(e){var r=true;if(this.store.dirtyDataCache.isDirty){var s=Sage.Services.getService("ClientBindingManagerService");r=confirm(s._PageExitWarningMessage);}if(this.columns[e.cell.index].sortable===false||!r||this.mode==="insert"){dojo.stopEvent(e);}else{this.inherited(arguments);var _1555=this.getSortProps();if(_1555&&_1555.length>0){var _1556=_1555[0];_1556.cellIndex=e.cell.index;this.saveToLocalStorage(this.STORE_KEY_SORT+this.id,_1556,this.STORE_NS);}}},_setSortInfo:function(){var key=this.STORE_KEY_SORT+this.id;var _1557=this.getFromLocalStorage(key,this.STORE_NS);if(_1557){if(_1557.descending){this.sortInfo=(_1557.cellIndex+1)*-1;}else{this.sortInfo=_1557.cellIndex+1;}}},ensureValue:function(obj,key,_1558){obj[key]=obj[key]||_1558;},amIInATab:function(){if(this.context&&this.context.workspace){return (this.context.workspace.indexOf("TabWorkspace")>-1);}return false;},isMyTabVisible:function(){if(this.amIInATab()&&window.TabControl){return window.TabControl.getState().isTabVisible(this.tabId);}return true;},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.mode!=="insert"){this.listenForPageSave();}if(this.context&&this.context.workspace){if(this.context.workspace.indexOf("TabWorkspace")<=-1){dojo.style(dojo.byId(this.id+"_Container"),"height","300px");var main=dijit.byId(this.gridNodeId);main.resize();}}if(this.amIInATab()&&this.isMyTabVisible()){var _1559=["#","element_",this.tabId," .formtable"].join("");var _155a=dojo.query(_1559)[0];if(_155a){var _155b=dojo.byId(this.id+"_Container");if(!_155b){_155b=dijit.byId(this.id).getParent();_155b=_155b.domNode;}dojo.style(_155b,"height","300px");}}},destroy:function(){if(this.lookupControl){this.lookupControl.destroy(false);}if(this.toolbar){this.toolbar.destroy(false);}if(this.grid){this.grid.destroy(false);}if(this.store&&this.store.destroy){this.store.destroy(false);}if(this._registeredWidgets){array.forEach(this._registeredWidgets,function(item){item.destroy(false);});this._registeredWidgets=null;}this.removePageSaveListener();this.inherited(arguments);},_replaceStore:function(){dojo.forEach(this._dataChangeConnections,function(_155c){dojo.disconnect(_155c);});if(this.store&&this.store.destroy){this.store.destroy(false);}this.store=false;this.store=this.getStore();},getStore:function(){if(this.store){return this.store;}this.storeOptions["isInsertMode"]=(this.mode==="insert");var store=(this.mode!=="insert")?new _1537(this.storeOptions):new _1538(this.storeOptions);if(this.onDataChange){this._dataChangeConnections.push(dojo.connect(store,"onSet",this.onDataChange));}if(store.onDataChange){this._dataChangeConnections.push(dojo.connect(store,"setValue",store.onDataChange));this._dataChangeConnections.push(dojo.connect(store,"saveNewEntity",store.onDataChange));this._dataChangeConnections.push(dojo.connect(store,"deleteItem",store.onDataChange));this._dataChangeConnections.push(dojo.connect(store,"createItem",store.onDataChange));}this._dataChangeConnections.push(dojo.connect(store,"onSet",this,function(_155d,_155e,_155f,_1560){if(this.mode!=="insert"&&_1560){if(this.edit.info.cell&&this.edit.info.cell.widget&&this.edit.info.cell.widget.returnObject===true){if(_155f.$key!==_1560.$key){this.markDirty();}}else{if(_155f!==_1560){this.markDirty();}}}}));return store;},customKeyDown:function(e){this.applyEditOnEnter(e);this.navigateOnKeyDown(e);},navigateOnKeyDown:function(e){},applyEditOnEnter:function(e){if(e.charOrCode==13||e.keyCode==13){this.doApplyEdit();this.edit.apply();dojo.stopEvent(e);}},createOwnToolbar:function(){var _1561=Sage.Services.getService("RoleSecurityService");var _1562=dijit.byId(this.gridNodeId);this.toolbar=new _1534({"class":"right-tools","region":"top"});_1562.addChild(this.toolbar);for(var i=0;i<this.tools.length;i++){var tool=this.tools[i];if(tool.appliedSecurity&&tool.appliedSecurity!==""){if((_1561)&&(!_1561.hasAccess(tool.appliedSecurity))){continue;}}var btn=false;if(typeof tool==="string"){switch(tool){case "add":btn=new _153c({imageClass:"icon_plus_16x16",tooltip:this.addText,id:this.id+"_addBtn",onClick:_153a.hitch(this,function(){this.addNew();})});break;case "delete":btn=new _153c({imageClass:"icon_Delete_16x16",tooltip:this.deleteText,id:this.id+"_delBtn",onClick:_153a.hitch(this,function(){this.deleteSelected();})});break;case "save":btn=new _153c({imageClass:"icon_Save_16x16",tooltip:this.saveText,id:this.id+"_saveBtn",onClick:_153a.hitch(this,function(){this.saveChanges();})});break;case "cancel":btn=new _153c({imageClass:"icon_Reset_16x16",tooltip:this.cancelText,id:this.id+"_cancelBtn",onClick:_153a.hitch(this,function(){this.cancelChanges();})});break;}}else{if((tool.type)&&(tool.type==="Sage.UI.SDataLookup")){var conf=tool.controlConfig||tool;btn=new _1539(conf);this.lookupControl=btn;}else{btn=new _153c({icon:tool.icon||"",imageClass:tool.imageClass||"",id:tool.id,onClick:_153a.hitch(tool.scope||this,tool.handler),tooltip:tool.alternateText||tool.tooltip});}}if(btn){this.toolbar.addChild(btn);btn=false;}}this.toolbar.startup();},addToolsToWorkspaceToolbar:function(){if(this.readOnly){return;}this.dirtyDataMsgID=this.tabId+"_dirtydatamsg";var _1563=_1542.create("span",{"class":"grid-unsaveddata-msg","id":this.dirtyDataMsgID,"style":"display:none;","content":(this.editable)?this.unsavedDataText:""});var _1564,_1565;switch(this.context.workspace){case "Sage.Platform.WebPortal.Workspaces.Tab.TabWorkspace":if(this.mode!=="insert"){var elem=dojo.query("#"+"element_"+this.tabId+" td.tws-tab-view-title");if(elem){dojo.place(_1563,elem[0]);}}_1565=["element_",this.tabId].join("");_1564=dojo.query(["#",_1565," td.tws-tab-view-tools-right"].join(""));break;case "Sage.Platform.WebPortal.Workspaces.MainContentWorkspace":if(this.mode!=="insert"){dojo.place(_1563,dojo.query("#"+this.tabId+" span.mainContentHeaderTitle")[0]);}_1565=this.tabId;_1564=dojo.query("#"+_1565+" td.mainContentHeaderToolsRight");break;case "Sage.Platform.WebPortal.Workspaces.DialogWorkspace":_1564=dojo.query("td.dialog-tools-right");break;default:}var _1566=Sage.Services.getService("RoleSecurityService");var _1567=0,_1568,_1569;for(var i=0;i<this.tools.length;i++){_1568="";var tool=this.tools[i];if(typeof tool.mergeControlId!=="undefined"&&tool.mergeControlId.length!==0){_1569=dojo.query("[id$="+tool.mergeControlId+"]",dojo.byId("element_"+this.tabId))[0];_1568=tool.mergePosition.toLowerCase();}if(!_1569){_1569=_1564[0];_1568="";}if(this.mode==="insert"&&!tool.displayInInsert){continue;}if(tool.appliedSecurity&&tool.appliedSecurity!==""){if((_1566)&&(!_1566.hasAccess(tool.appliedSecurity))){continue;}}if(typeof tool==="string"){switch(tool){case "add":var addid=this.id+"_addBtn";var _156a=new _153c({id:addid,imageClass:"icon_plus_16x16",onClick:_153a.hitch(this,this.addNew),tooltip:this.addText});this._registeredWidgets.push(_156a);dojo.place(_156a.domNode,_1564[0],_1567);break;case "delete":var delid=this.id+"_delBtn";var _156b=new _153c({id:delid,tooltip:this.deleteText,imageClass:"icon_Delete_16x16",onClick:_153a.hitch(this,this.deleteSelected)});this._registeredWidgets.push(_156b);dojo.place(_156b.domNode,_1564[0],_1567);break;case "save":var _156c=this.id+"_saveBtn";var _156d=new _153c({id:_156c,tooltip:this.saveText,imageClass:"icon_Save_16x16",onClick:_153a.hitch(this,this.saveChanges)});this._registeredWidgets.push(_156d);dojo.place(_156d.domNode,_1564[0],_1567);break;case "cancel":var cclid=this.id+"_cancelBtn";var _156e=new _153c({id:cclid,tooltip:this.cancelText,imageClass:"icon_Reset_16x16",onClick:_153a.hitch(this,this.cancelChanges)});this._registeredWidgets.push(_156e);dojo.place(_156e.domNode,_1564[0],_1567);break;}}else{if((tool.type)&&(tool.type==="Sage.UI.SDataLookup")){var conf=tool.controlConfig||tool;var lup=new _1539(conf);dojo.place(lup.domNode,_1569,_1567);this.lookupControl=lup;}else{var _156f=new _153c({id:tool.id,icon:tool.icon||"",imageClass:tool.imageClass||"",onClick:_153a.hitch(tool.scope||this,tool.handler),tooltip:tool.alternateText||tool.tooltip});this._registeredWidgets.push(_156f);dojo.place(_156f.domNode,_1569,(_1568.length>0)?_1568:_1567);}}_1567++;}},addNew:function(args){if(this.store){this.store.newItem(args);}},addAssociatedItems:function(items,_1570,_1571,_1572){var grid=this;if(_153b.getModeId()!=="insert"&&this.store.dirtyDataCache.isDirty){_153d.raiseQueryDialog("SalesLogix",this.dirtyDataMessage,function(_1573){if(_1573){grid.addSelectedItems(items,_1570,_1571,_1572);}},this.okText,this.cancelText);}else{grid.addSelectedItems(items,_1570,_1571,_1572);}},addSelectedItems:function(items,_1574,_1575,_1576){var _1577=[];var grid=this;for(var i=0;i<items.length;i++){var _1578=false;for(var k in grid.store.dataCache){var rec=grid.store.dataCache[k];if(rec[_1575]&&rec[_1575].$key==items[i].$key){_1578=true;}}if(_1578){continue;}var _1579={};if(_153b.getModeId()!=="insert"){_1579[_1574]={$key:_153b.getCurrentEntityId()};}_1579[_1575]={};_153b.extend(_1579[_1575],items[i]);delete _1579.$key;delete _1579.$name;delete _1579.$url;_1577.push(_1579);}if(_1577.length>0){grid.createItems(_1577,function(){if(_153b.getModeId()!=="insert"){__doPostBack("MainContent","");}});}if(_1576){_1576.lookupDialog.hide();}},createItems:function(items,_157a){if(dojo.isArray(items)){var store=this.store;var _157b=items.length;if(typeof console!=="undefined"){}var _157c=function(arg1){this.currentCount=this.currentCount+1;if(typeof console!=="undefined"){if(arg1&&typeof arg1!=="undefined"&&arg1.getResponseHeader){}else{if(arg1&&typeof arg1!=="undefined"&&typeof arg1.$httpStatus==="string"){}else{}}}if(this.currentCount===this.totalCount){this.grid.refresh();if(typeof this.onComplete==="function"){this.onComplete.call(this.grid);}}};var scope={grid:this,totalCount:_157b,currentCount:0,onResponse:_157c,onComplete:_157a||null};for(var i=0;i<items.length;i++){store.createItem(items[i],scope);}}else{_153d.showError(this.createItemsInvalidArrayText);}},deleteSelected:function(_157d){var _157e=this.selection.getSelected();if(_157e.length<1){_153d.showError(this.noSelectionsText);return;}if(this.mode!=="insert"){if(!this.store._checkPageExitWarningMessage()){return;}}var self=this;var opts={title:"Sage SalesLogix",query:dojo.string.substitute(this.confirmDeleteFmtTxt,[_157e.length]),callbackFn:function(_157f){self.deleteCallback(_157f,_157d,_157e);},yesText:this.buttonOk,noText:this.buttonCancel};_153d.raiseQueryDialogExt(opts);},deleteCallback:function(_1580,_1581,_1582){if(_1580){var grid=this;var store=this.store;var _1583=0;for(var i=0;i<_1582.length;i++){if(this.store.isItem(_1582[i])){_1583++;}}grid.selection.clear();this.showLoading();var _1584=function(arg1,arg2){this.currentCount=this.currentCount+1;if(typeof console!=="undefined"){if(arg1&&typeof arg1!=="undefined"&&arg1.getResponseHeader){}else{}}if(this.currentCount===this.totalCount){grid.refresh();if(typeof this.onComplete==="function"){this.onComplete.call(grid);}}};var scope={grid:grid,totalCount:_1583,currentCount:0,onResponse:_1584,onComplete:_1581||null};for(var i=0;i<_1582.length;i++){if(store.isItem(_1582[i])){store.deleteItem(_1582[i],scope);}}store.clearCache();}},cancelChanges:function(){if(this.store&&this.store.revert){this.store.revert();this.markClean();this.refresh();}},saveChanges:function(_1585){if(this.exit){this.edit.apply();}if(!this.store.save){return;}var _1586=0;for(var key in this.store.dirtyDataCache){if(key!=="isDirty"){var _1587=this.store.dirtyDataCache[key];if(this.store.isItem(_1587)){_1586++;}}}var _1588=function(arg1,arg2){this.currentCount=this.currentCount+1;if(typeof console!=="undefined"){if(arg1&&typeof arg1!=="undefined"&&arg1.getResponseHeader){}else{if(arg1&&typeof arg1!=="undefined"&&typeof arg1.$httpStatus==="string"){}else{}}}if(this.currentCount===this.totalCount){this.grid.markClean();this.grid.refresh();if(typeof this.onComplete==="function"){this.onComplete.call(this.grid);}}};var scope={grid:this,totalCount:_1586,currentCount:0,onResponse:_1588,onComplete:_1585||null};this.store.save(scope);},markClean:function(){if(this.dirtyDataMsgID){var _1589=dojo.byId(this.dirtyDataMsgID);if(_1589){dojo.style(dojo.byId(this.dirtyDataMsgID),"display","none");}var _158a=Sage.Services.getService("ClientBindingManagerService");if(_158a){_158a.clearDirtyAjaxItem(this.id);}}},markDirty:function(){var node=dojo.byId(this.dirtyDataMsgID);if(node){dojo.style(node,"display","inline");}var _158b=Sage.Services.getService("ClientBindingManagerService");if(_158b){_158b.addDirtyAjaxItem(this.id);}},refresh:function(){if(!this.scroller){return;}this._refresh();this.onRefresh();},onRefresh:function(){}});return _1544;});},"Sage/MainView/ActivityManager":function(){define("Sage/MainView/ActivityManager",["Sage/UI/SDataMainViewConfigurationProvider","Sage/UI/ListPanel","Sage/Utility","Sage/Utility/Activity","Sage/MainView/ActivityMgr/ActivityGroupContextService","Sage/Services/ActivityService","Sage/MainView/ActivityMgr/FilterConfigurationProvider","dojo/i18n!./nls/ActivityManager","dojo/_base/declare"],function(_158c,_158d,_158e,_158f,_1590,_1591,_1592,_1593,_1594){var _1595=_1594("Sage.MainView.ActivityManager",_158c,{_nlsResources:false,_currentTabId:false,_currentTabDescription:false,_currentUserId:false,_currentKeyField:"$key",_groupContextService:false,_tabNameCache:{},_mainViewName:"ActivityManager",store:false,constructor:function(_1596){this._nlsResources=_1593;this._currentUserId="x";var _1597=Sage.Services.getService("ClientGroupContext");if(!_1597||_1597.declaredClass!=="Sage.MainView.ActivityMgr.ActivityGroupContextService"){Sage.Services.removeService("ClientGroupContext");_1597=new _1590();Sage.Services.addService("ClientGroupContext",_1597);}var ctx=_1597.getContext();this._currentTabId=ctx.CurrentGroupID;this._currentTabDescription=ctx.CurrentName;var _1598=Sage.Services.getService("ClientContextService");if(_1598){if(_1598.containsKey("userID")){this._currentUserId=_1598.getValue("userID");}}this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:this._nlsResources.titleFmtString||"${0}"};dojo.subscribe("/group/context/changed",this,"_onCurrentGroupChanged");},_setListPanelConfig:function(){var _1599=Sage.Services.getService("ClientGroupContext");if(_1599){this.listPanelConfiguration=_1599.getCurrentListConfig();this.store=this.listPanelConfiguration.list.store;this.service=this.listPanelConfiguration.list.store.service;}return;},_getListPanelConfig:function(){this._setListPanelConfig();return this.listPanelConfiguration;},requestConfiguration:function(_159a){if(_159a.success){_159a.success.call(_159a.scope||this,this._getListPanelConfig(),this);}},requestTitlePaneConfiguration:function(_159b){if(_159b.success){_159b.success.call(_159b.scope||this,this.titlePaneConfiguration,this);}},onConfigurationChange:function(obj){},onTitlePaneConfigurationChange:function(){},_setUIForNewTab:function(tabId,_159c){this._currentTabId=tabId;this._currentTabDescription=_159c;},_onCurrentGroupChanged:function(args){var _159d=args["current"];if(!_159d){var _159e=Sage.Services.getService("ClientGroupContext");_159d=_159e.getContext();}if(dijit.byId("GroupTabs").selectedChildWidget.id!==_159d.CurrentGroupID){dijit.byId("GroupTabs").selectChild(_159d.CurrentGroupID);}},_onTabSelected:function(tab){var _159f=Sage.Services.getService("ClientGroupContext");var id=tab.id||tab;var _15a0=_159f.getKeyField(id);if(_159f){var ctx=_159f.getContext();if(ctx.CurrentGroupID===id){return;}this._setUIForNewTab(id,tab.title);_159f.setCurrentGroup(id,tab.title,_15a0);}},_getTabsConfig:function(){var _15a1={store:false,selectedTabId:this._currentTabId,tabKeyProperty:"key",tabNameProperty:"descriptor",fetchParams:{},staticTabs:this._getStaticTabs(),onTabSelect:dojo.hitch(this,"_onTabSelected"),onTabClose:false,showTabContextMenus:false};return _15a1;},_getStaticTabs:function(){var _15a2=Sage.Services.getService("ClientGroupContext");var _15a3=_15a2.getStaticTabs();return _15a3;},_getMenuConfig:function(){return false;}});return _1595;});},"Sage/UI/Alarms/ActivityAlarm":function(){define("Sage/UI/Alarms/ActivityAlarm",["Sage/_Templated","dijit/_Widget","dijit/form/CheckBox","Sage/Utility/Activity","Sage/UI/Alarms/AlarmCountDown","Sage/Link","Sage/UI/Controls/EntityInfoToolTip","dojo/i18n","dojo/i18n!./nls/ActivityAlarm","dojo/_base/declare"],function(_15a4,_15a5,_15a6,_15a7,_15a8,link,_15a9,i18n,_15aa,_15ab){var _15ac=_15ab("Sage.UI.Alarms.ActivityAlarm",[_15a5,_15a4],{widgetsInTemplate:true,userActivity:null,selected:false,key:"",_tooltips:[],widgetTemplate:new Simplate(["<div class=\"alarm-item\">","<table style=\"width:100%\" dojoAttachPoint=\"_item\" dojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">","<col width=\"50px\" />","<col width=\"50%\" />","<col width=\"50%\" />","<col width=\"80px\" />","<tr>","{% var imageClass = Sage.Utility.Activity.getActivityImageClass($.userActivity.Activity.Type, \"medium\"); %}","<td class=\"alarm-icon\">","<div class=\"dijitIcon dijitMenuItemIcon Global_Images icon24x24 {%= imageClass %}\" title=\"{%= $.cleanText($.userActivity.Activity.Description) %}\"></div>","<input type=\"checkbox\" data-dojo-type=\"dijit.form.CheckBox\" size=\"30px\" dojoAttachPoint=\"_checkbox\" />","</td>","<td class=\"alarm-content\">","{% var desc = $.userActivity.Activity.Description;if (!desc) { desc = Sage.Utility.Activity.getActivityTypeName($.userActivity.Activity.Type); } %}","<div class=\"alarm-description\">","{% if ($.userActivity.Activity.Recurring) { %}<div class=\"Global_Images icon16x16 icon_recurring\" title=\"{%= $.recurringText %}\" > </div>&nbsp;&nbsp;{% } %}","{% if ($.userActivity.Status === \"asUnconfirmed\") { %}","<a href=\"javascript:Sage.Link.confirmActivityFor('{%= $.userActivity.Activity.$key %}', '{%= $.userActivity.User.$key %}')\">{%= desc %}</a>","{% } else { %}","<a href=\"javascript:Sage.Link.editActivity('{%= $.userActivity.Activity.$key %}', {%= $.userActivity.Activity.Recurring %})\">{%= desc %}</a>","{% } %}","</div>","<div>{%= Sage.Utility.Activity.formatActivityStartDate($.userActivity.Activity.StartDate) %}</div>","{% if (($.userActivity.Activity.LeadId) && ($.userActivity.Activity.LeadId.trim() !== \"\")) { %}","<div id=\"{%= $.userActivity.Activity.$key %}_lead\" dojoAttachPoint=\"_leadnode\">","{%= $.leadText %}: <a href=\"lead.aspx?entityid={%= $.userActivity.Activity.LeadId %}\">{%= $.userActivity.Activity.LeadName %}</a>","</div>","{% if ($.userActivity.Activity.AccountName !== \"\") { %}","<div>{%= $.companyText %}: {%= $.userActivity.Activity.AccountName %}</div>","{% } %}","{% } else { %}","{% if ($.userActivity.Activity.ContactName !== \"\") { %}","<div id=\"{%= $.userActivity.Activity.$key %}_con\" dojoAttachPoint=\"_connode\">","{%= $.contactText %}: <a href=\"Contact.aspx?entityid={%= $.userActivity.Activity.ContactId %}\">{%= $.userActivity.Activity.ContactName %}</a>","</div>","{% } %}","{% if ($.userActivity.Activity.AccountName !== \"\") { %}","<div id=\"{%= $.userActivity.Activity.$key %}_acc\" dojoAttachPoint=\"_accnode\">","{%= $.accountText %}: <a href=\"Account.aspx?entityid={%= $.userActivity.Activity.AccountId %}\">{%= $.userActivity.Activity.AccountName %}</a>","</div>","{% } %}","{% } %}","</td><td class=\"alarm-content\">","{% if ($.userActivity.Activity.Location) { %}","<div id=\"{%= $.userActivity.Activity.$key %}_Location\" dojoAttachPoint=\"_location\">","{%= $.locationText %}: {%= $.userActivity.Activity.Location %}&nbsp;","</div>","{% } %}","{% if ($.userActivity.Activity.OpportunityName) { %}","<div id=\"{%= $.userActivity.Activity.$key %}_opp\" dojoAttachPoint=\"_oppnode\">","{%= $.opportunityText %}: <a href=\"Opportunity.aspx?entityid={%= $.userActivity.Activity.OpportunityId %}\">{%= $.userActivity.Activity.OpportunityName %}</a>","</div>","{% } %}","{% if ($.userActivity.Activity.TicketNumber) { %}","<div id=\"{%= $.userActivity.Activity.$key %}_tick\" dojoAttachPoint=\"_ticknode\">","{%= $.ticketText %}: <a href=\"Ticket.aspx?entityid={%= $.userActivity.Activity.TicketId %}\">{%= $.userActivity.Activity.TicketNumber %}</a>","</div>","{% } %}","</td>","<td class=\"alarm-countdownContainer\">","<div data-dojo-type=\"Sage.UI.Alarms.AlarmCountDown\" startDate=\"{%= $.userActivity.Activity.StartDate %}\"></div>","</td>","</tr>","</table>","</div>"]),constructor:function(){dojo.mixin(this,_15aa);},postCreate:function(){this.inherited(arguments);this._checkbox.set("checked",this.selected);this._setupTooltips();},_setUserActivityAttr:function(ua){this.userActivity=ua;this.key=ua["$key"];},_setupTooltips:function(){if(this.userActivity.Activity.AccountName!==""){this._tooltips.push(new _15a9({connectId:this._accnode,position:["below"],entityName:"accounts",entityId:this.userActivity.Activity.AccountId}));}if(this.userActivity.Activity.ContactName!==""){this._tooltips.push(new _15a9({connectId:this._connode,position:["below"],entityName:"contacts",entityId:this.userActivity.Activity.ContactId}));}if(this.userActivity.Activity.LeadName!==""){this._tooltips.push(new _15a9({connectId:this._leadnode,position:["below"],entityName:"leads",entityId:this.userActivity.Activity.LeadId}));}},closeTooltips:function(){for(var i=0;i<this._tooltips.length;i++){this._tooltips[i].close();}},cleanText:function(str){if(!str){return "";}var _15ad=new RegExp("[/:\"*?<>|\r\n'\"`]+","g");return str.replace(_15ad,"");},_onHover:function(){dojo.addClass(this.domNode,"alarm-item-hover");},_onUnhover:function(){dojo.removeClass(this.domNode,"alarm-item-hover");},_onClick:function(){this.selected=!this.selected;this._checkbox.set("checked",this.selected);this._setSelectedStyle();},_setSelectedAttr:function(_15ae){this.selected=_15ae;this._checkbox.set("checked",this.selected);this._setSelectedStyle();},_getSelectedAttr:function(){return this.selected;},_setSelectedStyle:function(){if(this.selected){dojo.addClass(this.domNode,"alarm-item-selected");}else{dojo.removeClass(this.domNode,"alarm-item-selected");}}});return _15ac;});},"Sage/UI/Controls/Email":function(){define("Sage/UI/Controls/Email",["dijit/_Widget","Sage/_Templated","Sage/UI/Controls/TextBox","dojox/validate/regexp","dojo/_base/declare"],function(_15af,_15b0,_15b1,_15b2,_15b3){var _15b4=_15b3("Sage.UI.Controls.Email",[_15af,_15b0],{widgetTemplate:new Simplate(["<div class=\"email\" slxcompositecontrol=\"true\" id=\"{%= $.id %}\" >","<input data-dojo-type=\"Sage.UI.Controls.TextBox\" name=\"{%= $.name %}\" ","data-dojo-props=\"textWithIcons: {%= $.buttonVisible %}\"","dojoAttachPoint=\"focusNode\" type=\"text\" style=\"\" ","hotKey=\"{%= $.hotKey %}\" ","{% if($.disabled === \"disabled\") { %} ","disabled=\"disabled\" ","{% } %}","{% if($.readonly === \"readonly\") { %} ","readonly=\"readonly\" ","{% } %}","{% if ($.disabled !== \"disabled\") { %} "," dojoAttachEvent=\"onChange:_onChange, onDblClick:sendEmail\" ","{% } %}"," regExpGen=\"dojox.validate.regexp.emailAddress\"  tabindex=\"{%= $.tabIndex %}\" ","value=\"{%= $.email %}\" required=\"{%= $.required %}\" ","id=\"{%= $.id %}_emailText\" maxlength=\"{%= $.maxLength %}\" > ","{% if ($.buttonVisible && $.disabled !== \"disabled\") { %}","<img alt=\"{%= $.buttonToolTip %}\" tabindex=\"{%= $.tabIndex %}\" data-dojo-attach-event=\"ondijitclick: sendEmail\" ","style=\"padding-left:0;cursor: pointer; vertical-align: left;\" ","src=\"{%= $.buttonImageUrl %}\" ","title=\"{%= $.buttonToolTip %}\" id=\"{%= $.id %}_emailButton\"> ","{% } %}","</div>"]),shouldPublishMarkDirty:true,name:"",autoPostBack:false,displayMode:"",_class:"",textboxToolTip:"",textboxStyle:"",readonly:"",disabled:"",hotKey:"",maxLength:128,buttonVisible:true,buttonImageUrl:"",buttonToolTip:"",buttonStyle:"",required:false,tabIndex:0,email:"",emailId:"",constructor:function(_15b5){_15b5.id=_15b5.emailId;},postCreate:function(){this.formatEmail();this.inherited(arguments);},formatEmail:function(){dojo.style(this.focusNode.focusNode,"color","#000099");},widgetsInTemplate:true,_onChange:function(_15b6){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}this.formatEmailChange();},formatEmailChange:function(){if(this.email!==this.focusNode.value){this.email=this.focusNode.value;}},sendEmail:function(){var email=this.email;email="mailto:"+email;document.location.href=email;}});return _15b4;});},"Sage/UI/SummaryFormatterScope":function(){define("Sage/UI/SummaryFormatterScope",["Sage/UI/SummaryContainer","Sage/Data/SummaryViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/lang","dojo/_base/declare"],function(_15b7,_15b8,_15b9,lang,_15ba){var _15bb=_15ba("Sage.UI.SummaryFormatterScope",null,{templateLocation:false,queryName:"",idField:"",dataManager:null,requestConfiguration:false,widgets:[],constructor:function(args){dojo.mixin(this,args);this.widgets=[];this.preFetchResources();this._setupDataManager();},_setupDataManager:function(){this.dataManager=new _15b8();if(Sage.Services.hasService("SummaryViewDataManager")){Sage.Services.removeService("SummaryViewDataManager");}Sage.Services.addService("SummaryViewDataManager",this.dataManager);},formatSummary:function(value,idx){var _15bc,id=idx+"_sum_"+value;if(value===null){return "";}if(this.dataManager==null){this.dataManager=Sage.Services.getService("SummaryViewDataManager");}if(this.dataManager==null){this._setupDataManager();}_15bc=dijit.byId(id);if(_15bc){_15bc.destroy();}_15bc=new _15b7({id:id,templateLocation:this.templateLocation});this.dataManager.requestData(value,_15bc,this.requestConfiguration);this.widgets[idx]=_15bc;return this.widgets[idx];},preFetchResources:function(){var _15bd=["Sage"];var _15be=this.templateLocation.split("/");for(var i=0;i<_15be.length-1;i++){_15bd.push(_15be[i]);}var path="dojo/i18n!"+_15bd.join("/")+"/nls/"+_15be[_15be.length-1].replace(".html","");require([path],lang.hitch(this,function(nls){lang.mixin(this,nls);}));dojo["cache"]("Sage",this.templateLocation);}});return _15bb;});},"Sage/UI/_TitlePaneConfigProvider":function(){define("Sage/UI/_TitlePaneConfigProvider",["dojo/_base/declare"],function(_15bf){var _15c0=_15bf("Sage.UI._TitlePaneConfigProvider",null,{titlePaneConfiguration:{menu:{},tabs:{},titleFmtString:"${0}"},requestTitlePaneConfiguration:function(_15c1){if(_15c1.success&&this.titlePaneConfiguration){_15c1.success.call(_15c1.scope||this,this.titlePaneConfiguration,this);}}});return _15c0;});},"Sage/QuickForms/Design/nls/CurrencyControlDesigner":function(){define("Sage/QuickForms/Design/nls/CurrencyControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_15c2,lang){var nls={root:{displayNameText:"Currency"}};return lang.mixin(_15c2,nls);});},"Sage/LanguageList":function(){define("Sage/LanguageList",[],function(){return {root:null,"af":true,"ar":true,"ar-dz":true,"ar-jo":true,"ar-lb":true,"ar-ma":true,"ar-sy":true,"ar-tn":true,"az":true,"be":true,"bg":true,"ca":true,"cs":true,"da":true,"de":true,"de-at":true,"de-ch":true,"de-li":true,"el":true,"en":true,"en-au":true,"en-bz":true,"en-ca":true,"en-gb":true,"en-jm":true,"en-nz":true,"en-tt":true,"en-us":false,"en-za":true,"es":true,"es-ar":true,"es-bo":true,"es-cl":true,"es-co":true,"es-cr":true,"es-ec":true,"es-gt":true,"es-hn":true,"es-pa":true,"es-pe":true,"es-pr":true,"es-py":true,"es-uy":true,"es-ve":true,"et":true,"eu":true,"fa":true,"fi":true,"fo":true,"fr":true,"fr-be":true,"fr-ca":true,"fr-ch":true,"fr-lu":true,"gd":true,"he":true,"hi":true,"hr":true,"hu":true,"id":true,"is":true,"it":true,"it-ch":true,"ja":true,"kk":true,"ko":true,"lt":true,"lv":true,"mk":true,"ms":true,"mt":true,"nb":true,"nl":true,"nl-be":true,"pl":true,"pt":true,"pt-pt":true,"pt-br":true,"rm":true,"ro":true,"ru":true,"sk":true,"sl":true,"sq":true,"sr":true,"sv":true,"sv-fi":true,"th":true,"tn":true,"tr":true,"ts":true,"uk":true,"ur":true,"ve":true,"vi":true,"xh":true,"zh":true,"zh-cn":true,"zh-hk":true,"zh-sg":true,"zh-tw":true,"zu":true};});},"Sage/QuickForms/Design/NonVisibleControlContainer":function(){define("Sage/QuickForms/Design/NonVisibleControlContainer",["dojo/query","dojo/topic","dojo/string","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/event","dojo/dom-attr","dojo/dom-class","dojo/NodeList-traverse","dojo/NodeList-manipulate","dijit/registry","dijit/focus","dijit/layout/_LayoutWidget","Sage/_EventMapMixin","Sage/_Templated","dojo/i18n!./nls/NonVisibleControlContainer"],function(query,topic,_15c3,_15c4,array,lang,event,_15c5,_15c6,_15c7,_15c8,_15c9,focus,_15ca,_15cb,_15cc,_15cd){return _15c4("Sage.QuickForms.Design.NonVisibleControlContainer",[_15ca,_15cb,_15cc],{events:{"click":"_onClick","keydown":"_onKeyDown"},widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"design-hidden-container\">","<div class=\"design-hidden-container-header dijit dijitToolbar\">{%: $.headerText %}</div>","<div class=\"design-hidden-container-content\" data-dojo-attach-point=\"containerNode\"></div>","<div>"]),_designGroup:null,_designGroupTopics:null,selections:null,singleSelection:false,designGroup:"default",headerText:"Non-Visual Controls",_getDesignGroupAttr:function(){return this._designGroup;},_setDesignGroupAttr:function(value){if(this._designGroupTopics){array.forEach(this._designGroupTopics,function(topic){this.unsubscribe(topic);},this);}this._designGroup=value;this._designGroupTopics=[this.subscribe(_15c3.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this._onDesignerSelected)];},constructor:function(){this.selections=[];lang.mixin(this,_15cd);},buildRendering:function(){this.inherited(arguments);_15c5.set(this.domNode,"tabIndex",0);},_onKeyDown:function(evt){},_handleSelectionFor:function(_15ce,_15cf){if(_15ce){var _15d0=(array.indexOf(this.selections,_15ce)>-1);if(_15cf&&!this.singleSelection){if(!_15d0){array.forEach(this.selections,function(_15d1){query(_15d1.domNode).attr("tabIndex","-1");});this.selections.push(_15ce);_15c5.set(_15ce.domNode,"tabIndex",0);focus.focus(_15ce.domNode);_15c6.add(_15ce.domNode,"design-hidden-item-selected");this.onSelectionChanged(this.selections,true);topic.publish(_15c3.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),_15ce,true,this);}}else{this._clearSelectionDom();this._clearSelectionState(false);this.selections=[_15ce];_15c5.set(_15ce.domNode,"tabIndex",0);focus.focus(_15ce.domNode);_15c6.add(_15ce.domNode,"design-hidden-item-selected");this.onSelectionChanged(this.selections);topic.publish(_15c3.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),_15ce,true,this);}}else{if(this.singleSelection||!_15cf){this._clearSelectionDom();this._clearSelectionState();}}},_onClick:function(evt){var node=query(evt.target).closest(".dijitLayoutContainer-child")[0],_15d2=node&&_15c9.byNode(node),_15d3=evt.shiftKey;this._handleSelectionFor(_15d2,_15d3);},onSelectionChanged:function(_15d4,_15d5){},_clearSelectionDom:function(){if(this.selections.length>0){array.forEach(this.selections,function(_15d6){query(_15d6.domNode).attr("tabIndex","-1").removeClass("design-hidden-item-selected");});}},_clearSelectionState:function(_15d7){if(this.selections.length>0){this.selections=[];if(_15d7!==false){this.onSelectionChanged(this.selections);topic.publish(_15c3.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),false,false,this);}}},_onDesignerSelected:function(_15d8,_15d9,_15da){if(_15d8&&_15da!==this){this._clearSelectionDom();this._clearSelectionState(false);}},clearSelections:function(){this._clearSelectionDom();this._clearSelectionState();},clear:function(){this._clearSelectionState();array.forEach(this.getChildren(),function(child){this.removeChild(child);},this);this.layout();}});});},"url:Sage/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-event=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n        <div class=\"dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}\" data-dojo-attach-point=\"iconNodeSprite\"></div>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n\n","Sage/Array":function(){define("Sage/Array",[],function(){if(typeof Array.prototype.swap==="undefined"){Array.prototype.swap=function(d,s){if(d>this.length||s>this.length){return;}var tmp=this[d];this[d]=this[s];this[s]=tmp;return this;};}if(typeof Array.prototype.getIndexByProp==="undefined"){Array.prototype.getIndexByProp=function(str,prop){for(var i=0,len=this.length;i<len;i++){if(prop&&prop==="key"){if(str in this[i]){return i;}}else{if(prop&&prop==="value"){for(var p in this[i]){if(this[i].hasOwnProperty(p)){if(this[i][p]===str){return i;}}}}}}};}if(typeof Array.prototype.placeByAttr==="undefined"){Array.prototype.placeByAttr=function(obj,attr){var _15db=false;if(!this.length){this.push(obj);return;}for(var i=0,len=this.length;i<len;i++){if(this[i][attr]>=obj[attr]){_15db=true;this.splice(i,0,obj);break;}}if(!_15db){this.push(obj);}};}if(typeof Array.prototype.removeByAttr==="undefined"){Array.prototype.removeByAttr=function(attr,arg){if(!this.length){return;}for(var i=0,len=this.length;i<len;i++){if(this[i][attr]===arg){this.splice(i,1);break;}}};}if(typeof Array.prototype.filter==="undefined"){Array.prototype.filter=function(fun){"use strict";if(this==null){throw new TypeError();}var t=Object(this);var len=t.length>>>0;if(typeof fun!="function"){throw new TypeError();}var res=[];var thisp=arguments[1];for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(thisp,val,i,t)){res.push(val);}}}return res;};}return Array;});},"Sage/QuickForms/Design/nls/DataGridControlDesigner":function(){define("Sage/QuickForms/Design/nls/DataGridControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_15dc,lang){var nls={root:{displayNameText:"Data Grid",emptyTableRowStringText:"No records match the selection criteria."}};return lang.mixin(_15dc,nls);});},"url:Sage/UI/Controls/templates/Lookup.html":"<div class=\"textcontrol lookup\">\r\n    <span id=\"${id}\" class=\"lookup\">\r\n        <input id=\"${id}_LookupText\" class=\"text-with-icons\" required=\"${required}\" type=\"text\" dojoAttachPoint=\"textbox,focusNode\" />\r\n        <a href=\"#\">\r\n            <img id=\"${id}_LookupBtn\" src=\"images/icons/Find_16x16.png\" dojoAttachPoint=\"lookupButton\" alt=\"${buttonToolTip}\" title=\"${buttonToolTip}\" />\r\n        </a>\r\n        \r\n        <img id=\"${id}_btnClearResult\" src=\"images/icons/Delete_16x16.png\" dojoAttachPoint=\"clearButton\" class=\"display-none\" alt=\"${closeButtonToolTip}\" title=\"${closeButtonToolTip}\"/>\r\n    </span>\r\n</div>","Sage/UI/Columns/Boolean":function(){define("Sage/UI/Columns/Boolean",["dojox/grid/cells/_base","dojo/i18n","Sage/Utility","dojo/i18n!../nls/Boolean","dojo/_base/declare"],function(_15dd,i18n,_15de,_15df,_15e0){var _15e1=_15e0("Sage.UI.Columns.Boolean",_15dd,{constructor:function(){var _15e2=i18n.getLocalization("Sage.UI","Boolean");dojo.mixin(this,_15e2);this.inherited(arguments);},formatter:function(val,index){var _15e3={"T":true,"t":true,"Y":true,"y":true,"1":true,"+":true};if(!this.formatString){return (val in _15e3)?this.yesText:this.noText;}var _15e4=this.formatString.split("/");if(_15e4.length&&_15e4.length===2){var _15e5=(val in _15e3)?_15e4[0]:_15e4[1];if(!_15e5){return (val in _15e3)?this.yesText:this.noText;}else{return _15de.htmlEncode(_15e5);}}return (val in _15e3)?this.yesText:this.noText;}});return _15e1;});},"Sage/MainView/SecurityMgr/SecurityProfile":function(){define("Sage/MainView/SecurityMgr/SecurityProfile",["dojo/i18n!./nls/SecurityProfile","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","dojo/_base/declare","dijit/form/Form","dijit/form/Select","dijit/form/Textarea","dijit/layout/ContentPane","dojox/layout/TableContainer","dojo/i18n!./nls/SecurityProfile"],function(_15e6,_15e7,_15e8,_15e9,_15ea,_15eb,_15ec){var _15ed=_15ec("Sage.MainView.SecurityMgr.SecurityProfile",[_15ea,_15eb],{_dialog:false,selectedFieldIndex:1,store:false,_isNew:false,widgetsInTemplate:true,widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"{%= $.id %}_dlgSecurityProfile\" title=\"{%= $.securityProfile_Caption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">","<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmSecurityProfile\">","<table cellspacing=\"20\">","<tr>","<td>","<label>{%= $.description_Text %}</label>","</td>","<td>","<input type=\"text\" id=\"secDlg_Description\" dojoAttachPoint=\"profileDescription\" name=\"profileDescription\" required=\"true\" dojoType=\"dijit.form.TextBox\" />","</td>","<tr>","<td>","<label>{%= $.profileType_Text %}</label>","</td>","<td>","<select dojoType=\"dijit.form.Select\" name=\"profileType\" id=\"secDlg_Type\">","<option value=\"U\">User</option>","<option value=\"S\">System</option>","</select>","</td>","</tr>","</table>","<div align=\"right\">","<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.ok_Text %}</div>","<div data-dojo-type=\"dijit.form.Button\" style=\"margin-left:5px;\" id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCancel_Caption %}</div>","</div>","</div>","</div>","</div>"]),constructor:function(isNew){this._isNew=isNew;dojo.mixin(this,_15e6);},show:function(){if(isNew){var store=this.getStore();store.newItem({onComplete:this.receiveNewProfileToEdit,scope:this});}this._dialog.show();if(!this._dialog.helpIcon){_15e8.mixin(this._dialog,new _15e7());this._dialog.createHelpIconByTopic("securityprofile");}},getStore:function(){if(this.store){return this.store;}var _15ee=Sage.Data.SDataServiceRegistry.getSDataService("system");this.store=new Sage.Data.SingleEntrySDataStore({service:_15ee,resourceKind:"securityProfiles",include:[],select:["profileDescription","defaultPermission","profileType"]});return this.store;},receiveNewProfileToEdit:function(_15ef){this.receiveProfileToEdit(_15ef,true);},receiveProfileToEdit:function(_15f0,isNew){this._isNew=(isNew===true);var dlg=dijit.byId("secProfileDlg");if(dlg){dlg.set("value",_15f0);dlg.show();}},_okClick:function(){},save:function(_15f1){if(this.store){var dlg=dijit.byId("secProfileDlg");var _15f2=dlg.get("value");for(var prop in _15f2){this.store.setValue(false,prop,_15f2[prop]);}if(this._isNew){this.store.saveNewEntity(false,_15f1.success,_15f1.failure,this);}else{this.store.save(_15f1);}}},saveAndClose:function(){this.save({success:function(_15f3){var dlg=dijit.byId("secProfileDlg");dlg.hide();var _15f4=dijit.byId("titlePane");if(_15f4){_15f4.resetConfiguration();}},failure:function(err){alert("The profile could not be saved: "+err);}});},_close:function(){this._dialog.destroyRecursive();}});return _15ed;});},"Sage/QuickForms/Design/nls/PickListControlDesigner":function(){define("Sage/QuickForms/Design/nls/PickListControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_15f5,lang){var nls={root:{displayNameText:"Pick List"}};return lang.mixin(_15f5,nls);});},"Sage/QuickForms/Design/Editors/nls/CheckBoxBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/CheckBoxBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_15f6,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"}}};return lang.mixin(_15f6,nls);});},"Sage/UI/TextBox":function(){define("Sage/UI/TextBox",["dijit/form/TextBox","dojo/_base/declare"],function(_15f7,_15f8){var _15f9=_15f8("Sage.UI.TextBox",_15f7,{postCreate:function(){this.inherited(arguments);this._val=this.get("value");if(this.get("value")===""&&this._val){this.set("value",this._val);}this.set("class","txt-ss-watermark");},onFocus:function(){this.set("value","");this.set("class","txt-ss");},forceFocus:function(val){this.set("value",val);this.set("class","txt-ss");},onBlur:function(){if(this.get("value")===""){this.set("class","txt-ss-watermark");this.set("value",this._val);}}});return _15f9;});},"Sage/QuickForms/Design/Editors/nls/ComboBoxAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/ComboBoxAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_15fa,lang){var nls={root:{titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",itemGroupText:"Items",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",dataSourceText:"Data Source:",dataSourceTooltipText:"Source of the data for this control such as another control or an entity.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",itemsText:"Items:",itemsTooltipText:"Values the user can select.",textFieldText:"Text Field:",textFieldTooltipText:"The name of the data source field used to populate the visible text portion of the list items.",valueFieldText:"Value Field:",valueFieldTooltipText:"The name of the data source field used to populate the value portion of the list items.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},hasItemsText:"Set",noItemsText:"Not Set"}};return lang.mixin(_15fa,nls);});},"Sage/MainView/Contact/nls/ContactSearchForDuplicates":function(){define("Sage/MainView/Contact/nls/ContactSearchForDuplicates",["Sage/LanguageList","dojo/_base/lang"],function(_15fb,lang){var nls={root:{svAccount_Caption:"Account:",svCompany_Caption:"Company:",svEmail_Caption:"Email:",svName_Caption:"Name:",svTitle_Caption:"Title:",svType_Caption:"Type:",svSubType_Caption:"Sub Type:",svAccMgr_Caption:"Acct. Mgr.:",svHomePhone_Caption:"Home phone:",svWorkPhone_Caption:"Work phone:",svMobilePhone_Caption:"Mobile phone:",svStatus_Caption:"Status:",svWebAddress_Caption:"Web:",svEntityAccount_Caption:"Account",svEntityLead_Caption:"Lead",svEntityContact_Contact:"Contact",svTollFree_Caption:"Toll free:",svIndustry_Caption:"Industry:",svDivision_Caption:"Division:",svMainPhone_Caption:"Main phone:",LeadSummaryView_Title:"Summary View - Lead",ContactSummaryView_Title:"Summary View - Contact",AccountSummaryView_Title:"Summary View - Account",closeText:"Close",errorLoadingSummaryView:"An error occured loading summary view: ${0}"}};return lang.mixin(_15fb,nls);});},"Sage/QuickForms/Design/Editors/nls/DateTimePickerBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/DateTimePickerBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_15fc,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",displayDateText:"Display Date:",displayDateTooltipText:"Display the date portion.",displayTimeText:"Display Time:",displayTimeTooltipText:"Display the time portion.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"}}};return lang.mixin(_15fc,nls);});},"Sage/UI/CalendarUsersListPane":function(){define("Sage/UI/CalendarUsersListPane",["Sage/Data/SDataServiceRegistry","Sage/Data/WritableSDataStore","Sage/Utility","dojo/_base/lang","dojo/_base/array","dojo/i18n","dojo/query","dojo/_base/declare","dojo/data/ItemFileWriteStore","dojox/grid/enhanced/plugins/IndirectSelection","dojox/grid/EnhancedGrid","dojox/grid/enhanced/plugins/Pagination","dojo/i18n!./nls/CalendarUsersListPane"],function(_15fd,_15fe,_15ff,_1600,array,i18n,_1601,_1602){var _1603=_1602("Sage.UI.CalendarUsersListPane",null,{Id:null,_store:null,_grid:null,_colors:{},_selectedUsers:{},_maxUserCount:4,_checkedUsersCount:0,_initialLoad:false,_storeItems:[],_maxUserCountReached:false,_userOptions:{},constructor:function(_1604){this.Id=_1604.Id;this._userOptions=_1604.options;this._colors=[{"usercolor":"user2","set":false},{"usercolor":"user3","set":false},{"usercolor":"user4","set":false},{"usercolor":"user5","set":false}];this._nlsResources=i18n.getLocalization("Sage.UI","CalendarUsersListPane");this._initializeList();},_where:function(){var _1605=Sage.Utility.getClientContextByKey("userID");if(_1600.trim(_1605)==="ADMIN"){return dojo.string.substitute("(AccessId eq '${0}' OR AccessId eq '${1}' OR AccessId eq 'EVERYONE') AND Type eq 'User'",[_1605,_1600.trim(_1605)]);}else{return dojo.string.substitute("(AccessId eq '${0}' OR AccessId eq 'EVERYONE') AND Type eq 'User'",[_1600.trim(_1605)]);}},_getSort:function(){var sort=[{attribute:"Name"}];return sort;},_getUserColor:function(_1606){var color="";if(this._selectedUsers[_1606]){color=this._selectedUsers[_1606].usercolor;}return color;},_initializeList:function(){var _1607=this._nlsResources.header_user||"User";var _1608=this._nlsResources.maxUsersErrorMessage||"Sorry, you cannot view more than ${0} calendars (including your own) at one time.  Clear one of the currently-selected calendars and try again.";_1608=dojo.string.substitute(_1608,[this._maxUserCount]);var self=this;var _1609=function(data,_160a){array.forEach(data,function(item,i){_1600.mixin(item,{usercolor:"",username:item["Name"],userId:item["$key"].substr(0,12)});self._storeItems.push(item);});};var store=this._store=new Sage.Data.WritableSDataStore({service:_15fd.getSDataService("dynamic"),resourceKind:"activityresourceviews",select:["$key","Name"],include:[],sort:[{attribute:"Name"}],query:{conditions:this._where()},onComplete:_1609});var _160b=[{field:"userId",width:"20px",name:" ",formatter:function(value){return "<div class='userStyles "+self._getUserColor(value)+"'></div>";}},{field:"Name",width:"100%",name:_1607}];var grid=this._grid=new dojox.grid.EnhancedGrid({id:"grid",store:store,structure:_160b,layout:"layout",noDataMessage:"<span class='dojoxGridNoData'>No users</span>",keepSelection:true,plugins:{indirectSelection:{headerSelector:false,width:"20px",styles:"text-align: center;"}}},dojo.byId(this.Id));dojo.connect(grid.selection,"onSelected",function(_160c){if(!self._initialLoad){if(self._checkedUsersCount<self._maxUserCount){var item=grid.getItem(_160c);self._checkedUsersCount++;var _160d=item["$key"].substr(0,12);var _160e="";if(self._selectedUsers[_160d]){}else{if(_160d===_1600.trim(_15ff.getClientContextByKey("userID"))){_160e="user1";}else{if(!_160e||_160e==""){for(var j=0;j<self._colors.length;j++){if(!self._colors[j]["set"]){_160e=self._colors[j]["usercolor"];self._colors[j]["set"]=true;break;}}}}var _160f={};_160f["userId"]=_160d;_160f["usercolor"]=_160e;self._selectedUsers[_160d]=_160f;var _1610=_1600.clone(_160f);self._saveUserOption();grid.update();dojo.publish("/sage/ui/calendarUser/selectionChanged/add",[_1610,null]);}}else{self._maxUserCountReached=true;grid.rowSelectCell.toggleRow(_160c,false);Sage.UI.Dialogs.showError(_1608);}}else{if(self._checkedUsersCount<self._maxUserCount){}}});dojo.connect(grid.selection,"onDeselected",function(_1611){if(self._maxUserCountReached){self._maxUserCountReached=false;return;}var item=grid.getItem(_1611);var _1612=false;var _1613=item["$key"].substr(0,12);var _1614=self._selectedUsers[_1613].usercolor;if(self._selectedUsers[_1613]){_1612=true;}if(_1612){for(var j=0;j<self._colors.length;j++){if(self._colors[j]["usercolor"]===_1614){self._colors[j]["set"]=false;break;}}delete self._selectedUsers[_1613];self._checkedUsersCount--;self._saveUserOption();grid.update();var _1615={};_1615["userId"]=_1613;dojo.publish("/sage/ui/calendarUser/selectionChanged/remove",[_1615,this]);}});dojo.connect(grid,"_onFetchComplete",function(){self._initialLoad=true;var _1616=false;var _1617=[];var _1618=_1600.clone(self._selectedUsers);var _1619=self._grid.rowCount>self._grid.rowsPerPage?self._grid.rowsPerPage:self._grid.rowCount;for(var i=0;i<_1619;i++){var item=self._storeItems[i];var _161a=item["$key"].substr(0,12);if(self._selectedUsers[_161a]){_1617.push(_161a);if(!self._grid.selection.selected[i]){if(self._checkedUsersCount<self._maxUserCount){self._grid.rowSelectCell.toggleRow(i,true);self._checkedUsersCount++;}}}}for(var j in _1618){var uId=_1600.trim(_1618[j]["userId"].toString());var _161b=_1600.trim(_1618[j]["usercolor"].toString());if(array.indexOf(_1617,uId)<0){delete self._selectedUsers[uId];for(var k=0;k<self._colors.length;k++){if(self._colors[k]["usercolor"]===_161b){self._colors[k]["set"]=false;break;}}_1616=true;}}if(_1616){self._saveUserOption();}self._initialLoad=false;if(self._selectedUsers){var _161c=_1600.clone(self._selectedUsers);dojo.publish("/sage/ui/calendarUserList/loaded",[_161c,null]);self._grid.update();}});self._grid.canSort=function(col){if(Math.abs(col)==2){return false;}else{return true;}};if(this._userOptions["rememberusers"]){this._loadCalendarUserListOptions();}else{var data={};data["value"]=null;this._receivedCalendarUserListOptions(data);}},_loadCalendarUserListOptions:function(){var _161d=Sage.Services.getService("UserOptions");if(_161d){_161d.get("CalendarUsers","Calendar",this._receivedCalendarUserListOptions,null,this);}},_receivedCalendarUserListOptions:function(data){if(data!=null){if(data){var _161e=data["value"];var _161f=_15ff.getClientContextByKey("userID");_161f=_1600.trim(_161f);if(_161e==null||_161e==""){_161e=_161f+"|"+"user1";}else{if(_161e.indexOf(_161f)<0){_161e+=","+_161f+"|"+"user1";}}dojo.cookie("selectedCalendarUsers",_161e);this._setSelectedUsers(_161e);}}if(this._selectedUsers){this._grid.startup();}},_saveUserOption:function(value){var _1620=Sage.Services.getService("UserOptions");if(_1620){var _1621="";if(this._selectedUsers){for(var i in this._selectedUsers){if(_1621!=""){_1621+=",";}_1621+=_1600.trim(this._selectedUsers[i]["userId"].toString());_1621+="|";if(this._selectedUsers[i]["usercolor"]){_1621+=this._selectedUsers[i]["usercolor"].toString();}}}_1620.set("CalendarUsers","Calendar",_1621,null,null,this);}},_setSelectedUsers:function(_1622){if(_1622!=null){var _1623=_1622.split(",");var _1624;var _1625,_1626;for(var i=0;i<_1623.length;i++){_1624=_1623[i];if(_1624){_1625=_1624.split("|")[0];_1626=_1624.split("|")[1];if(!_1626){for(var j=0;j<this._colors.length;j++){if(!this._colors[j]["set"]){_1626=this._colors[j]["usercolor"];this._colors[j]["set"]=true;break;}}}else{for(var k=0;k<this._colors.length;k++){if(this._colors[k]["usercolor"]===_1626){this._colors[k]["set"]=true;break;}}}var _1627={};_1627["userId"]=_1625;_1627["usercolor"]=_1626;this._selectedUsers[_1625]=_1627;}}}}});return _1603;});},"Sage/QuickForms/Design/NumericControlDesigner":function(){define("Sage/QuickForms/Design/NumericControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/NumericBasicPropertyEditor","./Editors/NumericAdvancedPropertyEditor","dojo/i18n!./nls/NumericControlDesigner"],function(_1628,array,lang,_1629,_162a,_162b,_162c,_162d,_162e,_162f,_1630){return _1628("Sage.QuickForms.Design.NumericControlDesigner",[_162a,_162b,_1629,_162c],{designSupport:{visible:true},editors:[_162e,_162f,_162d],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-numeric",helpTopicName:"Numeric_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXNumeric, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Numeric",constructor:function(){lang.mixin(this,_1630);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_1631){return (_1631["ControlItemName"]=="Text");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getDecimalDigitsAttr:function(){return lang.getObject("DecimalDigits.DecimalDigits",false,this.entry);},_setDecimalDigitsAttr:function(value){lang.setObject("DecimalDigits.DecimalDigits",value,this.entry);},_getFormatTypeAttr:function(){return lang.getObject("FormatType",false,this.entry);},_setFormatTypeAttr:function(value){lang.setObject("FormatType",value,this.entry);},_getMaxLengthAttr:function(){return lang.getObject("MaxLength",false,this.entry);},_setMaxLengthAttr:function(value){lang.setObject("MaxLength",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},_getStrictAttr:function(){return lang.getObject("DecimalDigits.Strict",false,this.entry);},_setStrictAttr:function(value){lang.setObject("DecimalDigits.Strict",value,this.entry);},setupFor:function(_1632){this.inherited(arguments);this.set("decimalDigits",-1);this.set("formatType","Number");this.set("maxLength",_1632["data"].length||-1);this.set("strict",false);this.set("required",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Text",DataItemName:_1632.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_1632.propertyPath||"");},startup:function(){this.inherited(arguments);var _1633=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_1633&&_1633["DataItemName"])||this.get("text")||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/TaskPane/nls/AccountingTasksTasklet":function(){define("Sage/TaskPane/nls/AccountingTasksTasklet",["Sage/LanguageList","dojo/_base/lang"],function(_1634,lang){var nls={root:{updatePricingRecords:"You may only select one record when performing this option."}};return lang.mixin(_1634,nls);});},"Sage/QuickForms/Design/Editors/nls/DataGridBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/DataGridBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1635,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",dataText:"Data",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",pageSizeText:"Page Size:",pageSizeTooltipText:"The number of grid records to display on a single page.",resizableColumnsText:"Resizable Columns:",resizableColumnsTooltipText:"Allows user to resize columns.",alignmentText:{left:"Left",center:"Center",right:"Right"}}};return lang.mixin(_1635,nls);});},"Sage/UI/SpeedSearch":function(){require({cache:{"url:Sage/templates/SpeedSearch.html":"<span>\r    <!-- the textbox -->\r    <input type=\"text\" id=\"txt_ss\" />\r    <!--the image button-->\r    <button id='ss-btn-image' type=\"button\" style=\"font-size:10px\"></button>\r    <button id='ss-btn-toggle' type=\"button\" style=\"font-size:10px\"></button>\r</span>\r"}});define("Sage/UI/SpeedSearch",["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/i18n","dojo/text","dijit/_Widget","Sage/UI/TextBox","Sage/UI/ImageButton","Sage/UI/ToggleButton","dojo/i18n!./nls/SpeedSearch","dojo/text!../templates/SpeedSearch.html","dojo/_base/declare"],function(_1636,_1637,i18n,text,_1638,_1639,_163a,_163b,nls,_163c,_163d){var _163e=_163d("Sage.UI.SpeedSearch",[_1638,_1636,_1637],{templateString:_163c,standardText:"standard",advancedText:"advanced",speedSearchText:"SpeedSearch",postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI","SpeedSearch"));this.inherited(arguments);},postCreate:function(){var that=this;var re=/SpeedSearch\.aspx|speedsearch\.aspx/;this.isSS=re.test(window.location.pathname);this.QS=window.location.search;if(this.QS){this.queryObject=dojo.queryToObject(this.QS.substring(1,this.QS.length));}var _163f=new _163b({showLabel:true,checked:false,"class":"quick-speedsearch-toggle",onClick:function(){if(this.getValue()===that.standardText){this.setValue(that.advancedText);if(that.isSS){that.toggleAdv();}}else{this.setValue(that.standardText);if(that.isSS){that.toggleAdv();}}},label:this.queryObject?this.queryObject.type:this.standardText},"ss-btn-toggle");_163f.set("class","displaynone");if(_163f.getValue()===this.advancedText&&this.isSS){this.toggleAdv();}var _1640=new _1639({watermark:true,value:this.speedSearchText,"class":"quick-speedsearch-text",onKeyDown:function(event){if(event.keyCode===13){that._goSearch(_1640.getValue(),_163f.getValue());}}},"txt_ss");if(this.queryObject){_1640.forceFocus(this.queryObject.terms);}var _1641=new _163a({imageClass:"icon_SpeedSearch_16x16","class":"quick-speedsearch-button",onClick:function(){that._goSearch(_1640.getValue(),_163f.getValue());}},"ss-btn-image");this.inherited(arguments);},_goSearch:function(terms,type){if(terms!==this.speedSearchText){window.location="SpeedSearch.aspx?terms="+terms+"&type="+type;}},toggleAdv:function(){ToggleAdvanced();}});return _163e;});},"Sage/QuickForms/Design/Editors/nls/CurrencyBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/CurrencyBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1642,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"}}};return lang.mixin(_1642,nls);});},"Sage/UI/nls/EditableGrid":function(){define("Sage/UI/nls/EditableGrid",["Sage/LanguageList","dojo/_base/lang"],function(_1643,lang){var nls={root:{unsavedDataText:"*unsaved data",addText:"Add",deleteText:"Delete",saveText:"Save",cancelText:"Cancel",noSelectionsText:"There are no records selected.",confirmDeleteFmtTxt:"Are you sure you want to delete these ${0} items?",yesText:"Yes",noText:"No",createItemsInvalidArrayText:"The items parameter in Sage.UI.EditableGrid.createItems() should be an array.",recordCountFormatString:"Records ${0} - ${1} of ${2}",noDataMessage:"No records match the selection criteria.",dirtyDataMessage:"You have unsaved data.  If you continue you will lose the changes you have made.",okText:"OK"}};return lang.mixin(_1643,nls);});},"Sage/MainView/SecurityMgr/nls/SecurityProfile":function(){define("Sage/MainView/SecurityMgr/nls/SecurityProfile",["Sage/LanguageList","dojo/_base/lang"],function(_1644,lang){var nls={root:{securityProfile_Caption:"Security Profile",btnCancel_Caption:"Cancel",ok_Text:"OK",description_Text:"Description",profileType_Text:"Profile Type"}};return lang.mixin(_1644,nls);});},"Sage/Data/ProxySDataStore":function(){define("Sage/Data/ProxySDataStore",["Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(_1645,_1646,_1647){var _1648=_1647("Sage.Data.ProxySDataStore",_1645,{constructor:function(o){this.singleResource=null;this._request=null;this._hasValidService=(typeof this.service!=="undefined");},getCollectionRequestObj:function(_1649){if(!this._hasValidService){return false;}var _164a=this.inherited(arguments);if(typeof this.getResourcePredicate==="function"){var idx=(_164a.uri.getPathSegment(Sage.SData.Client.SDataUri.ResourcePropertyIndex))?Sage.SData.Client.SDataUri.ResourcePropertyIndex:_164a.uri.pathSegments.length-1;var _164b=_164a.uri.getPathSegment(idx);var pred=this.getResourcePredicate.call(this);if(typeof pred!=="undefined"&&pred!==""){if((pred.indexOf(" ")<0)&&((pred.replace(/[\"\']/,"")===pred))){pred="'"+pred+"'";}_164b["predicate"]=pred;_164a.uri.setPathSegment(idx,_164b);}else{if(typeof console!=="undefined"){return false;}}}if(this.pathSegments&&this.pathSegments.length>0){var _164c=_164a.uri.pathSegments.length;for(var i=0;i<this.pathSegments.length;i++){_164a.uri.setPathSegment(_164c,this.evaluatePathSegment(this.pathSegments[i]));_164c++;}}return _164a;},fetch:function(_164d){if(_164d.queryOptions&&_164d.queryOptions.singleResourceRequest){return this.returnCollectionProperty(_164d,_164d.queryOptions.property);}return this.inherited(arguments);},verifyService:function(){if(!this.service){this.service=_1646.getSDataService("proxy",true);}this._hasValidService=true;if(typeof this.getAppId==="function"){var appid=this.getAppId();if(typeof appid!=="undefined"&&appid!==""){this.service.setDataSet(appid);}else{if(typeof console!=="undefined"){this._hasValidService=false;}}}},returnCollectionProperty:function(_164e,_164f){if(this._entity.hasOwnProperty(_164f)&&this._entity[_164f]!=null){var list=this._entity[_164f].$resources;if(typeof list!=="unknown"){if(_164e.onBegin){_164e.onBegin.call(_164e.scope||this,list.length,_164e);}if(_164e.onComplete){_164e.onComplete.call(_164e.scope||this,list,_164e);}}}if(_164e.onError){_164e.onError.call(_164e.scope||this,"Invalid data url",_164e);}},evaluatePathSegment:function(_1650){if(typeof _1650==="string"){return {"text":_1650};}if(typeof _1650.getPredicate==="function"){return {"text":_1650.text,"predicate":_1650.getPredicate()};}if(typeof _1650.getPredicate==="string"){return {"text":_1650.text,"predicate":_1650.getPredicate};}return _1650;},receiveSingleResource:function(data){onGetSingleResource(data);},_getRequest:function(){this.verifyService();if(this._request===null){var _1651=new Sage.SData.Client.SDataSingleResourceRequest(this.service);_1651.setResourceKind(this.resourceKind);if(typeof this.getResourcePredicate==="function"){var idx=_1651.uri.getPathSegment(Sage.SData.Client.SDataUri.ResourcePropertyIndex)||_1651.uri.pathSegments.length-1;var _1652=_1651.uri.getPathSegment(idx);var pred=this.getResourcePredicate.call(this);if(typeof pred!=="undefined"&&pred!==""){if((pred.indexOf(" ")<0)&&((pred.replace(/[\"\']/,"")===pred))){pred="'"+pred+"'";}_1652["predicate"]=pred;_1651.uri.setPathSegment(idx,_1652);}else{if(typeof console!=="undefined"){return false;}}}if(this.pathSegments&&this.pathSegments.length>0){var _1653=_1651.uri.pathSegments.length;for(var i=0;i<this.pathSegments.length;i++){_1651.uri.setPathSegment(_1653,this.evaluatePathSegment(this.pathSegments[i]));_1653++;}}_1651.setQueryArgs({"select":this.select.join(","),"include":this.include.join(",")});if(this.includeContent&&this.includeContent===true){_1651.setQueryArg({"_includeContent":true});}this._request=_1651;}return this._request;},getSingleResource:function(){var _1654=this._getRequest();_1654.read({success:dojo.hitch(this,this.onSuccessLoad),failure:dojo.hitch(this,this.onFailure)});},onSuccessLoad:function(data){if(data){if(typeof console!=="undefined"){}this._entity=data;this.onGetSingleResource(data);}else{if(typeof console!=="undefined"){}var empty={$resources:[]};this._entity=empty;this.onGetSingleResource(empty);}},onGetSingleResource:function(data){}});return _1648;});},"Sage/Utility":function(){define("Sage/Utility",["dojo/parser","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","Sage/Utility/ErrorHandler","dojox/validate/regexp","dojo/i18n!./Utility/nls/Utility","dojo/ready","dojo/string","dojo/_base/array"],function(_1655,_1656,_1657,_1658,_1659,_165a,ready,_165b,array){Sage.namespace("Utility");dojo.mixin(Sage.Utility,{_timeZones:null,nameToPathCache:{},nlsStrings:_165a,regexp:{invalidInput:"^((?!(<([!\\/?A-Za-z])|(&#))).)*$",invalidInputFmt:"^((?!(<([!\\/?A-Za-z])|(&#)|(${0}))).)*$",invalidInputMatch:"<[!\\/?A-Za-z]|&#"},joinInvalidInputRegExpWith:function(_165c){if(_165c&&dojo.isString(_165c)&&_165c.length>0){return _165b.substitute(this.regexp.invalidInputFmt,[_165c]);}return _165c;},getInvalidInputMatches:function(s){if(s&&dojo.isString(s)&&s.length>0){var _165d=s.match(this.regexp.invalidInputMatch,"g");if(_165d&&dojo.isArray(_165d)){return _165d;}}return [];},isSafeForPosting:function(s){if(s&&dojo.isString(s)){if(s.length===0){return true;}var match=s.match(this.regexp.invalidInputMatch);if(match===null){return true;}if(dojo.isArray(match)&&match.length===0){return true;}}if(!s&&s===null){return true;}return false;},makeSafeForPosting:function(s){var _165e=this.getInvalidInputMatches(s);if(_165e&&dojo.isArray(_165e)&&_165e.length>0){array.forEach(_165e,function(match){var _165f=match;if(match.length>=2){_165f=match.substr(0,1)+" "+match.substr(1);}if(_165f!==match){s=s.replace(match,_165f);}});}return s;},nameToPath:function(name){var parts,path,i,match;if(typeof name!=="string"){return [];}if(Sage.Utility.nameToPathCache[name]){return Sage.Utility.nameToPathCache[name];}parts=name.split(".");path=[];for(i=0;i<parts.length;i++){match=parts[i].match(/([a-zA-Z0-9_$]+)\[([^\]]+)\]/);if(match){path.push(match[1]);if(/^\d+$/.test(match[2])){path.push(parseInt(match[2],10));}else{path.push(match[2]);}}else{path.push(parts[i]);}}return (Sage.Utility.nameToPathCache[name]=path.reverse());},expand:function(scope,_1660){if(typeof _1660==="function"){return _1660.apply(scope,Array.prototype.slice.call(arguments,2));}else{return _1660;}},getValue:function(o,name,_1661){_1661=(typeof _1661!=="undefined"&&_1661!==null)?_1661:"";var path=Sage.Utility.nameToPath(name).slice(0);var _1662=o;while(_1662&&path.length>0){var key=path.pop();if(typeof _1662[key]!=="undefined"&&_1662[key]!==null){_1662=_1662[key];}else{return _1661;}}return _1662;},setValue:function(o,name,val){var _1663=o;var path=Sage.Utility.nameToPath(name).slice(0);while((typeof _1663!=="undefined")&&path.length>1){var key=path.pop();if(path.length>0){var next=path[path.length-1];_1663=_1663[key]=(typeof _1663[key]!=="undefined")?_1663[key]:(typeof next==="number")?[]:{};}}if(_1663!=null&&typeof path[0]!=="undefined"){_1663[path[0]]=val;}return o;},getPlainText:function(node){var _1664=function(a){if(!a){return "";}return a.replace(/ +/g," ").replace(/[\t]+/gm,"").replace(/[ ]+$/gm,"").replace(/^[ ]+/gm,"").replace(/\n+/g,"\n").replace(/\n+$/,"").replace(/^\n+/,"").replace(/\nNEWLINE\n/g,"\n\n").replace(/NEWLINE\n/g,"\n\n");};var _1665=function(node){var _1666=function(node){return !(/[^\t\n\r ]/.test(node.nodeValue));};var ws=[];var _1667=function(node){for(var i=0;i<node.childNodes.length;i++){var n=node.childNodes[i];if(n.nodeType==3&&_1666(n)){ws.push(n);}else{if(n.hasChildNodes()){_1667(n);}}}};_1667(node);for(var i=0;i<ws.length;i++){ws[i].parentNode.removeChild(ws[i]);}};var sty=function(n,prop){if(n.style[prop]){return n.style[prop];}var s=n.currentStyle||n.ownerDocument.defaultView.getComputedStyle(n,null);if(n.tagName=="SCRIPT"){return "none";}if(!s[prop]){return "LI,P,TR".indexOf(n.tagName)>-1?"block":n.style[prop];}if(s[prop]=="block"&&n.tagName=="TD"){return "feaux-inline";}return s[prop];};var _1668="table-row,block,list-item";var _1669=function(n){var s=sty(n,"display")||"feaux-inline";if(_1668.indexOf(s)>-1){return true;}return false;};var _166a=function(n){if(/pre/.test(sty(n,"whiteSpace"))){t+=n.innerHTML.replace(/\t/g," ").replace(/\n/g," ");return "";}var s=sty(n,"display");if(s=="none"){return "";}var gap=_1669(n)?"\n":" ";t+=gap;for(var i=0;i<n.childNodes.length;i++){var c=n.childNodes[i];if(c.nodeType==3){t+=c.nodeValue;}if(c.childNodes.length){_166a(c);}}t+=gap;return t;};node=node.cloneNode(true);node.innerHTML=node.innerHTML.replace(/<br>/g,"\n");var paras=node.getElementsByTagName("p");for(var i=0;i<paras.length;i++){paras[i].innerHTML+="NEWLINE";}var t="";_1665(node);return _1664(_166a(node));},debounce:function(func,wait,_166b){var _166c;return function(){var _166d=this,args=arguments;var later=function(){_166c=null;if(!_166b){func.apply(_166d,args);}};if(_166b&&!_166c){func.apply(_166d,args);}clearTimeout(_166c);_166c=setTimeout(later,wait);};},extend:function(){var _166e=arguments[0]||{},i=1,_166f=arguments.length,deep=false,_1670;if(_166e.constructor==Boolean){deep=_166e;_166e=arguments[1]||{};i=2;}if(typeof _166e!="object"&&typeof _166e!="function"){_166e={};}if(_166f==i){_166e=this;--i;}for(;i<_166f;i++){if((_1670=arguments[i])!=null){for(var name in _1670){var src=_166e[name],copy=_1670[name];if(_166e===copy){continue;}if(deep&&copy&&typeof copy=="object"&&!copy.nodeType){_166e[name]=Sage.Utility.extend(deep,src||(copy.length!=null?[]:{}),copy);}else{if(copy!==undefined){_166e[name]=copy;}}}}}return _166e;},getCurrentEntityId:function(){var _1671=Sage.Services.getService("ClientEntityContext");var _1672=_1671.getContext();return _1672.EntityId;},getClientContextByKey:function(key){var res="";if(Sage.Services){var _1673=Sage.Services.getService("ClientContextService");if((_1673)&&(_1673.containsKey(key))){res=_1673.getValue(key);}}return res;},getVirtualDirectoryName:function(){var reg=new RegExp(window.location.host+"/([A-Za-z0-9-_]+)/");var arr=reg.exec(window.location.href);if(arr){return arr[1];}return "";},getSDataService:function(_1674,_1675,_1676,_1677){return Sage.Data.SDataServiceRegistry.getSDataService(_1674,_1675,_1676,_1677);},appLoadHandler:function(_1678,args){Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(Sage.Utility.pageLoaded);Sys.WebForms.PageRequestManager.getInstance().add_pageLoading(Sage.Utility.pageLoading);Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(Sage.Utility.showRequestIndicator);Sys.WebForms.PageRequestManager.getInstance().add_endRequest(Sage.Utility.hideRequestIndicator);Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(AutoLogout.resetTimer);},pageLoaded:function(_1679,args){var _167a=args.get_panelsUpdated();if(typeof (_167a)==="undefined"){return;}for(var i=0;i<_167a.length;i++){dojo.parser.parse(_167a[i]);}},pageLoading:function(_167b,args){var _167c=args.get_panelsUpdating();if(typeof (_167c)==="undefined"){return;}for(var i=0;i<_167c.length;i++){var panel=_167c[i],_167d=dijit.findWidgets(panel);dojo.forEach(_167d,function(_167e){_167e.destroyRecursive(true);});}},destroyWidget:function(_167f){var _1680=dojo.attr(_167f,"widgetId");if(dijit.byId(_1680)){dijit.byId(_1680).destroyRecursive();}},showRequestIndicator:function(){var elem=document.getElementById("asyncpostbackindicator");if(elem){elem.style.visibility="visible";}},hideRequestIndicator:function(_1681,args){var elem=dojo.byId("asyncpostbackindicator");if(elem){elem.style.visibility="hidden";}_1658.handleEndRequestError(args);},isAllowedNavigationKey:function(_1682){return (_1682==8||_1682==9||_1682==46||_1682==37||_1682==39);},restrictDecimalDigit:function(value,_1683,_1684){var _1685=value;if(typeof _1683==="undefined"){_1683=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalDigits;}if(_1683.length>1){var range=_1683.split(",");_1683=parseInt(range[1]);}if(typeof _1684==="undefined"){_1684=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator;}var _1686=value.indexOf(_1684)+1+_1683;if(_1683===0){_1686=_1686-1;}if(value.indexOf(")")>0){_1686+=1;}if(value.lastIndexOf(_1684)>-1){_1685=value.substr(0,_1686);}return _1685;},maximizeDecimalDigit:function(value,_1687,_1688){var diff;var _1689=value;if(typeof _1687==="undefined"){_1687=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalDigits;}if(typeof _1688==="undefined"){_1688=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator;}if(_1687>0&&value.lastIndexOf(_1688)==-1&&value.length>0){_1689=[value,_1688].join("");}var _168a=_1689.lastIndexOf(_1688)+1+_1687;if(_1689.lastIndexOf(_1688)>-1){diff=_168a-_1689.length;if(diff>0){for(var i=0;i<diff;i++){_1689+=0;}}}return _1689;},restrictToNumber:function(e,type){var _168b=Sys.CultureInfo.CurrentCulture.numberFormat;var code=e.charCode||e.keyCode;var _168c=e.keyChar;if(e.keyCode&&Sage.Utility.isAllowedNavigationKey(e.keyCode)){return true;}if((code>=48&&code<=57&&!e.shiftKey)||(code>=96&&code<=105&&!e.shiftKey)){return true;}if(_168c===_168b.NegativeSign||code==109||code==110){return true;}switch(type){case "currency":if(_168c==_168b.CurrencyGroupSeparator||_168c==_168b.CurrencyDecimalSeparator){return true;}break;case "percent":if(_168c==_168b.PercentGroupSeparator||_168c==_168b.PercentDecimalSeparator){return true;}break;default:if(_168c==_168b.NumberGroupSeparator||_168c==_168b.NumberDecimalSeparator){return true;}break;}return false;},restrictToNumberOnKeyPress:function(e,type){if(e.keyCode&&Sage.Utility.isAllowedNavigationKey(e.keyCode)){return true;}var _168d=Sys.CultureInfo.CurrentCulture.numberFormat;var code=e.charCode||e.keyCode;var _168e=String.fromCharCode(code);var _168f="0123456789"+_168d.NegativeSign;switch(type){case "currency":_168f+=_168d.CurrencyGroupSeparator+_168d.CurrencyDecimalSeparator;break;case "percent":_168f+=_168d.PercentGroupSeparator+_168d.PercentDecimalSeparator;break;default:_168f+=_168d.NumberGroupSeparator+_168d.NumberDecimalSeparator;break;}return (_168f.indexOf(_168e)>=0);},Convert:function(){var _1690=/^(true|T)$/i,_1691=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(Z|(-|\+)(\d{2}):(\d{2}))/,_1692=/^(\d{4})-(\d{2})-(\d{2})$/,_1693=/\/Date\((-?\d+)(?:(-|\+)(\d{2})(\d{2}))?\)\//,pad=function(n){return n<10?"0"+n:n;},unpad=function(str){return (str[0]==="0")?str.substring(1):str;};return {toBoolean:function(value){return _1690.test(value);},isDateString:function(value){if(typeof value!=="string"){return false;}return _1691.test(value)||_1692.test(value)||_1693.test(value);},dateToTimeless:function(d){var _1694=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,5);return _1694;},toIsoStringFromDate:function(value){if((value.getHours()===0)&&(value.getMinutes()===0)&&(value.getSeconds()===5)){return value.getFullYear()+"-"+pad(value.getMonth()+1)+"-"+pad(value.getDate())+"T00:00:05Z";}return value.getUTCFullYear()+"-"+pad(value.getUTCMonth()+1)+"-"+pad(value.getUTCDate())+"T"+pad(value.getUTCHours())+":"+pad(value.getUTCMinutes())+":"+pad(value.getUTCSeconds())+"Z";},toIsoStringFromDateNonUTC:function(value){return value.getFullYear()+"-"+pad(value.getMonth()+1)+"-"+pad(value.getDate())+"T"+pad(value.getHours())+":"+pad(value.getMinutes())+":"+pad(value.getSeconds())+"Z";},toJsonStringFromDate:function(value){return "/Date("+value.getTime()+")/";},toDateFromString:function(value,_1695){if(typeof value!=="string"){return value;}var match,utc,h,m,_1696;if((match=_1693.exec(value))){utc=new Date(parseInt(match[1]));if(_1695===true){if(match[2]){h=parseInt(match[3]);m=parseInt(match[4]);_1696=(h*60)+m;if(match[2]==="-"){_1696=-1*_1696;}utc.setMinutes(utc.getMinutes()+_1696);}}value=utc;}else{if((match=_1691.exec(value))){utc=new Date(Date.UTC(parseInt(match[1]),parseInt(unpad(match[2]))-1,parseInt(unpad(match[3])),parseInt(unpad(match[4])),parseInt(unpad(match[5])),parseInt(unpad(match[6]))));if(match[8]!=="Z"){h=parseInt(match[10],10);m=parseInt(match[11],10);if(match[9]==="-"){utc.addMinutes((h*60)+m);}else{utc.addMinutes(-1*((h*60)+m));}}value=utc;}else{if((match=_1692.exec(value))){value=new Date();value.setYear(parseInt(match[1]));value.setMonth(parseInt(match[2],10)-1);value.setDate(parseInt(match[3],10));value.setHours(0,0,0,0);}}}return value;},toArrayFromObject:function(_1697){if(_1697&&typeof _1697.length=="undefined"){var array=[];array.push(_1697);return array;}return _1697;}};}(),getModeId:function(){var _1698=Sage.Services.getService("ClientContextService");if((_1698)&&(_1698.containsKey("modeid"))){var mode=_1698.getValue("modeid");return mode.toLowerCase();}var u=document.location.href;var idx=u.indexOf("?");if(idx>0){var qry=u.substring(idx+1);var parts=qry.split("&");for(var i=0;i<parts.length;i++){pair=parts[i].split("=");if(pair.length>1){if(pair[0].toLowerCase()==="modeid"){return pair[1];}}}}return "None";},getPageName:function(){var url=document.location.href;var _1699=url.substring(url.lastIndexOf("/")+1);return _1699;},openHelp:function(topic,_169a){var url=Sage.Link.getHelpUrl(topic,_169a);var _169b=Sage.Link.getHelpUrlTarget();window.open(url,_169b);},fragger:function(frag,doc){if(typeof frag!=="string"){return;}doc=doc||dojo.doc;var outer=doc.createElement("div");var inner=dojo._toDom(frag,doc);outer.appendChild(inner);return outer;},fragToDijits:function(frag,ns){var _169c=dojo.parser.parse(frag,{noStart:ns||true});return _169c;},strToDijits:function(tpl,ns){if(typeof tpl!=="string"){return;}var frag=this.toMasterFrag(tpl);return this.fragToDijits(frag,ns);},fragWalker:function walk(node,fn){fn(node);node=node.firstChild;while(node){walk(node,fn);node=node.nextSibling;}},extract:function(obj,what){var count=(what===2),out=(count)?0:[],i;for(i in obj){if(count){out++;}else{if(has(obj,i)){out.push((what)?obj[i]:i);}}}return out;},keys:function(obj){return Sage.Utility.extract(obj);},size:function(obj){return Sage.Utility.extract(obj,2);},loadDetailsDialog:function(obj){Sage.ClientLinkHandler.request({request:"ShowDialog",type:obj.entityType,smartPart:obj.smartPart,entityId:obj.entityId,dialogTitle:obj.dialogTitle,isCentered:obj.isCentered,dialogTop:obj.dialogTop,dialogLeft:obj.dialogLeft,dialogHeight:obj.dialogHeight,dialogWidth:obj.dialogWidth});},values:function(obj){return Sage.Utility.extract(obj,1);},mixOwn:function(_169d,_169e){for(var p in _169e){if(_169e.hasOwnProperty(p)){_169d[p]=_169e[p];}}return _169d;},getPrecision:function(str){var match=str.match(/\.(\d+)/);if(match){var _169f=parseInt(match[1],10);}return _169f?_169f:0;},htmlEncode:function(str){if(typeof str!="string"){return str;}if(!str){return "";}return str.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");},htmlDecode:function(str){if(typeof str!="string"){return str;}return str.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,"\"").replace(/&#39;/g,"'");},getSelectionInfo:function(){var panel=dijit.byId("list");if(panel){return panel.getSelectionInfo();}return false;},Timezone_populatelist:function(_16a0,_16a1){var sel,_16a2;if(_16a0==="TimezoneList"){sel=dijit.byId(_16a0);_16a2=dojo.byId(_16a0+"_Selected");}else{sel=$("#"+_16a0+" #TimezoneList")[0];sel=dijit.getEnclosingWidget(sel);_16a2=$("#"+_16a0).find("input").filter("[@type=hidden]")[0];}if(sel&&typeof sel!=="undefined"&&sel.options.length==1){sel.options.length=0;var self=this;function _16a3(){var _16a4=[];var _16a5=null;dojo.forEach(self._timeZones,function(tz){var _16a6={label:tz.Displayname,value:tz.Keyname,selected:false};_16a4.push(_16a6);if(tz.Keyname==_16a2.value){_16a5=tz.Keyname;_16a6.selected=true;}});sel.addOption(_16a4);if(_16a5!==null){sel.set("value",_16a5);}dojo.connect(sel,"onBlur",function(){_16a2.value=sel.get("value");});dojo.connect(sel,"onChange",function(){if(_16a1){_16a2.value=sel.get("value");__doPostBack(sel.id,"");}});};if(this._timeZones!==null){_16a3();}else{dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:function(list){self._timeZones=list;_16a3();},error:function(error,_16a7){self.ErrorHandler.handleHttpError(error,_16a7);return error;}});}}return true;},truncate:function(val,num){var i=0,len=val.length,res=[];if(typeof num==="string"){num=parseInt(num,10);}if(typeof val==="string"){return val.length>num?val.slice(0,num)+"...":val;}if(val.map&&typeof val.map==="function"){return val.map(function(v,i,c){return v.length>num?v.slice(0,num)+"...":v;});}else{for(i;i<len;i++){res.push(val[i].slice(0,num)+"...");}return res;}},Dashboard:{counter:1,generateString:function(str){return str+Sage.Utility.Dashboard.counter++;},getColors:function(num){if(!num){return;}var _16a8=["blue 6","green 3","pink 5","orange 2","blue 4","green 6","pink 2","orange 7","blue 3","green 8","pink 4","orange 3","blue 7","green 5","pink 8","orange 6","blue 2","green 7","pink 3","orange 8","blue 5","green 2","pink 6","orange 5","blue 8","green 4","pink 7","orange 4"],_16a9=["green 5","blue 3","green 7","blue 6","green 3","blue 7"],ret=[],i,j;if(num<=6){for(i=0;i<num;i++){ret[i]=Sage.Utility.Dashboard.colorPalette[_16a9[i]];}}else{for(j=0;j<num;j++){ret[j]=Sage.Utility.Dashboard.colorPalette[_16a8[j]];}}return ret;},getColor:function(idx){var _16aa=["blue 6","green 3","pink 5","orange 2","blue 4","green 6","pink 2","orange 7","blue 3","green 8","pink 4","orange 3","blue 7","green 5","pink 8","orange 6","blue 2","green 7","pink 3","orange 8","blue 5","green 2","pink 6","orange 5","blue 8","green 4","pink 7","orange 4"];return Sage.Utility.Dashboard.colorPalette[_16aa[idx]];},colorPalette:{"blue 0":"dfe8f6","blue 6":"00a1de","green 3":"c1d59f","pink 5":"a44e81","orange 2":"f8d6aa","blue 4":"55c0e9","green 6":"69923a","pink 2":"e2afcd","orange 7":"af6200","blue 3":"80d0ef","green 8":"35491d","pink 4":"c55e9b","orange 3":"f4c180","blue 7":"0079a7","green 5":"86a85c","pink 8":"421f34","orange 6":"e98300","blue 2":"aae0f4","green 7":"4f6e2c","pink 3":"d486b4","orange 8":"754200","blue 5":"2bb1e4","green 2":"d6e3bf","pink 6":"833f67","orange 5":"ed982b","blue 8":"00516f","green 4":"a4bf7d","pink 7":"632f4e","orange 4":"f0ac55"}},isBoolean:function(value){return typeof value==="boolean";},isDefined:function(value){return typeof value!=="undefined";},isEmptyString:function(value){return (dojo.isString(value)&&value=="");},isStringWithLength:function(value){return (dojo.isString(value)&&value!="");},isTrue:function(value){return (this.isBoolean(value))?(value==true):false;}});ready(function(){Sage.Utility.appLoadHandler();});return Sage.Utility;});},"Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin":function(){define("Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin",["dojo/_base/declare"],function(_16ab){return _16ab("Sage.UI.SLXPreviewGrid.Filter._previewGridFilterMixin",null,{getQuery:function(){var v=this.get("value");if(v){return "upper("+this.field+") like '%"+v.replace("'","''").toUpperCase()+"%'";}return "";},reset:function(){this.set("value","");},getState:function(){return {"value":this.get("value")};},applyState:function(state){if(state){this.set("value",state["value"]||"");}}});});},"Sage/QuickForms/Design/CheckBoxControlDesigner":function(){define("Sage/QuickForms/Design/CheckBoxControlDesigner",["dojo/dom-class","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/CheckBoxBasicPropertyEditor","./Editors/CheckBoxAdvancedPropertyEditor","dojo/i18n!./nls/CheckBoxControlDesigner"],function(_16ac,_16ad,array,lang,_16ae,_16af,_16b0,_16b1,_16b2,_16b3,_16b4,_16b5){return _16ad("Sage.QuickForms.Design.CheckBoxControlDesigner",[_16af,_16b0,_16ae,_16b1],{designSupport:{visible:true},editors:[_16b3,_16b4,_16b2],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"design-checkbox\" data-dojo-attach-point=\"containerNode\">","<span class=\"{%= $.fieldClass %}-icon\" data-dojo-attach-point=\"designCheckedNode\"></span>","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\" data-dojo-attach-point=\"designBindingNode\"></div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-checkbox",helpTopicName:"Checkbox_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFCheckBox, Sage.Platform.QuickForms.QFControls",displayNameText:"CheckBox",constructor:function(){lang.mixin(this,_16b5);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_16b6){return (_16b6["ControlItemName"]=="Checked");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getCheckedAttr:function(){return lang.getObject("Checked",false,this.entry);},_setCheckedAttr:function(value){lang.setObject("Checked",value,this.entry);if(value){_16ac.add(this.designCheckedNode,"design-checkbox-icon-checked");}else{_16ac.remove(this.designCheckedNode,"design-checkbox-icon-checked");}},setupFor:function(_16b7){this.inherited(arguments);this.set("checked",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Checked",DataItemName:_16b7.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_16b7.propertyPath||"");},startup:function(){this.inherited(arguments);var _16b8=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_16b8&&_16b8["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/Data/SDataServiceRegistry":function(){define("Sage/Data/SDataServiceRegistry",["Sage/Utility","dojo/json"],function(_16b9,json){var _16ba={},_16bb=false;Sage.namespace("Data.SDataServiceRegistry");Sage.Data.SDataServiceRegistry={registerService:function(name,s,o){o=o||{};var _16bc=s instanceof Sage.SData.Client.SDataService?s:new Sage.SData.Client.SDataService(s);_16ba[name]=_16bc;if(o.isDefault||!_16bb){_16bb=_16bc;}return _16bc;},hasService:function(name){return (typeof _16ba[name]!=="undefined");},getService:function(name){if(typeof name==="string"&&_16ba[name]){return _16ba[name];}return _16bb;},_createCacheKey:function(_16bd){var key=_16bd.build();key=key.replace(/[^a-zA-Z0-9_]/g,"");var ns=_16bd.getResourceKind().text;key=ns+"_"+key;return key;},_loadSDataRequest:function(_16be,o){var key=this._createCacheKey(_16be);var feed=this._getFromLocalStorage(key);if(feed){o.result=feed;}},_cacheSDataRequest:function(_16bf,o,feed){if(/get/i.test(o.method)&&typeof feed==="object"){var key=this._createCacheKey(_16bf);this._saveToLocalStorage(key,feed);}},_saveToLocalStorage:function(key,value){sessionStorage.setItem(key,json.stringify(value));},_getFromLocalStorage:function(key){return json.parse(sessionStorage.getItem(key));},_removeFromLocalStorage:function(_16c0){var _16c1=sessionStorage.length;var keys=[];for(var i=0;i<_16c1;i++){var key=sessionStorage.key(i);if(key.indexOf(_16c0)>-1){keys.push(key);}}for(var j=0;j<keys.length;j++){sessionStorage.removeItem(keys[j]);}},getSDataService:function(_16c2,_16c3,_16c4,_16c5){_16c3=_16c2==="proxy"?true:_16c3;_16c2=_16c2||"dynamic";var _16c6="SDataService_"+_16c2;_16c6=_16c5?[_16c6,"_cacheResult"].join(""):_16c6;if(this.hasService(_16c6)&&!_16c3){return this.getService(_16c6);}var bJson=true;if(typeof _16c4==="boolean"){bJson=_16c4;}var svc=new Sage.SData.Client.SDataService({serverName:window.location.hostname,virtualDirectory:Sage.Utility.getVirtualDirectoryName()+"/slxdata.ashx",applicationName:"slx",contractName:_16c2,port:window.location.port&&window.location.port!==80?window.location.port:false,protocol:/https/i.test(window.location.protocol)?"https":false,json:bJson});if(_16c5){svc.on("beforerequest",this._loadSDataRequest,this);svc.on("requestcomplete",this._cacheSDataRequest,this);}if(!_16c3){this.registerService(_16c6,svc);}return svc;}};return Sage.Data.SDataServiceRegistry;});},"url:Sage/MainView/ActivityMgr/templates/ActivityEditor.html":"[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"activityDialog\" title=\"\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onDlgHide\">',\r\n        '<div class=\"activity-dialog\">',  //body\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"regardingContainer\">',\r\n                '<select id=\"pk_Regarding\" label=\"{%= $.regardingText %}\" id=\"{%= $.id %}_pk_Regarding\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Regarding\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\" ></select>',\r\n                '<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.locationText %}\" id=\"{%= $.id %}_tb_Location\" dojoAttachPoint=\"tb_Location\" maxLength=\"255\" ></div>',\r\n            '</div>', //first tablecontainer 1 col\r\n        //Dates section for add/edit mode..................\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"dateSection_AddEdit\">',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtp_startDate\" dojoAttachPoint=\"dtp_startDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.startTimeText %}\"></div>',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DurationSelect\" label=\"{%= $.durationText %}\" id=\"{%= $.id %}_sel_Duration\" dojoAttachPoint=\"sel_Duration\" includeDisablingCheckbox=\"false\" valuesAreAfterStart=\"true\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"{%= $.timeLessText %}\" id=\"{%= $.id %}_cb_Timeless\" dojoAttachPoint=\"cb_Timeless\" ></div>',\r\n                    '<label class=\"checkbox-label\" for=\"{%= $.id %}_cb_Timeless\">{%= $.timeLessText %}</label>',\r\n                '</div>',\r\n                '<div dojoType=\"dojox.layout.TableContainer\" label=\"{%= $.alarmText %}\" cols=\"2\" showLabels=\"false\" class=\"removeExtraSpace\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" id=\"{%= $.id %}_cb_Alarm\" dojoAttachPoint=\"cb_Alarm\" ></div>',\r\n                    '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DurationSelect\" id=\"{%= $.id %}_sel_AlarmDur\" dojoAttachPoint=\"sel_AlarmDur\" valuesAreAfterStart=\"false\" ></div>',\r\n                '</div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"{%= $.id %}_cb_AutoRollover\" dojoAttachPoint=\"cb_AutoRollover\"></div>',\r\n                    '<label class=\"checkbox-label\" for=\"{%= $.id %}_cb_AutoRollover\">{%= $.rolloverText %}</label>',\r\n                '</div>',\r\n            '</div>',\r\n        //Dates section for complete mode...................\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"dateSection_Complete\">',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtp_completedDate\" dojoAttachPoint=\"dtp_completedDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.completedText %}\"></div>',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtp_scheduledDate\" dojoAttachPoint=\"dtp_scheduledDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.scheduledText %}\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"{%= $.timeLessText %}\" id=\"{%= $.id %}_cb_TimelessComplete\" dojoAttachPoint=\"cb_TimelessComplete\" ></div>',\r\n                    '<label class=\"checkbox-label\" for=\"{%= $.id %}_cb_TimelessComplete\">{%= $.timeLessText %}</label>',\r\n                '</div>',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DurationSelect\" label=\"{%= $.durationText %}\" id=\"{%= $.id %}_sel_DurationComplete\" dojoAttachPoint=\"sel_DurationComplete\" includeDisablingCheckbox=\"false\" valuesAreAfterStart=\"true\"></div>',\r\n            '</div>',\r\n\r\n            '<div dojoType=\"dijit.layout.TabContainer\" id=\"{%= $.id %}_tc_EditActivity\"  dojoAttachPoint=\"tc_EditActivity\" class=\"tab-container\">',\r\n/*  General Tab   */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_General\" title=\"{%= $.tabNameGeneralText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_General\">',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"resultContainer\" class=\"bottom-border-section\">', \r\n                        '<select shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" label=\"{%= $.resultText %}\" id=\"{%= $.id %}_pl_Result\"  name=\"pl_Result\" dojoAttachPoint=\"pl_Result\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\"></select>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"4\" labelWidth=\"4\" baseClass=\"contact-lead-radios\" >',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.contactText %}\" value=\"contact\" id=\"{%= $.id %}_rdo_Contact\" dojoAttachPoint=\"rdo_Contact\" dojoAttachEvent=\"onChange:_setContactLeadVisibility\" checked=\"true\" />',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.leadText %}\" value=\"lead\" id=\"{%= $.id %}_rdo_Lead\" dojoAttachPoint=\"rdo_Lead\" />',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"contactContainer\" baseClass=\"bottom-border-section\">',\r\n\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_ContactLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.opportunityText %}\" dojoAttachPoint=\"container_OppLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.accountText %}\" dojoAttachPoint=\"container_AccountLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.ticketText %}\" dojoAttachPoint=\"container_TicketLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"leadContainer\"  baseClass=\"bottom-border-section\" class=\"display-none\">',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_LeadLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_tb_LeadCompanyName\" label=\"{%= $.companyText %}\" dojoAttachPoint=\"tb_LeadCompanyName\" readonly=\"true\" />',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" class=\"bottom-border-section\" >',\r\n                        '<select label=\"{%= $.priorityText %}\" id=\"{%= $.id %}_pk_Priority\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Priority\" canEditText=\"true\" itemMustExist=\"false\" pickListName=\"Priorities\" sort=\"false\" maxLength=\"64\" style=\"width: {%= 472 - $.labelWidth %}px;\"></select>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.leaderText %}\" dojoAttachPoint=\"container_LeaderLup\" class=\"remove-padding lookup-container\" style=\"width: {%= 472 - $.labelWidth %}px;\"></div>',\r\n                        '<select label=\"{%= $.categoryText %}\" id=\"{%= $.id %}_pk_Category\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Category\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\" style=\"width: {%= 472 - $.labelWidth %}px;\"></select>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"&nbsp;\" class=\"dijitTextBox\" style=\"border-width:0px\">&nbsp;</div>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" class=\"valigntop\" dojoAttachPoint=\"notesContainer\">',\r\n                        '<textarea dojoType=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_ta_Notes\" label=\"{%= $.notesText %}\" dojoAttachPoint=\"ta_Notes\" class=\"notes-text\"></textarea>',\r\n                    '</div>',\r\n                '</div>',  // end general tab\r\n/* Availability Tab   */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Availability\" title=\"{%= $.tabNameAvailabilityText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_Availability\" dojoAttachEvent=\"onShow:_onShowAvailabilityTab\">',\r\n                    '<div dojoType=\"dijit.Toolbar\" region=\"top\" splitter=\"false\" class=\"right-tools\" >',  // list-panel-tbar                                  \r\n                        '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"container_ResourcesLup\" class=\"remove-padding\"></div>',\r\n                    '</div>',\r\n/* Scheduler ........... */\r\n                    '<div id=\"scheduler_here\" class=\"dhx_cal_container\" style=\"width:100%;height:230px;\">',\r\n                        '<div class=\"dhx_cal_navline\">',\r\n                            '<div class=\"dhx_cal_prev_timeline_button\" style=\"right:50px;\">&nbsp;</div>',\r\n\t\t\t                '<div class=\"dhx_cal_next_timeline_button\" style=\"right:19px;\">&nbsp;</div>',\r\n//'<div class=\"dhx_cal_today_button\"></div>',\r\n\t\t\t                '<div class=\"dhx_cal_date\"></div>',\r\n//'<div class=\"dhx_cal_tab\" name=\"day_tab\" style=\"right:204px;\"></div>',\r\n//'<div class=\"dhx_cal_tab\" name=\"week_tab\" style=\"right:140px;\"></div>',\r\n                            '<div class=\"dhx_cal_tab\" name=\"timeline_tab\" style=\"right:280px;\"></div>',\r\n//'<div class=\"dhx_cal_tab\" name=\"month_tab\" style=\"right:76px;\"></div>',\r\n\t\t                '</div>',\r\n\t\t                '<div class=\"dhx_cal_header\"></div>',\r\n\t\t                '<div class=\"dhx_cal_data\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n/* Recurring Tab  */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Recurring\" title=\"{%= $.recurringText %}\" class=\"tabContent\" dojoAttachPoint=\"cp_Recurring\" dojoAttachEvent=\"onShow:_showRecurringTab\">',\r\n                    '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.MainView.ActivityMgr.RecurringEditor\" id=\"{%= $.id %}_recEd\" labelWidth=\"{%= $.labelWidth - 20 %}\" dojoAttachPoint=\"_recurringEditor\"></div>',\r\n                '</div>',\r\n/* Attachments Tab  */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Attachments\" title=\"{%= $.tabNameAttachmentsText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_Attachments\" dojoAttachEvent=\"onShow:_showAttachmentsTab\">',\r\n                    '<div id=\"{%= $.id %}_attachmentsGridPlaceholder\" dojoAttachPoint=\"_attachmentGridPlaceholder\" style=\"width:100%;height:100%\"></div>',\r\n                '</div>',\r\n            '</div>',  //tab container\r\n/* Buttons       */\r\n        // Add/edit activity buttons\r\n            '<table class=\"button-bar\" id=\"add_edit_buttons\" dojoAttachPoint=\"add_edit_buttons\">',\r\n                '<tr>',\r\n                    '<td class=\"alignleft\">',\r\n                        '<div class=\"scheduled-by-label\" dojoAttachPoint=\"lbl_ScheduledBy\"></div>',\r\n                    '</td><td class=\"alignright\">',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Complete\" name=\"btn_Complete\" dojoAttachPoint=\"btn_Complete\" dojoAttachEvent=\"onClick:_completeClick\">{%= $.completeBtnText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Delete\" name=\"btn_Delete\" dojoAttachPoint=\"btn_Delete\" dojoAttachEvent=\"onClick:_deleteClick\">{%= $.deleteText %}</div>',\r\n                        '<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n\r\n\r\n        //complete activity buttons\r\n            '<table class=\"button-bar display-none\" id=\"complete_buttons\" dojoAttachPoint=\"complete_buttons\">',\r\n                '<tr>',\r\n                    '<col width=\"50%\" /><col width=\"50%\" />',\r\n                    '<td class=\"alignleft\">',\r\n                        '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" >',\r\n                            '<select label=\"{%= $.followupText %}\" id=\"sel_Followup\" dojoType=\"dijit.form.ComboBox\" dojoAttachPoint=\"sel_Followup\">',\r\n                                '<option value=\"none\" selected=\"selected\">{%= $.noneText %}</option>',\r\n                                '<option value=\"phone\">{%= Sage.Utility.Activity.getActivityTypeName(\"atPhoneCall\") %}</option>',\r\n                                '<option value=\"meeting\">{%= Sage.Utility.Activity.getActivityTypeName(\"atAppointment\") %}</option>',\r\n                                '<option value=\"todo\">{%= Sage.Utility.Activity.getActivityTypeName(\"atToDo\") %}</option>',\r\n                            '</select>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"ck_coAttachments\" dojoAttachPoint=\"ck_coAttachments\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coAttachments\">{%= $.carryOverAttachmentsText %}</label>',\r\n                            '</div>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"ck_coNotes\" dojoAttachPoint=\"ck_coNotes\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coNotes\">{%= $.carryOverNotesText %}</label>',\r\n                            '</div>',\r\n                        '</div>',\r\n                    '</td><td class=\"alignright valignbottom\" rowspan=\"2\">',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_asScheduled\" name=\"btn_asScheduled\" dojoAttachPoint=\"btn_asScheduled\" dojoAttachEvent=\"onClick:_asScheduledClick\">{%= $.asScheduledText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Now\" name=\"btn_Now\" dojoAttachPoint=\"btn_Now\" dojoAttachEvent=\"onClick:_nowClick\">{%= $.nowText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_CancelComplete\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_CancelComplete\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n                    '</td>',\r\n                '</tr><tr>',\r\n                    '<td class=\"alignleft\" >',\r\n                        '<div class=\"scheduled-by-label\" dojoAttachPoint=\"lbl_ScheduledByComp\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n\r\n\r\n\r\n        //Confirmations button bar...\r\n            '<table class=\"button-bar display-none\" id=\"confirmation_edit_buttons\" dojoAttachPoint=\"confirmation_edit_buttons\">',\r\n                '<tr>',\r\n                    '<td class=\"alignleft\" style=\"width:{%= $.labelWidth %}px;\">',\r\n                        '<label for=\"{%= $.id %}_ta_confirmationResponse\" id=\"responseLabel\" dojoAttachPoint=\"responseLabel\">{%= $.responseText %}</label>',\r\n                    '</td>',\r\n                    '<td class=\"alignleft\">',\r\n                        '<textarea dojoType=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_ta_confirmationResponse\" dojoAttachPoint=\"ta_confirmationResponse\" class=\"notes-text dijitTextBox\" maxLength=\"128\" ></textarea>',\r\n                    '</td><td class=\"alignright valignbottom\">',\r\n                        '<span id=\"newConfButtons\" dojoAttachPoint=\"newConfButtons\">',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_accept\" name=\"btn_accept\" dojoAttachPoint=\"btn_accept\" dojoAttachEvent=\"onClick:_acceptConfClick\">{%= $.acceptText %}</div>',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_decline\" name=\"btn_decline\" dojoAttachPoint=\"btn_decline\" dojoAttachEvent=\"onClick:_declineClick\">{%= $.declineText %}</div>',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_cancelConf\" name=\"btn_cancelConf\" dojoAttachPoint=\"btn_cancelConf\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n                        '</span>',\r\n                        '<span id=\"otherConfButtons\" dojoAttachPoint=\"otherConfButtons\" class=\"display-none\">',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_deleteConf\" name=\"btn_deleteConf\" dojoAttachPoint=\"btn_deleteConf\" dojoAttachEvent=\"onClick:_deleteConfClick\">{%= $.deleteConfText %}</div>',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_closeConf\" name=\"btn_closeConf\" dojoAttachPoint=\"btn_closeConf\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.closeText %}</div>',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n        '</div>', //body\r\n    '</div>',  //dialog\r\n'</div>' //root node\r\n]\r\n","Sage/QuickForms/Design/Editors/nls/UserAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/UserAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_16c7,lang){var nls={root:{titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",lookupBindingModeText:"Lookup Binding Mode:",lookupBindingModeTooltipText:"Indicates whether you want to bind to an entity object or to a string value.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},bindingModeText:{Object:"Object",String:"String"}}};return lang.mixin(_16c7,nls);});},"url:Sage/UI/Controls/templates/Name.html":"<div class=\"person\" slxcompositecontrol=\"true\" id=\"{%= $.id %}\" ><input id=\"{%= $.id %}-TextBox\" value=\"{%= $.nameDesc %}\"\r\n    data-dojo-type=\"Sage.UI.Controls.TextBox\" name=\"{%= $.name %}\" required=\"{%= $.required %}\" dojoAttachPoint=\"focusNode\"  data-dojo-attach-event=\"onChange:textBoxOnChange, onDblClick: showDialog\" data-dojo-props=\"textWithIcons: {%= $.buttonVisible %}\" />\r\n    {% if ($.buttonVisible) { %}\r\n    <img alt=\"{%= $.buttonToolTip %}\"  data-dojo-attach-event=\"ondijitclick: showDialog\"  tabindex=\"{%= $.tabIndex %}\"     \r\n    style=\"padding-left:0;cursor: pointer; vertical-align: left;\" \r\n    src=\"{%= $.buttonImageUrl %}\" title=\"{%= $.buttonToolTip %}\" id=\"{%= $.id %}-Button\" />\r\n    {% } %}\r\n<!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n-->\r\n</div>","Sage/UI/nls/SpeedSearch":function(){define("Sage/UI/nls/SpeedSearch",["Sage/LanguageList","dojo/_base/lang"],function(_16c8,lang){var nls={root:{standardText:"standard",advancedText:"advanced",speedSearchText:"SpeedSearch"}};return lang.mixin(_16c8,nls);});},"url:Sage/UI/Filters/templates/EditFilters.html":"<div>\r\n    <div class=\"filter-dialog\" data-dojo-type=\"dijit.Dialog\" data-dojo-props=\"title:'${dialogTitle}'\" data-dojo-attach-point=\"dialogNode\">\r\n        <div class=\"filter-clear-all\">\r\n            <input data-dojo-attach-point=\"checkAll\" data-dojo-type=\"dijit.form.CheckBox\" />\r\n            <label>${selectAllText}</label>\r\n        </div>\r\n        <div class=\"filter-dialog-content\" data-dojo-attach-point=\"contentNode\">\r\n            \r\n        </div>\r\n        \r\n        <div class=\"button-bar alignright\">\r\n            <button data-dojo-attach-point=\"buttonOK\" data-dojo-attach-event=\"onClick:_onOKClick\" data-dojo-type=\"dijit.form.Button\">${okText}</button>\r\n            <button data-dojo-attach-point=\"buttonCancel\" data-dojo-attach-event=\"onClick:_onCancelClick\" data-dojo-type=\"dijit.form.Button\">${cancelText}</button>\r\n        </div>\r\n    </div>\r\n</div>","Sage/Services/ActivityAction":function(){define("Sage/Services/ActivityAction",["dojo/i18n","Sage/UI/Dialogs","dijit/_Widget","dojo/_base/declare"],function(i18n,_16c9,_16ca,_16cb){var _16cc=_16cb("Sage.Services.ActivityAction",[_16ca],{_service:false,_contract:"activities",_resourceKind:"service",_operationName:false,_payLoad:false,_selectionContext:false,_publishMap:false,_publishMapWithId:false,_activityId:false,_configuration:false,_args:{},message:"Are you sure you want to continue?",description:"",constructor:function(){},execute:function(_16cd){var map=this._publishMap;var _16ce=this._publishMapWithId;var _16cf=this._activityId;var _16d0=String.format("slxdata.ashx/slx/crm/-/{0}/{1}/{2}",this._contract,this._resourceKind,this._operationName);$.ajax({type:"POST",url:_16d0,contentType:"application/json",data:dojo.toJson(this._args),processData:false,success:function(_16d1){if(map){dojo.publish(map,[_16d1,this]);}if(_16ce){if(_16cf){dojo.publish(_16ce,[_16cf,this]);}}if(_16cd){_16cd.success(_16d1,_16cd.scope);}},failure:function(_16d2){if(_16cd){_16cd.failure(result,_16cd.scope);}}});},_setConfigurationAttr:function(_16d3){this._configuration=_16d3;},_getConfigurationAttr:function(){return this._configuration;},_setServiceAttr:function(_16d4){this._service=_16d4;},_getServiceAttr:function(){return this._service;},_setSelectionInfoAttr:function(_16d5){this._selectionInfo=_16d5;},_getSelectionInfoAttr:function(){return this._selectionInfo;},_setOperationNameAttr:function(_16d6){this._operationName=_16d6;},_getOperationNameAttr:function(){return this._operationName;},_setResourceKindAttr:function(_16d7){this._resourceKind=_16d7;},_getResourceKindAttr:function(){return this._resourceKind;},_setArgsAttr:function(args){this._args=args;},_getArgsAttr:function(){return this._args;},_setActionDescriptionAttr:function(_16d8){this.description=_16d8;},_getActionDescriptionAttr:function(){return this.description;},_setActionMessageAttr:function(_16d9){this.message=_16d9;},_getActionMessageAttr:function(){return this.message;},_setPublishMapAttr:function(_16da){this._publishMap=_16da;},_setPublishMapWithIdAttr:function(_16db){this._publishMapWithId=_16db;},_setActivityIdAttr:function(_16dc){this._activityId=_16dc;}});return _16cc;});},"Sage/UI/GroupListConfigurationProvider":function(){define("Sage/UI/GroupListConfigurationProvider",["Sage/_ConfigurationProvider","Sage/Data/GroupLayoutSingleton","Sage/Services/_ServiceMixin","Sage/UI/Columns/SlxLink","Sage/UI/Columns/Boolean","Sage/UI/Columns/DateTime","Sage/UI/Columns/Numeric","Sage/UI/Columns/OwnerType","Sage/UI/Columns/Phone","Sage/UI/Columns/UserType","Sage/UI/Columns/Currency","Sage/Data/SDataStore","Sage/UI/SummaryFormatterScope","dijit/MenuSeparator","dijit/Menu","Sage/UI/MenuItem","dojo/_base/lang","dojo/_base/declare","dojo/i18n"],function(_16dd,_16de,_16df,_16e0,_16e1,_16e2,_16e3,_16e4,_16e5,_16e6,_16e7,_16e8,_16e9,_16ea,_16eb,_16ec,lang,_16ed,i18n){var _16ee=_16ed("Sage.UI.GroupListConfigurationProvider",[_16dd,_16df],{serviceMap:{"groupContextService":"ClientGroupContext"},service:null,_hasAdHocList:false,ROWS_PER_PAGE:100,constructor:function(_16ef){this._adHocOnlyMenuItems=[];this._menuItems=[];this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));},_onGroupContextChanged:function(){this.onConfigurationChange();},requestConfiguration:function(_16f0){var _16f1=new _16de(),_16f2=lang.hitch(this,this._onRequestConfigurationSuccess,_16f0||{}),_16f3=lang.hitch(this,this._onRequestConfigurationFailure,_16f0||{}),group=this.getCurrentGroup();_16f1.getGroupLayout(this.formatPredicate(group),_16f2,_16f3,group.$key);},_onRequestConfigurationSuccess:function(_16f4,entry){if(_16f4.success){_16f4.success.call(_16f4.scope||this,this._createConfiguration(entry),_16f4,this);}},_onRequestConfigurationFailure:function(_16f5,_16f6){if(_16f5.failure){_16f5.failure.call(_16f5.scope||this,_16f6,_16f5,this);}},_createConfigurationForList:function(entry){var _16f7=entry.layout,_16f8=[],_16f9=[],_16fa=Sage.Services.getService("ClientGroupContext"),_16fb,i;if(_16fa){_16fb=_16fa.getContext();}if(entry["keyField"]){_16f8.push(entry["keyField"]);}for(i=0;i<_16f7.length;i++){var item=_16f7[i];_16f8.push(item["alias"]);if(item["visible"]){if(item["webLink"]){var _16fc=item["dataPath"],_16fd=_16fc.lastIndexOf("!")>-1?_16fc.substring(0,_16fc.lastIndexOf("!")).substring(_16fc.lastIndexOf(".")+1):_16fc.substring(0,_16fc.lastIndexOf(":")),_16fe=_16fd+"ID";if(item["alias"]==="ACCOUNT"||item["alias"].match(/A\d+_ACCOUNT/ig)){_16fd="ACCOUNT";_16fe="ACCOUNTID";}if((_16fb)&&(_16fd===_16fb.CurrentTable)){_16fd=_16fb.CurrentEntity;_16fe=_16fb.CurrentTableKeyField;}_16f8.push(_16fe);_16f9.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_16e0,pageName:_16fd,idField:_16fe,width:item["width"]+"px"});}else{if(item["alias"].match(/^email$/i)){item["format"]="Email";}if(item["fieldType"]==="DateTime"){item["format"]="DateTime";}switch(item["format"]){case "Boolean":_16f9.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_16e1,formatString:item["formatString"],width:item["width"]+"px"});break;case "DateTime":_16f9.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_16e2,datePattern:item["formatString"],width:item["width"]+"px"});break;case "Email":_16f9.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],formatter:function(val){if(!val){return "";}return dojo.string.substitute("<a href=mailto:${0}>${0}</a>",[Sage.Utility.htmlEncode(val)]);},width:item["width"]+"px"});break;case "Percent":case "Fixed":_16f9.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_16e3,constraints:{places:Sage.Utility.getPrecision(item["formatString"]),round:-1},fercent:true,formatType:item["formatString"][item["formatString"].length-1]==="%"?"Percent":"Number",width:item["width"]+"px",isWholeNumberPercent:item["format"]==="Percent"?false:true});break;case "Owner":var _16ff=item["alias"]+"NAME";_16f8.push(_16ff);_16f9.push({field:_16ff,name:item["caption"],width:item["width"]+"px"});break;case "OwnerType":_16f9.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_16e4,width:item["width"]+"px"});break;case "Phone":_16f9.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_16e5,width:item["width"]+"px"});break;case "PickList Item":var _1700=item["alias"]+"TEXT";_16f8.push(_1700);_16f9.push({field:_1700,property:item["propertyPath"],name:item["caption"],width:item["width"]+"px"});break;case "User":var _1701=item["alias"]+"NAME";_16f8.push(_1701);_16f9.push({field:_1701,name:item["caption"],width:item["width"]+"px"});break;case "User Type":_16f9.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_16e6,width:item["width"]+"px"});break;case "Currency":_16f9.push({field:item["alias"],property:item["caption"],name:item["caption"],type:_16e7,width:item["width"]+"px"});break;default:_16f9.push({field:item["alias"],property:item["caption"],name:item["caption"],width:item["width"]+"px"});break;}}}}var store=new _16e8({service:this.service,resourceKind:"groups",resourcePredicate:this.formatPredicate(entry),queryName:"execute",select:_16f8,include:[],count:this.ROWS_PER_PAGE});var _1702={};for(i=0;i<entry["tableAliases"].length;i++){_1702[entry["tableAliases"][i]["tableName"].toUpperCase()]=entry["tableAliases"][i]["alias"];}return {structure:[{defaultCell:{defaultValue:""},cells:[_16f9]}],store:store,rowsPerPage:this.ROWS_PER_PAGE,layout:entry["layout"],tableAliases:_1702,selectedRegionContextMenuItems:this._getListContextMenuItems(),onSelectedRegionContextMenu:this._onListContext,onNavigateToDefaultItem:lang.hitch(entry,function(item){if(item){var _1703=this["keyField"],_1704=this["entityName"],id=item[_1703];if(id){Sage.Link.entityDetail(_1704,id);}}}),id:entry["$key"]};},_getCurrentGroupID:function(){var _1705=Sage.Services.getService("ClientGroupContext"),_1706,_1707;if(_1705){_1706=_1705.getContext();_1707=_1706.CurrentGroupID;}return _1707;},_onListContext:function(e){var _1708=Sage.Services.getService("ClientGroupContext");var _1709=_1708.getContext();for(var i=0;i<this._adHocOnlyMenuItems.length;i++){this._adHocOnlyMenuItems[i].set("disabled",!_1709.isAdhoc);}this._ensureAdHocListMenu();},_getListContextMenuItems:function(){var _170a,_170b=this._getCurrentGroupID();if(this._menuItems.length>0){return this._menuItems;}if(!Sage.UI.DataStore.ContextMenus||!Sage.UI.DataStore.ContextMenus.listContextMenu){return [];}this._menuItems=[];this._adHocOnlyMenuItems=[];var _170c=Sage.UI.DataStore.ContextMenus.listContextMenu.items;var len=_170c.length;for(var i=0;i<len;i++){var mDef=_170c[i];if(mDef.displayName===""){this._menuItems.push(new _16ea());}else{var href=mDef.href;if(href.indexOf("javascript:")<0){href=dojo.string.substitute("javascript:${0}()",[href]);}if(href.indexOf("addSelectionsToGroup")>0){_170a=this._createAddToAdHocMenuItem(mDef);if(_170a.arrowWrapper){dojo.style(_170a.arrowWrapper,"visibility","");}}else{_170a=new _16ec({id:_170b+"_"+i,label:mDef.text||"...",icon:mDef.img,title:mDef.tooltip||"",ref:href,onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}});}this._menuItems.push(_170a);if(href.indexOf("removeSelectionsFromGroup")>0){this._adHocOnlyMenuItems.push(_170a);}}}return this._menuItems;},_createAddToAdHocMenuItem:function(_170d){this._adHocMenu=new _16eb();this._adHocMenu.addChild(new _16ec({label:"loading..."}));this._adHocMenuHref=_170d.href;var _170e=new _16ec({label:_170d.text||"...",icon:_170d.img,title:_170d.tooltip||"",popup:this._adHocMenu});return _170e;},_ensureAdHocListMenu:function(){if(this._hasAdHocList){return;}this._hasAdHocList=true;var svc=Sage.Services.getService("ClientGroupContext");svc.getAdHocGroupList(function(list){this._adHocMenu.destroyDescendants();for(var i=0;i<list.length;i++){var grp=list[i];this._adHocMenu.addChild(new _16ec({label:grp["$descriptor"]||grp["name"],icon:"",title:grp["$descriptor"]||grp["name"],ref:dojo.string.substitute(this._adHocMenuHref,{"groupId":grp["$key"]}),onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}}));}},this);},_createConfigurationForSummary:function(entry){if(!this.summaryOptions){return false;}var store=new _16e8({service:this.service,resourceKind:"groups",resourcePredicate:this.formatPredicate(entry),queryName:"execute",select:[entry["keyField"]],include:[]}),_170f=[{field:entry["keyField"],formatter:"formatSummary",width:"100%",name:"Summary View",canResize:function(){return false;}}],_1710=["Sage"],_1711=this.summaryOptions["templateLocation"],_1712=_1711&&_1711.split("/"),i,path;for(i=0;i<_1712.length-1;i++){_1710.push(_1712[i]);}path="dojo/i18n!"+_1710.join("/")+"/nls/"+_1712[_1712.length-1].replace(".html","");require([path],lang.hitch(this,function(nls){lang.mixin(this,nls);}));return {structure:_170f,layout:entry["layout"],store:store,rowHeight:200,rowsPerPage:50,formatterScope:new _16e9({requestConfiguration:{mashupName:this.summaryOptions["mashupName"]||"SummaryViewQueries",queryName:this.summaryOptions["queryName"]||""},templateLocation:this.summaryOptions["templateLocation"]||""})};},_createConfigurationForDetail:function(entry){if(this.detailConfiguration){return {requestConfiguration:{mashupName:this.detailConfiguration["mashupName"]||"SummaryViewQueries",queryName:this.detailConfiguration["queryName"]||""},templateLocation:this.detailConfiguration["templateLocation"]};}return false;},_createConfiguration:function(entry){return {list:this._createConfigurationForList(entry),summary:this._createConfigurationForSummary(entry),detail:this._createConfigurationForDetail(entry)};},formatPredicate:function(group){if(group.$key==="LOOKUPRESULTS"){group.family=group.family&&group.family.toUpperCase();group.name="Lookup Results";return dojo.string.substitute("name eq '${name}' and upper(family) eq '${family}'",group);}return "'"+group.$key+"'";},getCurrentGroup:function(){var _1713=Sage.Services.getService("ClientGroupContext"),_1714=_1713&&_1713.getContext(),_1715={name:"My Accounts",family:"Account",$key:""};if(_1714){_1715={name:_1714.CurrentName,family:_1714.CurrentFamily,$key:_1714.CurrentGroupID};}return _1715;}});return _16ee;});},"Sage/UI/Controls/CheckBox":function(){define("Sage/UI/Controls/CheckBox",["dijit/form/CheckBox","dojo/_base/declare"],function(_1716,_1717){var _1718=_1717("Sage.UI.Controls.CheckBox",_1716,{hotKey:"",autoPostBack:false,labelText:"",labelPlacement:"",shouldPublishMarkDirty:true,constructor:function(){this.inherited(arguments);},postCreate:function(){if(this.hotKey!==""){this.focusNode.accessKey=this.hotKey;}this.connect(this,"onChange",this.onChanged);this._insertLabel();this.inherited(arguments);},_insertLabel:function(){var _1719="before",_171a=null;if(this.labelPlacement==="right"){_1719="after";}if(this.labelPlacement!=="none"){_171a=dojo.create("label",{"for":this.id,innerHTML:this.labelText},this.domNode,_1719);if(this.labelPlacement==="top"){dojo.create("br",null,_171a,"after");}}},onChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){if(Sys){Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,"");}}}});return _1718;});},"Sage/UI/TimeZoneItem":function(){define("Sage/UI/TimeZoneItem",["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/PopupMenuBarItem","Sage/UI/OrientableMenuBar","Sage/UI/MenuBarItem","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n","dojo/data/ItemFileReadStore","dojo/i18n!./nls/TimeZoneItem","dojo/_base/declare"],function(_171b,_171c,_171d,_171e,_171f,_1720,i18n,_1721,_1722,_1723){var _1724=_1723("Sage.UI.TimeZoneItem",_171b,{_TimeZoneDialog:new Simplate(["<div><div style=\"height:auto;\">","{%= $.setTimeZone %}<br />","<select id=\"timeZoneItemsList\" data-dojo-type=\"dijit.form.Select\" shouldPublishMarkDirty=\"false\" style=\"width:345px; margin-top:10px; margin-bottom:10px;\"></select></div>","<div class=\"button-bar alignright\"><button data-dojo-type=\"dijit.form.Button\""," type=\"button\" id=\"btnTimeZoneDialogOk\" title=\"{%= $.buttonOK %}\" align=\"right\">{%= $.buttonOK %}</button>","<button data-dojo-type=\"dijit.form.Button\""," type=\"button\" id=\"btnTimeZoneDialogCancel\" title=\"{%= $.buttonCancel %}\" align=\"right\">{%= $.buttonCancel %}</button>","</div></div>"]),postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI","TimeZoneItem"));this.inherited(arguments);},postCreate:function(){this.inherited(arguments);var _1725;_1725=Sage.Utility.getClientContextByKey("userTimeZone");this.addChild(new _171f({label:_1725,title:this.timeZoneText,id:"btnTimeZoneMenu",onClick:function(){dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:function(data){var _1726=dijit.byId("TimeZoneMenu"),_1727=dijit.byId("btnTimeZoneMenu");_1726._initializeDialog();_1726._initializeTimeZoneDataStore(data,_1727.label);},error:function(err){}});}}));},_initializeDialog:function(){var _1728=dijit.byId("TimeZoneMenu");var d=new dijit.Dialog({title:_1728.timeZoneSettingsText,style:"width:auto;"});dojo.mixin(d,new _1720());d.createHelpIconByTopic("Select_TimeZone");var mkup=this._TimeZoneDialog.apply({buttonOK:_1728.buttonOKText,buttonCancel:_1728.buttonCancelText,setTimeZone:_1728.setTimeZoneText});d.set("content",mkup);d.show();var _1729=function(){dojo.disconnect(_172a);dojo.disconnect(_172b);dojo.disconnect(_172c);setTimeout((function(d){return function(){d.destroyDescendants();d.destroy(false);};})(d),1);};var _172d=function(){d.hide();};var _172e=function(){var _172f=dijit.byId("timeZoneItemsList"),_1728=dijit.byId("TimeZoneMenu"),_1730="";for(var i=0;i<_172f.options.length;i++){if(_172f.options[i].value===_172f.value){_1730=_172f.options[i];break;}}if(_1730){_1728._updateTimeZone(_1730,_1728.location?true:false);}d.hide();};var _172a=dojo.connect(d,"hide",this,_1729);var _172b=dojo.connect(dijit.byId("btnTimeZoneDialogCancel"),"onClick",this,_172d);var _172c=dojo.connect(dijit.byId("btnTimeZoneDialogOk"),"onClick",this,_172e);},_initializeTimeZoneDataStore:function(data,_1731){var items=[];var _1732="";for(var i=0;i<data.length;i++){if(!data[i].Displayname||!data[i].Keyname){continue;}if(data[i].Displayname==_1731){var _1733=data[i].Displayname.split(")");_1732=data[i].OffsetHours;break;}}dojo.forEach(data,function(item){if(!item.Displayname||!item.Keyname){return;}if(item.OffsetHours==_1732){items.push({id:item.Keyname,text:item.Displayname});}});var _1734={label:"text",identifier:"id",items:items};var _1735=new _1721({data:_1734});var _1736=dijit.byId("timeZoneItemsList");_1736.setStore(_1735);_1736.set("searchAttr","text");for(var i=0;i<_1736.options.length;i++){if(_1736.options[i].label===_1731){_1736.setValue(_1736.options[i].value);break;}}},_updateTimeZone:function(_1737,_1738){var _1739={"$name":"setusertimezone","request":{"UserId":Sage.Utility.getClientContextByKey("userID"),"userTimeZone":_1737.value,"isCustomerPortal":_1738?"t":""}};var _173a=new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind("users").setOperationName("setusertimezone");_173a.execute(_1739,{success:function(){var _173b=dijit.byId("btnTimeZoneMenu");_173b.setLabel(_1737.label);},failure:function(){},scope:this});}});return _1724;});},"Sage/MainView/ActivityMgr/HistoryEditor":function(){require({cache:{"url:Sage/MainView/ActivityMgr/templates/HistoryEditor.html":"\r\n[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"historyDialog\" title=\"\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onDlgHide\">',\r\n        '<div class=\"activity-dialog\">',  //body\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\">',\r\n                '<select label=\"{%= $.regardingText %}\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_pk_Regarding\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Regarding\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\"></select>',\r\n                '<div dojoType=\"Sage.UI.Controls.TextBox\" shouldPublishMarkDirty=\"false\" label=\"{%= $.locationText %}\" id=\"{%= $.id %}_tb_Location\" dojoAttachPoint=\"tb_Location\" maxLength=\"255\" ></div>',\r\n            '</div>', //first tablecontainer 1 col\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\">',\r\n                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_CompletetdDate\" dojoAttachPoint=\"dtp_completedDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.completedDateText %}\"></div>',\r\n                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_StartDate\" dojoAttachPoint=\"dtp_startDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.startTimeText %}\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"{%= $.timeLessText %}\" id=\"{%= $.id %}_cb_Timeless\" dojoAttachPoint=\"cb_Timeless\" ></div>',\r\n                    '<label class=\"checkbox-label\" for=\"cb_Timeless\">{%= $.timeLessText %}</label>',\r\n                '</div>',\r\n                 '<div dojoType=\"Sage.UI.Controls.DurationSelect\" shouldPublishMarkDirty=\"false\" label=\"{%= $.durationText %}\" id=\"{%= $.id %}_sel_Duration\" dojoAttachPoint=\"sel_Duration\" includeDisablingCheckbox=\"false\" valuesAreAfterStart=\"true\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    \r\n                '</div>',\r\n            '</div>', //second tablecontainer 2 col\r\n\r\n            '<div dojoType=\"dijit.layout.TabContainer\" id=\"{%= $.id %}_tc_EditHistory\"  dojoAttachPoint=\"tc_EditHistory\" class=\"tab-container\">',\r\n/*  General Tab   */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_General\" title=\"{%= $.tabNameGeneralText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_General\">',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"result_Section\" class=\"bottom-border-section\">',\r\n                        '<select label=\"{%= $.resultText %}\" id=\"{%= $.id %}_tb_Result\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Result\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\"></select>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"4\" labelWidth=\"4\" baseClass=\"contact-lead-radios\" >',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.contactText %}\" value=\"contact\" id=\"{%= $.id %}_rdo_Contact\" dojoAttachPoint=\"rdo_Contact\" dojoAttachEvent=\"onChange:_setContactLeadVisibility\" checked=\"true\" />',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.leadText %}\" value=\"lead\" id=\"{%= $.id %}_rdo_Lead\" dojoAttachPoint=\"rdo_Lead\" />',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"contactContainer\" baseClass=\"bottom-border-section\">',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_ContactLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.opportunityText %}\" dojoAttachPoint=\"container_OppLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.accountText %}\" dojoAttachPoint=\"container_AccountLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.ticketText %}\" dojoAttachPoint=\"container_TicketLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"leadContainer\"  baseClass=\"bottom-border-section\" class=\"display-none\">',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_LeadLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_tb_LeadCompanyName\" label=\"{%= $.companyText %}\" dojoAttachPoint=\"tb_LeadCompanyName\" readonly=\"true\" />',\r\n                    '</div>',                       \r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\"  class=\"bottom-border-section\">',\r\n                        '<select label=\"{%= $.categoryText %}\" id=\"{%= $.id %}_pk_Category\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Category\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\"  style=\"width: {%= 472 - $.labelWidth %}px;\" ></select>', \r\n                         '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.leaderText %}\" dojoAttachPoint=\"container_LeaderLup\" class=\"remove-padding lookup-container\" style=\"width: {%= 472 - $.labelWidth %}px;\"></div>',\r\n                         '<select label=\"{%= $.priorityText %}\" id=\"{%= $.id %}_pk_Priority\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Priority\" canEditText=\"true\" itemMustExist=\"false\" pickListName=\"Priorities\" sort=\"false\" maxLength=\"64\" style=\"width: {%= 472 - $.labelWidth %}px;\"></select>',                          \r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\"  class=\"valigntop\">',\r\n                        '<textarea dojoType=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_ta_Notes\" label=\"{%= $.notesText %}\" dojoAttachPoint=\"ta_Notes\" class=\"notes-text\" ></textarea>',\r\n                    '</div>',\r\n                '</div>',  // end general tab\r\n\r\n              /* Attachments Tab  */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Attachments\" title=\"{%= $.tabNameAttachmentsText %}\" class=\"tabContent\" dojoAttachPoint=\"cp_Attachments\" dojoAttachEvent=\"onShow:_showAttachmentsTab\">',\r\n                    '<div id=\"{%= $.id %}_attachmentsGridPlaceholder\" dojoAttachPoint=\"_attachmentGridPlaceholder\" style=\"width:100%;height:100%;\" ></div>',\r\n                '</div>',  //end attachments tab\r\n            '</div>', //end tab container\r\n            '<table class=\"button-bar\">',\r\n                '<col width=\"50%\" /><col width=\"50%\" />',\r\n                 '<tr>',\r\n                    '<td class=\"alignleft\">',\r\n                        //followUp section\r\n                        '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"followUp_Section\" >',\r\n                            '<select label=\"{%= $.followupText %}\" id=\"{%= $.id %}_followUpSelect\" dojoType=\"dijit.form.ComboBox\" dojoAttachPoint=\"sel_Followup\">',\r\n                                '<option value=\"none\" selected=\"selected\">{%= $.noneText %}</option>',\r\n                                '<option value=\"atPhoneCall\">{%= Sage.Utility.Activity.getActivityTypeName(\"atPhoneCall\") %}</option>',\r\n                                '<option value=\"atAppointment\">{%= Sage.Utility.Activity.getActivityTypeName(\"atAppointment\") %}</option>',\r\n                                '<option value=\"atToDo\">{%= Sage.Utility.Activity.getActivityTypeName(\"atToDo\") %}</option>',\r\n                            '</select>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"{%= $.id %}_ck_coAttachments\" dojoAttachPoint=\"ck_coAttachments\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coAttachments\">{%= $.carryOverAttachmentsText %}</label>',\r\n                            '</div>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"{%= $.id %}_ck_coNotes\" dojoAttachPoint=\"ck_coNotes\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coNotes\">{%= $.carryOverNotesText %}</label>',\r\n                            '</div>',\r\n                        '</div>',//end followUp section                         \r\n                    '</td>',\r\n                    '<td class=\"alignright valignbottom\" rowspan=\"2\">',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnDelete\" name=\"btn_Delete\" dojoAttachPoint=\"btn_Delete\" dojoAttachEvent=\"onClick:_deleteClick\">{%= $.deleteText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $. cancelText %}</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                   '<td class=\"alignleft\">',\r\n                      '<div class=\"scheduled-by-label\" dojoAttachPoint=\"lbl_ScheduledBy\"></div>',\r\n                   '</td>',                 \r\n                '</tr>',\r\n            '</table>',\r\n        '</div>', //body\r\n    '</div>',  //dialog\r\n'</div>' //root node\r\n]\r\n"}});define("Sage/MainView/ActivityMgr/HistoryEditor",["dijit/_Widget","Sage/_Templated","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","Sage/Utility","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","Sage/UI/AttachmentList","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dojo/string","dojo/date/locale","Sage/Utility/Activity","Sage/Utility/File","dojo/_base/declare","dojo/i18n!./nls/HistoryEditor","dojo/text!./templates/HistoryEditor.html","dojo/dom-class","dijit/Toolbar","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/Textarea","dojox/layout/TableContainer","Sage/Services/UserOptions","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/Lookup","dijit/Dialog","Sage/UI/Controls/DurationSelect","Sage/Services/CalendarSecurityService"],function(_173c,_173d,_173e,_173f,_1740,_1741,_1742,_1743,_1744,_1745,_1746,_1747,_1748,_1749,_174a,_174b,_174c,_174d,_174e){dojo.requireLocalization("Sage.MainView.ActivityMgr","HistoryEditor");var _174f=_174b("Sage.MainView.ActivityMgr.HistoryEditor",[_173c,_173d],{historyId:"",mode:"",id:"",activityType:"",_dialog:false,_currentUserId:null,_activityService:false,_historyData:false,_historyStore:false,_bindingMgr:false,lup_Account:false,lup_Contact:false,lup_Opportunity:false,lup_Ticket:false,lup_Lead:false,lup_Leader:false,accountLookupConfig:{},contactLookupConfig:{},opportunityLookupConfig:{},ticketLookupConfig:{},leadLookupConfig:{},_isBinding:false,_historySaved:false,notnullfields:["ContactId","AccountId","OpportunityId","TicketId","LeadId"],historyDefaultValues:{},_doingFollowup:false,_attachmentsSaved:false,_attachmentList:false,_tempIdForAttachments:false,_hasAccess:true,eventConnections:[],widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_174d)),constructor:function(){dojo.mixin(this,_174c);this._historyService=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");this._setupStore();this._currentUserId=Sage.Utility.getClientContextByKey("userID")||"";dojo.subscribe("/entity/attachment/create",this,this._updateHistoryETag);dojo.subscribe("/entity/attachment/update",this,this._updateHistoryETag);dojo.subscribe("/entity/attachment/delete",this,this._updateHistoryETag);},destroy:function(){if(this._historyChangeConnection){dojo.disconnect(this._historyChangeConnection);this._historyChangeConnection=false;}if(this._bindingMgr){this._bindingMgr.destroy();}for(var i=0;i<this.eventConnections.length;i++){dojo.disconnect(this.eventConnections[i]);}this.lup_Account.destroy();this.lup_Contact.destroy();this.lup_Opportunity.destroy();this.lup_Ticket.destroy();this.lup_Lead.destroy();this.lup_Leader.destroy();this.eventConnections=[];this.inherited(arguments);},isFirstOpen:true,show:function(_1750){this._dialog.set("refocus",false);if(this.isFirstOpen){this.isFirstOpen=false;this.connect(this._dialog,"onHide",this._cleanOnClose);}if(!this.lup_Account){this.createAccountLookup();this.createContactLookup();this.createOpportunityLookup();this.createTicketLookup();this.createLeadLookup();this.createLeaderLookup();}this.historyDefaultValues={};if(this.mode==="New"){this.historyDefaultValues=_1750||{};this._loadData();}if(this.mode==="Complete"){}if(this.mode==="Complete"){_174e.add(this.btn_Delete.domNode,"display-none");}else{_174e.remove(this.btn_Delete.domNode,"display-none");}if((this.activityType==="atNote")&&(this.mode==="New")){dojo.addClass(this.result_Section.domNode,"display-none");}else{dojo.removeClass(this.result_Section.domNode,"display-none");}this._dialog.show();if(!this._dialog._standby){_1742.mixin(this._dialog,new _1743());if(!this._historyData){this._dialog.showLoading();}}if(!this._dialog.helpIcon){_1742.mixin(this._dialog,new _1741());this._dialog.createHelpIconByTopic("View_Edit_Details_of_a_History_Item");}if(this.activityType==="atNote"){this._dialog.set("helpTopic","addnote");}else{this._dialog.set("helpTopic","View_Edit_Details_of_a_History_Item");}this.tc_EditHistory.selectChild(this.cp_General);this._doingFollowup=false;},hide:function(e){this._dialog.hide(e);this.set("historyId","");},onHide:function(){},_onDlgHide:function(){this.onHide();},_cleanOnClose:function(){var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();this.set("historyId","");},_showAttachmentsTab:function(){var self=this;window.setTimeout(function(){self._ensureAttachmentList();},100);},_ensureAttachmentList:function(){if(!this._attachmentList){this._attachmentList=new _1744({workspace:"",tabId:"",placeHolder:this.id+"_attachmentsGridPlaceholder",parentRelationshipName:"historyId"});var self=this;this._attachmentList.startup(function(){if(self.cp_Attachments){self.cp_Attachments.resize();}});}else{this._attachmentList.resetEntityContext();}},_updateHistoryETag:function(_1751){if(this._dialog.open&&this.historyId){var req=new Sage.SData.Client.SDataSingleResourceRequest(_1745.getSDataService("dynamic"));req.setResourceKind("history");req.setResourceSelector("\""+this.historyId+"\"");req.setQueryArg("precedence","0");req.read({success:function(_1752){this._historyData["$etag"]=_1752["$etag"];},scope:this});}},_setModeAttr:function(mode){this.mode=mode;if(mode.indexOf("New")===0){this._historyData=false;}},_setActivityTypeAttr:function(type){switch(type){case "PhoneCall":case "atPhoneCall":this.activityType="atPhoneCall";break;case "Meeting":case "atAppointment":this.activityType="atAppointment";break;case "ToDo":case "atToDo":this.activityType="atToDo";break;case "PersonalActivity":case "atPersonal":case "Personal":this.activityType="atPersonal";break;case "atNote":case "Note":this.activityType="atNote";break;default:this.activityType="atNote";break;}},_setHistoryIdAttr:function(_1753){if(this.historyId!==_1753){this.historyId=_1753;this._historyData=false;if(_1753!==""){this._loadData();}}},_getHistoryIdAttr:function(){return this.historyId;},_setupStore:function(){if(!this._historyStore){this._historyStore=new _173e({include:[],resourceKind:"history",service:this._historyService});}},_loadData:function(){if(this._dialog._standby){this._dialog.showLoading();}this._historyData=false;this._historySaved=false;if(this._historyStore){if(this.mode!=="New"){this._historyStore.fetch({predicate:"\""+this.historyId+"\"",onComplete:this._receivedHistory,onError:this._requestFailure,scope:this});}else{this._historyStore.newItem({onComplete:function(data){Sage.Utility.setValue(data,"Type",this.activityType);this._receivedHistory(dojo.mixin(data,this.historyDefaultValues));},scope:this});}}},_receivedHistory:function(data){this._historyData=data;this._tempIdForAttachments=false;var _1754=Sage.Services.getService("ClientEntityContext");var _1755={"EntityId":this._historyData.$key||"","EntityType":"Sage.Entity.Interfaces.IHistory","Description":this._historyData.$descriptor,"EntityTableName":"HISTORY"};_1754.setTemporaryContext(_1755);this._ensureIdsNotNull();if(this.mode!=="New"){this.activityType=data.Type;}else{this._applyUserOptionsForNewHistory();}this._setUIForActivityType(data.Type);this._bind();if(((this.activityType==="atNote")&&(this.mode==="New"))||(data["UserId"]!==this._currentUserId&&this._currentUserId.trim()!=="ADMIN")){dojo.addClass(this.btn_Delete.domNode,"display-none");}else{dojo.removeClass(this.btn_Delete.domNode,"display-none");}if(this._dialog._standby){this._dialog.hideLoading();}},_ensureIdsNotNull:function(){for(var i=0;i<this.notnullfields.length;i++){if(this._historyData[this.notnullfields[i]]===null){this._historyData[this.notnullfields[i]]="";}}},_applyUserOptionsForNewHistory:function(){var _1756=new Date();_1756.setSeconds(5);_1756.setMinutes(0);_1756.setHours(0);Sage.Utility.setValue(this._historyData,"Timeless",true);Sage.Utility.setValue(this._historyData,"StartDate",Sage.Utility.Convert.toIsoStringFromDate(_1756));Sage.Utility.setValue(this._historyData,"Duration","60");},_requestFailure:function(msg,_1757,opts){},_createBindings:function(){if(this._bindingMgr){this._bindingMgr.destroy();this._bindingMgr=false;}this._bindingMgr=new _173f({defaultBinding:{boundEntity:this._historyData},items:[{boundWidget:this.tb_Location,entityProperty:"Location"},{boundWidget:this.pk_Regarding,entityProperty:"Description",onChange:dojo.hitch(this,"_descriptionChanged")},{boundWidget:this.pk_Result,entityProperty:"Result"},{boundWidget:this.pk_Category,entityProperty:"Category"},{boundWidget:this.pk_Priority,entityProperty:"Priority"},{boundWidget:this.dtp_startDate,dataType:"date",entityProperty:"StartDate",onChange:dojo.hitch(this,"_startDateChanged")},{boundWidget:this.dtp_completedDate,dataType:"date",entityProperty:"CompletedDate"},{boundWidget:this.sel_Duration,entityProperty:"Duration"},{boundWidget:this.cb_Timeless,entityProperty:"Timeless",widgetProperty:"checked",onChange:dojo.hitch(this,"_timelessChange")},{boundWidget:this.ta_Notes,entityProperty:"LongNotes"}]});},_bind:function(){if(this._historyData){if(!this._bindingMgr){this._createBindings();}else{if(!this._bindingMgr.boundEntity||(this._historyData.HistoryId!==this._bindingMgr.boundEntity.HistoryId)){this._bindingMgr.setBoundEntity(this._historyData);}else{this._bindingMgr.bind();}}this._manualBind();this._setUI();}},_manualBind:function(){if(this._historyData){this._isBinding=true;var his=this._historyData;var _1758=(his.AccountId.trim()==="")?null:{"$key":his.AccountId,"$descriptor":his.AccountName};this.lup_Account.set("selectedObject",_1758);var _1759=(his.ContactId.trim()==="")?null:{"$key":his.ContactId,"$descriptor":his.ContactName};this.lup_Contact.set("selectedObject",_1759);var _175a=(his.OpportunityId.trim()==="")?null:{"$key":his.OpportutunityId,"$descriptor":his.OpportunityName};this.lup_Opportunity.set("selectedObject",_175a);var _175b=(his.TicketId.trim()==="")?null:{"$key":his.TicketId,"$descriptor":his.TicketNumber};this.lup_Ticket.set("selectedObject",_175b);var _175c=(his.LeadId.trim()==="")?null:{"$key":his.LeadId,"$descriptor":his.LeadName};var _175d=(his.UserId.trim()==="")?null:{"$key":his.UserId,"$descriptor":his.UserName};this.lup_Leader.set("selectedObject",_175d);this.lup_Lead.set("selectedObject",_175c);this.tb_LeadCompanyName.set("value",(his.LeadId.trim()==="")?"":his.AccountName);this._updateLookupSeedValues(his.AccountId);this._isBinding=false;}},_accountChanged:function(_175e){if(this._isBinding){return;}var newId=(_175e)?_175e["$key"]:"";var _175f=(_175e)?_175e["$descriptor"]:"";var his=this._historyData;var _1760=(his.ContactId==="");his.AccountId=newId;his.AccountName=_175f;his.ContactId="";his.ContactName="";his.PhoneNumber="";his.OpportunityId="";his.OpportunityName="";his.TicketId="";his.TicketNumber="";his.LeadId="";his.LeadName="";this._isBinding=true;this.lup_Contact.set("selectedObject",null);this.lup_Opportunity.set("selectedObject",null);this.lup_Ticket.set("selectedObject",null);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._updateLookupSeedValues(newId);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");if(_1760){this._setContactToCurrentAccountPrimary();}this._isBinding=false;},_contactChanged:function(_1761){if(this._isBinding){return;}var his=this._historyData;if(!_1761){his.ContactId="";his.ContactName="";his.PhoneNumber="";return;}his.ContactId=_1761["$key"];his.ContactName=_1761["$descriptor"];his.PhoneNumber=Sage.Utility.getValue(_1761,"WorkPhone");his.LeadId="";his.LeadName="";his.AccountId=_1761.Account["$key"];his.AccountName=_1761.Account.AccountName;this._updateLookupSeedValues(_1761.Account["$key"]);this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_1761.Account["$key"],"$descriptor":_1761.Account.AccountName});this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;},_opportunityChanged:function(_1762){if(this._isBinding){return;}var his=this._historyData;if(!_1762){his.OpportunityId="";his.OpportunityName="";return;}his.OpportunityId=_1762["$key"];his.OpportunityName=_1762["$descriptor"];if(his.AccountId.trim()===""||his.AccountId!==_1762.Account["$key"]){his.AccountId=_1762.Account["$key"];his.AccountName=_1762.Account.AccountName;his.LeadId="";his.LeadName="";this._updateLookupSeedValues(_1762.Account["$key"]);this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_1762.Account["$key"],"$descriptor":_1762.Account.AccountName});this.lup_Contact.set("selectedObject",null);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;this._setContactBasedOnOpportunity();}},_ticketChanged:function(_1763){if(this._isBinding){return;}var his=this._historyData;if(!_1763){his.TicketId="";his.TicketNumber="";return;}his.TicketId=_1763["$key"];his.TicketNumber=_1763["$descriptor"];if(his.AccountId.trim()===""||his.AccountId!==_1763.Account["$key"]){his.AccountId=_1763.Account["$key"];his.AccountName=_1763.Account["AccountName"];his.LeadId="";his.LeadName="";this._updateLookupSeedValues();his.ContactId=Sage.Utility.getValue(_1763,"Contact.$key");his.ContactName=Sage.Utility.getValue(_1763,"Contact.NameLF");his.PhoneNumber=Sage.Utility.getValue(_1763,"Contact.WorkPhone");this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_1763.Account["$key"],"$descriptor":_1763.Account["AccountName"]});this.lup_Contact.set("selectedObject",{"$key":_1763.Contact["$key"],"$descriptor":_1763.Contact["NameLF"]});this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;}},_leadChanged:function(_1764){if(this._isBinding){return;}var his=this._historyData;if(!_1764){his.LeadId="";his.LeadName="";his.PhoneNumber="";this.tb_LeadCompanyName.set("value","");return;}his.LeadId=_1764["$key"];his.LeadName=_1764["$descriptor"];his.AccountName=_1764["Company"];his.PhoneNumber=_1764["WorkPhone"];this.tb_LeadCompanyName.set("value",_1764["Company"]);his.ContactId="";his.ContactName="";his.AccountId="";his.AccountName="";his.TicketId="";his.TicketNumber="";his.OpportunityId="";his.OpportunityName="";this._updateLookupSeedValues();this._isBinding=true;this.lup_Contact.set("selectedObject",null);this.lup_Account.set("selectedObject",null);this.lup_Opportunity.set("selectedObject",null);this.lup_Ticket.set("selectedObject",null);this._isBinding=false;},_leaderChanged:function(_1765){if(this._isBinding){return;}this._historyData.UserId=_1765["$key"].substr(0,12);this._historyData.UserName=_1765["$descriptor"];},_setContactBasedOnOpportunity:function(){var req=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));req.setResourceKind("opportunities");var _1766=req.uri.pathSegments.length-1;var _1767=req.uri.getPathSegment(_1766);_1767["predicate"]="\""+this._historyData.OpportunityId+"\"";req.uri.setPathSegment(_1766+1,"Contacts");req.setQueryArg("select","IsPrimary,Contact/NameLF,Contact/IsPrimary,Contact/WorkPhone");req.setQueryArg("orderby","IsPrimary desc");req.read({success:function(data){var _1768=data["$resources"];if(_1768.length<1){this._setContactToCurrentAccountPrimary();return;}var _1769=false,_176a=false,_176b=_1768[0],_176c;for(var i=0;i<_1768.length;i++){if(_1768[i].IsPrimary){if(!_1769||_1768[i].Contact.IsPrimary){_1769=_1768[i];}}if(!_176a&&_1768[i].Contact.IsPrimary){_176a=_1768[i];}}_176c=_1769||_176a||_176b;if(_176c){this._historyData.ContactId=Sage.Utility.getValue(_176c,"Contact.$key");this._historyData.ContactName=Sage.Utility.getValue(_176c,"Contact.NameLF");this._historyData.PhoneNumber=Sage.Utility.getValue(_176c,"Contact.WorkPhone");this._rebindToCurrentContact();}},failure:function(){this._rebindToCurrentContact();},scope:this});},_setContactToCurrentAccountPrimary:function(){var req=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));req.setResourceKind("accounts");var _176d=req.uri.pathSegments.length-1;var _176e=req.uri.getPathSegment(_176d);_176e["predicate"]="\""+this._historyData.AccountId+"\"";req.uri.setPathSegment(_176d+1,"Contacts");req.setQueryArg("select","NameLF,IsPrimary,WorkPhone");req.setQueryArg("orderby","IsPrimary desc");req.setQueryArg("count","1");req.read({success:function(data){var _176f=data["$resources"];if(_176f.length<1){this._rebindToCurrentContact();return;}var _1770=_176f[0];this._historyData.ContactId=Sage.Utility.getValue(_1770,"$key");this._historyData.ContactName=Sage.Utility.getValue(_1770,"NameLF");this._historyData.PhoneNumber=Sage.Utility.getValue(_1770,"WorkPhone");this._isBinding=true;this.lup_Contact.set("selectedObject",_1770);this._isBinding=false;},failure:function(){this._rebindToCurrentContact();},scope:this});},_rebindToCurrentContact:function(){this._isBinding=true;this.lup_Contact.set("selectedObject",{"$key":this._historyData.ContactId,"$descriptor":this._historyData.ContactName});this._isBinding=false;},_updateLookupSeedValues:function(_1771){var accId=_1771||this._historyData.AccountId;this.contactLookupConfig.seedValue=accId;this.opportunityLookupConfig.seedValue=accId;this.ticketLookupConfig.seedValue=accId;},_setUI:function(){this._formatHeader();this._setDisabledByTimlessValue();if(this._historyData.LeadId.trim()===""){this.rdo_Contact.set("checked",true);}else{this.rdo_Lead.set("checked",true);}this._setContactLeadVisibility();this._setScheduledByLabel();this._applySecurity();},_applySecurity:function(){if(this.mode==="New"){this._setAccessToUI(true);}else{if(this.mode==="Complete"){this._setAccessToUI(true);}else{var svc=Sage.Services.getService("CalendarSecurityService");if(svc){var _1772=_1740.getClientContextByKey("userID").trim();var _1773=this._historyData.UserId||_1772;if(_1772!==_1773){svc.hasAccess(_1773,"allowEdit",function(_1774){this._setAccessToUI(_1774);},this);}else{this._setAccessToUI(true);}}}}},_setAccessToUI:function(_1775){this._hasAccess=_1775;if((this.mode==="New")||((this.mode==="Complete"))){this.rdo_Lead.set("disabled",!_1775);this.tb_Location.set("disabled",!_1775);this.pk_Regarding.set("disabled",!_1775);this.pk_Category.set("disabled",!_1775);this.pk_Priority.set("disabled",!_1775);this.dtp_startDate.set("disabled",!_1775);this.dtp_completedDate.set("disabled",!_1775);if(!_1775){this.sel_Duration.set("disabled",true);}this.cb_Timeless.set("disabled",!_1775);this.ta_Notes.set("disabled",!_1775);this.lup_Leader.set("disabled",!_1775);this.lup_Account.set("disabled",!_1775);this.lup_Contact.set("disabled",!_1775);this.lup_Lead.set("disabled",!_1775);this.lup_Ticket.set("disabled",!_1775);this.lup_Opportunity.set("disabled",!_1775);this.tb_LeadCompanyName.set("disabled",!_1775);this.btn_OK.set("disabled",!_1775);}else{this.rdo_Lead.set("disabled",true);this.tb_Location.set("disabled",!_1775);this.pk_Regarding.set("disabled",!_1775);this.pk_Category.set("disabled",!_1775);this.pk_Priority.set("disabled",true);this.dtp_startDate.set("disabled",true);this.dtp_completedDate.set("disabled",true);this.sel_Duration.set("disabled",true);this.cb_Timeless.set("disabled",true);this.ta_Notes.set("disabled",!_1775);this.lup_Leader.set("disabled",true);this.lup_Account.set("disabled",true);this.lup_Contact.set("disabled",true);this.lup_Lead.set("disabled",true);this.lup_Ticket.set("disabled",true);this.lup_Opportunity.set("disabled",true);this.tb_LeadCompanyName.set("disabled",true);this.btn_OK.set("disabled",!_1775);}},_setUIForActivityType:function(_1776){this.pk_Regarding.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Regarding",_1776));this.pk_Category.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Category",_1776));this.pk_Result.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Result",_1776));var svc=Sage.Services.getService("CalendarSecurityService");this.btn_OK.set("disabled",false);if(svc&&this.mode!=="New"){var _1777=_1740.getClientContextByKey("userID").trim();var _1778=this._historyData.UserId||_1777;if(_1777!==_1778){svc.hasAccess(_1778,"allowEdit",function(_1779){this.btn_OK.set("disabled",!_1779);},this);}}},_setDisabledByTimlessValue:function(){if(!this._historyData){return;}var tless=this._historyData["Timeless"];this.dtp_startDate.set("displayTime",!tless);this.sel_Duration.set("disabled",tless||!this._hasAccess);},_timelessChange:function(){this._setDisabledByTimlessValue();},_descriptionChanged:function(){this._formatHeader();},_startDateChanged:function(){var _177a=this.dtp_startDate.get("value");this.sel_Duration.set("startTime",_177a);},_setContactLeadVisibility:function(){var _177b=this.rdo_Contact.get("checked");dojo.removeClass((_177b)?this.contactContainer.domNode:this.leadContainer.domNode,"display-none");dojo.addClass((_177b)?this.leadContainer.domNode:this.contactContainer.domNode,"display-none");},_formatHeader:function(){var _177c;var _177d;var _177e;var _177f;_177d=Sage.Utility.Activity.getActivityImageClass(this._historyData["Type"]||"atAppointment","small");_177c=Sage.Utility.Activity.getActivityTypeName(this._historyData["Type"]||"atAppointment");_177e=(this.mode==="New")?this.insertText:"";_177f=this._historyData["Description"]||"";if(_177f!==""){_177f=" - "+_177f;}this._dialog.set("title",dojo.string.substitute("<div class=\"Global_Images icon16x16 ${0}\" > </div>&nbsp;<span class=\"activity-dialog-title\">${1} ${2} ${3}</span>",[_177d,_177e,_177c,_177f]));},_setScheduledByLabel:function(){var _1780=Sage.Utility.Convert.toDateFromString(Sage.Utility.getValue(this._historyData,"CreateDate"));if(_1780.getFullYear()<1000){_1780=new Date();}var _1781=Sage.Utility.getValue(this._historyData,"CreateUser").trim();if(!_1781||_1740.getClientContextByKey("userID")===_1781){_1781=_1740.getClientContextByKey("userPrettyName");}else{if(_1781==="PROCESS"||_1781==="ADMIN"){_1781="Administrator";}else{this._getUserInfoFor(_1781,function(user){dojo.html.set(this.lbl_ScheduledBy,_1747.substitute(this.scheduledByFormatText,{user:user["$descriptor"],date:_1748.format(_1780,{selector:"date",fullYear:true})}));});return;}}var lbl=_1747.substitute(this.scheduledByFormatText,{user:_1781,date:_1748.format(_1780,{selector:"date",fullYear:true})});dojo.html.set(this.lbl_ScheduledBy,lbl);},_getUserInfoFor:function(_1782,_1783){var _1784=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic",false,true,true));_1784.setResourceKind("userInfo");_1784.setResourceSelector("'"+_1782+"'");_1784.setQueryArg("precedence","0");_1784.read({success:_1783,scope:this,failure:function(){}});},_okClick:function(){delete this._historyData["Notes"];delete this._historyData["UserName"];if(this.rdo_Lead.checked){delete this._historyData["ContactId"];delete this._historyData["ContactName"];delete this._historyData["AccountId"];delete this._historyData["AccountName"];delete this._historyData["LeadName"];}else{delete this._historyData["LeadId"];}if(this.mode==="New"){this._currentUserActivitySaved=true;this._historyStore.saveNewEntity(this._historyData,this._successfulHistorySave,this._failedHistorySave,this);}else{this._historyStore.save({scope:this,success:this._successfulHistorySave,failure:this._failedAHistorySave});}},_successfulHistorySave:function(_1785){this._historyData=_1785;this.historyId=_1785["$key"];var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();this._attachmentsSaved=true;if(this._attachmentList){var _1786=this._attachmentList.getNewAttachments();if(_1786.length>0&&this.mode==="New"){this._saveAttachments(_1786);this._attachmentsSaved=false;}}dojo.publish("/entity/history/change",[_1785,this]);this._historySaved=true;this._hideIfComplete();},_failedHistorySave:function(_1787){Sage.UI.Dialogs.showError(this.couldNotSaveErrorText);},_cancelClick:function(){if(this.mode==="Complete"){this._deleteClick();}else{this.hide();}},_hideIfComplete:function(){if(this._historySaved){if(this._mode!=="New"){this._doFollowup();}else{this.hide();}}},_deleteClick:function(){if(this._historyData&&this._historyStore){Sage.UI.Dialogs.raiseQueryDialogExt({title:this.deleteTitle,query:this.deleteMessage,callbackFn:function(_1788){if(_1788){this._historyStore.deleteEntity(this._historyData,this._successfulHistoryDelete,this._failedHistoryDelete,this);}},yesText:this.okText,noText:this.cancelText,icon:"questionIcon",scope:this});}},_successfulHistoryDelete:function(){var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();dojo.publish("/entity/history/delete",[this._historyData["$key"],this]);this.hide();},_failedHistoryDelete:function(_1789){var msg=_1749.findFailedRequestMessage(_1789,this.couldNotDeleteErrorText);_1746.showError(msg);},_saveAttachments:function(_178a){this._attachmentRequests=_178a.length;for(var i=0;i<_178a.length;i++){var att=_178a[i];var req=new Sage.SData.Client.SDataSingleResourceRequest(_1745.getSDataService("system"));req.setResourceKind("attachments");req.setResourceSelector("'"+att.$key+"'");att.historyId=this.historyId;for(var p in this._historyData){if(p.substring(p.length-2)==="Id"&&p!=="UserId"){var _178b=p.substring(0,1).toLowerCase()+p.substring(1);att[_178b]=this._historyData[p];}}req.update(att,{success:this._successfulAttachmentSave,failure:this._failedAttachmentSave,scope:this});}},_removeAttachments:function(){if(!this._attachmentList){return;}var _178c=this._attachmentList.getNewAttachments();for(var i=0;i<_178c.length;i++){var att=_178c[i];var req=new Sage.SData.Client.SDataSingleResourceRequest(_1745.getSDataService("system"));req.setResourceKind("attachments");req.setResourceSelector("'"+att.$key+"'");req["delete"](att,{success:function(){},failure:function(){},scope:this});}},getRelationshipsForAttachments:function(){var obj={};for(var p in this._activityData){if(p.substring(p.length-2)==="Id"&&p!=="UserId"){var _178d=p.substring(0,1).toLowerCase()+p.substring(1);obj[_178d]=this._activityData[p];}}if(this.mode==="New"&&!_174a.supportsHTML5File&&!Sage.gears){this._tempIdForAttachments=this._makeTempID();obj["historyId"]=this._tempIdForAttachments;}return obj;},_makeTempID:function(){if(!this._tempIdForAttachments){var uid=this._currentUserId;var dstr=_1740.Convert.toIsoStringFromDate(this.dtp_completedDate.get("value"));dstr=dstr.replace(/[T:-]/g,"").substr(6,6);this._tempIdForAttachments="NE"+uid.substr(uid.length-4,4)+dstr;}return this._tempIdForAttachments;},_attachmentRequests:0,_successfulAttachmentSave:function(_178e){this._attachmentRequests--;if(this._attachmentRequests<1){this._attachmentsSaved=true;}},_failedAttachmentSave:function(){this._attachmentRequests--;if(this._attachmentRequests<1){this._attachmentsSaved=true;}},_doFollowup:function(){var _178f=this.sel_Followup.get("value");switch(_178f){case this.noneText:this.hide();return;case _1749.getActivityTypeName("atPhoneCall"):_178f="atPhoneCall";break;case _1749.getActivityTypeName("atAppointment"):_178f="atAppointment";break;case _1749.getActivityTypeName("atToDo"):_178f="atToDo";break;}var _1790=this._getFollowUpActivityData();this._doingFollowup=true;this.hide("followup");window.setTimeout(function(){var svc=Sage.Services.getService("ActivityService");if(svc){svc.scheduleActivity({"type":_178f,"preConfigured":_1790});}},250);},_getFollowUpActivityData:function(){var his=this._historyData;var ret={AccountId:his.AccountId,AccountName:his.AccountName,ContactId:his.ContactId,ContactName:his.ContactName,Description:his.Description,LeadId:his.LeadId,LeadName:his.LeadName,OpportunityId:his.OpportunityId,OpportunityName:his.OpportunityName,TicketId:his.TicketId,TicketNumber:his.TicketNumber};if(this.ck_coNotes.get("checked")){ret["LongNotes"]=his.LongNotes;ret["Notes"]=his.Notes;}if(this.ck_coAttachments.get("checked")){}return ret;},createAccountLookup:function(){this.accountLookupConfig={id:"_historyAcc",structure:[{"cells":[{"name":this.accountText,"field":"AccountName"},{"name":this.cityText,"field":"Address.City"},{"name":this.stateText,"field":"Address.State"},{"name":this.mainPhoneText,"field":"MainPhone"},{"name":this.typeText,"field":"Type"},{"name":this.subTypeText,"field":"SubType"},{"name":this.statusText,"field":"Status"},{"name":this.acctMgrText,"field":"AccountManager.UserInfo.UserName"},{"name":this.ownerText,"field":"Owner.OwnerDescription"}],"defaultCell":{"sortable":true,"width":"150px","editable":false,"styles":"text-align: left;","propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""}}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"accounts",sort:[{attribute:"AccountName"}]},isModal:true,seedProperty:"",seedValue:"",overrideSeedValueOnSearch:false,initializeLookup:false,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupActText,dialogButtonText:this.okText},this.lup_Account=new Sage.UI.Controls.Lookup({id:"history_lu_account",allowClearingResult:true,config:this.accountLookupConfig,readonly:true,});this.eventConnections.push(dojo.connect(this.lup_Account,"onChange",this,"_accountChanged"));dojo.place(this.lup_Account.domNode,this.container_AccountLup.domNode,"only");},createContactLookup:function(){this.contactLookupConfig={id:"_histoyContact",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"styles":"text-align: left;","propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.nameText,field:"NameLF"},{name:this.accountText,field:"Account.AccountName"},{name:this.cityText,field:"Address.City"},{name:this.stateText,field:"Address.State"},{name:this.workphoneText,field:"WorkPhone"},{name:this.emailText,field:"Email"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"contacts",sort:[{attribute:"NameLF"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupContactText,dialogButtonText:this.okText};this.lup_Contact=new Sage.UI.Controls.Lookup({id:"history_lu_contact",allowClearingResult:true,readonly:true,config:this.contactLookupConfig,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Contact,"onChange",this,"_contactChanged"));dojo.place(this.lup_Contact.domNode,this.container_ContactLup.domNode,"only");},createOpportunityLookup:function(){this.opportunityLookupConfig={id:"_historyOpp",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"styles":"text-align: left;","propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.descriptionText,field:"Description"},{name:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{name:this.accountText,field:"Account.AccountName"},{name:this.stageText,field:"Stage"},{name:this.statusText,field:"Status"},{name:this.ownerText,field:"Owner.OwnerDescription"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"opportunities",sort:[{attribute:"Description"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupOpportunityText,dialogButtonText:this.okText};this.lup_Opportunity=new Sage.UI.Controls.Lookup({id:"history_lu_opportunity",allowClearingResult:true,readonly:true,config:this.opportunityLookupConfig,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Opportunity,"onChange",this,"_opportunityChanged"));dojo.place(this.lup_Opportunity.domNode,this.container_OppLup.domNode,"only");},createTicketLookup:function(){this.ticketLookupConfig={id:"_historyTicket",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"styles":"text-align: left;","propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.ticketNumberText,field:"TicketNumber"},{name:this.accountText,field:"Account.AccountName"},{name:this.nameText,field:"Contact.NameLF"},{name:this.phoneText,field:"Contact.WorkPhone"},{name:this.statusText,field:"StatusCode",pickListName:"",propertyType:"SalesLogix.PickList"},{name:this.urgencyText,field:"Urgency.Description"},{name:this.areaText,field:"Area"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"tickets",sort:[{attribute:"TicketNumber"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupTicketText,dialogButtonText:this.okText};this.lup_Ticket=new Sage.UI.Controls.Lookup({id:"history_lu_ticket",allowClearingResult:true,readonly:true,config:this.ticketLookupConfig,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Ticket,"onChange",this,"_ticketChanged"));dojo.place(this.lup_Ticket.domNode,this.container_TicketLup.domNode,"only");},createLeadLookup:function(){this.leadLookupConfig={id:"_historyLead",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.nameText,field:"LeadFullName"},{name:this.companyText,field:"Company"},{name:this.cityText,field:"Address.City"},{name:this.stateText,field:"Address.State"},{name:this.postalText,field:"Address.PostalCode"},{name:this.statusText,field:"Status"},{name:this.workphoneText,field:"WorkPhone"},{name:this.ownerText,field:"Owner.OwnerDescription"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"leads",sort:[{attribute:"LeadFullName"}]},isModal:true,initialLookup:false,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupLeadText,dialogButtonText:this.okText};this.lup_Lead=new Sage.UI.Controls.Lookup({id:"history_lu_lead",allowClearingResult:true,readonly:true,config:this.leadLookupConfig,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Lead,"onChange",this,"_leadChanged"));dojo.place(this.lup_Lead.domNode,this.container_LeadLup.domNode,"only");},createLeaderLookup:function(){var _1791={id:"_historyLeader",structure:[{cells:[{name:this.nameText,field:"Name",sortable:true,width:"400px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""}]}],gridOptions:{contextualCondition:function(){return "AllowAdd AND (AccessId eq '"+_1740.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'";},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupLeaderText,dialogButtonText:this.okText};this.lup_Leader=new Sage.UI.Controls.Lookup({id:"history_lu_leader",readonly:true,config:_1791});this.eventConnections.push(dojo.connect(this.lup_Leader,"onChange",this,"_leaderChanged"));dojo.place(this.lup_Leader.domNode,this.container_LeaderLup.domNode,"only");},_updateLocation:function(_1792,isAdd){var _1793=this._historyData.Location;if(!_1793||_1793===""){if(isAdd){_1793=_1792;}}else{var parts=_1793.split("; ");var _1794=[];var _1795=false;for(var i=0;i<parts.length;i++){if(parts[i]===_1792){if(isAdd){_1795=true;}else{continue;}}_1794.push(parts[i]);}if(!_1795&&isAdd){_1794.push(_1792);}_1793=_1794.join("; ");}Sage.Utility.setValue(this._historyData,"Location",_1793);this.tb_Location.set("value",_1793);},_formatDateForQuery:function(d){return ["'",d.getUTCFullYear(),"-",d.getUTCMonth()+1,"-",d.getUTCDate(),"'"].join("");}});return _174f;});},"Sage/Data/SDataStore":function(){define("Sage/Data/SDataStore",["dojo/_base/declare","dojo/_base/lang"],function(_1796,lang){var _1797=_1796("Sage.Data.SDataStore",null,{executeReadWith:"read",sort:null,where:null,select:null,include:null,request:null,queryName:null,resourceKind:null,resourcePredicate:null,collection:"$resources",expandRecurrences:null,constructor:function(o){lang.mixin(this,o);this.features={"dojo.data.api.Read":true};},_expandExpression:function(_1798){if(typeof _1798==="function"){return _1798.apply(this,Array.prototype.slice.call(arguments,1));}else{return _1798;}},_createRequest:function(_1799){var sort=this._expandExpression(_1799.sort||this.sort),query="",_179a=this._expandExpression(_1799.select||this.select),_179b=this._expandExpression(_1799.include||this.include),_179c=this._expandExpression(_1799.request||this.request);if(_1799.query){if(this.where){query=this._expandExpression(this.where+" and ("+_1799.query+" )");}else{query=this._expandExpression(_1799.query);}}else{query=this._expandExpression(this.where);}if(_179c){_179c=_179c.clone();}else{var _179d=this._expandExpression(_1799.queryName||this.queryName),_179e=this._expandExpression(_1799.resourceKind||this.resourceKind),_179f=this._expandExpression(_1799.resourcePredicate||this.resourcePredicate);_179c=_179d?new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(_179d):new Sage.SData.Client.SDataResourceCollectionRequest(this.service);if(_179e){_179c.setResourceKind(_179e);}if(_179f){_179c.getUri().setCollectionPredicate(_179f);}}if(_179a&&_179a.length>0){_179c.setQueryArg("select",_179a.join(","));}if(_179b&&_179b.length>0){_179c.setQueryArg("include",_179b.join(","));}if(query){_179c.setQueryArg("where",query);}if(sort&&sort.length>0){var order=[];dojo.forEach(sort,function(v){if(v.descending){this.push(v.attribute+" desc");}else{this.push(v.attribute);}},order);_179c.setQueryArg("orderby",order.join(","));}if(typeof _1799.start!=="undefined"){_179c.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,_1799.start+1);}if(typeof _1799.count!=="undefined"){_179c.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.Count,_1799.count);}if(this.expandRecurrences!==null){_179c.uri.queryArgs["_expandRecurrences"]=this.expandRecurrences;}return _179c;},fetch:function(_17a0){var _17a1=this._createRequest(_17a0),_17a2=lang.mixin({},_17a0);var _17a3=_17a1[this.executeReadWith]({success:lang.hitch(this,this._onFetchSuccess,_17a0,_17a2),failure:lang.hitch(this,this._onFetchFailure,_17a0,_17a2),httpMethodOverride:_17a0.queryOptions&&_17a0.queryOptions["httpMethodOverride"]});_17a2["abort"]=lang.hitch(this,this._abortRequest,_17a3);return _17a2;},_abortRequest:function(_17a4){this.service.abortRequest(_17a4);},_onFetchSuccess:function(_17a5,_17a6,_17a7){if(_17a7){if(_17a7["$resources"]){_17a6["feed"]=_17a7["$resources"];}else{_17a6["entry"]=_17a7;}var items=lang.getObject(this.collection,false,_17a7)||[_17a7],size=_17a7["$resources"]?_17a7["$totalResults"]||-1:1;if(_17a5.onBegin){_17a5.onBegin.call(_17a5.scope||this,size,_17a6);}if(_17a5.onItem){for(var i=0;i<items.length;i++){_17a5.onItem.call(_17a5.scope||this,items[i],_17a6);}}if(_17a5.onComplete){_17a5.onComplete.call(_17a5.scope||this,_17a5.onItem?null:items,_17a6);}}else{if(_17a5.onError){_17a5.onError.call(_17a5.scope||this,"invalid feed",_17a5);}}},_onFetchFailure:function(_17a8,_17a9,_17aa,_17ab){if(_17a8.onError){_17a8.onError.call(_17a8.scope||this,_17aa.responseText,_17a8);}},getValue:function(item,_17ac,_17ad){var value=lang.getObject(_17ac,false,item);return typeof value==="undefined"?_17ad:value;},getFeatures:function(){return this.features;}});return _1797;});},"Sage/Data/main":function(){define("Sage/Data/main",["Sage/Data/BaseSDataStore","Sage/Data/GroupLayoutSingleton","Sage/Data/WritableStore","Sage/Data/ProxySDataStore","Sage/Data/QBTreeStoreModel","Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","Sage/Data/SingleEntryPropertySDataStore","Sage/Data/SingleEntrySDataStore","Sage/Data/SummaryViewDataManager","Sage/Data/WritableSDataStore"],function(){});},"Sage/QuickForms/Design/Editors/nls/CurrencyAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/CurrencyAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_17ae,lang){var nls={root:{titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",decimalDigitsText:"Decimal Digits:",decimalDigitsTooltipText:"The number of digits after the decimal to display and allow for data entry.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayCurrencyCodeText:"Display Exchange Rate Code:",displayCurrencyCodeTooltipText:"Show the three character currency code when multi-currency is enabled.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",exchangeRateTypeText:"Exchange Rate Type:",exchangeRateTypeTooltipText:"Type of exchange rate to show in currency fields.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",displayTypeText:{AsHyperlink:"As Hyperlink",AsControl:"As Control",AsText:"As Text"},exchangeTypeText:{BaseRate:"Base Rate",OpportunityRate:"Opportunity Rate (Deprecated)",MyRate:"My Rate",SalesOrderRate:"Sales Order Rate (Deprecated)",EntityRate:"Entity Rate"},labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"}}};return lang.mixin(_17ae,nls);});},"Sage/UI/nls/SLXPreviewGrid":function(){define("Sage/UI/nls/SLXPreviewGrid",["Sage/LanguageList","dojo/_base/lang"],function(_17af,lang){var nls={root:{applyText:"Apply",resetText:"Reset",filterText:"Filter"}};return lang.mixin(_17af,nls);});},"Sage/Groups/GroupContextService":function(){define("Sage/Groups/GroupContextService",["Sage/Utility","dojo/string","Sage/Data/SDataServiceRegistry","dojo/ready","dojo/_base/lang","dojo/_base/declare","dojo/_base/array"],function(_17b0,_17b1,_17b2,ready,lang,_17b3,array){var _17b4=_17b3("Sage.Groups.GroupContextService",null,{_adHocGroupList:null,_connects:null,_subscribes:null,_emptyContext:null,_currentRequestHandle:null,_isAdHocGroupListRetrieved:false,constructor:function(){this._connects=[];this._subscribes=[];this._adHocGroupList=[];this._emptyContext={DefaultGroupID:null,CurrentGroupID:null,CurrentTable:null,CurrentName:null,CurrentEntity:null,CurrentFamily:null};this._isAdHocGroupListRetrieved=false;this._subscribes.push(dojo.subscribe(_17b1.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh));ready(lang.hitch(this,function(){if(!this.isContextRequired()){var _17b5=_17b0.getValue(window,"Sage.Groups._groupContext"),_17b6=_17b0.getValue(window,"Sage.UI.DataStore.Filters");if(_17b6){if(_17b5["AppliedFilterInfo"]){_17b6["default"]=this.createFilterExtendedSet(_17b5["AppliedFilterInfo"]);}}}if(this.isContextRequired()){this.requestContext();}}));},createFilterExtendedSet:function(_17b7){var _17b8=_17b7["definitionSet"]||[],_17b9=_17b7["applied"]||[],_17ba={},_17bb={},_17bc,_17bd,i,j,value;for(i=0;i<_17b8.length;i++){_17bc=_17b8[i];_17bd={"$key":_17bc["id"],"$partial":true,"filterName":_17bc["filterName"],"displayName":_17bc["displayName"],"propertyName":_17bc["propertyName"],"propertyDataTypeId":_17bc["propertyDataTypeId"],"details":{}};if(_17bc["filterType"]=="rangeFilter"){_17bd["details"]["rangeFilter"]={"characters":_17bc["characters"]};}else{_17bd["details"]["distinctFilter"]={};}_17ba[_17bc["id"]]=_17bd;}for(i=0;i<_17b9.length;i++){_17bc=_17b9[i];_17bd={};for(j=0;j<_17bc["rangeValues"].length;j++){value=_17bc["rangeValues"][j];_17bd[value["rangeName"]]=lang.mixin({},value);}for(j=0;j<_17bc["distinctValues"].length;j++){value=_17bc["distinctValues"][j];if(typeof value==="string"){_17bd[value]=value;}}_17bb[_17bc["id"]]=_17bd;}return {"definitionSet":_17ba,"applied":_17bb};},destroy:function(){array.forEach(this._connects,function(_17be){dojo.disconnect(_17be);});this.unsubscribeConnects();this.uninitialize();},unsubscribeConnects:function(){array.forEach(this._subscribes,function(_17bf){dojo.unsubscribe(_17bf);});},uninitialize:function(){},isContextRequired:function(){var _17c0=!(Sage&&Sage.Groups&&Sage.Groups._groupContext);return _17c0;},createCompatibleContext:function(_17c1){if(_17c1["currentGroupId"]=="LOOKUPRESULTS"){_17c1["currentName"]="Lookup Results";}var _17c2={"AppliedFilterInfo":_17c1["appliedFilterInfo"],"ContainsPositionState":_17c1["containsPositionState"],"CurrentDisplayName":_17c1["currentDisplayName"],"CurrentEntity":_17c1["currentEntity"],"CurrentEntityID":_17c1["currentEntityId"],"CurrentEntityPosition":_17c1["currentEntityPosition"],"CurrentFamily":_17c1["currentFamily"],"CurrentGroupCount":_17c1["currentGroupCount"],"CurrentGroupID":_17c1["currentGroupId"],"CurrentName":_17c1["currentName"],"CurrentTable":_17c1["currentTable"],"CurrentTableKeyField":_17c1["currentTableKeyField"],"DefaultGroupID":_17c1["defaultGroupId"],"FirstEntityID":_17c1["firstEntityId"],"LastEntityID":_17c1["lastEntityId"],"LookupLayoutGroupName":_17c1["lookupLayoutGroupName"],"NextEntityID":_17c1["nextEntityId"],"PreviousEntityID":_17c1["previousEntityId"],"RetrievedOn":_17c1["retrievedOn"],"isAdhoc":_17c1["isAdHoc"]};if(!_17c1["appliedFilterInfo"]){delete _17c2.AppliedFilterInfo;}return _17c2;},_onDefaultFilterRefresh:function(_17c3,_17c4,_17c5){var _17c6=this.getContext(),_17c7=_17b2.getSDataService("system"),entry={"$name":"applyFilterToGroup","request":{"groupId":_17c6["CurrentGroupID"],"filter":dojo.toJson(_17c5.createValueSet())}};if((_17c6["CurrentGroupID"]===null)||(_17c6["CurrentGroupID"]==="")){return;}var _17c8=new Sage.SData.Client.SDataServiceOperationRequest(_17c7).setOperationName("applyFilterToGroup");_17c8.execute(entry,{});},getContext:function(){var _17c9=Sage&&Sage.Groups&&Sage.Groups._groupContext;if(_17c9){return _17c9;}if(this.isContextRequired()){this.requestContext();}return this._emptyContext;},requestContext:function(_17ca){if(this._currentRequestHandle){return;}var _17cb=_17b2.getSDataService("system"),_17cc=new Sage.SData.Client.SDataServiceOperationRequest(_17cb).setOperationName("getGroupContext");this._currentRequestHandle=_17cc.execute({},{success:this._onRequestContextSuccess,failure:this._onRequestContextFailure,scope:this});},_onRequestContextSuccess:function(entry){var _17cd=entry&&entry["response"];if(_17cd){this.setContext(this.createCompatibleContext(_17cd));}this._currentRequestHandle=null;},_onRequestContextFailure:function(_17ce,o){this._currentRequestHandle=null;},setContext:function(_17cf){var _17d0=Sage&&Sage.Groups;if(_17d0&&_17cf){lang.mixin(_17d0._groupContext,_17cf);this.onContextSet(_17d0._groupContext);}},setCurrentGroup:function(_17d1,_17d2){var _17d3=this.getContext();if(_17d3&&(_17d3["CurrentGroupID"]===_17d1)){if(_17d1==="LOOKUPRESULTS"){_17d3["currentName"]="Lookup Results";this.onCurrentGroupChanged({current:_17d3});}return;}if(_17d1.length===12||_17d1==="LOOKUPRESULTS"){var _17d4=_17b2.getSDataService("system"),_17d5=new Sage.SData.Client.SDataServiceOperationRequest(_17d4).setOperationName("setGroupContext"),entry={request:{"currentGroupId":_17d1,"currentName":"","currentFamily":""}};_17d5.execute(entry,{success:this._onSetContextRequestSuccess,failure:this._onSetContextRequestFailure,scope:this});}},_onSetContextRequestSuccess:function(entry){var _17d6=entry&&entry["response"],_17d7=_17d6&&this.createCompatibleContext(_17d6);if(_17d7){this.setContext(_17d7);}this.onCurrentGroupChanged({current:_17d7});},_onSetContextRequestFailure:function(_17d8,o){},onSuccessfulGroupChanged:function(data){var _17d9=this.getContext();this.setContext(data);this.onCurrentGroupChanged({current:data,previous:_17d9});},onCurrentGroupChanged:function(_17da){dojo.publish("/group/context/changed",[_17da,this]);if(_17da["current"]["AppliedFilterInfo"]){this.publishFiltersApplied(_17da["current"]["AppliedFilterInfo"]);}},publishFiltersApplied:function(_17db){if(_17db){ready(lang.hitch(this,function(){var _17dc=this.createFilterExtendedSet(_17db),_17dd=_17b0.getValue(window,"Sage.UI.DataStore.Filters");_17dd["default"]=_17dc;dojo.publish("/ui/filters/default/apply",[_17dc["applied"],_17dc["definitionSet"],this]);}));}},onContextSet:function(_17de){if(_17de&&_17de["AppliedFilterInfo"]){this.publishFiltersApplied(_17de["AppliedFilterInfo"]);}},getAdHocGroupList:function(_17df,_17e0){if(this._isAdHocGroupListRetrieved){_17df.call(_17e0||this,this._adHocGroupList);return;}var store=new Sage.Data.BaseSDataStore({service:_17b2.getSDataService("system"),resourceKind:"groups",include:[],select:["name","family","isHidden","isAdHoc","mainTable","keyField","entityName"]});Sage.Groups._groupContext.CurrentFamily=Sage.Groups._groupContext.CurrentFamily.toUpperCase();store.fetch({query:dojo.string.substitute("upper(family) eq '${CurrentFamily}' and isAdHoc",Sage.Groups._groupContext),count:1000,sort:[{attribute:"name"}],start:0,onComplete:function(data){this._adHocGroupList=data;_17df.call(_17e0||this,this._adHocGroupList);this._isAdHocGroupListRetrieved=true;},scope:this});}});Sage.Services.addService("ClientGroupContext",new _17b4());return _17b4;});},"Sage/UI/Alarms/nls/UnconfirmedPane":function(){define("Sage/UI/Alarms/nls/UnconfirmedPane",["Sage/LanguageList","dojo/_base/lang"],function(_17e1,lang){var nls={root:{showConfirmationsText:"Show Confirmations",showCalendarText:"Show Calendar",acceptText:"Accept",declineText:"Decline"}};return lang.mixin(_17e1,nls);});},"Sage/_ActionMixin":function(){define("Sage/_ActionMixin",["dojo/NodeList-traverse","dojo/_base/declare"],function(_17e2,_17e3){var _17e4=_17e3("Sage._ActionMixin",null,{actionsFrom:"click",postCreate:function(){dojo.forEach(this.actionsFrom.split(","),function(event){this.connect(this.domNode,event,this._initiateActionFromEvent);},this);},_isValidElementForAction:function(el){var _17e5=this.domNode.contains?this.domNode!=el&&this.domNode.contains(el):!!(this.domNode.compareDocumentPosition(el)&&16);return (this.domNode===el)||_17e5;},_initiateActionFromEvent:function(evt){var el=dojo.query(evt.target).closest("[data-action]")[0],_17e6=el&&dojo.attr(el,"data-action");if(_17e6&&this._isValidElementForAction(el)&&this._hasAction(_17e6,evt,el)){var _17e7=this._getParametersForAction(_17e6,evt,el);this._invokeAction(_17e6,_17e7,evt,el);dojo.stopEvent(evt);}},_getParametersForAction:function(name,evt,el){var _17e8={$event:evt,$source:el};for(var i=0,_17e9=el.attributes.length;i<_17e9;i++){var _17ea=el.attributes[i].name;if(/^((?=data-action)|(?!data))/.test(_17ea)){continue;}var _17eb=_17ea.substr("data-".length).replace(/-(\w)(\w+)/g,function($0,$1,$2){return $1.toUpperCase()+$2;});_17e8[_17eb]=dojo.attr(el,_17ea);}return _17e8;},_hasAction:function(name,evt,el){return (typeof this[name]==="function");},_invokeAction:function(name,_17ec,evt,el){return this[name].apply(this,[_17ec,evt,el]);}});return _17e4;});},"Sage/Services/ClientContextService":function(){define("Sage/Services/ClientContextService",["dojo/_base/declare"],function(_17ed){var _17ee=_17ed("Sage.Services.ClientContextService",null,{contextDataFieldId:false,_items:[],_watches:[],constructor:function(opts){dojo.mixin(this,opts);this.load();},_toItemLiteral:function(key,value){var _17ef={};_17ef.itemKey=key;_17ef.itemVal=value;return _17ef;},_indexOf:function(key){for(var i=0;i<this._items.length;i++){if(this._items[i].itemKey==key){return i;}}return -1;},_indexOfNoCase:function(key){for(var i=0;i<this._items.length;i++){if(this._items[i].itemKey.toUpperCase()==key.toUpperCase()){return i;}}return -1;},_throwKeyNotFound:function(key){throw "Entry Not Found: "+key;},_throwDuplicateKey:function(key){throw "Entry Already Exists: "+key;},add:function(key,value){if(this._indexOf(key)===-1){var lit=this._toItemLiteral(key,value);this._items.push(lit);this.save();}else{this._throwDuplicateKey(key);}},remove:function(key){var index=this._indexOf(key);if(index!==-1){this._items.splice(index,1);this.save();}},setValue:function(key,value){var index=this._indexOf(key);if(index!==-1){this._items[index].itemVal=value;this.save();}else{this._throwKeyNotFound(key);}},getValue:function(key){var index=this._indexOf(key);if(index!==-1){return decodeURIComponent(this._items[index].itemVal);}else{this._throwKeyNotFound(key);}},getValueEx:function(key,_17f0){var index;if(_17f0){index=this._indexOfNoCase(key);}else{index=this._indexOf(key);}if(index!==-1){return decodeURIComponent(this._items[index].itemVal);}else{this._throwKeyNotFound(key);}},clear:function(){this._items=[];this.save();},containsKey:function(key){return (this._indexOf(key)!==-1);},containsKeyEx:function(key,_17f1){if(_17f1){return (this._indexOfNoCase(key)!==-1);}else{return (this._indexOf(key)!==-1);}},getCount:function(){return this._items.length;},hasKeys:function(){return this._items.length===0;},getKeys:function(){var _17f2=[];for(i=0;i<this._items.length;i++){_17f2.push(this._items[i].itemKey);}return _17f2;},valueAt:function(index){if(this._items[index]){return decodeURIComponent(this._items[index].itemVal);}else{return null;}},keyAt:function(index){this.load();if(this._items[index]){return this._items[index].itemKey;}else{return null;}},getValues:function(){var _17f3=[];for(i=0;i<this._items.length;i++){_17f3.push(decodeURIComponent(this._items[i].itemVal));}return _17f3;},save:function(hours){var data=document.getElementById(this.contextDataFieldId);if(data){data.value=this.toString();}else{alert("can't find context data field");}},load:function(){var data=document.getElementById(this.contextDataFieldId);if(data){if(data.value){this.fromString(data.value);}}},toString:function(){var str="";for(i=0;i<this._items.length;i++){str+=this._items[i].itemKey+"="+encodeURIComponent(this._items[i].itemVal);if(i!==this._items.length-1){str+="&";}}return str;},fromString:function(_17f4){this._items=[];if(_17f4!=""){var items=_17f4.split("&");for(i=0;i<items.length;i++){var pair=items[i].split("=");this._items.push(this._toItemLiteral(pair[0],decodeURIComponent(pair[1])));}}this.save();}});return _17ee;});},"Sage/QuickForms/Design/TextBoxControlDesigner":function(){define("Sage/QuickForms/Design/TextBoxControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/TextBoxControlDesigner"],function(_17f5,array,lang,_17f6,_17f7,_17f8,_17f9,_17fa,_17fb,_17fc,_17fd){return _17f5("Sage.QuickForms.Design.TextBoxControlDesigner",[_17f7,_17f8,_17f6,_17f9],{designSupport:{visible:true},editors:[_17fb,_17fc,_17fa],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-textbox",helpTopicName:"Textbox_control",quickFormControlType:"Sage.Platform.QuickForms.Controls.QFTextBox, Sage.Platform.QuickForms",displayNameText:"TextBox",constructor:function(){lang.mixin(this,_17fd);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_17fe){return (_17fe["ControlItemName"]=="Text");});},_getLinesAttr:function(){return lang.getObject("Lines",false,this.entry);},_setLinesAttr:function(value){lang.setObject("Lines",value,this.entry);},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getMaxLengthAttr:function(){return lang.getObject("MaxLength",false,this.entry);},_setMaxLengthAttr:function(value){lang.setObject("MaxLength",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},setupFor:function(_17ff){this.inherited(arguments);this.set("lines",1);this.set("maxLength",parseInt(_17ff["data"].length,10)||-1);this.set("required",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Text",DataItemName:_17ff.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_17ff.propertyPath||"");},startup:function(){this.inherited(arguments);var _1800=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_1800&&_1800["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"url:Sage/UI/Controls/templates/PersonName.html":"<!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n-->\r\n<div>\r\n        <table width=\"100%\">\r\n            <tr>\r\n                <td><label>{%= $.prefixText %}</label></td>\r\n                <td>\r\n                    <select id=\"{%= $.id %}-Prefix\" data-dojo-type=\"Sage.UI.Controls.DropDownSelectPickList\" \r\n                    dojoAttachPoint=\"_valueBox\"\r\n                    pickListName=\"Name Prefix\"\r\n                    storeMode=\"text\"\r\n                    name=\"{%= $.NamePrefix %}\" \r\n                    style=\"width: 150px;display: inline-block\"\r\n                    shouldPublishMarkDirty=\"false\" />\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameFirstText %}</label></td>\r\n                <td>\r\n                    <input id=\"{%= $.id %}-First\" data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                    style=\"width:inherit;\"\r\n                    textAlign=\"{%= $.textAlign %}\"\r\n                    name=\"{%= $.NameFirst %}\" type=\"text\" data-dojo-attach-point=\"focusNode\"\r\n                    shouldPublishMarkDirty=\"false\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameMiddleText %}</label></td>\r\n                <td>\r\n                    <input id=\"{%= $.id %}-Middle\" data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                    style=\"width:inherit;\"\r\n                    textAlign=\"{%= $.textAlign %}\"\r\n                    name=\"{%= $.NameMiddle %}\" type=\"text\" data-dojo-attach-point=\"focusNode\"\r\n                    shouldPublishMarkDirty=\"false\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameLastText %}</label></td>\r\n                <td>\r\n                    <input id=\"{%= $.id %}-Last\" data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                    style=\"width:inherit;\"\r\n                    textAlign=\"{%= $.textAlign %}\"\r\n                    name=\"{%= $.NameLast %}\" type=\"text\" data-dojo-attach-point=\"focusNode\"\r\n                    shouldPublishMarkDirty=\"false\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.suffixText %}</label></td>\r\n                <td>\r\n                    <select id=\"{%= $.id %}-Suffix\" data-dojo-type=\"Sage.UI.Controls.DropDownSelectPickList\"\r\n                    dojoAttachPoint=\"_valueBox\"\r\n                    pickListName=\"Name Suffix\"\r\n                    storeMode=\"text\"\r\n                    name=\"{%= $.NameSuffix %}\"\r\n                    style=\"width: 150px;display: inline-block\"\r\n                    shouldPublishMarkDirty=\"false\" />\r\n                </td>\r\n            </tr>\r\n        </table>                    \r\n        <div class=\"button-bar alignright\" style=\"clear: both\">\r\n            <button id=\"{%= $.id %}-OKButton\" data-dojo-type=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId('{%= $.id %}')._okClicked();\">\r\n                {%= $.okText %}\r\n            </button>\r\n            <button id=\"{%= $.id %}-CancelButton\" data-dojo-type=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId('{%= $.id %}')._cancelClicked();\">\r\n                {%= $.cancelText %}\r\n            </button>\r\n        </div>\r\n</div>\r\n","Sage/Utility/File/DragDropWatcher":function(){define("Sage/Utility/File/DragDropWatcher",["Sage/UI/Dialogs","Sage/Utility/File","dojo/string","dojo/i18n!./nls/DragDropWatcher"],function(_1801,_1802,_1803,_1804){Sage.namespace("Utility.File.DragDropWatcher");Sage.Utility.File.DragDropWatcher={gearsDesktop:false,allowdDetailDrop:false,allowdListDrop:false,init:function(_1805){Sage.Utility.File.DragDropWatcher.allowdDetailDrop=_1805.allowDetailDragDrop;Sage.Utility.File.DragDropWatcher.allowdListDrop=_1805.allowListDragDrop;if(Sage.gears){this.desktop=Sage.gears.factory.create("beta.desktop");if(dojo.isIE){dojo.connect(dojo.body(),"ondragenter",this.handleGearsDragEnter);dojo.connect(dojo.body(),"ondragover",this.handleGearsDragOver);dojo.connect(dojo.body(),"ondragleave",this.handleGearsDragLeave);if(dojo.isIE<9){dojo.connect(dojo.body(),"ondrop",this.handleGearsFileDrop);}else{dojo.body().attachEvent("ondrop",this.handleGearsFileDrop);}}else{dojo.connect(dojo.body(),"dragenter",this.handleGearsDragEnter);dojo.connect(dojo.body(),"dragover",this.handleGearsDragOver);dojo.connect(dojo.body(),"dragleave",this.handleGearsDragLeave);dojo.connect(dojo.body(),"drop",this.handleGearsFileDrop);}}else{if(_1802.supportsHTML5File){dojo.connect(dojo.body(),"dragenter",this.handleDragEnter);dojo.connect(dojo.body(),"dragover",this.handleDragOver);dojo.connect(dojo.body(),"dragleave",this.handleDragLeave);dojo.connect(dojo.body(),"drop",this.handleFileDrop);}else{if(dojo.isIE){dojo.connect(dojo.body(),"ondragenter",this.handleGearsDragEnter);dojo.connect(dojo.body(),"ondragover",this.handleGearsDragOver);dojo.connect(dojo.body(),"ondragleave",this.handleGearsDragLeave);if(dojo.isIE<9){dojo.connect(dojo.body(),"ondrop",this.handleFileDropNotSupported);}else{dojo.body().attachEvent("ondrop",this.handleFileDropNotSupported);}}else{dojo.connect(dojo.body(),"dragenter",this.handleDragEnter);dojo.connect(dojo.body(),"dragover",this.handleDragOver);dojo.connect(dojo.body(),"dragleave",this.handleDragLeave);dojo.connect(dojo.body(),"drop",this.handleFileDropNotSupported);}}}},handleDragEnter:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleDragLeave:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleDragOver:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleFileDrop:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,true);var allow=Sage.Utility.File.DragDropWatcher._AllowDragDrop();if(!allow){return;}var files=e.dataTransfer.files;if(files&&files.length>0){if(_1802.isFileSizeAllowed(files)){Sage.Utility.File.DragDropWatcher.onFilesDropped(files,e.target);}}else{if(Sage.gears){var _1806=Sage.gears.factory.create("beta.desktop");var data=_1806.getDragData(e,"application/x-gears-files");files=data&&data.files;if(files&&files.length>0){if(_1802.isFileSizeAllowed(files)){Sage.Utility.File.DragDropWatcher.onFilesDropped(files,e.target);}}}}},finishDrag:function(e,_1807){var evt=e||window.event;if(!evt||typeof evt==="undefined"){return;}if(typeof (this.desktop)!=="undefined"){this.desktop.setDropEffect(evt,"copy");}if(dojo.isFF){if(_1807||_1802.supportsHTML5File){evt.stopPropagation();evt.preventDefault();}}else{if(dojo.isIE||dojo.isSafari||dojo.isChrome){if(!_1807){if(typeof evt.stopPropagation==="function"){evt.stopPropagation();}if(typeof evt.preventDefault==="function"){evt.preventDefault();}else{evt.returnValue=false;}}}}},handleGearsDragEnter:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleGearsDragLeave:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleGearsDragOver:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleGearsFileDrop:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,true);var allow=Sage.Utility.File.DragDropWatcher._AllowDragDrop();if(!allow){return;}var data=Sage.Utility.File.DragDropWatcher.desktop.getDragData(e,"application/x-gears-files");var _1808=e.target;if(!_1808){_1808=e.srcElement;}var files=data&&data.files;if(files&&files.length>0){if(Sage.Utility.File.isFileSizeAllowed(files)){Sage.Utility.File.DragDropWatcher.onFilesDropped(files,_1808);}}},onFilesDropped:function(files,_1809){},_AllowDragDrop:function(){var _180a=Sage.Utility.getPageName();var _180b=Sage.Utility.getModeId();if(_180b!=="detail"){var _180c=Sage.Services.getService("ClientEntityContext");if(_180c){var _180d=_180c.getContext();if(_180d){if(_180d.EntityType==="Sage.Entity.Interfaces.IActivity"){return true;}if(_180d.EntityType==="Sage.Entity.Interfaces.IHistory"){return true;}}}_180a=_180a.substring(0,_180a.indexOf("."));if(_180a==="Library"){return true;}if(Sage.Utility.File.DragDropWatcher.allowdListDrop){return true;}return false;}else{if(Sage.Utility.File.DragDropWatcher.allowdDetailDrop){return true;}return false;}},handleFileDropNotSupported:function(e){var _180e=_1804.query0||"The feature you are requesting requires the Sage SalesLogix Desktop <br> Integration Module.";var _180f=_1804.query1||"Find out more...";var _1810=_1804.query2||"Would you like to install this feature now?";var _1811=_1804.query3||"Note: This module can be installed at any time from the logon or options pages.";var url=Sage.Link.getHelpUrl("desktopintegration");var html=_1803.substitute("<table><tr><td><span> ${0} <a href=\"${1}\">${2}</a><br><br>${3}<br><br><font style=\"font-style:italic\">${4}<font></span></td></tr></table>",[_180e,url,_180f,_1810,_1811]);var _1812={title:"Sage SalesLogix",query:html,callbackFn:function(_1813){if(_1813){Sage.installDesktopFeatures();}},yesText:null,noText:null,icon:"infoIcon",showNoButton:true};_1801.raiseQueryDialogExt(_1812);}};return Sage.Utility.File.DragDropWatcher;});},"Sage/UI/Columns/Currency":function(){define("Sage/UI/Columns/Currency",["dojo/_base/declare","dojo/json","Sage/Data/SDataServiceRegistry","Sage/Utility/_LocalStorageMixin","Sage/Utility","dojo/_base/lang","dojox/grid/cells/dijit"],function(_1814,json,_1815,_1816,_1817,lang){var _1818=_1814("Sage.UI.Columns.Currency",dojox.grid.cells._Widget,{widgetClass:Sage.UI.Controls.Currency,exchangeRateLoaded:false,constructor:function(o){if(this.multiCurrency&&!this.exchangeRateLoaded){var _1819=Sage.Services.getService("SystemOptions");if(_1819){_1819.get("BaseCurrency",function(val){this.exchangeRateLoaded=true;this.currentCode=val;var _181a=Sage.Services.getService("ExchangeRateLoader");if(_181a){_181a.requestExchangeRate(this.getExchangeRate,this);}},function(){if(typeof console!=="undefined"){console.error("Unable to determine SystemOptions.BaseCurrency.");}},this);}else{if(typeof console!=="undefined"){console.error("Unable to load the SystemOptions service.");}}}},getExchangeRate:function(data){this.exchangeRate=data.Rate;},getWidgetProps:function(_181b){var _181c=this.getControlId();return dojo.mixin({},this.widgetProps||{},{id:_181c,value:_181b,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field,constraints:this.constraints,name:this.name,sortable:this.sortable,editable:this.editable,required:this.required,displayMode:this.displayMode,displayCurrencyCode:this.displayCurrencyCode,multiCurrency:this.multiCurrency,currentCode:this.currentCode,exchangeRate:this.exchangeRate,currentUICulture:this.currentUICulture,textAlign:this.getAlignment()});},getAlignment:function(){var _181d="right";_181d=(this.cellClasses.indexOf("aligncenter")>-1)?"center":_181d;_181d=(this.cellClasses.indexOf("alignleft")>-1)?"left":_181d;return _181d;},formatNode:function(_181e,_181f,_1820){if(!this.widgetClass){return _181f;}if(this.multiCurrency){_181f=_181f*this.exchangeRate;}var _1821=dijit.byId(this.getControlId());if(!_1821){this.widget=this.createWidget.apply(this,arguments);}else{this.widget=_1821;if(_1821.value!==_181f||this.widget.focusNode.value!==_181f){this.widget.focusNode.attr("value",_181f);}this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(_1820);this.grid.scroller.rowHeightChanged(_1820,true);this.focus();return undefined;},formatter:function(_1822,_1823){var _1824=this.grid.getItem(_1823);var _1825="";this.decimalDigit=(this.constraints&&this.constraints.places)?this.constraints.places:Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalDigits;if(!this.multiCurrency){_1825=dojo.currency.format(_1822,{currency:[Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol],locale:Sys.CultureInfo.CurrentCulture.name,places:this.decimalDigit});_1825=_1825.replace(Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol,"");}else{if(this.exchangeRateType=="EntityRate"&&_1817.getModeId()!=="insert"){var _1826=this.exchangeRateField.split(".");var _1827=_1824;for(i=0;i<_1826.length;i++){if(_1827){_1827=_1827[_1826[i]];}else{_1827=_1817.getClientContextByKey(this.exchangeRateType);}}var _1828=this.exchangeRateCodeField.split(".");var _1829=_1824;for(i=0;i<_1828.length;i++){if(_1829){_1829=_1829[_1828[i]];}else{_1829=_1817.getClientContextByKey([this.exchangeRateType,"Code"].join(""));}}this.exchangeRate=_1827;this.currentCode=_1829;}else{if(this.exchangeRateType==="MyRate"){this.exchangeRate=_1817.getClientContextByKey(this.exchangeRateType);this.currentCode=_1817.getClientContextByKey([this.exchangeRateType,"Code"].join(""));}}_1822=_1822*this.exchangeRate;_1825=dojo.currency.format(_1822,{currency:[],locale:Sys.CultureInfo.CurrentCulture.name,places:this.decimalDigit});_1825=[_1825,"   ",this.currentCode].join("");}if(this.abbreviationLength){var _182a=Sage.Format.abbreviationFormatter(this.abbreviationLength);_1825=_182a(_1825);}return _1825;},styles:"text-align: right;",setCurrentItems:function(){this.editInfo=this.grid.edit.info;this.item=this.grid.getItem(this.editInfo.rowIndex);},getControlId:function(){this.setCurrentItems();return [this.item.$key,this.editInfo.cell.field,this.index].join("_");},getValue:function(index){var _182b=this.widget.focusNode.valueNode.value;if(this.multiCurrency){_182b=_182b/this.exchangeRate;}if(this.widget.focusNode.state==="Error"){var item=this.grid.getItem(index);_182b=this.grid.store.getValue(item,this.grid.edit.info.cell.field);this.widget.focusNode.focusNode.value=_182b;}return _182b;}});var _182c=_1814("Sage.UI.Columns.Currency.BaseExchangeRateLoader",_1816,{_requests:[],_requestingData:false,_exchangeRate:false,_storageNamespace:"BaseCurrencyExchangeRate",constructor:function(){this._requests=[];this._requestingData=false;this._exchangeRate=false;},requestExchangeRate:function(_182d,scope){if(!this._exchangeRate){var data=sessionStorage.getItem(this._storageNamespace);if(data){this._exchangeRate=json.parse(data);}else{this._requests.push({fn:_182d,scope:scope||this});if(!this._requestingData){this._requestingData=true;var _182e=new Sage.SData.Client.SDataSingleResourceRequest(_1815.getSDataService("dynamic",false,true,true));_182e.setResourceSelector(dojo.string.substitute("'${0}'",[scope.currentCode]));_182e.setResourceKind("exchangeRates");_182e.read({success:lang.hitch(this,this._receiveData),failure:function(_182f){if(typeof onError==="function"){onError(_182f);}},async:false});}return;}}_182d.call(scope||this,this._exchangeRate);},_receiveData:function(data){sessionStorage.setItem(this._storageNamespace,json.stringify(data));this._exchangeRate=data;var len=this._requests.length;for(var i=0;i<len;i++){var clbk=this._requests.pop();clbk.fn.call(clbk.scope,data);}}});Sage.Services.addService("ExchangeRateLoader",new _182c());return _1818;});},"Sage/Groups/GroupManager":function(){define("Sage/Groups/GroupManager",["Sage/UI/Dialogs","Sage/Utility/Email","dojo/string","Sage/Groups/GroupContextService","dojox/storage/LocalStorageProvider","dojo/_base/array","dojo/_base/lang","dojo/i18n","dojo/i18n!./nls/GroupManager","Sage/Data/SDataServiceRegistry","dojo/_base/xhr","dojo/topic","dojo/aspect"],function(_1830,email,_1831,_1832,_1833,array,lang,i18n,nls,_1834,xhr,topic,_1835){Sage.namespace("Sage.Groups.GroupManager");Sage.Groups.GroupManager={CurrentUserID:"",SortCol:-1,SortDir:"ASC",GMUrl:"SLXGroupBuilder.aspx?method=",GroupXML:"",resources:nls,LOCALSTORE_NAMESPACE:"SageGroups",QB_WIDTH:840,QB_HEIGHT:650,GetFromServer:function(url,_1836,_1837,_1838,sync){var args={url:url,sync:sync||false,handleAs:_1836||"text",headers:{"Content-Type":"application/xml"},preventCache:true,load:_1837,error:_1838};return dojo.xhrGet(args);},ClearLocalStorage:function(){var _1839=new _1833();_1839.initialize();_1839.clear(Sage.Groups.GroupManager.resources.LOCALSTORE_NAMESPACE);window.location.reload(true);},ClearLocalStorageForGroup:function(_183a){var _183b=new _1833();_183b.initialize();array.forEach(_183b.getNamespaces(),function(item){if(item.indexOf(_183a)>-1){_183b.clear(item);}});sessionStorage.removeItem("GROUPLAYOUT_"+_183a);sessionStorage.removeItem("hidden_filters_"+_183a);sessionStorage.removeItem("METADATA_FILTERS_"+_183a);window.location.reload(true);},PostToServer:function(url,data,_183c,_183d){var args={url:url,postData:data,handleAs:"text",headers:{"Content-Type":"application/xml"},load:function(data){if(typeof _183c==="function"){_183c(data);}},error:function(err){if(typeof _183d==="function"){_183d(err);}}};return dojo.xhrPost(args);},GetCurrentGroupInfo:function(){var _183e=Sage.Services.getService("ClientGroupContext");if(_183e){var _183f=_183e.getContext();return {"Name":_183f.CurrentName,"Family":_183f.CurrentFamily,"Id":_183f.CurrentGroupID,"isAdhoc":_183f.isAdhoc,"Entity":_183f.CurrentEntity};}return "";},CreateGroup:function(mode){if(typeof mode==="undefined"||mode===""){mode=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family;}var vURL="QueryBuilderMain.aspx?mode="+mode,width=Sage.Groups.GroupManager.QB_WIDTH,_1840=Sage.Groups.GroupManager.QB_HEIGHT;window.open(vURL,"GroupViewer",_1831.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:width,height:_1840}));},DeleteGroup:function(_1841,_1842){if(typeof _1841==="undefined"||_1841===""){_1841=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}var msg=(_1842)?_1831.substitute(Sage.Groups.GroupManager.resources.ConfirmDeleteFmtMessage,[_1842]):Sage.Groups.GroupManager.resources.ConfirmDeleteMessage;_1830.raiseQueryDialog("",msg,function(_1843){if(_1843===true){Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"DeleteGroup&gid="+_1841,"text",function(){var url=document.location.href.replace("#","");if(url.indexOf("?")>-1){var _1844=url.split("?");url=_1844[0];}document.location=url;},function(req){});}},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption);},EditGroup:function(_1845){var _1846=Sage.Groups.GroupManager.GetCurrentGroupInfo();if(typeof _1845==="undefined"||_1845===""){_1845=_1846.Id;}var url=_1831.substitute("QueryBuilderMain.aspx?gid=${groupid}&mode=${md}",{groupid:_1845,md:_1846.Family}),width=Sage.Groups.GroupManager.QB_WIDTH,_1847=Sage.Groups.GroupManager.QB_HEIGHT;window.open(url,"EditGroup",_1831.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:width,height:_1847}));},CopyGroup:function(_1848){var _1849=Sage.Groups.GroupManager.GetCurrentGroupInfo();if(typeof _1848==="undefined"||_1848===""){_1848=_1849.Id;}var vURL=["QueryBuilderMain.aspx?gid=",_1848,"&action=copy","&mode=",_1849.Family].join(""),width=Sage.Groups.GroupManager.QB_WIDTH,_184a=Sage.Groups.GroupManager.QB_HEIGHT;window.open(vURL,"EditGroup",_1831.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:width,height:_184a}));},ListGroupsAsSelect:function(_184b){var _184c=_184b;if(!dojo.isString(_184c)||_184c.length===0){_184c=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family;if(!dojo.isString(_184c)||_184c.length===0){return "";}}var sUrl=Sage.Groups.GroupManager.GMUrl+"GetGroupList&entity="+_184c;var _184d="";Sage.Groups.GroupManager.GetFromServer(sUrl,"text",function(data){_184d=data;},function(err){if(typeof console!=="undefined"){console.error(err);}},true);var _184e=getXMLDoc(_184d);if(_184e){var _184f=_184e.getElementsByTagName("GroupInfo");if(!_184f){return "";}var _1850="";for(var i=0;i<_184f.length;i++){_1850+="<option value = '"+_184f[i].getElementsByTagName("GroupID")[0].firstChild.nodeValue+"'>"+_184f[i].getElementsByTagName("DisplayName")[0].firstChild.nodeValue+"</option>";}return _1850;}return "";},GetGroupId:function(name){var _1851="";Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"GetGroupId&name="+encodeURIComponent(name),"text",function(data){_1851=data;},function(err){console.error(err);},true);return _1851;},HideGroup:function(_1852,_1853){if(typeof _1852==="undefined"||_1852===""){_1852=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}Sage.Groups.GroupManager.PostToServer(Sage.Groups.GroupManager.GMUrl+"HideGroup&gid="+_1852,"",lang.hitch(this,Sage.Groups.GroupManager._HideOrShowComplete,_1853,_1852));},_HideOrShowComplete:function(_1854,_1855){var _1856,_1857,_1858,_1859;if(_1854){return;}_1858=function(){if(_1859&&_1859.remove){_1859.remove();}var _185a=dijit.byId("titlePane");if(_185a){_185a.resetConfiguration();}};_1856=Sage.Services.getService("ClientGroupContext");_1857=_1856&&_1856.getContext();_1859=_1835.after(_1856,"onCurrentGroupChanged",_1858);if(!Sage.Groups.GroupManager._isDefaultGroup(_1855)&&_1857.CurrentGroupID===_1855){_1856.setCurrentGroup(_1857.DefaultGroupID);}else{if(Sage.Groups.GroupManager._isDefaultGroup(_1855)&&_1857.CurrentGroupID===_1855){_1856.setCurrentGroup("LOOKUPRESULTS");}else{_1858.call();}}},_isDefaultGroup:function(_185b){var _185c,_185d,_185e;_185e=false;_185c=Sage.Services.getService("ClientGroupContext");if(_185c){_185d=_185c.getContext();if(_185d){_185e=_185d.DefaultGroupID===_185b;}}return _185e;},UnHideGroup:function groupmanager_(_185f,_1860){if(typeof _185f==="undefined"||_185f===""){_185f=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"UnHideGroup&gid="+_185f,"",lang.hitch(this,Sage.Groups.GroupManager._HideOrShowComplete,_1860,_185f));},ShowGroups:function(_1861){if(typeof _1861==="undefined"||_1861===""){_1861=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family;}var vURL="ShowGroups.aspx?tablename="+_1861;window.open(vURL,"ShowGroups","resizable=yes,centerscreen=yes,width=800,height=646,status=no,toolbar=no,scrollbars=yes");},CreateAdHocGroup:function(_1862,_1863,_1864,_1865){var vURL=[Sage.Groups.GroupManager.GMUrl,"CreateAdHocGroup","&name=",encodeURIComponent(_1863),"&family=",_1864,"&layoutid=",encodeURIComponent(_1865)].join();return Sage.Groups.GroupManager.PostToServer(vURL,_1862);},EditAdHocGroupAddMember:function(_1866,_1867){if(typeof _1866==="undefined"||_1866===""){_1866=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}var x=Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"EditAdHocGroupAddMember&groupid="+_1866+"&entityid="+_1867);},EditAdHocGroupDeleteMember:function(_1868,_1869){if(typeof _1868==="undefined"||_1868===""){_1868=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}var x=Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"EditAdHocGroupDeleteMember&groupid="+_1868+"&entityid="+_1869);},SetDefault:function(_186a,name,_186b){Sage.Groups.GroupManager._saveGroupUserOptions(name,_186b,"DEFAULTGROUP");},SetLookupLayout:function(_186c,name,_186d){Sage.Groups.GroupManager._saveGroupUserOptions(name,_186d,"LOOKUPLAYOUTGROUP");},_saveGroupUserOptions:function(name,_186e,_186f){var _1870=Sage.Groups.GroupManager.GetCurrentGroupInfo(),_1871=_1870.Name,_1872=_1870.Family,_1873=name||_1871,_1874=_186e||currentyFamily;var svc=Sage.Services.getService("UserOptions");if(svc){svc.set(_186e,_186f,_1831.substitute("${0}:${1}",[_1874,_1873]));}},IsAdHoc:function(_1875){alert("not implemented in this object yet...");},ExportGroup:function(_1876,_1877){try{require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(_1878,_1879){var _187a=_1878.GetDesktopService();if(_187a){if(_1876===""){_1876=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}_187a.ExportToExcel(_1876);return;}throw new Error(_1831.substitute("${0} ${1}",[_1878.DesktopErrors().MailMergeServiceLoad,_1878.DesktopErrors().SageGearsObjectError]));});}catch(err){_1830.showError(err.message);}},ShareGroup:function(_187b){if(typeof _187b==="undefined"||_187b===""){_187b=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}var vURL="ShareGroup.aspx?gid="+_187b;window.open(vURL,"ShareGroup","resizable=yes,centerscreen=yes,width=500,height=450,status=no,toolbar=no,scrollbars=yes");},GetGroupSQL:function(_187c,_187d,parts,_187e){var _187f=_187c;if(!dojo.isString(_187f)||_187f.length===0){_187f=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;if(!dojo.isString(_187f)||_187f.length===0){return "";}}var sUrl=Sage.Groups.GroupManager.GMUrl+"GetGroupSQL&gid="+_187f;if(typeof _187d!=="undefined"){if(dojo.isString(_187d)){if((_187d==="true")||(_187d==="false")){sUrl+="&UseAliases="+_187d;}}else{if(typeof _187d==="boolean"){sUrl+="&UseAliases="+_187d.toString();}}}if(dojo.isString(parts)&&parts.length>0){sUrl+="&parts="+parts;}if(typeof _187e!=="undefined"){if(dojo.isString(_187e)){if((_187e==="true")||(_187e==="false")){sUrl+="&ApplyFilters="+_187e;}}else{if(typeof _187e==="boolean"){sUrl+="&ApplyFilters="+_187e.toString();}}}var _1880="";Sage.Groups.GroupManager.GetFromServer(sUrl,"text",function(data){_1880=data;},function(err){if(typeof console!=="undefined"){console.error(err);}},true);return _1880;},GetGroupSQLFromXML:function(_1881,_1882,_1883){Sage.Groups.GroupManager.PostToServer(Sage.Groups.GroupManager.GMUrl+"GetGroupSQL",_1881,_1882,_1883);},GetGroupSQLById:function(_1884,_1885,_1886){url=Sage.Groups.GroupManager.GMUrl+"GetGroupSQL&gid="+_1884;Sage.Groups.GroupManager.GetFromServer(url,"json",_1885,_1886);},saveSelectionsAsNewGroup:function(){var _1887=Sage.Utility.getSelectionInfo();if(!_1887||_1887.selectionCount===0){if(_1887.recordCount<1){_1830.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);}else{var _1888=_1831.substitute(Sage.Groups.GroupManager.resources.noneSelectedPromptFmt,[_1887.recordCount]);_1830.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,_1888,function(_1889){if(_1889===true){Sage.Groups.GroupManager.promptForName("");}},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption);}}else{Sage.Groups.GroupManager.promptForName("");}},promptForName:function(_188a,_188b){var _188c=Sage.Utility.getSelectionInfo();var _188d=(_188c.selectionCount===0)?_188c.recordCount:_188c.selectionCount;var _188e=_1831.substitute(Sage.Groups.GroupManager.resources.newGroupNamePrompt,[_188d,_188a||""]);_1830.raiseInputDialogExt({title:Sage.Groups.GroupManager.resources.newGroupTitle,query:_188e,callbackFn:function(_188f,name){if(_188f===true){if(name===""){window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.newGroupRePrompt,name);},100);}else{if(name.match(/[\/\\:\*\?"<\>|\.'\r\n]/)!==null){window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.invalidCharMsg,name);},100);}else{Sage.Groups.GroupManager.saveNewGroupPost(name);}}}},yesText:Sage.Groups.GroupManager.resources.okCaption,noText:Sage.Groups.GroupManager.resources.cancelCaption,defaultValue:_188b||"",closable:true});},saveNewGroupPost:function(name,_1890){var _1891=Sage.Utility.getSelectionInfo(),_1892=_1834.getSDataService("system"),_1893=new Sage.SData.Client.SDataSingleResourceRequest(_1892),_1894=Sage.Services.getService("ClientGroupContext").getContext(),_1895=_1894.CurrentFamily,_1896=_1894.CurrentGroupID,entry={},copy=false;_1893.setResourceKind("groups");if(_1891.selectionCount===0){copy=true;}entry={family:_1895,name:name,adHocIds:_1891.selectedIds};_1893.create(entry,{success:function(entry){if(copy){Sage.Groups.GroupManager.copyFromGroup(_1896,entry.$key);}else{Sage.Groups.GroupManager.newGroupCreated();}},failure:function(){},scope:this});},removeSelectionsFromGroup:function(){var _1897=Sage.Utility.getSelectionInfo();if(_1897.selectionCount===0){if(_1897.recordCount<1){_1830.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);}else{var _1898=_1831.substitute(Sage.Groups.GroupManager.resources.noneSelectedRemovePromptFmt,[_1897.recordCount]);_1830.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,_1898,function(_1899){if(_1899===true){Sage.Groups.GroupManager.removeConfirmed();}},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption);}}else{Sage.Groups.GroupManager.removeConfirmed();}},removeConfirmed:function(){var _189a=Sage.Utility.getSelectionInfo(),_189b=Sage.Services.getService("ClientGroupContext").getContext(),_189c=_189b.CurrentFamily,name=_189b.CurrentName,_189d=_189b.CurrentGroupID;Sage.Groups.GroupManager.removeIds(_189d,name,_189c,_189a.selectedIds,function(){Sage.Groups.GroupManager.refreshListView();},function(err){console.error(err);},this);},removeIds:function(_189e,_189f,_18a0,ids,_18a1,_18a2,scope){var _18a3=_1834.getSDataService("system"),_18a4=new Sage.SData.Client.SDataServiceOperationRequest(_18a3),entry,_18a5,_18a6=[];_18a4.setResourceKind("groups");if(ids&&ids.length>0){_18a4.setOperationName("removeAdHocIds");_18a6=ids;}else{_18a4.setOperationName("removeAllAdHocIds");_18a6.push(ids);}entry={"$name":"removeAdHocIds",request:{groupId:_189e,groupName:_189f,family:_18a0,adHocIds:ids}};_18a5=lang.hitch(this,function(){topic.publish("/group/adhoc/removed",{"groupId":_189e,"groupName":_189f,"family":_18a0,"ids":_18a6});if(_18a1){_18a1.call(arguments);}});_18a4.execute(entry,{success:_18a5,failure:_18a2,scope:scope||this});},addSelectionsToGroup:function(_18a7){var _18a8=Sage.Utility.getCurrentEntityId();if(_18a8!==""){Sage.Groups.GroupManager.postAddToGroup(_18a7,{selectedIds:[_18a8],selectionCount:1});}else{var _18a9=Sage.Utility.getSelectionInfo();if(_18a9.selectionCount===0){if(_18a9.recordCount<1){_1830.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);}else{var _18aa=_1831.substitute(Sage.Groups.GroupManager.resources.noneSelectedPromptFmt,[_18a9.recordCount]);_1830.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,_18aa,function(_18ab){if(_18ab===true){Sage.Groups.GroupManager.addConfirmed(_18a7);}},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption);}}else{Sage.Groups.GroupManager.addConfirmed(_18a7);}}},copyFromGroup:function(_18ac,_18ad){var _18ae=Sage.Utility.getSelectionInfo(),_18af=_1834.getSDataService("system"),_18b0=new Sage.SData.Client.SDataServiceOperationRequest(_18af),_18b1=Sage.Services.getService("ClientGroupContext").getContext(),_18b2=_18b1.CurrentFamily,name=_18b1.CurrentName,entry;_18b0.setResourceKind("groups");_18b0.setOperationName("addAdHocIdsFrom");entry={"$name":"addAdHocIdsFrom",request:{groupId:_18ad,groupName:name,family:_18b2,fromGroupId:_18ac}};_18b0.execute(entry,{success:function(){var _18b3=Sage.Services.getService("ClientGroupContext");if(_18b3){var _18b4=dijit.byId("titlePane");if(_18b4){_18b4.resetConfiguration();}_18b3.setCurrentGroup(_18ad);}},failure:function(){},scope:this});},addConfirmed:function(_18b5){var _18b6=Sage.Utility.getSelectionInfo();Sage.Groups.GroupManager.postAddToGroup(_18b5,_18b6);},postAddToGroup:function(_18b7,_18b8){var _18b9=_1834.getSDataService("system"),_18ba=new Sage.SData.Client.SDataServiceOperationRequest(_18b9),_18bb=Sage.Services.getService("ClientGroupContext").getContext(),_18bc=_18bb.CurrentFamily,_18bd=_18bb.CurrentGroupID,entry,_18be="addAdHocIds";if(_18b8.selectionCount===0){Sage.Groups.GroupManager.copyFromGroup(_18bd,_18b7);return;}_18ba.setResourceKind("groups");_18ba.setOperationName(_18be);entry={"$name":_18be,request:{groupId:_18b7,family:_18bc,adHocIds:_18b8.selectedIds}};_18ba.execute(entry,{success:function(){},failure:function(){},scope:this});},saveLookupAsGroup:function(obj,e,msg){if(typeof (msg)==="undefined"){msg=Sage.Groups.GroupManager.resources.groupNameText;}_1830.raiseInputDialogExt({title:Sage.Groups.GroupManager.resources.saveLookupDlgTitle,query:msg,callbackFn:function(_18bf,name){if(_18bf===true){if(name===""){window.setTimeout(function(){Sage.Groups.GroupManager.saveLookupAsGroup(Sage.Groups.GroupManager.resources.newGroupRePrompt);},100);}else{if(name.match(/\'|\"|\/|\\|\*|\:|\?|\<|\>/)!==null){window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.invalidCharMsg);},100);}else{var _18c0="slxdata.ashx/slx/crm/-/groups/adhoc?action=SaveLookupAsGroup&name="+encodeURIComponent(name);xhr.post({url:_18c0,handleAs:"text",content:{},load:Sage.Groups.GroupManager.newGroupCreated,error:Sage.Groups.GroupManager.handleAjaxError});}}}},yesText:Sage.Groups.GroupManager.resources.okCaption,noText:Sage.Groups.GroupManager.resources.cancelCaption,defaultValue:"",closable:true});},handleAjaxError:function(_18c1){if(typeof _18c1!="undefined"){if(_18c1.responseXML){var nodes=_18c1.responseXML.getElementsByTagName("sdata:message");if(nodes.length>0){_1830.showError(nodes[0].text||nodes[0].textContent,"");}}else{_1830.alert("an unidentified exception has occured");}}},newGroupCreated:function(){Sage.Link.toListView();},refreshListView:function(){var _18c2=dijit.byId("list");if(_18c2){_18c2.refreshList();}},emailSelectionsFromGroup:function(){var _18c3,body,_18c4,_18c5;_18c3="";body="";_18c4=0;_18c5="Email";email.writeEmailToGroupSelection(_18c3,body,_18c4,_18c5);}};window.groupManager=Sage.Groups.GroupManager;return groupManager;});},"Sage/Utility/nls/Utility":function(){define("Sage/Utility/nls/Utility",["Sage/LanguageList","dojo/_base/lang"],function(_18c6,lang){var nls={root:{dangerousValueWarn:"A potentially dangerous form value was detected.  Please avoid invalid character combinations."+"Example: \"&lt;script&gt;&lt;/script&gt;\" Also avoid invalid characters in filenames: \\ / : * ? \" &lt; &gt; | "}};return lang.mixin(_18c6,nls);});},"Sage/QuickForms/Design/nls/ControlDesigner":function(){define("Sage/QuickForms/Design/nls/ControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_18c7,lang){var nls={root:{displayNameText:""}};return lang.mixin(_18c7,nls);});},"Sage/Utility/File/AttachmentPropertiesEditForm":function(){define("Sage/Utility/File/AttachmentPropertiesEditForm",["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility/File","Sage/Utility","Sage/UI/Dialogs","dojox/layout/TableContainer","Sage/UI/Controls/DateTimePicker","dijit/form/TextBox","dijit/form/Button","dojox/form/Uploader","dojo/i18n","dojo/i18n!./nls/AttachmentPropertiesEditForm","dojo/_base/declare"],function(_18c8,_18c9,_18ca,_18cb,_18cc,_18cd,_18ce,_18cf,_18d0,_18d1,_18d2,_18d3,_18d4,_18d5,_18d6,_18d7,_18d8,i18n,_18d9,_18da){var _18db=_18da("Sage.Utility.File.AttachmentPropertiesEditForm",[_18c8,_18c9],{attachmentId:"",widgetsInTemplate:true,attachment:false,_bindingMgr:false,_store:false,_tempFile:false,_iframe:null,_showing:false,_iframeId:"attachmentRePostIFrame",_uploadUrlFmt:"slxdata.ashx/slx/system/-/attachments('${0}')/file",widgetTemplate:new Simplate(["<div>","<div dojoType=\"dijit.Dialog\" title=\"{%= $.editText %}\" dojoAttachPoint=\"_dialog\">","<iframe src=\"about:blank\" style=\"width:0px;height:0px;border-width:0px;\" name=\"{%= $._iframeId %}\" id=\"{%= $._iframeId %}\" dojoAttachPoint=\"_iframe\" dojoAttachEvent=\"onload:_iframeLoad\"></iframe>","<form method=\"post\" enctype=\"multipart/form-data\" action=\"{%= $._buildPostUrl() %}\" target=\"{%= $._iframeId %}\" dojoAttachPoint=\"_postForm\", class=\"attachment-properties-form\">","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\" dojoAttachPoint=\"_urlContainer\">","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.urlText %}\" id=\"{%= $.id %}_tb_Url\" dojoAttachPoint=\"tb_Url\" ></div>","</div>","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\" dojoAttachPoint=\"_fileNameContainer\" >","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.fileText %}\" id=\"{%= $.id %}_tb_File\" dojoAttachPoint=\"tb_File\" ></div>","</div>","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\" >","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.descriptionText %}\" name=\"description\" id=\"{%= $.id %}_tb_Description\" dojoAttachPoint=\"tb_Description\" maxlength=\"128\" ></div>","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.sizeText %}\" id=\"{%= $.id %}_tb_size\" dojoAttachPoint=\"tb_size\" disabled=\"true\" shouldPublishMarkDirty=\"false\"></div>","<div dojoType=\"Sage.UI.Controls.DateTimePicker\" label=\"{%= $.attachDateText %}\" id=\"{%= $.id %}_dtp_AttachDate\" dojoAttachPoint=\"dtp_attachDate\" displayDate=\"true\" displayTime=\"true\" disabled=\"true\" shouldPublishMarkDirty=\"false\"></div>","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.attachedByText %}\" id=\"{%= $.id %}_tb_attachedBy\" dojoAttachPoint=\"tb_attachedBy\" disabled=\"true\" shouldPublishMarkDirty=\"false\"></div>","</div>","<div class=\"general-dialog-actions\">","<input dojoType=\"dojox.form.Uploader\" multiple=\"false\" label=\"{%= $.uploadFileText %}\" type=\"file\" name=\"file\" dojoAttachEvent=\"onChange:_onNewFile\" dojoAttachPoint=\"btn_FileSelect\" class=\"uploadButton\" ></input>","</div>","<div class=\"general-dialog-actions\">","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnOK\" name=\"_btnOK\" dojoAttachPoint=\"_btnOK\" dojoAttachEvent=\"onClick:_okClick\" >{%= $.okText %}</div>","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnCancel\" name=\"_btnCancel\" dojoAttachPoint=\"_btnCancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>","</div>","<input type=\"hidden\" name=\"X-HTTP-Method-Override\" value=\"PUT\" />","</form>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.Utility.File","AttachmentPropertiesEditForm"));this.inherited(arguments);},show:function(){this._dialog.show();if(!this._dialog._standby){_18cd.mixin(this._dialog,new _18cc());}this._showing=true;if(!this.attachment){this._dialog.showLoading();}},hide:function(){this.attachmentId="";this.attachment=false;this._tempFile=false;if(this._dialog._standby){this._dialog.hideLoading();}this._dialog.hide();this._showing=false;},_buildPostUrl:function(){var _18dc=[];_18dc.push(/https/i.test(window.location.protocol)?"https":"http");_18dc.push("://");_18dc.push(window.location.hostname);if(window.location.port&&window.location.port!==80){_18dc.push(":",window.location.port);}_18dc.push("/");_18dc.push(_18d2.getVirtualDirectoryName());_18dc.push("/slxdata.ashx/slx/system/-/attachments");if(this.attachment){_18dc.push("(\""+this.attachment.$key+"\")");}_18dc.push("/file");var url=_18dc.join("");return url;},_iframeLoad:function(e){if(this._iframe.contentDocument&&this._iframe.contentDocument.URL.indexOf("attachments")>0){dojo.publish("/entity/attachment/update","");this.hide();}},_setAttachmentIdAttr:function(_18dd){this.attachmentId=_18dd;if(this.attachmentId&&this.attachmentId!==""){this._loadData();}},_getAttachmentIdAttr:function(){return this.attachmentId;},_loadData:function(){if(this._dialog._standby){this._dialog.showLoading();}if(!this._store){this._store=new _18ce({include:["$descriptors"],resourceKind:"attachments",service:_18cf.getSDataService("system")});}if(this.attachmentId!==""){this._store.clearCache();this._store.fetch({predicate:"\""+this.attachmentId+"\"",onComplete:this._receiveAttachment,beforeRequest:function(_18de){_18de.setQueryArg("_includeFile","false");},onError:this._requestFail,scope:this});}else{_18d3.showError("No attachment to edit");}},_receiveAttachment:function(_18df){if(this._dialog._standby){this._dialog.hideLoading();}this.attachment=_18df;this._ensureBindings();this._bind();if(this.attachment.url){dojo.removeClass(this._urlContainer.domNode,"display-none");dojo.addClass(this.btn_FileSelect.domNode,"display-none");dojo.addClass(this._fileNameContainer.domNode,"display-none");}else{dojo.addClass(this._urlContainer.domNode,"display-none");dojo.removeClass(this.btn_FileSelect.domNode,"display-none");dojo.removeClass(this._fileNameContainer.domNode,"display-none");}},_ensureBindings:function(){if(!this._bindingMgr){this._bindingMgr=new _18d0({defaultBinding:{boundEntity:this.attachment},items:[{boundWidget:this.tb_File,entityProperty:"fileName"},{boundWidget:this.tb_Description,entityProperty:"description"},{boundWidget:this.tb_size,entityProperty:"fileSize",_formatValueFromEntity:function(v){return Sage.Utility.File.formatFileSize(v);},twoWay:false},{boundWidget:this.dtp_attachDate,entityProperty:"attachDate",dataType:"date",twoWay:false},{boundWidget:this.tb_Url,entityProperty:"url"},{boundWidget:this.tb_attachedBy,entityProperty:"user.$descriptor",twoWay:false}]});}},_bind:function(){if(!this._bindingMgr.boundEntity||(this.attachment.$key!==this._bindingMgr.boundEntity.$key)){this._bindingMgr.setBoundEntity(this.attachment);}else{this._bindingMgr.bind();}},_onNewFile:function(){var files=this.btn_FileSelect._files;if(files&&files.length>0){this.tb_File.set("value",files[0].name);this._tempFile=files[0];}else{this._tempFile=true;}this.tb_Description.focus();},_uploadNewFile:function(file){if(file){var url=_18ca.substitute(this._uploadUrlFmt,[this.attachment.$key]);_18d1.uploadFileHTML5(file,url,false,this._newFileUploaded,this._requestFail,this,true);}},_newFileUploaded:function(){this._tempFile=false;dojo.publish("/entity/attachment/update",self.attachment);this.hide();},_okClick:function(){if(this._dialog._standby){this._dialog.showLoading();}this._saveAndHide();},_saveAndHide:function(){if(this._dialog._standby){this._dialog.showLoading();}var self=this;if((!_18d1.supportsHTML5File&&!Sage.gears)&&(this._tempFile)){this._store._okToCache=false;this._postForm.action=this._buildPostUrl();this._postForm.submit();window.setTimeout(function(){if(self._showing){dojo.publish("/entity/attachment/update","");self.hide();}},5000);return;}window.setTimeout(function(){self._saveAttachment();},10);},_saveAttachment:function(){this._store.save({scope:this,success:function(_18e0){if(this._tempFile){this._uploadNewFile(this._tempFile);}else{dojo.publish("/entity/attachment/update",_18e0);this._dialog.hide();}},failure:this._requestFail,scope:this});},_cancelClick:function(){this.hide();},_requestFail:function(req){_18d3.showError(this.requestFailedMsg);this.hide();}});return _18db;});},"Sage/UI/Controls/nls/Address":function(){define("Sage/UI/Controls/nls/Address",["Sage/LanguageList","dojo/_base/lang"],function(_18e1,lang){var nls={root:{address1Text:"Address 1:",address2Text:"Address 2:",address3Text:"Address 3:",cancelText:"Cancel",cityText:"City:",countryText:"Country:",countyText:"County:",descriptionText:"Description:",dialogTitle:"Address",isMailingText:"Shipping:",isPrimaryText:"Primary:",okText:"OK",postalCodeText:"Postal Code:",salutationText:"Attention:",stateText:"State:",imageEditToolTip:"Edit",imageMapQuestToolTip:"MapQuest"}};return lang.mixin(_18e1,nls);});},"Sage/QuickForms/Design/Editors/FormUsagesPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/FormUsagesPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dojo/string","dojox/grid/EnhancedGrid","./_PropertyEditor","Sage/Services/_ServiceMixin","dojo/i18n!./nls/FormUsagesPropertyEditor"],function(_18e2,lang,_18e3,_18e4,_18e5,_18e6,_18e7){return _18e2("Sage.QuickForms.Design.Editors.FormUsagesPropertyEditor",[_18e4,_18e5,_18e6],{serviceMap:{"dataService":{type:"sdata",name:"metadata"}},titleText:"Usage",portalText:"Portal",viewText:"View",modesText:"Modes",descriptionText:"Description",selectionMode:"none",canSort:function(){return false;},constructor:function(){lang.mixin(this,_18e7);},setup:function(){this.inherited(arguments);var name=this._designer.get("name")||"";var store=new Sage.Data.SDataStore({service:this.dataService,resourceKind:"formUsages",select:["showInMode","portalPage/portalAlias","portalPage/pagetitle","portalPage/description"],where:_18e3.substitute("smartPartId eq \"${0}\"",[name])});this.setStore(store);this.set("structure",[{field:"portalPage.portalAlias",name:this.portalText,width:"auto"},{field:"portalPage.pagetitle",name:this.viewText,width:"auto"},{field:"showInMode",name:this.modesText,formatter:this.formatModes,width:"auto"},{field:"portalPage.description",name:this.descriptionText,width:"auto"}]);},formatModes:function(modes){if(!modes){return "";}return (lang.isArray(modes))?modes.join(", "):modes;}});});},"Sage/QuickForms/Design/Editors/GenericAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/GenericAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/GenericAdvancedPropertyEditor"],function(_18e8,lang,_18e9,_18ea,_18eb,_18ec,_18ed,_18ee,_18ef,_18f0,_18f1){return _18e8("Sage.QuickForms.Design.Editors.GenericAdvancedPropertyEditor",[_18e9,_18ef,_18ee],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",controlInfoText:"Control Info",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",constructor:function(){lang.mixin(this,_18f1);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._visible.set("value",this._designer.get("visible"));},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/UI/ActivityList":function(){define("Sage/UI/ActivityList",["dojo/_base/declare","dijit/_Widget","Sage/Utility","Sage/Utility/Activity","Sage/UI/Columns/DateTime","Sage/UI/Columns/SlxLink","Sage/UI/SLXPreviewGrid","Sage/UI/SLXPreviewGrid/Grid","dijit/form/FilteringSelect","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/Text","dojo/data/ItemFileReadStore","dojo/string","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","Sage/UI/SLXPreviewGrid/Filter/Lookup","Sage/Data/SDataServiceRegistry","dojo/i18n!./nls/ActivityList"],function(_18f2,_18f3,_18f4,_18f5,_18f6,_18f7,_18f8,_18f9,_18fa,_18fb,_18fc,_18fd,_18fe,_18ff,_1900,_1901,_1902){var _1903=_18f2("Sage.UI.ActivityTypeFilterWidget",[_18f3,_18ff],{postCreate:function(){this.inherited(arguments);var div=document.createElement("div");this.domNode.appendChild(div);var _1904=[];dojo.forEach(["atAppointment","atPhoneCall","atToDo","atPersonal"],function(item){_1904.push({name:_18f5.getActivityTypeName(item),id:item});});var store=new _18fd({data:{items:_1904,label:"name",identifier:"id"}});this._select=new _18fa({store:store,required:false},div);},getQuery:function(){var v=this._select.get("value");if(v){return "Type eq '"+v+"'";}return "";},reset:function(){this._select.set("value",null);},getState:function(){return {"value":this._select.get("value")};},applyState:function(state){if(state){this._select.set("value",state["value"]||"");}}});var _1905=_18f2("Sage.UI.ActivityList",[_18f3],{placeHolder:"",conditionFmt:"",parentRelationshipName:"",workspace:"",tabId:"",connections:[],constructor:function(_1906){this.connections=[];},startup:function(){var _1907=[{id:"SchedulePhoneCall",imageClass:"icon_Schedule_Meeting_16x16",handler:function(){Sage.Link.scheduleMeeting();},alternateText:_1902.addMeetingText},{id:"ScheduleMeeting",imageClass:"icon_Schedule_Call_16x16",handler:function(){Sage.Link.schedulePhoneCall();},alternateText:_1902.addPhoneCallText},{id:"ScheduleToDo",imageClass:"icon_Schdedule_To_Do_16x16",handler:function(){Sage.Link.scheduleToDo();},alternateText:_1902.addToDoText},{id:this.id+"_Help",imageClass:"icon_Help_16x16",handler:function(){_18f4.openHelp("activitiestab");},alternateText:_1902.helpText}];var _1908=[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(value,_1909,cel){var _190a=[cel.grid.id,"-row",_1909].join("");var id=(Sage.Utility.getModeId()==="insert")?_190a:value;var _190b=["<div id=",id," >",id,"</ div>"].join("");return _190b;}},{field:"$key",name:_1902.completeText,sortable:false,width:"90px",type:_18f5.activityCompleteCell},{field:"Type",name:_1902.typeText,type:_18f5.activityTypeCell,width:"90px",filterConfig:{widgetType:_1903}},{field:"StartDate",name:_1902.startDateText,type:_18f6,useFiveSecondRuleToDetermineTimeless:true,getTimeless:true,width:"100px",filterConfig:{widgetType:_18fb,label:_1902.dateRangeText}},{field:"Duration",name:_1902.durationText,type:_18f5.activityDurationCell,width:"40px"},{field:"Leader",name:_1902.leaderText,type:_18f5.activityLeaderCell,width:"90px",filterConfig:{widgetType:_1900,lookupStructure:[{cells:[{name:_1902.firstNameText||"First Name",field:"UserInfo.FirstName",sortable:true,width:"200px",editable:false,propertyType:"System.string",excludeFromFilters:false,defaultValue:""},{name:_1902.lastNameText||"Last Name",field:"UserInfo.LastName",sortable:true,width:"200px",editable:false,propertyType:"System.string",excludeFromFilters:false,defaultValue:""},{name:_1902.typeText||"Type",field:"Type",sortable:true,width:"100px",editable:false,propertyType:"System.string",excludeFromFilters:false,defaultValue:""}]}],lookupGridOptions:{contextualCondition:function(){var where="";where="((Type ne 'Template') and (Type ne 'Retired'))";return where;},contextualShow:"",selectionMode:"single"},lookupStoreOptions:{resourceKind:"users",sort:[{attribute:"UserInfo.FirstName"}]},getQuery:function(){var obj=this._lup.get("selectedObject");if(obj&&obj["$key"]){return "Leader eq '"+obj["$key"].substr(0,12)+"'";}return "";}}}];this._addEntitySpecificColumns(_1908);_1908.push({field:"Description",name:_1902.descriptionText,width:"200px",filterConfig:{widgetType:_18fc}});_1908.push({field:"Category",name:_1902.categoryText,width:"75px"});var _190c=this.parentRelationshipName;var _190d={tools:_1907,columns:_1908,previewField:"LongNotes",readOnly:true,rowsPerPage:20,storeOptions:{select:["ContactId","OpportunityId","AccountId","LeadId","Description","Duration","Recurring","Type","Category","Timeless"],include:["Leader","$descriptors"],resourceKind:"activities",sort:[{attribute:"StartDate"}],service:_1901.getSDataService("system")},slxContext:{workspace:this.workspace,tabId:this.tabId},contextualCondition:function(){var fmt="(Type eq 'atAppointment' or Type eq 'atPhoneCall' or Type eq 'atToDo' or Type eq 'atPersonal') and ${0} eq '${1}'";return _18fe.substitute(fmt,[_190c,_18f4.getCurrentEntityId()]);},dblClickAction:Sage.Link.editActivity};this.onBeforeCreateGrid(_190d);var grid=new _18f8.Grid(_190d,this.placeHolder);grid._grid.store.beforeRequest=function(req){req.setQueryArg("_expandRecurrences","false");};grid.startup();var _190e=dijit.byId("tabContent");_190e.resize();_190e.resize();this.connections.push(dojo.subscribe("/entity/activity/create",this,this.onActivityChanges));this.connections.push(dojo.subscribe("/entity/activity/change",this,this.onActivityChanges));this.connections.push(dojo.subscribe("/entity/activity/delete",this,this.onActivityChanges));dojo.connect(grid,"destroy",this,this.destroy);this._grid=grid;},onActivityChanges:function(_190f){this._grid.refresh();},destroy:function(){for(var i=0;i<this.connections.length;i++){dojo.unsubscribe(this.connections.pop());}this.inherited(arguments);},_addEntitySpecificColumns:function(_1910){var _1911=Sage.Services.getService("ClientEntityContext").getContext().EntityType;switch(_1911){case "Sage.Entity.Interfaces.IAccount":case "Sage.Entity.Interfaces.IOpportunity":_1910.push({field:"ContactName",name:_1902.contactText,width:"100px",type:_18f7,idField:"ContactId",pageName:"Contact"});break;case "Sage.Entity.Interfaces.IContact":_1910.push({field:"OpportunityName",name:_1902.opportunityText,width:"100px",type:_18f7,idField:"OpportunityId",pageName:"Opportunity"});break;}},onBeforeCreateGrid:function(_1912){}});return _1905;});},"Sage/MainView/ActivityMgr/nls/BaseListPanelConfig":function(){define("Sage/MainView/ActivityMgr/nls/BaseListPanelConfig",["Sage/LanguageList","dojo/_base/lang"],function(_1913,lang){var nls={root:{titleFmtString:"${0}"}};return lang.mixin(_1913,nls);});},"Sage/QuickForms/Design/nls/OwnerControlDesigner":function(){define("Sage/QuickForms/Design/nls/OwnerControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_1914,lang){var nls={root:{displayNameText:"Owner"}};return lang.mixin(_1914,nls);});},"Sage/Utility/SDataLookup":function(){define("Sage/Utility/SDataLookup",[],function(){Sage.namespace("Utility.SDataLookup");dojo.mixin(Sage.Utility.SDataLookup,{setFormatType:function(opts){switch(opts.propertyFormat){case "Phone":return Sage.UI.Columns.Phone;default:return "";}},childObjectFormatter:function(opts){var _1915=opts.grid.grid._by_idx[opts.rowIdx].item,res,i;if(!_1915||!_1915[opts.childentity]||_1915[opts.childentity].$resources.length===0){return dojo.string.substitute("<div style=\"text-indent:16px\">${0}</div>",[opts.value||"&nbsp;"]);}opts.value=opts.value||"&nbsp;";res=[];if(opts.includeButton){res.push(dojo.string.substitute(["<input type=button id=\"SOPshow${1}\" style=\"height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:''});dojo.query('#SOPshow${1}').style({display:'none'});dojo.query('#SOPhide${1}').style({display:''})\" value=\"+\">","<input type=button id=\"SOPhide${1}\" style=\"display:none;height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:'none'});dojo.query('#SOPshow${1}').style({display:''});dojo.query('#SOPhide${1}').style({display:'none'})\" value=\"-\"> "].join(""),[opts.value,opts.rowIdx]));}res.push(dojo.string.substitute("${0}<div class=SOProw${1} style=\"display:none\">",[opts.value,opts.rowIdx]));for(i=0;i<_1915[opts.childentity].$resources.length;i++){res.push(dojo.string.substitute("<div style=\"text-indent:2em\">${0}</div>",[_1915[opts.childentity].$resources[i][opts.fieldName]||"&nbsp;"]));}res.push("</div>");return res.join("");}});});},"Sage/UI/Columns/Phone":function(){define("Sage/UI/Columns/Phone",["Sage/Format","Sage/UI/Controls/Phone","Sage/UI/Columns/Cell","dojo/_base/declare"],function(_1916,Phone,Cell,_1917){var _1918=_1917("Sage.UI.Columns.Phone",Cell,{defaultValue:"",widgetClass:Phone,getWidgetProps:function(_1919){var _191a=this._getControlId();return dojo.mixin({},this.widgetProps||{},{id:_191a,value:_1919,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field});},formatter:_1916.phone,styles:"text-align: left;",getValue:function(index){var _191b=this.widget.get("value");_191b=this.widget.unformatNumber(_191b);if((typeof _191b==="undefined")||(_191b==="")){_191b=this.defaultValue;}if(this.widget&&this.widget.focusNode.state==="Error"){return this.widget.focusNode._resetValue;}return _191b;}});return _1918;});},"Sage/MailMerge/Helper":function(){define("Sage/MailMerge/Helper",["Sage/UI/Dialogs","dijit/_Widget","dojo/i18n","dojo/string","dojo/_base/lang","dojo/i18n!./nls/Helper"],function(_191c,_191d,i18n,_191e,dLang,nls){Sage.namespace("MailMerge.Helper");dojo.mixin(Sage.MailMerge.Helper,{desktopErrorsStore:null,infoStore:null,DesktopErrors:function(){if(this.desktopErrorsStore!=null){return this.desktopErrorsStore;}else{var sPath=Sage.MailMerge.Loader.prototype.GetClientPath();if(sPath!=null){var sUrl=_191e.substitute("${0}/SLXMailMergeClient.ashx?method=GetDesktopErrors",[sPath]);var _191f=this.GetMailMergeLoader().DecodeMailMergeJsonFromUrl(sUrl);if(_191f!=null){this.desktopErrorsStore=_191f;return this.desktopErrorsStore;}}}return null;},ExecuteWriteAction:function(_1920,param){try{require(["Sage/MailMerge/Service"],function(){var _1921=Sage.MailMerge.Helper.GetMailMergeService();if(_1921){switch(_1920){case WriteAction.waWriteAddressLabels:_1921.WriteAddressLabels();break;case WriteAction.waWriteEmail:_1921.WriteEmail();break;case WriteAction.waWriteEmailUsing:_1921.WriteEmailUsing(param);break;case WriteAction.waWriteEmailUsingMore:_1921.WriteEmailUsingMoreTemplates();break;case WriteAction.waWriteFaxUsing:_1921.WriteFaxUsing(param);break;case WriteAction.waWriteFaxUsingMore:_1921.WriteFaxUsingMoreTemplates();break;case WriteAction.waWriteLetterUsing:_1921.WriteLetterUsing(param);break;case WriteAction.waWriteLetterUsingMore:_1921.WriteLetterUsingMoreTemplates();break;case WriteAction.waWriteMailMerge:_1921.WriteMailMerge();break;case WriteAction.waWriteTemplates:_1921.WriteTemplates(true);break;}}});}catch(err){var _1922="";if(this.IsSageGearsObjectError(err)){_1922=this.DesktopErrors().SageGearsObjectError;}var _1923=(dojo.isFunction(err.toMessage))?err.toMessage(_1922,this.MailMergeInfoStore().ShowJavaScriptStack):err.message;_191c.showError(_191e.substitute(this.DesktopErrors().WriteActionError,[_1923]));}},GetDesktopService:function(_1924){return this.GetMailMergeService(_1924);},GetMailMergeLoader:function(){if(Sage.Services.hasService("MailMergeServiceLoader")){return Sage.Services.getService("MailMergeServiceLoader");}return null;},GetMailMergeService:function(_1925){var _1926=true;if(typeof _1925==="boolean"){_1926=_1925;}if(Sage&&Sage.Services&&Sage.gears&&Sage.gears.factory&&Sage.Services.hasService("MailMergeService")){return Sage.Services.getService("MailMergeService");}else{if(_1926){_191c.showError(_191e.substitute("${0} ${1}",[this.DesktopErrors().MailMergeServiceLoad,this.DesktopErrors().SageGearsObjectError]));}}return null;},IsSageGearsObjectError:function(err){if(err){var _1927="The specified class name cannot be mapped to a COM object";var _1928=this.DesktopErrors().SageGearsClassError;if((dojo.isIE&&(err.number==-2146827287))||(err.message.indexOf(_1927)!=-1)||(err.message.indexOf(_1928)!=-1)){return true;}}return false;},MailMergeInfoStore:function(){if(this.infoStore!=null){return this.infoStore;}else{var sPath=Sage.MailMerge.Loader.prototype.GetClientPath();if(sPath!=null){var sUrl=_191e.substitute("${0}/SLXMailMergeClient.ashx?method=GetInfoStore",[sPath]);var _1929=this.GetMailMergeLoader().DecodeMailMergeJsonFromUrl(sUrl);if(_1929!=null){this.infoStore=_1929;return this.infoStore;}}}return null;}});dLang.mixin(Sage.MailMerge.Helper,nls);window.WriteAction={waWriteAddressLabels:0,waWriteEmail:1,waWriteEmailUsing:2,waWriteEmailUsingMore:3,waWriteFaxUsing:4,waWriteFaxUsingMore:5,waWriteLetterUsing:6,waWriteLetterUsingMore:7,waWriteMailMerge:8,waWriteTemplates:9};return Sage.MailMerge.Helper;});},"Sage/TaskPane/UserTasklet":function(){define("Sage/TaskPane/UserTasklet",["dojo/i18n!./nls/UserTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/Utility","dojo/_base/declare"],function(_192a,_192b,_192c,_192d,_192e){var _192f=_192e("Sage.TaskPane.UserTasklet",[_192b,_192c],{addToRoleTitle:"Add to Role",resetUsersTitle:"Reset Users",taskItems:[],constructor:function(){dojo.mixin(this,_192a);this.taskItems=[{taskId:"AddToRole",type:"Link",displayName:this.addToRoleTitle,clientAction:"userTaskletActions.addUsersToRole();",securedAction:"Entities/User/Add"},{taskId:"ResetUsers",type:"Link",displayName:this.resetUsersTitle,clientAction:"userTaskletActions.resetUsers();",securedAction:"Entities/User/Add"}];},resetUsers:function(){if(_192d.getModeId()==="detail"){this.onResetUsersClick();}else{this.prepareSelectedRecords(this.resetUsersAction(this));}},addUsersToRole:function(){if(_192d.getModeId()==="detail"){this.onAddUserClick();}else{this.prepareSelectedRecords(this.actionItem(this));}},actionItem:function(self){return function(){self.onAddUserClick();};},resetUsersAction:function(self){return function(){self.onResetUsersClick();};},onAddUserClick:function(){var _1930=dojo.byId([this.clientId,"_tskAddUserToRole"].join(""));if(_1930){_1930.click();}},onResetUsersClick:function(){var _1931=dojo.byId([this.clientId,"_tskResetUsers"].join(""));if(_1931){_1931.click();}}});return _192f;});},"url:Sage/UI/Controls/templates/MultiSelectPickList.html":"<div>\r\n    <input id=\"${id}-TextBox\" data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"textNode\" data-dojo-attach-event=\"onBlur: _onTextBlur\" />\r\n    <div id=\"${id}-Button\" data-dojo-type=\"dijit.form.DropDownButton\" data-dojo-attach-point=\"dropDownButtonNode\">\r\n        <span></span>\r\n        <div class=\"multiSelectPickListDialog\" id=\"${id}-ToolTipDialog\" data-dojo-type=\"dijit.TooltipDialog\" data-dojo-attach-point=\"tooltipDialogNode\" data-dojo-attach-event=\"onClose: _onTooltipClose, onShow: _onTooltipShow\">\r\n            <div data-dojo-attach-point=\"tooltipContainer\" style=\"height:200px; overflow-y:auto;\">\r\n            \r\n            </div>\r\n            \r\n            <div style=\"width: 100%; text-align:right\">\r\n                <p>\r\n                    <button id=\"${id}-OKButton\" data-dojo-type=\"dijit.form.Button\" type=\"submit\">${okText}</button>\r\n                <p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","Sage/QuickForms/Design/UrlControlDesigner":function(){define("Sage/QuickForms/Design/UrlControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","./TextBoxControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/UrlControlDesigner"],function(_1932,array,lang,_1933,_1934,_1935,_1936,_1937){return _1932("Sage.QuickForms.Design.UrlControlDesigner",[_1933],{designSupport:{visible:true},editors:[_1935,_1936,_1934],widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %} design-url\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"design-url-icon\"></div>","</div>","</div>"]),helpTopicName:"URL_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXUrl, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Url",constructor:function(){lang.mixin(this,_1937);}});});},"Sage/UI/MenuBar":function(){define("Sage/UI/MenuBar",["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/PopupMenuBarItem","Sage/UI/PopupMenuItem","dijit/Menu","Sage/UI/MenuBarItem","dijit/MenuSeparator","dojo/_base/declare"],function(_1938,_1939,_193a,_193b,_193c,_193d,_193e,_193f){var _1940=_193f("Sage.UI.MenuBar",[_1938],{postMixInProperties:function(){this.store=Sage.UI.DataStore.MenuBar||{};this.inherited(arguments);},postCreate:function(){this.inherited(arguments);var len=this.store.items?this.store.items.length:0;for(var i=0;i<len;i++){var _1941=this.store.items[i];var mid=(_1941.id!=="")?_1941.id:this.id+"_"+i;var _1942={label:_1941.text||"...",icon:_1941.img||this._blankGif,id:mid,title:_1941.tooltip||_1941.text||"",ref:_1941.href||_1941.navurl||"",imageClass:_1941.imageClass||""};if(_1941.items&&_1941.items.length>0){var menu=new _193c({});this._addItemsToMenu(_1941.items,menu,mid);_1942["popup"]=menu;this.addChild(new _193a(_1942));}else{_1942["onClick"]=dojo.hitch(_1942,function(){if(this.ref!==""){window.location.href=this.ref;}});this.addChild(new _193d(_1942));}}},_addItemsToMenu:function(items,menu,_1943){_1943=_1943||"";var len=items.length;for(var i=0;i<len;i++){var item=items[i];if(item.isspacer||item.text==="-"){menu.addChild(new _193e({}));}else{var _1944={label:item.text||"...",icon:item.img||this._blankGif,title:item.tooltip||item.text||"",ref:item.href||"",imageClass:item.imageClass||""};if(item.id!==""){_1944["id"]=_1943+"_"+item.id;}if(item.href!==""){_1944["onClick"]=function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}};}if(item.submenu.length>0){var popup=new _193c({});this._addItemsToMenu(item.submenu,popup,item.id||"");_1944["popup"]=popup;menu.addChild(new _193b(_1944));}else{menu.addChild(new _1939(_1944));}}}}});return _1940;});},"Sage/MainView/main":function(){define("Sage/MainView/main",["Sage/MainView/ActivityManager","Sage/MainView/SecurityManager","Sage/MainView/ActivityMgr/ActivityCalendar","Sage/MainView/BindingsManager","Sage/MainView/Contact/ContactSearchForDuplicates","Sage/MainView/IntegrationContract/MatchingOptionsConfig","Sage/MainView/IntegrationContract/AdvancedSearchOptions","Sage/MainView/IntegrationContract/InvoiceRTDV","Sage/MainView/IntegrationContract/SalesOrderRTDV","Sage/MainView/IntegrationContract/CustomerPaymentsRTDV"],function(){});},"Sage/UI/Controls/Select":function(){define("Sage/UI/Controls/Select",["dijit/form/Select","dojo/_base/declare"],function(_1945,_1946){var _1947=_1946("Sage.UI.Controls.Select",[_1945],{_hClickBody:false,shouldPublishMarkDirty:true,autoPostBack:false,maxHeight:dojo.isIE?146:155,postCreate:function(){this.connect(this,"onChange",this.onChanged);this.inherited(arguments);},destroy:function(){this.inherited(arguments);},onClickBody:function(e){if(dojo.isIE>=9&&this._opened){this.closeDropDown();}},onChanged:function(_1948){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){__doPostBack(this.id,"");}},closeDropDown:function(focus){if(dojo.isIE>=9&&this._hClickBody){dojo.disconnect(this._hClickBody);}this.inherited(arguments);},openDropDown:function(){if(dojo.isIE>=9){this._hClickBody=dojo.connect(document.body,"onclick",this,this.onClickBody);}this.inherited(arguments);}});return _1947;});},"Sage/QuickForms/Design/Editors/ComboBoxBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/ComboBoxBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/ComboBoxBasicPropertyEditor"],function(_1949,lang,_194a,_194b,_194c,_194d,_194e,_194f,_1950,_1951,_1952,_1953){return _1949("Sage.QuickForms.Design.Editors.ComboBoxBasicPropertyEditor",[_194a,_1951,_1950],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_1953);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/UI/Controls/PickList":function(){define("Sage/UI/Controls/PickList",["dojo/topic","dojo/_base/declare","dijit/_Widget","dijit/Tooltip","Sage/Data/BaseSDataStore","Sage/Utility","dijit/Tooltip","dojo/i18n!./nls/PickList","dojo/_base/lang","Sage/Utility/_LocalStorageMixin","Sage/Data/SDataServiceRegistry"],function(topic,_1954,_1955,_1956,_1957,util,_1958,nls,lang,_1959,_195a){var _195b=_1954("Sage.UI.Controls.PickList",[_1955,_1959],{dataStore:null,storeOptions:null,pickListName:"",canEditText:false,itemMustExist:true,maxLength:-1,storeMode:"text",sort:true,displayMode:"AsControl",clientId:"",required:false,placeInNodeId:"",autoPostBack:false,controlTooltip:"",buttonTooltip:"",shouldPublishMarkDirty:true,renderAsHyperlink:false,_textId:"",_codeId:"",_defaultValueId:"",_defaultCodeId:"",_storageNameSpace:"PickListData",okText:"",missingPickListText:"",constructor:function(_195c){this.storeOptions=_195c.storeOptions;this.dataStore=_195c.dataStore;this.clientId=_195c.clientId||"";var cid=this.clientId;this._textId=cid+"_Text";this._codeId=cid+"_Code";this._defaultValueId=cid+"_DefaultValue";this._defaultCodeId=cid+"_DefaultCode";if(nls){this.okText=nls.okText;this.missingPickListText=nls.missingPickListText;}},postCreate:function(){var node=dojo.byId(this.placeInNodeId);if(node){this._setDefaultFields();dojo.place(this.domNode,node,"first");}this.inherited(arguments);},uninitialize:function(){this.inherited(arguments);},_setStore:function(_195d){this.storeOptions={include:["items"],select:["Id","name","allowMultiples","valuesMustExist","required","alphaSorted","noneEditable","modifyDate","items/text","items/code","items/number"],resourceKind:"picklists",service:_195a.getSDataService("system",false,true,false),directQuery:{name:_195d}};this.dataStore=new _1957(this.storeOptions);},_setDefaultFields:function(){if(this.required){var text=dojo.byId(this._textId);if(text&&text.value===""){var code=dojo.byId(this._codeId);var _195e=dojo.byId(this._defaultValueId);var _195f=dojo.byId(this._defaultCodeId);text.value=_195e.value;if(this.storeMode==="text"){code.value=_195e.value;}else{code.value=_195f.value;}}}},_setupTooltips:function(_1960,_1961){if(this.controlTooltip&&this.controlTooltip!==""&&_1961){var t=new _1958({connectId:[_1961],label:this.controlTooltip,position:["below"]});}if(this.buttonTooltip&&this.buttonTooltip!==""&&_1960){var t2=new _1958({connectId:[_1960],label:this.buttonTooltip,position:["below"]});}},getPickListData:function(_1962){var list=this.getFromLocalStorage(this.pickListName,this._storageNameSpace);if(list){_1962.callback(list);return;}this.dataStore.fetch({onComplete:lang.hitch(this,function(data){var _1963;if(data&&data.length>0){_1963=data[0];var temp=_1963.items.$resources;if(this.sort){_1963.items.$resources=temp.sort(function(a,b){if(a.text<b.text){return -1;}if(a.text>b.text){return 1;}return 0;});}}else{_1963=this.missingPickListText;}this.saveToLocalStorage(this.pickListName,_1963,this._storageNameSpace);_1962.callback(_1963);}),onError:function(e){_1962.errback(e);},scope:this});},setASPNETInputs:function(_1964,_1965){if(this._textId&&this._codeId){var text=dojo.byId(this._textId);var code=dojo.byId(this._codeId);if(text&&code){text.value=_1964;if(this.storeMode=="text"){code.value=_1964;}else{code.value=_1965;}this.invokeChangeEvent();}}},invokeChangeEvent:function(){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){__doPostBack(this.clientId,"");}},_getCanEditTextAttr:function(){return this.canEditText;},_setCanEditTextAttr:function(value){this.canEditText=value;},_getItemMustExistAttr:function(){return this.itemMustExist;},_setItemMustExistAttr:function(value){this.itemMustExist=value;},_getMaxLengthAttr:function(){return this.maxLength;},_setMaxLengthAttr:function(value){this.maxLength=value;},_getStoreModeAttr:function(){return this.storeMode;},_setStoreModeAttr:function(value){this.storeMode=value;},_getPickListNameAttr:function(){return this.pickListName;},_setPickListNameAttr:function(value){this.pickListName=value;this._setStore(value);},statics:{}});return _195b;});},"Sage/UI/nls/UserType":function(){define("Sage/UI/nls/UserType",["Sage/LanguageList","dojo/_base/lang"],function(_1966,lang){var nls={root:{administratorText:"Administrator",templateText:"Template",remoteText:"Remote",webOnlyText:"Web Only",retiredText:"Retired",concurrentText:"Concurrent",webViewerText:"Web Viewer",networkText:"Network",addOnUserText:"Add-on User"}};return lang.mixin(_1966,nls);});},"Sage/UI/Controls/CopyToClipboard":function(){require({cache:{"url:Sage/UI/Controls/templates/CopyToClipboard.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" dojoAttachPoint=\"dialogNode\">\r\n        \r\n        <span>${helpText}</span>\r\n        <div style=\"width: 550px; height: 400px;\">\r\n            <div data-dojo-type=\"dijit.layout.TabContainer\" dojoAttachPoint=\"tabNode\" style=\"width: 100%; height: 100%;\">\r\n                <div data-dojo-type=\"dijit.layout.ContentPane\" title=\"${textTab}\">\r\n                    <div dojoAttachPoint=\"contentNode\"></div>\r\n                </div>\r\n            \r\n                <div data-dojo-type=\"dijit.layout.ContentPane\" title=\"${sourceTab}\">\r\n                    <textarea dojoAttachPoint=\"textNode\" data-dojo-type=\"dijit.form.SimpleTextarea\" style=\"width: 100%; height: 95%;\"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n            \r\n        <div style=\"float:right;padding-bottom:8px;\">\r\n            <button data-dojo-type=\"dijit.form.Button\" type=\"submit\" dojoAttachEvent=\"onClick:_closeClicked\">\r\n                ${closeText}\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n"}});define("Sage/UI/Controls/CopyToClipboard",["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/Dialog","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/SimpleTextarea","dijit/form/Button","dojo/_base/lang","Sage/Format","Sage/Utility","Sage/Utility/Email","Sage/Data/SDataServiceRegistry","dojo/_base/sniff","dojo/text!./templates/CopyToClipboard.html","dojo/i18n!./nls/CopyToClipboard","dojo/_base/declare"],function(_1967,_1968,_1969,_196a,_196b,_196c,_196d,_196e,lang,_196f,util,email,_1970,has,_1971,_1972,_1973){var _1974=_1973("Sage.UI.Controls.CopyToClipboard",[_1969,_1967,_1968],{templateString:_1971,widgetsInTemplate:true,textAlign:"left",calendarName:"calendar1",timeTextBoxName:"timeTextBox1",textNode:null,contentNode:null,closeText:"",dialogTitle:"",helpText:"",mashupName:"",queryName:"",service:null,template:"",entity:null,widgetTemplate:null,id:"copyToClipboard",constructor:function(_1975){this.service=_1970.getSDataService("mashups");this.inherited(arguments);},postMixInProperties:function(){lang.mixin(this,_1972);this.inherited(arguments);},show:function(){if(!window.clipboardData){this.dialogNode.set("title",this.dialogTitle);this.dialogNode.show();}this._readMashupFeed();},_readMashupFeed:function(_1976){var _1977=new Sage.SData.Client.SDataNamedQueryRequest(this.service),_1978=this.mashupName||"SummaryViewQueries",_1979=Sage.Services.getService("ClientEntityContext"),_197a=_1979.getContext(),_197b=_197a.EntityId,self=this;_1977.setApplicationName("$app");_1977.setResourceKind("mashups");_1977.uri.setCollectionPredicate("'"+this.mashupName+"'");_1977.setQueryName("execute");_1977.setQueryArg("_resultName",this.queryName);_1977.setQueryArg("_ids","'"+_197b+"'");_1977.read({success:dojo.hitch(self,function(data){this._mixinTemplateLocale();this.entity=data.$resources[0];this._buildTemplateWidget();this._setContentToCopy();if(_1976&&(typeof _1976==="function")){_1976.call(this,data);}}),failure:dojo.hitch(self,function(data){this.dialogNode.hide();})});},_mixinTemplateLocale:function(){var _197c=["Sage"],_197d=this.template.split("/"),i;for(i=0;i<_197d.length-1;i++){_197c.push(_197d[i]);}var path="dojo/i18n!"+_197c.join("/")+"/nls/"+_197d[_197d.length-1].replace(".html","");require([path],lang.hitch(this,function(nls){lang.mixin(this,nls);}));},_buildTemplateWidget:function(){var _197e=dojo["cache"]("Sage",this.template),temp=eval(_197e);this.widgetTemplate=new Simplate(temp);},_setContentToCopy:function(){var val=this.widgetTemplate.apply(this),_197f;this.contentNode.innerHTML=val;this.textNode.set("value",val);if(window.clipboardData){try{_197f=this.contentNode.innerText;window.clipboardData.setData("text",_197f);this.dialogNode.hide();}catch(e){}}},_closeClicked:function(_1980){this.onCloseClicked();},onCloseClicked:function(){},destroy:function(){var _1981=dijit.byId(this.dialogNode.id);if(_1981){setTimeout(function(){_1981.destroyRecursive(false);},1);this.inherited(arguments);}},OnEmailContentReady:function(_1982){this._readMashupFeed(function(){var _1983=dojo.byId(_1982+"_to"),_1984=(_1983)?_1983.value:"",_1985=dojo.byId(_1982+"_cc"),_1986=(_1985)?_1985.value:"",_1987=dojo.byId(_1982+"_bcc"),_1988=(_1987)?_1987.value:"",_1989=dojo.byId(_1982+"_subject"),_198a=(_1989)?_1989.value:"",_198b=util.getPlainText(this.contentNode),recip={};if(_1984!==""){recip.to=_1984;}if(_1986!==""){recip.cc=_1986;}if(_1988!==""){recip.bcc=_1988;}email.writeEmail(recip,_198a,_198b,false);});}});return _1974;});},"Sage/QuickForms/Design/nls/FormDesigner":function(){define("Sage/QuickForms/Design/nls/FormDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_198c,lang){var nls={root:{displayNameText:"Form"}};return lang.mixin(_198c,nls);});},"Sage/UI/UniqueToListValidationTextBox":function(){define("Sage/UI/UniqueToListValidationTextBox",["dijit/form/ValidationTextBox","dojo/_base/declare"],function(_198d,_198e){var _198f=_198e("Sage.UI.UniqueToListValidationTextBox",_198d,{notUniqueText:"This value already exists",uniqueList:"",_uniqueHash:{},isValid:function(_1990){var _1991=this.inherited(arguments);var value=this.get("value");return (!(value in this._uniqueHash)&&_1991);},_setUniqueListAttr:function(value){this.uniqueList=dojo.isString(value)?value.split(","):(dojo.isArray(value)?value:[value]);this._uniqueHash={};for(var i=0;i<this.uniqueList.length;i++){this._uniqueHash[this.uniqueList[i]]=1;}}});return _198f;});},"Sage/MainView/ActivityMgr/nls/ActivityCalendar":function(){define("Sage/MainView/ActivityMgr/nls/ActivityCalendar",["Sage/LanguageList","dojo/_base/lang"],function(_1992,lang){var nls={root:{completedText:"(Completed)"}};return lang.mixin(_1992,nls);});},"Sage/UI/Controls/nls/_DialogHelpIconMixin":function(){define("Sage/UI/Controls/nls/_DialogHelpIconMixin",["Sage/LanguageList","dojo/_base/lang"],function(_1993,lang){var nls={root:{helpTooltip:"Help"}};return lang.mixin(_1993,nls);});},"Sage/QuickForms/Design/ControlDesignerRegistry":function(){define("Sage/QuickForms/Design/ControlDesignerRegistry",["dojo/_base/lang","./GenericControlDesigner","./HiddenControlDesigner","./TextBoxControlDesigner","./UrlControlDesigner","./PhoneControlDesigner","./EmailControlDesigner","./CheckBoxControlDesigner","./PickListControlDesigner","./ComboBoxControlDesigner","./UserControlDesigner","./OwnerControlDesigner","./DateTimePickerControlDesigner","./DataGridControlDesigner","./NumericControlDesigner","./DataSourceDesigner","./CurrencyControlDesigner","./EditableGridControlDesigner"],function(lang,_1994,_1995,_1996,_1997,_1998,_1999,_199a,_199b,_199c,_199d,_199e,_199f,_19a0,_19a1,_19a2,_19a3,_19a4){var _19a5={"Sage.Platform.QuickForms.Controls.QFTextBox, Sage.Platform.QuickForms":_1996,"Sage.Platform.QuickForms.QFControls.QFHidden, Sage.Platform.QuickForms.QFControls":_1995,"Sage.SalesLogix.QuickForms.QFControls.QFSLXUrl, Sage.SalesLogix.QuickForms.QFControls":_1997,"Sage.SalesLogix.QuickForms.QFControls.QFSLXPhone, Sage.SalesLogix.QuickForms.QFControls":_1998,"Sage.SalesLogix.QuickForms.QFControls.QFSLXEmail, Sage.SalesLogix.QuickForms.QFControls":_1999,"Sage.Platform.QuickForms.QFControls.QFCheckBox, Sage.Platform.QuickForms.QFControls":_199a,"Sage.SalesLogix.QuickForms.QFControls.QFSLXPickList, Sage.SalesLogix.QuickForms.QFControls":_199b,"Sage.Platform.QuickForms.QFControls.QFListBox, Sage.Platform.QuickForms.QFControls":_199c,"Sage.SalesLogix.QuickForms.QFControls.QFSLXUser, Sage.SalesLogix.QuickForms.QFControls":_199d,"Sage.SalesLogix.QuickForms.QFControls.QFSLXOwner, Sage.SalesLogix.QuickForms.QFControls":_199e,"Sage.SalesLogix.QuickForms.QFControls.QFDateTimePicker, Sage.SalesLogix.QuickForms.QFControls":_199f,"Sage.SalesLogix.QuickForms.QFControls.QFDataGrid, Sage.SalesLogix.QuickForms.QFControls":_19a0,"Sage.SalesLogix.QuickForms.QFControls.QFSLXNumeric, Sage.SalesLogix.QuickForms.QFControls":_19a1,"Sage.Platform.QuickForms.QFControls.QFDataSource, Sage.Platform.QuickForms.QFControls":_19a2,"Sage.Platform.QuickForms.QFControls.QFHqlDataSource, Sage.Platform.QuickForms.QFControls":_19a2,"Sage.Platform.QuickForms.QFControls.QFMashupDataSource, Sage.Platform.QuickForms.QFControls":_19a2,"Sage.Platform.QuickForms.QFControls.QFSDataDataSource, Sage.Platform.QuickForms.QFControls":_19a2,"Sage.SalesLogix.QuickForms.QFControls.QFSLXCurrency, Sage.SalesLogix.QuickForms.QFControls":_19a3,"Sage.SalesLogix.QuickForms.QFControls.SDataGrid.QFSDataGrid, Sage.SalesLogix.QuickForms.QFControls":_19a4};var _19a6={"ccc0f01d-7ba5-408e-8526-a3f942354b3a":_1996,"f4ca6023-9f5f-4e41-8571-50ba94e8f233":_1996,"76c537a8-8b08-4b35-84cf-fa95c6c133b0":_1996,"b2ed309e-ea89-4eef-8051-6244987953a4":_1996,"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":_19a1,"f37c635c-9fbf-40d8-98d5-750a54a3cca1":_19a1,"a6bf2690-3477-4a18-9849-56abf8693934":_19a1,"2596d57d-89d6-4b72-9036-b18c64c5324c":_19a1,"6b0b3d51-0728-4b67-9473-52836a81da53":_19a1,"30053f5a-8d40-4db1-b185-1e4128eb26cc":_1996,"92432b4d-8206-4a96-ba7b-e4cbd374f148":_199a,"95ca9d52-6f0b-4a96-bd40-43583f41faf8":_199a,"3edc7c52-e711-431d-b150-969d88ebabf4":_199a,"1f08f2eb-87c8-443b-a7c2-a51f590923f5":_199f,"31e8638d-4232-4c61-8827-d94132a33887":_1999,"85f2bba5-1fb7-4ecf-941a-d98d4739c305":_1998,"b71918bf-fac1-4b62-9ed5-0b0294bc9900":_199b,"17541523-fc31-4269-ac97-df63290d0e31":_199e,"a3b52518-801b-44be-96bf-fdca3de84f7f":null,"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":null,"189a1a4e-396c-4146-95c0-93b5d9e7d160":null,"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":null,"3ca925e1-4b76-4621-a39c-a0d4cb7327d5":null,"68e04249-f7e2-4b63-90be-55fbb1f4aa77":null,"07370ef3-ad24-409f-86a8-ff2db5ee6d69":null,"5685161e-5f0a-4a36-83fe-89e8e462e9e7":_1997};return lang.setObject("Sage.QuickForms.Design.ControlDesignerRegistry",{fromType:_19a5,fromDataType:_19a6,getDesignerFor:function(entry,_19a7){var name=entry&&entry["$type"];return this.fromType[name]||((_19a7!==false)&&_1994);},getDesignerForDataType:function(_19a8,_19a9){return this.fromDataType[_19a8]||((_19a9!==false)&&_1996);}});});},"Sage/QuickForms/Design/Editors/nls/PickListAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/PickListAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_19aa,lang){var nls={root:{titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",allowMultiplesText:"Allow Multiple Selections:",allowMultiplesTooltipText:"Allows user to select more than one item.",canEditTextText:"Can Edit Text:",canEditTextTooltipText:"Allows user to type value.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",mustExistInListText:"Item Must Exist:",mustExistInListTooltipText:"Requires typed value to be on list.",pickListNameText:"Pick List Name:",pickListNameTooltipText:"Name of the list of values the user can select from when entering data.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",storageModeText:"Storage Mode:",storageModeTooltipText:"How the value is stored: Text, Id, or Code.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"},displayModeTypeText:{AsControl:"As Control",AsText:"As Text",AsHyperlink:"As Hyperlink"},storageModeTypeText:{Text:"Text",Id:"ID",Code:"Code"},pickListRequestErrorText:"Unable to retrieve picklists from server."}};return lang.mixin(_19aa,nls);});},"Sage/UI/nls/ActivityList":function(){define("Sage/UI/nls/ActivityList",["Sage/LanguageList","dojo/_base/lang"],function(_19ab,lang){var nls={root:{addMeetingText:"Schedule Meeting",addPhoneCallText:"Schedule Phone Call",addToDoText:"Schedule To-Do",helpText:"Help",completeText:"Complete",typeText:"Type",startDateText:"Date/Time",dateRangeText:"Date Range",durationText:"Duration",leaderText:"Leader",contactText:"Contact",opportunityText:"Opportunity",descriptionText:"Regarding",categoryText:"Category",firstNameText:"First Name",lastNameText:"Last Name"}};return lang.mixin(_19ab,nls);});},"Sage/UI/Dashboard/main":function(){define("Sage/UI/Dashboard/main",["Sage/UI/Dashboard/BaseWidget","Sage/UI/Dashboard/ChartingWidget","Sage/UI/Dashboard/Dashboard","Sage/UI/Dashboard/DashboardPage","Sage/UI/Dashboard/DashboardTabController","Sage/UI/Dashboard/DashboardWidget","Sage/UI/Dashboard/DashboardWidgetCell","Sage/UI/Dashboard/WidgetDefinition"],function(){});},"Sage/UI/Filters/EditFilterItems":function(){require({cache:{"url:Sage/UI/Filters/templates/EditFilterItems.html":"<div>\r\n    <div class=\"filter-items-dialog\" data-dojo-type=\"dijit.Dialog\" data-dojo-props=\"title:'${dialogTitle}'\" data-dojo-attach-point=\"dialogNode\">\r\n        <div class=\"filter-items-search\">\r\n            <label>${findItemText}</label> <input data-dojo-attach-point=\"textFind\" data-dojo-type=\"dijit.form.TextBox\" />\r\n            <span data-dojo-attach-point=\"buttonFind\" title=\"${findText}\" data-dojo-type=\"Sage.UI.ImageButton\" data-dojo-props=\"imageClass: 'icon_Find_16x16'\" data-dojo-attach-event=\"onClick:_onFindClick\"></span>&nbsp;\r\n\t\t\t<span data-dojo-attach-point=\"buttonClear\" title=\"${clearText}\" data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:_onClearClick\">${clearText}</span>\r\n        </div>\r\n        <div class=\"filter-clear-all\">\r\n            <input data-dojo-attach-point=\"checkAll\" data-dojo-type=\"dijit.form.CheckBox\" />\r\n            <label>${selectAllText}</label>\r\n        </div>\r\n        <div class=\"filter-items-dialog-content\" data-dojo-attach-point=\"contentNode\">\r\n        </div>\r\n        <div class=\"button-bar alignright\">\r\n            <button data-dojo-attach-point=\"buttonOK\" data-dojo-attach-event=\"onClick:_onOKClick\" data-dojo-type=\"dijit.form.Button\">${okText}</button>\r\n            <button data-dojo-attach-point=\"buttonCancel\" data-dojo-attach-event=\"onClick:_onCancelClick\" data-dojo-type=\"dijit.form.Button\">${cancelText}</button>\r\n        </div>\r\n    </div>\r\n</div>"}});define("Sage/UI/Filters/EditFilterItems",["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/Dialog","dijit/form/Button","Sage/UI/ImageButton","dijit/form/CheckBox","dijit/form/TextBox","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dijit/registry","Sage/UI/Controls/_DialogHelpIconMixin","Sage/Utility/Filters","dojo/json","dojo/parser","dojo/text!./templates/EditFilterItems.html","dojo/i18n!./nls/EditFilterItems"],function(_19ac,_19ad,_19ae,_19af,_19b0,_19b1,_19b2,_19b3,_19b4,array,lang,_19b5,_19b6,_19b7,_19b8,json,_19b9,_19ba,_19bb){return _19b4("Sage.UI.Filters.EditFilterItems",[_19ac,_19ad,_19ae],{templateString:_19ba,widgetsInTemplate:true,id:"editFilterItems",store:null,activeFilters:"",filter:null,checkBoxes:null,allItems:null,filterPanel:null,parent:null,formatter:null,baseFilter:"",selectAllText:"Select All",findItemText:"Find Item:",findText:"Find",clearText:"Clear",dialogTitle:"Edit Filter Items",okText:"OK",cancelText:"Cancel",count:1000,loading:false,handles:null,mainHandles:null,safeCheck:true,checkBoxTemplate:new Simplate(["<input id=\"{%: $.id %}\" ","name=\"{%: $.name %}\" ","data-dojo-type=\"dijit.form.CheckBox\" ","data-dojo-props=\"label: '{%: $.name %}'\" ","class=\"editFilterCheckBox\" />","<label for=\"{%: $.id %}\">{%: $.itemName %}</label><br />"]),constructor:function(_19bc){this.inherited(arguments);this.checkBoxes=[];this.allItems=[];this.handles=[];this.mainHandles=[];if(_19bb){this.selectAllText=_19bb.selectAllText;this.clearText=_19bb.clearText;this.findItemText=_19bb.findItemText;this.findText=_19bb.findText;this.dialogTitle=_19bb.dialogTitle;this.okText=_19bb.okText;this.cancelText=_19bb.cancelText;}},postCreate:function(){this.inherited(arguments);this.mainHandles.push(this.textFind.on("keyDown",lang.hitch(this,this._onFindMouseDown)));this.mainHandles.push(this.checkAll.on("click",lang.hitch(this,this._onCheckAllClick)));},_onCheckAllClick:function(){if(this.safeCheck){if(this.checkAll.checked){this._onSelectAllClick();}else{this._onClearAllClick();}}},showDialog:function(){this.requestData();lang.mixin(this.dialogNode,new _19b7());this.dialogNode.createHelpIconByTopic("editFilterItems");this.dialogNode.show();},hideDialog:function(){this.dialogNode.hide();},_onClearAllClick:function(){array.forEach(this.checkBoxes,function(_19bd){var label=_19bd.get("label"),index=array.indexOf(this.allItems,_19bd.get("label"));if(index===-1){this.allItems.push(label);}_19bd.set("checked",false);},this);},_onSelectAllClick:function(){array.forEach(this.checkBoxes,function(_19be){var label=_19be.get("label"),index=array.indexOf(this.allItems,_19be.get("label"));if(index>-1){this.allItems.splice(index,1);}_19be.set("checked",true);},this);},_onClearClick:function(){this.textFind.set("value","");this._onFindClick();},_onCancelClick:function(){this.textFind.set("value","");this._onFindClick();this.dialogNode.hide();this.allItems=[];},_onOKClick:function(){this.textFind.set("value","");this._onFindClick();var data=this.filterPanel._configuration._hiddenFilters||{},key=this.filterPanel._configuration._hiddenFiltersKey,_19bf=Sage.Services.getService("ClientGroupContext"),_19c0=_19bf&&_19bf.getContext(),prop=_19c0.CurrentEntity+"_"+this.filter.filterName,items=[];if(!data[prop]){data[prop]={expanded:false,hidden:false};}data[prop].items=this.allItems;_19b8.setHiddenFilters(key,json.stringify(data));if(this.parent){this.parent.refresh();}this.dialogNode.hide();this.allItems=[];},uninitialize:function(){if(!this.contentNode){return;}array.forEach(this.mainHandles,function(_19c1){_19c1.remove();});this._destroyContent();this.checkBoxes=null;this.allItems=null;this.checkAll.destroy(false);this.buttonCancel.destroy(false);this.buttonOK.destroy(false);this.buttonFind.destroy(false);this.textFind.destroy(false);this.dialogNode.destroy(false);this.inherited(arguments);},requestData:function(){if(!this.loading){this._destroyContent();this.checkBoxes=[];this.activeFilters=this.store.request.getQueryArg("_activeFilter");this.store.request.setQueryArg("_activeFilter",this.baseFilter);}this.loading=true;this.store.fetch({onError:lang.hitch(this,this._onFetchError),onComplete:lang.hitch(this,this._onFetchComplete),count:this.count});},_onFindMouseDown:function(event){if(event.keyCode===13){this._onFindClick();}},_onFindClick:function(){if(!this.loading){var _19c2=this.textFind.get("value");if(_19c2){this.store.where="displayName like \"%"+this.textFind.get("value")+"%\"";}else{this.store.where="";}this.requestData();}},_destroyContent:function(){if(!this.contentNode){return;}array.forEach(_19b6.findWidgets(this.contentNode),function(_19c3){_19c3.destroy(false);});array.forEach(this.handles,function(_19c4){_19c4.remove();});this.handles=[];this.checkBoxes=[];this.contentNode.innerHTML="";},_onFetchError:function(){},_onCheckClick:function(e){var self=this.self,_19c5=this.checkBox,name=_19c5&&_19c5.get("label"),index;if(_19c5.checked){index=array.indexOf(self.allItems,name);if(index>-1){self.allItems.splice(index,1);}}else{self._safeCheckAll(false);self.allItems.push(name);}},_safeCheckAll:function(_19c6){this.safeCheck=false;this.checkAll.set("checked",_19c6);this.safeCheck=true;},_onFetchComplete:function(items){var entry,_19c7,id,_19c8,_19c9=[],i,len=items.length,name,_19ca;for(i=0;i<len;i++){entry=items[i];_19ca=entry.$descriptor;if(this.formatter){_19ca=this.formatter(entry.$descriptor);}_19c7=_19ca+" ("+entry.value+")";id=[this.filter.filterName,i].join("_");name=entry.name&&entry.name.trim();if(name){name=name.replace("'","\\'");_19c9.push(this.checkBoxTemplate.apply({id:id,name:name,itemName:_19c7}));}}_19c8=_19b5.toDom(_19c9.join(""));_19b5.place(_19c8,this.contentNode,"last");this._finishedLoading();},_finishedLoading:function(){if(this.activeFilters){this.store.request.setQueryArg("_activeFilter",this.activeFilters);}this._parseCheckBoxes();this.setupCheckState();this.loading=false;},_parseCheckBoxes:function(){var _19cb;_19b9.parse(this.contentNode);_19cb=_19b6.findWidgets(this.contentNode);array.forEach(_19cb,function(_19cc){_19cc.on("click",lang.hitch({checkBox:_19cc,self:this},this._onCheckClick));this.checkBoxes.push(_19cc);},this);},setupCheckState:function(){var data=this.filterPanel._configuration._hiddenFilters||{},_19cd=Sage.Services.getService("ClientGroupContext"),_19ce=_19cd&&_19cd.getContext(),prop=_19ce.CurrentEntity+"_"+this.filter.filterName,_19cf=this.allItems.length===0;if(data[prop]){array.forEach(this.checkBoxes,function(_19d0){var _19d1,_19d2,label=_19d0.get("label");_19d1=array.indexOf(data[prop].items,label);_19d2=array.indexOf(this.allItems,label);if(_19d1>-1){_19d0.set("checked",false);if(_19d2===-1&&_19cf){this.allItems.push(label);}}else{_19d0.set("checked",true);}_19d2=array.indexOf(this.allItems,label);if(_19d2>-1){_19d0.set("checked",false);}else{_19d0.set("checked",true);}},this);this._safeCheckAll(this.allItems.length===0);}}});});},"Sage/MainView/ActivityMgr/AllOpenListPanelConfig":function(){define("Sage/MainView/ActivityMgr/AllOpenListPanelConfig",["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SDataSummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Columns/DateTime","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/i18n!./nls/ActivityListPanelConfig"],function(_19d3,_19d4,_19d5,_19d6,_19d7,_19d8,_19d9,_19da,_19db){var _19dc=_19da("Sage.MainView.ActivityMgr.AllOpenListPanelConfig",[_19d3],{constructor:function(){this._nlsResources=_19db;this._listId="allOpen";this._resourceKind="activities";this.entityName="Activity";this._contextMenu="ActivityListContextMenu";this._scheduleContextMenu="ScheduleContextMenu";this._service=_19d9.getSDataService("system");this._structure=this._getStructure();this._select=this._getSelect();this._include=this._getInclude();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.list.selectionMode="single";this.summary=this._getSummaryConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();dojo.subscribe("/entity/activity/change",this._onListRefresh);dojo.subscribe("/entity/activity/delete",this._onListRefresh);dojo.subscribe("/entity/activity/create",this._onListRefresh);},_onListRefresh:function(event){var _19dd=Sage.Services.getService("ActivityService");_19dd.refreshList("allopen");},_getSelect:function(){var _19de=["$key","Attachment","Timeless","Recurring","RecurIterations","Alarm","Type","StartDate","Duration","ContactName","ContactId","LeadName","LeadId","AccountName","AccountId","Description","Priority","Leader","RecurrenceState"];return _19de;},_getInclude:function(){var _19df=["$descriptors"];return _19df;},_getSort:function(){var sort=[{attribute:"StartDate",descending:true}];return sort;},_getWhere:function(){var where="";where="(Type ne \"atLiterature\" )";return where;},_getStructure:function(){var _19e0="<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />";var _19e1="<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />";var _19e2="<img style='width: 16px; height: 16px' src='images/icons/Alarm_16x16.gif' title='"+this._nlsResources.colNameAlarm+"' alt='"+this._nlsResources.colNameAlarm+"' />";var _19e3=this._nlsResources.colNameType||"Type";var _19e4=this._nlsResources.colNameStartDate||"Start Date";var _19e5=this._nlsResources.colNameDuration||"Duration";var _19e6=this._nlsResources.colNameAccount||"Account";var _19e7=this._nlsResources.colNameRegarding||"Regarding";var _19e8=this._nlsResources.colNamePriority||"Priority";var _19e9=this._nlsResources.colNameUserId||"Leader";var _19ea=this._nlsResources.colNameTypeName||"Type";var _19eb=this._nlsResources.colNameContactName||"Name";var _19ec=[{field:"Alarm",name:_19e2,type:_19d5.activityAlarmCell,width:"20px"},{field:"Attachment",name:_19e0,type:_19d5.activityAttachCell,width:"20px"},{field:"Recurring",name:_19e1,type:_19d5.activityRecurringCell,width:"20px"},{field:"Type",name:_19e3,type:_19d5.activityTypeCell,width:"90px"},{field:"StartDate",name:_19e4,type:_19d8,timelessField:"Timeless",width:"100px"},{field:"Duration",name:_19e5,type:_19d5.activityDurationCell,width:"40px"},{field:"ContactId",name:_19ea,type:_19d5.activityNameTypeCell,width:"40px"},{field:"ContactName",name:_19eb,type:_19d5.activityNameCell,width:"200px"},{field:"AccountName",name:_19e6,type:_19d5.activityAccountCell,width:"200px"},{field:"Description",name:_19e7,width:"100px"},{field:"Priority",name:_19e8,width:"40px"},{field:"Leader",name:_19e9,type:_19d5.activityLeaderCell,width:"200px"}];return _19ec;},_getDetailConfig:function(){var _19ed=this._getSummaryDetailRequestConfig();var _19ee={resourceKind:this._resourceKind,requestConfiguration:_19ed,templateLocation:"MainView/ActivityMgr/Templates/AllOpenDetailSummary.html"};return _19ee;},_getSummaryListRequestConfig:function(){var _19ef={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Attachment","Timeless","Recurring","RecurIterations","Alarm","Type","StartDate","Duration","ContactName","ContactId","LeadName","LeadId","AccountName","AccountId","Description","Priority","Leader/$descriptor","Location","TicketId","TicketNumber","OpportunityId","OpportunityName","Notes","RecurrenceState","PhoneNumber"],include:["$descriptors"],useBatchRequest:true};return _19ef;},_getSummaryDetailRequestConfig:function(){var _19f0={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Attachment","Timeless","Recurring","RecurIterations","Alarm","Type","StartDate","Duration","ContactName","ContactId","LeadName","LeadId","AccountName","AccountId","Description","Priority","Leader/$descriptor","Location","TicketId","TicketNumber","OpportunityId","OpportunityName","LongNotes","RecurrenceState","PhoneNumber"],include:["$descriptors"],useBatchRequest:true};return _19f0;},_getFormatterScope:function(){var _19f1=this._getSummaryListRequestConfig();var _19f2=new _19d6({templateLocation:"MainView/ActivityMgr/templates/AllOpenListSummary.html",resetDataManager:true,requestConfiguration:_19f1});return _19f2;},_getToolBars:function(){var _19f3={items:[]};return _19f3;},getTimelessProperty:function(_19f4){return "Timeless";}});return _19dc;});},"Sage/TaskPane/main":function(){define("Sage/TaskPane/main",["Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/UserTasklet","Sage/TaskPane/AccountingTasksTasklet","Sage/TaskPane/ActivityManagerTasklet","Sage/TaskPane/ActivityTaskConfigurationProvider","Sage/TaskPane/ActivityTaskContents","Sage/TaskPane/ActivityTaskPaneActions","Sage/TaskPane/ActivityTaskPaneItem","Sage/TaskPane/CommonTasksTasklet","Sage/TaskPane/GroupListTasklet","Sage/TaskPane/LeadTasksTasklet","Sage/TaskPane/LiteratureManagementTasks","Sage/TaskPane/OpportunityTasksTasklet","Sage/TaskPane/SecuredActionTasklet","Sage/TaskPane/TaskPaneContent","Sage/TaskPane/TaskPaneItem","Sage/TaskPane/SecurityManagerTasksTasklet"],function(){});},"Sage/QuickForms/Design/ControlDesigner":function(){define("Sage/QuickForms/Design/ControlDesigner",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","require","dojo/string","dojo/topic","dojo/dom-class","dojo/query","dijit/_Contained","./PropertyValueError","dojo/NodeList-traverse","dojo/i18n!./nls/ControlDesigner"],function(_19f5,lang,array,_19f6,_19f7,topic,_19f8,query,_19f9,_19fa,_19fb,_19fc){return _19f5("Sage.QuickForms.Design.ControlDesigner",[_19f9],{designSupport:{visible:true},_checked:true,entry:null,editors:null,form:null,helpTopicName:"",column:0,row:0,displayNameText:null,constructor:function(){lang.mixin(this,_19fc);},set:function(name,value){var _19fd=this.inherited(arguments);var names=this._getAttrNames(name),_19fe=this[names.s];if(lang.isFunction(_19fe)){topic.publish("/quickforms/design/designerModified",this,name,value,_19fd,this);}return _19fd;},_isOnDesignSurface:function(){var _19ff=this._surfaceType||(this._surfaceType=_19f6("./DesignSurface"));var _1a00=this.getParent();return (_1a00&&_1a00.isInstanceOf(_19ff));},_getControlIdAttr:function(){return lang.getObject("ControlId",false,this.entry);},_setControlIdAttr:function(value){lang.setObject("ControlId",value,this.entry);},_getCaptionAttr:function(){return lang.getObject("Caption",false,this.entry);},_setCaptionAttr:function(value){lang.setObject("Caption",value,this.entry);},_getCaptionAlignmentAttr:function(){return lang.getObject("CaptionAlignment",false,this.entry);},_setCaptionAlignmentAttr:function(value){lang.setObject("CaptionAlignment",value,this.entry);this.applyCaptionAlignment(value);},_getControlNameAttr:function(){return this.displayNameText;},_getEnabledAttr:function(){return lang.getObject("Enabled",false,this.entry);},_setEnabledAttr:function(value){lang.setObject("Enabled",value,this.entry);},_getFormAttr:function(){return this.form;},_getIsReadOnlyAttr:function(){return lang.getObject("IsReadOnly",false,this.entry);},_setIsReadOnlyAttr:function(value){lang.setObject("IsReadOnly",value,this.entry);},_getToolTipAttr:function(){return lang.getObject("ToolTip",false,this.entry);},_setToolTipAttr:function(value){lang.setObject("ToolTip",value,this.entry);},_getVisibleAttr:function(){return lang.getObject("Visible",false,this.entry);},_setVisibleAttr:function(value){lang.setObject("Visible",value,this.entry);this.applyVisibility(value);},_getRowAttr:function(){return lang.getObject("Row",false,this.entry);},_setRowAttr:function(value){if(value===this.get("row")){return;}if(this._checked&&this._isOnDesignSurface()){var _1a01=this.getParent().validateMove(this,value,this.get("column"));if(_1a01){throw new _19fa(_1a01,this.get("row"));}}if(this._checked&&this._isOnDesignSurface()){this.getParent().moveWidget(this,value,this.get("column"));}else{lang.setObject("Row",value,this.entry);}},_getRowSpanAttr:function(){return lang.getObject("RowSpan",false,this.entry);},_setRowSpanAttr:function(value){if(value===this.get("rowSpan")){return;}if(this._checked&&this._isOnDesignSurface()){var _1a02=this.getParent().validateSize(this,value,this.get("columnSpan"));if(_1a02){throw new _19fa(_1a02,this.get("rowSpan"));}}lang.setObject("RowSpan",value,this.entry);if(this._checked&&this._isOnDesignSurface()){this.getParent().layout(true);}},_getColumnAttr:function(){return lang.getObject("Column",false,this.entry);},_setColumnAttr:function(value){if(value===this.get("column")){return;}if(this._checked&&this._isOnDesignSurface()){var _1a03=this.getParent().validateMove(this,this.get("row"),value);if(_1a03){throw new _19fa(_1a03,this.get("column"));}}if(this._checked&&this._isOnDesignSurface()){this.getParent().moveWidget(this,this.get("row"),value);}else{lang.setObject("Column",value,this.entry);}},_getColumnSpanAttr:function(){return lang.getObject("ColumnSpan",false,this.entry);},_setColumnSpanAttr:function(value){if(value===this.get("columnSpan")){return;}if(this._checked&&this._isOnDesignSurface()){var _1a04=this.getParent().validateSize(this,this.get("rowSpan"),value);if(_1a04){throw new _19fa(_1a04,this.get("columnSpan"));}}lang.setObject("ColumnSpan",value,this.entry);if(this._checked&&this._isOnDesignSurface()){this.getParent().layout(true);}},_getDataBindingsAttr:function(){return lang.getObject("DataBindings",false,this.entry);},_setDataBindingsAttr:function(value){lang.setObject("DataBindings",value,this.entry);},findDataBinding:function(_1a05){var _1a06=this.get("dataBindings");if(_1a06){for(var i=0;i<_1a06.length;i++){if(_1a05&&_1a05(_1a06[i])){return _1a06[i];}}}return null;},unchecked:function(fn){this._checked=false;try{fn.call(this,this);}finally{this._checked=true;}},applyCaptionAlignment:function(_1a07){if(!this.designCaptionNode||!this.fieldClass){return;}_1a07=_1a07||this.get("captionAlignment");_19f8.remove(this.designCaptionNode,_19f7.substitute("${0}-left ${0}-center ${0}-right",[this.fieldClass+"-caption"]));_19f8.add(this.designCaptionNode,_19f7.substitute("${0}-caption-${1}",[this.fieldClass,_1a07]));},applyVisibility:function(_1a08){if(!(this.containerNode)){return;}if(typeof _1a08==="undefined"){_1a08=this.get("visible");}_19f8.toggle(this.containerNode,"design-visible-false",!_1a08);},setupFor:function(_1a09){this.entry={"$type":this.quickFormControlType,"Row":0,"RowSpan":1,"Column":0,"ColumnSpan":1};this.set("caption",_1a09["displayName"]);this.set("captionAlignment","left");this.set("controlId",this.form.createUniqueId(_1a09["propertyName"]));this.set("controlLabelPlacement","left");this.set("enabled",true);this.set("isReadOnly",false);this.set("toolTip","");this.set("visible",true);}});});},"Sage/UI/Alarms/AlarmPopup":function(){define("Sage/UI/Alarms/AlarmPopup",["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/layout/ContentPane","Sage/Data/WritableSDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility","dojo/string","Sage/UI/Alarms/AlarmPane","Sage/UI/Alarms/UnconfirmedPane","Sage/UI/ImageButton","dojo/i18n","dojo/i18n!./nls/AlarmPopup","dojo/_base/declare"],function(_1a0a,_1a0b,_1a0c,_1a0d,_1a0e,_1a0f,_1a10,_1a11,_1a12,_1a13,_1a14,i18n,_1a15,_1a16){var _1a17=_1a16("Sage.UI.Alarms.AlarmPopup",[_1a0c,_1a0a,_1a0b],{options:{displayPastDueInToolbar:true,displayAlertsInToolbar:true,promptAlerts:true,includeAlarms:true,includeConfirmations:true,pollInterval:1,defaultSnooze:"5"},_confirmCount:-1,_alarmCount:-1,_dataRequested:false,widgetsInTemplate:true,isOpen:false,templateString:["<div class=\"alarm-popup\">","<div class=\"alarm-title\"><span class=\"alarm-main-title\">&nbsp;${title}</span></div>","<div class=\"alarm-title\">","<span class=\"alarm-tab-head\">&nbsp;</span>","<span dojoAttachEvent=\"onclick:_showAlarmPane\" dojoAttachPoint=\"_alarmBtn\" class=\"alarm-tab alarm-tab-selected\">${alarmsText}</span>","<span dojoAttachEvent=\"click:_showUnconfirmedPane\" dojoAttachPoint=\"_confBtn\" class=\"alarm-tab\">${unconfirmedText}</span>","<span class=\"alarm-tab-tail\">&nbsp;</span>","<span class=\"alarm-title-tools\">","<span dojoType=\"Sage.UI.ImageButton\" id=\"compButton\" imageClass=\"icon_complete_activity_16x16\" title=\"${completeText}\" dojoAttachEvent=\"onClick:_completeClick\" dojoAttachPoint=\"compButton\"></span>","<span dojoType=\"Sage.UI.ImageButton\" id=\"delButton\" imageClass=\"icon_Delete_16x16\" title=\"${deleteText}\" dojoAttachEvent=\"onClick:_deleteClick\" dojoAttachPoint=\"delButton\"></span>","<span dojoType=\"Sage.UI.ImageButton\" imageClass=\"icon_Help_16x16\" title=\"${helpText}\" dojoAttachEvent=\"onClick:_showHelp\" ></span>","</span>","</div>","<div data-dojo-type=\"dijit.layout.StackContainer\" dojoAttachPoint=\"_panelContainer\" class=\"alarm-body\" >","<div data-dojo-type=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_alarmPane\" class=\"alarm-pane\" title=\"alarms\" >","<div data-dojo-type=\"Sage.UI.Alarms.AlarmPane\" dojoAttachPoint=\"_alarms\" dojoAttachEvent=\"onAlertChanged:_alarmchange\"></div>","</div>","<div data-dojo-type=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_confPane\" class=\"alarm-pane\" title=\"Unconfirmed\">","<div data-dojo-type=\"Sage.UI.Alarms.UnconfirmedPane\" dojoAttachPoint=\"_confirms\" dojoAttachEvent=\"onAlertChanged:_confchange\"></div>","</div>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,_1a15);},_setOptionsAttr:function(_1a18){this.options=dojo.mixin(this.options,_1a18);this._alarms.setDefaultSnooze(this.options.defaultSnooze||"5");},_getOptionsAttr:function(){return this.options;},drawAlerts:function(){this._dataRequested=true;if(this.options.includeAlarms){if(!this.alarmStore){this.alarmStore=new _1a0e({service:_1a0f.getSDataService("system"),resourceKind:"useractivities",include:["Activity","User","$descriptors"],sort:[{attribute:"Activity.StartDate",descending:true}]});this._alarms.store=this.alarmStore;}this._fetchAlarms();}else{dojo.addClass(this._alarmBtn,"display-none");this._showUnconfirmedPane();}if(this.options.includeConfirmations){if(!this.confirmStore){this.confirmStore=new _1a0e({service:_1a0f.getSDataService("dynamic"),resourceKind:"usernotifications",include:["Activity","$descriptors"],select:["Type","Notes","FromUserId","ToUserId","SendDate","Activity/AccountName","Activity/AccountId","Activity/ActivityId","Activity/ContactName","Activity/ContactId","Activity/Description","Activity/Duration","Activity/LeadId","Activity/LeadName","Activity/OpportunityName","Activity/OpportunityId","Activity/Recurring","Activity/StartDate","Activity/Timeless","Activity/Type","Activity/Location","Activity/Leader","Activity/TicketId","Activity/TicketNumber"],sort:[{attribute:"Activity.StartDate",descending:true}]});this._confirms.store=this.confirmStore;}this._fetchConfirms();}else{dojo.addClass(this._confBtn,"display-none");this._showAlarmPane();}},_fetchAlarms:function(){if(this.options.includeAlarms&&this.alarmStore){var where=_1a11.substitute("(User.Id eq '${0}' and Status ne 'asDeclned') and ((Alarm eq true and AlarmTime ne null and AlarmTime lt '${1}') or (Alarm eq null and AlarmTime eq null and Activity.Alarm eq true and Activity.AlarmTime lt '${1}'))",[_1a10.getClientContextByKey("userID"),_1a10.Convert.toIsoStringFromDate(new Date())]);this.alarmStore.fetch({query:where,count:80,start:0,onComplete:this._onAlarmRequestComplete,scope:this});}},_fetchConfirms:function(){if(this.options.includeConfirmations&&this.confirmStore){this.confirmStore.fetch({query:_1a11.substitute("ToUserId eq '${0}' and Type eq 'New'",[_1a10.getClientContextByKey("userID")]),count:40,start:0,onComplete:this._onConfirmRequestComplete,scope:this});}},_onAlarmRequestComplete:function(data){this._alarms._setAlertItemsAttr(data,this.isOpen);this._alarmCount=data.length;this._checkWhichVisible();},_onConfirmRequestComplete:function(data){this._confirms._setAlertItemsAttr(data,this.isOpen);this._confirmCount=data.length;this._checkWhichVisible();},_checkWhichVisible:function(){if(this._alarmCount>0&&this.options.includeAlarms){this._showAlarmPane();}else{if(this._alarmCount===0&&this._confirmCount>0&&this.options.includeConfirmations){this._showUnconfirmedPane();}}},_alarmchange:function(count){dojo.html.set(this._alarmBtn,this.alarmsText+" ("+count+") ");this._alarmCount=count;if(count<1){this._checkWhichVisible();}this.onAlertChanged();},_confchange:function(count){dojo.html.set(this._confBtn,this.unconfirmedText+" ("+count+") ");this._confirmCount=count;if(count<1){this._checkWhichVisible();}this.onAlertChanged();},onOpen:function(){this.isOpen=true;this._panelContainer.resize();if(!this._dataRequested){this.drawAlerts();}else{this._checkWhichVisible();}},onClose:function(){this.isOpen=false;this._alarms.closeTooltips();this._confirms.closeTooltips();},startup:function(){this.inherited(arguments);dojo.subscribe("/entity/activity/delete",this,this.reloadData);},reloadData:function(){this._fetchAlarms();this._fetchConfirms();},reloadAlarms:function(){this._fetchAlarms();},reloadConfirms:function(){this._fetchConfirms();},_showAlarmPane:function(){this._panelContainer.selectChild(this._alarmPane);dojo.addClass(this._alarmBtn,"alarm-tab-selected");dojo.removeClass(this._confBtn,"alarm-tab-selected");dojo.removeClass(this.compButton.domNode,"display-none");dojo.removeClass(this.delButton.domNode,"display-none");this._alarms.onShow();},_showUnconfirmedPane:function(){this._panelContainer.selectChild(this._confPane);dojo.removeClass(this._alarmBtn,"alarm-tab-selected");dojo.addClass(this._confBtn,"alarm-tab-selected");dojo.addClass(this.compButton.domNode,"display-none");dojo.addClass(this.delButton.domNode,"display-none");this._confirms.onShow();},_completeClick:function(){this._alarms.completeSelected();},_deleteClick:function(){this._alarms.deleteSelected();},_showHelp:function(){_1a10.openHelp("alerts");},getAlertCount:function(){return this._alarms.getUnhandledAlertCount()+this._confirms.getUnhandledAlertCount();},onAlertChanged:function(){}});return _1a17;});},"Sage/QuickForms/Design/Editors/CheckBoxBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/CheckBoxBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CheckBoxBasicPropertyEditor"],function(_1a19,lang,_1a1a,_1a1b,_1a1c,_1a1d,_1a1e,_1a1f,_1a20,_1a21,_1a22){return _1a19("Sage.QuickForms.Design.Editors.CheckBoxBasicPropertyEditor",[_1a1a,_1a20,_1a1f],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_1a22);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/QuickForms/Design/Editors/RowBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/RowBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dojox/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/RowBasicPropertyEditor"],function(_1a23,lang,_1a24,_1a25,_1a26,_1a27,_1a28,_1a29,_1a2a,_1a2b,_1a2c){return _1a23("Sage.QuickForms.Design.Editors.RowBasicPropertyEditor",[_1a24,_1a2a,_1a29],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.indexTooltipText %}\">","<label>{%= $.indexText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_index\" data-dojo-attach-event=\"onChange:_onIndexChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_index:null,titleText:"Basic",appearanceText:"Appearance",indexText:"Index:",indexTooltipText:"Number of the row or column, beginning with zero.",constructor:function(){lang.mixin(this,_1a2c);},setup:function(){this.inherited(arguments);this._index.set("value",this._designer.get("index"));},_onIndexChange:function(value){}});});},"Sage/UI/ListPanel":function(){define("Sage/UI/ListPanel",["dojo/i18n","dijit/layout/BorderContainer","dijit/layout/StackContainer","dijit/layout/ContentPane","dijit/Toolbar","dijit/ToolbarSeparator","dojox/grid/EnhancedGrid","Sage/_Templated","Sage/UI/Filters/FilterManager","Sage/UI/ToolBarLabel","dijit/Menu","dojox/grid/enhanced/plugins/Menu","Sage/Utility","dojox/storage/LocalStorageProvider","Sage/UI/_DetailPane","dijit/_Widget","dojox/grid/enhanced/plugins/IndirectSelection","Sage/UI/Grid/Plugins/ShowHideColumns","dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dojo/i18n!./nls/ListPanel","dojo/_base/sniff","dojo/dom-geometry","dijit/registry","dojo/_base/connect","dojo/ready"],function(i18n,_1a2d,_1a2e,_1a2f,_1a30,_1a31,_1a32,_1a33,_1a34,_1a35,_1a36,_1a37,util,_1a38,_1a39,_1a3a,_1a3b,_1a3c,array,lang,_1a3d,_1a3e,has,_1a3f,_1a40,_1a41,ready){var _1a42=_1a3d("Sage.UI.ListPanel",[_1a2d,_1a3a,_1a33],{widgetsInTemplate:true,contentTemplate:new Simplate(["{%! $.menuTemplate %}","{%! $.listTemplate %}","{%! $.detailTemplate %}"]),listTemplate:new Simplate(["<div data-dojo-type=\"dijit.layout.StackContainer\" region=\"center\" splitter=\"true\" data-dojo-attach-point=\"_gridContainer\">","<div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-attach-point=\"_noConfigurationPane\"></div>","<div id=\"{%= $.id %}_listGrid\" columnReordering=\"true\" class=\"listGrid\" data-dojo-type=\"{%= $.gridType %}\" data-dojo-attach-point=\"_listGrid\" plugins=\"{menus:{selectedRegionMenu:'_listContextmenu', rowMenu:'_listContextmenu'}, indirectSelection: {%: $._indirectSelection%}, showHideColumns: true}\" dojoAttachEvent=\"onRowClick:_onRowClick,onRowContextMenu:_onRowContextMenu,onSelected:_onSelectedInList,onSelectionChanged:_onSelectionChanged,onResizeColumn:_onResizeColumn,onHeaderCellClick:_onHeaderCellClick,onCellClick:_onCellClick,onRowDblClick:_onRowDblClick\">","<div data-dojo-type=\"dijit.Menu\" id=\"_listContextmenu\" dojotAttachPoint=\"_listContextmenu\" style=\"display:none\" ></div>","</div>","<div id=\"{%= $.id %}_summaryGrid\" class=\"summaryGrid\" data-dojo-type=\"{%= $.gridType %}\" selectionMode=\"none\" data-dojo-attach-point=\"_summaryGrid\" dojoAttachEvent=\"onRowClick:_onRowClick,onRowContextMenu:_onRowContextMenu,onSelected:_onSelectedInSummary,onSelectionChanged:_onSelectionChanged\"></div>","</div>"]),menuTemplate:new Simplate(["<div data-dojo-type=\"dijit.Toolbar\" region=\"top\" splitter=\"false\" id=\"{%= $.id %}_toolbar\" style=\"{%= $.toolbarStyle %}\" data-dojo-attach-point=\"_tbar\" class=\"list-panel-tbar right-tools\">","<div data-dojo-type=\"Sage.UI.ToolBarLabel\" label=\"\" data-dojo-attach-point=\"_tbarLabel\" class=\"list-panel-left-tools\"></div>","<div data-dojo-type=\"Sage.UI.ToolBarLabel\" label=\"{%= $.unsavedDataText %}\" data-dojo-attach-point=\"_unsavedDataLabel\" class=\"display-none\"></div>","<div data-dojo-type=\"Sage.UI.ToolBarLabel\" label=\"\" data-dojo-attach-point=\"_filterSummary\" class=\"filter-summary-view\"></div>","<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\" id=\"{%= $.id %}_detailBtn\" data-dojo-attach-point=\"_detailButton\" dojoAttachEvent=\"onClick:toggleDetail\" class=\"list-panel-tool-detail\">{%= $.detailText %}</div>","<span data-dojo-type=\"dijit.ToolbarSeparator\" data-dojo-attach-point=\"_buttonSection\" class=\"list-panel-tool-section\"></span>","<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\" id=\"{%= $.id %}_listBtn\" data-dojo-attach-point=\"_listButton\" dojoAttachEvent=\"onClick:showList\" class=\"list-panel-tool-list\">{%= $.listText %}</div>","<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\" id=\"{%= $.id %}_summaryBtn\" data-dojo-attach-point=\"_summaryButton\" dojoAttachEvent=\"onClick:showSummary\" class=\"list-panel-tool-summary\">{%= $.summaryText %}</div>","<div data-dojo-type=\"Sage.UI.ImageButton\" iconClass=\"Global_Images icon16x16 icon_refresh\"  tooltip=\"{%: $.refreshText %}\" id=\"refreshBtn\" data-dojo-attach-point=\"_refreshButton\" dojoAttachEvent=\"onClick:refreshView\" class=\"list-panel-tool-help\"></div>","<div data-dojo-type=\"Sage.UI.ImageButton\" iconClass=\"Global_Images icon16x16 icon_Help_16x16\" tooltip=\"{%: $.helpText %}\" id=\"helpBtn\" data-dojo-attach-point=\"_helpButton\" dojoAttachEvent=\"onClick:showHelp\" class=\"list-panel-tool-help\"></div>","</div>"]),detailTemplate:new Simplate(["<div data-dojo-type=\"{%= $.detailType %}\" region=\"{%= $.detailRegion %}\" splitter=\"true\" style=\"{%= $.detailStyle %}\" data-dojo-attach-point=\"_detailPane\">","</div>"]),_filterGroup:null,_filterSubscriptions:null,_filterManager:null,_toolbarApplied:false,_configurationProvider:null,_configurationConnects:null,_contextConnects:null,_dataChangeWatchers:[],_gridContainer:null,_noConfigurationPane:null,_listGrid:null,_indirectSelection:"",_summaryGrid:null,_detailPane:null,_tbar:null,_tbarCustom:false,_tbarLabel:null,_buttonSection:null,_detailButton:null,_listButton:null,_summaryButton:null,_helpButton:null,_filterSummary:null,_unsavedDataLabel:null,_listMode:"list",helpTopicName:"listview",gutters:false,toolbarStyle:"",gridType:"dojox.grid.EnhancedGrid",initialGrid:"list",filterGroup:"default",detailVisible:false,detailOnSummary:false,detailRegion:"bottom",detailStyle:"height: 256px;",detailType:"dijit.layout.ContentPane",autoConfigure:true,hasCheckBox:false,autoFitColumns:true,listText:"List",summaryText:"Summary",detailText:"Detail",hideDetailText:"Hide Detail",unsavedDataText:"*unsaved data",helpText:"Help",refreshText:"Refresh",ofText:"of",FILTER_UPDATE_DELAY:1000,STORE_KEY_COLUMN_SIZE:"_COLUMN_UNIT_WIDTH_",STORE_KEY_SORT_INFO:"_GRID_SORT_PROPS_",STORE_KEY_LAYOUT_INFO:"_GRID_LAYOUT_PROPS_",STORE_KEY_TOGGLE_INFO:"_GRID_TOTTLE_PROPS_",STORE_KEY_STORE_QUERY:"_STORE_QUERY_",STORE_KEY_VIEWSTATE:"LISTPANEL_VIEWSTATE",constructor:function(){this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);lang.mixin(this,_1a3e);this._setupCheckBox();this._setupAutoFit();},postCreate:function(){this.inherited(arguments);if(this._listGrid){this.connect(this._listGrid.scroller,"scroll",this._onListScroll);this.connect(this._summaryGrid.scroller,"scroll",this._onSummaryScroll);this._listGrid.canSort=function(col){var cells=this.layout.cells;var cell=cells[Math.abs(col)-1];if(cell.nosort){return false;}return true;};this._listGrid.columnReordering=true;this._listGrid.selectionMode="extended";dojo.connect(this._listGrid,"onMoveColumn",this,function(type,_1a43,cols){var cells=this._listGrid.layout.cells,_1a44=[],i=0,key="";for(i=0;i<cells.length;i++){if(cells[i].field){_1a44.push(cells[i].field);}}key=this._getGridLayoutKey();this._saveToLocalStorage(key,_1a44);});dojo.subscribe("/sage/ui/grid/columnToggle/"+this._listGrid.id,dojo.hitch(this,function(cell){var cells=this._listGrid.layout.cells,_1a45=[],i=0,key="";for(i=0;i<cells.length;i++){_1a45.push({field:cells[i].field,hidden:cells[i].hidden});}key=this._getGridColumnToggleKey();this._saveToLocalStorage(key,_1a45);}));}this._gridContainer.selectChild(this._noConfigurationPane);if(this._detailPane.isInstanceOf(_1a39)){this._detailPane.set("owner",this);}this._setDetailPaneVisibility(false);this._updateToolbarItemVisibility();},startup:function(){this.inherited(arguments);if(this.autoConfigure){this.requestConfiguration();}},uninitialize:function(){this.inherited(arguments);if(this._filterManager){this._filterManager.destroy();}if(this._configurationProvider){this._configurationProvider.destroy();}},_setupCheckBox:function(){var _1a46=Sage.Services.getService("UserOptions");this._indirectSelection="false";if(_1a46&&_1a46.get){_1a46.get("GroupCheckboxEnabled","GroupGridView",lang.hitch(this,function(data){var _1a47=data&&data.value;if(_1a47==="True"||_1a47==="T"){this._indirectSelection="{ draggable: false}";this.hasCheckBox=true;}else{this.hasCheckBox=false;}}),null,this,false);}},_setupAutoFit:function(){var _1a48=Sage.Services.getService("UserOptions");if(_1a48&&_1a48.get){_1a48.get("autoFitColumns","GroupGridView",lang.hitch(this,function(data){var val=data&&data.value;if(val==="True"||val==="T"){this.autoFitColumns=true;}else{this.autoFitColumns=false;}}),null,this,false);}},_setSortInfo:function(store){var key=this._getGridSortKey(),_1a49=this._getFromLocalStorage(key);if(_1a49){if(_1a49.descending){this._listGrid.sortInfo=(_1a49.cellIndex+1)*-1;}else{this._listGrid.sortInfo=_1a49.cellIndex+1;}store.sort=[_1a49];}},_setSummarySortInfo:function(store){var key=this._getGridSortKey(),_1a4a=this._getFromLocalStorage(key);if(_1a4a){store.sort=[_1a4a];}},_setColumnSizes:function(_1a4b){var cells=_1a4b;if(_1a4b[0].cells){cells=_1a4b[0].cells[0];}array.forEach(cells,function(item){if(item&&item.field){var key=this._getColumnSizeKey(item.field),value=this._getFromLocalStorage(key);if(value){item.width=value;}}},this);},_doAutoFitColumns:function(){if(!this.autoFitColumns){return;}var _1a4c=this._listGrid.get("structure"),cells=_1a4c,_1a4d=0,_1a4e,_1a4f,_1a50=0;if(_1a4c&&_1a4c[0].cells){cells=_1a4c[0].cells[0];}array.forEach(cells,function(item){if(item&&item.field){var key=this._getColumnSizeKey(item.field),value=this._getFromLocalStorage(key);if(value){item.width=value;}_1a4d+=parseInt(item.width,10);}},this);_1a4e=_1a3f.getContentBox("list");_1a4f=_1a4e.w;if(this.hasCheckBox){_1a50=200;}else{_1a50=155;}_1a4f=_1a4f-_1a50;array.forEach(cells,function(item){var width,pct,_1a51;if(item&&item.field){width=parseInt(item.width,10);pct=width/_1a4d;_1a51=Math.round(_1a4f*pct);item.width=_1a51+"px";}},this);this._listGrid.set("structure",_1a4c);},_updateStructureFromLocalStore:function(){var key=this._getGridLayoutKey(),_1a52=this._getGridColumnToggleKey(),_1a53=this._listGrid.structure,_1a54=this._getFromLocalStorage(key),_1a55=this._getFromLocalStorage(_1a52),cell,cells,_1a56,temp,i;if(_1a54){cells=_1a53[0].cells[0];if(cells){cells.sort(function(a,b){var _1a57=array.indexOf(_1a54,a.field),_1a58=array.indexOf(_1a54,b.field);if(_1a57>_1a58){return 1;}if(_1a57<_1a58){return -1;}return 0;});}this._listGrid.set("structure",_1a53);}if(_1a55){array.forEach(this._listGrid.layout.cells,lang.hitch(this,function(cell){array.forEach(_1a55,lang.hitch(this,function(item){if(item.field===cell.field){this._listGrid.layout.setColumnVisibility(cell.index,!item.hidden);}}));}));}},_handleConfigurationChange:function(){this._listGrid.selection.clear();if(this._detailPane){this._detailPane.clear();}this.requestConfiguration();},_setConfigurationProviderAttr:function(value){if(this._configurationConnects){array.forEach(this._configurationConnects,function(_1a59){this.disconnect(_1a59);},this);}if(this._configurationProvider&&this._configurationProvider!==value){this._configurationProvider.destroy();}this._configurationProvider=value;this._configurationConnects=[];if(this._configurationProvider){this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange));this._configurationProvider.set("owner",this);if(this._created){if(this.autoConfigure){this.requestConfiguration();}}}},_getConfigurationProviderAttr:function(){return this._configurationProvider;},_setFilterGroupAttr:function(value){if(this._filterSubscriptions){array.forEach(this._filterSubscriptions,function(_1a5a){this.unsubscribe(_1a5a);},this);}this._filterGroup=value;this.set("filterManager",new _1a34({filterGroup:this._filterGroup}));this._filterSubscriptions=[];this._filterSubscriptions.push(this.subscribe(dojo.string.substitute("/ui/filters/${0}/change",[this._filterGroup]),this._onFilterChange));var _1a5b=util.debounce(lang.hitch(this,this._onFilterRefresh),this.FILTER_UPDATE_DELAY);this._filterSubscriptions.push(this.subscribe(dojo.string.substitute("/ui/filters/${0}/refresh",[this._filterGroup]),_1a5b));this._ensureApplyFilterWasPublished();},_ensureApplyFilterWasPublished:function(_1a5c){var _1a5d,_1a5e;_1a5d=Sage.Services.getService("ClientGroupContext");_1a5e=_1a5d&&_1a5d.getContext();if(_1a5e&&_1a5e.AppliedFilterInfo){_1a5d.publishFiltersApplied(_1a5e.AppliedFilterInfo);}if(this._filterManager&&_1a5c&&_1a5d.applyFilters){_1a5d.applyFilters(this._filterManager);}},_getFilterGroupAttr:function(){return this._filterGroup;},_setFilterManagerAttr:function(value){if(this._filterManager&&this._filterManager!==value){this._filterManager.destroy();}this._filterManager=value;if(this._filterManager){this._filterManager.set("owner",this);}},_getFilterManagerAttr:function(){return this._filterManager;},_onFilterChange:function(){},_onFilterRefresh:function(_1a5f,_1a60,_1a61){this._listGrid.selection.clear();if(this._detailPane){this._detailPane.clear();}var query=_1a61.createQuery(),key=this._getStoreQueryKey();if(this._listMode==="summary"&&this._hasConfigurationForSummary()){this._summaryGrid.queryOptions=this._summaryGrid.queryOptions||{};this._summaryGrid.filter(query);}else{this._listGrid.queryOptions=this._listGrid.queryOptions||{};this._listGrid.queryOptions.httpMethodOverride=!!query;this._listGrid.filter(query,true);}this._saveToLocalStorage(key,{store:this._listGrid.store,query:query});},_setConfigurationAttr:function(_1a62){this._applyConfiguration(_1a62);},_getListAttr:function(){return this._listGrid;},_getSummaryAttr:function(){return this._summaryGrid;},_getDetailAttr:function(){return this._detailPane;},_applyConfigurationFailed:function(_1a63){dojo.publish("/listView/applyConfiguration",this);},_applyConfiguration:function(_1a64){dojo.publish("/listView/applyConfiguration",this);var key=this._getViewStateKey(),state=this._getFromLocalStorage(key,this._getViewNS());if(state){this.initialGrid=state;}this._configuration=_1a64;this._gridContainer.selectChild(this._noConfigurationPane);if(this.initialGrid==="list"&&this._hasConfigurationForList()){this.showList();}if(this._hasConfigurationForSummary()){this._configuration.summary.active=false;}if(this.initialGrid==="summary"&&this._hasConfigurationForSummary()){if(this._gridContainer.selectedChildWidget===this._noConfigurationPane){this.showSummary();}}this._applyToolBar();if(this._configuration&&this._configuration.list&&this._configuration.list.selectionMode&&this._configuration.list.selectionMode==="single"){this._listGrid.selection.setMode("single");}else{if(this._configuration&&this._configuration.list&&this._configuration.list.selectionMode&&this._configuration.list.selectionMode==="none"){this._listGrid.selection.setMode("none");}else{this._listGrid.selection.setMode("extended");}}},_applyToolBar:function(){var _1a65,i,items;if(this._tbarCustom){_1a65=this._tbar.getChildren();for(i=0;i<_1a65.length;i++){if(_1a65[i].custom){this._tbar.removeChild(_1a65[i]);}}this._tbarCustom=false;}if(this._toolbarApplied&&!this._configuration.updateToolBar){return;}if(this._configuration&&this._configuration.toolBar){items=this._configuration.toolBar.items||[];if(items.length>0){this._tbarCustom=true;}for(i=0;i<items.length;i++){if(items[i].icon||items[i].imageClass){this._tbar.addChild(new Sage.UI.ImageButton(items[i]),i);}else{this._tbar.addChild(new dijit.form.Button(items[i]),i);}}}this._toolbarApplied=true;},_setDetailPaneVisibility:function(value){if(value){if(this._hasConfigurationForDetail()&&!this._isConfigurationActiveForDetail()){if(this._detailPane.isInstanceOf(_1a39)){this._detailPane.set("configuration",this._configuration.detail);}this._configuration.detail.active=true;}this._detailButton.set("label",this.hideDetailText);this.addChild(this._detailPane);var _1a66=this._getSelection(0);if(_1a66){this._detailPane._onSelected(_1a66.rowIndex,_1a66,this._listGrid);}else{this._detailPane.clear();}}else{this._detailButton.set("label",this.detailText);this.removeChild(this._detailPane);}},_getSelection:function(index){var sels=this._listGrid.selection.getSelected();var _1a67=null;for(var i=0;i<sels.length;i++){if(index==i){_1a67=sels[i];return _1a67;}}return _1a67;},_updateToolbarItemVisibility:function(){dojo.toggleClass(this.domNode,"list-panel-has-summary",this._hasConfigurationForSummary());dojo.toggleClass(this.domNode,"list-panel-has-detail",this._canShowDetailPane());},_canShowDetailPane:function(){return (this._hasConfigurationForDetail()&&((this._gridContainer.selectedChildWidget!==this._summaryGrid)||this.detailOnSummary));},_shouldShowDetailPane:function(){return (this._canShowDetailPane()&&this.detailVisible);},_hasConfigurationForList:function(){return (this._configuration&&this._configuration.list);},_hasConfigurationForSummary:function(){return (this._configuration&&this._configuration.summary);},_hasConfigurationForDetail:function(){return (this._configuration&&this._configuration.detail);},_isConfigurationActiveForList:function(){return (this._hasConfigurationForList()&&this._configuration.list.active);},_isConfigurationActiveForSummary:function(){return (this._hasConfigurationForSummary()&&this._configuration.summary.active);},_isConfigurationActiveForDetail:function(){return (this._hasConfigurationForDetail()&&this._configuration.detail.active);},_onRowClick:function(e){this.onRowClick(e.rowIndex,e.grid.getItem(e.rowIndex),e.grid);},_onRowContextMenu:function(e){var _1a68=e.grid.selection,_1a69=_1a68.getSelected();if(_1a69.length===0){_1a68.select(e.rowIndex);}this.onRowContextMenu(e.rowIndex,e.grid.getItem(e.rowIndex),e.grid);},_onSelectedInList:function(index){this.onSelected(index,this._listGrid.getItem(index),this._listGrid);},_onSelectedInSummary:function(index){this.onSelected(index,this._summaryGrid.getItem(index),this._summaryGrid);},_onSelectionChanged:function(){dojo.publish("/sage/ui/list/selectionChanged",this);this.onSelectionChanged();},_onResizeColumn:function(_1a6a){var grid=this._listGrid,cell=grid.getCell(_1a6a),value=cell.unitWidth,key=this._getColumnSizeKey(cell.field);this._saveToLocalStorage(key,value);this._doAutoFitColumns();},_onHeaderCellClick:function(e){var grid=this._listGrid,key=this._getGridSortKey(),value,_1a6b=grid.getSortProps();grid.selection.clear();if(_1a6b&&_1a6b.length>0){value=_1a6b[0];value.cellIndex=e.cell.index;if(e.cell.nosort){return;}this._saveToLocalStorage(key,value);}},_onRowDblClick:function(e){if(this._configuration.list.onNavigateToDefaultItem){if(e.rowIndex>-1){var item=e.grid._by_idx[e.rowIndex].item;this._configuration.list.onNavigateToDefaultItem(item);}}},_onCellClick:function(e){var i,inc=1,_1a6c=e.grid.selection.isSelected(e.rowIndex),_1a6d;if(has("ie")>8){try{var _1a6e=document.getSelection();if(_1a6e&&_1a6e.removeAllRanges){_1a6e.removeAllRanges();}}catch(err){}}if(e.grid.rowSelectCell){if(e.grid.rowSelectCell.index!==e.cell.index){if(e.shiftKey===true&&e.grid.rowSelectCell.lastClickRowIdx!==e.rowIndex){if(e.grid.rowSelectCell.lastClickRowIdx>e.rowIndex){inc=-1;}for(i=e.grid.rowSelectCell.lastClickRowIdx;i!==e.rowIndex;i+=inc){e.grid.rowSelectCell.toggleRow(i,true);}e.grid.rowSelectCell.toggleRow(e.rowIndex,true);}else{e.grid.rowSelectCell.toggleRow(e.rowIndex,!_1a6c);if(this._shouldShowDetailPane()&&_1a6c){_1a6d=this._getSelection(0);if(_1a6d){this._detailPane._onSelected(_1a6d.rowIndex,_1a6d,e.grid);}else{this._detailPane.clear();}}}e.grid.rowSelectCell.lastClickRowIdx=e.rowIndex;}else{if(this._shouldShowDetailPane()&&_1a6c){e.grid.rowSelectCell.toggleRow(e.rowIndex,!_1a6c);_1a6d=this._getSelection(0);e.grid.rowSelectCell.toggleRow(e.rowIndex,_1a6c);if(_1a6d){this._detailPane._onSelected(_1a6d.rowIndex,_1a6d,e.grid);}else{this._detailPane.clear();}}}}},_saveToLocalStorage:function(key,value,_1a6f){var _1a70;try{_1a70=new _1a38();_1a70.initialize();if(!_1a6f){_1a6f=this._getGroupNS();}_1a6f=this._makeValidNamespace(_1a6f);_1a70.put(key,value,function(_1a71,key,_1a72){if(_1a71===_1a70.FAILED){console.error("Failed writing key: "+key+" in local storage. Message: "+_1a72);}},_1a6f);}catch(err){console.error(err);}},_getFromLocalStorage:function(key,_1a73){var _1a74,_1a75;try{_1a74=new _1a38();_1a74.initialize();if(!_1a73){_1a73=this._getGroupNS();}_1a73=this._makeValidNamespace(_1a73);_1a75=_1a74.get(key,_1a73);}catch(err){console.error(err);}return _1a75;},_makeValidNamespace:function(ns){return ns.replace(/[^0-9^A-Z^a-z^\-]/g,"-");},_getGroupNS:function(){var ns=Sage.Groups.GroupManager.LOCALSTORE_NAMESPACE+"-"+this._getGroupID();return ns;},_getViewNS:function(){var ns=Sage.Groups.GroupManager.LOCALSTORE_NAMESPACE+"-"+this._getMainViewName();return ns;},_getGroupID:function(){var _1a76=Sage.Services.getService("ClientGroupContext"),_1a77=-1,_1a78=null;if(_1a76){_1a78=_1a76.getContext();if(_1a78){_1a77=_1a78.CurrentGroupID;}}return _1a77;},_getMainViewName:function(){if(this._configurationProvider._mainViewName){return this._configurationProvider._mainViewName;}var _1a79=Sage.Services.getService("ClientGroupContext"),_1a7a=-1,_1a7b=null;if(_1a79){_1a7b=_1a79.getContext();if(_1a7b){_1a7a=_1a7b.CurrentEntity;}}return _1a7a;},_getColumnSizeKey:function(_1a7c){var _1a7d=_1a7c.replace(/[\.\$]/g,"_"),id=this._listGrid.id+"_"+this._configuration.list.id+"_"+this.STORE_KEY_COLUMN_SIZE+_1a7d;return id;},_getGridSortKey:function(){return this._keyGen(this.STORE_KEY_SORT_INFO);},_getGridLayoutKey:function(){return this._keyGen(this.STORE_KEY_LAYOUT_INFO);},_getGridColumnToggleKey:function(){return this._keyGen(this.STORE_KEY_TOGGLE_INFO);},_getViewStateKey:function(){return this.STORE_KEY_VIEWSTATE;},_getStoreQueryKey:function(){var id=this.STORE_KEY_STORE_QUERY+this._getGroupID();return id;},_keyGen:function(_1a7e){var id=this._listGrid.id+_1a7e+this._configuration.list.id;return id;},_onListScroll:function(){this._onScroll(this._listGrid.scroller);},_onSummaryScroll:function(){this._onScroll(this._summaryGrid.scroller);},_onScroll:function(_1a7f){var _1a80,_1a81,count,lbl;if(this._tbarLabel){count=_1a7f.rowCount;if(count<=0){_1a80=0;_1a81=0;count=0;}else{_1a80=(_1a7f.firstVisibleRow===0)?1:_1a7f.firstVisibleRow+1;_1a81=(_1a7f.lastVisibleRow>=_1a7f.rowCount)?_1a7f.rowCount:_1a7f.lastVisibleRow+1;}lbl=dojo.string.substitute("${0} ${1} - ${2} ${3} ${4}",[this.displayingText,_1a80,_1a81,this.ofText,count]);this._tbarLabel.set("label",lbl);}},_markDirty:function(_1a82){this._unsavedDataLabel.set("style","display:inline");},_markClean:function(){this._unsavedDataLabel.set("style","display:none");},getTotalSelectionCount:function(){var _1a83=0,sel;if(this._listMode==="list"){this._configuration.list.active=true;}if(!this._isConfigurationActiveForList()||!this._listGrid){return [];}sel=this._listGrid.selection;if(sel){_1a83=sel.getSelectedCount();}return _1a83;},getSelectionInfo:function(_1a84){var _1a85,_1a86,_1a87,mode,_1a88,_1a89,_1a8a,_1a8b,sels,_1a8c=[],i,_1a8d;if(this._listMode==="list"){this._configuration.list.active=true;}if(!this._isConfigurationActiveForList()||!this._listGrid){return [];}_1a85=this._listGrid.rowCount||0;_1a86=this.getTotalSelectionCount();_1a87=this.id;mode="selection";_1a88=[];_1a89=Sage.Services.getService("ClientGroupContext");_1a8a=(_1a89)?_1a89.getContext().CurrentTableKeyField||"":"";if(this._configuration.hasCompositeKey){_1a8b=this._configuration.hasCompositeKey;}else{_1a8b=false;}sels=this._listGrid.selection.getSelected();_1a8c=[];for(i=0;i<sels.length;i++){if(sels[i]){var _1a8e={rn:0,id:sels[i][_1a8a]};if(_1a84){_1a8e["entity"]=sels[i];}_1a88.push(_1a8e);_1a8c.push(sels[i][_1a8a]);}}_1a8d={key:_1a87,mode:mode,selectionCount:_1a86,recordCount:_1a85,sortDirection:"",sortField:"",keyField:_1a8a,hasCompositeKey:_1a8b,ranges:[],selections:_1a88,selectedIds:_1a8c};return _1a8d;},requestConfiguration:function(){ready(lang.hitch(this,function(){if(this._configurationProvider){this._configurationProvider.requestConfiguration({success:lang.hitch(this,this._applyConfiguration),failure:lang.hitch(this,this._applyConfigurationFailed)});}}));},refreshView:function(){if(this._configuration.rebuildOnRefresh){this.requestConfiguration();}this.refreshList();dojo.publish("/listView/refresh",this);},refreshList:function(_1a8f){if(this._listMode!=="list"){this.refreshSummary();return;}if(!_1a8f){this._listGrid._refresh();}else{if(this._configuration._listId===_1a8f){this._listGrid._refresh();}}if(this._listGrid&&this._listGrid.selection){this._listGrid.selection.clear();}if(this._detailPane){this._detailPane.clear();}},refreshSummary:function(){if(this._hasConfigurationForSummary()&&(this._listMode!=="list")){this._summaryGrid._refresh();}},showHelp:function(){util.openHelp(this.helpTopicName);},refreshGrid:function(){this._listGrid.selection.clear();this.refreshList();this.refreshSummary();},showList:function(){var query,_1a90,_1a91,_1a92,i,cMenu,_1a93,_1a94,store,key,_1a95,_1a96;this._listMode="list";if(!this._hasConfigurationForList()){return;}_1a95=this._getViewStateKey();this._saveToLocalStorage(_1a95,"list",this._getViewNS());this._ensureApplyFilterWasPublished(true);query=this._filterManager.createQuery();key=this._getStoreQueryKey();_1a90=this._listGrid.queryOptions||{};_1a90.httpMethodOverride=!!query;this._setSortInfo(this._configuration.list.store);if(this._configuration.list.rowsPerPage>0){this._listGrid.set("rowsPerPage",this._configuration.list.rowsPerPage);}this._listGrid._setStore(this._configuration.list.store);this._listGrid._setQuery(query,_1a90);this._saveToLocalStorage(key,{store:this._configuration.list.store,query:query});if(this._listGrid.structure!==this._configuration.list.structure){this._setColumnSizes(this._configuration.list.structure);this._listGrid.set("structure",this._configuration.list.structure);this._doAutoFitColumns();this._updateStructureFromLocalStore();}this._listGrid._refresh(true);if(!this._isConfigurationActiveForList()){if(this._dataChangeWatchers.length>0){array.forEach(this._dataChangeWatchers,dojo.disconnect);this._dataChangeWatchers=[];}if(this._configuration.list.formatterScope&&(this._listGrid.formatterScope!==this._configuration.list.formatterScope)){this._listGrid.set("formatterScope",this._configuration.list.formatterScope);}if(this._configuration.rebuildMenus){_1a91=this._listGrid.selectedRegionMenu.getChildren();for(i=0;i<_1a91.length;i++){_1a92=_1a91[i];this._listGrid.selectedRegionMenu.removeChild(_1a92);}}_1a93=this._configuration.list.selectedRegionContextMenuItems||[];if(_1a93.length>0){_1a94=this._listGrid.selectedRegionMenu.getChildren();if(_1a94.length!==_1a93.length){cMenu=this._listGrid.selectedRegionMenu;for(i=0;i<_1a93.length;i++){cMenu.addChild(_1a93[i]);}if(this._configuration.list.onSelectedRegionContextMenu){if(this._contextConnects){array.forEach(this._contextConnects,dojo.disconnect);}this._contextConnects=[];this._contextConnects.push(dojo.connect(this._listGrid,"onRowContextMenu",this._configurationProvider,this._configuration.list.onSelectedRegionContextMenu));}}}store=this._listGrid.store;if(store&&store!==null){if(store.features.hasOwnProperty("dojo.data.api.Write")){this._dataChangeWatchers.push(dojo.connect(store,"onSet",this,function(_1a97,_1a98,_1a99,_1a9a){if(_1a99!==_1a9a){this._markDirty(_1a97);}}));if(store.onDataReset){this._dataChangeWatchers.push(dojo.connect(store,"onDataReset",this,"_markClean"));}}}}this._configuration.list.active=true;this._gridContainer.selectChild(this._listGrid);this._setDetailPaneVisibility(this._shouldShowDetailPane());this._updateToolbarItemVisibility();_1a96=_1a40.byId("centerContent");},showSummary:function(){var _1a9b,query;this._listMode="summary";if(!this._hasConfigurationForSummary()){return;}query=this._filterManager.createQuery();this._setSummarySortInfo(this._configuration.summary.store);this._summaryGrid.setStore(this._configuration.summary.store,query);this._summaryGrid.setStructure(this._configuration.summary.structure);dojo.connect(this._summaryGrid,"_onFetchComplete",this,lang.hitch(this,function(){this._summaryGrid.resize();}));if(this._listGrid.selection){this._listGrid.selection.clear();}if(!this._isConfigurationActiveForSummary()){_1a9b=this._getViewStateKey();this._saveToLocalStorage(_1a9b,"summary",this._getViewNS());if(this._configuration.summary.hasOwnProperty("rowHeight")){this._summaryGrid.set("rowHeight",this._configuration.summary.rowHeight);}if(this._configuration.summary.hasOwnProperty("rowsPerPage")){this._summaryGrid.set("rowsPerPage",this._configuration.summary.rowsPerPage);}if(this._configuration.summary.hasOwnProperty("formatterScope")){this._summaryGrid.set("formatterScope",this._configuration.summary.formatterScope);}this._summaryGrid.canSort=function(col){return false;};this._configuration.summary.active=true;}this._gridContainer.selectChild(this._summaryGrid);this._setDetailPaneVisibility(this._shouldShowDetailPane());this._updateToolbarItemVisibility();},toggleDetail:function(){if(!this._hasConfigurationForDetail()){return;}this.detailVisible=!this.detailVisible;this._setDetailPaneVisibility(this._shouldShowDetailPane());},onRowClick:function(index,row,grid){},onRowContextMenu:function(index,row,grid){},onSelected:function(index,row,grid){},onSelectionChanged:function(){},resolveProperty:function(_1a9c,_1a9d){var list=this._configuration&&this._configuration.list,_1a9e=list&&list.layout,_1a9f=(list&&list.tableAliases)||{},i,item,table,_1aa0,_1aa1,_1aa2,_1aa3=["<",">"];if(_1a9e){for(i=0;i<_1a9e.length;i++){item=_1a9e[i];_1aa1=item.propertyPath&&item.propertyPath.split(".");if(_1aa1&&_1aa1.length===2){_1aa1=_1aa1[1];}else{if(_1aa1&&_1aa1.length===1){_1aa1=_1aa1[0];}}_1aa2=_1a9c&&_1a9c.split(".");if(_1aa2&&_1aa2.length===2){_1aa2=_1aa2[1];}else{if(_1aa2&&_1aa2.length===1){_1aa2=_1aa2[0];}}if(item.dataPath){array.forEach(_1aa3,function(c){item.dataPath=item.dataPath.replace(c,"=");});}if(item.propertyPath===_1a9c||(_1a9d&&item.dataPath===_1a9d)||_1aa1===_1aa2){if(/^[a-z]\d+_/i.test(item.alias)){return item.alias;}table=item.dataPath&&item.dataPath.split(":")[0];_1aa0=table&&_1a9f[table.toUpperCase()];if(_1aa0){return _1aa0+"."+item.alias;}return item.alias;}}}return _1a9c;}});return _1a42;});},"Sage/Data/GroupLayoutSingleton":function(){define("Sage/Data/GroupLayoutSingleton",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/Data/SDataServiceRegistry","dojo/ready","dojo/json"],function(_1aa4,array,lang,_1aa5,ready,json){var m=_1aa4("Sage.Data.GroupLayoutSingleton",null,{data:{},_fetchCache:{},_registeredOnSuccess:{},_registeredOnFailure:{},_baseCacheKey:"GROUPLAYOUT_",constructor:function(){},getGroupLayout:function(_1aa6,_1aa7,_1aa8,_1aa9){var _1aaa=_1aa5.getSDataService("system"),_1aab=new Sage.SData.Client.SDataSingleResourceRequest(_1aaa),_1aac=this._registeredOnSuccess[_1aa9],_1aad=this._registeredOnFailure[_1aa9],_1aae=this._baseCacheKey+_1aa9,_1aaf=null;if(_1aa9!=="LOOKUPRESULTS"){_1aaf=sessionStorage.getItem(_1aae);}if(_1aaf){this.data[_1aa9]=json.parse(_1aaf);}if(this.data[_1aa9]){if(typeof _1aa7==="function"){_1aa7(this.data[_1aa9]);}return;}if(!_1aac){this._registeredOnSuccess[_1aa9]=[];_1aac=this._registeredOnSuccess[_1aa9];}if(!_1aad){this._registeredOnFailure[_1aa9]=[];_1aad=this._registeredOnFailure[_1aa9];}_1aac.push(_1aa7);_1aad.push(_1aa8);if(this._fetchCache[_1aa9]){return;}else{this._fetchCache[_1aa9]=true;}_1aab.setResourceKind("groups");_1aab.setResourceSelector(_1aa6);_1aab.setQueryArg("include","layout,tableAliases");_1aab.read({success:lang.hitch(this,this._onSuccess,_1aa9),failure:lang.hitch(this,this._onFailure,_1aa9)});},_onSuccess:function(_1ab0,data){var _1ab1=this._registeredOnSuccess[_1ab0];if(_1ab1){array.forEach(_1ab1,function(cb){if(typeof cb==="function"){cb(data);}});}if(_1ab0!=="LOOKUPRESULTS"){this.data[_1ab0]=data;}sessionStorage.setItem(this._baseCacheKey+_1ab0,json.stringify(data));this._doneFetching(_1ab0);},_onFailure:function(_1ab2,err){var _1ab3=this._registeredOnFailure[_1ab2];if(_1ab3){array.forEach(_1ab3,function(cb){if(typeof cb==="function"){cb(err);}});}this._doneFetching(_1ab2);},_doneFetching:function(_1ab4){this._registeredOnSuccess[_1ab4]=[];this._registeredOnFailure[_1ab4]=[];this._fetchCache[_1ab4]=false;}});return m;});},"Sage/QuickForms/Design/Editors/nls/GenericAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/GenericAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1ab5,lang){var nls={root:{titleText:"Advanced",appearanceText:"Appearance",controlInfoText:"Control Info",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form."}};return lang.mixin(_1ab5,nls);});},"Sage/QuickForms/Design/Editors/DataGridBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/DataGridBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DataGridBasicPropertyEditor"],function(_1ab6,lang,_1ab7,_1ab8,_1ab9,_1aba,_1abb,_1abc,_1abd,_1abe,_1abf,_1ac0){return _1ab6("Sage.QuickForms.Design.Editors.DataGridBasicPropertyEditor",[_1ab7,_1abe,_1abd],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset style=\"display:none;\"><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.pageSizeTooltipText %}\">","<label>{%= $.pageSizeText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_pageSize\" data-dojo-attach-event=\"onChange:_onPageSizeChange\" data-dojo-props=\"constraints:{min:0,max:1000,places:0}\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.resizableColumnsTooltipText %}\">","<label>{%= $.resizableColumnsText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_resizableColumns\" data-dojo-attach-event=\"onChange:_onResizableColumnsChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_pageSize:null,_resizableColumns:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",dataText:"Data",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",pageSizeText:"Page Size:",pageSizeTooltipText:"The number of grid records to display on a single page.",resizableColumnsText:"Resizable Columns:",resizableColumnsTooltipText:"Allows user to resize columns.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_1ac0);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._pageSize.set("value",this._designer.get("pageSize"));this._resizableColumns.set("value",this._designer.get("resizableColumns"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onPageSizeChange:function(value){if(this.isSuspended()||!this._pageSize.isValid()){return;}this._designer.set("pageSize",value);},_onResizableColumnsChange:function(value){if(this.isSuspended()){return;}this._designer.set("resizableColumns",value);}});});},"Sage/MainView/ActivityMgr/QuickCompleteEditor":function(){define("Sage/MainView/ActivityMgr/QuickCompleteEditor",["dijit/_Widget","Sage/_Templated","dijit/layout/ContentPane","dijit/form/Textarea","Sage/UI/TextBox","Sage/UI/Controls/DateTimePicker","dijit/form/FilteringSelect","Sage/UI/SDataLookup","dojox/layout/TableContainer","Sage/UI/Controls/SingleSelectPickList","dijit/Dialog","dojo/_base/declare","dojo/i18n!./nls/QuickCompleteEditor"],function(_1ac1,_1ac2,_1ac3,_1ac4,_1ac5,_1ac6,_1ac7,_1ac8,_1ac9,_1aca,_1acb,_1acc,_1acd){var _1ace=_1acc("Sage.MainView.ActivityMgr.QuickCompleteEditor",[_1ac1,_1ac2],{_currentUserId:null,_individuallyHandler:false,_nowHandler:false,_asScheduledHandler:false,_selectionContext:false,lblcmdMessageText:"",lblInfoMessageText:"",lblResultText:"Result:",lblNoteText:"Note (append to all items):",btnCompleteIndividuallyText:"Individually",btnAsScheduledText:"As Scheduled",btnCompleteNowText:"Now",btnCancelText:"Cancel",btnCloseText:"Close",btnHelpText:"Help",resultCompletedText:"Complete",titleText:"Quick Complete",widgetsInTemplate:true,selectionContext:null,widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"{%= $.id%}_qucikCompleteDialog\" title=\"Quick Complete\" dojoAttachPoint=\"_dialog\" >","<div class=\"quickComplete-dialog\">","<div data-dojo-type=\"dijit.layout.ContentPane\" id=\"{%= $.id%}_cp_General\" title=\"\" dojoAttachPoint=\"cp_General\">","<div data-dojo-type=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" class=\"controlPropForm\" labelWidth=\"140\">","<div id=\"{%= $.id%}_div_actionMessage\"  name=\"div_actionMessage\" dojoAttachPoint=\"div_actionMessage\"></div>","<br>","<select label=\"{%= $. lblResultText %}\" id=\"{%= $.id%}_pk_Result\" data-dojo-type=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Result\" canEditText=\"true\" itemMustExist=\"false\" pickListName=\"To Do Result Codes\" ></select>","<div data-dojo-type=\"dijit.form.SimpleTextarea\"\" label=\"{%= $.lblNoteText %}\" id=\"{%= $.id%}_ta_Note\" name=\"tb_Note\" dojoAttachPoint=\"ta_Note\"></div>","</div>","<br>","<div id=\"{%= $.id%}_div_cmdMessage\"  name=\"div_cmdMessage\" dojoAttachPoint=\"div_cmdMessage\" style=\"font-weight:bold\"></div>","<br>","<div class=\"button-bar alignright\">","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_CompleteIndividually\" name=\"btn_CompleteIndividually\" dojoAttachPoint=\"btn_CompleteIndividually\" dojoAttachEvent=\"onClick:_onCompleteIndividually\" style=\"align:left\" >{%= $.btnCompleteIndividuallyText %}</div>","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_btnAsScheduled\" name=\"btn_AsScheduled\" dojoAttachPoint=\"btn_AsScheduled\" dojoAttachEvent=\"onClick:_onAsScheduled\">{%= $.btnAsScheduledText %}</div>","<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_CompleteNow\" name=\"btn_CompleteNow\" dojoAttachPoint=\"btn_CompleteNow\" dojoAttachEvent=\"onClick:_onCompleteNow\">{%= $.btnCompleteNowText %}</div>","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $. btnCancelText %}</div>","</div>","</div>","<div data-dojo-type=\"dijit.layout.ContentPane\" id=\"{%= $.id%}_cp_processing\" title=\"\" dojoAttachPoint=\"cp_processing\">","<div id=\"{%= $.id%}_div_processingMessage\"  name=\"div_processingMessage\" dojoAttachPoint=\"div_processingMessage\"></div>","<div class=\"button-bar alignright\">","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_Close\" name=\"btn_Close\" dojoAttachPoint=\"btn_Close\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $. btnCloseText %}</div>","</div>","</div>","</div>","</div>","</div>"]),constructor:function(_1acf){dojo.mixin(this,_1acd);this._currentUserId=Sage.Utility.getClientContextByKey("userID")||"";},destroy:function(){this._dialog.destroyRecursive();this.destroyRecursive();},show:function(){if(this.selectionContext){this.div_actionMessage.innerHTML=String.format("Only activities that you have permission to complete will be completed.");this.div_cmdMessage.innerHTML=String.format("Complete all {0} selected activities:",this.selectionContext.count);this._dialog.set("title",this.titleText);}dojo.style(this.cp_processing.domNode,"display","none");this._dialog.show();},hide:function(){this.destroy();},resize:function(){},_showProcessing:function(){dojo.style(this.cp_General.domNode,"display","none");dojo.style(this.cp_processing.domNode,"display","block");this.div_processingMessage.innerHTML=String.format(" Processing all {0} selected activities please wait...",this._selectionContext.count);},_onCompleteIndividually:function(){this.onCompleteIndividually();this._dialog.hide();},_onCompleteNow:function(){this._showProcessing();var _1ad0={selectionContext:this.selectionContext,note:this.ta_Note.value,resultCode:this.pk_Result.get("value")};this.onCompleteNow(_1ad0);this._dialog.hide();},_onAsScheduled:function(){this._showProcessing();var _1ad1={selectionContext:this.selectionContext,note:this.ta_Note.value,resultCode:this.pk_Result.get("value")};this.onCompleteAsScheduled(_1ad1);this._dialog.hide();},_cancelClick:function(){this.onCancel();this._dialog.hide();},onCompleteIndividually:function(){},onCompleteNow:function(args){},onCompleteAsScheduled:function(args){},onCancel:function(){}});return _1ace;});},"Sage/QuickForms/Design/Editors/CurrencyBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/CurrencyBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CurrencyBasicPropertyEditor"],function(_1ad2,lang,_1ad3,_1ad4,_1ad5,_1ad6,_1ad7,_1ad8,_1ad9,_1ada,_1adb,_1adc){return _1ad2("Sage.QuickForms.Design.Editors.CurrencyBasicPropertyEditor",[_1ad3,_1ada,_1ad9],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_1adc);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/UI/Controls/MultiSelectPickList":function(){require({cache:{"url:Sage/UI/Controls/templates/MultiSelectPickList.html":"<div>\r\n    <input id=\"${id}-TextBox\" data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"textNode\" data-dojo-attach-event=\"onBlur: _onTextBlur\" />\r\n    <div id=\"${id}-Button\" data-dojo-type=\"dijit.form.DropDownButton\" data-dojo-attach-point=\"dropDownButtonNode\">\r\n        <span></span>\r\n        <div class=\"multiSelectPickListDialog\" id=\"${id}-ToolTipDialog\" data-dojo-type=\"dijit.TooltipDialog\" data-dojo-attach-point=\"tooltipDialogNode\" data-dojo-attach-event=\"onClose: _onTooltipClose, onShow: _onTooltipShow\">\r\n            <div data-dojo-attach-point=\"tooltipContainer\" style=\"height:200px; overflow-y:auto;\">\r\n            \r\n            </div>\r\n            \r\n            <div style=\"width: 100%; text-align:right\">\r\n                <p>\r\n                    <button id=\"${id}-OKButton\" data-dojo-type=\"dijit.form.Button\" type=\"submit\">${okText}</button>\r\n                <p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"}});define("Sage/UI/Controls/MultiSelectPickList",["dojo/_base/array","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/TextBox","dijit/form/DropDownButton","dijit/form/CheckBox","dijit/TooltipDialog","dijit/form/Button","Sage/UI/Controls/PickList","dojo/text!./templates/MultiSelectPickList.html","dojo/_base/declare"],function(array,_1add,_1ade,_1adf,_1ae0,_1ae1,_1ae2,_1ae3,_1ae4,_1ae5,_1ae6,_1ae7){var _1ae8=_1ae7("Sage.UI.Controls.MultiSelectPickList",[_1ae5,_1adf,_1add,_1ade],{constructor:function(_1ae9){if(_1ae9.clientId){this.id=_1ae9.clientId+"-MultipleSelectPickList";}this.inherited(arguments);},postCreate:function(){this._setupTooltips(this.dropDownButtonNode.domNode,this.textNode.domNode);var def=new dojo.Deferred(),len;this.getPickListData(def);def.then(dojo.hitch(this,function(data){if(typeof data==="string"){this.textNode.set("value",data);this.dropDownButtonNode.disabled=true;}var items=[],len=data&&data.items&&data.items.$resources&&data.items.$resources.length,i,item,_1aea;for(i=0;i<len;i++){item=data.items.$resources[i];items.push({id:item.$key,code:item.code,number:item.number,text:item.text});}this.storeData={identifier:"id",label:"text",items:items};_1aea=dojo.byId(this._textId);if(_1aea){this.lastValidValue=_1aea.value;this.initialValue=this.lastValidValue;}else{if(items.length>0){this.lastValidValue=items[0].text;}}this.textNode.set("value",this.lastValidValue);this.initialValues=this.lastValidValue.split(",");this.lastValidValues=this.lastValidValue.split(",");this._renderFormElements(items);}),function(e){console.error(e);});if(this.get("canEditText")===false){this.textNode.disabled=true;}len=this.get("maxLength");if(len>0){this.textNode.set("maxLength",len);}if(this.get("itemMustExist")){this.textNode.isValid=dojo.hitch(this,function(_1aeb){var _1aec=this.textNode.get("value"),split=_1aec.split(","),valid=false;valid=array.every(split,function(_1aed){return array.some(this.storeData.items,function(item){return item.text.trim()===_1aed.trim();},this);},this);if(valid){this.lastValidValue=_1aec;}if(_1aeb){valid=true;}if(!valid){if(this.lastValidValue){this.textNode.set("value",this.lastValidValue);valid=true;}}return valid;});}else{this.textNode.isValid=function(_1aee){return true;};}this.inherited(arguments);},uninitialize:function(){this.inherited(arguments);},_isItemSelected:function(_1aef){var _1af0=this.textNode.get("value"),_1af1=false,split=[];if(_1af0){split=_1af0.split(",");array.forEach(split,function(item,index,array){if(_1aef.text.trim()===item.trim()){_1af1=true;}},this);}return _1af1;},_storeHasItem:function(_1af2){var _1af3=false;_1af3=array.some(this.storeData.items,function(item){if(item.text.trim()===_1af2.trim()){return true;}return false;},this);return _1af3;},_renderFormElements:function(items){var node=this.tooltipContainer;array.forEach(items,function(item,index,array){var _1af4=new _1ae2({id:this.id+"_checkBox"+index,name:"checkBox_"+item.text,value:item.text,checked:this._isItemSelected(item)}),label;_1af4.startup();dojo.place(_1af4.domNode,node,"last");label=dojo.create("label",{"for":_1af4.id},_1af4.domNode,"after");label.innerHTML=item.text;dojo.create("br",{},label,"after");},this);},_onTextBlur:function(){this._updateASPNETFields();},_updateASPNETFields:function(){if(this.textNode.isValid()){var val=this.textNode.get("value");if(val.trim()!==this.initialValue.trim()){this.setASPNETInputs(val,"");}}},_onTooltipClose:function(){var items=[];dojo.query("input",this.tooltipContainer).forEach(function(node){var wid=dijit.byId(node.id),val,_1af5;if(wid){val=wid.get("value");_1af5=wid.get("checked");if(_1af5){items.push(val);}}});array.forEach(this.itemsNotInStore,function(_1af6){items.push(_1af6.trim());},this);this.textNode.set("value",items.join(", "));this._updateASPNETFields();},_onTooltipShow:function(){this._refreshCheckedItems();this._refreshItemsNotInStore();},_refreshItemsNotInStore:function(){var _1af7=this.textNode.get("value"),_1af8=_1af7.split(",");this.itemsNotInStore=[];array.forEach(_1af8,function(item,index,array){if(!this._storeHasItem(item.trim())){if(item.trim()!==""){this.itemsNotInStore.push(item.trim());}}},this);},_refreshCheckedItems:function(){dojo.query("input",this.tooltipContainer).forEach(function(node){var wid=dijit.byId(node.id);if(wid){wid.set("checked",false);}});array.forEach(this.storeData.items,function(item,index,array){if(this._isItemSelected(item)){dojo.query("input",this.tooltipContainer).forEach(function(node){var wid=dijit.byId(node.id);if(wid){if(node.value.trim()===item.text.trim()){wid.set("checked",true);}}});}},this);},templateString:_1ae6,widgetsInTemplate:true,storeData:null,lastValidValue:"",lastValidValues:null,initialValue:"",initialvalues:null,itemsNotInStore:null});return _1ae8;});},"Sage/UI/nls/CalendarUsersListPane":function(){define("Sage/UI/nls/CalendarUsersListPane",["Sage/LanguageList","dojo/_base/lang"],function(_1af9,lang){var nls={root:{header_color:"Color",header_user:"User",maxUsersErrorMessage:"Sorry, you cannot view more than ${0} calendars (including your own) at one time.  Clear one of the currently-selected calendars and try again."}};return lang.mixin(_1af9,nls);});},"Sage/QuickForms/Design/Editors/UserAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/UserAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/UserAdvancedPropertyEditor"],function(_1afa,lang,_1afb,_1afc,_1afd,_1afe,_1aff,_1b00,_1b01,_1b02,_1b03){return _1afa("Sage.QuickForms.Design.Editors.UserAdvancedPropertyEditor",[_1afb,_1b01,_1b00],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.lookupBindingModeTooltipText %}\">","<label>{%= $.lookupBindingModeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_lookupBindingMode\" data-dojo-attach-event=\"onChange:_onLookupBindingModeChange\">","{% for (var mode in $.bindingModeText) { %}","<span value=\"{%= mode %}\">{%= $.bindingModeText[mode] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_lookupBindingMode:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",lookupBindingModeText:"Lookup Binding Mode:",lookupBindingModeTooltipText:"Indicates whether you want to bind to an entity object or to a string value.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},bindingModeText:{"Object":"Object","String":"String"},constructor:function(){lang.mixin(this,_1b03);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._enabled.set("value",this._designer.get("enabled"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._lookupBindingMode.set("value",this._designer.get("lookupBindingMode"));this._required.set("value",this._designer.get("required"));this._visible.set("value",this._designer.get("visible"));var _1b04=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_1b04&&_1b04["DataItemName"])||"");},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onDefaultDataBindingChange:function(value){},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onLookupBindingModeChange:function(value){if(this.isSuspended()){return;}this._designer.set("lookupBindingMode",value);},_onRequiredChange:function(value){if(this.isSuspended()){return;}this._designer.set("required",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/Editors/nls/PickListBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/PickListBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1b05,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"}}};return lang.mixin(_1b05,nls);});},"Sage/QuickForms/Design/Editors/nls/ColumnBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/ColumnBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1b06,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",indexText:"Index:",indexTooltipText:"Number of the row or column, beginning with zero.",widthText:"Width:",widthTooltipText:"Width of this column of controls.",sizeTypeText:"Size Type:",sizeTypeTooltipText:"Method of sizing: Absolute, AutoSize, or Percent.",rowSizeTypeText:{Absolute:"Absolute",Percent:"Percent",AutoSize:"AutoSize"}}};return lang.mixin(_1b06,nls);});},"Sage/UI/Columns/ActivityAlarm":function(){define("Sage/UI/Columns/ActivityAlarm",["dojox/grid/cells/_base","Sage/Utility","dojo/_base/declare"],function(_1b07,util,_1b08){var _1b09=_1b08("Sage.UI.Columns.ActivityAlarm",_1b07,{format:function(_1b0a,_1b0b){var alarm=util.getValue(_1b0b,"Alarm");var html="<div><div>";if(alarm){html="<img src='images/icons/Alarm_16x16.gif'/>";}return html;}});return _1b09;});},"Sage/UI/Columns/DateTime":function(){define("Sage/UI/Columns/DateTime",["dojox/grid/cells/dijit","dojo/date/locale","Sage/Utility","Sage/Utility/Activity","dojo/_base/declare"],function(_1b0c,_1b0d,_1b0e,_1b0f,_1b10){var _1b11=_1b10("Sage.UI.Columns.DateTime",dojox.grid.cells.Cell,{timelessField:"",timelessText:"",dateOnly:false,utc:true,useFiveSecondRuleToDetermineTimeless:false,format:function(_1b12,_1b13){var _1b14=this.formattedDate(_1b12,_1b13);if(this.abbreviationLength){var _1b15=Sage.Format.abbreviationFormatter(this.abbreviationLength);_1b14=_1b15(_1b14);}return _1b14;},formattedDate:function(_1b16,_1b17){if(!_1b17){return "";}var d=this.get?this.get(_1b16,_1b17):(this.value||this.defaultValue);if(!d){return "";}d=_1b18.toDateFromString(d,true);if(!d||d.constructor!==Date){return "";}var tless=false;if(this.timelessField&&this.timelessField!==""){tless=_1b18.toBoolean(_1b0e.getValue(_1b17,this.timelessField,"F"));}if(this.useFiveSecondRuleToDetermineTimeless){tless=_1b0f.isDateFiveSecondRuleTimeless(d);}if(!this.dateOnly&&!this.datePattern){if(!tless){return dojo.date.locale.format(d,{selector:this.formatType||"date/time",fullYear:true});}else{var _1b19=d;if(this.utc){_1b19=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,5);}return dojo.date.locale.format(_1b19,{selector:"date",fullYear:true})+this.timelessText;}}else{if(this.datePattern){if(this.datePattern.indexOf("h")===-1){d=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate());}return d.format(this.datePattern);}else{if(this.utc){var _1b1a=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate());return dojo.date.locale.format(_1b1a,{selector:"date",fullYear:true});}else{return dojo.date.locale.format(d,{selector:"date",fullYear:true});}}}}});var _1b18=_1b0e.Convert;return _1b11;});},"Sage/MainView/IntegrationContract/SalesOrderRTDV":function(){require({cache:{"url:Sage/MainView/IntegrationContract/templates/SalesOrderRTDV.html":"[\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"{%= $.id%}_salesOrderDetailsDialog\" title=\"{%= $.dialogCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hideDetailsDialog\">',\r\n        '<div dojoAttachPoint=\"loadingContainer\">',\r\n            '<br />',\r\n            '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingText %}</label>',\r\n            '<br />',\r\n            '<br />',\r\n        '</div>',\r\n        '<table cellspacing=\"5\" dojoAttachPoint=\"salesOrderDetails\" border=\"0\" width=\"100%\" class=\"display-none\">',\n            '<div>',\r\n                '<tr>',\n\t\t\t        '<td>',\r\n\t\t\t             '<label for=\"SalesOrder_reference\">{%= $.lblSalesOrderCaption %}</label>',\r\n\t\t\t        '</td>',\r\n                    '<td>',\r\n                        '<input type=\"text\" id=\"{%= $.id%}_reference\" name=\"reference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                    '<td>',\n                        '<label for=\"SalesOrder_status\">{%= $.lblStatusCaption %}</label>',\n                    '</td>',\n                    '<td>',\n                        '<input type=\"text\" id=\"{%= $.id%}_status\" name=\"status\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                    '<td>',\n                        '<label for=\"SalesOrder_grossTotal\">{%= $.lblGrossTotalCaption %}</label>',\r\n                    '</td>',\n                    '<td>',\n                        '<input type=\"text\" id=\"{%= $.id%}_grossTotal\" name=\"grossTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                '</tr>',\r\n            '</div>',\r\n        '</table>',\r\n        '<div style=\"height:370px;width:800px\" dojoAttachPoint=\"tabContentDetails\" class=\"display-none\">',\r\n            '<div id=\"{%= $.id%}_salesOrderContainer\" dojoAttachPoint=\"salesOrderContainer\" dojoType=\"dijit.layout.TabContainer\" style=\"width:100%;height:100%;\">',\r\n                '<div id=\"{%= $.id%}_salesOrderContent\" dojoAttachPoint=\"salesOrderContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.detailsTabTitle %}\" selected=\"true\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"{%= $.id%}_divDetails\">',\r\n                        '<table cellspacing=\"5\">',\r\n                            '<col style=\"width:200px\" />',\r\n                            '<col style=\"width:200px\" />',\r\n                            '<tr>',\r\n                                '<td>',\r\n                                    '<label for=\"SalesOrder_OrderDate\">{%= $.lblOrderDateCaption %}</label>',\r\n                                '</td>',\r\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_OrderDate\" name=\"date\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\r\n                                '<td>',\n                                    '<label for=\"SalesOrder_TaxTotal\">{%= $.lblTaxTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_TaxTotal\" name=\"taxTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\r\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\r\n                                    '<label for=\"SalesOrder_HoldStatus\">{%= $.lblHoldStatusCaption %}</label>',\r\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_HoldStatus\" name=\"statusFlagText\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Currency\">{%= $.lblCurrencyCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Currency\" name=\"currency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Type\">{%= $.lblTypeCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Type\" name=\"type\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\r\n                                    '<label for=\"SalesOrder_CostTotal\">{%= $.lblCostTotalCaption %}</label>',\r\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_CostTotal\" name=\"costTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_PONumber\">{%= $.lblPONumberCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_PONumber\" name=\"customerReference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_ProfitTotal\">{%= $.lblProfitTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_ProfitTotal\" name=\"profitTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Quotation\">{%= $.lblQuotationCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Quotation\" name=\"quotation.reference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_InvoiceStatus\">{%= $.lblInvoiceStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_InvoiceStatus\" name=\"invoiceStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Contact\">{%= $.lblContactCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Contact\" name=\"buyerContact.fullName\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DeliveryDate\">{%= $.lblDeliveryDateCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DeliveryDate\" name=\"deliveryDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_PriceList\">{%= $.lblPriceListCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_PriceList\" name=\"pricelist.name\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DueDate\">{%= $.lblDueDateCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DueDate\" name=\"dueDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_NetTotal\">{%= $.lblNetTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_NetTotal\" name=\"netTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Carrier\">{%= $.lblCarrierCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Carrier\" name=\"carrierCompany\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DiscountTotal\">{%= $.lblDiscountTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DiscountTotal\" name=\"discountTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_AllocationStatus\">{%= $.lblAllocationStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_AllocationStatus\" name=\"allocationStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DeliveryStatus\">{%= $.lblDeliveryStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DeliveryStatus\" name=\"deliveryStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_ChargesTotal\">{%= $.lblChargesTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_ChargesTotal\" name=\"chargesTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                        '</table>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soAddressesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.addressTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"sdgrdSalesOrderAddresses\" dojoAttachPoint=\"sdgrdSalesOrderAddresses\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesOrderAddresses_Grid\" dojoAttachPoint=\"sdgrdSalesOrderAddresses_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soSalesPersonsContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.salesPersonsTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_SalesPersons\" dojoAttachEvent=\"onShow:initSalesPersons\">',\r\n                    '<div id=\"sdgrdSalesPersons\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesPersons_Grid\" dojoAttachPoint=\"sdgrdSalesPersons_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soLinesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.salesOrderLinesTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"sdgrdSalesOrderLines\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesOrderLines_Grid\" dojoAttachPoint=\"sdgrdSalesOrderLines_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soPaymentsContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.paymentsTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Payments\" dojoAttachEvent=\"onShow:initPayments\">',\r\n                    '<div id=\"sdgrdSOPayments\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSOPayments_Grid\" dojoAttachPoint=\"sdgrdSOPayments_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soDeliveriesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.deliveriesTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Deliveries\" dojoAttachEvent=\"onShow:initDeliveries\">',\r\n                    '<div id=\"sdgrdSODeliveries\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSODeliveries_Grid\" dojoAttachPoint=\"sdgrdSODeliveries_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n            '</div>',\r\n        '</div>',\r\n        '<div class=\"button-bar alignright\">',\r\n            '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_soBtnClose\" type=\"button\" dojoAttachEvent=\"onClick:hideDetailsDialog\">{%= $.btnCloseCaption %}</button>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]"}});define("Sage/MainView/IntegrationContract/SalesOrderRTDV",["dojo/_base/declare","dojo/i18n!./nls/SalesOrderRTDV","dijit/_Widget","Sage/_Templated","Sage/UI/SLXPreviewGrid","Sage/Data/ProxySDataStore","Sage/UI/Dialogs","Sage/UI/Columns/DateTime","dojo/text!./templates/SalesOrderRTDV.html","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/DateTextBox","dijit/Dialog","dijit/_Widget","Sage/_Templated","dijit/Dialog"],function(_1b1b,_1b1c,_1b1d,_1b1e,_1b1f,_1b20,_1b21,_1b22,_1b23,_1b24,lang){var _1b25=_1b1b("Sage.MainView.IntegrationContract.SalesOrderRTDV",[_1b1d,_1b1e],{workspace:"",tabId:"",grid:"",globalSyncId:"",operatingCompanyId:"",dataStore:null,salesPersonsDataStore:null,paymentsDataStore:null,deliveriesDataStore:null,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1b23)),constructor:function(){dojo.mixin(this,_1b1c);},loadSalesOrders:function(){var self=this;var _1b26={readOnly:true,rowsPerPage:20,slxContext:{workspace:this.workspace,tabId:this.tabId},columns:[{width:10,field:"$key",name:" ",sortable:false,formatter:this.salesOrdersX3DetailsViewRenderer,style:"text-align:left;",editable:false,hidden:function(){return !accountingSystemHandlesSO();}()},{width:10,field:"reference",name:this.grdSalesOrder_OrderNumber,sortable:true,formatter:this.salesOrdersDetailsViewRenderer,style:"text-align:left;",editable:false},{width:10,field:"date",type:_1b22,formatType:"date",dateOnly:true,utc:false,name:this.grdSalesOrder_OrderDate,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"status",name:this.grdSalesOrder_Status,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"statusFlagText",name:this.grdSalesOrder_HoldStatus,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"type",name:this.grdSalesOrder_Type,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"customerReference",name:this.grdSalesOrder_PO,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"netTotal",name:this.grdSalesOrder_NetTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"discountTotal",name:this.grdSalesOrder_DiscountTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"chargesTotal",name:this.grdSalesOrder_ChargesTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"taxTotal",name:this.grdSalesOrder_TaxTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"grossTotal",name:this.grdSalesOrder_GrossTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"currency",name:this.grdSalesOrder_Currency,defaultValue:"",sortable:true,style:"text-align:left;",editable:false}],storeOptions:new _1b20({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"tradingAccounts",getResourcePredicate:function(){return dojo.string.substitute("$uuid eq '${0}'",[self.globalSyncId]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesOrders"}]}),tools:[]};var _1b27=new _1b1f.Grid(_1b26,this.placeHolder);_1b27.startup();var _1b28=dijit.byId("tabContent");_1b28.resize();_1b28.resize();this.grid=_1b27;},salesOrdersDetailsViewRenderer:function(value){return dojo.string.substitute("<a href=\"javascript:salesOrderRTDV.loadDetailsView();\">${0}</a>",[value]);},salesOrdersX3DetailsViewRenderer:function(){return dojo.string.substitute("<a href=\"javascript:salesOrderRTDV.callX3DetailsView();\">${0}</a>",[_1b1c.grdSalesOrder_Edit]);},destroyFirst:function(id){var _1b29=dijit.byId(id);if(_1b29){_1b29.destroyRecursive();}},initSalesPersons:function(){if(this.salesPersonsDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.salesPersonsDataStore=new _1b20({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1b2a=row["$key"];return dojo.string.substitute("'${0}'",[_1b2a||""]);},resourceKind:"salesOrders",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesPersons"}],includeContent:true});dojo.connect(this.salesPersonsDataStore,"onGetSingleResource",this,"loadSalesPersons");this.salesPersonsDataStore.getSingleResource();}},loadSalesPersons:function(data){this.destroyFirst("sdgrdSalesPersons");if(data&&typeof data.salesPersons==="undefined"){data.salesPersons={};data.salesPersons.$resources=new Array();}var _1b2b=new dojox.grid.DataGrid({id:"sdgrdSalesPersons",store:this.salesPersonsDataStore,structure:[{width:10,field:"name",name:this.grdSalesPersons_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdSalesPersons_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"extension",name:this.grdSalesPersons_Extension,defaultValue:"",sortable:true,editable:false},{width:10,field:"relationship",name:this.grdSalesPersons_Relationship,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1b2b.domNode,this.sdgrdSalesPersons_Grid,"single");_1b2b.startup();},loadAddresses:function(data){this.destroyFirst("sdgrdSalesOrderAddresses");if(data&&typeof data.postalAddresses==="undefined"){data.postalAddresses={};data.postalAddresses.$resources=new Array();}var _1b2c=new dojox.grid.DataGrid({id:"sdgrdSalesOrderAddresses",store:this.dataStore,structure:[{width:10,field:"type",name:this.grdAddress_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"address1",name:this.grdAddress_Address1,defaultValue:"",sortable:true,editable:false},{width:10,field:"address2",name:this.grdAddress_Address2,defaultValue:"",sortable:true,editable:false},{width:10,field:"townCity",name:this.grdAddress_City,defaultValue:"",sortable:true,editable:false},{width:10,field:"stateRegion",name:this.grdAddress_State,defaultValue:"",sortable:true,editable:false},{width:10,field:"zipPostCode",name:this.grdAddress_Zip,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{},queryOptions:{singleResourceRequest:true,property:"postalAddresses"}});dojo.place(_1b2c.domNode,this.sdgrdSalesOrderAddresses_Grid,"single");_1b2c.startup();},loadLineItems:function(data){this.destroyFirst("sdgrdSalesOrderLines");if(data&&typeof data.salesOrderLines==="undefined"){data.salesOrderLines={};data.salesOrderLines.$resources=new Array();}var _1b2d=new dojox.grid.DataGrid({id:"sdgrdSalesOrderLines",store:this.dataStore,structure:[{width:10,field:"number",name:this.grdItems_Line,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdItems_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodity.name",name:this.grdItems_Commodity,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodityVariant.reference",name:this.grdItems_CommodityVariant,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodityDimension.reference",name:this.grdItems_CommodityDimension,defaultValue:"",sortable:true,editable:false},{width:10,field:"unitOfMeasure.name",name:this.grdItems_UnitOfMeasure,defaultValue:"",sortable:true,editable:false},{width:10,field:"fulfillmentLocation.name",name:this.grdItems_Location,defaultValue:"",sortable:true,editable:false},{width:10,field:"pricelist.name",name:this.grdItems_PriceList,defaultValue:"",sortable:true,editable:false},{width:10,field:"quantity",name:this.grdItems_Quantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"initialPrice",name:this.grdItems_InitialPrice,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualPrice",name:this.grdItems_ActualPrice,defaultValue:"",sortable:true,editable:false},{width:10,field:"netTotal",name:this.grdItems_NetTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"chargesTotal",name:this.grdItems_ChargesTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"discountTotal",name:this.grdItems_DiscountTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"taxTotal",name:this.grdItems_TaxTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"grossTotal",name:this.grdItems_GrossTotal,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{},queryOptions:{singleResourceRequest:true,property:"salesOrderLines"}});dojo.place(_1b2d.domNode,this.sdgrdSalesOrderLines_Grid,"single");_1b2d.startup();},initPayments:function(){if(this.paymentsDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.paymentsDataStore=new _1b20({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1b2e=row["$key"];return dojo.string.substitute("'${0}'",[_1b2e||""]);},resourceKind:"salesOrders",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"receipts"}],includeContent:true});dojo.connect(this.paymentsDataStore,"onGetSingleResource",this,"loadPayments");this.paymentsDataStore.getSingleResource();}},loadPayments:function(data){this.destroyFirst("sdgrdSOPayments");if(data&&typeof data.receipts==="undefined"){data.receipts={};data.receipts.$resources=new Array();}var _1b2f=new dojox.grid.DataGrid({id:"sdgrdSOPayments",store:this.paymentsDataStore,structure:[{width:10,field:"date",type:_1b22,formatType:"date",name:this.grdPayments_Date,defaultValue:"",sortable:true,editable:false},{width:10,field:"name",name:this.grdPayments_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdPayments_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdPayments_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"netTotal",name:this.grdPayments_NetTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"discountTotal",name:this.grdPayments_Discounts,defaultValue:"",sortable:true,editable:false},{width:10,field:"chargesTotal",name:this.grdPayments_Charges,defaultValue:"",sortable:true,editable:false},{width:10,field:"taxTotal",name:this.grdPayments_Tax,defaultValue:"",sortable:true,editable:false},{width:10,field:"grossTotal",name:this.grdPayments_GrossTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"currency",name:this.grdPayments_Currency,defaultValue:"",sortable:true,editable:false},{width:10,field:"tenderType",name:this.grdPayments_TenderType,defaultValue:"",sortable:true,editable:false},{width:10,field:"tenderReference",name:this.grdPayments_TenderReference,defaultValue:"",sortable:true,editable:false},{width:10,field:"processDate",type:_1b22,formatType:"date",name:this.grdPayments_ProcessDate,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1b2f.domNode,this.sdgrdSOPayments_Grid,"single");_1b2f.startup();},initDeliveries:function(){if(this.deliveriesDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.deliveriesDataStore=new _1b20({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1b30=row["$key"];return dojo.string.substitute("'${0}'",[_1b30]);},resourceKind:"salesOrders",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesOrderDeliveries"}],includeContent:true});dojo.connect(this.deliveriesDataStore,"onGetSingleResource",this,"loadDeliveries");this.deliveriesDataStore.getSingleResource();}},loadDeliveries:function(data){this.destroyFirst("sdgrdSODeliveries");if(data&&typeof data.salesOrderDeliveries==="undefined"){data.salesOrderDeliveries={};data.salesOrderDeliveries.$resources=new Array();}var _1b31=new dojox.grid.DataGrid({id:"sdgrdSODeliveries",store:this.deliveriesDataStore,structure:[{width:10,field:"reference",name:this.grdDeliveries_Number,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdDeliveries_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdDeliveries_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"requestedDeliveryDate",type:_1b22,formatType:"date",name:this.grdDeliveries_RequestedDate,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualDeliveryDate",type:_1b22,formatType:"date",name:this.grdDeliveries_ActualDate,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualDeliveryTime",type:_1b22,formatType:"date",name:this.grdDeliveries_ActualTime,defaultValue:"",sortable:true,editable:false},{width:10,field:"requestedQuantity",name:this.grdDeliveries_RequestedQuantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"deliveredQuantity",name:this.grdDeliveries_DeliveredQuantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"deliveryMethod",name:this.grdDeliveries_Method,defaultValue:"",sortable:true,editable:false},{width:10,field:"carrierTradingAccount.name",name:this.grdDeliveries_Carrier,defaultValue:"",sortable:true,editable:false},{width:10,field:"carrierReference",name:this.grdDeliveries_CarrierReference,defaultValue:"",sortable:true,editable:false},{width:10,field:"dateExceptionReason",type:_1b22,formatType:"date",name:this.grdDeliveries_ExceptionReason,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1b31.domNode,this.sdgrdSODeliveries_Grid,"single");_1b31.startup();},loadDetailsView:function(){dojo.removeClass(this.loadingContainer,"display-none");dojo.addClass(this.salesOrderDetails,"display-none");dojo.addClass(this.tabContentDetails,"display-none");this._dialog.show();var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){var _1b32=row["$key"];this.dataStore=new _1b20({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"salesOrders",getResourcePredicate:function(){return dojo.string.substitute("'${0}'",[_1b32]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:["*,salesOrderLines/*,postalAddresses/*,buyerContact/fullName,pricelist/name,quotation/reference,salesOrderLines/commodity/name,salesOrderLines/unitOfMeasure/name,salesOrderLines/fulfillmentLocation/name,salesOrderLines/pricelist/name,salesOrderLines/commodityVariant/reference,salesOrderLines/commodityDimension/reference,salesOrderDeliveries/carrierTradingAccount/name"]});dojo.connect(this.dataStore,"onGetSingleResource",this,"buildGrids");this.dataStore.getSingleResource();}},callX3DetailsView:function(){var row=this.grid._grid.selection.getSelected()[0];if(row){var _1b33=row["$key"];dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/X3SalesOrder/getediterpsalesorderurl?salesOrderKey=${0}&operatingCompany=${1}&_dc=${2}",[_1b33,this.operatingCompanyId,new Date().getTime()]),cache:false,preventCache:true,handleAs:"json",load:lang.hitch(this,function(data,xhr){this.launchAccountingSystemView(data);}),error:function(_1b34,_1b35,error){dojo.byId([self.id,"-Loading-container"].join("")).innerHTML=_1b1c.Error_InvalidEndpoint;}});}},loadSalesOrderDetails:function(data){if(data&&typeof data!=="undefined"){this._dialog.set("value",data);}},buildGrids:function(data){this.loadSalesOrderDetails(data);this.loadAddresses(data);this.loadLineItems(data);if(this.salesOrderContainer!=null){this.salesOrderContainer.selectChild(this.salesOrderContent);}dojo.addClass(this.loadingContainer,"display-none");dojo.removeClass(this.salesOrderDetails,"display-none");dojo.removeClass(this.tabContentDetails,"display-none");this._dialog.resize();},hideDetailsDialog:function(){this.destroyFirst("sdgrdSalesPersons");this.salesPersonsDataStore=null;this.destroyFirst("sdgrdSODeliveries");this.deliveriesDataStore=null;this.destroyFirst("sdgrdSOPayments");this.paymentsDataStore=null;this._dialog.hide();},destroy:function(_1b36,args){},launchAccountingSystemView:function(data){if(data.error!=null){_1b21.showError(data.error);}else{try{window.open(data.url);}catch(err){_1b21.showError(this.errorERPRequest);console.error(dojo.string.substitute(this.errorERPRequestDetails,[this.errorERPRequest,err,url]));}}},executeErpInsertView:function(){dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/X3SalesOrder/getinserterpsalesorderurl?accountId=${0}&operatingCompany=${1}&_dc=${2}",[Sage.Utility.getCurrentEntityId(),this.operatingCompanyId,new Date().getTime()]),cache:false,preventCache:true,handleAs:"json",load:lang.hitch(this,function(data,xhr){this.launchAccountingSystemView(data);}),error:function(_1b37,_1b38,error){dojo.byId([self.id,"-Loading-container"].join("")).innerHTML=_1b1c.errorERPRequest;}});}});return _1b25;});},"Sage/MailMerge/main":function(){define("Sage/MailMerge/main",["Sage/MailMerge/Loader","Sage/MailMerge/Helper","Sage/MailMerge/MenuHelper"],function(){});},"Sage/MainView/IntegrationContract/MatchingOptionsConfig":function(){require({cache:{"url:Sage/MainView/IntegrationContract/templates/MatchingOptionsConfig.html":"[\r\n'<div>',\r\n    '<div id=\"{%= $.id %}-Context-container\">',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\">{%= $.matchingHeader %}',\r\n            '<span class=\"boldtext\">{%= $.resourceDisplayName %}</span>',\r\n        '</label>',\r\n        '<br /><br />',\r\n    '</div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontext padBottom\" style=\"padding-left:20px\">{%= $.matchingDescription %}</label>',\r\n    '</div>',\r\n    '<div>',\r\n        '<br />',\r\n        '<label class=\"slxlabel\" style=\"padding-left:20px\">{%= $.propertyText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:240px\">{%= $.operatorText %}</label>',\r\n    '</div>',\r\n    '<div id=\"{%= $.id %}-Loading-container\">',\r\n        '<br />',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingText %}</label>',\r\n    '</div>',\r\n//conditions\r\n    '<div style=\"padding:10px;\" id=\"{%= $.id %}-Condition-container\"></div>',\r\n//buttons\r\n    '<div class=\"button-bar alignright\">',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').matchingObject.updateMatchProperties();\">',\r\n            '{%= $.okText %}',\r\n        '</button>',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').destroy();\">',\r\n            '{%= $.cancelText %}',\r\n        '</button>',\r\n    '</div>',\r\n'</div>'\r\n]"}});define("Sage/MainView/IntegrationContract/MatchingOptionsConfig",["dojo/_base/declare","dojo/i18n!./nls/MatchingOptionsConfig","dojo/_base/array","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","dojo/text!./templates/MatchingOptionsConfig.html","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","dijit/Dialog"],function(_1b39,_1b3a,array,_1b3b,_1b3c,_1b3d,_1b3e){var _1b3f=_1b39("Sage.MainView.IntegrationContract.MatchingOptionsConfig",[_1b3b,_1b3c],{resourceKind:"",resourceDisplayName:"",id:"",index:0,selectedFieldIndex:0,matchingId:"",fields:[{FieldName:"",DisplayName:""}],operators:[],selectedFilters:[],hideimgurl:"images/icons/Find_Remove_16x16.gif",addimgurl:"images/icons/Find_Add_16x16.gif",widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1b3e)),constructor:function(){dojo.mixin(this,_1b3a);},init:function(_1b40){this.id=_1b40.Id;},conditionTemplate:new Simplate(["<div>","<div id=\"filterCondition_{%= $.index %}\" class=\"lookup-condition-row\" style=\"padding-left:12px\">","<select dojoType=\"dijit.form.select\" id=\"fieldnames_{%= $.index %}\" class=\"lookup-fieldnames-list\" style=\"width:160px\" >","{% for (var i=0; i < $.fields.length; i++) { %}","<option value=\"{%= $.fields[i].FieldName %}\" {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.fields[i].DisplayName %}</option>","{% } %}","</select>","<select dojoType=\"dijit.form.select\" id=\"operators_{%= $.index %}\" class=\"lookup-operators-list\" style=\"width:160px; margin-left:130px\">","{% for (var i=0;i<$.operators.length;i++) { %}","<option value=\"{%= $.operators[i].symbol %}\"  {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.operators[i].display %}</option>","{% } %}","</select>","{% if ($.index == 1 ) { %}","<img id=\"addCondition_{%= $.index %}\" src=\"{%= $.addimgurl %}\" alt=\"{%= $.filter_AddCondition %}\" style=\"cursor:pointer;padding:0px 5px;\" onclick=\"dijit.byId('{%= $.matchingId %}').matchingObject.addLookupCondition();\" />","{% } %}","{% if ($.index > 1 ) { %}","<img src=\"{%= $.hideimgurl %}\" alt=\"{%= $.filter_RemoveCondition %}\" style=\"cursor:pointer;padding:0px 5px;\" onclick=\"dijit.byId('{%= $.matchingId %}').matchingObject.removeLookupCondition({%= $.index %});\" />","{% } %}","</div>","</div>"]),onEditMatchConfig:function(_1b41,_1b42){this.resourceDisplayName=_1b42;this.resourceKind=_1b41;this.showDialog();},showDialog:function(){this.index=0;var _1b43=new dijit.Dialog({title:this.matchingCaption,id:[this.id,"-Dialog"].join(""),style:["height:",300,"px;width:",600,"px;"].join(""),matchingObject:this});_1b43.attr("content",this.widgetTemplate.apply(this));this.connect(_1b43,"onCancel",this.destroyDialog);this.matchingId=_1b43.id;_1b43.show();this.getMatchProperties();},getMatchProperties:function(){var self=this;dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/resources/getmatchproperties?resourceKind=${0}",[self.resourceKind]),cache:false,preventCache:true,handleAs:"json",load:function(data){self.fields=data.fields;self.operators=data.operators;self.selectedFilters=data.filters;dojo.query(dojo.byId([self.id,"-Loading-container"].join(""))).orphan();self.loadMatchingFilters();},error:function(_1b44,_1b45,error){dojo.byId([self.id,"-Loading-container"].join("")).innerHTML=self.error_InvalidEndpoint;}});},loadMatchingFilters:function(){for(var i=0;i<this.selectedFilters.length;i++){this.addLookupCondition();var field=dojo.byId(["fieldnames_",this.index].join(""));if(field!=null){field.value=this.selectedFilters[i].Property;}operator=dojo.byId(["operators_",this.index].join(""));if(operator!=null){operator.value=this.selectedFilters[i].Operator;operator.symbol=this.selectedFilters[i].Operator;}}},dialogResize:function(){dojo.style([this.id,"-Dialog"].join(""),"height","auto");},addLookupCondition:function(){this.index++;var _1b46=dojo.byId([this.id,"-Condition-container"].join(""));var _1b47=this.conditionTemplate.apply(this);dojo.place(_1b47,_1b46);this.dialogResize();},removeLookupCondition:function(idx){dojo.query(dojo.byId(["filterCondition_",idx].join(""))).orphan();},updateMatchProperties:function(){var self=this;dojo.xhrPost({url:"slxdata.ashx/slx/crm/-/resources/updateconfiguration",sync:true,postData:self.getSelections(),load:function(){self.destroyDialog();},error:function(_1b48,_1b49,error){_1b3d.showError(error);}});},getSelections:function(){var _1b4a=[];var _1b4b=dojo.query(".lookup-condition-row");for(var i=0;i<_1b4b.length;i++){var _1b4c=dojo.query(".lookup-fieldnames-list",_1b4b[i]);var _1b4d=dojo.query(".lookup-operators-list",_1b4b[i]);var _1b4e={fieldName:_1b4c[0].value,operator:_1b4d[0].value};_1b4a.push(_1b4e);}return Sys.Serialization.JavaScriptSerializer.serialize(_1b4a);},reloadOperators:function(_1b4f,_1b50){this.selectedFieldIndex=_1b4f;this.index=_1b50;var _1b51=this.conditionTemplate.apply(this);dojo.place(_1b51,["filterCondition_",_1b50].join(""),"replace");},destroyDialog:function(){var rows=dojo.query(".lookup-condition-row");if(rows!=null){array.forEach(rows,"dojo.query(item).orphan();");}var _1b52=dijit.byId([this.id,"-Dialog"].join(""));if(_1b52){_1b52.destroy();}}});return _1b3f;});},"Sage/Utility/UserOptions":function(){define("Sage/Utility/UserOptions",["Sage/Utility"],function(_1b53){Sage.namespace("Utility.UserOptions");return Sage.Utility.UserOptions={getConvertedOptionValue:function(_1b54,value){value=value.toLowerCase();var _1b55=value;switch(_1b54.toUpperCase()){case "DEFAULTCALENDARVIEW":var _1b56=/^(month|2)$/i;var _1b57=/^(week|1)$/i;var _1b58=/^(workweek|3)$/i;var dayRE=/^(day|0)$/i;if(_1b56.test(value)){_1b55="month";}else{if(_1b57.test(value)){_1b55="week";}else{if(_1b58.test(value)){_1b55="workweek";}else{if(dayRE.test(value)){_1b55="day";}else{_1b55="day";}}}}break;case "WORKWEEKSUN":case "WORKWEEKMON":case "WORKWEEKTUE":case "WORKWEEKWED":case "WORKWEEKTHU":case "WORKWEEKFRI":case "WORKWEEKSAT":case "REMEMBERUSERS":case "SHOWONOPPORTUNITIES":case "SHOWONREGARDING":case "SHOWONPHONENUMBER":case "SHOWONTIME":var _1b59=/^(true|yes|T|1)$/i;_1b55=_1b59.test(value);break;case "LOADHISTORYONSTART":var _1b5a=/^(true|yes|T|Y|0)$/i;_1b55=_1b5a.test(value);break;case "DAYSTARTTIME":_1b55=this.getHourPart(value);if(_1b55>24){_1b55=9;}break;case "DAYENDTIME":_1b55=this.getHourPart(value);if(_1b55>24){_1b55=17;}break;case "NUMEVENTS":case "DEFAULTINTERVAL":_1b55=parseInt(value);break;default:_1b55=value;}return _1b55;},getHourPart:function(value){var dt=value.split(" ");var t,h;if(dt.length>1&&value.indexOf("-")>0){t=dt[1];if(t){h=t.split(":")[0];}}else{h=value.split(":")[0];}if(value.indexOf("pm")>0||value.indexOf("PM")>0){h=parseInt(h)+12;}return parseInt(h,10);},getDay:function(value){var _1b5b=value;if(value.length>1){var _1b5c=[];_1b5c["SUNDAY"]=0;_1b5c["MONDAY"]=1;_1b5c["TUESDAY"]=2;_1b5c["WEDNESDAY"]=3;_1b5c["THURSDAY"]=4;_1b5c["FRIDAY"]=5;_1b5c["SATURDAY"]=6;_1b5b=_1b5c[value.toUpperCase()];}if(!_1b5b){_1b5b=1;}return _1b5b;},arraySort:function(a,b){return a-b;}};});},"Sage/MailMerge/Loader":function(){define("Sage/MailMerge/Loader",["Sage/Utility/ErrorHandler","Sage/MailMerge/Helper","Sage/MailMerge/MenuHelper","Sage/UI/Dialogs","dijit/_Widget","dojo/i18n","dojo/string","dojox/json/ref","dojo/_base/lang","dojo/i18n!./nls/Loader","dojo/_base/declare"],function(_1b5d,_1b5e,_1b5f,_1b60,_1b61,i18n,_1b62,ref,dLang,nls,_1b63){var _1b64=_1b63("Sage.MailMerge.Loader",[_1b61],{constructor:function(){this.inherited(arguments);},postMixInProperties:function(){dLang.mixin(this,nls);this.inherited(arguments);},DecodeMailMergeJsonFromUrl:function(url){var _1b65=null;dojo.xhrGet({url:url,preventCache:true,handleAs:"text",sync:true,load:function(data){if(data&&dojo.isString(data)&&data!==""){var _1b66=data.replace(/":null/gi,"\":\"\"");_1b65=ref.fromJson(_1b66);}},error:function(error,_1b67){_1b5d.handleHttpError(error,_1b67);}});return _1b65;},GetClientPath:function(){var _1b68=String(window.location);var _1b69=_1b68.lastIndexOf("/");if(_1b69!=-1){return _1b68.substring(0,_1b69);}return null;}});window.ExecuteWriteAction=function(_1b6a,param){_1b5e.ExecuteWriteAction(_1b6a,param);};window.GetMailMergeService=function(_1b6b){if(typeof console!=="undefined"){}return _1b5e.GetMailMergeService(_1b6b);};window.GetDesktopService=function(_1b6c){return _1b5e.GetMailMergeService(_1b6c);};if(!Sage.Services.hasService("MailMergeServiceLoader")){Sage.Services.addService("MailMergeServiceLoader",new Sage.MailMerge.Loader());}var _1b6d=true;var _1b6e=new _1b5f();var _1b6f=(navigator.userAgent.indexOf("Win")!=-1);if(_1b6f&&Sage&&Sage.Services){if(!Sage.gears){if(typeof initGears==="function"){initGears();}}if(Sage.gears&&Sage.gears.factory){dojo.addOnLoad(function(){_1b6e.attachWriteMenuPopulator();});_1b6d=false;}}if(_1b6d){try{if(!Sage.gears){if(window.console){}}if(Sage.gears&&!Sage.gears.factory){if(window.console){}}}catch(e){}dojo.addOnLoad(function(){_1b6e.removeWriteMenu();});}return _1b64;});},"url:Sage/UI/Controls/templates/PickListAsText.html":"<div>\r\n    <span id=\"${id}-Span\" data-dojo-attach-point=\"textSpan\"></span>\r\n</div>\r\n","Sage/UI/Columns/main":function(){define("Sage/UI/Columns/main",["Sage/UI/Columns/ActivityAlarm","Sage/UI/Columns/UserType","Sage/UI/Columns/ActivityType","Sage/UI/Columns/Boolean","Sage/UI/Columns/Cell","Sage/UI/Columns/CheckBox","Sage/UI/Columns/Currency","Sage/UI/Columns/DataType","Sage/UI/Columns/DateTime","Sage/UI/Columns/Dnd","Sage/UI/Columns/DndCell","Sage/UI/Columns/Email","Sage/UI/Columns/Lookup","Sage/UI/Columns/Numeric","Sage/UI/Columns/OwnerType","Sage/UI/Columns/Phone","Sage/UI/Columns/PickList","Sage/UI/Columns/RadioGroup","Sage/UI/Columns/SlxEdit","Sage/UI/Columns/SlxLink","Sage/UI/Columns/TextBox"],function(){});},"Sage/UI/Controls/Name":function(){require({cache:{"url:Sage/UI/Controls/templates/Name.html":"<div class=\"person\" slxcompositecontrol=\"true\" id=\"{%= $.id %}\" ><input id=\"{%= $.id %}-TextBox\" value=\"{%= $.nameDesc %}\"\r\n    data-dojo-type=\"Sage.UI.Controls.TextBox\" name=\"{%= $.name %}\" required=\"{%= $.required %}\" dojoAttachPoint=\"focusNode\"  data-dojo-attach-event=\"onChange:textBoxOnChange, onDblClick: showDialog\" data-dojo-props=\"textWithIcons: {%= $.buttonVisible %}\" />\r\n    {% if ($.buttonVisible) { %}\r\n    <img alt=\"{%= $.buttonToolTip %}\"  data-dojo-attach-event=\"ondijitclick: showDialog\"  tabindex=\"{%= $.tabIndex %}\"     \r\n    style=\"padding-left:0;cursor: pointer; vertical-align: left;\" \r\n    src=\"{%= $.buttonImageUrl %}\" title=\"{%= $.buttonToolTip %}\" id=\"{%= $.id %}-Button\" />\r\n    {% } %}\r\n<!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n-->\r\n</div>","url:Sage/UI/Controls/templates/PersonName.html":"<!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n-->\r\n<div>\r\n        <table width=\"100%\">\r\n            <tr>\r\n                <td><label>{%= $.prefixText %}</label></td>\r\n                <td>\r\n                    <select id=\"{%= $.id %}-Prefix\" data-dojo-type=\"Sage.UI.Controls.DropDownSelectPickList\" \r\n                    dojoAttachPoint=\"_valueBox\"\r\n                    pickListName=\"Name Prefix\"\r\n                    storeMode=\"text\"\r\n                    name=\"{%= $.NamePrefix %}\" \r\n                    style=\"width: 150px;display: inline-block\"\r\n                    shouldPublishMarkDirty=\"false\" />\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameFirstText %}</label></td>\r\n                <td>\r\n                    <input id=\"{%= $.id %}-First\" data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                    style=\"width:inherit;\"\r\n                    textAlign=\"{%= $.textAlign %}\"\r\n                    name=\"{%= $.NameFirst %}\" type=\"text\" data-dojo-attach-point=\"focusNode\"\r\n                    shouldPublishMarkDirty=\"false\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameMiddleText %}</label></td>\r\n                <td>\r\n                    <input id=\"{%= $.id %}-Middle\" data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                    style=\"width:inherit;\"\r\n                    textAlign=\"{%= $.textAlign %}\"\r\n                    name=\"{%= $.NameMiddle %}\" type=\"text\" data-dojo-attach-point=\"focusNode\"\r\n                    shouldPublishMarkDirty=\"false\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameLastText %}</label></td>\r\n                <td>\r\n                    <input id=\"{%= $.id %}-Last\" data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                    style=\"width:inherit;\"\r\n                    textAlign=\"{%= $.textAlign %}\"\r\n                    name=\"{%= $.NameLast %}\" type=\"text\" data-dojo-attach-point=\"focusNode\"\r\n                    shouldPublishMarkDirty=\"false\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.suffixText %}</label></td>\r\n                <td>\r\n                    <select id=\"{%= $.id %}-Suffix\" data-dojo-type=\"Sage.UI.Controls.DropDownSelectPickList\"\r\n                    dojoAttachPoint=\"_valueBox\"\r\n                    pickListName=\"Name Suffix\"\r\n                    storeMode=\"text\"\r\n                    name=\"{%= $.NameSuffix %}\"\r\n                    style=\"width: 150px;display: inline-block\"\r\n                    shouldPublishMarkDirty=\"false\" />\r\n                </td>\r\n            </tr>\r\n        </table>                    \r\n        <div class=\"button-bar alignright\" style=\"clear: both\">\r\n            <button id=\"{%= $.id %}-OKButton\" data-dojo-type=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId('{%= $.id %}')._okClicked();\">\r\n                {%= $.okText %}\r\n            </button>\r\n            <button id=\"{%= $.id %}-CancelButton\" data-dojo-type=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId('{%= $.id %}')._cancelClicked();\">\r\n                {%= $.cancelText %}\r\n            </button>\r\n        </div>\r\n</div>\r\n"}});define("Sage/UI/Controls/Name",["dojo/_base/lang","dojo/_base/declare","dojo/i18n","dijit/_Widget","Sage/_Templated","Sage/UI/Controls/TextBox","Sage/UI/Controls/PickList","Sage/UI/Controls/DropDownSelectPickList","dijit/Dialog","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n!./nls/Name","dojo/text!./templates/Name.html","dojo/text!./templates/PersonName.html"],function(lang,_1b70,i18n,_1b71,_1b72,_1b73,_1b74,_1b75,_1b76,_1b77,_1b78,_1b79,_1b7a){var _1b7b=_1b70("Sage.UI.Controls.Name",[_1b71,_1b72],{widgetTemplate:new Simplate(_1b79.split("\r")),dialogContent:new Simplate(_1b7a.split("\r")),templateOverridePath:"templates/PersonName-Override.html",widgetsInTemplate:true,clientId:"",nameDesc:"",buttonImageUrl:"",buttonToolTip:"",buttonVisible:true,tabIndex:0,prefix:"",first:"",middle:"",last:"",suffix:"","Name Prefix":{},"Name Suffix":{},"LastName Prefix":{},name:"",prefixClientId:"",nameFirstClientId:"",nameMiddleClientId:"",nameLastClientid:"",suffixClientId:"",required:false,autoPostBack:false,constructor:function(_1b7c){_1b7c.id=_1b7c.clientId;this.resources=i18n.getLocalization("Sage.UI.Controls","Name");if(_1b7c.templateOverridePath&&_1b7c.templateOverridePath.length>0){try{this.dialogContent=new Simplate(dojo["cache"]("Sage.UI.Controls",_1b7c.templateOverridePath).split("\r"));}catch(e){}}},postCreate:function(){this.getDotNetData();if(!this["Name Prefix"].data||!this["Name Suffix"].data||!this["LastName Prefix"].data){this.loadPickLists();}this.inherited(arguments);},loadPickLists:function(){var _1b7d=new dojo.Deferred();var _1b7e=new dojo.Deferred();var _1b7f=new dojo.Deferred();var _1b80={pickListName:"Name Prefix",canEditText:false,itemMustExist:true,maxLength:-1,storeMode:"text",sort:true,displayMode:"AsControl",required:false,autoPostBack:false};var _1b81=new _1b74(_1b80);_1b81.getPickListData(_1b7d);_1b7d.then(dojo.hitch(this,this.storePickListData),function(e){console.error(e);});_1b80.pickListName="Name Suffix";var _1b82=new _1b74(_1b80);_1b82.getPickListData(_1b7e);_1b7e.then(dojo.hitch(this,this.storePickListData),function(e){console.error(e);});_1b80.pickListName="LastName Prefix";var _1b83=new _1b74(_1b80);_1b83.getPickListData(_1b7f);_1b7f.then(dojo.hitch(this,this.storePickListData),function(e){console.error(e);});},storePickListData:function(data){this[data.name].data=data;},showDialog:function(){this.editDialog=dijit.byId([this.id,"-Dialog"].join(""));if(!this.editDialog){this.editDialog=new _1b76({title:this.resources.dialogTitle,id:[this.id,"-Dialog"].join("")});this.editDialog.set("content",this.dialogContent.apply({id:this.id,prefixText:this.resources.prefixText,nameFirstText:this.resources.nameFirstText,nameMiddleText:this.resources.nameMiddleText,nameLastText:this.resources.nameLastText,suffixText:this.resources.suffixText,cancelText:this.resources.cancelText,okText:this.resources.okText}));}this.setEditFields();lang.mixin(this.editDialog,new _1b77());this.editDialog.createHelpIconByTopic("editname");this.editDialog.show();if(this.modality==="modeless"){dojo.destroy([this.id,"-Dialog_underlay"].join(""));}},textBoxOnChange:function(value){if(value!==this.formatName()){this.parseName(value);this.setDotNetData();dojo.publish("Sage/events/markDirty");}},parseName:function(value){var _1b84=value.split(" ");var i,item;for(i=0;i<this["Name Prefix"].data.items.$resources.length;i++){item=this["Name Prefix"].data.items.$resources[i];if(item.text.toUpperCase()===_1b84[0].toUpperCase()){this.prefix=_1b84[0];_1b84.shift();break;}}for(i=0;i<this["Name Suffix"].data.items.$resources.length;i++){item=this["Name Suffix"].data.items.$resources[i];if(item.text.toUpperCase()===_1b84[_1b84.length-1].toUpperCase()){this.suffix=_1b84[_1b84.length-1];_1b84.pop();break;}}if(_1b84.length>0){this.last=_1b84[_1b84.length-1];_1b84.pop();}if(_1b84.length>0){for(i=0;i<this["LastName Prefix"].data.items.$resources.length;i++){item=this["LastName Prefix"].data.items.$resources[i];if(item.text.toUpperCase()===_1b84[_1b84.length-1].toUpperCase()){this.last=[_1b84[_1b84.length-1],this.last].join(" ");_1b84.pop();break;}}}if(_1b84.length===2){this.first=_1b84[0];this.middle=_1b84[1];}if(_1b84.length===1){this.first=_1b84[0];}},getEditFields:function(){this.updateNameObj();this.setDotNetData();dojo.publish("Sage/events/markDirty");},updateNameObj:function(){if(dijit.byId([this.id,"-Prefix"].join(""))){this.prefix=dijit.byId([this.id,"-Prefix"].join("")).comboBox.get("value");}if(dijit.byId([this.id,"-First"].join(""))){this.first=dijit.byId([this.id,"-First"].join("")).get("value");}if(dijit.byId([this.id,"-Middle"].join(""))){this.middle=dijit.byId([this.id,"-Middle"].join("")).get("value");}if(dijit.byId([this.id,"-Last"].join(""))){this.last=dijit.byId([this.id,"-Last"].join("")).get("value");}if(dijit.byId([this.id,"-Suffix"].join(""))){this.suffix=dijit.byId([this.id,"-Suffix"].join("")).comboBox.get("value");}},getDotNetData:function(){if(this.prefixClientId!==""){this.prefix=dojo.byId(this.prefixClientId).value;}if(this.nameFirstClientId!==""){this.first=dojo.byId(this.nameFirstClientId).value;}if(this.nameMiddleClientId!==""){this.middle=dojo.byId(this.nameMiddleClientId).value;}if(this.nameLastClientid!==""){this.last=dojo.byId(this.nameLastClientid).value;}if(this.suffixClientId!==""){this.suffix=dojo.byId(this.suffixClientId).value;}},setDotNetData:function(){dojo.byId(this.prefixClientId).value=this.prefix;dojo.byId(this.nameFirstClientId).value=this.first;dojo.byId(this.nameMiddleClientId).value=this.middle;dojo.byId(this.nameLastClientid).value=this.last;dojo.byId(this.suffixClientId).value=this.suffix;},setEditFields:function(){if(dijit.byId([this.id,"-Prefix"].join(""))){dijit.byId([this.id,"-Prefix"].join("")).comboBox.set("value",this.prefix);}if(dijit.byId([this.id,"-First"].join(""))){dijit.byId([this.id,"-First"].join("")).set("value",this.first);dijit.byId([this.id,"-First"].join("")).set("style","width:100%");}if(dijit.byId([this.id,"-Middle"].join(""))){dijit.byId([this.id,"-Middle"].join("")).set("value",this.middle);dijit.byId([this.id,"-Middle"].join("")).set("style","width:100%");}if(dijit.byId([this.id,"-Last"].join(""))){dijit.byId([this.id,"-Last"].join("")).set("value",this.last);dijit.byId([this.id,"-Last"].join("")).set("style","width:100%");}if(dijit.byId([this.id,"-Suffix"].join(""))){dijit.byId([this.id,"-Suffix"].join("")).comboBox.set("value",this.suffix);}},_okClicked:function(){this.getEditFields();if(this.focusNode.value!==this.formatName()){this.focusNode.set("value",this.formatName());dojo.publish("Sage/events/markDirty");}},_cancelClicked:function(){this.editDialog.hide();},formatName:function(){var name=((this.prefix=="")?"":this.prefix+" ");name+=((this.first=="")?"":this.first+" ");name+=((this.middle=="")?"":this.middle+" ");name+=((this.last=="")?"":this.last+" ");name+=((this.suffix=="")?"":this.suffix);name=name.trim();return name;}});return _1b7b;});},"url:Sage/MainView/IntegrationContract/templates/MatchingOptionsConfig.html":"[\r\n'<div>',\r\n    '<div id=\"{%= $.id %}-Context-container\">',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\">{%= $.matchingHeader %}',\r\n            '<span class=\"boldtext\">{%= $.resourceDisplayName %}</span>',\r\n        '</label>',\r\n        '<br /><br />',\r\n    '</div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontext padBottom\" style=\"padding-left:20px\">{%= $.matchingDescription %}</label>',\r\n    '</div>',\r\n    '<div>',\r\n        '<br />',\r\n        '<label class=\"slxlabel\" style=\"padding-left:20px\">{%= $.propertyText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:240px\">{%= $.operatorText %}</label>',\r\n    '</div>',\r\n    '<div id=\"{%= $.id %}-Loading-container\">',\r\n        '<br />',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingText %}</label>',\r\n    '</div>',\r\n//conditions\r\n    '<div style=\"padding:10px;\" id=\"{%= $.id %}-Condition-container\"></div>',\r\n//buttons\r\n    '<div class=\"button-bar alignright\">',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').matchingObject.updateMatchProperties();\">',\r\n            '{%= $.okText %}',\r\n        '</button>',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').destroy();\">',\r\n            '{%= $.cancelText %}',\r\n        '</button>',\r\n    '</div>',\r\n'</div>'\r\n]","Sage/MainView/IntegrationContract/nls/MatchingOptionsConfig":function(){define("Sage/MainView/IntegrationContract/nls/MatchingOptionsConfig",["Sage/LanguageList","dojo/_base/lang"],function(_1b85,lang){var nls={root:{matchingCaption:"Edit Match Criteria",matchingHeader:"Match Criteria for ",matchingDescription:"Add or remove operators to define the match criteria for all users who link Sage SalesLogix records with an accounting system. This criteria determines the results returned when searching for matching records between accounting systems.",propertyText:"Property",operatorText:"Operator",loadingText:"Loading...",filter_AddCondition:"Add Condition",filter_RemoveCondition:"Remove Condition",error_InvalidEndpoint:"Please specify a valid endpoint before continuing.",okText:"OK",cancelText:"Cancel"}};return lang.mixin(_1b85,nls);});},"Sage/QuickForms/Design/Editors/nls/FormBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/FormBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1b86,lang){var nls={root:{titleText:"Basic",generalText:"General",activeControlText:"Active Control:",activeControlTooltipText:"The control the user\\'s cursor starts on.",descriptionText:"Description:",descriptionTooltipText:"Optional description of the purpose of the form.",nameText:"Name:",nameTooltipText:"Form identifier used by the system."}};return lang.mixin(_1b86,nls);});},"Sage/TaskPane/GroupListTasklet":function(){define("Sage/TaskPane/GroupListTasklet",["dojox/grid/DataGrid","Sage/Data/SDataStore","Sage/Data/SDataServiceRegistry","dojo/string","Sage/Groups/GroupContextService","dojo/_base/declare","dijit/_Widget","dojo/_base/lang","Sage/UI/Filters/FilterManager","dojo/_base/array","Sage/Utility/_LocalStorageMixin","dojo/topic"],function(_1b87,_1b88,_1b89,_1b8a,_1b8b,_1b8c,_1b8d,lang,_1b8e,array,_1b8f,topic){var _1b90=_1b8c("Sage.Groups.GroupListTasklet",[_1b8d,_1b8f],{_contextSetHandle:null,_groupChangedHandle:null,gridLoadedHandler:null,gridOnSelectedHandle:null,groupContextService:null,context:null,grid:null,store:null,query:"",service:null,id:"GroupListTasklet",keyAlias:"",columnDisplayName:"",allowOnSelectToFire:true,STORE_KEY_STORE_QUERY:"_STORE_QUERY_",subscribesTo:{groupLookupSuccess:"/group/lookup/success",adhocGroupRemoved:"/group/adhoc/removed",groupNavFirst:"/group/nav/first",groupNavPrevious:"/group/nav/previous",groupNavNext:"/group/nav/next",groupNavLast:"/group/nav/last"},constructor:function(_1b91){this.inherited(arguments);lang.mixin(this,_1b91);this.groupContextService=Sage.Services.getService("ClientGroupContext");this.context=this.groupContextService.getContext();if(this.context.CurrentFamily===null){this._contextSetHandle=dojo.connect(this.groupContextService,"onContextSet",this,"_createList");}else{this._createList();}this._groupChangedHandle=dojo.connect(this.groupContextService,"onCurrentGroupChanged",this,"_groupChanged");topic.subscribe(this.subscribesTo.groupLookupSuccess,lang.hitch(this,this._onLookupSuccess));topic.subscribe(this.subscribesTo.groupNavFirst,lang.hitch(this,this._onGroupNavFirst));topic.subscribe(this.subscribesTo.groupNavPrevious,lang.hitch(this,this._onGroupNavPrevious));topic.subscribe(this.subscribesTo.groupNavNext,lang.hitch(this,this._onGroupNavNext));topic.subscribe(this.subscribesTo.groupNavLast,lang.hitch(this,this._onGroupNavLast));topic.subscribe(this.subscribesTo.adhocGroupRemoved,lang.hitch(this,this._onRecordRemoved));},_onLookupSuccess:function(args){Sage.Link.toListView();},_onGroupNavFirst:function(args){this.selectGridRow(0);},_onGroupNavLast:function(args){this.selectGridRow(args.count-1);},_onGroupNavPrevious:function(args){var _1b92=args.position-1;this.selectGridRow(_1b92-1);},_onGroupNavNext:function(args){var _1b93=args.position-1;this.selectGridRow(_1b93+1);},_onRecordRemoved:function(args){var index,_1b94;index=this.grid.selection.selectedIndex;if(index===0){_1b94=index+1;}else{_1b94=index-1;}this.selectGridRow(_1b94);this._onSelected(_1b94);this._onRecordRemovedRefresh(index===0?index:_1b94);},_onRecordRemovedRefresh:function(index){if(this.grid){this.gridRefreshedHandler=dojo.connect(this.grid,"_onFetchComplete",this,function(){this.selectGridRow(index);});try{this.grid.setStore(this.get("store"));}catch(err){}}},_groupChanged:function(){if(this.grid){this.gridLoadedHandler=dojo.connect(this.grid,"_onFetchComplete",this,"_groupChangedAndLoaded");try{this.grid.setStore(this.get("store"));}catch(err){}}},_groupChangedAndLoaded:function(){this.selectGridRow(0);this._onSelected(0);if(this.gridLoadedHandler){dojo.disconnect(this.gridLoadedHandler);}},_getStoreQueryKey:function(){var id=this.STORE_KEY_STORE_QUERY+this._getGroupID();return id;},_getGroupNS:function(){var ns=Sage.Groups.GroupManager.LOCALSTORE_NAMESPACE+"-"+this._getGroupID();return ns;},_getGroupID:function(){this.context=this.groupContextService.getContext();var _1b95=-1;if(this.context){_1b95=this.context.CurrentGroupID;}return _1b95;},_getStoreAttr:function(){this.context=this.groupContextService.getContext();this.context.CurrentFamily=this.context.CurrentFamily.toUpperCase();var _1b96="'"+this.context.CurrentGroupID+"'";if(this.context.CurrentGroupID==="LOOKUPRESULTS"){_1b96=_1b8a.substitute("name eq '${CurrentName}' and upper(family) eq '${CurrentFamily}'",this.context);}if(this.context["CurrentGroupID"]==="LOOKUPRESULTS"){this.context["CurrentName"]="Lookup Results";}var temp=this.getFromLocalStorage(this._getStoreQueryKey(),this._getGroupNS()),_1b97={resourceKind:"groups",service:this.service,queryName:"execute",resourcePredicate:_1b96,select:[this.keyAlias,this.columnDisplayName]};if(temp&&temp.store&&temp.query){_1b97.select=temp.store.select;_1b97.resourcePredicate=temp.store.resourcePredicate;this.query=temp.query;if(this.query){_1b97.where=this.query;}}this.store=new _1b88(_1b97);return this.store;},refreshGrid:function(){this.context=this.groupContextService.getContext();var _1b98=this.context.CurrentEntityPosition-1;this.selectGridRow(_1b98);if(this.gridRefreshedHandler){dojo.disconnect(this.gridRefreshedHandler);}},selectGridRow:function(_1b99){this.allowOnSelectToFire=false;if(this.grid.rowCount>0){this.grid.scrollToRow(_1b99);this.grid.selection.clear();this.grid.selection.select(_1b99);this.grid.onSelected(_1b99);}else{Sage.Link.toListView();}this.allowOnSelectToFire=true;},uninitialize:function(){try{if(this.grid&&this.grid.destroy){this.grid.destroy();}if(this.gridOnSelectedHandle){this.gridOnSelectedHandle.remove();}}catch(err){}this.inherited(arguments);},_createList:function(){var self=this,_1b9a=this.id+"_grid",grid;this.service=_1b89.getSDataService("system");if(this.grid){this.grid.setStore(this.get("store"));grid=this.grid;}else{grid=new _1b87({store:this.get("store"),id:_1b9a,structure:[{field:"_item",headerClasses:"displaynone",width:"100%",formatter:function(item){return (item&&item.hasOwnProperty(self.columnDisplayName)?item[self.columnDisplayName]:dojo.string.substitute("(${0})",[item[self.keyAlias]]));}},{field:this.keyAlias,hidden:true,headerClasses:"displaynone",width:"0px"}],showTitle:false,autoWidth:false,rowSelector:false,selectionMode:"single",width:"100%",height:"230px"});dojo.byId(this.id+"_node").appendChild(grid.domNode);this.gridRefreshedHandler=dojo.connect(grid,"_onFetchComplete",this,"refreshGrid");grid.startup();this.grid=grid;}this.gridOnSelectedHandle=this.grid.on("selected",lang.hitch(this,this._onSelected));},_onSelected:function(index){if(!this.allowOnSelectToFire){return;}var cec,_1b9b,_1b9c,nav;if(Sage.Services.hasService("ClientEntityContext")){cec=Sage.Services.getService("ClientEntityContext");_1b9b=cec.getContext().EntityId;_1b9c=this.grid.selection.getFirstSelected();if(_1b9c){cec.navigateSLXGroupEntity(_1b9c[this.keyAlias],_1b9b,index+1);}}}});return _1b90;});},"Sage/Layout/MainContentDetailsPane":function(){define("Sage/Layout/MainContentDetailsPane",["dojo/_base/declare","dojo/dom-style","Sage/Layout/ContentPane"],function(_1b9d,_1b9e,_1b9f){var _1ba0=_1b9d("Sage.Layout.MainContentDetailsPane",[_1b9f],{postCreate:function(){this.inherited(arguments);var _1ba1=Sage.Services.getService("ClientEntityContext");if(_1ba1){var _1ba2=_1ba1.getContext();this.storageId=[_1ba2.EntityType.replace(/\./g,"_"),"_",this.id].join("");}this.connect(this,"startup",this.noContentResize);},mainPaneChildrenExist:true,tabPaneChildrenExist:true,noContentResize:function(){var dim={h:this.domNode.scrollHeight,w:this.domNode.scrollWidth},self=this;var _1ba3=function(){self.resize(dim);_1b9e.set(self._splitterWidget.domNode,"display","none");};if(!this.tabPaneChildrenExist){var _1ba4=dijit.byId("centerContent");dim={h:_1ba4.domNode.scrollHeight,w:this.domNode.scrollWidth};_1ba3();}if(!this.mainPaneChildrenExist){dim={h:1,w:this.domNode.scrollWidth};_1ba3();}},startup:function(){var _1ba5=dijit.byId("Viewport");var _1ba6=dojo.query("[id$=_inner]",dojo.query(".mainContentContent")[0])[0];if(_1ba6){this.mainPaneChildrenExist=(_1ba6.children.length>1||dojo.query("#MainContent .formtable").length>0||_1ba6.id==="GeneralExceptioncontents_inner");}else{this.mainPaneChildrenExist=false;}this.tabPaneChildrenExist=(dijit.byId("tabContent").domNode.children.length>0);if(!this.tabPaneChildrenExist||!this.mainPaneChildrenExist){this.set("splitter",false);}if(this.splitter){var _1ba7=dojo.query("[class$=SecondaryToggle]");if(_1ba7){for(var i=0;i<_1ba7.length;i++){dojo.style(_1ba7[i],"display","none");}}}if(_1ba5){_1ba5.resize();}this.inherited(arguments);}});return _1ba0;});},"Sage/Utility/ErrorHandler":function(){define("Sage/Utility/ErrorHandler",["Sage/Utility","Sage/UI/Dialogs","dojo/io-query","dojo/string","dojo/_base/array"],function(_1ba8,_1ba9,_1baa,_1bab,array){Sage.namespace("Utility.ErrorHandler");dojo.mixin(Sage.Utility.ErrorHandler,{_debugEndRequest:false,_configuration:{isDebug:false,preemption:{enabled:true,allowAuthRedirect:true,handledStatusCodes:"577,578,579,580,581,582",showPreemptedErrorMsg:false,showInternalServerErrorMsg:false,showUnhandledMessagingServiceExceptionMsg:true},showExtendedValidationException:false,showExtendedRoleAccessDeniedException:false},_fmtSlxErrorId:function(_1bac){if(Sage.Utility.isStringWithLength(_1bac)){if(this._configuration.isDebug){return _1bab.substitute("\r\n\r\nSalesLogix Error Id: <a href=\"SLXErrorLookupService.asmx/GetEventLogError?slxErrorId=${0}\" target=\"_blank\">${0}</a>",[_1bac]);}else{return _1bab.substitute("\r\n\r\nSalesLogix Error Id: ${0}",[_1bac]);}}return "";},_fmtStackTrace:function(_1bad){if(this._configuration.isDebug&&Sage.Utility.isStringWithLength(_1bad)){var stack=Sage.Utility.htmlEncode(_1bad).replace(/(\r\n)/g,"&#13;&#10;").trim();return _1bab.substitute("\r\n\r\nStack trace:\r\n<textarea id=\"StackTrace\" cols=\"20\" name=\"StackTrace\" readonly=\"readonly\" rows=\"1\" style=\"width: 100%; height: 200px; font-family: 'Courier New', Courier, monospace; font-size: small; background-color: #F2F2F2; color: #444444; 1px: ; opacity: 0.8; -moz-box-sizing: border-box; box-sizing: border-box;\" unselectable=\"off\" wrap=\"off\">${0}</textarea>",[stack]);}return "";},_mixinConfig:function(){if(window.errorHandlerConfig&&typeof window.errorHandlerConfig==="object"){dojo.mixin(this._configuration,window.errorHandlerConfig);}},_preemptError:function(xhr,o){try{var _1bae=this.getHttpStatusInfo(xhr,o);if(this._configuration.isDebug&&typeof console!=="undefined"){}if(!(_1bae&&typeof _1bae==="object"&&_1bae.hasOwnProperty("sdataError"))){return false;}var _1baf=function(_1bb0,_1bb1){if(_1bb0&&typeof _1bb0==="object"&&typeof xhr.getResponseHeader!=="undefined"&&_1bb1&&dojo.isString(_1bb1)){var sUrl=_1bb0.getResponseHeader(_1bb1);if(sUrl&&Sage.Utility.isStringWithLength(sUrl)){return sUrl;}}return null;};var _1bb2=function(_1bb3){return _1baf(_1bb3,"Sage-SalesLogix-Exception-Redirect");};var _1bb4=function(_1bb5){return _1baf(_1bb5,"Sage-SalesLogix-Error-Id");};var _1bb6=function(url){if(typeof console!=="undefined"){}window.location=url;};var _1bb7;if((this.isSDataExceptionDiagnoses(_1bae.sdataError.applicationCode)&&(_1bae.status==500)&&this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg)){this.showStatusInfoError(_1bae);return true;}switch(_1bae.status){case 401:if(typeof console!=="undefined"){console.error("Unauthorized (401): %o",_1bae.url);}if(this.isConfiguredToHandle(_1bae.status)){this.showStatusInfoError(_1bae);return true;}return false;case 403:if(typeof console!=="undefined"){console.error("Forbidden (403): %o",_1bae.url);}if(this.isConfiguredToHandle(_1bae.status)){this.showStatusInfoError(_1bae);return true;}return false;case 404:if(typeof console!=="undefined"){console.error("Not Found (404): %o",_1bae.url);}if(this.isConfiguredToHandle(_1bae.status)){this.showStatusInfoError(_1bae);return true;}return false;case 408:if(typeof console!=="undefined"){console.error("Request Timeout: %o",_1bae.url);}if(this.isConfiguredToHandle(_1bae.status)){this.showStatusInfoError(_1bae);return true;}return false;case 500:if(typeof console!=="undefined"){console.error("Internal Server Error (500) - HTTP Info: %o",_1bae);}if((this.isSDataExceptionDiagnoses(_1bae.sdataError.applicationCode)&&this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg)||this._configuration.preemption.showInternalServerErrorMsg){this.showStatusInfoError(_1bae);return true;}return false;case 575:if(typeof console!=="undefined"){console.error("AuthTokenNullException (575) - SalesLogix Error Id: %o; HTTP Info: %o",_1bb4(xhr),_1bae);}if(this._configuration.preemption.allowAuthRedirect){_1bb7=_1bb2(xhr);if(_1bb7!==null){_1bb6(_1bb7);return true;}}return false;case 576:if(typeof console!=="undefined"){console.error("BaseException (576) - SalesLogix Error Id: %o; HTTP Info: %o",_1bb4(xhr),_1bae);}if(this._configuration.preemption.showPreemptedErrorMsg){this.showStatusInfoError(_1bae);return true;}return false;case 577:if(typeof console!=="undefined"){console.error("RoleAccessDeniedException (577) - SalesLogix Error Id: %o; HTTP Info: %o",_1bb4(xhr),_1bae);}if(this.isConfiguredToHandle(_1bae.status)){this.showStatusInfoError(_1bae);return true;}return false;case 578:if(typeof console!=="undefined"){console.error("ValidationException (578) - SalesLogix Error Id: %o; HTTP Info: %o",_1bb4(xhr),_1bae);}if(this.isConfiguredToHandle(_1bae.status)){this.showStatusInfoError(_1bae);return true;}return false;case 579:if(typeof console!=="undefined"){console.error("UserObservableException (579) - SalesLogix Error Id: %o; HTTP Info: %o",_1bb4(xhr),_1bae);}if(this.isConfiguredToHandle(_1bae.status)){this.showStatusInfoError(_1bae);return true;}return false;case 580:if(typeof console!=="undefined"){console.error("HttpRequestValidationException (580) - SalesLogix Error Id: %o; HTTP Info: %o",_1bb4(xhr),_1bae);}if(this.isConfiguredToHandle(_1bae.status)){this.showStatusInfoError(_1bae);return true;}return false;case 581:if(typeof console!=="undefined"){console.error("StringOrBinaryDataWouldBeTruncatedException (581) - SalesLogix Error Id: %o; HTTP Info: %o",_1bb4(xhr),_1bae);}if(this.isConfiguredToHandle(_1bae.status)){this.showStatusInfoError(_1bae);return true;}return false;case 582:if(typeof console!=="undefined"){console.error("AccessException (582) - SalesLogix Error Id: %o; HTTP Info: %o",_1bb4(xhr),_1bae);}if(this.isConfiguredToHandle(_1bae.status)){this.showStatusInfoError(_1bae);return true;}return false;default:if(typeof console!=="undefined"){}if(this.isConfiguredToHandle(_1bae.status)){this.showStatusInfoError(_1bae);return true;}return false;}}catch(e){if(typeof console!=="undefined"){}return false;}},init:function(){this._mixinConfig();if(this._configuration.preemption.enabled){if(window.dojoConfig&&window.dojoConfig.ioPublish&&typeof window.dojoConfig.ioPublish==="boolean"&&window.dojoConfig.ioPublish===true){dojo.subscribe("/dojo/io/error",function(dfd,_1bb8){if(dfd&&typeof dfd==="object"&&typeof dfd.ioArgs==="object"){if((Sage.Utility.ErrorHandler._hasErrorHandler(dfd.ioArgs.url)==false)||(dfd.ioArgs.xhr.status===575)){Sage.Utility.ErrorHandler._preemptError(dfd.ioArgs.xhr,{url:dfd.ioArgs.url});}}return _1bb8;});}else{(function(){var _1bb9=dojo.xhr;dojo.xhr=function(_1bba,args,_1bbb){return _1bb9.apply(dojo,arguments).addErrback(function(err){if(err&&typeof err==="object"&&(err instanceof Error)&&typeof err.xhr==="object"){var sUrl=(args&&args.url)?args.url||"":"";if((Sage.Utility.ErrorHandler._hasErrorHandler(sUrl)==false)||(err.xhr.status===575)){Sage.Utility.ErrorHandler._preemptError(err.xhr,{url:sUrl});}}return err;});};})();}(function(){var _1bbc=Sage.SData.Client.Ajax.request;Sage.SData.Client.Ajax.request=function(o){dojo.mixin(o,{__failure:null,__failureHandler:function(_1bbd,opt){if(opt.__failure&&typeof opt.__failure==="function"){try{opt.__failure.call(opt.scope||this,_1bbd,opt);}catch(e){if(typeof console!=="undefined"){console.error("There was an error calling the original failure() handler: %o",e);}}}var sUrl=opt.url;if((Sage.Utility.ErrorHandler._hasErrorHandler(sUrl)==false)||(_1bbd.status===575)){Sage.Utility.ErrorHandler._preemptError(_1bbd,opt);}return _1bbd;}});if(typeof o.failure==="function"){o.__failure=o.failure;}o.failure=o.__failureHandler;return _1bbc.apply(this,arguments);};})();if(typeof $==="function"){$(function(){jQuery(this).ajaxError(function(event,jqXhr,_1bbe,_1bbf){var sUrl=(typeof _1bbe==="object")?(_1bbe.url||""):"";var _1bc0={url:sUrl};if((Sage.Utility.ErrorHandler._hasErrorHandler(sUrl)==false)||(jqXhr.status===575)){Sage.Utility.ErrorHandler._preemptError(jqXhr,_1bc0);}});});}}},_getInternalHttpStatus:function(_1bc1){if(_1bc1&&typeof _1bc1==="object"&&_1bc1.hasOwnProperty("status")&&(isNaN(_1bc1.status)==false)){if(typeof _1bc1.sdataError==="object"&&this.isSDataExceptionDiagnoses(_1bc1.sdataError.applicationCode)&&typeof _1bc1.sdataError.appInfo==="object"&&typeof _1bc1.sdataError.appInfo.exceptionKind==="string"){switch(_1bc1.sdataError.appInfo.exceptionKind){case "AuthTokenNullException":return 575;case "BaseException":if(Number(_1bc1.status)==500){return 576;}else{return Number(_1bc1.status);}case "RoleAccessDeniedException":return 577;case "ValidationException":return 578;case "UserObservableException":return 579;case "HttpRequestValidationException":return 580;case "StringOrBinaryDataWouldBeTruncatedException":return 581;case "AccessException":return 582;default:return Number(_1bc1.status);}}else{return Number(_1bc1.status);}}return -1;},_getStatusInfoOptions:function(opt){var _1bc2={"message":"","url":""};if(opt&&dojo.isObject(opt)){dojo.mixin(_1bc2,opt);}return _1bc2;},_handleAsDojoXhrHttpError:function(error,_1bc3,opt){var _1bc4=this._getStatusInfoOptions(opt);var _1bc5="";if(error&&dojo.isObject(error)){_1bc5=error.message||"";}if(_1bc5!=""&&_1bc4.message!=""){_1bc4.message=_1bc4.message+" "+_1bc5;}else{_1bc4.message=_1bc5;}var xhr=(_1bc3&&dojo.isObject(_1bc3)&&_1bc3.xhr&&dojo.isObject(_1bc3.xhr))?_1bc3.xhr:null;if(_1bc4.url==""&&xhr!=null&&dojo.isString(_1bc3.url)){_1bc4.url=_1bc3.url;}this._handleAsHttpError(xhr,null,_1bc4);},_handleAsHttpError:function(xhr,sdata,_1bc6){var _1bc7=this.getHttpStatusInfo(xhr,sdata);if(_1bc7!=null){this.showStatusInfoError(_1bc7,_1bc6);}else{var _1bc8=(_1bc6&&dojo.isObject(_1bc6)&&Sage.Utility.isStringWithLength(_1bc6.message))?_1bc6.message:"There was an unknown error in response to an HTTP request.";_1ba9.showError(_1bc8);}},_hasErrorHandler:function(url){var _1bc9="HASERRORHANDLER";if(url&&dojo.isString(url)&&url.toUpperCase().indexOf(_1bc9)!=-1){var query=url.substring(url.indexOf("?")+1,url.length);if(query!=""){var _1bca=_1baa.queryToObject(query.toUpperCase());if(_1bca&&dojo.isObject(_1bca)){return _1bca[_1bc9]==="TRUE";}}}return false;},handleEndRequestError:function(args){if(this._debugEndRequest&&typeof console!=="undefined"){}if(args&&typeof args==="object"&&typeof args.get_error==="function"&&args.get_error()!==null){try{function _1bcb(msg){if(msg&&dojo.isString(msg)){return msg.replace("Sys.WebForms.PageRequestManagerServerErrorException: ","").replace("Sys.WebForms.PageRequestManagerParserErrorException: ","").replace("Sys.WebForms.PageRequestManagerTimeoutException: ","");}return msg;};switch(args.get_error().name){case "Sys.WebForms.PageRequestManagerTimeoutException":case "Sys.WebForms.PageRequestManagerParserErrorException":_1ba9.showError(_1bcb(args.get_error().message));args.set_errorHandled(true);return;}var _1bcc=args.get_response()!==null;var _1bcd=_1bcc?args.get_response().get_timedOut():false;var _1bce=_1bcc?args.get_response().get_aborted():false;var _1bcf=_1bcc?args.get_response().get_statusCode():-1;var _1bd0=_1bcc?args.get_response().get_responseAvailable():false;if(this._debugEndRequest&&typeof console!=="undefined"){}if(_1bcf==0||_1bce){args.set_errorHandled(true);return;}var _1bd1=_1bd0?(args.get_response().hasOwnProperty("_xmlHttpRequest")&&args.get_response()._xmlHttpRequest!==null):false;if(this._debugEndRequest&&typeof console!=="undefined"){}if(_1bd1||_1bcd){var xhr=args.get_response()._xmlHttpRequest;if(this._debugEndRequest&&typeof console!=="undefined"){}if(_1bcf==200||_1bcd){if(this._debugEndRequest&&typeof console!=="undefined"){}_1ba9.showError(_1bcb(args.get_error().message));args.set_errorHandled(true);return;}var _1bd2=this.isConfiguredToHandle(_1bcf,xhr);if(this._debugEndRequest&&typeof console!=="undefined"){}if(_1bd2){if(this._debugEndRequest&&typeof console!=="undefined"){}this._preemptError(xhr);}else{if(this._debugEndRequest&&typeof console!=="undefined"){}this.handleHttpError(xhr);}args.set_errorHandled(true);return;}if(this._debugEndRequest&&typeof console!=="undefined"){}_1ba9.showError(_1bcb(args.get_error().message));args.set_errorHandled(true);}catch(e){if(typeof console!=="undefined"){console.error("There was an error in handleEndRequestError(): %o",e);}}}else{if(this._debugEndRequest&&typeof console!=="undefined"){}}},handleHttpError:function(arg1,arg2,_1bd3){var _1bd4=(arg1&&dojo.isObject(arg1)&&typeof arg1.getResponseHeader!=="undefined");if(_1bd4){this._handleAsHttpError(arg1,arg2,_1bd3);}else{this._handleAsDojoXhrHttpError(arg1,arg2,_1bd3);}},getInterceptedError:function(_1bd5,_1bd6){if(!Sage.Utility.isStringWithLength(_1bd5)){return null;}if(Sage.Utility.isTrue(_1bd6)){var obj=dojo.fromJson(_1bd5);if(obj&&typeof obj==="object"){return obj;}}else{return {"text":_1bd5};}return null;},getSDataDiagnosis:function(_1bd7,isXml){if(!Sage.Utility.isStringWithLength(_1bd7)){return null;}var obj;if(Sage.Utility.isTrue(isXml)){var xml=new XML.ObjTree();obj=xml.parseXML(_1bd7);if(obj&&typeof obj==="object"&&obj.hasOwnProperty("sdata:diagnoses")){obj=obj["sdata:diagnoses"]["sdata:diagnosis"];if(!obj||typeof obj!=="object"){return null;}var _1bd8=function(prop){var value=obj.hasOwnProperty(prop)?obj[prop]:"";if(value&&dojo.isString(value)){if(prop==="stackTrace"){if(!this._configuration.isDebug){return "";}}return value;}return "";};return {"severity":_1bd8("sdata:severity"),"sdataCode":_1bd8("sdata:sdataCode"),"applicationCode":_1bd8("sdata:applicationCode"),"message":_1bd8("sdata:message"),"stackTrace":_1bd8("sdata:stackTrace"),"payloadPath":_1bd8("sdata:payloadPath")};}}else{obj=dojo.fromJson(_1bd7);if(obj&&dojo.isArray(obj)&&obj.length>0&&typeof obj[0]==="object"&&obj[0].hasOwnProperty("sdataCode")){return obj[0];}}return null;},getHttpStatusInfo:function(xhr,sdata){var _1bd9=(xhr&&dojo.isObject(xhr)&&typeof xhr.getResponseHeader!=="undefined");if(!_1bd9){return null;}var _1bda=this.safeGetPropValue(xhr,"status",-1);var _1bdb=this.safeGetPropValue(xhr,"statusText","Unknown HTTP status. Possible timeout.");var _1bdc={"message":_1bab.substitute("HTTP status: ${0} (${1}).",[_1bdb,_1bda]),"status":_1bda,"statusText":_1bdb,"url":(sdata&&dojo.isObject(sdata)&&dojo.isString(sdata.url))?sdata.url:"","sdataError":{}};if(xhr.readyState!==4){return _1bdc;}var _1bdd=xhr.getResponseHeader("Content-Type");if(dojo.isString(_1bdd)){var self=this;switch(_1bda){case 576:case 577:case 578:case 579:case 580:case 581:case 582:var _1bde;var _1bdf=function(_1be0){var _1be1=self.safeGetPropValue(xhr,"responseText","");return self.getInterceptedError(_1be1,_1be0);};if(_1bdd.indexOf("application/json")!==-1){_1bde=_1bdf(true);}else{if(_1bdd.indexOf("text/plain")!==-1){_1bde=_1bdf(false);if(_1bde&&typeof _1bde==="object"&&_1bde.hasOwnProperty("text")){if(_1bda===576){_1bdc.message+="\r\n\r\n"+_1bde.text;}else{_1bdc.message=_1bde.text;}return _1bdc;}}else{return _1bdc;}}if(_1bde&&typeof _1bde==="object"&&_1bde.hasOwnProperty("slxErrorId")){_1bdc.errorInfo=_1bde;}break;default:var _1be2;var _1be3=function(isXml){var _1be4=self.safeGetPropValue(xhr,"responseText","");return self.getSDataDiagnosis(_1be4,isXml);};if(_1bdd.indexOf("application/json")!==-1){_1be2=_1be3(false);}else{if(_1bdd.indexOf("application/xml")!==-1){_1be2=_1be3(true);}else{return _1bdc;}}if(_1be2&&typeof _1be2==="object"&&_1be2.hasOwnProperty("sdataCode")){var _1be5={"severity":"","sdataCode":"","applicationCode":"","message":"","stackTrace":"","payloadPath":"",fmtError:function(){var _1be6=[];for(var prop in this){if(prop=="message"||prop=="stackTrace"||prop=="fmtError"){continue;}var value=this[prop];if(dojo.isString(value)&&value!=""){_1be6.push(_1bab.substitute("${0}=${1}",[prop.toString(),value]));}}return (_1be6.length>0)?_1be6.join("; "):"";}};_1bdc.sdataError=_1be5;dojo.mixin(_1bdc.sdataError,_1be2);if(_1bdc.sdataError.applicationCode&&this.isSDataExceptionDiagnoses(_1bdc.sdataError.applicationCode)){var _1be7=function(){var obj={};var _1be8=_1bdc.sdataError.applicationCode.split("; ");array.forEach(_1be8,function(item){if(item&&dojo.isString(item)&&item.indexOf("=")!==-1){var _1be9=item.split("=");var name=_1be9[0].trim();var value=_1be9[1].trim();obj[name]=value;}});return obj;};_1bdc.sdataError.appInfo=_1be7();if(_1bdc.sdataError.appInfo.hasOwnProperty("code")&&_1bdc.sdataError.appInfo.source){_1bdc.sdataError.applicationCode=_1bdc.sdataError.appInfo.code+"|"+_1bdc.sdataError.appInfo.source;}else{_1bdc.sdataError.applicationCode=_1bdc.sdataError.appInfo.source;}if(_1bdc.sdataError.appInfo.source){delete _1bdc.sdataError.appInfo.source;}}var _1bea="UNKNOWN";if(Sage.Utility.isStringWithLength(_1bdc.sdataError.severity)){_1bea=_1bdc.sdataError.severity.toUpperCase();}var _1beb={"INFO":"Informational message","WARNING":"Warning message","TRANSIENT":"Transient error","ERROR":"Operation failed","FATAL":"Severe error","UNKNOWN":"Unknown"};var _1bec=_1beb[_1bea]||_1beb["UNKNOWN"];var _1bed=_1bdc.sdataError.message;if(dojo.isString(_1bed)){if(_1bed.trim().match("."+"$")!="."){_1bed+=".";}}if(this._configuration.isDebug){_1bdc.message=_1bab.substitute("The following SData diagnosis occurred: Description=${0}. Message=${1} HTTP status: ${2} (${3}).",[_1bec,_1bed,_1bdc.statusText,_1bdc.status]);}else{var _1bee=this._getInternalHttpStatus(_1bdc);var _1bef=true;switch(_1bee){case 577:if(!this._configuration.showExtendedRoleAccessDeniedException){_1bef=false;}break;case 578:if(!this._configuration.showExtendedValidationException){_1bef=false;}break;case 582:_1bef=false;break;}if(_1bef){_1bdc.message=_1bab.substitute("${0} HTTP status: ${1} (${2}).",[_1bed,_1bdc.statusText,_1bdc.status]);}else{_1bdc.message=_1bed;}}}break;}}return _1bdc;},isConfiguredToHandle:function(_1bf0,xhr){var _1bf1=false;if(this._configuration.preemption.enabled==false){return false;}if(_1bf0&&isNaN(_1bf0)==false){switch(Number(_1bf0)){case 500:if(this._configuration.preemption.showInternalServerErrorMsg){return true;}if(this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg){var _1bf2=this.getHttpStatusInfo(xhr);if(!(_1bf2&&typeof _1bf2==="object"&&_1bf2.hasOwnProperty("sdataError"))){return false;}return this.isSDataExceptionDiagnoses(_1bf2.sdataError.applicationCode);}break;case 575:return this._configuration.preemption.allowAuthRedirect;case 576:return this._configuration.preemption.showPreemptedErrorMsg;default:if(this._configuration.preemption.handledStatusCodes!=""){var _1bf3=this._configuration.preemption.handledStatusCodes.split(",");array.some(_1bf3,function(sc){if(sc==_1bf0){_1bf1=true;return true;}else{return false;}});}break;}}return _1bf1;},isSDataExceptionDiagnoses:function(_1bf4){if(_1bf4&&typeof _1bf4==="string"&&_1bf4.indexOf("SDataExceptionDiagnoses")!=-1){return true;}return false;},preemptError:function(xhr,o){this._preemptError(xhr,o);},safeGetPropValue:function(obj,prop,_1bf5){try{return obj[prop];}catch(e){return _1bf5;}},showStatusInfoError:function(_1bf6,opt){var _1bf7=this._getStatusInfoOptions(opt);var _1bf8=_1bf7.message;var _1bf9="";var _1bfa="";var _1bfb="";var _1bfc="";var _1bfd=this._getInternalHttpStatus(_1bf6);if(_1bf6&&dojo.isObject(_1bf6)&&dojo.isString(_1bf6.message)){_1bf8+=(_1bf8=="")?_1bf6.message:" "+_1bf6.message;switch(_1bfd){case 576:case 577:case 578:case 579:case 580:case 581:case 582:_1bf8=Sage.Utility.htmlEncode(_1bf6.message);if(typeof _1bf6.errorInfo==="object"){_1bf8=Sage.Utility.htmlEncode(_1bf6.errorInfo.message);}switch(_1bfd){case 577:if(!this._configuration.showExtendedRoleAccessDeniedException){_1ba9.showError(_1bf8);return;}break;case 578:if(!this._configuration.showExtendedValidationException){_1ba9.showError(_1bf8);return;}case 579:break;case 576:case 580:case 581:if(_1bf6.status!=500){_1bf8+=_1bab.substitute(" HTTP status: ${info.statusText} (${info.status}).",{info:_1bf6});}break;case 582:_1ba9.showError(_1bf8);return;}break;}if(typeof _1bf6.sdataError==="object"&&typeof _1bf6.sdataError.appInfo==="object"){_1bfb=_1bab.substitute("\r\n\r\nSalesLogix Error Id: ${0}",[_1bf6.sdataError.appInfo.slxErrorId]);_1bfc=this._fmtSlxErrorId(_1bf6.sdataError.appInfo.slxErrorId);_1bf8+=_1bfc;}if(typeof _1bf6.errorInfo==="undefined"){var sUrl=null;if(Sage.Utility.isStringWithLength(_1bf6.url)){if(_1bf8.indexOf(decodeURIComponent(_1bf6.url))==-1){sUrl=decodeURIComponent(_1bf6.url);}}else{if(Sage.Utility.isStringWithLength(_1bf7.url)){if(_1bf8.indexOf(decodeURIComponent(_1bf7.url))==-1){sUrl=decodeURIComponent(_1bf7.url);}}}if(sUrl!==null){_1bf8+=_1bab.substitute("\r\n\r\nURL: ${0}",[sUrl]);}}if(this._configuration.isDebug){if(typeof _1bf6.sdataError==="object"){if(dojo.isFunction(_1bf6.sdataError.fmtError)){_1bf8+=_1bab.substitute("\r\n\r\nExtended SData diagnosis information: ${0}.",[_1bf6.sdataError.fmtError()]);}if(typeof _1bf6.sdataError.appInfo==="object"){_1bf8+=_1bab.substitute("\r\n\r\nException type: ${info.exceptionType}\r\n\r\nSource: ${info.exceptionSource}",{info:_1bf6.sdataError.appInfo});}if(_1bf6.sdataError.stackTrace){_1bf9=_1bf6.sdataError.stackTrace;_1bfa=this._fmtStackTrace(_1bf6.sdataError.stackTrace);_1bf8+=_1bfa;}}}var mail={subject:"SalesLogix Exception Details"};if(typeof _1bf6.errorInfo==="object"){_1bfb=_1bab.substitute("\r\n\r\nSalesLogix Error Id: ${0}",[_1bf6.errorInfo.slxErrorId]);_1bfc=this._fmtSlxErrorId(_1bf6.errorInfo.slxErrorId);_1bf8+=_1bfc;_1bf8+=_1bab.substitute("\r\n\r\nURL: ${info.request.url}",{info:_1bf6.errorInfo});if(this._configuration.isDebug){if(_1bf6.errorInfo.stackTrace){_1bf9=_1bf6.errorInfo.stackTrace;_1bfa=this._fmtStackTrace(_1bf6.errorInfo.stackTrace);_1bf6.errorInfo.__stackTrace=_1bfa;_1bf8+=_1bab.substitute("\r\n\r\nException type: ${info.type}\r\n\r\nSource: ${info.source}${info.__stackTrace}\r\n\r\nTarget site: ${info.targetSite}",{info:_1bf6.errorInfo});}}mail.subject=_1bab.substitute("SalesLogix Exception Details (SalesLogix Error Id: ${0})",[_1bf6.errorInfo.slxErrorId]);}mail.subject=encodeURIComponent(mail.subject);if(_1bf9!=""){_1bf9=_1bab.substitute("\r\n\r\nStack trace:\r\n${0}",[_1bf9]);}mail.message=encodeURIComponent(Sage.Utility.htmlDecode(_1bf8.replace(_1bfa,_1bf9).replace(_1bfc,_1bfb)));mail.linkCaption="Mail details of this exception to your administrator";_1bf8+=_1bab.substitute("\r\n\r\n<a href=\"mailto:?subject=${info.subject}&amp;body=${info.message}\">${info.linkCaption}</a>",{info:mail});}if(_1bf8==""){_1bf8="There was an unknown error.";}_1bf8=_1bf8.replace(/(\r\n)/g,"<br />");_1ba9.showError(_1bf8);}});Sage.Utility.ErrorHandler.init();return Sage.Utility.ErrorHandler;});},"Sage/UI/GroupsTitlePaneConfigProvider":function(){define("Sage/UI/GroupsTitlePaneConfigProvider",["Sage/UI/_TitlePaneConfigProvider","Sage/Data/BaseSDataStore","Sage/UI/GroupMenuFmtScope","Sage/UI/GridMenuItem","Sage/Groups/GroupManager","Sage/Utility","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/string","Sage/Groups/GroupLookup","Sage/UI/SearchMenuItem","Sage/UI/ImageButton","dojo/i18n!./nls/GroupsTitlePaneConfigProvider","dijit/popup"],function(_1bfe,_1bff,_1c00,_1c01,_1c02,_1c03,array,_1c04,lang,_1c05,_1c06,_1c07,_1c08,_1c09,pm){var _1c0a=_1c04("Sage.UI.GroupsTitlePaneConfigProvider",_1bfe,{searchText:"Lookup",lookupResultsText:_1c09.lookupResultsText,store:false,_requestOptions:false,_grpContextHandle:false,config:false,requestTitlePaneConfiguration:function(_1c0b){var _1c0c,gSvc,_1c0d,_1c0e,_1c0f,_1c10;if(this._isInsertMode()){if(_1c0b.success){this.config={menu:false,tabs:false};_1c0b.success.call(_1c0b.scope||this,this.config,this);}return;}_1c0c=Sage.Data.SDataServiceRegistry.getSDataService("system");this.store=new _1bff({service:_1c0c,resourceKind:"groups",include:[],sort:[{attribute:"displayName",descending:false}]});gSvc=Sage.Services.getService("ClientGroupContext");_1c0d=gSvc.getContext();if(_1c0d.notGroupBased){return;}if(!_1c0d.CurrentFamily){this._requestOptions=_1c0b;this._grpContextHandle=dojo.connect(gSvc,"onContextSet",this,"_groupContextSetCallback");return;}_1c0e=this._getMenuConfig();_1c0f=dijit.byId("GroupLookupButton");if(_1c0f){_1c0f.destroy(true);}_1c10=this._getTabConfig();this.config={menu:_1c0e,tabs:_1c10};if(_1c0b.success){_1c0b.success.call(_1c0b.scope||this,this.config,this);}},_isInsertMode:function(){var mode=Sage.Utility.getModeId();return (mode&&(mode.toLowerCase()==="insert"));},_groupContextSetCallback:function(_1c11){if(this._grpContextHandle){dojo.disconnect(this._grpContextHandle);this._grpContextHandle=false;}else{return;}this.config={menu:this._getMenuConfig(),tabs:this._getTabConfig()};if(this._requestOptions.success){this._requestOptions.success.call(this._requestOptions.scope||this,this.config,this);}},_getTabConfig:function(){var gSvc=Sage.Services.getService("ClientGroupContext"),_1c12=gSvc&&gSvc.getContext();return {store:this.store,selectedTabId:_1c12.CurrentGroupID,tabKeyProperty:"$key",tabNameProperty:"$descriptor",tabGroupNameProperty:"name",tabHiddenProperty:"isHidden",showTabContextMenus:true,fetchParams:{query:_1c05.substitute("upper(family) eq '${0}'",[_1c12.CurrentFamily.toUpperCase()]),count:1000,start:0,sort:[{attribute:"displayName"}]},lookupButton:new _1c08({id:"GroupLookupButton",label:"",imageClass:"icon_Find_16x16",title:_1c09.lookupText,onClick:function(){var _1c13=Sage.Services.getService("ClientGroupContext"),_1c14;if(_1c13){_1c14=Sage.Services.getService("GroupLookupManager");if(_1c14){_1c14.showLookup();}}}}),staticTabs:[{"$key":"LOOKUPRESULTS","$descriptor":this.lookupResultsText,closable:false,contextMenuItems:this._getTabContextMenuItems()}],onTabSelect:function(child,_1c15){var id,_1c16;if(_1c15){return;}id=(typeof child==="string")?child:child.id;_1c16=Sage.Services.getService("ClientGroupContext");if(_1c16){if(id!=="DOLOOKUP"){_1c16.setCurrentGroup(id);}}},onTabClose:function(tab){Sage.Groups.GroupManager.HideGroup(tab.id);},onTabClick:function(e){var mode=_1c03.getModeId(),_1c17=Sage.Services.getService("ClientGroupContext"),tabs=dijit.byId("GroupTabs"),_1c18="",_1c19="",_1c12=null,_1c1a=e.target,title="";if(mode!=="detail"){return;}array.forEach(tabs.getChildren(),function(item){if(item.selected){_1c18=item.id;title=item.title;}});if(_1c17){_1c12=_1c17.getContext();if(_1c18!=="DOLOOKUP"&&_1c12){_1c19=_1c12.CurrentGroupID;}}if(_1c18===_1c19&&_1c1a&&_1c1a.innerHTML===title){Sage.Link.toListView();}}};},_getTabContextMenuItems:function(){var items;if(Sage.UI.DataStore.ContextMenus&&Sage.UI.DataStore.ContextMenus.GroupLookupTabContextMenu){items=Sage.UI.DataStore.ContextMenus.GroupLookupTabContextMenu.items;}return items;},_getMenuConfig:function(){var _1c1b=Sage.Services.getService("ClientGroupContext"),_1c1c=_1c1b.getContext(),_1c1d=_1c1c.CurrentName||"";return {id:"mnuGroupMenu",cls:"",img:"images/icons/Groups_16x16.gif",imageClass:"icon_Groups_16x16",text:_1c09.groupText,tooltip:_1c09.groupButtonTooltip,addGroupTooltip:_1c09.addGroupButtonTooltip,width:"350px",items:[{cls:"",id:"sep2",text:"-",img:"",tooltip:"",href:"",isSeparator:true},{fn:this._getGroupMenuSearch,scope:this},{fn:this._getGroupMenuGrid,scope:this}]};},_getGroupMenuGrid:function(){var that=this,_1c1e=new _1c00({store:this.store}),query={},_1c1f=false,svc=Sage.Services.getService("ClientGroupContext"),key="GroupMenuShowHidden",_1c20=sessionStorage.getItem(key),_1c21=_1c20!=="true";if(svc){_1c1f=svc.getContext();if(_1c1f.CurrentEntity){query=_1c05.substitute("upper(family) eq '${0}'",[_1c1f.CurrentFamily.toUpperCase()]);}}return new _1c01({gridOptions:{id:"groupsGridInMenu",store:that.store,rowsPerPage:40,structure:[{name:"&nbsp;",field:"$key",formatter:"fmtSelectedCol",width:"20px"},{name:_1c09.groupColumnText,field:"displayName",width:_1c21?"260px":"205px"},{name:_1c09.visibleColumnText,field:"isHidden",formatter:"fmtHideCol",width:"55px",hidden:_1c21}],loadingMessage:"Loading...",noDataMessage:"No records returned",selectionMode:"single",query:query,height:"400px",width:"275px",formatterScope:_1c1e,_onCellClick:function(e){var _1c22,_1c23,_1c24=e.grid.getParent(),menu=_1c24&&_1c24.getParent(),_1c25,_1c26,_1c27=false,_1c1f;if(!this.menuClosedHandle){this.menuClosedHandle=menu.on("close",lang.hitch(this,function(){var _1c28=dijit.byId("titlePane");if(_1c28&&!_1c27){_1c28.resetConfiguration();}this.menuClosedHandle.remove();this.menuClosedHandle=null;}));}if(e.cell.index===1){_1c22=e.grid.getItem(e.rowIndex);_1c23=Sage.Services.getService("ClientGroupContext");if(_1c23){_1c1f=_1c23.getContext();if(_1c1f&&_1c1f.CurrentGroupID===_1c22.$key){pm.close(menu);}else{_1c26=dojo.connect(_1c23,"onCurrentGroupChanged",e.grid,function(){this._refresh();_1c27=true;dojo.disconnect(_1c26);});_1c23.setCurrentGroup(_1c22.$key);_1c25=dojo.connect(e.grid,"_onFetchComplete",menu,function(){dojo.disconnect(_1c25);pm.close(this);});}}}else{e.stopPropagation();}}},width:"300px",height:"400px"});},_getGroupMenuSearch:function(){return new _1c07({});}});return _1c0a;});},"Sage/MainView/ActivityMgr/nls/OccurrenceOrSeriesQueryDlg":function(){define("Sage/MainView/ActivityMgr/nls/OccurrenceOrSeriesQueryDlg",["Sage/LanguageList","dojo/_base/lang"],function(_1c29,lang){var nls={root:{titleFmt:"${type} - ${description}",actDateText:"Activity Date:",contactText:"Contact:",accountText:"Account:",opportunityText:"Opportunity:",editAllText:"Edit all Occurrences",editOneText:"Edit this Occurrence",completeAllText:"Complete all Occurrences",completeOneText:"Complete this Occurrence",deleteAllText:"Delete all Occurrences",deleteOneText:"Delete this Occurrence",continueText:"Continue",failedToLoadMsg:"Could not load activity"}};return lang.mixin(_1c29,nls);});},"Sage/UI/Columns/Email":function(){define("Sage/UI/Columns/Email",["Sage/UI/Controls/Email","Sage/UI/Columns/Cell","dojo/_base/declare"],function(Email,Cell,_1c2a){var _1c2b=_1c2a("Sage.UI.Columns.Email",Cell,{icon:"",defaultValue:"",widgetClass:Email,getWidgetProps:function(_1c2c){var _1c2d=this._getControlId();return dojo.mixin({},this.widgetProps||{},{emailId:_1c2d,email:_1c2c,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field});},getValue:function(index){var _1c2e=this.widget.focusNode.value;if((typeof _1c2e==="undefined")||(_1c2e==="")){_1c2e=this.defaultValue;}if(this.widget&&this.widget.focusNode.state==="Error"){return this.widget.focusNode._resetValue;}return _1c2e;},formatter:function(val,index){if(!val){return "";}var _1c2f=val;if(this.icon&&this.icon!==""){_1c2f=(this.icon===true||this.icon==="true")?"<img src=\"images/icons/Send_Write_email_16x16.png\" />":"<img src=\""+this.icon+"\" />";}return dojo.string.substitute("<a href=\"mailto:${0}\">${1}</a>",[val,_1c2f]);},markupFactory:function(node,cell){dojox.grid.cells.Cell.markupFactory(node,cell);if(dojo.hasAttr(node,"icon")){cell["icon"]=dojo.trim(dojo.attr(node,"icon")||"");}}});return _1c2b;});},"Sage/Groups/GroupLookup":function(){define("Sage/Groups/GroupLookup",["dijit/_Widget","Sage/_Templated","dijit/Dialog","Sage/UI/ConditionManager","Sage/Data/SDataServiceRegistry","Sage/Groups/GroupContextService","dojo/_base/lang","dojo/_base/declare","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/array","dojo/topic","dojo/aspect","Sage/Data/GroupLayoutSingleton"],function(_1c30,_1c31,_1c32,_1c33,_1c34,_1c35,lang,_1c36,_1c37,array,topic,_1c38,_1c39){var _1c3a=_1c36("Sage.Groups.GroupLookupDialog",[_1c30,_1c31],{widgetsInTemplate:true,conditionMgr:false,title:"",widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"groupLookupDialog\" title=\"&nbsp;\" dojoAttachPoint=\"dlg\" >","</div>","</div>"]),constructor:function(o){},show:function(){if(this.conditionMgr){var _1c3b=Sage.Services.getService("UserOptions");if(_1c3b){_1c3b.get("defaultLookupCondition","DefaultLookupCondition",lang.hitch(this,function(_1c3c){this.conditionMgr.setFirstConditionValue("",_1c3c.value,"");}));}lang.mixin(this.dlg,new _1c37());this.dlg.createHelpIconByTopic("lookup");this.dlg.show();}},hide:function(){this.dlg.hide();},_setConditionMgrAttr:function(_1c3d){this.conditionMgr=_1c3d;dojo.place(this.conditionMgr.domNode,this.dlg.containerNode,"only");},_setTitleAttr:function(title){this.title=title;this.dlg.set("title",title);}});var _1c3e=_1c36("Sage.Groups.GroupLookup",null,{conditions:[],_layouts:{},_currentLayoutFamily:false,service:false,_dlgWindow:false,_conditionMgr:false,_doSearchConnection:false,_onSearchNavTo:false,id:"GroupLookup",constructor:function(){this.isInitialized=false;},showLookup:function(opts){if(typeof opts==="undefined"){var cSvc=Sage.Services.getService("ClientGroupContext");this._currentLayoutFamily=cSvc.getContext().CurrentFamily;opts={family:this._currentLayoutFamily};}this._onSearchNavTo=(opts.returnTo)?opts.returnTo:false;if(!this._layouts.hasOwnProperty(opts.family)){this._currentLayoutFamily=opts.family;this._requestLayout({family:opts.family,success:this._showInitializedLookup});return;}if(this._currentLayoutFamily!==opts.family){this._currentLayoutFamily=opts.family;}this._resetConditionManager();this._showInitializedLookup();},_showInitializedLookup:function(){var svc=Sage.Services.getService("ClientEntityContext"),_1c3f=svc&&svc.getContext(),_1c40=_1c3f&&_1c3f.DisplayName,_1c41=_1c3f&&_1c3f.EntityTableName,_1c42=this._layouts[this._currentLayoutFamily]["mainTable"],_1c43=this._layouts[this._currentLayoutFamily]["entityName"];if(!this._dlgWindow){this._dlgWindow=new _1c3a({conditionMgr:this._conditionMgr});}if(!this._dlgWindow.conditionMgr){this._dlgWindow.set("conditionMgr",this._conditionMgr);}if(_1c41!==_1c42){_1c40=_1c43;}this._dlgWindow.set("title",_1c40);this._dlgWindow.show();},doLookup:function(args){this._ensureService();this._dlgWindow.hide();var _1c44=new Sage.SData.Client.SDataServiceOperationRequest(this.service);_1c44.setOperationName("setGroupLookupConditions");_1c44.execute({request:{family:this._currentLayoutFamily,conditions:this.getConditionsString(),includeConditionsFrom:""}},{success:function(_1c45){var navTo=this._onSearchNavTo+"?modeid=list&gid=LOOKUPRESULTS",path=document.location.toString().toLowerCase(),comp=this._onSearchNavTo&&this._onSearchNavTo.toLowerCase();var _1c46=Sage.Services.getService("ClientGroupContext");var _1c47=_1c46.getContext();if(_1c47.CurrentFamily===this._currentLayoutFamily){_1c38.after(_1c46,"onCurrentGroupChanged",lang.hitch(this,function(){topic.publish("/group/lookup/success",{"conditions":this.getConditionsString()});}));_1c46.setCurrentGroup("LOOKUPRESULTS");}if(this._onSearchNavTo){if(path.indexOf(comp)===-1){document.location=navTo;return;}}},scope:this});},resetLookup:function(data){},getConditionsString:function(){return this._conditionMgr.getConditionsJSON();},_ensureService:function(){if(!this.service){this.service=_1c34.getSDataService("system");}},_requestLayout:function(_1c48){this._ensureService();if(!_1c48.family){var _1c49=Sage.Services.getService("ClientGroupContext");_1c48[family]=_1c49.getContext().CurrentFamily||"ACCOUNT";}var _1c4a=dojo.string.substitute("name eq 'Lookup Results' and upper(family) eq '${0}'",[_1c48.family.toUpperCase()]),_1c4b=lang.hitch(this,this._onReadSuccess,_1c48),_1c4c=new _1c39();_1c4c.getGroupLayout(_1c4a,_1c4b,null,"LOOKUPRESULTS");},_onReadSuccess:function(_1c4d,data){this._layouts[_1c4d.family]=data;this._currentLayoutFamily=_1c4d.family;this._resetConditionManager();if(typeof _1c4d.success==="function"){_1c4d.success.call(_1c4d.scope||this,data);}},_resetConditionManager:function(){if(!this._currentLayoutFamily){return;}if(this._conditionMgr){this._conditionMgr.destroy(false);this._conditionMgr=null;}var _1c4e=array.filter(this._layouts[this._currentLayoutFamily]["layout"],function(field){return field.caption&&field.caption!==""&&field.visible;});_1c4e=array.map(_1c4e,function(field){if(field.format&&field.format==="None"){field.format=field.fieldType;}return field;});this._conditionMgr=new _1c33({fields:_1c4e,fieldNameProperty:"alias",fieldDisplayNameProperty:"caption",fieldTypeProperty:"format",id:this.id+"-ConditionManager"});if(this._dlgWindow){this._dlgWindow.set("conditionMgr",this._conditionMgr);}this._doSearchConnection=dojo.connect(this._conditionMgr,"onDoSearch",this,"doLookup");},destroy:function(){if(this._doSearchConnection){dojo.disconnect(this._doSearchConnection);this._doSearchConnection=false;}this.inherited(arguments);}});Sage.Services.addService("GroupLookupManager",new Sage.Groups.GroupLookup());return _1c3e;});},"Sage/UI/Alarms/AlarmPane":function(){define("Sage/UI/Alarms/AlarmPane",["dijit/form/Button","dijit/form/FilteringSelect","dojo/date","Sage/Utility","Sage/UI/Alarms/AlertPane","Sage/UI/Alarms/ActivityAlarm","dojo/i18n","dojo/i18n!./nls/AlarmPane","dojo/_base/declare","dojo/topic"],function(_1c4f,_1c50,_1c51,_1c52,_1c53,_1c54,i18n,_1c55,_1c56,topic){var _1c57=_1c56("Sage.UI.Alarms.AlarmPane",_1c53,{defaultSnooze:"5",_snoozeButton:false,templateString:["<div>","<div class=\"alarm-items-contents\" dojoAttachPoint=\"_alertContents\"></div>","<div class=\"alarm-snoozebar\" dojoAttachPoint=\"_snoozebar\">","<table>","<tr>","<td colspan=\"2\" class=\"dismissActions\">","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_dismissSelected\">${dismissText}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_dismissAll\">${dismissAllText}</button>","</td>","<td colspan=\"2\" class=\"calendar-link\">","<a href=\"calendar.aspx\" title=\"${showCalendarText}\">${showCalendarText}</a>","</td>","</tr><tr>","<td class=\"snoozeText\">${snoozeByText}</td>","<td colspan=\"2\" class=\"snoozeBy\">","<select name=\"selectSnoozeBy\" dojoAttachPoint=\"_selSnoozeBy\" data-dojo-type=\"dijit.form.FilteringSelect\">","<option value=\"5\" {% if ($.defaultSnooze == 5) { %} selected=\"selected\" {% } %}>${fiveMinText}</option>","<option value=\"10\" {% if ($.defaultSnooze == 10) { %} selected=\"selected\" {% } %}>${tenMinText}</option>","<option value=\"15\" {% if ($.defaultSnooze == 15) { %} selected=\"selected\" {% } %}>${fifteenMinText}</option>","<option value=\"30\" {% if ($.defaultSnooze == 30) { %} selected=\"selected\" {% } %}>${thirtyMinText}</option>","<option value=\"60\" {% if ($.defaultSnooze == 60) { %} selected=\"selected\" {% } %}>${oneHourText}</option>","<option value=\"120\" {% if ($.defaultSnooze == 120) { %} selected=\"selected\" {% } %}>${twoHourText}</option>","<option value=\"240\" {% if ($.defaultSnooze == 240) { %} selected=\"selected\" {% } %}>${fourHourText}</option>","<option value=\"480\" {% if ($.defaultSnooze == 480) { %} selected=\"selected\" {% } %}>${eightHourText}</option>","<option value=\"1440\" {% if ($.defaultSnooze == 1440) { %} selected=\"selected\" {% } %}>${oneDayText}</option>","<option value=\"2880\" {% if ($.defaultSnooze == 2880) { %} selected=\"selected\" {% } %}>${twoDayText}</option>","<option value=\"4320\" {% if ($.defaultSnooze == 4320) { %} selected=\"selected\" {% } %}>${threeDayText}</option>","<option value=\"10080\" {% if ($.defaultSnooze == 10080) { %} selected=\"selected\" {% } %}>${oneWeekText}</option>","<option value=\"20160\" {% if ($.defaultSnooze == 20160) { %} selected=\"selected\" {% } %}>${twoWeekText}</option>","</select>","</td>","<td class=\"snoozeActions\">","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_snooze\" dojoAttachPoint=\"_snoozeButton\">${snoozeText}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_snoozeAll\">${snoozeAllText}</button>","</td>","</tr>","</table>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,_1c55);},_durByText:false,_textByDur:false,onShow:function(){this._snoozeButton.focus();},setDefaultSnooze:function(_1c58){this.defaultSnooze=_1c58;this._setSnoozeSelect(_1c58);},_addAlert:function(item){if(this._alarmRinging(item)){var _1c59=new _1c54({userActivity:item,selected:this.selectedAlerts.hasOwnProperty(item["$key"])});this.alertWidgets.push(_1c59);dojo.place(_1c59.domNode,this._alertContents);}},_alarmRinging:function(_1c5a){var n=new Date();var _1c5b;var alarm;if((_1c5a.Alarm==null)&&(_1c5a.AlarmTime==null)){_1c5b=_1c52.Convert.toDateFromString(_1c5a.Activity.AlarmTime);alarm=_1c5a.Activity.Alarm;_1c5a.Alarm=alarm;_1c5a.AlarmTime=_1c5a.Activity.AlarmTime;}else{_1c5b=_1c52.Convert.toDateFromString(_1c5a.AlarmTime);alarm=_1c5a.Alarm;}return (alarm&&(_1c51.compare(_1c5b,n)<1));},_snooze:function(){for(var i=0;i<this.alertWidgets.length;i++){var wid=this.alertWidgets[i];if(wid.selected){this._snoozeItem(wid.userActivity);}}this.store.save(this);},_snoozeAll:function(){for(var i=0;i<this.alertWidgets.length;i++){this._snoozeItem(this.alertWidgets[i].userActivity);}this.store.save(this);},_setSnoozeSelect:function(_1c5c){if(!this._textByDur){this._textByDur={"5":this.fiveMinText,"10":this.tenMinText,"15":this.fifteenMinText,"30":this.thirtyMinText,"60":this.oneHourText,"120":this.twoHourText,"240":this.fourHourText,"480":this.eightHourText,"1440":this.oneDayText,"2880":this.twoDayText,"4320":this.threeDayText,"10080":this.oneWeekText,"20160":this.twoWeekText};}this._selSnoozeBy.set("displayedValue",this._textByDur[_1c5c]);this._selSnoozeBy.set("value",_1c5c);},_snoozeItem:function(_1c5d){var _1c5e=this._selSnoozeBy.get("value");var dur=parseInt(_1c5e);var _1c5f=new Date();var _1c60=_1c51.add(_1c5f,"minute",dur);this.store.setValue(_1c5d,"AlarmTime",_1c52.Convert.toIsoStringFromDate(_1c60));},_dismissAll:function(){for(var i=0;i<this.alertWidgets.length;i++){this._dismissItem(this.alertWidgets[i].userActivity);}this.store.save(this);},_dismissSelected:function(){for(var i=0;i<this.alertWidgets.length;i++){var wid=this.alertWidgets[i];if(wid.selected){this._dismissItem(wid.userActivity);}}this.store.save(this);},_dismissItem:function(_1c61){this.store.setValue(_1c61,"Alarm",false);},deleteSelected:function(){var _1c62=this._makeSelectionContext(false);if(_1c62){var svc=Sage.Services.getService("ActivityService");if(_1c62.count===1){var _1c63=_1c62.selectionInfo.selections[0].entity;svc.deleteActivity(_1c63["$key"],_1c63.Recurring);}else{svc.deleteActivitiesInSelectionContext(_1c62,this._reloadAlarms,this);}}},_reloadAlarms:function(_1c64){var _1c65=dijit.byId("alarmPopup");_1c65.reloadAlarms();},completeSelected:function(){var _1c66=this._makeSelectionContext(false);if(_1c66){var svc=Sage.Services.getService("ActivityService");var self=this;var _1c67=topic.subscribe("/entity/activity/bulkComplete",function(_1c68){self._reloadAlarms();_1c67.remove();});if(_1c66.count===1){var _1c69=_1c66.selectionInfo.selections[0].entity;svc.completeActivity(_1c69["$key"],_1c69.Recurring);}else{svc.completeActivitiesInSelectionContext(_1c66);}}},_makeSelectionContext:function(_1c6a){var ids=[],sels=[];var len=this.alertWidgets.length-1;for(var i=len;i>-1;i--){var wid=this.alertWidgets[i];if(wid.selected){var id=wid.userActivity.Activity["$key"];ids.push(id);sels.push({rn:0,id:id,entity:wid.userActivity.Activity});if(_1c6a){this.alertWidgets.splice(i,1);wid.destroy();}}}if(ids.length>0){return {count:ids.length,id:null,mode:"select",name:"activities",selectionInfo:{key:"alert",keyField:"$key",mode:"selection",ranges:[],recordCount:ids.length,selectedIds:ids,selectionCount:2,selections:sels,sortDirection:"",sortField:""}};}return false;},onComplete:function(){var len=this.alertWidgets.length-1;for(var i=len;i>-1;i--){var wid=this.alertWidgets[i];if(!this._alarmRinging(wid.userActivity)){this.alertWidgets.splice(i,1);wid.destroy();}}this._alertChanged(this.alertWidgets.length);},getUnhandledAlertCount:function(){var _1c6b=0;for(var i=0;i<this.alertItems.length;i++){if(this._alarmRinging(this.alertItems[i])){_1c6b++;}}return _1c6b;}});return _1c57;});},"Sage/MainView/ActivityMgr/SnoozeButton":function(){define("Sage/MainView/ActivityMgr/SnoozeButton",["dijit/_Widget","Sage/_Templated","dojo/_base/declare"],function(_1c6c,_1c6d,_1c6e){var _1c6f=_1c6e("Sage.MainView.ActivityMgr.SnoozeButton",[_1c6c,_1c6d],{widgetsInTemplate:true,_started:false,widgetTemplate:new Simplate(["<span class=\"alarm-button\">","<button data-dojo-type=\"dijit.form.ComboButton\" data-dojo-attach-point=\"_snoozeButton\" data-dojo-attach-event=\"onClick:_cboClick\" class=\"\" >","<div data-dojo-type=\"Sage.MainView.ActivityMgr.SnoozeOptions\" data-dojo-attach-point=\"_snoozeOptions\"></div>","</button>","</span>"]),startup:function(){if(this._started){return;}this.inherited(arguments);this._started=true;},_cboClick:function(){this._snoozeButton.openDropDown();},destroy:function(){this._snoozeButton.destroyRecursive();}});return _1c6f;});},"Sage/QuickForms/Design/Editors/LayoutPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/LayoutPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/LayoutPropertyEditor"],function(_1c70,lang,_1c71,_1c72,_1c73,_1c74,_1c75,_1c76,_1c77,_1c78){return _1c70("Sage.QuickForms.Design.Editors.LayoutPropertyEditor",[_1c71,_1c76,_1c75],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.positionText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.rowTooltipText %}\">","<label>{%= $.rowText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_row\" data-dojo-attach-event=\"onChange:_onRowChange\" required=\"true\" data-dojo-props=\"constraints:{min:0,max:100,places:0}\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.columnTooltipText %}\">","<label>{%= $.columnText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_column\" data-dojo-attach-event=\"onChange:_onColumnChange\" required=\"true\" data-dojo-props=\"constraints:{min:0,max:100,places:0}\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.sizeText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.rowSpanTooltipText %}\">","<label>{%= $.rowSpanText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_rowSpan\" data-dojo-attach-event=\"onChange:_onRowSpanChange\" required=\"true\" data-dojo-props=\"constraints:{min:1,max:100,places:0}\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.columnSpanTooltipText %}\">","<label>{%= $.columnSpanText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_columnSpan\" data-dojo-attach-event=\"onChange:_onColumnSpanChange\" required=\"true\" data-dojo-props=\"constraints:{min:1,max:100,places:0}\"></div>","</div>","</div>","</fieldset>"]),_row:null,_column:null,_rowSpan:null,_columnSpan:null,titleText:"Layout",positionText:"Position",sizeText:"Size",rowText:"Row:",rowTooltipText:"Row number of the control.",columnText:"Column:",columnTooltipText:"Column number of the control.",rowSpanText:"Row Span:",rowSpanTooltipText:"Number of cells the control occupies vertically.",columnSpanText:"Column Span:",columnSpanTooltipText:"Number of cells the control occupies horizontally.",constructor:function(){lang.mixin(this,_1c78);},setup:function(){this.inherited(arguments);this._row.set("value",this._designer.get("row"));this._column.set("value",this._designer.get("column"));this._rowSpan.set("value",this._designer.get("rowSpan"));this._columnSpan.set("value",this._designer.get("columnSpan"));},_onRowChange:function(value){if(this.isSuspended()||!this._row.isValid()){return;}try{this._designer.set("row",parseInt(value)||0);}catch(e){this._row.setValue(e.value);if(console){console.error(e.message,e);}}},_onColumnChange:function(value){if(this.isSuspended()||!this._column.isValid()){return;}try{this._designer.set("column",parseInt(value)||0);}catch(e){this._column.setValue(e.value);if(console){console.error(e.message);}}},_onRowSpanChange:function(value){if(this.isSuspended()||!this._rowSpan.isValid()){return;}try{this._designer.set("rowSpan",parseInt(value)||1);}catch(e){this._rowSpan.setValue(e.value);if(console){console.error(e.message);}}},_onColumnSpanChange:function(value){if(this.isSuspended()||!this._columnSpan.isValid()){return;}try{this._designer.set("columnSpan",parseInt(value)||1);}catch(e){this._columnSpan.setValue(e.value);if(console){console.error(e.message);}}}});});},"Sage/MainView/IntegrationContract/CustomerPaymentsRTDV":function(){require({cache:{"url:Sage/MainView/IntegrationContract/templates/CustomerPaymentsRTDV.html":"[\n'<div>',\n    '<div dojoType=\"dijit.Dialog\" id=\"{%= $.id%}_customerPaymentsDetailsDialog\" title=\"{%= $.dialogCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hideDetailsDialog\">',\n        '<table cellspacing=\"5\">',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_reference\">{%= $.lblReferenceCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_reference\" name=\"reference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_date\">{%= $.lblDateCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_date\" name=\"date\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_processDate\">{%= $.lblProcessDateCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_processDate\" name=\"processDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_name\">{%= $.lblNameCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_name\" name=\"name\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_type\">{%= $.lblTypeCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_type\" name=\"type\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_status\">{%= $.lblStatusCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_status\" name=\"status\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_currency\">{%= $.lblCurrencyCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_currency\" name=\"currency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_tenderType\">{%= $.lblTenderTypeCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_tenderType\" name=\"tenderType\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_tenderReference\">{%= $.lblTenderReferenceCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_tenderReference\" name=\"tenderReference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_discountTotal\">{%= $.lblDiscountsCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_discountTotal\" name=\"discountTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_netTotal\">{%= $.lblNetTotalCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_netTotal\" name=\"netTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_taxTotal\">{%= $.lblTaxesCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_taxTotal\" name=\"taxTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_chargesTotal\">{%= $.lblChargesCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_chargesTotal\" name=\"chargesTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_taxCode\">{%= $.lblTaxCodeCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_taxCode\" name=\"taxCode\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_grossTotal\">{%= $.lblGrossTotalCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_grossTotal\" name=\"grossTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_source\">{%= $.lblSourceCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_source\" name=\"source\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n        '</table>',\r\n        '<div class=\"button-bar alignright\">',\r\n            '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_paymentBtnClose\" type=\"button\" dojoAttachEvent=\"onClick:hideDetailsDialog\">{%= $.btnCloseCaption %}</button>',\r\n        '</div>',\n    '</div>',\n'</div>'\n]"}});define("Sage/MainView/IntegrationContract/CustomerPaymentsRTDV",["dojo/_base/declare","dojo/i18n!./nls/CustomerPaymentsRTDV","dijit/_Widget","Sage/_Templated","Sage/UI/SLXPreviewGrid","Sage/Data/ProxySDataStore","Sage/UI/Dialogs","Sage/UI/Columns/DateTime","dojo/text!./templates/CustomerPaymentsRTDV.html","Sage/UI/DateTextBox","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","dijit/Dialog"],function(_1c79,_1c7a,_1c7b,_1c7c,_1c7d,_1c7e,_1c7f,_1c80,_1c81){var _1c82=_1c79("Sage.MainView.IntegrationContract.CustomerPaymentsRTDV",[_1c7b,_1c7c],{workspace:"",tabId:"",grid:"",globalSyncId:"",operatingCompanyId:"",widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1c81)),constructor:function(){dojo.mixin(this,_1c7a);},loadCustomerPayments:function(){var self=this;var _1c83={readOnly:true,rowsPerPage:20,slxContext:{workspace:this.workspace,tabId:this.tabId},columns:[{width:10,field:"reference",name:this.grdPayments_Reference,sortable:true,formatter:this.customerPaymentsDetailsViewRenderer,style:"text-align:left;width:auto;",editable:false},{width:10,field:"date",type:_1c80,formatType:"date",dateOnly:true,utc:false,name:this.grdPayments_Date,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"type",name:this.grdPayments_Type,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"status",name:this.grdPayments_Status,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"grossTotal",name:this.grdPayments_GrossTotal,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"currency",name:this.grdPayments_Currency,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"processDate",type:_1c80,formatType:"date",dateOnly:true,utc:false,editable:false,hidden:function(){return true;}},{width:10,field:"discountTotal",editable:false,hidden:function(){return true;}},{width:10,field:"chargesTotal",editable:false,hidden:function(){return true;}},{width:10,field:"source",editable:false,hidden:function(){return true;}},{width:10,field:"taxTotal",editable:false,hidden:function(){return true;}},{width:10,field:"name",editable:false,hidden:function(){return true;}},{width:10,field:"tenderType",editable:false,hidden:function(){return true;}},{width:10,field:"tenderReference",editable:false,hidden:function(){return true;}},{width:10,field:"netTotal",editable:false,hidden:function(){return true;}},{width:10,field:"grossTotal",editable:false,hidden:function(){return true;}},{width:10,field:"taxCode",editable:false,hidden:function(){return true;}}],storeOptions:new _1c7e({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"tradingAccounts",getResourcePredicate:function(){return dojo.string.substitute("$uuid eq '${0}'",[self.globalSyncId]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"receipts"}]}),tools:[]};var _1c84=new _1c7d.Grid(_1c83,this.placeHolder);_1c84.startup();var _1c85=dijit.byId("tabContent");_1c85.resize();_1c85.resize();this.grid=_1c84;},customerPaymentsDetailsViewRenderer:function(value){return dojo.string.substitute("<a href=\"javascript:customerPaymentsRTDV.loadDetailsView();\">${0}</a>",[value]);},loadDetailsView:function(){var row=this.grid._grid.selection.getSelected()[0];if(row){this._dialog.set("value",row);this._dialog.show();}},hideDetailsDialog:function(){this._dialog.hide();}});return _1c82;});},"Sage/Utility/File/nls/Attachment":function(){define("Sage/Utility/File/nls/Attachment",["Sage/LanguageList","dojo/_base/lang"],function(_1c86,lang){var nls={root:{percentComplete:"Uploading, please wait..."}};return lang.mixin(_1c86,nls);});},"Sage/Utility/main":function(){define("Sage/Utility/main",["Sage/Utility/Activity","Sage/Utility/Dashboard","Sage/Utility/Groups","Sage/Utility/_LocalStorageMixin","Sage/Utility/SDataLookup","Sage/Utility/Email","Sage/Utility/ErrorHandler","Sage/Utility/File","Sage/Utility/File/DragDropWatcher","Sage/Utility/File/DefaultDropHandler","Sage/Utility/UserOptions","Sage/Utility/Validate","Sage/Utility/PickList"],function(){});},"Sage/QuickForms/Design/nls/GenericControlDesigner":function(){define("Sage/QuickForms/Design/nls/GenericControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_1c87,lang){var nls={root:{displayNameText:"Unknown"}};return lang.mixin(_1c87,nls);});},"Sage/UI/NavBar":function(){define("Sage/UI/NavBar",["dijit/layout/AccordionContainer","Sage/UI/NavBarPane","Sage/Layout/_SplitterEnhancedMixin","dojo/_base/declare"],function(_1c88,_1c89,_1c8a,_1c8b){var _1c8c=_1c8b("Sage.UI.NavBar",[_1c88,_1c8a],{persist:true,postCreate:function(){this.inherited(arguments);var items=Sage.UI.DataStore.NavBar&&Sage.UI.DataStore.NavBar.items;if(items){this._processNavCollection(items);}},_processNavCollection:function(items){for(var i=0;i<items.length;i++){var item=items[i];this.addChild(new _1c89({title:item.text,items:item.items}));}},startup:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";}});return _1c8c;});},"Sage/QuickForms/Design/nls/PropertyEditorContainer":function(){define("Sage/QuickForms/Design/nls/PropertyEditorContainer",["Sage/LanguageList","dojo/_base/lang"],function(_1c8d,lang){var nls={root:{specificTitleFormatText:"${0} Properties (${1})",genericTitleFormatText:"${0} Properties"}};return lang.mixin(_1c8d,nls);});},"Sage/MailMerge/nls/Helper":function(){define("Sage/MailMerge/nls/Helper",["Sage/LanguageList","dojo/_base/lang"],function(_1c8e,lang){var nls={root:{destkopErrorsError:"The call to DesktopErrors() failed.",mailMergeInfoStoreError:"The call to MailMergeInfoStore() failed."}};return lang.mixin(_1c8e,nls);});},"Sage/MainView/Opportunity/UpdateOpportunities":function(){require({cache:{"url:Sage/MainView/Opportunity/templates/UpdateOpportunities.html":"[\r\n'<div>',\r\n    '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.updateMultipleOpps_Caption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmUpdateMultipleOpps\">',\r\n            '<table cellspacing=\"20\">',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.update_Property_Caption %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<select title=\"{%= $.update_Property_Caption %}\" labelWidth=\"20\" name=\"{%= $.id %}_PropertyName\" dojoAttachPoint=\"propertyNameSelect\" dojoAttachEvent=\"onChange:_propertyChanged\" data-dojo-type=\"dijit.form.Select\" style=\"width:150px\">',\r\n                            '{% for (var i=0; i < $._updateableProperties.length;i++) { %}',\r\n                                '<option value=\"{%= $._updateableProperties[i].propertyName %}\" {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $._updateableProperties[i].propertyDisplayName %}</option>',\r\n                            '{% } %}',\r\n                        '</select>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"divUpdateOppsTolbl\" dojoAttachPoint=\"divUpdateOppsTolbl\" class=\"display-none\">',\r\n                            '<label>{%= $.update_To_Caption %}</label>',\r\n                        '</div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div dojoAttachPoint=\"divAcctMgrContainer\">',\r\n                            '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_luAccountMgr\" dojoAttachPoint=\"accountMgr_Container\" allowClearingResult=\"false\" class=\"removePadding\"></div>',\r\n                        '</div>',\r\n                        '<div dojoAttachPoint=\"divCloseProbContainer\" class=\"display-none\">',\r\n                            '<select id=\"{%= $.id %}_pkl_CloseProbability\" PickListName=\"Opportunity Probability\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_pkl_CloseProbability\" data-dojo-type=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pkl_CloseProbability\" canEditText=\"false\" itemMustExist=\"true\"></select>',\r\n                        '</div>',\r\n                        '<div data-dojo-type=\"dojox.layout.TableContainer\" dojoAttachPoint=\"divForecastContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"2\" baseClass=\"display-none\">',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"addToForecast\" label=\"{%= $.addToForecast_Yes %}\" value=\"yesForecast\" id=\"{%= $.id %}_rdgYesForecast\" dojoAttachPoint=\"rdoYesForecast\" checked=\"true\" />',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"addToForecast\" label=\"{%= $.addToForecast_No %}\" value=\"noForecast\" id=\"{%= $.id %}_rdgNoForecast\" />',\r\n                        '</div>',\r\n                        '<div data-dojo-type=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"2\" dojoAttachPoint=\"divEstCloseContainer\" baseClass=\"display-none\">',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"estimatedClose\" id=\"{%= $.id %}_rdgEstClose\" checked=\"true\" label=\"{%= $.estimatedClose_To %}\" value=\"estimatedClose\" dojoAttachPoint=\"rdoEstClose\" dojoAttachEvent=\"onChange:estimatedCloseDateChange\" />',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"estimatedClose\" value=\"move\" id=\"{%= $.id %}_rdgEstMove\" label=\"{%= $.estimatedClose_MoveOut %}\" />',\r\n                        '</div>',\r\n                        '<div dojoAttachPoint=\"divCommentsContainer\" class=\"display-none\">',\r\n                            '<textarea data-dojo-type=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_txtComments\" dojoAttachPoint=\"txtComments\" style=\"font-size: 85%\"></textarea>',\r\n                        '</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td></td>',\r\n                    '<td></td>',\r\n                    '<td></td>',\r\n                    '<td>',\r\n                        '<div id=\"divEstCloseDateContainer\" class=\"display-none\" dojoAttachPoint=\"divEstCloseDateContainer\">',\r\n                            '<div data-dojo-type=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtpEstCloseDate\" displayDate=\"true\" displayTime=\"false\" dojoAttachPoint=\"dtpEstCloseDate\"></div>',\r\n                        '</div>',\r\n                        '<div id=\"divMoveEstimatedCloseContainer\" class=\"display-none\" dojoAttachPoint=\"divMoveEstimatedCloseContainer\">',\r\n                            '<select data-dojo-type=\"dijit.form.Select\" name=\"moveEstCloseDate\" id=\"{%= $.id %}_moveEstCloseDateList\" dojoAttachPoint=\"moveEstCloseDateList\">',\r\n                                '<option value=\"Forward\">{%= $.moveEstCloseDate_Forward %}</option>',\r\n                                '<option value=\"Backward\">{%= $.moveEstCloseDate_Backward %}</option>',\r\n                            '</select>',\r\n                            '<div data-dojo-type=\"dijit.form.TextBox\" labelWidth=\"20\" dojoAttachPoint=\"daysToMove\"></div>&nbsp',\r\n                            '<label>{%= $.estimatedClose_Days %}</label>',\r\n                        '</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n            '<div class=\"button-bar\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.btnOK_Caption %}</div>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCancel_Caption %}</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]\r\n"}});define("Sage/MainView/Opportunity/UpdateOpportunities",["dojo/_base/declare","dojo/i18n!./nls/UpdateOpportunities","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","Sage/UI/Controls/Lookup","dojo/text!./templates/UpdateOpportunities.html","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/DateTimePicker","dijit/form/Form","dijit/form/Select","dijit/form/Textarea","dijit/layout/ContentPane","dojox/layout/TableContainer"],function(_1c8f,_1c90,_1c91,_1c92,_1c93,_1c94,_1c95,_1c96,_1c97,_1c98){var _1c99=_1c8f("Sage.MainView.Opportunity.UpdateOpportunities",[_1c94,_1c95],{id:"dlgUpdateMultipleOpps",_dialog:false,_updateableProperties:false,selectedFieldIndex:1,lup_AcctMgr:false,_selectionInfo:false,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1c98)),constructor:function(_1c9a){this._selectionInfo=_1c9a;dojo.mixin(this,_1c90);if(!this._updateableProperties){this._updateableProperties=[{propertyName:"",propertyDisplayName:""}];this.loadUpdateableProperties("AcctMgr",this.updateProp_AcctMgr);this.loadUpdateableProperties("Forecast",this.updateProp_Forecast);this.loadUpdateableProperties("CloseProb",this.updateProp_Probability);this.loadUpdateableProperties("EstClose",this.updateProp_EstClose);this.loadUpdateableProperties("Comments",this.updateProp_Comments);}},loadUpdateableProperties:function(_1c9b,_1c9c){var _1c9d={propertyName:_1c9b,propertyDisplayName:_1c9c};this._updateableProperties.push(_1c9d);},setSelectionInfo:function(_1c9e){this._selectionInfo=_1c9e;},show:function(){this._dialog.show();if(!this.lup_AcctMgr){this.createAcctMgrLookup();}this._propertyChanged();if(!this._dialog.helpIcon){_1c92.mixin(this._dialog,new _1c91());this._dialog.createHelpIconByTopic("updateopportunities");}},_propertyChanged:function(){if(this.propertyNameSelect){this.setDisplayProperty(this.divAcctMgrContainer,(this.propertyNameSelect.value=="AcctMgr"));this.setDisplayProperty(this.divCloseProbContainer,(this.propertyNameSelect.value=="CloseProb"));this.setDisplayProperty(this.divCommentsContainer,(this.propertyNameSelect.value=="Comments"));this.setDomDisplayProperty(this.divForecastContainer,(this.propertyNameSelect.value=="Forecast"));this.setDisplayProperty(this.divUpdateOppsTolbl,(this.propertyNameSelect.value!="EstClose"));this.setDomDisplayProperty(this.divEstCloseContainer,(this.propertyNameSelect.value=="EstClose"));}this.estimatedCloseDateChange();},setDisplayProperty:function(_1c9f,_1ca0){if(_1c9f&&_1ca0){dojo.removeClass(_1c9f,"display-none");}else{if(_1c9f){dojo.addClass(_1c9f,"display-none");}}},setDomDisplayProperty:function(_1ca1,_1ca2){if(_1ca1&&_1ca2){dojo.removeClass(_1ca1.domNode,"display-none");}else{if(_1ca1){dojo.addClass(_1ca1.domNode,"display-none");}}},estimatedCloseDateChange:function(){var _1ca3=this.rdoEstClose.get("checked");if(this.propertyNameSelect){this.setDisplayProperty(this.divEstCloseDateContainer,(_1ca3&&this.propertyNameSelect.value=="EstClose"));this.setDisplayProperty(this.divMoveEstimatedCloseContainer,(!_1ca3&&this.propertyNameSelect.value=="EstClose"));}},createAcctMgrLookup:function(){this.accountMgrLookupConfig={id:"_acctMgr",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{"name":this.lookupNameColText,"field":"UserInfo.UserName"},{"name":this.lookupTitleColText,"field":"UserInfo.Title"},{"name":this.lookupDepartmentColText,"field":"UserInfo.Department"},{"name":this.lookupRegionColText,"field":"UserInfo.Region"},{"name":this.lookupTypeColText,"field":"Type","propertyType":"Sage.Entity.Interfaces.UserType"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users"},isModal:true,initialLookup:true,preFilters:[{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"5"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"6"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"7"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"8"}],returnPrimaryKey:true,dialogTitle:this.lookupActMgrText,dialogButtonText:this.btnOK_Caption};this.lup_AcctMgr=new _1c97({id:"lu_AcctMgr",config:this.accountMgrLookupConfig,style:"width:100%"});dojo.place(this.lup_AcctMgr.domNode,this.accountMgr_Container.domNode,"only");},_okClick:function(){var _1ca4=this.getPropertySelectionValue();var self=this;if(!_1ca4&&!_1ca4.value){_1c96.showError(this.errorUnspecifiedValue);return;}var _1ca5=Sage.Data.SDataServiceRegistry.getSDataService("scheduling");var _1ca6=new Sage.SData.Client.SDataServiceOperationRequest(_1ca5).setApplicationName("$app").setOperationName("trigger").setResourceKind("jobs('Sage.SalesLogix.BusinessRules.Jobs.UpdateEntityJob')");var entry={"$name":"Sage.SalesLogix.BusinessRules.Jobs.UpdateEntityJob","request":{"parameters":[{"name":"EntityName","value":"Opportunity"},{"name":"PropertyNames","value":_1ca4.name},{"name":"PropertyValues","value":_1ca4.value},{"name":"SelectedIds","value":(this._selectionInfo.selectionCount>0)?this._selectionInfo.selectedIds.join(",")||"":""},{"name":"GroupId","value":(this._selectionInfo.selectionCount==0)?this.getCurrentGroupId()||"":""}]}};_1ca6.execute(entry,{success:function(_1ca7){self._close();},failure:function(_1ca8){_1c96.showError(dojo.string.substitute(self.errorRequestingJobMgr,[_1ca8.statusText]));}});},getCurrentGroupId:function(){var _1ca9=Sage.Services.getService("ClientGroupContext");if(_1ca9){var _1caa=_1ca9.getContext();return _1caa.CurrentGroupID;}return "";},getPropertySelectionValue:function(){if(this.propertyNameSelect){switch(this.propertyNameSelect.value){case "AcctMgr":if(this.lup_AcctMgr.selectedObject){return {name:"AccountManager",value:this.lup_AcctMgr.selectedObject.$key};}return false;case "CloseProb":return {name:"CloseProbability",value:this.pkl_CloseProbability.get("value")};case "Forecast":return {name:"AddToForecast",value:this.rdoYesForecast.get("checked")};case "EstClose":if(this.rdoEstClose.get("checked")){return {name:"EstimatedClose",value:this.dtpEstCloseDate.get("value")};}else{var date=new Date();if(this.moveEstCloseDateList.value=="Forward"){return {name:"EstimatedClose",value:new Date().setDate(date.getDate()+this.daysToMove.value)};}else{return {name:"EstimatedClose",value:new Date().setDate(date.getDate()-this.daysToMove.value)};}}case "Comments":return {name:"Notes",value:this.txtComments.value};}}return false;},_close:function(){this._dialog.hide();}});return _1c99;});},"Sage/UI/Dashboard/nls/Dashboard":function(){define("Sage/UI/Dashboard/nls/Dashboard",["Sage/LanguageList","dojo/_base/lang"],function(_1cab,lang){var nls={root:{newTabTitleText:"New Tab Title",inputTitleText:"Input a Title",copiedPageText:"Copied Tab",showText:"Show"}};return lang.mixin(_1cab,nls);});},"Sage/MainView/ActivityMgr/nls/ActivityListPanelConfig":function(){define("Sage/MainView/ActivityMgr/nls/ActivityListPanelConfig",["Sage/LanguageList","dojo/_base/lang"],function(_1cac,lang){var nls={root:{colNameComplete:"Complete",colNameAttachment:"Attachment",colNameRecurring:"Recurring",colNameAlarm:"Alarm",colNameType:"Activity Type",colNameStartDate:"Start Date",colNameDuration:"Duration",colNameContact:"Name",colNameLead:"Lead",colNameAccount:"Account/Company",colNameCompany:"Company",colNameRegarding:"Regarding",colNamePriority:"Priority",colNameUserId:"Leader",colNameTimeless:"Timeless",colNameTypeName:"Type",colNameContactName:"Name",SnoozeAlarm:"Snooze Alarm",DismissAlarm:"Dismiss Alarm",colNameUnConfirmStatus:"Unconfirmed"}};return lang.mixin(_1cac,nls);});},"Sage/UI/Controls/nls/PickList":function(){define("Sage/UI/Controls/nls/PickList",["Sage/LanguageList","dojo/_base/lang"],function(_1cad,lang){var nls={root:{okText:"OK",missingPickListText:"The PickList Could Not be Found"}};return lang.mixin(_1cad,nls);});},"Sage/UI/Controls/LogOffButton":function(){define("Sage/UI/Controls/LogOffButton",["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/MenuBarItem","dojo/i18n!./nls/LogOffButton","dojo/_base/declare"],function(_1cae,_1caf,_1cb0,_1cb1,_1cb2){var _1cb3=_1cb2("Sage.UI.Controls.LogOffButton",_1cae,{postMixInProperties:function(){this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.addChild(new _1cb0({label:_1cb1.logOffText,iconStyle:"width: 16px",icon:"images/icons/login_16.png",imageClass:"icon_login_16",title:_1cb1.logOffText,id:"btnLogOff",onClick:function(){try{window.location.href="Shutdown.axd";}catch(e){}}}));}});return _1cb3;});},"url:Sage/MainView/IntegrationContract/templates/CustomerPaymentsRTDV.html":"[\n'<div>',\n    '<div dojoType=\"dijit.Dialog\" id=\"{%= $.id%}_customerPaymentsDetailsDialog\" title=\"{%= $.dialogCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hideDetailsDialog\">',\n        '<table cellspacing=\"5\">',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_reference\">{%= $.lblReferenceCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_reference\" name=\"reference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_date\">{%= $.lblDateCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_date\" name=\"date\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_processDate\">{%= $.lblProcessDateCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_processDate\" name=\"processDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_name\">{%= $.lblNameCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_name\" name=\"name\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_type\">{%= $.lblTypeCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_type\" name=\"type\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_status\">{%= $.lblStatusCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_status\" name=\"status\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_currency\">{%= $.lblCurrencyCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_currency\" name=\"currency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_tenderType\">{%= $.lblTenderTypeCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_tenderType\" name=\"tenderType\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_tenderReference\">{%= $.lblTenderReferenceCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_tenderReference\" name=\"tenderReference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_discountTotal\">{%= $.lblDiscountsCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_discountTotal\" name=\"discountTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_netTotal\">{%= $.lblNetTotalCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_netTotal\" name=\"netTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_taxTotal\">{%= $.lblTaxesCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_taxTotal\" name=\"taxTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_chargesTotal\">{%= $.lblChargesCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_chargesTotal\" name=\"chargesTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_taxCode\">{%= $.lblTaxCodeCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_taxCode\" name=\"taxCode\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_grossTotal\">{%= $.lblGrossTotalCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_grossTotal\" name=\"grossTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_source\">{%= $.lblSourceCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_source\" name=\"source\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n        '</table>',\r\n        '<div class=\"button-bar alignright\">',\r\n            '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_paymentBtnClose\" type=\"button\" dojoAttachEvent=\"onClick:hideDetailsDialog\">{%= $.btnCloseCaption %}</button>',\r\n        '</div>',\n    '</div>',\n'</div>'\n]","Sage/Utility/nls/Email":function(){define("Sage/Utility/nls/Email",["Sage/LanguageList","dojo/_base/lang"],function(_1cb4,lang){var nls={root:{RecipientInfoError:"There was an unexpected error attempting to read the recipient information: ${0}",MailToProtocolError:"There was an error attempting to generate an e-mail message using the mailto: protocol (href.length=${0}). The number of e-mail recipients may need to be reduced. Browser error: ${1}.",InvalidContextError:"The e-mail request cannot be processed. This operation is only supported for Contacts or Leads.",InvalidArgumentError:"The e-mail request cannot be processed. Invalid argument.",FilteredOutMsg:"Filtered out: Non-solicitable: ${0}; Invalid: ${1}; Dupes: ${2}",AllInvalidEmailError:"The collection does not include one entity with a valid and/or solicitable e-mail address.",EmailFieldQueried:"The e-mail field queried was: ${0}.",EntityInfoError:"The was a failure attempting to retrieve the entity information.",CapabilityModeError:"The capability to write an e-mail to a group selection is only available in list views.",CapabilityEntityError:"The capability to write an e-mail to a group selection is only available for Contacts or Leads.",NoRowsSelectedError:"There are no rows selected."}};return lang.mixin(_1cb4,nls);});},"Sage/MainView/ActivityMgr/LitRequestListPanelConfig":function(){define("Sage/MainView/ActivityMgr/LitRequestListPanelConfig",["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Columns/DateTime","dojo/_base/declare","dojo/i18n!./nls/LitRequestListPanelConfig"],function(_1cb5,_1cb6,_1cb7,_1cb8,_1cb9,_1cba,_1cbb,_1cbc){var _1cbd=_1cbb("Sage.MainView.ActivityMgr.LitRequestListPanelConfig",[_1cb5],{constructor:function(){this._nlsResources=_1cbc;this._listId="literature";this._resourceKind="litRequests";this.entityName="LitRequest";this._contextMenu="LitRequestListContextMenu";this._securedAction="ActivitiesViewLitratureRequests";this._structure=this._getStructure();this._select=this._getSelect();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.toolBar=this._getToolBars();dojo.subscribe("/entity/litRequest/change",this._onListRefresh);},_onListRefresh:function(event){var _1cbe=Sage.Services.getService("ActivityService");_1cbe.refreshList("literature");},_getSelect:function(){var _1cbf=["$key","ContactName","Contact/$key","Description","FillDate","FillStatus","Options","Priority","RequestDate","SendDate","SendVia","TotalCost","FillUser/UserInfo/UserName","RequestUser/UserInfo/UserName","Contact/AccountName","Contact/Address/PostalCode","Contact/Account/AccountId","ReqestUser/$key"];return _1cbf;},_getSort:function(){var sort=[{attribute:"RequestDate",descending:true}];return sort;},_getWhere:function(){var _1cc0=this._nlsResources.litFillStatusComplete||"Completed";var where=(this._currentUserId)?dojo.string.substitute("(RequestUser.Id eq \"${0}\") and (FillStatus ne \"${1}\"  or FillStatus eq null )",[this._currentUserId,_1cc0]):"";return where;},_getStructure:function(){var _1cc1=this._nlsResources.colNameView||"View";var _1cc2=this._nlsResources.colNameContact||"Contact";var _1cc3=this._nlsResources.colNameDescription||"Description";var _1cc4=this._nlsResources.colNameFillStatus||"Status";var _1cc5=this._nlsResources.colNamePriority||"Priority";var _1cc6=this._nlsResources.colNameReqestDate||"Request Date";var _1cc7=this._nlsResources.colNameSendDate||"Send Date";var _1cc8=this._nlsResources.colNameSendVia||"Send Via";var _1cc9=this._nlsResources.colNameTotalCost||"Total Cost";var _1cca=this._nlsResources.colNameReqestUser||"Request User";var _1ccb=this._nlsResources.colNameAccount||"Account";var _1ccc=this._nlsResources.colNamePostalCode||"Postal Code";_1cbb("Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitViewCell",dojox.grid.cells.Cell,{format:function(_1ccd,_1cce){var key=_1cb6.getValue(_1cce,"$key");var html="<a href=\"LitRequest.aspx?entityid="+key+"&modeid=Detail\" >"+_1cc1+"</a>";return html;}});_1cbb("Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitContactCell",dojox.grid.cells.Cell,{format:function(_1ccf,_1cd0){var _1cd1=Sage.Utility.getValue(_1cd0,"Contact.$key");var _1cd2=Sage.Utility.getValue(_1cd0,"ContactName");var html="<a href=\"Contact.aspx?entityid="+_1cd1+"&modeid=Detail\" >"+_1cd2+"</a>";return html;}});_1cbb("Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitAccountCell",dojox.grid.cells.Cell,{format:function(_1cd3,_1cd4){var _1cd5=Sage.Utility.getValue(_1cd4,"Contact.Account.$key");var _1cd6=Sage.Utility.getValue(_1cd4,"Contact.AccountName");var html="<a href=\"Account.aspx?entityid="+_1cd5+"&modeid=Detail\" >"+_1cd6+"</a>";return html;}});var _1cd7=[{field:"$key",name:" ",type:Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitViewCell,width:"60px"},{field:"RequestDate",name:_1cc6,type:_1cba,dateOnly:true,width:"90px"},{field:"Priority",name:_1cc5,width:"60px"},{field:"Description",name:_1cc3,width:"200px"},{field:"ContactName",name:_1cc2,type:Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitContactCell,width:"200px"},{field:"Contact.AccountName",name:_1ccb,type:Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitAccountCell,width:"200px"},{field:"SendDate",name:_1cc7,type:_1cba,dateOnly:true,width:"90px"},{field:"SendVia",name:_1cc8,width:"60px"},{field:"TotalCost",name:_1cc9,width:"60px"},{field:"FillStatus",name:_1cc4,width:"60px"},{field:"RequestUser.UserInfo.UserName",name:_1cca,width:"90px"},{field:"Contact.Address.PostalCode",name:_1ccc,width:"60px"}];return _1cd7;},_getDetailConfig:function(){var _1cd8={resourceKind:this._resourceKind,requestConfiguration:{mashupName:"ActivityManager",queryName:"LitRequestSummary_query"},templateLocation:"MainView/ActivityMgr/Templates/LitRequestSummary.html",postProcessCallBack:false};return _1cd8;},_getFormatterScope:function(){var _1cd9=new _1cb8({requestConfiguration:{mashupName:"ActivityManager",queryName:"LitRequestSummary_query"},templateLocation:"MainView/ActivityMgr/Templates/LitRequestSummary.html"});return _1cd9;},_getToolBars:function(){var _1cda={items:[]};return _1cda;}});return _1cbd;});},"Sage/Services/_ServiceMixin":function(){define("Sage/Services/_ServiceMixin",["Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(_1cdb,_1cdc){var _1cdd=_1cdc("Sage.Services._ServiceMixin",null,{serviceMap:null,constructor:function(){var map=this.serviceMap;if(map){for(var _1cde in map){if(this[_1cde]){continue;}this[_1cde]=this._resolveService(map[_1cde]);}}},_resolveService:function(_1cdf){if(_1cdf&&_1cdf.type==="sdata"){return _1cdb.getSDataService(_1cdf.name);}return Sage.Services.getService(_1cdf);}});return _1cdd;});},"Sage/Utility/File/DefaultDropHandler":function(){define("Sage/Utility/File/DefaultDropHandler",["Sage/Utility/File/DragDropWatcher","Sage/Utility/File/Attachment","Sage/Utility/File/LibraryDocument","Sage/UI/Dialogs","dojo/string","Sage/Utility","Sage/Utility/EntityRelationships","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","dijit/_Widget","Sage/Services/ActivityService","dojo/i18n","dojo/i18n!./nls/DefaultDropHandler","dojo/_base/declare"],function(_1ce0,_1ce1,_1ce2,_1ce3,_1ce4,_1ce5,_1ce6,dLang,_1ce7,_1ce8,_1ce9,_1cea,i18n,_1ceb,_1cec){var _1ced=_1cec("Sage.Utility.File.EmailFileHandler",null,{file:null,histRelIdProperty:"",histRelNameProperty:"",histRelId:"",histRelName:"",extendRelationships:null,entityContext:null,fileMetaData:null,newHistory:null,saveAsMsg:false,doNotPromptHistory:false,saveAttachments:false,emailDroppedText:"Dropped Email",attachmentTitleText:"Save Attachements",attachmentQuestionText:"Would you like to keep a copy of these attachment(s) in SalesLogix? <br />The attachments will be stored under the Attachments tab for relevant entities.",constructor:function(opts){dLang.mixin(this,opts);},handleFile:function(){if(!this.file){return;}_1ce6.getRelationships(this.entityContext,function(_1cee){var store=new _1ce7({resourceKind:"history",service:_1ce8.getSDataService("dynamic")});store.newItem({onComplete:function(_1cef){var hist={};hist[this.histRelIdProperty]=this.histRelId;hist[this.histRelNameProperty]=this.histRelName;hist["Type"]="atEmail";hist["Duration"]=1;hist["Timeless"]=false;hist["Category"]=this.emailDroppedText;var d=(this.fileMetaData.sentOn)?this.fileMetaData.sentOn:this.fileMetaData.receivedTime;if(!d){d=new Date();}var _1cf0=_1ce5.Convert.toIsoStringFromDate(d);hist["StartDate"]=_1cf0;hist["CompletedDate"]=_1cf0;hist["OriginalDate"]=_1cf0;if(this.fileMetaData["subject"]){hist["Description"]=this.fileMetaData.subject.substring(0,64);}if(this.fileMetaData["body"]){hist["LongNotes"]=this.fileMetaData.body;}if(this.fileMetaData["senderName"]){hist["UserDef2"]=this.fileMetaData.senderName;}var _1cef=dLang.mixin(_1cef,hist);if(_1cee){_1cef=dLang.mixin(_1cef,_1cee);}store.saveNewEntity(_1cef,this._historySaved,this._historyFailed,this,false);},scope:this});},this);},_getAttachmentMixin:function(_1cf1,_1cf2){var mixin={};for(var p in _1cf2){mixin[p]=_1cf2[p];}mixin["description"]=_1cf1.filename;return mixin;},_historySaved:function(hist){this.newHistory=hist;var mixin={};mixin["HistoryId"]=hist["$key"];mixin["historyId"]=hist["$key"];for(var p in hist){var _1cf3=p.substring(p.length-2);if(_1cf3.toUpperCase()==="ID"&&hist[p]){mixin[p]=hist[p];}}if(this.saveAsMsg){this.file.name=hist["$key"]+".msg";this.file.filename=hist["$key"]+".msg";var _1cf4=this._getAttachmentMixin(this.file,mixin);_1cf4.description=hist["Description"];_1ce1.createAttachmentSilent(this.file,_1cf4);}if(this.fileMetaData.attachments.length>0){if(this.saveAttachments){for(var i=0;i<this.fileMetaData.attachments.length;i++){var _1cf5=this.fileMetaData.attachments[i];var _1cf6=this._getAttachmentMixin(_1cf5,mixin);if((!_1cf5.name)&&(_1cf5.filename)){_1cf5["name"]=_1cf5.filename;}_1ce1.createAttachmentSilent(_1cf5,_1cf6);}}}this.onHistorySaved(hist["$key"]);},_historyFailed:function(req){},onHistoryFailed:function(){},onHistorySaved:function(_1cf7){}});Sage.namespace("Utility.File.DefaultDropHandler");Sage.Utility.File.DefaultDropHandler={attachmentTitleText:"Save Attachements",attachmentQuestionText:"Would you like to keep a copy of these attachment(s) in SalesLogix? <br />The attachments will be stored under the Attachments tab for relevant entities.",emailDroppedText:"Dropped Email",promptForAttachments:true,saveAttachments:false,hasAttachments:false,options:{},historyQueue:[],historyHandlers:[],fileType:Sage.Utility.File.fileType.ftAttachment,init:function(_1cf8){dojo.connect(_1ce0,"onFilesDropped",this,"onFilesDropped");Sage.Utility.File.DefaultDropHandler.options["SAVEMSGFILES"]=_1cf8.saveMSGFiles;var _1cf9=Sage.Services.getService("UserOptions");if(_1cf9){_1cf9.get("DoNotPromptHistory","Email",function(opt){Sage.Utility.File.DefaultDropHandler.options["DoNotPromptHistory"]=(opt["value"]==="T");});}},onFilesDropped:function(files,_1cfa){if(this.shouldForceAttachments(_1cfa)){if(this.fileType!==Sage.Utility.File.fileType.ftLibraryDocs){_1ce1.createAttachments(files);}else{_1ce2.createDocuments(files,_1cfa);}return;}var _1cfb=[];var _1cfc=[];for(var i=0;i<files.length;i++){var file=files[i];if(this.isOutlookEmailFile(file)){_1cfb.push(file);}else{_1cfc.push(file);}}if(_1cfb.length>0){this.handleEmailFiles(_1cfb,_1cfa);}if(_1cfc.length>0){if(this.fileType!==Sage.Utility.File.fileType.ftLibraryDocs){_1ce1.createAttachments(_1cfc);}else{_1ce2.createDocuments(files,_1cfa);}}},shouldForceAttachments:function(_1cfd){var _1cfe=false;if(!Sage.gears){return true;}if(_1cfd){_1cfe=Sage.Utility.File.DefaultDropHandler.isTargetAttachmentTab(_1cfd.parentElement);}if(_1cfe){return true;}else{return false;}},isOutlookEmailFile:function(file){var re=/\.(\w+)$/;var _1cff=file.name.match(re);if(_1cff.length>1){return _1cff[1].toLowerCase()==="msg";}return false;},isTargetAttachmentTab:function(_1d00){if(!_1d00){return false;}if(_1d00.id.indexOf("tabContent.dijitContentPane")!=-1){return false;}if(_1d00.id.indexOf("AttachmentList")!=-1){return true;}return Sage.Utility.File.DefaultDropHandler.isTargetAttachmentTab(_1d00.parentElement);},handleEmailFiles:function(files,_1d01){if(!Sage.gears||(this.fileType===Sage.Utility.File.fileType.ftLibraryDocs)){if(this.fileType!==Sage.Utility.File.fileType.ftLibraryDocs){_1ce1.createAttachments(files);}else{_1ce2.createDocuments(files,_1d01);}return;}if(files.length<1){return;}this.hasAttachments=false;this._buildEmailQueue(files);if(this.hasAttachments){var self=this;var _1d02={title:this.attachmentTitleText,query:this.attachmentQuestionText,callbackFn:function(_1d03){if(_1d03){self.saveAttachments=true;}else{self.saveAttachments=false;}self._processNextHistoryHandler();},yesText:null,noText:null,showNoButton:true};_1ce3.raiseQueryDialogExt(_1d02);}else{this.saveAttachments=false;this._processNextHistoryHandler();}},_buildEmailQueue:function(files){var _1d04=this.getEntityInfo();var table=_1d04.EntityTableName.toUpperCase().substring(0,1)+_1d04.EntityTableName.toLowerCase().substring(1);var _1d05=Sage.gears.factory.create("beta.desktop");this.historyHandlers=[];this.historyQueue=[];for(var i=0;i<files.length;i++){var blob=null;if(files[i].blob){blob=files[i].blob;}else{blob=files[i];}var md=_1d05.extractMetaData(blob);if(md.attachments.length>0){this.hasAttachments=true;}this.historyHandlers.push(new _1ced({file:files[i],histRelIdProperty:table+"Id",histRelNameProperty:table+"Name",histRelId:_1d04.EntityId,histRelName:_1d04.Description,entityContext:_1d04,emailDroppedText:Sage.Utility.File.DefaultDropHandler.emailDroppedText,fileMetaData:md,saveAttachments:false,saveAsMsg:Sage.Utility.File.DefaultDropHandler.options.SAVEMSGFILES,doNotPromptHistory:Sage.Utility.File.DefaultDropHandler.options.DoNotPromptHistory,onHistorySaved:dojo.hitch(this,"_onHistoryHandlerSuccsess"),onHistoryFailed:dojo.hitch(this,"_onHistoryHandlerFailed")}));}},_processNextHistoryHandler:function(){if(this.historyHandlers.length>0){var _1d06=this.historyHandlers.pop();if(_1d06){_1d06.saveAttachments=this.saveAttachments;_1d06.handleFile();}}else{this.saveAttachments=false;this._hasAttachmnets=false;this._checkContinueToComplete();}},_onHistoryHandlerSuccsess:function(_1d07){this.historyQueue.push(_1d07);this._processNextHistoryHandler();},_onHistoryHandlerFailed:function(){this._processNextHistoryHandler();},_checkContinueToComplete:function(){if(!this.options.DoNotPromptHistory){this._showCompleteDlg();}else{dojo.publish("/entity/history/change",null);this.historyQueue=[];}},_showCompleteDlg:function(){var _1d08=Sage.Services.getService("ActivityService");_1d08.completeHistoriesInList(this.historyQueue);},getEntityInfo:function(){if(Sage.Services.hasService("ClientEntityContext")){var _1d09=Sage.Services.getService("ClientEntityContext");var _1d0a=_1d09.getContext();if(_1d0a.EntityId!=""){return _1d0a;}else{return null;}}}};return Sage.Utility.File.DefaultDropHandler=dojo.mixin(Sage.Utility.File.DefaultDropHandler,i18n.getLocalization("Sage.Utility.File","DefaultDropHandler"));});},"Sage/TaskPane/nls/SecurityManagerTasksTasklet":function(){define("Sage/TaskPane/nls/SecurityManagerTasksTasklet",["Sage/LanguageList","dojo/_base/lang"],function(_1d0b,lang){var nls={root:{addSecurityProfileTitle:"Add Profile",editSecurityProfileTitle:"Edit Profile"}};return lang.mixin(_1d0b,nls);});},"Sage/UI/nls/TimeZoneItem":function(){define("Sage/UI/nls/TimeZoneItem",["Sage/LanguageList","dojo/_base/lang"],function(_1d0c,lang){var nls={root:{buttonOKText:"OK",buttonCancelText:"Cancel",timeZoneText:"Time zone",timeZoneSettingsText:"Time Zone Settings",setTimeZoneText:"Set the time zone:"}};return lang.mixin(_1d0c,nls);});},"Sage/Utility/File/GoogleDocPicker":function(){define("Sage/Utility/File/GoogleDocPicker",["dijit/_Widget","dijit/tree/TreeStoreModel","dijit/Dialog","dijit/Tree","dojo/window","dojo/data/ItemFileReadStore","dojo/i18n!./nls/GoogleDocPicker","dojo/_base/declare"],function(_1d0d,_1d0e,_1d0f,Tree,_1d10,_1d11,_1d12,_1d13){var _1d14=_1d13("Sage.Utility.File.GoogleAuthModule",null,{couldNotOpenWindowMsg:"Could not open authentication window - please check your popup blocker settings.",scope:"",authUrl:"",constructor:function(opts){this.scope=opts.authUrl;dojo.mixin(this,opts);dojo.mixin(this,_1d12);},login:function(){var r=this;this._loadGoogleLibrary(function(){google.load("gdata","2.0",{"callback":function(){google.gdata.onLoad();if(google.accounts.user.checkLogin(r.authUrl)){r.onLoggedIn();}else{window.googleAuthModule=r;var win=window.open("GoogleAuth.aspx","_blank");setTimeout(function(){var _1d15=false;if(typeof win=="undefined"){_1d15=true;}else{if(win&&win.closed){_1d15=false;}else{if(win&&!win.outerHeight){_1d15=true;}}}if(_1d15){alert(r.couldNotOpenWindowMsg);}},3000);}}});});},logout:function(){if(google.accounts.user.checkLogin(this.authUrl)){google.accounts.user.logout();}},onLoggedIn:function(){},_loadGoogleLibrary:function(_1d16){if(typeof google!=="undefined"){_1d16();}else{var _1d17="googleCallback_"+String(Math.random()).replace(/^0\./,"");window[_1d17]=_1d16;var _1d18=document.createElement("script");_1d18.src="https://www.google.com/jsapi?callback="+_1d17;_1d18.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(_1d18);}}});var _1d19=_1d13("Sage.Utility.File.GoogleDocPicker",_1d0d,{id:"",googleDocumentsTitle:"Google Documents",pick:function(){var auth=new _1d14({authUrl:"https://docs.google.com/feeds"});dojo.connect(auth,"onLoggedIn",this,this._onLoggedInHandler);auth.login();},_onLoggedInHandler:function(){var svc=new google.gdata.client.GoogleService("writely","mytest");svc.getFeed("https://docs.google.com/feeds/documents/private/full?showfolders=true",dojo.hitch(this,"_displayFeed"),function(e){alert(localeStrings.errorRetrievingData+"\n"+e.toString());},undefined,true);},_displayFeed:function(feed){var root=this._parseFeed(feed);dojo.ready(dojo.hitch(this,function(){var store=new _1d11({data:{items:[{children:root,title:"Root",root:true}]}});var _1d1a=new _1d0e({store:store,childrenAttrs:["children"],labelAttr:"title",query:{}});var tree=new Tree({model:_1d1a,showRoot:false,openOnDblClick:true});dojo.connect(tree,"onDblClick",dojo.hitch(this,function(item,node,evt){this.onDocumentSelected(item.title,item.url);}));dojo.connect(tree,"onLoad",dojo.hitch(this,function(){var dlg=new _1d0f({title:_1d12.googleDocumentsTitle,content:tree});dlg.startup();dlg.containerNode.style.maxHeight=dojo.window.getBox().h/3+"px";dlg.containerNode.style.minWidth="200px";dlg.containerNode.style.overflow="auto";dlg.show();}));}));},_parseFeed:function(feed){var items=[];var _1d1b=feed.feed.entry;if(_1d1b){for(var i=0;i<_1d1b.length;i++){var entry=_1d1b[i];var _1d1c={id:entry.id.$t,title:entry.title.$t,feedentry:entry};dojo.some(entry.category,function(x){if(x.scheme=="http://schemas.google.com/g/2005#kind"){_1d1c.type=x.label;return true;}});items.push(_1d1c);}}items.sort(function(a,b){return a.title>b.title?1:(a.title<b.title?-1:0);});var root=items.slice(0);var _1d1d=0;dojo.forEach(items,function(item,i){var _1d1e=false;dojo.forEach(item.feedentry.link,function(link){if(link.rel=="http://schemas.google.com/docs/2007#parent"){dojo.some(items,function(_1d1f){if(link.href==_1d1f.id){_1d1e=true;if(!_1d1f.children){_1d1f.children=[];}_1d1f.children.push(item);}});}if(link.rel=="alternate"){item.url=link.href;}});if(_1d1e){root.splice(i-_1d1d,1);_1d1d++;}});return root;},onDocumentSelected:function(title,url){}});return _1d19;});},"Sage/UI/Columns/nls/SlxEdit":function(){define("Sage/UI/Columns/nls/SlxEdit",["Sage/LanguageList","dojo/_base/lang"],function(_1d20,lang){var nls={root:{editText:"Edit"}};return lang.mixin(_1d20,nls);});},"Sage/Layout/ContentPane":function(){define("Sage/Layout/ContentPane",["dojo/_base/declare","dijit/layout/ContentPane","Sage/Layout/_SplitterEnhancedMixin"],function(_1d21,_1d22,_1d23){var _1d24=_1d21("Sage.Layout.ContentPane",[_1d22,_1d23],{});return _1d24;});},"Sage/UI/FilteringSelect":function(){define("Sage/UI/FilteringSelect",["dijit/form/FilteringSelect","dojo/_base/declare"],function(_1d25,_1d26){return _1d26("Sage.UI.FilteringSelect",_1d25,{valueAttr:false,_getValueField:function(){return this.valueAttr||"value";}});});},"Sage/QuickForms/Design/OwnerControlDesigner":function(){define("Sage/QuickForms/Design/OwnerControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/OwnerBasicPropertyEditor","./Editors/OwnerAdvancedPropertyEditor","dojo/i18n!./nls/OwnerControlDesigner"],function(_1d27,array,lang,_1d28,_1d29,_1d2a,_1d2b,_1d2c,_1d2d,_1d2e,_1d2f){return _1d27("Sage.QuickForms.Design.OwnerControlDesigner",[_1d29,_1d2a,_1d28,_1d2b],{designSupport:{visible:true},editors:[_1d2d,_1d2e,_1d2c],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"{%= $.fieldClass %}-icon\"></div>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-owner",helpTopicName:"Owner_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXOwner, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Owner",constructor:function(){lang.mixin(this,_1d2f);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_1d30){return (_1d30["ControlItemName"]=="LookupResultValue");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},setupFor:function(_1d31){this.inherited(arguments);this.set("required",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"LookupResultValue",DataItemName:_1d31.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:"null"}]);this.set("designBinding",_1d31.propertyPath||"");},startup:function(){this.inherited(arguments);var _1d32=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_1d32&&_1d32["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/Layout/TabContainer":function(){define("Sage/Layout/TabContainer",["dojo/_base/declare","dojo/ready","dojo/aspect","dijit/layout/TabContainer"],function(_1d33,ready,_1d34,_1d35){var _1d36=_1d33("Sage.Layout.TabContainer",[_1d35],{region:"center",destroyRecursive:function(){if(this.tablist){this.tablist.destroy();}this.inherited(arguments);},postCreate:function(){_1d34.after(this,"startup",function(){var _1d37=dijit.byId("tabContent");_1d37.resize();_1d37.resize();});}});return _1d36;});},"url:Sage/UI/Controls/templates/DateTimePicker.html":"<div class=\"dateTimePicker\">\r\n        <div dojoAttachPoint=\"tooltipContainer\">\r\n        \r\n            <div dojoAttachPoint=\"dateContainer\" class=\"dateTimePicker-dateContainer\">\r\n               \r\n                    <input id=\"${id}-Calendar\" data-dojo-type=\"Sage.UI.Calendar\"\r\n                        style=\"width:inherit;\"\r\n                        textAlign=\"${textAlign}\"\r\n                           type=\"text\" \r\n                           tabindex=\"0\"\r\n                           displayMode=\"popup\"\r\n                           dojoAttachPoint=\"dateNode\"\r\n                           dojoAttachEvent=\"onValueSelected:_onValueSelected,onBlur:_onCalendarBlur\">\r\n               \r\n            </div>\r\n            \r\n            <div dojoAttachPoint=\"timeZoneContainer\" class=\"dateTimePicker-timeZoneContainer\">\r\n               \r\n                    <label for=\"${id}-TimeStart\">${timeStartText}</label><br />\r\n                    <input id=\"${id}-TimeTextBox\" data-dojo-type=\"dijit.form.TimeTextBox\" \r\n                           style=\"width:16em;\"\r\n                           textAlign=\"${textAlign}\"\r\n                           tabindex=\"0\"\r\n                           type=\"text\" dojoAttachPoint=\"timeNode\">\r\n                    <br /><br/>\r\n                    <label for=\"${id}-TzCalculator\">${timeZoneCalculatorText}</label>\r\n                    <div id=\"timeZoneCalucaltor\" class=\"dateTimePicker-timeZoneCalculator\">\r\n                       <p style=\"width:auto;margin-top:auto\">\r\n                            <label for=\"${id}-TzSelectSource\">${timeZoneSourceText}</label><br />\r\n                            <select id=\"${id}-TzSelectSource\" data-dojo-type=\"dijit.form.ComboBox\"  dojoAttachPoint=\"timeZoneSourceComboNode\" style=\"width:15em;\">\r\n                            </select>\r\n                            <br />\r\n                            <label for=\"${id}-TzSelectDest\">${timeZoneDestText}</label><br />\r\n                           <select id=\"${id}-TzSelectDest\" data-dojo-type=\"dijit.form.ComboBox\"  dojoAttachPoint=\"timeZoneDestComboNode\" style=\"width:15em;\">\r\n                           </select>\r\n                           <br/>\r\n                            <span id=\"${id}-ConvertResults\" dojoAttachPoint=\"convertResultsNode\" style=\"float:left;padding-top:5px;\">\r\n                        </span>\r\n                        </p><br/>\r\n                        <button id=\"${id}-Convert\" data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"timeZoneConvertButtonNode\" type=\"button\" style=\"float:right\" dojoAttachEvent=\"onClick:_convertClicked\">\r\n                            ${convertText}\r\n                        </button>\r\n                       \r\n                        \r\n                    </div>\r\n               \r\n                <div class=\"button-bar alignright\" style=\"clear: both\">\r\n                    <button id=\"${id}-OKButton\" tabindex=\"0\" data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"OKButtonNode\" type=\"button\" dojoAttachEvent=\"onClick:_okClicked\">\r\n                        ${okText}\r\n                    </button>\r\n                    <button id=\"${id}-CancelButton\" tabindex=\"0\" data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"CancelButtonNode\" type=\"button\" dojoAttachEvent=\"onClick:_cancelClicked\">\r\n                        ${cancelText}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    \r\n</div>\r\n\r\n","Sage/QuickForms/Design/Editors/nls/CheckBoxAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/CheckBoxAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1d38,lang){var nls={root:{titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",checkedText:"Checked:",checkedTooltipText:"Sets default state of checkbox to selected.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"}}};return lang.mixin(_1d38,nls);});},"Sage/Data/BaseSDataStore":function(){define("Sage/Data/BaseSDataStore",["Sage/Utility","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/lang"],function(_1d39,_1d3a,_1d3b,lang){var _1d3c=_1d3b("Sage.Data.BaseSDataStore",null,{queryName:null,constructor:function(o){lang.mixin(this,o);this.features={"dojo.data.api.Read":true};if(!this.identityAttributes){this.identityAttributes=[this.identityAttribute||"$key"];}if(!this.labelAttributes){this.labelAttributes=["$descriptor"];}this.features["dojo.data.api.Identity"]=true;this.dataCache={query:""};},fetch:function(_1d3d){if(!this.isNewContext(_1d3d)&&this.feed){this.onSuccess(_1d3d,this.feed);return;}this.setContext(_1d3d);if(_1d3d.count===Infinity){_1d3d.count=500;}var _1d3e=(_1d3d.count-0)||this.pageSize||15;var _1d3f=(_1d3d.start-0)||1;if(_1d3f>1){_1d3f=_1d3f+1;}this.verifyService();var _1d40=this.getCollectionRequestObj(_1d3d);if(!_1d40){if(_1d3d.onError){_1d3d.onError.call(_1d3d.scope||this,"Invalid data url",_1d3d);}return;}_1d40.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,(isNaN(_1d3f))?1:_1d3f);var qry="";if(this.query&&typeof this.query!=="function"){if(!this.directQuery){this.directQuery=this.query;}}if(this.directQuery){if(!_1d3d.query){_1d3d.query={};}lang.mixin(_1d3d.query,this.directQuery);}if(_1d3d.query){if(typeof _1d3d.query==="function"){qry=_1d3d.query();}else{if(typeof _1d3d.query==="string"){qry=_1d3d.query;}else{if(typeof _1d3d.query==="object"){for(var _1d41 in _1d3d.query){if(_1d41==="fn"){qry=_1d3d.query.fn.call(_1d3d.query.scope||this);}else{if(_1d41==="conditions"){if(typeof _1d3d.query.conditions==="string"&&_1d3d.query.conditions!==""){qry+=(qry&&qry.length>0)?" and "+_1d3d.query.conditions:_1d3d.query.conditions;}}else{if(_1d41!=="scope"){if(_1d3d.query.hasOwnProperty(_1d41)){var _1d42=[_1d41," like ","'",_1d3d.query[_1d41].replace("*","%"),"'"].join("");qry+=(qry.length>0)?" and "+_1d42:_1d42;}}}}}}}}}_1d3d.evaluatedQuery=qry||"";if(qry&&qry!==""){_1d40.setQueryArg("where",qry);}if(this.select&&this.select.length>0){_1d40.setQueryArg("select",this.select.join(","));}if(this.include&&this.include.length>0){_1d40.setQueryArg("include",this.include.join(","));}if(this.sort){_1d3d.sort=_1d3d.sort||[];dojo.forEach(this.sort,function(_1d43){if(dojo.filter(_1d3d.sort,function(_1d44){return _1d43.attribute==_1d44.attribute;}).length==0){_1d3d.sort.push(_1d43);}});}if(typeof _1d3d.resourcePredicate!=="undefined"){_1d40.getUri().setCollectionPredicate(_1d3d.resourcePredicate);}this._setQueryArgsOnRequest(_1d3d.queryArgs,_1d40);if(_1d3d.sort&&_1d3d.sort.length>0){var order=[];dojo.forEach(_1d3d.sort,function(v){if(v.descending){this.push(v.attribute+" desc");}else{this.push(v.attribute);}},order);_1d40.setQueryArg("orderby",order.join(","));}if(this.beforeRequest&&typeof this.beforeRequest==="function"){this.beforeRequest.call(_1d3d.scope||this,_1d40);}var key=_1d40.read({success:lang.hitch(this,this.onSuccess,_1d3d),failure:lang.hitch(this,this.onFailure,_1d3d)});return {abort:lang.hitch(this,this.abortRequest,key)};},getCollectionRequestObj:function(_1d45){var _1d46=this.queryName?new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(this.queryName):new Sage.SData.Client.SDataResourceCollectionRequest(this.service);_1d46.setResourceKind(this.resourceKind);_1d46.setStartIndex(_1d45.start+1);if(this.resourcePredicate&&this.resourcePredicate!=="''"){_1d46.getUri().setCollectionPredicate(this.resourcePredicate);}this._setQueryArgsOnRequest(this.queryArgs,_1d46);if(!_1d45.count&&this.count){_1d45.count=this.count;}_1d46.setCount(_1d45.count);return _1d46;},_setQueryArgsOnRequest:function(_1d47,_1d48){if(_1d47){for(var prop in _1d47){if(_1d47.hasOwnProperty(prop)){_1d48.setQueryArg(prop,_1d47[prop]);}}}},abortRequest:function(key){this.service.abortRequest(key);},onSuccess:function(_1d49,feed){if(_1d49.onBegin){if(typeof feed.$totalResults==="undefined"){feed.$totalResults=500000;}_1d49.onBegin.call(_1d49.scope||this,feed.$totalResults,_1d49);}if(_1d49.onComplete){_1d49.onComplete.call(_1d49.scope||this,feed.$resources,_1d49);}this.addToCache(_1d49,feed);},onFailure:function(_1d4a,_1d4b,o){var msg="An unknown exception occurred obtaining data.";if(_1d4b.responseText){var _1d4c=Sys.Serialization.JavaScriptSerializer.deserialize(_1d4b.responseText);if(dojo.isArray(_1d4c)){msg=_1d4c[0].message;}else{msg=_1d4b.responseText;}}if(_1d4a&&_1d4a.onError){_1d4a.onError.call(_1d4a.scope||this,msg,_1d4a);}else{if(typeof msg==="string"&&typeof console!=="undefined"){if(_1d4b&&_1d4b.status){msg+=" (HTTP status = %o; statusText = %o)";console.error(msg,_1d4b.status,_1d4b.statusText);}else{console.error(msg);}}}},setContext:function(_1d4d){this.context={start:_1d4d.start,count:_1d4d.count,query:_1d4d.query,queryOptions:_1d4d.queryOptions,sort:_1d4d.sort};},addToCache:function(_1d4e,feed){var i,item,key;if(_1d4e.evaluatedQuery!==this.dataCache.query){this.clearCache();this.dataCache.query=_1d4e.evaluatedQuery;}if(feed.$resources){for(i=0;i<feed.$resources.length;i++){item=feed.$resources[i];key=this.getIdentity(item);this.dataCache[key]=item;}}},clearCache:function(){for(var key in this.dataCache){if(key!=="query"){delete this.dataCache[key];}}this.dataCache.query="";},isNewContext:function(_1d4f){if(typeof this.context!=="object"){return true;}if(this.context.start!==_1d4f.start){return true;}if(this.context.count!==_1d4f.count){return true;}return false;},verifyService:function(_1d50){if(!this.service){this.service=_1d3a.getSDataService(_1d50||"dynamic");}},getValue:function(item,_1d51,_1d52){return _1d39.getValue(item,_1d51);},getFeatures:function(){return this.features;},getLabel:function(item){var lbl=[];for(var i=0;i<this.labelAttributes.length;i++){if(item.hasOwnProperty(this.labelAttributes[i])){lbl.push(item[this.labelAttributes[i]]);}}return lbl.join(" ");},getLabelAttributes:function(item){return this.labelAttributes;},getIdentity:function(item){if(item){var _1d53=[];for(var i=0;i<this.identityAttributes.length;i++){if(item.hasOwnProperty(this.identityAttributes[i])){_1d53.push(item[this.identityAttributes[i]]);}}return _1d53.join("");}},getIdentityAttributes:function(item){return this.identityAttributes;},fetchItemByIdentity:function(_1d54){if(this.dataCache.hasOwnProperty(_1d54.identity)){_1d54.onItem.call(_1d54.scope||this,this.dataCache[_1d54.identity]);}else{var msg="Item with that key does not exist in the data cache: "+_1d54.identity;if(_1d54.onError){_1d54.onError.call(_1d54.scope||this,{"error":msg});}else{if(typeof console!=="undefined"){}}}},containsValue:function(item,attr,value){var val=_1d39.getValue(item,attr);return val!=="";}});return _1d3c;});},"url:Sage/templates/SpeedSearch.html":"<span>\r    <!-- the textbox -->\r    <input type=\"text\" id=\"txt_ss\" />\r    <!--the image button-->\r    <button id='ss-btn-image' type=\"button\" style=\"font-size:10px\"></button>\r    <button id='ss-btn-toggle' type=\"button\" style=\"font-size:10px\"></button>\r</span>\r","Sage/UI/GroupTabPane":function(){define("Sage/UI/GroupTabPane",["dijit/layout/TabContainer","dojo/topic","dojo/_base/lang","dojo/_base/declare"],function(_1d55,topic,lang,_1d56){var _1d57=_1d56("Sage.UI.GroupTabPane",_1d55,{useMenu:false,_children:null,constructor:function(_1d58){this._children=[];this.inherited(arguments);},addChild:function(_1d59){this._children.push(_1d59);topic.publish(this.id+"-addChild",_1d59,this._children.length);this._setupChild(_1d59);if(!this.selectedChildWidget){this.selectChild(_1d59);}if(this.doLayout){this.layout();}this.onAddChildrenComplete();},addChildren:function(_1d5a){var len=_1d5a.length,_1d5b,_1d5c=100,chunk,pos=0,last=false;while(pos<len){if(pos<len-_1d5c){chunk=_1d5a.splice(0,_1d5c);}else{chunk=_1d5a.splice(0,len-pos);last=true;}pos=pos+_1d5c;this.defer((function(chunk,self,last){return lang.hitch(self,function(){var i,_1d5d=chunk.length,_1d5e=this._children.length;for(i=0;i<_1d5d;i++){if(this._started){topic.publish(this.id+"-addChild",chunk[i],_1d5e+i);this._setupChild(chunk[i]);if(!this.selectedChildWidget){this.selectChild(chunk[i]);}this._children.push(chunk[i]);}}if(last){if(this.doLayout){this.layout();}this.onAddChildrenComplete();}});})(chunk,this,last));}},onAddChildrenComplete:function(){},getChildren:function(){return this._children;},removeChildren:function(){var i=0,_1d5f;for(i=0;i<this._children.length;i++){_1d5f=this._children[i];topic.publish(this.id+"-removeChild",_1d5f);_1d5f.destroyDescendants();}this._children=[];this.destroyDescendants();if(this.doLayout){this.layout();}}});return _1d57;});},"Sage/TaskPane/AccountingTasksTasklet":function(){define("Sage/TaskPane/AccountingTasksTasklet",["Sage/TaskPane/_BaseTaskPaneTasklet","Sage/UI/Dialogs","dojo/i18n!./nls/AccountingTasksTasklet","dojo/_base/declare"],function(_1d60,_1d61,_1d62,_1d63){var _1d64=_1d63("Sage.TaskPane.AccountingTasksTasklet",_1d60,{nlsAccountingResources:_1d62,linkAccount:function(){if(Sage.Utility.getModeId()==="detail"){return true;}var _1d65=this.getSelectionInfo();if(this.verifySingleSelection(_1d65)){this.saveSelections(this.actionItem,_1d65);return true;}else{_1d61.showInfo(this.selectSingleRecord,this.invalidSelectionTitle);return false;}},actionItem:function(){},checkPrices:function(){if(Sage.Utility.getModeId()==="detail"){return true;}var _1d66=this.getSelectionInfo();if(this.verifySingleSelection(_1d66)){this.saveSelections(this.actionItem,_1d66);}else{_1d61.showInfo(this.nlsAccountingResources.updatePricingRecords,this.invalidSelectionTitle);return false;}},submitSalesOrder:function(){if(Sage.Utility.getModeId()==="detail"){return true;}var _1d67=this.getSelectionInfo();if(this.verifySingleSelection(_1d67)){this.saveSelections(this.actionItem,_1d67);}else{_1d61.showInfo(this.nlsAccountingResources.updatePricingRecords,this.invalidSelectionTitle);return false;}}});return _1d64;});},"Sage/QuickForms/Design/ComboBoxControlDesigner":function(){define("Sage/QuickForms/Design/ComboBoxControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/ComboBoxBasicPropertyEditor","./Editors/ComboBoxAdvancedPropertyEditor","dojo/i18n!./nls/ComboBoxControlDesigner"],function(_1d68,array,lang,_1d69,_1d6a,_1d6b,_1d6c,_1d6d,_1d6e,_1d6f,_1d70){return _1d68("Sage.QuickForms.Design.ComboBoxControlDesigner",[_1d6a,_1d6b,_1d69,_1d6c],{designSupport:{visible:true},editors:[_1d6e,_1d6f,_1d6d],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"{%= $.fieldClass %}-icon\"></div>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-combobox",helpTopicName:"ComboBox_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFListBox, Sage.Platform.QuickForms.QFControls",displayNameText:"ComboBox",constructor:function(){lang.mixin(this,_1d70);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_1d71){return (_1d71["ControlItemName"]=="SelectedValue");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getDataSourceAttr:function(){return lang.getObject("DataSource",false,this.entry);},_setDataSourceAttr:function(value){lang.setObject("DataSource",value,this.entry);},_getHasItemsAttr:function(){var items=lang.getObject("ItemValues",false,this.entry);return (lang.isArray(items)&&items.length>0);},_getItemValuesAttr:function(){return lang.getObject("ItemValues",false,this.entry);},_setItemValuesAttr:function(value){lang.setObject("ItemValues",value,this.entry);},_getTextFieldAttr:function(){return lang.getObject("TextField",false,this.entry);},_setTextFieldAttr:function(value){lang.setObject("TextField",value,this.entry);},_getValueFieldAttr:function(){return lang.getObject("ValueField",false,this.entry);},_setValueFieldAttr:function(value){lang.setObject("ValueField",value,this.entry);},setupFor:function(_1d72){this.inherited(arguments);this.set("dataSource",null);this.set("textField","");this.set("valueField","");this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"SelectedValue",DataItemName:_1d72.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_1d72.propertyPath||"");},startup:function(){this.inherited(arguments);var _1d73=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_1d73&&_1d73["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/UI/Controls/nls/LogOffButton":function(){define("Sage/UI/Controls/nls/LogOffButton",["Sage/LanguageList","dojo/_base/lang"],function(_1d74,lang){var nls={root:{logOffText:"Log Off"}};return lang.mixin(_1d74,nls);});},"Sage/QuickForms/Design/Editors/nls/TextBoxAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/TextBoxAdvancedPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1d75,lang){var nls={root:{titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{left:"Left",right:"Right",top:"Top",none:"None"}}};return lang.mixin(_1d75,nls);});},"Sage/MainView/ActivityMgr/nls/EditEventEditor":function(){define("Sage/MainView/ActivityMgr/nls/EditEventEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1d76,lang){var nls={root:{titleScheduleText:"Schedule Event",titleEditText:"Edit Event",lblDayTypeText:"Day Type:",lblStartDateText:"Start Date:",lblEndDateText:"End Date:",lblUserText:"User:",lookupUserText:"Lookup User",lblCategoryText:"Category:",lblLocationText:"Location:",lblDescriptionText:"Description:",btnOkayText:"OK",btnCancelText:"Cancel",btnHelpText:"Help",eventTypeActiveText:"Active",eventTypeBusinessTripText:"Business Trip",eventTypeConferenceText:"Conference",eventTypeHolidayText:"Holiday",eventTypeOffText:"Off",eventTypeTradeShowText:"Trade Show",eventTypeUnavailableText:"Unavailable",eventTypeVacationText:"Vacation",errorText:"I'm sorry, the event could not be created because an error occurred.",invaildDatesText:"I'm sorry, the end date cannot be earlier than the start date.",nameText:"Name",}};return lang.mixin(_1d76,nls);});},"Sage/Utility/File/FallbackFilePicker":function(){require({cache:{"url:Sage/Utility/File/templates/FallbackFilePicker_Attachment.html":"[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"uploadFileDialog\" title=\"{%= $.attachFileText %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onHide\">',\r\n        '<iframe src=\"about:blank\" style=\"width:0px;height:0px;border-width:0px;\" name=\"{%= $._iframeId %}\" id=\"{%= $._iframeId %}\" dojoAttachPoint=\"_iframe\" dojoAttachEvent=\"onload:_iframeLoad\"></iframe>',\r\n        '<form method=\"post\" enctype=\"multipart/form-data\" action=\"{%= $._buildPostUrl() %}\" target=\"{%= $._iframeId %}\" dojoAttachPoint=\"_postForm\" class=\"attachment-properties-form\">',\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\">',\r\n                '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.uploadFileText %}\" >',\r\n                    '<input name=\"file\" multiple=\"false\" type=\"file\" dojoAttachEvent=\"onchange:_onNewFile\" dojoAttachPoint=\"btn_FileSelect\" class=\"uploadButton\" />',\r\n                '</div>',\r\n                 '<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.descriptionText %}\" name=\"description\" id=\"{%= $.id %}_tb_Description\" dojoAttachPoint=\"tb_Description\" maxlength=\"128\" ></div>',\r\n                 '<input type=\"hidden\" dojoType=\"dijit.form.TextBox\" name=\"fileName\" id=\"{%= $.id %}_tb_realFileName\" dojoAttachPoint=\"tb_realFileName\" maxlength=\"255\" />',\r\n            '</div>',\r\n            '<div class=\"general-dialog-actions\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                '<span>&nbsp;&nbsp</span>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n            '</div>',\r\n            '<input type=\"hidden\" name=\"dataType\" value=\"R\" />',\r\n            '<input type=\"hidden\" name=\"attachDate\" dojoAttachPoint=\"_attachDate\"/>',\r\n            '<input type=\"hidden\" name=\"accountId\" dojoAttachPoint=\"_accountId\"/>',\r\n            '<input type=\"hidden\" name=\"activityId\" dojoAttachPoint=\"_activityId\" />',\r\n            '<input type=\"hidden\" name=\"contactId\" dojoAttachPoint=\"_contactId\" />',\r\n            '<input type=\"hidden\" name=\"contractId\" dojoAttachPoint=\"_contractId\" />',\r\n            '<input type=\"hidden\" name=\"defectId\" dojoAttachPoint=\"_defectId\" />',\r\n            '<input type=\"hidden\" name=\"historyId\" dojoAttachPoint=\"_historyId\" />',\r\n            '<input type=\"hidden\" name=\"leadId\" dojoAttachPoint=\"_leadId\" />',\r\n            '<input type=\"hidden\" name=\"opportunityId\" dojoAttachPoint=\"_opportunityId\" />',\r\n            '<input type=\"hidden\" name=\"productId\" dojoAttachPoint=\"_productId\" />',\r\n            '<input type=\"hidden\" name=\"returnId\" dojoAttachPoint=\"_returnId\" />',\r\n            '<input type=\"hidden\" name=\"salesOrderId\" dojoAttachPoint=\"_salesOrderId\" />',\r\n            '<input type=\"hidden\" name=\"ticketId\" dojoAttachPoint=\"_ticketId\" />',\r\n            '<input type=\"hidden\" name=\"userId\" dojoAttachPoint=\"_userId\" />',\r\n        '</form>',\r\n    '</div>',\r\n'</div>'\r\n]","url:Sage/Utility/File/templates/FallbackFilePicker_LibraryDoc.html":"[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"uploadFileDialog\" title=\"{%= $.addLibraryFileText %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onHide\">',\r\n        '<iframe src=\"about:blank\" style=\"width:0px;height:0px;border-width:0px;\" name=\"{%= $._iframeId %}\" id=\"{%= $._iframeId %}\" dojoAttachPoint=\"_iframe\" dojoAttachEvent=\"onload:_iframeLoad\"></iframe>',\r\n        '<form method=\"post\" enctype=\"multipart/form-data\" action=\"\" target=\"{%= $._iframeId %}\" dojoAttachPoint=\"_postForm\" class=\"attachment-properties-form\">',\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\">',\r\n                 '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.uploadFileText %}\" >',\r\n                    '<input name=\"file\" multiple=\"false\" type=\"file\" dojoAttachEvent=\"onchange:_onNewFile\" dojoAttachPoint=\"btn_FileSelect\" class=\"uploadButton\" />',\r\n                 '</div>',\r\n                 '<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.descriptionText %}\" name=\"description\" id=\"{%= $.id %}_tb_Description\" dojoAttachPoint=\"tb_Description\" maxlength=\"255\" ></div>',\r\n                 '<input type=\"hidden\" dojoType=\"dijit.form.TextBox\" name=\"fileName\" id=\"{%= $.id %}_tb_realFileName\" dojoAttachPoint=\"tb_realFileName\" maxlength=\"255\" />',\r\n            '</div>',\r\n            '<div class=\"general-dialog-actions\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                '<span>&nbsp;&nbsp</span>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n            '</div>',\r\n        '</form>',\r\n    '</div>',\r\n'</div>'\r\n]"}});define("Sage/Utility/File/FallbackFilePicker",["dijit/_Widget","Sage/_Templated","dijit/Dialog","require","dojo/string","Sage/UI/Dialogs","Sage/Utility","Sage/Utility/File","Sage/Utility/File/Attachment","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","dojo/i18n","dojo/i18n!./nls/FallbackFilePicker","dojo/text!./templates/FallbackFilePicker_Attachment.html","dojo/text!./templates/FallbackFilePicker_LibraryDoc.html","dojo/_base/declare"],function(_1d77,_1d78,_1d79,_1d7a,_1d7b,_1d7c,_1d7d,File,_1d7e,_1d7f,_1d80,i18n,_1d81,_1d82,_1d83,_1d84){var _1d85=_1d84("Sage.Utility.File.FallbackFilePicker",[_1d77,_1d78],{addLibraryFileText:"Add Library File",attachFileText:"Attach File",descriptionText:"Description",uploadFileText:"Select File",okText:"OK",cancelText:"Cancel",_iframeId:"attachmentPostIFrame",_hiddenFields:["_attachDate","_accountId","_activityId","_contactId","_contractId","_defectId","_historyId","_leadId","_opportunityId","_productId","_returnId","_salesOrderId","_ticketId","_userId"],_showing:false,fileType:File.fileType.ftAttachment,widgetsInTemplate:true,id:"fallbackFilePicker",widgetTemplate:null,constructor:function(_1d86){this.inherited(arguments);if(_1d86&&typeof _1d86==="object"){dojo.mixin(this,_1d86);}},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.Utility.File","FallbackFilePicker"));this.inherited(arguments);if(this.fileType!=File.fileType.ftLibraryDocs){this.widgetTemplate=new Simplate(eval(_1d82));}else{this.widgetTemplate=new Simplate(eval(_1d83));}},show:function(){if(this._postForm){this._postForm.reset();}this._dialog.show();if(this.fileType!=File.fileType.ftLibraryDocs){_1d7e.getKnownRelationships(this._receiveRelationships,this,true);}this._showing=true;},hide:function(){this._dialog.hide();},_onHide:function(){if(this._dialog._standby){this._dialog.hideLoading();}if(this.fileType!=File.fileType.ftLibraryDocs){for(var i=0;i<this._hiddenFields.length;i++){if(this._hiddenFields[i]){this[this._hiddenFields[i]].value="";}}}this.tb_Description.set("value","");this.tb_realFileName.set("value","");this._showing=false;},_receiveRelationships:function(rels){if(this.fileType==File.fileType.ftLibraryDocs){return;}for(var rel in rels){if(this["_"+rel]){this["_"+rel].value=rels[rel];}else{if(rel){this["_"+rel]=dojo.create("input",{"type":"hidden","name":rel,"value":rels[rel]},this._postForm);this._hiddenFields.push("_"+rel);}}}this._userId.value=_1d7d.getClientContextByKey("userID")||"";this._attachDate.value=_1d7d.Convert.toIsoStringFromDate(new Date());},_buildPostUrl:function(){var _1d87=[];_1d87.push(/https/i.test(window.location.protocol)?"https":"http");_1d87.push("://");_1d87.push(window.location.hostname);if(window.location.port&&window.location.port!==80){_1d87.push(":",window.location.port);}_1d87.push("/");_1d87.push(_1d7d.getVirtualDirectoryName());if(this.fileType!=File.fileType.ftLibraryDocs){_1d87.push("/slxdata.ashx/slx/system/-/attachments/file");}else{if(!Sage.Library||!Sage.Library.Manager||!Sage.Library.FileHandler){Sage.UI.Dialogs.showError(this.invalidContext);return null;}var _1d88=Sage.Library.FileHandler.findDirectoryId();var sUrl=_1d7b.substitute("/slxdata.ashx/slx/system/-/libraryDirectories('${0}')/documents/file",[_1d88]);_1d87.push(sUrl);}var url=_1d87.join("");return url;},_iframeLoad:function(e){if(this._iframe.contentDocument.URL&&typeof this._iframe.contentDocument.URL!=="undefined"){if(this.fileType!=File.fileType.ftLibraryDocs){if(this._iframe.contentDocument.URL.indexOf("attachments")>0){dojo.publish("/entity/attachment/create","");this.hide();}}else{if(this._iframe.contentDocument.URL.indexOf("/documents/file")>0){dojo.publish("/sage/library/manager/libraryDocuments/refresh",null);this.hide();}}}},_onNewFile:function(_1d89){if(_1d89.srcElement&&_1d89.srcElement.value.length>0){if(_1d89.srcElement.value){var _1d8a=_1d89.srcElement.value.replace(/^.*[\\\/]/,"");if(this.tb_Description.get("value")===""){var _1d8b=_1d8a.split("."),_1d8c="";if(_1d8b.length<=2){_1d8c=_1d8b[0];}else{for(var i=0;i<_1d8b.length-1;i++){if(i>0){_1d8c+=".";}_1d8c+=_1d8b[i];}}this.tb_Description.set("value",_1d8c);}this.tb_realFileName.set("value",_1d8a);}}},_okClick:function(){if(this.fileType===File.fileType.ftLibraryDocs){this._postForm.action=this._buildPostUrl();}this._postForm.submit();if(!this._dialog._standby){_1d7f.mixin(this._dialog,new _1d80());}this._dialog.showLoading();var self=this;window.setTimeout(function(){if(self._showing){if(self.fileType!=File.fileType.ftLibraryDocs){dojo.publish("/entity/attachment/create","");}else{dojo.publish("/sage/library/manager/libraryDocuments/refresh",null);}self.hide();}},5000);},_cancelClick:function(){this.hide();}});return _1d85;});},"Sage/QuickForms/Design/Editors/NonVisibleAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/NonVisibleAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/NonVisibleAdvancedPropertyEditor"],function(_1d8d,lang,_1d8e,_1d8f,_1d90,_1d91,_1d92,_1d93,_1d94,_1d95,_1d96){return _1d8d("Sage.QuickForms.Design.Editors.NonVisibleAdvancedPropertyEditor",[_1d8e,_1d94,_1d93],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,titleText:"Advanced",controlInfoText:"Control Info",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",constructor:function(){lang.mixin(this,_1d96);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));},_onControlTypeChange:function(value){},_onControlIdChange:function(value){}});});},"Sage/Format":function(){define("Sage/Format",["Sage/Utility","dojo/string"],function(_1d97,_1d98){Sage.Format={phone:function(val,index){if(!val){return "";}if(val.length!==10){return _1d97.htmlEncode(val);}return _1d98.substitute("(${0}) ${1}-${2}",[val.substring(0,3),val.substring(3,6),val.substring(6)]);},email:function(val,index){if(!val){return "";}var _1d99=val;if(this.icon&&this.icon!==""){_1d99=(this.icon===true||this.icon==="true")?"<img src=\"images/icons/Send_Write_email_16x16.png\" />":"<img src=\""+this.icon+"\" />";}return dojo.string.substitute("<a href=\"mailto:${0}\">${1}</a>",[val,_1d99]);},stringFromArray:function(_1d9a,arr){switch(arr.length){case 1:return String.format(_1d9a,arr[0]);case 2:return String.format(_1d9a,arr[0],arr[1]);case 3:return String.format(_1d9a,arr[0],arr[1],arr[2]);case 4:return String.format(_1d9a,arr[0],arr[1],arr[2],arr[3]);case 5:return String.format(_1d9a,arr[0],arr[1],arr[2],arr[3],arr[4]);case 6:return String.format(_1d9a,arr[0],arr[1],arr[2],arr[3],arr[4],arr[5]);case 7:return String.format(_1d9a,arr[0],arr[1],arr[2],arr[3],arr[4],arr[5],arr[6]);case 8:return String.format(_1d9a,arr[0],arr[1],arr[2],arr[3],arr[4],arr[5],arr[6],arr[7]);case 9:return String.format(_1d9a,arr[0],arr[1],arr[2],arr[3],arr[4],arr[5],arr[6],arr[7],arr[8]);case 10:return String.format(_1d9a,arr[0],arr[1],arr[2],arr[3],arr[4],arr[5],arr[6],arr[7],arr[8],arr[9]);default:return _1d9a;}},abbreviationFormatter:function(_1d9b){return function(value){if(!value||typeof (value)!="string"||value.length<=_1d9b){return value;}value=value.substring(0,_1d9b);var _1d9c=value.lastIndexOf(" ");if(_1d9c>0&&_1d9c>value.length*0.75){value=value.substring(0,_1d9c);}return value+"...";};},Address:{fullAddressFormatStrings:{"USA":"${0}\r\n${1}\r\n${2}\r\n${3}, ${4} ${5}\r\n${6}","Japan":"${0}\r\n${1}${2}\r\n${3}, ${4} ${5}\r\n${6}"},formatDefault:function(_1d9d){var _1d9e="",_1d9f="",_1da0="",cityF="",_1da1="",_1da2="",_1da3="";var _1da4="\r\n";for(var i=0;i<_1d9d.length;i++){switch(_1d9d[i].name){case "addr1":_1d9e=(_1d9d[i].value.length>0)?_1d9d[i].value:"";break;case "addr2":_1d9f=(_1d9d[i].value.length>0)?[_1da4,_1d9d[i].value].join(""):"";break;case "addr3":_1da0=(_1d9d[i].value.length>0)?[_1da4,_1d9d[i].value].join(""):"";break;case "city":cityF=(_1d9d[i].value.length>0)?[_1da4,_1d9d[i].value,","].join(""):"";break;case "state":var _1da5=(_1d9d[i-1].value.length>0)?"":_1da4;_1da1=(_1d9d[i].value.length>0)?[_1da5," ",_1d9d[i].value].join(""):"";break;case "postalCode":_1da2=(_1d9d[i].value.length>0)?[" ",_1d9d[i].value].join(""):"";break;case "country":_1da3=(_1d9d[i].value.length>0)?[_1da4,_1d9d[i].value].join(""):"";break;}}return [_1d9e,_1d9f,_1da0,cityF,_1da1,_1da2,_1da3].join("");},formatAddress:function(_1da6,_1da7){var addr1="",addr2="",addr3="",city="",state="",_1da8="",_1da9="";var _1daa="";for(var i=0;i<_1da6.length;i++){switch(_1da6[i].name){case "addr1":addr1=_1da6[i].value;break;case "addr2":addr2=_1da6[i].value;break;case "addr3":addr3=_1da6[i].value;break;case "city":city=_1da6[i].value;break;case "state":state=_1da6[i].value;break;case "postalCode":_1da8=_1da6[i].value;break;case "country":_1da9=_1da6[i].value;break;}}if(_1da7){switch(_1da9){case "USA":_1daa=this.formatDefault(_1da6);break;case "Japan":_1daa=dojo.string.substitute(this.fullAddressFormatStrings["Japan"],[addr1,addr2,addr3,city,state,_1da8,_1da9]);break;default:_1daa=this.formatDefault(_1da6);}}else{_1daa=this.formatDefault(_1da6);}return _1daa;}}};return Sage.Format;});},"Sage/Workspaces/main":function(){define("Sage/Workspaces/main",["Sage/Workspaces/Dialog"],function(){});},"Sage/MailMerge/nls/Loader":function(){define("Sage/MailMerge/nls/Loader",["Sage/LanguageList","dojo/_base/lang"],function(_1dab,lang){var nls={root:{decodeFailed:"The call to DecodeMailMergeJsonFromUrl() failed."}};return lang.mixin(_1dab,nls);});},"url:Sage/UI/Controls/templates/SingleSelectPickList.html":"<div>\r\n    <select id=\"${id}-Combo\" data-dojo-type=\"Sage.UI.ComboBox\" shouldPublishMarkDirty=\"false\" required=\"${required}\" dojoAttachPoint=\"comboBox\" dojoAttachEvent=\"onBlur: _onBlur,onChange:_onChange\">\r\n    </select>\r\n</div>\r\n","Sage/QuickForms/Design/Editors/PickListBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/PickListBasicPropertyEditor",["dojo/string","dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","dijit/form/ComboBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","Sage/Services/_ServiceMixin","dojo/i18n!./nls/PickListBasicPropertyEditor"],function(_1dac,_1dad,lang,_1dae,_1daf,_1db0,_1db1,_1db2,_1db3,_1db4,_1db5,_1db6,_1db7,_1db8,_1db9){return _1dad("Sage.QuickForms.Design.Editors.PickListBasicPropertyEditor",[_1dae,_1db6,_1db5,_1db8],{serviceMap:{"dataService":{type:"sdata",name:"system"}},widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_1db9);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"url:Sage/templates/ImageButton.html":"<span id=\"${id}\" class=\"dijit dijitReset dijitInline\" role=\"presentation\">\r\n<span class=\"dijitReset dijitInline dijitButtonNode imageButtonNode\" data-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\">\r\n        <span class=\"dijitReset dijitStretch dijitButtonContents\"\r\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\r\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\r\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\">\r\n                <img alt=\"\" src=\"\" data-dojo-attach-point=\"iconNode\"/>\r\n                <div class=\"dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}\" data-dojo-attach-point=\"iconNodeSprite\"></div>\r\n            </span\r\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\r\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\r\n\t\t\t\tid=\"${id}_label\"\r\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\r\n\t\t\t></span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\r\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\r/></span>\r\r\n","Sage/UI/SDataMainViewConfigurationProvider":function(){define("Sage/UI/SDataMainViewConfigurationProvider",["Sage/UI/ListPanel","Sage/_ConfigurationProvider","Sage/UI/TitleContentPane","Sage/UI/DetailPanel","Sage/UI/_DetailPanelConfigurationProvider","dojo/_base/declare"],function(_1dba,_1dbb,_1dbc,_1dbd,_1dbe,_1dbf){var _1dc0=_1dbf("Sage.UI.SDataMainViewConfigurationProvider",[_1dbb,Sage.UI._TitlePaneConfigProvider,_1dbe],{entityType:"",service:null,listPanelConfiguration:false,constructor:function(_1dc1){this.listPanelConfiguration=this.listPanelConfiguration||{list:{},detail:false,summary:false};this.titlePaneConfiguration=this.titlePaneConfiguration||{tabs:false,menu:false,titleFmtString:"${0}"};var eCtx=Sage.Services.getService("ClientEntityContext");if(eCtx){eCtx.setContext({EntityType:this.entityType});}var _1dc2=Sage.Services.getService("ClientGroupContext");if(_1dc2){dojo.connect(_1dc2,"onCurrentGroupChanged",this,"handleProfileChanged");}if(Sage.Services.hasService("MainViewConfigurationProvider")){Sage.Services.removeService("MainViewConfigurationProvider");}},handleProfileChanged:function(opt){this.onConfigurationChange(opt);},requestConfiguration:function(_1dc3){if(_1dc3.success&&this.listPanelConfiguration){_1dc3.success.call(_1dc3.scope||this,this.listPanelConfiguration,this);}}});return _1dc0;});},"Sage/UI/Controls/nls/DateTimePicker":function(){define("Sage/UI/Controls/nls/DateTimePicker",["Sage/LanguageList","dojo/_base/lang"],function(_1dc4,lang){var nls={root:{okText:"OK",cancelText:"Cancel",convertDescription:"Compare to another time zone.",convertText:"Compare",calculatorText:"Time Zone Calculator",timeZoneSourceText:"Current Time Zone",timeZoneDestText:"Comparison Time Zone",buttonToolTip:"Calendar",timeStartText:"Time",timeZoneCalculatorText:"Time Zone Calculator"}};return lang.mixin(_1dc4,nls);});},"Sage/UI/GroupMenuFmtScope":function(){define("Sage/UI/GroupMenuFmtScope",["dijit/form/CheckBox","dojo/_base/declare"],function(_1dc5,_1dc6){var scope=_1dc6("Sage.UI.GroupMenuFmtScope",null,{store:null,currentGroupId:"",constructor:function(args){this.store=args.store;this.currentGroupId="";var _1dc7=Sage.Services.getService("ClientGroupContext");if(_1dc7){dojo.connect(_1dc7,"onCurrentGroupChanged",this,"onCurrentGroupChanged");}},fmtSelectedCol:function(value,idx){if(this.currentGroupId===""){var _1dc8=Sage.Services.getService("ClientGroupContext");if(_1dc8){var _1dc9=_1dc8.getContext();this.currentGroupId=(_1dc9.CurrentGroupID==="LOOKUPRESULTS")?"p6UJ9A00024G":_1dc9.CurrentGroupID;}}return (value===this.currentGroupId)?["<span id=\"",value,"\" >&#10003;</span>"].join(""):["<span id=\"",value,"\" >&nbsp;</span>"].join("");},fmtHideCol:function(value,idx,cell){var grid=cell.grid,item=grid.getItem(idx),_1dca=new _1dc5();_1dca.set("checked",!value);_1dca.on("click",function(){var _1dcb=_1dca.get("checked");if(_1dcb){Sage.Groups.GroupManager.UnHideGroup(item["$key"],true);}else{Sage.Groups.GroupManager.HideGroup(item["$key"],true);}});return _1dca;},onCurrentGroupChanged:function(){this.currentGroupId="";var _1dcc=Sage.Services.getService("ClientGroupContext");var _1dcd=_1dcc.getContext();if(dijit.byId("GroupTabs").selectedChildWidget.id!==_1dcd.CurrentGroupID){dijit.byId("GroupTabs").selectChild(_1dcd.CurrentGroupID);}}});return scope;});},"Sage/UI/AttachmentList":function(){define("Sage/UI/AttachmentList",["dijit/_Widget","Sage/UI/EditableGrid","Sage/Data/SDataServiceRegistry","dojo/string","Sage/UI/Columns/DateTime","Sage/UI/Columns/SlxLink","Sage/Utility","Sage/Utility/File","Sage/Utility/File/Attachment","Sage/UI/Dialogs","Sage/Utility/File/AttachmentPropertiesEditForm","Sage/Utility/File/FallbackFilePicker","Sage/Utility/File/AddURLAttachment","Sage/Utility/File/GoogleDocPicker","Sage/UI/SLXPreviewGrid","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/Text","dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/AttachmentList"],function(_1dce,_1dcf,_1dd0,_1dd1,_1dd2,_1dd3,_1dd4,_1dd5,_1dd6,_1dd7,_1dd8,_1dd9,_1dda,_1ddb,_1ddc,_1ddd,_1dde,_1ddf,lang,_1de0){var _1de1=_1ddf("Sage.UI.AttachmentList",[_1dce],{placeHolder:"",conditionFmt:"",parentRelationshipName:"",workspace:"",tabId:"",fileInputBtn:false,_attachmentEditor:false,_newAttachmentsCache:[],subscriptions:[],constructor:function(){lang.mixin(this,_1de0);this.subscriptions=[];},startup:function(_1de2){this._checkDbType(_1de2);},_checkDbType:function(_1de3){var svc=Sage.Services.getService("SystemOptions");svc.get("DbType",function(val){this._buildGrid(val==="2"||val==="3");if(typeof _1de3=="function"){_1de3(this);}},function(){this._buildGrid(false);if(typeof _1de3=="function"){_1de3(this);}},this);},_buildGrid:function(_1de4){var _1de5=[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(value,_1de6,cel){var _1de7=[cel.grid.id,"-row",_1de6].join("");var id=(_1dd4.getModeId()==="insert")?_1de7:value;var _1de8=["<div id=",id," >",id,"</ div>"].join("");return _1de8;}},{field:"description",name:_1de0.attachmentText,format:function(_1de9,_1dea){if(!_1dea){return this.defaultValue;}if(_1dea["url"]){var href=_1dea["url"]||"";href=(href.indexOf("http")<0)?"http://"+href:href;return _1dd1.substitute("<a href=\"${0}\" target=\"_blank\" title=\"${1}\">${2}</a>",[href,_1dea["url"],_1dea["$descriptor"]]);}else{if(_1dea["fileExists"]){return _1dd1.substitute("<a href=\"javascript: Sage.Utility.File.Attachment.getAttachment('${0}');\" title=\"${1}\">${1}</a>",[_1dea["$key"],_1dea["$descriptor"]]);}else{return _1dea["$descriptor"];}}},filterConfig:{widgetType:_1dde},width:"300px"},{field:"user",name:_1de0.userText,format:function(_1deb,_1dec){if(!_1dec){return "";}var user=(_1dec.hasOwnProperty("user")&&typeof _1dec["user"]==="object")?_1dec.user:null;if(!user){return "";}return user["$descriptor"];},width:"120px"},{field:"attachDate",name:_1de0.modDateText,filterConfig:{widgetType:_1ddd,label:_1de0.dateRangeText},type:_1dd2,width:"175px"},{field:"fileSize",name:_1de0.sizeText,formatter:function(v){return _1dd5.formatFileSize(v);},width:"120px"},{field:"fileName",name:_1de0.extensionText,formatter:function(s,_1ded,cell){if(!s){return ".";}return s.substr(s.lastIndexOf("."));},sortable:false,width:"120px"}];var tools=[{id:this.id+"_btnBrowse",imageClass:"icon_plus_16x16",handler:this.browseForFiles,title:_1de0.addFileText,alternateText:_1de0.addFileText,appliedSecurity:"",scope:this},{id:this.id+"_btnAddUrl",imageClass:"icon_Internet_Service_Add_16x16",handler:this.addUrlAttachment,title:_1de0.addUrlText,appliedSecurity:"",alternateText:_1de0.addUrlText,scope:this},{id:this.id+"_btnEditAttachProps",imageClass:"icon_Edit_Item_16x16",handler:this.editSelectedAttachment,title:_1de0.editText,appliedSecurity:"",alternateText:_1de0.editText,scope:this},{id:this.id+"_btnDeleteAttachment",imageClass:"icon_Delete_16x16",title:_1de0.deleteText,handler:this.deleteSelectedAttachment,appliedSecurity:"",alternateText:_1de0.deleteText,scope:this},{id:this.id+"_btnHelp",imageClass:"icon_Help_16x16",handler:function(){_1dd4.openHelp("attachmentstab");},title:_1de0.helpText,alternateText:_1de0.helpText,appliedSecurity:""}];if(_1de4){var _1dee={field:"remoteStatus",name:"&nbsp;",width:"300px",format:function(_1def,_1df0){if(!_1df0){return this.defaultValue;}var _1df1=(_1df0["remoteStatus"])?_1df0["remoteStatus"]:(_1df0["fileExists"])?"Delivered":"Available";if(!_1df0["dataType"]){_1df1="X";}var link=_1dd1.substitute("<a href=\"javascript:Sage.Utility.File.Attachment.remoteRequestAttachment('${0}')\">${1}</a>",[_1df0["$key"],_1de0.request]);switch(_1df1){case "Available":return _1de0.available+" - "+link;case "Requested":return _1de0.requested;case "Delivered":return _1de0.delivered+" - "+link;default:return " ";}}};_1de5.splice(2,0,_1dee);}var _1df2=this.parentRelationshipName;var _1df3=_1dd4.getCurrentEntityId();if(_1df2==="activityId"){_1df3=_1df3.substr(0,12);}var _1df4={readOnly:true,columns:_1de5,tools:tools,storeOptions:{service:_1dd0.getSDataService("system"),resourceKind:"attachments",include:["$descriptors"],select:["description","user","attachDate","fileSize","fileName","url","fileExists","remoteStatus","dataType"],sort:[{attribute:"attachDate"}]},slxContext:{"workspace":this.workspace,tabId:this.tabId},contextualCondition:function(){return (_1df2||"'A'")+" eq '"+_1df3+"'";},id:this.id+"_attachments",rowsPerPage:20};var curId=_1dd4.getCurrentEntityId();if(!curId){_1df4.storeOptions["isInsertMode"]=true;}this.onBeforeCreateGrid(_1df4);var grid=new _1ddc.Grid(_1df4,this.placeHolder);grid.setSortColumn("attachDate");this._grid=grid._grid;this._previewGrid=grid;grid.startup();if(this.workspace){var _1df5=dijit.byId("tabContent");_1df5.resize();_1df5.resize();}var self=this;this.fileInputBtn=dojo.doc.createElement("INPUT");dojo.attr(this.fileInputBtn,{"type":"file","multiple":"true","accept":"*/*","class":"display-none",onchange:function(e){self.handleFiles(e);}});dojo.place(this.fileInputBtn,this.domNode,"last");this.subscriptions.push(dojo.subscribe("/entity/attachment/create",this,this.onNewAttachmentEntity));this.subscriptions.push(dojo.subscribe("/entity/attachment/update",this,this.onAttachmentUpdated));if(_1de4){this.subscriptions.push(dojo.subscribe("/entity/attachment/requested",this,this.onAttachmentUpdated));}dojo.connect(grid,"destroy",this,this.destroy);var _1df6=Sage.Services.getService("ClientEntityContext");var ctx=_1df6.getContext();this.contextEntityType=ctx.EntityType;},refresh:function(){if(this._grid){var _1df7=this._grid.get("mode");var curId=_1dd4.getCurrentEntityId();if((!curId&&_1df7!=="insert")||(curId&&_1df7==="insert")){this._grid.set("mode",(!curId)?"insert":"");}this._previewGrid.refresh();}},resetEntityContext:function(){var _1df8=this.parentRelationshipName;var _1df9=_1dd4.getCurrentEntityId();if(_1df8==="activityId"){_1df9=_1df9.substr(0,12);}var _1dfa=function(){return (_1df8||"'A'")+" eq '"+_1df9+"'";};this._previewGrid.resetContextualCondition(_1dfa);this.refresh();},destroy:function(){var len=this.subscriptions.length;for(var i=0;i<len;i++){dojo.unsubscribe(this.subscriptions.pop());}},handleFiles:function(e){var files=this.fileInputBtn.files;this._createAttachments(files);},handleGearsDesktopFileSelect:function(files){if(files.length>0){_1dd6.createAttachments(files);}},_createAttachments:function(files){if(files.length>0){_1dd6.createAttachments(files);}},onNewAttachmentEntity:function(_1dfb){var _1dfc=Sage.Services.getService("ClientEntityContext");var ctx=_1dfc.getContext();if(this.contextEntityType!==ctx.EntityType){return;}if(this._grid.mode==="insert"){if(!_1dfb){this._getFallBackPickerAttachment();return;}else{this._newAttachmentsCache.push(_1dfb);this._grid.store.addToCache(this,_1dfb,1);}}this._previewGrid.refresh();},_getFallBackPickerAttachment:function(){var _1dfd=dijit.byId("activityEditor");var _1dfe="activityId";if(!_1dfd||!_1dfd._tempIdForAttachments){_1dfd=dijit.byId("historyEditor")||{};_1dfe="historyId";}var _1dff=_1dfd._tempIdForAttachments;if(_1dff){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1dd0.getSDataService("system")).setResourceKind("attachments").setQueryArg("select",["description","userId","attachDate","fileSize","fileName","url","fileExists"].join(",")).setQueryArg("where",_1dfe+" eq '"+_1dff+"'").setStartIndex(1).setCount(50);req.read({success:this._receivedFallBackPickerAttachments,failure:function(){},scope:this});}},_receivedFallBackPickerAttachments:function(data){var _1e00=data.$resources;this.clearNewAttachments();for(var i=0;i<_1e00.length;i++){var att=_1e00[i];this._newAttachmentsCache.push(att);this._grid.store.addToCache(this,att,i);}this._previewGrid.refresh();},onAttachmentUpdated:function(_1e01){var _1e02=Sage.Services.getService("ClientEntityContext");var ctx=_1e02.getContext();if(this.contextEntityType!==ctx.EntityType){return;}if(this._grid.mode==="insert"){var _1e03=this._newAttachmentsCache;for(var i=0;i<_1e03.length;i++){if(_1e03[i].$key===_1e01.$key){lang.mixin(_1e03[i],_1e01);}}}this._previewGrid.refresh();},getNewAttachments:function(){return this._newAttachmentsCache;},clearNewAttachments:function(){this._newAttachmentsCache=[];this._grid.store.clearCache();},_editAttachmentInfo:function(_1e04){if(!this._attachmentEditor){this._attachmentEditor=new _1dd8();}this._attachmentEditor.set("attachmentId",_1e04);this._attachmentEditor.show();},browseForFiles:function(e){if(Sage.gears){var _1e05=Sage.gears.factory.create("beta.desktop");_1e05.openFiles(this.handleGearsDesktopFileSelect);}else{if(_1dd5.supportsHTML5File){this.fileInputBtn.click();}else{var fbfp=dijit.byId("fallbackFilePicker");if(!fbfp){fbfp=new _1dd9({id:"fallbackFilePicker"});}fbfp.show();}}},addUrlAttachment:function(e){var ed=dijit.byId("urlAttachmentEditor");if(!ed){ed=new _1dda({id:"urlAttachmentEditor"});}ed.set("attachmentId","");ed.show();},editSelectedAttachment:function(){var _1e06=this._grid.selection.getSelected();if(_1e06.length<1){return;}var item=_1e06[0];this._editAttachmentInfo(item["$key"]);},deleteSelectedAttachment:function(){this._grid.deleteSelected(function(){dojo.publish("/entity/attachment/delete");});},addGoogle:function(){var _1e07=dijit.byId("googleDocumentPicker");if(!_1e07){_1e07=new _1ddb({id:"googleDocumentPicker"});dojo.connect(_1e07,"onDocumentSelected",this,"_handleGoogleDocPicked");}_1e07.pick();},_handleGoogleDocPicked:function(title,url){var _1e08=new Sage.SData.Client.SDataTemplateResourceRequest(_1dd0.getSDataService("system"));_1e08.setResourceKind("attachments");_1e08.read({success:function(_1e09){_1e09.description=dojo.isArray(title)?title[0]:title;_1e09.url=dojo.isArray(url)?url[0]:url;this._addRelationshipsToGoogleDocAttachment(_1e09);},failure:function(err){},scope:this});},_addRelationshipsToGoogleDocAttachment:function(_1e0a){_1dd6.getKnownRelationships(function(rels){var _1e0b=lang.mixin(_1e0a,rels);_1e0b.user={"$key":_1dd4.getClientContextByKey("userID")||""};_1e0b.attachDate=_1dd4.Convert.toIsoStringFromDate(new Date());var _1e0c=new Sage.SData.Client.SDataSingleResourceRequest(_1dd0.getSDataService("system")).setResourceKind("attachments");_1e0c.create(_1e0b,{success:function(att){dojo.publish("/entity/attachment/create",att);},failure:function(err){},scope:this});},this);},onBeforeCreateGrid:function(_1e0d){},setToReadOnly:function(_1e0e){var _1e0f=[this.id+"_btnBrowse",this.id+"_btnAddUrl",this.id+"_btnEditAttachProps",this.id+"_btnDeleteAttachment"];this._bulkSetProperty(this,_1e0f,"disabled",_1e0e);},_bulkSetProperty:function(ui,_1e10,prop,val){for(var i=0;i<_1e10.length;i++){var ctrl=dijit.byId(_1e10[i]);if(ctrl){ctrl.set(prop,val);}}}});return _1de1;});},"Sage/MainView/SecurityMgr/SecurityManagerGroupContext":function(){define("Sage/MainView/SecurityMgr/SecurityManagerGroupContext",["Sage/Groups/GroupContextService","dojo/_base/declare"],function(_1e11,_1e12){var _1e13=_1e12("Sage.MainView.SecurityMgr.SecurityManagerGroupContext",_1e11,{_currentContext:{},constructor:function(){dojo.mixin(this._currentContext,this._emptyContext);},getContext:function(){if(this._currentContext.CurrentGroupID===null){this.requestContext();}return this._currentContext;},requestContext:function(){if(this._isRetrievingContext===true){return;}this.setContext("PROF00000001","Read/Write Default");},setContext:function(id,name){this._currentContext.CurrentGroupID=id;this._currentContext.CurrentName=name;this._isRetrievingContext=false;},setCurrentGroup:function(id,name){this.setContext(id,name);this.onCurrentGroupChanged({current:this._currentContext});}});return _1e13;});},"Sage/UI/Alarms/nls/AlarmPopup":function(){define("Sage/UI/Alarms/nls/AlarmPopup",["Sage/LanguageList","dojo/_base/lang"],function(_1e14,lang){var nls={root:{title:"Alerts",alarmsText:"Alarms",unconfirmedText:"Unconfirmed",deleteText:"Delete Selected",helpText:"Help",completeText:"Complete selected activities"}};return lang.mixin(_1e14,nls);});},"Sage/QuickForms/Design/CurrencyControlDesigner":function(){define("Sage/QuickForms/Design/CurrencyControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/CurrencyBasicPropertyEditor","./Editors/CurrencyAdvancedPropertyEditor","dojo/i18n!./nls/CurrencyControlDesigner"],function(_1e15,array,lang,_1e16,_1e17,_1e18,_1e19,_1e1a,_1e1b,_1e1c,_1e1d){return _1e15("Sage.QuickForms.Design.CurrencyControlDesigner",[_1e17,_1e18,_1e16,_1e19],{designSupport:{visible:true},editors:[_1e1b,_1e1c,_1e1a],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-currency",helpTopicName:"Currency_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXCurrency, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Currency",constructor:function(){lang.mixin(this,_1e1d);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_1e1e){return (_1e1e["ControlItemName"]=="Text");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getDecimalDigitsAttr:function(){return lang.getObject("DecimalDigits",false,this.entry);},_setDecimalDigitsAttr:function(value){lang.setObject("DecimalDigits",value,this.entry);},_getDisplayCurrencyCodeAttr:function(){return lang.getObject("DisplayCurrencyCode",false,this.entry);},_setDisplayCurrencyCodeAttr:function(value){lang.setObject("DisplayCurrencyCode",value,this.entry);},_getDisplayModeAttr:function(){return lang.getObject("DisplayMode",false,this.entry);},_setDisplayModeAttr:function(value){lang.setObject("DisplayMode",value,this.entry);},_getExchangeRateTypeAttr:function(){return lang.getObject("ExchangeRateType",false,this.entry);},_setExchangeRateTypeAttr:function(value){lang.setObject("ExchangeRateType",value,this.entry);},_getMaxLengthAttr:function(){return lang.getObject("MaxLength",false,this.entry);},_setMaxLengthAttr:function(value){lang.setObject("MaxLength",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},setupFor:function(_1e1f){this.inherited(arguments);this.set("decimalDigits",-1);this.set("currentCode",null);this.set("displayCurrencyCode",true);this.set("displayMode","AsControl");this.set("exchangeRateType","BaseRate");this.set("maxLength",_1e1f["data"].length||"");this.set("required",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Text",DataItemName:_1e1f.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_1e1f.propertyPath||"");},startup:function(){this.inherited(arguments);var _1e20=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_1e20&&_1e20["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg":function(){define("Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg",["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility","Sage/Utility/Activity","Sage/UI/Dialogs","dijit/form/RadioButton","dojo/_base/declare","dojo/i18n!./nls/OccurrenceOrSeriesQueryDlg"],function(_1e21,_1e22,_1e23,_1e24,_1e25,_1e26,_1e27,_1e28,_1e29,_1e2a,_1e2b,_1e2c,_1e2d,_1e2e,_1e2f){var _1e30=_1e2e("Sage.MainView.ActivityMgr.OccurrenceOrSeriesQueryDlg",[_1e21,_1e22],{activityId:"",activityMemberId:"",activity:false,store:false,mode:"edit",widgetsInTemplate:true,disableSeriesOption:"",widgetTemplate:new Simplate(["<div>","<div dojoType=\"dijit.Dialog\" title=\"\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onDlgHide\">","<div class=\"recur-activity-dialog\">","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\" >","<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.actDateText %}\" dojoAttachPoint=\"container_actDate\"></div>","<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.accountText %}\" dojoAttachPoint=\"container_account\"></div>","<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.contactText %}\" dojoAttachPoint=\"container_contact\"></div>","<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.opportunityText %}\" dojoAttachPoint=\"container_opportunity\"></div>","</div>","<div class=\"dijitContentPane\">&nbsp;</div>","<div class=\"dijitContentPane\">","<input type=\"radio\" dojoType=\"dijit.form.RadioButton\" name=\"editType\" id=\"{%= $.id %}_thisOccurrence\" checked=\"true\" dojoAttachPoint=\"_thisOccurRadio\" />&nbsp;","<label for=\"{%= $.id %}_thisOccurrence\">{%= ($.mode === \"edit\") ? $.editOneText : (($.mode === \"delete\")? $.deleteOneText : $.completeOneText) %}</label>","</div><div class=\"dijitContentPane\">","<input type=\"radio\" dojoType=\"dijit.form.RadioButton\" name=\"editType\" id=\"{%= $.id %}_Series\" dojoAttachPoint=\"_seriesRadio\" {%=$.disableSeriesOption%} />&nbsp;","<label for=\"{%= $.id %}_Series\">{%= ($.mode === \"edit\") ? $.editAllText : (($.mode === \"delete\")? $.deleteAllText : $.completeAllText) %}</label>","</div>","<div class=\"general-dialog-actions\">","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnContinue\" name=\"_btnContinue\" dojoAttachPoint=\"_btnContinue\" dojoAttachEvent=\"onClick:_continueClick\" >{%= $.continueText %}</div>","</div>","</div>","</div>","</div>"]),constructor:function(){_1e26.mixin(this,_1e2f);},show:function(){this._dialog.show();if(!this._dialog._standby){_1e26.mixin(this._dialog,new _1e25());if(!this.activity){this._dialog.showLoading();}}this._thisOccurRadio.set("checked",true);},_setModeAttr:function(mode){this.mode=mode;},_getModeAttr:function(){return this.mode;},hide:function(){this._dialog.hide();},_onDlgHide:function(){this.activity=false;this.activityId="";},_setActivityIdAttr:function(_1e31){this.activityId=_1e31;if(this.activityId&&this.activityId!==""){this._loadData();}},_getActivityIdAttr:function(){return this.activityId;},_setActivityMemebrIdAttr:function(_1e32){this.activityMemberId=_1e32;},_getActivityMemberIdAttr:function(){return this.activityMemberId;},_loadData:function(){if(this._dialog._standby){this._dialog.showLoading();}var _1e33=["Description","AccountName","ContactName","OpportunityName","StartDate","Type","Timeless","Recurring","RecurrenceState"];if(this.activityId.length>12){if(!this.store){this.store=new _1e27({include:[],select:_1e33,resourceKind:"activities",service:_1e28.getSDataService("system")});}if(this.activityId!==""){this.store.fetch({predicate:"\""+this.activityId+"\"",onComplete:this._receiveActivity,onError:this._failLoad,scope:this});}}else{var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1e28.getSDataService("system")).setResourceKind("activities").setQueryArg("select",_1e33.join(",")).setQueryArg("where","id eq '"+this.activityId+"'").setQueryArg("orderby","StartDate asc").setQueryArg("count","1");req.read({success:this._receiveActivities,failure:this._failLoad,scope:this});}},_receiveActivity:function(_1e34){if(this._dialog._standby){this._dialog.hideLoading();}this.activity=_1e34;this._bind();},_receiveActivities:function(data){if(this._dialog._standby){this._dialog.hideLoading();}var _1e35=data["$resources"];if(_1e35.length<1){this._failLoad();}this.activity=_1e35[0];this.activityId=this.activity["$key"];this._bind();},_bind:function(){var act=this.activity;var d=act.Description;if(d.length>30){d=d.substring(0,26)+"...";}this._dialog.set("title",_1e23.substitute(this.titleFmt,{type:_1e2b.getActivityTypeName(act.Type),description:d}));this.container_actDate.set("content",_1e2b.formatActivityStartDate(_1e2a.Convert.toDateFromString(act.StartDate,act.Timeless)));this.container_account.set("content",act.AccountName||"&nbsp;");this.container_contact.set("content",act.ContactName||"&nbsp;");this.container_opportunity.set("content",act.OpportunityName||"&nbsp;");},_failLoad:function(){if(this._dialog._standby){this._dialog.hideLoading();}_1e2c.showWarning(this.failedToLoadMsg);this._dialog.hide();},_continueClick:function(e){this.hide();if(this._thisOccurRadio.get("checked")){this.onSelectOccurrence(this.activityId,_1e2a.Convert.toDateFromString(this.activity.StartDate),this.activityMemberId);}else{this.onSelectSeries(this.activityId,this.activityMemberId);}},onSelectSeries:function(id){},onSelectOccurrence:function(id,_1e36){}});return _1e30;});},"Sage/QuickForms/Design/DataGridControlDesigner":function(){define("Sage/QuickForms/Design/DataGridControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/DataGridBasicPropertyEditor","./Editors/DataGridAdvancedPropertyEditor","dojo/i18n!./nls/DataGridControlDesigner"],function(_1e37,array,lang,_1e38,_1e39,_1e3a,_1e3b,_1e3c,_1e3d,_1e3e,_1e3f,_1e40,_1e41){return _1e37("Sage.QuickForms.Design.DataGridControlDesigner",[_1e3b,_1e3c,_1e3a,_1e3d],{designSupport:{visible:true},editors:[_1e3f,_1e40,_1e3e],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<table class=\"{%= $.fieldClass %}-table\" data-dojo-attach-point=\"tableNode\">","</table>","</div>"]),tableHeaderTemplate:new Simplate(["<th style=\"width:{%= $.widthStyle %}\">{%: $.ColumnHeading || $.Text %}</th>"]),fieldClass:"design-datagrid",helpTopicName:"Data_Grid_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFDataGrid, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Data Grid",emptyTableRowStringText:"No records match the selection criteria.",constructor:function(){lang.mixin(this,_1e41);},_getDataSourceAttr:function(){return lang.getObject("DataSource",false,this.entry);},_setDataSourceAttr:function(value){lang.setObject("DataSource",value,this.entry);},_getPageSizeAttr:function(){return lang.getObject("PageSize",false,this.entry);},_setPageSizeAttr:function(value){lang.setObject("PageSize",value,this.entry);},_getResizableColumnsAttr:function(){return lang.getObject("ResizableColumns",false,this.entry);},_setResizableColumnsAttr:function(value){lang.setObject("ResizableColumns",value,this.entry);},_getColumnsAttr:function(){return lang.getObject("Columns",false,this.entry);},_setColumnsAttr:function(value){lang.setObject("Columns",value,this.entry);},_getEmptyTableRowTextAttr:function(){return lang.getObject("EmptyTableRowText",false,this.entry);},_setEmptyTableRowTextAttr:function(value){lang.setObject("EmptyTableRowText",value,this.entry);},_getExpandableRowsAttr:function(){return lang.getObject("ExpandableRows",false,this.entry);},_setExpandableRowsAttr:function(value){lang.setObject("ExpandableRows",value,this.entry);},_getRenderVerticalAttr:function(){return lang.getObject("RenderVertical",false,this.entry);},_setRenderVerticalAttr:function(value){lang.setObject("RenderVertical",value,this.entry);},_getShowSortIconAttr:function(){return lang.getObject("ShowSortIcon",false,this.entry);},_setShowSortIconAttr:function(value){lang.setObject("ShowSortIcon",value,this.entry);},renderColumns:function(){var _1e42=this.get("columns"),row=_1e38.create("tr");for(var i=0;i<_1e42.length;i++){var _1e43=lang.clone(_1e42[i]);_1e43.widthStyle=_1e43.Width>0?_1e43.Width+"em":"auto";_1e38.place(this.tableHeaderTemplate.apply(_1e43,this),row,"last");}_1e38.place(row,this.tableNode,"only");},setupFor:function(_1e44){this.inherited(arguments);this.set("dataSource",null);this.set("pageSize",20);this.set("resizableColumns",true);this.set("emptyTableRowString",this.emptyTableRowStringText);this.set("expandableRows",false);this.set("renderVertical",false);this.set("showSortIcon",true);},startup:function(){this.inherited(arguments);this.renderColumns();this.applyVisibility();}});});},"Sage/QuickForms/Design/PickListControlDesigner":function(){define("Sage/QuickForms/Design/PickListControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/PickListBasicPropertyEditor","./Editors/PickListAdvancedPropertyEditor","dojo/i18n!./nls/PickListControlDesigner"],function(_1e45,array,lang,_1e46,_1e47,_1e48,_1e49,_1e4a,_1e4b,_1e4c,_1e4d){return _1e45("Sage.QuickForms.Design.PickListControlDesigner",[_1e47,_1e48,_1e46,_1e49],{designSupport:{visible:true},editors:[_1e4b,_1e4c,_1e4a],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"{%= $.fieldClass %}-icon\">...</div>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-picklist",helpTopicName:"Pick_List_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXPickList, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Pick List",constructor:function(){lang.mixin(this,_1e4d);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_1e4e){return (_1e4e["ControlItemName"]=="PickListValue");});},_getStorageModeAttr:function(){var mode=lang.getObject("StorageMode",false,this.entry);if(mode==="ID"){return "Id";}else{return mode;}},_setStorageModeAttr:function(value){lang.setObject("StorageMode",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},_getPickListNameAttr:function(){return lang.getObject("PickListName",false,this.entry);},_setPickListNameAttr:function(value){lang.setObject("PickListName",value,this.entry);},_getPickListIdAttr:function(){return lang.getObject("PickListId",false,this.entry);},_setPickListIdAttr:function(value){lang.setObject("PickListId",value,this.entry);},_getMustExistInListAttr:function(){return lang.getObject("MustExistInList",false,this.entry);},_setMustExistInListAttr:function(value){lang.setObject("MustExistInList",value,this.entry);},_getMaxLengthAttr:function(){return lang.getObject("MaxLength",false,this.entry);},_setMaxLengthAttr:function(value){lang.setObject("MaxLength",value,this.entry);},_getDisplayModeAttr:function(){return lang.getObject("DisplayMode",false,this.entry);},_setDisplayModeAttr:function(value){lang.setObject("DisplayMode",value,this.entry);},_getCanEditTextAttr:function(){return lang.getObject("CanEditText",false,this.entry);},_setCanEditTextAttr:function(value){lang.setObject("CanEditText",value,this.entry);},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getAllowMultiplesAttr:function(){return lang.getObject("AllowMultiples",false,this.entry);},_setAllowMultiplesAttr:function(value){lang.setObject("AllowMultiples",value,this.entry);},setupFor:function(_1e4f){this.inherited(arguments);this.set("allowMultiples",false);this.set("canEditText",true);this.set("displayMode","AsControl");this.set("maxLength",_1e4f["data"].length||-1);this.set("mustExistInList",false);this.set("required",false);this.set("storageMode","Id");this.set("pickListName",_1e4f["dataTypeData"]["PickListName"]);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"PickListValue",DataItemName:_1e4f.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_1e4f.propertyPath||"");},startup:function(){this.inherited(arguments);var _1e50=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_1e50&&_1e50["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/QuickForms/Design/Editors/FormBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/FormBasicPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dojo/data/ItemFileWriteStore","Sage/_Templated","./_PropertyEditor","dojo/i18n!./nls/FormBasicPropertyEditor"],function(_1e51,lang,_1e52,_1e53,_1e54,_1e55,_1e56,_1e57){return _1e51("Sage.QuickForms.Design.Editors.FormBasicPropertyEditor",[_1e52,_1e56,_1e55],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.generalText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.activeControlTooltipText %}\">","<label>{%= $.activeControlText %}</label>","<div data-dojo-type=\"dijit.form.ComboBox\" data-dojo-attach-point=\"_activeControl\" data-dojo-attach-event=\"onChange:_onActiveControlChange\" data-dojo-props=\"disabled:true\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.nameTooltipText %}\">","<label>{%= $.nameText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_name\" data-dojo-attach-event=\"onChange:_onNameChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.descriptionTooltipText %}\">","<label>{%= $.descriptionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_description\" data-dojo-attach-event=\"onChange:_onDescriptionChange\"></div>","</div>","</div>","</fieldset>"]),_activeControl:null,_description:null,_name:null,titleText:"Basic",generalText:"General",activeControlText:"Active Control:",activeControlTooltipText:"The control the user's cursor starts on.",descriptionText:"Description:",descriptionTooltipText:"Optional description of the purpose of the form.",nameText:"Name:",nameTooltipText:"Form identifier used by the system.",constructor:function(){lang.mixin(this,_1e57);},setup:function(){this.inherited(arguments);this.setActiveControlList();this._activeControl.set("value",this._designer.get("activeControl"));this._description.set("value",this._designer.get("description"));this._name.set("value",this._designer.get("name"));},setActiveControlList:function(){var _1e58=this._designer.get("controls"),_1e59=new _1e54({data:{identifier:"key",label:"name",items:[]}});for(var i=0;i<_1e58.length;i++){var _1e5a=_1e58[i];if(_1e5a.entry&&_1e5a.entry["ControlId"]){_1e59.newItem({key:"control_"+i,name:_1e5a.entry["ControlId"]});}}this._activeControl.set({store:_1e59,disabled:false});},_onActiveControlChange:function(value){if(this.isSuspended()){return;}this._designer.set("activeControl",value);},_onNameChange:function(value){},_onDescriptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("description",value);}});});},"Sage/QuickForms/Design/Editors/nls/OwnerBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/OwnerBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1e5b,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"}}};return lang.mixin(_1e5b,nls);});},"Sage/QuickForms/Design/DateTimePickerControlDesigner":function(){define("Sage/QuickForms/Design/DateTimePickerControlDesigner",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/DateTimePickerBasicPropertyEditor","./Editors/DateTimePickerAdvancedPropertyEditor","dojo/i18n!./nls/DateTimePickerControlDesigner"],function(_1e5c,array,lang,_1e5d,_1e5e,_1e5f,_1e60,_1e61,_1e62,_1e63,_1e64){return _1e5c("Sage.QuickForms.Design.DateTimePickerControlDesigner",[_1e5e,_1e5f,_1e5d,_1e60],{designSupport:{visible:true},editors:[_1e62,_1e63,_1e61],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"{%= $.fieldClass %}-icon\"></div>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-datetimepicker",helpTopicName:"DateTime_Picker_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFDateTimePicker, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"DateTime Picker",constructor:function(){lang.mixin(this,_1e64);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_1e65){return (_1e65["ControlItemName"]=="DateTimeValue");});},_getButtonToolTipAttr:function(){return lang.getObject("ButtonToolTip",false,this.entry);},_setButtonToolTipAttr:function(value){lang.setObject("ButtonToolTip",value,this.entry);},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getDisplayDateAttr:function(){return lang.getObject("DisplayDate",false,this.entry);},_setDisplayDateAttr:function(value){lang.setObject("DisplayDate",value,this.entry);},_getDisplayModeAttr:function(){return lang.getObject("DisplayMode",false,this.entry);},_setDisplayModeAttr:function(value){lang.setObject("DisplayMode",value,this.entry);},_getDisplayTimeAttr:function(){return lang.getObject("DisplayTime",false,this.entry);},_setDisplayTimeAttr:function(value){lang.setObject("DisplayTime",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},_getTimelessAttr:function(){return lang.getObject("Timeless",false,this.entry);},_setTimelessAttr:function(value){lang.setObject("Timeless",value,this.entry);},setupFor:function(_1e66){this.inherited(arguments);this.set("displayDate",true);this.set("displayTime",false);this.set("buttonToolTip","");this.set("displayMode","AsControl");this.set("required",false);this.set("timeless",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"DateTimeValue",DataItemName:_1e66.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_1e66.propertyPath||"");},startup:function(){this.inherited(arguments);var _1e67=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_1e67&&_1e67["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/UI/Filters/FilterManager":function(){define("Sage/UI/Filters/FilterManager",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/string","dojo/date","dojo/date/locale","Sage/Utility","Sage/Utility/Filters"],function(lang,_1e68,array,_1e69,_1e6a,_1e6b,_1e6c,_1e6d){var _1e6e=_1e68("Sage.UI.Filters.FilterManager",null,{_connects:null,_subscribes:null,_owner:null,_timeout:null,_applied:null,_definitionSet:null,refreshBufferDelay:500,filterGroup:"default",owner:null,nullName:"SLX_NULL",emptyName:"SLX_EMPTY",constructor:function(_1e6f){lang.mixin(this,_1e6f);this._applied={};this._definitionSet={};var _1e70=_1e6c.getValue(window,"Sage.UI.DataStore.Filters"),_1e71=null,_1e72=null;if(_1e70&&_1e70[this.filterGroup]){_1e71=_1e70[this.filterGroup].applied;_1e72=_1e70[this.filterGroup].definitionSet;if(_1e71){this._applied=_1e71;}if(_1e72){this._definitionSet=_1e72;}}this._connects=[];this._subscribes=[];this._subscribes.push(dojo.subscribe(_1e69.substitute("/ui/filters/${0}/change",[this.filterGroup]),this,this._onChange),dojo.subscribe(_1e69.substitute("/ui/filters/${0}/clear",[this.filterGroup]),this,this._onClear),dojo.subscribe(_1e69.substitute("/ui/filters/${0}/apply",[this.filterGroup]),this,this._onApply));},destroy:function(){array.forEach(this._connects,function(_1e73){_1e73.remove();});array.forEach(this._subscribes,function(_1e74){_1e74.remove();});this.uninitialize();},uninitialize:function(){},"set":function(name,value){this["_"+name]=value;},"get":function(name){return this["_"+name];},_onClear:function(_1e75,_1e76){var key=_1e75&&_1e75.$key;if(key&&this._applied[key]){delete this._applied[key];}else{this._applied={};}},_onApply:function(_1e77,_1e78,_1e79){this._applied=_1e77||{};this._definitionSet=_1e78||{};},_onChange:function(_1e7a,name,value,_1e7b){if(this._timeout){clearTimeout(this._timeout);}var key=_1e7a&&_1e7a.$key,_1e7c=null;if(key){this._definitionSet[key]=_1e7a;this._applied[key]=this._applied[key]||{};_1e7c=this._applied[key];if(value!==false){_1e7c[name]=value;}else{delete _1e7c[name];}}this._timeout=setTimeout(lang.hitch(this,this._onTimeout),this.refreshBufferDelay);},_onTimeout:function(){dojo.publish(_1e69.substitute("/ui/filters/${0}/refresh",[this.filterGroup]),[this._applied,this._definitionSet,this]);},_escapeString:function(_1e7d,quote){quote=quote||"\"";return _1e7d.replace(quote,quote+quote);},_transformValue:function(type,value,quote){if(value){quote=quote||"\"";if(type==="string"||type==="key"||type==="enum"||type==="boolean"){return quote+this._escapeString(value,quote)+quote;}if(type==="date"){quote="@";return quote+this._transformDate(value)+quote;}}return value;},_transformDate:function(value){var today=new Date(Date.now()),_1e7e;if(this.specialDates.hasOwnProperty(value)){return _1e6c.Convert.toIsoStringFromDate(this.specialDates[value](today));}else{_1e7e=_1e6b.parse(value);if(_1e7e){return _1e6c.Convert.toIsoStringFromDate(_1e7e);}else{return value;}}},specialDates:{":today":function(today){today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":todaystart":function(today){today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":todayend":function(today){today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":yesterday":function(today){today.setDate(today.getDate()-1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":yesterdaystart":function(today){today.setDate(today.getDate()-1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":yesterdayend":function(today){today.setDate(today.getDate()-1);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":tomorrow":function(today){today.setDate(today.getDate()+1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":tomorrowstart":function(today){today.setDate(today.getDate()+1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":tomorrowend":function(today){today.setDate(today.getDate()+1);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thisweekstart":function(today){today.setDate(today.getDate()-today.getDay());today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thisweekend":function(today){today.setDate(today.getDate()+(6-today.getDay()));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thismonthstart":function(today){today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thismonthend":function(today){today.setDate(_1e6a.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thisyearstart":function(today){today.setDate(1);today.setMonth(0);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thisyearend":function(today){today.setDate(31);today.setMonth(11);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thisquarterstart":function(today){var month=today.getMonth(),mod=month%3;today.setMonth(month-mod);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thisquarterend":function(today){var month=today.getMonth(),mod=2-(month%3);today.setMonth(month+mod);today.setDate(_1e6a.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":nextweekstart":function(today){today.setDate(today.getDate()+(7-today.getDay()));today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextweekend":function(today){today.setDate(today.getDate()+(7-today.getDay())+6);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":nextmonthstart":function(today){today.setMonth(today.getMonth()+1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextmonthend":function(today){today.setMonth(today.getMonth()+1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextyearstart":function(today){today.setFullYear(today.getFullYear()+1);today.setMonth(0);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextyearend":function(today){today.setFullYear(today.getFullYear()+1);today.setMonth(11);today.setDate(31);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":nextquarterstart":function(today){var month=today.getMonth(),mod=2-(month%3);today.setMonth(month+mod+1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextquarterend":function(today){var month=today.getMonth(),mod=2-(month%3);today.setMonth(month+mod+3);today.setDate(_1e6a.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastweekstart":function(today){today.setDate(today.getDate()-today.getDay()-7);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastweekend":function(today){today.setDate(today.getDate()-today.getDay()-1);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastmonthstart":function(today){today.setMonth(today.getMonth()-1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastmonthend":function(today){today.setMonth(today.getMonth()-1);today.setDate(_1e6a.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastyearstart":function(today){today.setFullYear(today.getFullYear()-1);today.setMonth(0);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastyearend":function(today){today.setFullYear(today.getFullYear()-1);today.setMonth(11);today.setDate(31);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastquarterstart":function(today){var month=today.getMonth(),mod=month%3;today.setMonth(month-mod-3);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastquarterend":function(today){var month=today.getMonth(),mod=month%3;today.setMonth(month-mod-1);today.setDate(_1e6a.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;}},resolveProperty:function(_1e7f,_1e80){if(this._owner&&this._owner.resolveProperty){return this._owner.resolveProperty(_1e7f,_1e80);}return _1e7f;},resolveTimelessProperty:function(_1e81){if(this._owner){if(this._owner._configuration){if(this._owner._configuration.getTimelessProperty){return this._owner._configuration.getTimelessProperty(_1e81);}}}return false;},resolveDataType:function(_1e82){return _1e6d.resolveDataType(_1e82);},createRangeFragment:function(_1e83,_1e84,_1e85,_1e86){var _1e87=this.resolveDataType(_1e83.propertyDataTypeId),_1e88=this.resolveProperty(_1e84,_1e86),_1e89=_1e83.details.rangeFilter,_1e8a=false,_1e8b=[],_1e8c=[],_1e8d="and",sub=_1e69.substitute,name=null,range=null,_1e8e=null,_1e8f=function(p){return p;},_1e90=[],_1e91=_1e89.characters>0?_1e89.characters:1;if(_1e87==="string"){_1e8f=function(p){return sub("substring(${0}, 1, ${1})",[p,_1e91]);};}for(name in _1e85){if(_1e85.hasOwnProperty(name)){range=_1e85[name];if(typeof range==="undefined"||range===null){continue;}if(_1e87==="date"){_1e8a=this.resolveTimelessProperty(_1e88);}if(_1e8a){var _1e92=new Date(Date.now());var _1e93=new Date(Date.now());var quote="@";var _1e94="";var _1e95="";if(range.lower===range.upper){_1e8b.push(this._transformValue(_1e87,range.lower));}else{if(this.specialDates.hasOwnProperty(range.lower)){_1e92=this.specialDates[range.lower](_1e92);_1e92.setHours(0);_1e92.setMinutes(0);_1e92.setSeconds(0);_1e94=quote+_1e6c.Convert.toIsoStringFromDateNonUTC(_1e92)+quote;}if(this.specialDates.hasOwnProperty(range.upper)){_1e93=this.specialDates[range.upper](_1e93);_1e93.setHours(23);_1e93.setMinutes(59);_1e93.setSeconds(59);_1e95=quote+_1e6c.Convert.toIsoStringFromDateNonUTC(_1e93)+quote;}_1e8e=[_1e8a,_1e8f(_1e88),this._transformValue(_1e87,range.lower),this._transformValue(_1e87,range.upper),_1e94,_1e95];if(range.lower===null){_1e8c.push(sub("((${0} eq false and ${1} le ${3}) or (${0} eq true and ${1} le ${4}))",_1e8e));}else{if(range.upper===null){_1e8c.push(sub("((${0} eq false and ${1} ge ${2}) or (${0} eq true and ${1} le ${5}))",_1e8e));}else{_1e8c.push(sub("((${0} eq false and ${1} between ${2} and ${3}) or (${0} eq true and ${1} between ${4} and ${5}))",_1e8e));}}_1e8d="or";}}else{if(range.lower===range.upper){if(range.lower!==null&&typeof range.lower!=="undefined"){_1e8b.push(this._transformValue(_1e87,range.lower));}}else{_1e8e=[_1e8f(_1e88),this._transformValue(_1e87,range.lower),this._transformValue(_1e87,range.upper)];if(range.lower===null){_1e8c.push(sub("${0} le ${2}",_1e8e));}else{if(range.upper===null){_1e8c.push(sub("${0} ge ${1}",_1e8e));}else{_1e8c.push(sub("${0} between ${1} and ${2}",_1e8e));}}_1e8d="or";}}}}if(_1e8b.length>0){if(_1e87==="string"){array.forEach(_1e8b,function(value){if(value&&value.length>2){_1e90.push(value.substring(0,_1e91+1)+"\"");}});_1e8b=_1e90;}_1e8c.push(sub("${0} in (${1})",[_1e8f(_1e88),_1e8b.join(",")]));}return _1e8c.length>0?"("+_1e8c.join(") "+_1e8d+" (")+")":false;},createDistinctFragment:function(_1e96,_1e97,_1e98,_1e99){var _1e9a=this.resolveDataType(_1e96.propertyDataTypeId),sub=_1e69.substitute,name=null,_1e9b=[],_1e9c=null,_1e9d=false,_1e9e=this.resolveProperty(_1e97,_1e99);for(name in _1e98){if(_1e98.hasOwnProperty(name)){if(name===this.nullName){_1e9c=sub("${0} eq null",[_1e9e]);}else{if(name===this.emptyName){_1e9b.push("''");}else{_1e9b.push(this._transformValue(_1e9a,_1e98[name]));}}}}if(_1e9b.length>0){_1e9d=sub("${0} in (${1})",[_1e9e,_1e9b.join(",")]);}if(_1e9c&&_1e9b.length>0){_1e9d=sub("(${0} or ${1})",[_1e9d,_1e9c]);}else{if(_1e9c){_1e9d=_1e9c;}}return _1e9d;},createLookupFragment:function(_1e9f,_1ea0,_1ea1,_1ea2){var _1ea3=this.resolveDataType(_1e9f.propertyDataTypeId),_1ea4,value,prop=this.resolveProperty(_1ea0,_1ea2),_1ea5="",_1ea6=[],name;for(name in _1ea1){if(_1ea1.hasOwnProperty(name)){_1ea6.push(_1ea1[name]);}}if(_1ea6.length>0){_1ea4=_1ea6[0].operator;value=_1ea6[0].value;}if(value===""){return false;}if(typeof value==="string"){prop="upper("+prop+")";value=value.toUpperCase();}_1ea5=_1e69.substitute("${0} ${1}",[prop,this._transformLookupOperator(_1ea4,value,_1ea3)]);return _1ea5;},_transformLookupOperator:function(_1ea7,value,_1ea8){var _1ea9="",lhs,rhs="${0}";switch(_1ea7){case "Equal":lhs="eq";break;case "NotEqual":lhs="ne";break;case "LessThan":lhs="lt";break;case "LessThanEqual":lhs="le";break;case "GreaterThan":lhs="gt";break;case "GreaterThanEqual":lhs="ge";break;case "StartsWith":lhs="like";rhs="${0}%";break;case "EndsWith":lhs="like";rhs="%${0}";break;case "Contains":lhs="like";rhs="%${0}%";break;default:lhs="eq";break;}if(_1ea8==="string"||_1ea8==="key"){rhs="\""+rhs+"\"";}rhs=_1e69.substitute(rhs,[value]);return _1e69.substitute("${0} ${1}",[lhs,rhs]);},createQuery:function(){var _1eaa=[],key,_1eab,_1eac,_1ead,_1eae,_1eaf,_1eb0;for(key in this._applied){if(this._applied.hasOwnProperty(key)){_1eab=this._applied[key];_1eac=this._definitionSet[key];_1ead=_1eac.propertyName;_1eae=_1eac.details;_1eb0=_1eac.dataPath;if(_1eae.rangeFilter){_1eaf=this.createRangeFragment(_1eac,_1ead,_1eab,_1eb0);}else{if(_1eae.distinctFilter){_1eaf=this.createDistinctFragment(_1eac,_1ead,_1eab,_1eb0);}else{if(_1eae.userLookupFilter){_1eaf=this.createLookupFragment(_1eac,_1ead,_1eab,_1eb0);}}}if(_1eaf){_1eaa.push(_1eaf);}}}return _1eaa.length>0?"("+_1eaa.join(") and (")+")":false;},createValueSet:function(){var _1eb1=[],_1eb2,_1eb3,_1eb4,_1eb5,_1eb6,name,key;for(key in this._applied){if(this._applied.hasOwnProperty(key)){_1eb2=this._applied[key];_1eb3=this._definitionSet[key];_1eb4=_1eb3.details;_1eb5=(_1eb4.rangeFilter&&"rangeFilter")||(_1eb4.distinctFilter&&"distinctFilter");_1eb6={"filterId":_1eb3.$key,"filterName":_1eb3.filterName,"appliedValues":[]};switch(_1eb5){case "rangeFilter":for(name in _1eb2){if(_1eb2.hasOwnProperty(name)){_1eb6.appliedValues.push(_1eb2[name]&&_1eb2[name].rangeId);}}break;case "distinctFilter":for(name in _1eb2){if(_1eb2.hasOwnProperty(name)){_1eb6.appliedValues.push(name);}}break;default:break;}_1eb1.push(_1eb6);}}return _1eb1;}});return _1e6e;});},"Sage/UI/Controls/Currency":function(){define("Sage/UI/Controls/Currency",["dojo/_base/html","dojox/grid/DataGrid","dijit/_Widget","Sage/_Templated","dijit/form/CurrencyTextBox","Sage/UI/Controls/CurrencyTextBox","dojo/currency","dojo/string","dojo/_base/declare"],function(html,_1eb7,_1eb8,_1eb9,_1eba,_1ebb,_1ebc,_1ebd,_1ebe){dojo.mixin(dijit.form.ValidationTextBox.prototype.attributeMap,{slxchangehook:"focusNode"});var _1ebf=_1ebe("Sage.UI.Controls.Currency",[_1eb8,_1eb9],{displayModes:{"AsHyperlink":0,"AsControl":1,"AsText":2},modeTemplates:{"AsHyperlink":new Simplate(["<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\">{%= $.value %}</div>"]),"AsControl":new Simplate(["<input  data-dojo-type=\"Sage.UI.Controls.CurrencyTextBox\" ","constraints=\"{ {%= $.constraintsToString() %} }\" ","id=\"{%= $.id %}_CurrencyTextBox\" ","style=\"width:inherit;\"","textAlign=\"{%= $.textAlign %}\""," name=\"{%= $.name %}\" type=\"text\" "," value=\"{%= $.value %}\" dojoAttachPoint=\"focusNode\" ","{% if ( $.multiCurrency ) { %} "," class=\"ISOSpace\" ","{% } %}"," hotKey=\"{%= $.hotKey %}\" ","{% if($.disabled === \"disabled\") { %} "," disabled=\"disabled\" ","{% } %}","{% if($.readonly === \"readonly\") { %} "," readonly=\"readonly\" ","{% } %}"," maxlength=\"{%= $.maxLength %}\" "," required=\"{%= $.required %}\">","{% if ( $.multiCurrency ) { %} ","<label id=\"{%= $.id %}_ISOLabel\" ","dojoAttachPoint=\"currencyCodeLabel\" ","for=\"${0}_CurrencyTextbox\" ","class=\"ISOLabel\" ","wairole=\"presentation\" ","readonly=\"true\" ","tabindex=\"-1\" ","class=\"dijitInputInner\" ","role=\"presentation\">","</label> ","{% } %}"]),"AsText":new Simplate(["<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\">{%= $.formattedText() %}</div>"])},widgetTemplate:new Simplate(["<div style=\"width:inherit;\" slxcompositecontrol=\"true\" id=\"{%= $.id %}\" >","{%= $.modeTemplates[$.displayMode].apply($) %}","</div>"]),postMixInProperties:function(){this.currentCultureSymbol=Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol;if(this.multiCurrency){this.constraints["currency"]=null;}else{if(this.constraints["currency"]===""||this.constraints["currency"]===null){this.constraints["currency"]=this.currentCode;}}},postCreate:function(){if(this.multiCurrency){dijit.byId(this.id+"_CurrencyTextBox").domNode.setAttribute("style","width:100% !important;");this.currencyCodeLabel.innerHTML=this.currentCode;}this.inherited(arguments);},value:0,currentCultureSymbol:"",currentCode:"USD",exchangeRate:1,multiCurrency:false,displayCurrencyCode:true,autoPostBack:false,width:15,maxLength:128,required:false,style:"",enabled:true,readonly:"",disabled:"",visible:true,hotKey:"",tabIndex:0,displayMode:"AsControl",widgetsInTemplate:true,styles:"text-align: right;",name:"",constraints:null,id:"currencyControl",constraintsToString:function(){var tmp=[];for(var prop in this.constraints){if(this.constraints.hasOwnProperty(prop)){var value=this.constraints[prop];if(typeof value==="string"){value="'"+value+"'";}tmp.push(prop+":"+value);}}var _1ec0=tmp.join(",");return _1ec0;},constructor:function(_1ec1){this.inherited(arguments);},destroy:function(){if(this.focusNode){this.focusNode.destroy();}this.inherited(arguments);}});return _1ebf;});},"Sage/Utility/File/DescriptionsForm":function(){define("Sage/Utility/File/DescriptionsForm",["Sage/Utility/File","dijit/_Widget","Sage/_Templated","dojo/_base/lang","dojo/string","dijit/Dialog","dojo/i18n","dojo/i18n!./nls/DescriptionsForm","dojo/_base/declare"],function(File,_1ec2,_1ec3,dLang,_1ec4,_1ec5,i18n,_1ec6,_1ec7){var _1ec8=_1ec7("Sage.Utility.File.DescriptionsForm",[_1ec2,_1ec3],{fileType:File.fileType.ftAttachment,titleFmt:"Add Attachment(s) for ${0}",titleLibraryDoc:"Add Library Document(s)",fileNameText:"File name and size: ",descText:"Description:",okText:"OK",cancelText:"Cancel",entityDesc:"",_formParts:[],files:[],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div>","<div dojoType=\"dijit.Dialog\" id=\"dlgFileDescriptions\" title=\"\" dojoAttachPoint=\"_dialog\">","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"3\" style=\"width:580px\">","<div dojoType=\"dijit.layout.ContentPane\" label=\"\" style=\"width:212px;\"><label>{%= $.fileNameText %}</label></div>","<div dojoType=\"dijit.layout.ContentPane\" label=\"\" style=\"width:250px;\"><label>{%= $.descText %}</label></div>","</div>","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"5\" dojoAttachPoint=\"contentNode\" style=\"min-height:150px;width:580px;max-height:250px;overflow:auto\" >","</div>","<div class=\"general-dialog-actions\">","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnOK\" name=\"_btnOK\" dojoAttachPoint=\"_btnOK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnCancel\" name=\"_btnCancel\" dojoAttachPoint=\"_btnCancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>","</div>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,_1ec6);this.inherited(arguments);},show:function(){if(this.fileType!==File.fileType.ftLibraryDocs){this._dialog.set("title",_1ec4.substitute(this.titleFmt,[this.entityDesc]));}else{this._dialog.set("title",this.titleLibraryDoc);}this._dialog.show();this._addFormParts();},_setEntityDescAttr:function(desc){this.entityDesc=desc;},_getEntityDescAttr:function(){return this.entityDesc;},_setFilesAttr:function(files){this.files=files;},_getFilesAttr:function(){return this.files;},_addFormParts:function(){for(var i=0;i<this.files.length;i++){var file=this.files[i];var _1ec9=0;if(file.size===0){_1ec9=0;}else{_1ec9=file.size||file.blob.length;}if(_1ec9===0){_1ec9+="0 Bytes";}else{if(_1ec9){if(_1ec9>1024){if(_1ec9>1048576){_1ec9=Math.round(_1ec9/1048576)+" MB";}else{_1ec9=Math.round(_1ec9/1024)+" KB";}}else{_1ec9+=" Bytes";}}}var fnFld=new dijit.form.TextBox({id:"filename_"+i,value:file.name+"  ("+_1ec9+")",style:"min-width:250px;margin:0 0 5px 15px;",disabled:true});var _1eca=new dijit.form.TextBox({id:"desc_"+i,value:this.getDefaultDescription(file.name),style:"min-width:250px;margin:0 0 5px 20px;",maxLength:128,relFileName:file.name});this._formParts.push(fnFld);this._formParts.push(_1eca);this.contentNode.addChild(fnFld);this.contentNode.addChild(_1eca);}},_clearForm:function(){var len=this._formParts.length;for(var i=len-1;i>-1;i--){var elem=this._formParts[i];this.contentNode.removeChild(elem);elem.destroyRecursive(false);}this._formParts=[];},_okClick:function(){var _1ecb=[];for(var i=0;i<this._formParts.length;i++){var elem=this._formParts[i];if(elem.params["relFileName"]){_1ecb.push({description:elem.get("value")||this.getDefaultDescription(elem.params["relFileName"]),fileName:elem.params["relFileName"]});}}this._clearForm();this.onDescriptionsEntered(this.files,_1ecb);this._dialog.hide();},_cancelClick:function(){this._clearForm();this._dialog.hide();},getDefaultDescription:function(_1ecc){return _1ecc.replace(/\.[\w]*/,"");},onDescriptionsEntered:function(files,_1ecd){}});return _1ec8;});},"Sage/QuickForms/Design/nls/TextBoxControlDesigner":function(){define("Sage/QuickForms/Design/nls/TextBoxControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_1ece,lang){var nls={root:{displayNameText:"TextBox"}};return lang.mixin(_1ece,nls);});},"Sage/UI/Dashboard/DashboardPage":function(){define("Sage/UI/Dashboard/DashboardPage",["dojo/i18n","Sage/UI/GridContainer","Sage/UI/Dialogs","Sage/UI/Dashboard/DashboardWidgetCell","Sage/Utility","dijit/form/ValidationTextBox","Sage/UI/Controls/_DialogHelpIconMixin","dojo/dom-construct","Sage/Array","dojo/i18n!./nls/DashboardTabController","dojo/i18n!./nls/WidgetDefinition","dojo/_base/declare"],function(i18n,_1ecf,_1ed0,_1ed1,_1ed2,_1ed3,_1ed4,_1ed5,_1ed6,_1ed7,_1ed8,_1ed9){var _1eda=_1ed9("Sage.UI.Persistance.DashboardColumn",null,{constructor:function(_1edb){dojo.safeMixin(this,_1edb);}});var _1edc=_1ed9("Sage.UI.Dashboard.DashboardPage",_1ecf,{_nwTableOuter:new Simplate(["<div id=\"nwTable\" class=\"new-widget-table\"><div style=\"height:400px; overflow-y:auto;\"><table width=\"100%\">{%= $.content %}</table></div>","<div align=\"right\"><button data-dojo-type=\"dijit.form.Button\""," type=\"button\" id=\"btnAddContentClose\" class=\"ok-button\" title=\"{%= $.buttonCancel %}\" align=\"right\" style=\"margin-top:10px;\">{%= $.buttonCancel %}</button>","</div></div>"]),_nwTableInner:new Simplate(["<tr><td><b>{%= $.key %}</b><br />{%= $.value %}</td></tr>","<tr><td><button data-dojo-type=\"dijit.form.Button\"","type=\"button\" id=\"{%= $.btnId %}\" class=\"btn-add-new\">{%= $.addText %}</button></td></tr>","<tr><td><hr /></td></tr>"]),style:"z-index:500;",_eoTable:new Simplate(["<div id=\"eoTable\" class=\"edit-options-table\"><table width=\"100%\">","<tr><td>{%= $.titleText %}</td><td><div data-dojo-type=\"dijit.form.ValidationTextBox\" id=\"txtEO\""," regExp=\"[^-<>:;@#$!%^&*()+=`[{},/?.~]*\" value=\"{%= $.title %}\" invalidMessage=\"{%= $.invalidMessage %}\"></div></td></tr>","<tr><td colspan=2>{%= $.chooseTemplateText %}</td></tr>","<tr><td><input type=\"radio\" id=\"rdoEO0\" data-dojo-type=\"dijit.form.RadioButton\""," value=\"one_column\" name=\"radioEO\" /></td><td><label for=\"rdoEO0\">{%= $.oneColumnText %}","</label></td></tr>","<tr><td><input type=\"radio\" id=\"rdoEO1\" data-dojo-type=\"dijit.form.RadioButton\""," value=\"two_even\" name=\"radioEO\" /></td><td><label for=\"rdoEO1\">{%= $.twoColumnText %}","</label></td></tr>","<tr><td><input type=\"radio\" id=\"rdoEO2\" data-dojo-type=\"dijit.form.RadioButton\""," value=\"fat_left\" name=\"radioEO\" /></td><td><label for=\"rdoEO2\">{%= $.fatLeftText %}","</label></td></tr>","<tr><td><input type=\"radio\" id=\"rdoEO3\" data-dojo-type=\"dijit.form.RadioButton\""," value=\"fat_right\" name=\"radioEO\" /></td><td><label for=\"rdoEO3\">{%= $.fatRightText %}","</label></td></tr>","<tr><td><input type=\"checkbox\" id=\"chkMD\" data-dojo-type=\"dijit.form.CheckBox\""," value=\"make_def\"/></td><td><label for=\"chkMD\">{%= $.makeDefaultText %}</label></td></tr>","<tr><td colspan=2 align=\"right\"><button data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"btnEOK\" class=\"ok-button\" title=\"{%= $.buttonOk %}\" >{%= $.buttonOk %}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"btnEOCancel\" class=\"cancel-button\" title=\"{%= $.buttonCancel %}\">{%= $.buttonCancel %}</button>","</td></tr></table></div>"]),_raisePermissionInvalidMessage:function(){var _1edd=this;var fn=function(ans){if(ans){var db=dijit.byId("Dashboard");db._copyPage(_1edd);}};var opts={title:this.resources.errorText,query:[this.resources.permissionErrorText,this.resources.permissionErrorPerformCopyText],yesText:this.resources.yesText,noText:this.resources.noText,callbackFn:fn,style:{width:"350px"},align:"right"};Sage.UI.Dialogs.raiseQueryDialogExt(opts);},postCreate:function(){this.inherited(arguments);this.subscribe("/ui/dashboard/pageSave",function(page){if(typeof page==="string"){page=parseInt(page,10);}if(page===this._page){if(this.permission){this._save();}else{this._raisePermissionInvalidMessage();}}});this.subscribe("/dojox/mdnd/drop","_dropped");},resources:{},postMixInProperties:function(){dojo.mixin(this.resources,i18n.getLocalization("Sage.UI.Dashboard","DashboardTabController"));dojo.mixin(this.resources,i18n.getLocalization("dijit","common"));this._releaseManager.page=this;this.inherited(arguments);},_createChild:function(_1ede,col,idx,page){var _1edf=_1ede.options.title||_1ede["@name"],_1ee0=_1edf;while(_1ee0.indexOf(" ")>=0){_1ee0=_1ee0.replace(" ","_");}while(_1ee0.indexOf(".")>=0){_1ee0=_1ee0.replace(".","_");}while(_1ee0.indexOf("'")>=0){_1ee0=_1ee0.replace("'","_");}if(_1ed8[_1ee0]){_1edf=_1ed8[_1ee0];}this._childWidgets.push(new _1ed1({dndType:"Portlet",title:_1edf,resizeChildren:false,column:col,index:idx,_page:page,_parentId:this.id,preventRender:this.toBeHidden,widgetOptions:_1ede.options}));return this._childWidgets[this._childWidgets.length-1];},_addNewWidget:function(name){if(this.permission){var last=this._childWidgets[this._childWidgets.length-1];var col=last&&last.column?last.column:0;var idx=last&&last.index?last.index+1:0;var _1ee1=new _1ed1({dndType:"Portlet",isNew:true,title:this.resources[name]||name,resizeChildren:false,column:col,index:idx,_page:this._page,_parentId:this.id,widgetOptions:{name:name,title:name}});this._childWidgets.push(_1ee1);this.addChild(this._childWidgets[this._childWidgets.length-1],col,idx);this._save();}else{this._raisePermissionInvalidMessage();}},_editOptionsMenu:function(){var uo=Sage.UI.DataStore.Dashboard.userOptions;var _1ee2=false,_1ee3=false,_1ee4=false,_1ee5=false;switch(this.colWidths.toString()){case "50,50":_1ee3=true;break;case "67,33":_1ee4=true;break;case "33,67":_1ee5=true;break;case "100":default:_1ee2=true;}var d=new dijit.Dialog({title:this.resources.editOptionsText,style:"width:350px"});d.set("content",this._eoTable.apply({title:this.get("title"),buttonOk:this.resources.buttonOk,buttonCancel:this.resources.buttonCancel,addText:this.resources.addText,titleText:this.resources.titleText,chooseTemplateText:this.resources.chooseTemplateText,oneColumnText:this.resources.oneColumnText,twoColumnText:this.resources.twoColumnText,fatLeftText:this.resources.fatLeftText,fatRightText:this.resources.fatRightText,makeDefaultText:this.resources.makeDefaultText,invalidMessage:this.resources.invalidMessage}));dijit.byId("rdoEO0").set("checked",_1ee2);dijit.byId("rdoEO1").set("checked",_1ee3);dijit.byId("rdoEO2").set("checked",_1ee4);dijit.byId("rdoEO3").set("checked",_1ee5);if(uo.defaultTab==this.title){dijit.byId("chkMD").set("checked",true);}d.show();var _1ee6=function(){if(this.isNew){var _1ee7=dijit.byId("Dashboard");_1ee7.closeChild(this);_1ee7.selectFirstVisible();}dojo.disconnect(_1ee8);dojo.disconnect(ok);dojo.disconnect(_1ee9);d.destroyRecursive();};var _1ee8=dojo.connect(d,"hide",this,_1ee6);var _1ee9=dojo.connect(dijit.byId("btnEOCancel"),"onClick",this,function(){d.hide();});var ok=dojo.connect(dijit.byId("btnEOK"),"onClick",this,function(){if(this.permission){var txtEO=dijit.byId("txtEO");if(!txtEO.isValid()||!this.getParent()._isTitleUnique(txtEO.value,this.id)){return false;}var _1eea={};_1eea.ttl=txtEO.value;_1eea.one_column=dijit.byId("rdoEO0").get("value");_1eea.even_split=dijit.byId("rdoEO1").get("value");_1eea.fat_left=dijit.byId("rdoEO2").get("value");_1eea.fat_right=dijit.byId("rdoEO3").get("value");_1eea.make_def=dijit.byId("chkMD").get("value");if(this.isNew){this.isNew=false;}else{_1eea.oldName=this.name;}this._setOptions(_1eea);this._save();this._redrawWidgets();this.getParent().addRemovePageContextMenu();d.hide();}else{d.hide();this._raisePermissionInvalidMessage();}});},_redrawWidgets:function(){if(this._childWidgets){dojo.forEach(this._childWidgets,function(_1eeb){_1eeb.refresh(true);});}},_releaseManager:{share:function(){this.lookupOptions.callerId=this.page.id;if(!this.dialog){this.dialog=new dijit.Dialog({id:this.page.id+"-shareDialog",style:"width: 405px",title:this.page.resources.shareTabText});var _1eec=dojo.connect(this.dialog,"hide",this,this.fnHide);dojo.mixin(this.dialog,new _1ed4());this.dialog.createHelpIconByTopic("Working_with_the_Dashboard");}if(this.grid){this.grid.destroyRecursive();}this.grid=new dojox.grid.DataGrid({id:this.page.id+"-shareDialog-grid",structure:[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(value,_1eed,cel){var id=[cel.grid.id,"-row",_1eed].join("");var _1eee=["<div id=",id," >",id,"</ div>"].join("");return _1eee;}},{field:"Text",name:this.page.resources.releasedToText,width:"185px"},{field:"Type",name:this.page.resources.typeText,width:"175px"}],height:"200px"},document.createElement("div"));var def=dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/dashboard/release",preventCache:true,handleAs:"json",content:{name:this.page.name,family:this.page.family},load:dojo.hitch(this,this.releaseFetchSuccess),error:function(data){}});},releaseFetchSuccess:function(data,xhr){var _1eef={identifier:"Id",items:data};this.gridStore=new dojo.data.ItemFileWriteStore({data:_1eef});this.dialog.set("content",this.dialogContent.apply({id:this.dialog.id,pageId:this.page.id,closeText:this.page.resources.closeText,everyoneText:this.page.resources.everyoneText,headerText:this.page.resources.shareTabText}));this.initTools();this.dialog.show();dojo.place(this.grid.domNode,this.dialog.id+"-grid","replace");this.grid.setStore(this.gridStore);dojo.style(this.dialog.id,"top","130px");},fnHide:function(){this.release();},initTools:function(){var delid=this.dialog.id+"_delBtn";var _1ef0=_1ed5.create("img",{"id":delid,"alt":this.page.resources.deleteText,"title":this.page.resources.deleteText,"src":"images/icons/Delete_16x16.png","class":"tws-header-icon"});dojo.place(_1ef0,dojo.query(["#",this.dialog.id,"-toolbar"].join(""))[0],"last");dojo.connect(dojo.byId(delid),"onclick",this,this.deleteSelected);var delid=this.dialog.id+"_lookupBtn";var _1ef0=_1ed5.create("img",{"id":delid,"alt":this.page.resources.addText,"title":this.page.resources.addText,"src":"images/icons/Plus_16x16.gif","class":"tws-header-icon"});dojo.place(_1ef0,dojo.query(["#",this.dialog.id,"-toolbar"].join(""))[0],"last");dojo.connect(dojo.byId(delid),"onclick",this,this.startLookup);},deleteSelected:function(){var _1ef1=this.grid.selection.getSelected();if(_1ef1.length){var _1ef2=this.gridStore;dojo.forEach(_1ef1,function(item){if(item!==null){_1ef2.deleteItem(item);}});this.gridStore.save();}},page:null,grid:null,gridStore:null,dialog:null,dialogContent:new Simplate(["<div width=\"560px\">","<div style=\"width:100%;\" align=\"right\" id=\"{%= $.id %}-toolbar\"></div>","<div id=\"{%= $.id %}-grid\" ></div>","<div style=\"width:100%;\" align=\"right\" ><button data-dojo-type=\"dijit.form.Button\" type=\"button\" style=\"margin-top:10px;\" ","data-dojo-props=\"onClick:function(){dijit.byId('{%= $.pageId %}')._releaseManager.everyoneClick();}\"",">{%= $.everyoneText %}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" style=\"margin-left:10px; margin-top:10px;\" ","data-dojo-props=\"onClick:function(){dijit.byId('{%= $.pageId %}')._releaseManager.dialog.hide();}\"",">{%= $.closeText %}</button></div>","</div> "]),lookup:null,everyoneClick:function(){var item=[{$key:"SYST00000001",OwnerDescription:this.page.resources.everyoneText}];this.lookupOptions.doSelected(item);},release:function(){var ids="";var items=this.gridStore._arrayOfAllItems;for(var i=0;i<items.length;i++){if(items[i]){ids+=items[i].Id[0]+",";}}var vURL="SLXGroupBuilder.aspx?method=GetGroupIdFromNameFamilyAndType&name="+this.page.name+"&family=System&type=36";dojo.xhrGet({url:vURL,error:dojo.hitch(this,function(_1ef3){}),load:dojo.hitch(this,function(_1ef4){vURL="SLXGroupBuilder.aspx?method=ReleaseGroup&gid="+_1ef4+"&toids="+ids;dojo.xhrGet({url:vURL,error:dojo.hitch(this,function(_1ef5){}),load:dojo.hitch(this,function(_1ef6){})});})});},startLookup:function(){if(!this.lookup){this.lookup=new Sage.UI.SDataLookup(this.lookupOptions);this.lookup.dialogTitle=this.page.resources.addLookup;this.lookup.dialogButtonText=this.page.resources.okButton;this.lookup.structure[0].cells[0].name=this.page.resources.typeText;this.lookup.structure[0].cells[1].name=this.page.resources.descriptionText;}this.lookup.showLookup();},lookupOptions:{callerId:null,displayMode:5,structure:[{cells:[{name:"",field:"Type",sortable:true,width:"150px",editable:false,styles:null,propertyType:"Sage.Entity.Interfaces.OwnerType",excludeFromFilters:false,useAsResult:false},{"name":"","field":"OwnerDescription","sortable":true,"width":"500px","editable":false,"styles":null,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false}],"defaultCell":{"name":null,"field":null,"sortable":false,"width":"50px","editable":false,"styles":"text-align: left;","propertyType":null,"excludeFromFilters":false,"useAsResult":false}}],gridOptions:{},storeOptions:{"resourceKind":"owners"},dialogTitle:"",dialogButtonText:"",id:"MainContent_AccountDetails_Owner_Grid",modality:"modal",doSelected:function(items){var _1ef7=dijit.byId(this.callerId)._releaseManager;for(var i=0,len=items.length;i<len;i++){if(!_1ef7.gridStore._itemsByIdentity[items[i].$key]){_1ef7.gridStore.newItem({Id:items[i].$key,Text:items[i].OwnerDescription,Type:items[i].Type});}}_1ef7.gridStore.save();_1ef7.grid.startup();if(_1ef7.lookup&&_1ef7.lookup.lookupDialog){_1ef7.lookup.lookupDialog.hide();}}}},_joinColumnWidgets:function(){if(this.nbZones===2){for(var i=this._childWidgets.length-1;i>=0;i--){if(this._childWidgets[i].column===1){this.removeChild(this._childWidgets[i]);this._childWidgets[i].column=0;this._childWidgets[i].index+=this._childWidgets.length;this.addChild(this._childWidgets[i],0,this._childWidgets[i].index);}}this._deleteColumn(1);}},_setOptions:function(_1ef8){var uo=Sage.UI.DataStore.Dashboard.userOptions;if(_1ef8.ttl){this.title=_1ef8.ttl;this.set("name",_1ef8.ttl);var _1ef9=dijit.byId("Dashboard_tablist_"+this.id);if(_1ef9){_1ef9._setLabelAttr(_1ef8.ttl);}}if(_1ef8.one_column){this._joinColumnWidgets();this.setColumns(1);this.set("colWidths","100");dojo.publish("ui/dashboard/columnResize");}if(_1ef8.even_split){this.setColumns(2);this.set("colWidths","50,50");dojo.publish("/ui/dashboard/columnResize");}if(_1ef8.fat_left){this.setColumns(2);this.set("colWidths","67,33");dojo.publish("/ui/dashboard/columnResize");}if(_1ef8.fat_right){this.setColumns(2);this.set("colWidths","33,67");dojo.publish("/ui/dashboard/columnResize");}if(_1ef8.make_def){var db=dijit.byId(this._parentId);if(this.title){uo.defaultTab=this.title;db._updateUserOptions();}}if(_1ef8.oldName){this.oldName=_1ef8.oldName;}else{this.oldName="";}},_newWidgetMenu:function(){var d=new dijit.Dialog({title:this.resources.addContentText,style:"width:365px;"});dojo.mixin(d,new _1ed4());var list=Sage.UI.DataStore.Dashboard.widgetsList;var inner=[];this._nwListeners=[];for(var item in list){if(list.hasOwnProperty(item)&&item!="Default"){var _1efa=item.replace(" ","_");inner.push(this._nwTableInner.apply({btnId:_1efa,key:_1ed8[_1efa]||item,value:_1ed8[_1efa+"_Description"]||list[item],addText:this.resources.addText}));}}var mkup=this._nwTableOuter.apply({content:inner.join(""),buttonCancel:this.resources.buttonCancel});d.createHelpIconByTopic("Introducing_Widgets");d.set("content",mkup);d.show();var _1efb=function(){dojo.forEach(this._nwListeners,dojo.disconnect);dojo.disconnect(_1efc);dojo.disconnect(_1efd);setTimeout((function(d){return function(){d.destroyDescendants();d.destroy(false);};})(d),1);};var _1efc=dojo.connect(d,"hide",this,_1efb);var _1efd=dojo.connect(dijit.byId("btnAddContentClose"),"onClick",this,function(){d.hide();});var adds=dijit.findWidgets(dojo.byId("nwTable"));for(var i=0,len=adds.length;i<len;i++){if(adds[i].id!="btnAddContentClose"){var cb=dojo.hitch(this,this._addNewClick,d,adds[i].id);this._nwListeners.push(dojo.connect(adds[i],"onClick",null,cb));}}},_addNewClick:function(d,_1efe,evt){var id=_1efe.replace("_label","").replace("_"," ");d.hide();this._addNewWidget(id);},_init:function(){if(this.pageRendered){if(this.firstButNotDefault){for(var k=0,llen=this._childWidgets.length;k<llen;k++){this._childWidgets[k]._redrawCharts();}this.firstButNotDefault=false;}return;}if(this._columns.length){for(var i=0;i<this.nbZones;i++){if(this._columns[i]){this._columns[i].Widgets.Widget=_1ed2.Convert.toArrayFromObject(this._columns[i].Widgets.Widget);for(var j=0,len=this._columns[i].Widgets.Widget.length;j<len;j++){if(this._columns[i].Widgets.Widget[j]){this.addChild(this._createChild(this._columns[i].Widgets.Widget[j],i,j,this._page),i,j);}}}}}this.pageRendered=true;},_dropped:function(drp,_1eff,i){var _1f00=dijit.byId(drp.id);if(this._page!==_1f00._page){return;}var col=_1eff.node.cellIndex;_1f00._setColumn(col);_1f00._setIndex(i);dojo.publish("/ui/widget/dropped",[drp.id,_1f00._page,col,i]);if(this.permission){this._save();}else{this._raisePermissionInvalidMessage();}},_hide:function(){return this.title;},_copy:function(){return this._save(true);},_contextSave:function(){if(!this.pageRendered){return;}this._save();},_save:function(_1f01){var cw=this.colWidths;var _1f02;if(cw){_1f02=typeof cw==="string"?cw:cw.join(",");}var _1f03;if(_1f01){_1f03={"@name":this.name,"@title":this.name,"@id":this.id,"@family":this.family||"System","@permission":this.permission,"@colWidths":_1f02,Columns:{Column:[]}};}else{_1f03={"@name":this.name,"@title":this.name,"@id":this.id,"@family":this.family||"System","@colWidths":_1f02,Columns:{Column:[]}};}var _1f04={};for(var i=0,len=this._childWidgets.length;i<len;i++){var col=this._childWidgets[i].column;var opts=this._childWidgets[i].widgetOptions;var w={index:this._childWidgets[i].index,"@name":opts.name,"@family":opts.family||"System",options:opts};if(!_1f04[col]){_1f04[col]=new _1eda({Widgets:{Widget:[]}});}_1f04[col].Widgets.Widget.placeByAttr(w,"index");}var cols=Sage.Utility.size(_1f04);for(var j=0;j<cols;j++){_1f03.Columns.Column.push(_1f04[j]);}var pg={Dashboard:{}};Sage.Utility.mixOwn(pg.Dashboard,_1f03);if(_1f01){return pg;}var pgStr=dojo.toJson(pg);if(!this.oldName){this.oldName="";}var uri=dojo.string.substitute("slxdata.ashx/slx/crm/-/dashboard/page?name=${0}&family=${1}&oldName=${2}",[encodeURIComponent(this.name),encodeURIComponent(this.family),encodeURIComponent(this.oldName)]);var def=dojo.xhrPost({url:uri,handleAs:"text",postData:pgStr,load:function(data){},error:function(err){console.error(err);}});}});return _1edc;});},"url:Sage/MainView/Account/templates/AccountDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Account.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svSubType_Caption || \"Sub Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.subtype %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTitle_Status || \"Status:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.status %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svDivision_Caption || \"Division:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.division %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svIndustry_Caption || \"Industry:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.industry) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMainPhone_Caption || \"Main phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mainphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTollFree_Caption || \"Toll free:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.tollfree) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n]","Sage/MainView/SecurityManager":function(){define("Sage/MainView/SecurityManager",["Sage/UI/SDataMainViewConfigurationProvider","Sage/UI/Columns/RadioGroup","Sage/Data/WritableSDataStore","Sage/MainView/SecurityMgr/SecurityManagerGroupContext","dojo/i18n!./nls/SecurityManager","dojo/_base/declare"],function(_1f05,_1f06,_1f07,_1f08,_1f09,_1f0a){var _1f0b=_1f0a("Sage.MainView.SecurityManager",_1f05,{_profilesStore:false,_currentProfileId:false,_currentProfileDescription:false,_profileNameCache:{},store:false,entityType:"securityProfileColumns",constructor:function(_1f0c){dojo.mixin(this,_1f09);var _1f0d=Sage.Services.getService("ClientGroupContext");if(!_1f0d||_1f0d.declaredClass!="Sage.MainView.SecurityMgr.SecurityManagerGroupContext"){Sage.Services.removeService("ClientGroupContext");_1f0d=new _1f08();Sage.Services.addService("ClientGroupContext",_1f0d);}if(_1f0d){var ctx=_1f0d.getContext();this._currentProfileId=ctx.CurrentGroupID;this._currentProfileDescription=ctx.CurrentName;}this.service=Sage.Data.SDataServiceRegistry.getSDataService("system");this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:this.securityManagerText+": ${0}"};dojo.subscribe("/group/context/changed",this,"onConfigurationChange");},_getListPanelConfig:function(){var _1f0e=dijit.byId("refreshBtn");if(!this.refreshEvent){this.refreshEvent=dojo.connect(_1f0e,"onClick",this,function(){var _1f0f=dijit.byId("list");_1f0f._markClean();});}var _1f10=[{field:"table",name:this.tableText,width:"155px"},{field:"entity",name:this.entityText,width:"130px"},{field:"column",name:this.columnText,width:"140px"},{field:"property",name:this.propertyText,width:"100px"},{field:"access",name:this.accessText,labels:[this.readWriteText,this.readOnlyText,this.noAccessText],width:"300px",type:_1f06,options:["ReadWrite","ReadOnly","NoAccess"],editable:true}];var where=(this._currentProfileId)?dojo.string.substitute("profile.id eq \"${0}\"",[this._currentProfileId]):"";if(!this.store){this.store=new _1f07({id:"securityProfileColumns",service:this.service,isSecurityManager:true,resourceKind:"securityProfileColumns",include:[],select:["table","entity","column","property","access"],directQuery:{conditions:where}});}else{this.store.directQuery={conditions:where};}this.listPanelConfiguration={list:{structure:_1f10,store:this.store,selectionMode:"none",id:"securityManagerListConfig"},detail:false,summary:false,toolBar:{items:[{icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Save_16x16",title:this.saveText,onClick:dojo.hitch(this.store,"save")},{icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Reset_16x16",title:this.resetText,onClick:dojo.hitch(this.store,"revert")}]}};dojo.style(dijit.byId("addGroupButton").domNode,"display","none");return this.listPanelConfiguration;},requestConfiguration:function(_1f11){if(_1f11.success){_1f11.success.call(_1f11.scope||this,this._getListPanelConfig(),this);}},requestTitlePaneConfiguration:function(_1f12){if(_1f12.success){_1f12.success.call(_1f12.scope||this,this.titlePaneConfiguration,this);}},onConfigurationChange:function(obj){this._currentProfileId=obj.current.CurrentGroupID;this._currentProfileDescription=obj.current.CurrentName;if(this._currentProfileId&&this._currentProfileId.length===12){if(this._profileNameCache&&this._profileNameCache.hasOwnProperty(this._currentProfileId)){this._setUIForNewGroup(false);}else{this._profilesStore.fetch({onComplete:dojo.hitch(this,"_setUIForNewGroup")});}}},onTitlePaneConfigurationChange:function(){},_setUIForNewGroup:function(_1f13){if(_1f13){this._profileNameCache={};for(var i=0;i<_1f13.length;i++){this._profileNameCache[_1f13[i]["$key"]]=_1f13[i]["$descriptor"];}}var _1f14=dijit.byId("titlePane");if(_1f14){_1f14.set("title",this._profileNameCache[this._currentProfileId]);}var tabs=dijit.byId("GroupTabs");if(tabs){var _1f15=tabs.getChildren();for(var i=0;i<_1f15.length;i++){if(_1f15[i].id===this._currentProfileId){tabs.selectChild(_1f15[i],false);break;}}}},_getTabsConfig:function(){this._setProfilesStore();this._profilesStore.fetch({onComplete:dojo.hitch(this,"_setUIForNewGroup")});return {store:this._profilesStore,selectedTabId:this._currentProfileId,tabKeyProperty:"$key",tabNameProperty:"profileDescription",fetchParams:{},staticTabs:[],onTabSelect:function(child){var _1f16=Sage.Services.getService("ClientGroupContext");if(_1f16){var ctx=_1f16.getContext();var id=child.id||child;if(ctx.CurrentGroupID===id){return;}var _1f17=dijit.byId("list");_1f17._markClean();_1f16.setCurrentGroup(id,child.title);}},onTabClose:false};},_setProfilesStore:function(){this._profilesStore=this._profilesStore||new _1f07({id:"securityProfilesstore",service:this.service,resourceKind:"securityProfiles",include:[],select:["profileDescription","defaultPermission","profileType"],orderby:"profileDescription"});},_getMenuConfig:function(){this._setProfilesStore();return {id:"profileMenu",img:"images/icons/Groups_16x16.gif",text:this.profilesText,tooltip:this.profilesText,width:"300px",items:[{fn:this._getProfileMenuGrid,scope:this}]};},_getProfileMenuGrid:function(){return new Sage.UI.GridMenuItem({gridOptions:{id:"profileGridInMenu",store:this._profilesStore,rowsPerPage:40,structure:[{field:"profileDescription",name:"Description",width:"290px"}],selectionMode:"single",query:{},height:"400px",width:"350px",onSelected:function(idx){var _1f18=this.getItem(idx);var _1f19=Sage.Services.getService("ClientGroupContext");if(_1f19){var ctx=_1f19.getContext();if(ctx.CurrentGroupID===_1f18["$key"]){return;}var _1f1a=dijit.byId("GroupTabs"),_1f1b=_1f1a.getChildren();for(var i=0;i<_1f1b.length;i++){if(_1f1b[i].id==_1f18["$key"]){_1f1a.selectChild(_1f1b[i]);_1f19.setCurrentGroup(_1f18["$key"],_1f18.profileDescription);return;}}}}}});}});return _1f0b;});},"Sage/QuickForms/Design/Editors/TextBoxAdvancedPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/TextBoxAdvancedPropertyEditor",["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/TextBoxAdvancedPropertyEditor"],function(_1f1c,lang,_1f1d,_1f1e,_1f1f,_1f20,_1f21,_1f22,_1f23,_1f24){return _1f1c("Sage.QuickForms.Design.Editors.TextBoxAdvancedPropertyEditor",[_1f1d,_1f22,_1f21],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.maxLengthTooltipText %}\">","<label>{%= $.maxLengthText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_maxLength\" data-dojo-attach-event=\"onChange:_onMaxLengthChange\" data-dojo-props=\"constraints:{min:-1,places:0}\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_maxLength:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Sage SalesLogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},constructor:function(){lang.mixin(this,_1f24);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._enabled.set("value",this._designer.get("enabled"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._maxLength.set("value",this._designer.get("maxLength"));this._required.set("value",this._designer.get("required"));this._visible.set("value",this._designer.get("visible"));var _1f25=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_1f25&&_1f25["DataItemName"])||"");},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onDefaultDataBindingChange:function(value){},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onMaxLengthChange:function(value){if(this.isSuspended()||!this._maxLength.isValid()){return;}this._designer.set("maxLength",value);},_onRequiredChange:function(value){if(this.isSuspended()){return;}this._designer.set("required",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/UI/Calendar":function(){define("Sage/UI/Calendar",["dijit/Calendar","dojo/_base/declare"],function(_1f26,_1f27){var _1f28=_1f27("Sage.UI.Calendar",_1f26,{_dateModifiedExternal:false,displayMode:"",constructor:function(_1f29){this.displayMode=_1f29.displayMode;var self=this;if(this.displayMode==="popup"){dojo.connect(this,"_setValueAttr",function(value,_1f2a){if(value){value=new self.dateClassObj(value);}if(self._isValidDate(value)){value.setHours(1,0,0,0);if(!self.isDisabledDate(value,self.lang)){self._set("value",value);if(self.monthWidget&&self.monthWidget.dropDown){self.set("currentFocus",value);}if(_1f2a||typeof _1f2a=="undefined"){self.onChange(self.get("value"));}}}else{self._set("value",null);self.set("currentFocus",self.currentFocus);}});}else{dojo.subscribe("/entity/activity/calendar/schedulerDateChanged",function(data){(function(){self._dateModifiedExternal=true;self.set("value",data.date);self._dateModifiedExternal=false;})();});dojo.connect(this,"_setCurrentFocusAttr",function(date){self.set("value",date);});}this.inherited(arguments);},onValueSelected:function(date){if(this.displayMode!="popup"){if(!this._dateModifiedExternal){this._dateModifiedExternal=false;dojo.publish("/entity/activity/calendar/navigationCalendarDateChanged",[date,this]);this._dateModifiedExternal=false;}}},getClassForDate:function(date){var day=date.getDay();if((day==6)||(day==0)){return "dijitCalendarWeekEndDate";}}});return _1f28;});},"Sage/QuickForms/Design/nls/EmailControlDesigner":function(){define("Sage/QuickForms/Design/nls/EmailControlDesigner",["Sage/LanguageList","dojo/_base/lang"],function(_1f2b,lang){var nls={root:{displayNameText:"Email"}};return lang.mixin(_1f2b,nls);});},"Sage/UI/Controls/nls/Lookup":function(){define("Sage/UI/Controls/nls/Lookup",["Sage/LanguageList","dojo/_base/lang"],function(_1f2c,lang){var nls={root:{buttonToolTip:"Find",closeButtonToolTip:"Remove"}};return lang.mixin(_1f2c,nls);});},"Sage/Utility/File/nls/DescriptionsForm":function(){define("Sage/Utility/File/nls/DescriptionsForm",["Sage/LanguageList","dojo/_base/lang"],function(_1f2d,lang){var nls={root:{titleFmt:"Add Attachment(s) for ${0}",titleLibraryDoc:"Add Library Document (s)",fileNameText:"File name and size: ",descText:"Description:",okText:"OK",cancelText:"Cancel"}};return lang.mixin(_1f2d,nls);});},"Sage/TaskPane/OpportunityTasksTasklet":function(){define("Sage/TaskPane/OpportunityTasksTasklet",["dojo/i18n!./nls/OpportunityTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/MainView/Opportunity/UpdateOpportunities","Sage/MainView/Opportunity/OpportunityStatistics","dojo/_base/declare"],function(_1f2e,_1f2f,_1f30,_1f31,_1f32,_1f33){var _1f34=_1f33("Sage.TaskPane.OpportunityTasksTasklet",[_1f2f,_1f30],{updateOpportunitiesTitle:"Update Opportunities",opportunityStatisticsTitle:"Opportunity Statistics",taskItems:[],constructor:function(){dojo.mixin(this,_1f2e);this.taskItems=[{taskId:"UpdateOpportunities",type:"Link",displayName:this.updateOpportunitiesTitle,clientAction:"opportunityTasksActions.updateOpportunities();",securedAction:"Entities/Opportunity/MultiUpdate"},{taskId:"OpportunityStatistics",type:"Link",displayName:this.opportunityStatisticsTitle,clientAction:"opportunityTasksActions.opportunityStatistics();",securedAction:"Entities/Opportunity/OpportunityStatistics"}];},updateOpportunities:function(){this.prepareSelectedRecords(this.updateOpportunitiesActionItem(this.getSelectionInfo()));},updateOpportunitiesActionItem:function(_1f35){return function(){var _1f36=dijit.byId("dlgUpdateMultipleOpps");if(!_1f36){_1f36=new _1f31(_1f35);}else{_1f36.setSelectionInfo(_1f35);}_1f36.show();};},opportunityStatistics:function(){this.prepareSelectedRecords(this.opportunityStatisticsActionitem(this.getSelectionInfo()));},opportunityStatisticsActionitem:function(_1f37){return function(){var _1f38=new _1f32(_1f37);_1f38.show();};}});return _1f34;});},"Sage/UI/Controls/SimpleTextarea":function(){define("Sage/UI/Controls/SimpleTextarea",["dijit/form/SimpleTextarea","dojo/_base/declare"],function(_1f39,_1f3a){var _1f3b=_1f3a("Sage.UI.Controls.SimpleTextarea",[_1f39],{baseClass:"dijitTextBox dijitTextArea sageTextArea",templateString:"<div><textarea ${!nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea></div>",hotKey:"",multiLineMaxLength:"",shouldPublishMarkDirty:true,_setHotKeyAttr:{node:"textbox",type:"attribute",attribute:"accessKey"},constructor:function(args){this.maxLength=args.multiLineMaxLength;},onChange:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}this.inherited(arguments);}});return _1f3b;});},"Sage/UI/SLXPreviewGrid/FilterPanel":function(){define("Sage/UI/SLXPreviewGrid/FilterPanel",["dijit/form/Button","dijit/_Widget","Sage/Utility/_LocalStorageMixin","dojo/i18n!../nls/SLXPreviewGrid","dojo/_base/declare"],function(_1f3c,_1f3d,_1f3e,_1f3f,_1f40){var _1f41=_1f40("Sage.UI.SLXPreviewGrid.FilterPanel",[_1f3d,_1f3e],{_filters:null,_state:{},STORE_NS:"SAGE_UI_EDITABLEGRID",STORE_KEY_FILTERINFO:"_FILTER_INFO_",applyText:"Apply",resetText:"Reset",constructor:function(){this._filters=[];},postMixInProperties:function(){dojo.mixin(this,_1f3f);this._loadState();this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.domNode.className="filterPanel";var left=document.createElement("div");left.style.styleFloat=left.style.cssFloat="left";left.style.width="39%";var right=document.createElement("div");right.style.styleFloat=right.style.cssFloat="left";right.style.width="39%";var _1f42=this._state["filterStates"]||{};var _1f43=left;dojo.forEach(this.filterConfig,function(item,index,ar){if(_1f43===left&&index+1>ar.length/2){_1f43=right;}var _1f44=document.createElement("div");_1f44.className="filterItem";var _1f45=this._createFilter(item);if(_1f42[item.field]&&_1f45.applyState){_1f45.applyState(_1f42[item.field]);}this._filters.push(_1f45);if(item.label){var lbl=document.createElement("label");lbl.appendChild(document.createTextNode(item.label+":"));lbl.className="filterPanelLabel";lbl.htmlFor=_1f45.domNode.id;_1f44.appendChild(lbl);}_1f44.appendChild(_1f45.domNode);_1f43.appendChild(_1f44);},this);var _1f46=document.createElement("div");_1f46.style.styleFloat=_1f46.style.cssFloat="left";_1f46.style.width="20%";_1f46.className="filterButtonPanel";var btnOk=new _1f3c({label:this.applyText});_1f46.appendChild(btnOk.domNode);dojo.connect(btnOk,"onClick",this,"_applyFilter");var _1f47=new _1f3c({label:this.resetText});_1f46.appendChild(_1f47.domNode);dojo.connect(_1f47,"onClick",this,"_resetFilter");dojo.connect(this.domNode,"keydown",this,function(e){if(e.keyCode===13){this._applyFilter();}});this.domNode.appendChild(left);this.domNode.appendChild(right);this.domNode.appendChild(_1f46);},startup:function(){this.inherited(arguments);dojo.forEach(this._filters,function(item){item.startup();});if(this._state["visible"]&&this._state["visible"]===true){this.toggle();}},destroy:function(){dojo.forEach(this._filters,function(item){item.destroy(false);});dojo.forEach(dijit.findWidgets(this.domNode),function(wid){wid.destroy(false);});this.inherited(arguments);},getQuery:function(){var c=[];dojo.forEach(this._filters,function(f){var q=f.getQuery();if(q){c.push(q);}});return c.length>0?c.join(" and "):null;},toggle:function(){if(this.domNode.style.display==="none"){this.domNode.style.display="block";this._state["visible"]=true;}else{this.domNode.style.display="none";this._state["visible"]=false;}this._saveState();},onFilterApply:function(_1f48){},_createFilter:function(_1f49){var c=_1f49.widgetType;return new c(_1f49);},_applyFilter:function(){var _1f4a={};for(var i=0;i<this._filters.length;i++){var f=this._filters[i];if(f.getState){_1f4a[f.field]=f.getState();}}this._state["filterStates"]=_1f4a;this._saveState();this.onFilterApply(this.getQuery());},_resetFilter:function(){dojo.forEach(this._filters,function(f){f.reset();});this._applyFilter();},_saveState:function(){var key=this.STORE_KEY_FILTERINFO+this.id;this.saveToLocalStorage(key,this._state,this.STORE_NS);},_loadState:function(){var key=this.STORE_KEY_FILTERINFO+this.id;this._state=this.getFromLocalStorage(key,this.STORE_NS)||{};}});return _1f41;});},"Sage/QuickForms/Design/Editors/nls/NumericBasicPropertyEditor":function(){define("Sage/QuickForms/Design/Editors/nls/NumericBasicPropertyEditor",["Sage/LanguageList","dojo/_base/lang"],function(_1f4b,lang){var nls={root:{titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{left:"Left",center:"Center",right:"Right"}}};return lang.mixin(_1f4b,nls);});},"Sage/TaskPane/nls/CommonTasksTasklet":function(){define("Sage/TaskPane/nls/CommonTasksTasklet",["Sage/LanguageList","dojo/_base/lang"],function(_1f4c,lang){var nls={root:{okButtonText:"OK",loadingText:"loading...",noPrimaryEmail:"No primary email available",selectFileFormat:"Select a file format:",exportToFile_OptionCSV:"Standard CSV",exportToFile_OptionTab:"Tab delimited (recommended for Microsoft Excel)",exportToFile_OptionSaveFormat:"Remember my selection and do not ask again.",exportToFile_OK:"OK",exportToFile_Cancel:"Cancel",exportToFile_DialogTitle:"Export to File",errorExecutionAction:"An error occurred executing action ${0}"}};return lang.mixin(_1f4c,nls);});},"Sage/Utility/File":function(){define("Sage/Utility/File",["Sage/UI/Dialogs","dojo/number"],function(_1f4d,_1f4e){Sage.namespace("Utility.File");Sage.Utility.File={fileType:{ftAttachment:0,ftLibraryDocs:1},unableToUploadText:"Sage SalesLogix Desktop Integration Module must be installed to use this feature.",unknownSizeText:"unknown",supportsHTML5File:(window.File&&window.FileReader&&window.FileList&&window.Blob),largeFileWarningText:"Warning: This request exceed the size limit set by your administrator and fail to upload.",largeFileWarningTitle:"Warning",fileUploadOptions:{maxFileSize:4000000},init:function(_1f4f){if(_1f4f){this.fileUploadOptions=_1f4f;}},isFileSizeAllowed:function(files){var l=0;var _1f50=Sage.Utility.File.fileUploadOptions.maxFileSize;var title=Sage.Utility.File.largeFileWarningTitle;var msg=Sage.Utility.File.largeFileWarningText;for(var i=0;i<files.length;i++){if(files[i].size===0){}else{l+=files[i].size||files[i].blob.length;}}if(l>(_1f50)){_1f4d.showError(msg,title);return false;}return true;},uploadFile:function(file,url,_1f51,_1f52,error,scope,asPut){if(!Sage.Utility.File.isFileSizeAllowed([file])){return;}if(Sage.gears){this._uploadFileGears(file,url,_1f51,_1f52,error,scope,asPut);}else{if(this.supportsHTML5File){this._uploadFileHTML5_asBinary(file,url,_1f51,_1f52,error,scope,asPut);}else{this._showUnableToUploadError();}}},uploadFileHTML5:function(file,url,_1f53,_1f54,error,scope,asPut){if(!Sage.Utility.File.isFileSizeAllowed([file])){return;}if(this.supportsHTML5File){this._uploadFileHTML5_asBinary(file,url,_1f53,_1f54,error,scope,asPut);}else{this._showUnableToUploadError();}},_uploadFileGears:function(file,url,_1f55,_1f56,error,scope,asPut){if(!window.Sage&&!Sage.gears){this._showUnableToUploadError();return;}if(!url){url="slxdata.ashx/slx/system/-/attachments/file?format=json";}var _1f57=Sage.gears.factory.create("beta.httprequest");_1f57.open((asPut)?"PUT":"POST",url);var _1f58="---------------------------"+(new Date()).getTime();var _1f59="--";var crlf="\r\n";var _1f5a=Sage.gears.factory.create("beta.blobbuilder");_1f5a.append(_1f59);_1f5a.append(_1f58);_1f5a.append(crlf);_1f5a.append("Content-Disposition: attachment; name=\"file_\"");if(file.name){_1f5a.append("; filename*=\""+encodeURI(file.name)+"\"");}_1f5a.append(crlf);_1f5a.append("Content-Type: application/octet-stream");_1f5a.append(crlf);_1f5a.append(crlf);_1f5a.append(file.blob);_1f5a.append(crlf);_1f5a.append(_1f59);_1f5a.append(_1f58);_1f5a.append(_1f59);_1f5a.append(crlf);if(typeof (_1f56)==="function"){_1f57.onreadystatechange=function(){if(_1f57.readyState===4){if(Math.floor(_1f57.status/100)!==2){if(typeof (error)==="function"){error.call(scope||this,_1f57);}}else{_1f56.call(scope||this,_1f57);}}};}if(typeof (_1f55)==="function"){_1f57.upload.onprogress=function(prog){_1f55.call(scope||this,prog);};}_1f57.setRequestHeader("Content-Type","multipart/attachment; boundary="+_1f58);var blob=_1f5a.getAsBlob();_1f57.send(blob);},_uploadFileHTML5:function(file,url,_1f5b,_1f5c,error,scope,asPut){if(!this.supportsHTML5File||!window.FormData){this._showUnableToUploadError();return;}if(!url){url="slxdata.ashx/slx/system/-/attachments/file";}var fd=new FormData();fd.append("file_",file,encodeURI(file.name));var _1f5d=new XMLHttpRequest();_1f5d.open((asPut)?"PUT":"POST",url);_1f5d.setRequestHeader("X-Requested-With","XMLHttpRequest");if(_1f5c){_1f5d.onreadystatechange=function(){if(_1f5d.readyState===4){if(Math.floor(_1f5d.status/100)!==2){if(error){error.call(scope||this,_1f5d);}}else{_1f5c.call(scope||this,_1f5d);}}};}if(_1f5b){_1f5d.upload.addEventListener("progress",function(e){_1f5b.call(scope||this,e);});}_1f5d.send(fd);},_uploadFileHTML5_asBinary:function(file,url,_1f5e,_1f5f,error,scope,asPut){if(!this.supportsHTML5File){this._showUnableToUploadError();return;}if(!url){url="slxdata.ashx/slx/system/-/attachments/file";}var _1f60=new XMLHttpRequest();_1f60.open((asPut)?"PUT":"POST",url);_1f60.setRequestHeader("X-Requested-With","XMLHttpRequest");var _1f61=new FileReader();_1f61.onload=function(evt){var _1f62=evt.target.result;var _1f63="---------------------------"+(new Date()).getTime();var _1f64="--";var crlf="\r\n";var msg=_1f64+_1f63+crlf;msg+="Content-Disposition: attachment; ";msg+="name=\"file_\"; ";msg+="filename*=\""+encodeURI(file.name)+"\" ";msg+=crlf;msg+="Content-Type: "+file.type;msg+=crlf+crlf;msg+=_1f62;msg+=crlf;msg+=_1f64+_1f63+_1f64+crlf;if(_1f5f){_1f60.onreadystatechange=function(){if(_1f60.readyState===4){if(Math.floor(_1f60.status/100)!==2){if(error){error.call(scope||this,_1f60);}}else{_1f5f.call(scope||this,_1f60);}}};}if(_1f5e){_1f60.upload.addEventListener("progress",function(e){_1f5e.call(scope||this,e);});}_1f60.setRequestHeader("Content-Type","multipart/attachment; boundary="+_1f63);if(_1f60.sendAsBinary){_1f60.sendAsBinary(msg);}else{_1f60.send(msg);}};_1f61.readAsBinaryString(file);},_showUnableToUploadError:function(){_1f4d.showError(this.unableToUploadText);},formatFileSize:function(size){size=parseInt(size,10);if(size===0){return "0 KB";}if(!size||size<0){return this.unknownSizeText;}if(size<1024){return "1 KB";}return _1f4e.format(Math.round(size/1024))+" KB";}};return Sage.Utility.File;});},"Sage/UI/ConditionManager":function(){define("Sage/UI/ConditionManager",["Sage/_Templated","dijit/_Widget","dijit/form/Select","dijit/form/Button","Sage/UI/ImageButton","Sage/UI/SearchConditionWidget","Sage/Utility","dojo/i18n!./nls/ConditionManager","dojo/_base/declare"],function(_1f65,_1f66,_1f67,_1f68,_1f69,_1f6a,util,nls,_1f6b){var _1f6c=_1f6b("Sage.UI.ConditionManager",[_1f66,_1f65],{widgetsInTemplate:true,srchBtnCaption:"Search",addrowlabel:"Lookup by:",hiderowlabel:"And:",hideimgurl:"images/icons/Find_Remove_16x16.gif",addimgurl:"images/icons/Find_Add_16x16.gif",hideimgalttext:"Remove Condition",addimgalttext:"Add Condition",errorOperatorRequiresValue:"The operator requires a value",equalTo:"Equal to",notEqualTo:"Not Equal to",startingWith:"Starting With",contains:"Contains",equalOrLessThan:"Equal or Less than",equalOrGreaterThan:"Equal or Greater than",lessThan:"Less than",greaterThan:"Greater than",operators:null,fields:null,fieldsHash:null,fieldNameProperty:"fieldname",fieldDisplayNameProperty:"displayname",fieldTypeProperty:"propertyType",fieldPickListNameProperty:"pickListName",conditionWidgets:null,widgetConnects:null,widgetTemplate:new Simplate(["<div id=\"{%= $.id %}\" class=\"lookup-condition-manager\">","<table cellspacing=\"0\" cellpadding=\"3\">","<tr><td><div dojoAttachPoint=\"conditions\"></div></td></tr>","</table>","<div class=\"lookup-condition-actions\">","<button id=\"{%= $.id %}-Search\" data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachPoint=\"searchButton\" dojoAttachEvent=\"onClick:_doSearch\">{%= $.srchBtnCaption %}</button>","</div>","</div>"]),isSettingValues:false,id:"",constructor:function(){this.conditionWidgets={};this.operators={};this.fieldsHash={};this.fields=[];this.widgetConnects=[];},destroy:function(){var wid,i;for(i=0;i<this.widgetConnects.length;i++){dojo.disconnect(this.widgetConnects[i]);}for(wid in this.conditionWidgets){if(this.conditionWidgets.hasOwnProperty(wid)){if(this.conditionWidgets[wid].destroy){this.conditionWidgets[wid].destroy();}}}this.inherited(arguments);},postMixInProperties:function(){dojo.mixin(this,nls);this.inherited(arguments);},getOperatorsByField:function(field){var _1f6d,_1f6e,_1f6f,_1f70,_1f71;_1f6d=[{value:"eq",label:this.equalTo,selected:false,disabled:false},{value:"ne",label:this.notEqualTo,selected:false,diabled:false}];_1f6e=[{value:"sw",label:this.startingWith,selected:false,disabled:false},{value:"like",label:this.contains,selected:false,diabled:false},{value:"eq",label:this.equalTo,selected:false,diabled:false},{value:"ne",label:this.notEqualTo,selected:false,diabled:false},{value:"le",label:this.equalOrLessThan,selected:false,diabled:false},{value:"ge",label:this.equalOrGreaterThan,selected:false,diabled:false},{value:"lt",label:this.lessThan,selected:false,diabled:false},{value:"gt",label:this.greaterThan,selected:false,diabled:false}];_1f6f=[{value:"eq",label:this.equalTo,selected:false,diabled:false},{value:"ne",label:this.notEqualTo,selected:false,diabled:false},{value:"le",label:this.equalOrLessThan,selected:false,diabled:false},{value:"ge",label:this.equalOrGreaterThan,selected:false,diabled:false},{value:"lt",label:this.lessThan,selected:false,diabled:false},{value:"gt",label:this.greaterThan,selected:false,diabled:false}];_1f70=[{value:"eq",label:this.equalTo,selected:false,diabled:false},{value:"ne",label:this.notEqualTo,selected:false,diabled:false}];_1f71={"System.Boolean":{options:_1f6d},"Boolean":{options:_1f6d},"System.String":{options:_1f6e},"SalesLogix.PickList":{options:_1f70},"Sage.Entity.Interfaces.UserType":{options:_1f6f},"Sage.Entity.Interfaces.OwnerType":{options:_1f6f},"System.DateTime":{options:_1f6f},"DateTime":{options:_1f6f},"Phone":{options:_1f6e},"User":{options:_1f6e},"Owner":{options:_1f6e},"System.Double":{options:_1f6f},"System.Int32":{options:_1f6f},"System.Int16":{options:_1f6f},"System.Decimal":{options:_1f6f},"Fixed":{options:_1f6f},"Decimal":{options:_1f6f},"Integer":{options:_1f6f},"Positive Integer":{options:_1f6f},"Currency":{options:_1f6f},"Percent":{options:_1f6f},"defaultOperators":{options:_1f6e},"None":{options:_1f6e}};if((field.hasOwnProperty(this.fieldTypeProperty))&&(_1f71.hasOwnProperty(field[this.fieldTypeProperty]))){return _1f71[field[this.fieldTypeProperty]].options;}return _1f71.defaultOperators&&_1f71.defaultOperators.options;},getConditionsAsUrlWhereString:function(){var conds=this.getConditions(),_1f72=[],_1f73=null,i,_1f74,lhd,rhd,lhs,rhs,_1f75;for(i=0;i<conds.length;i++){_1f73=conds[i].val;if(typeof _1f73==="string"){_1f73=_1f73.replace(/%/g,"");}if(_1f73.constructor===Date){if(conds[i].operator==="eq"||conds[i].operator==="ne"){lhd=_1f73;rhd=_1f73;lhd.setHours(0);lhd.setMinutes(0);lhd.setSeconds(0);lhs=util.Convert.toIsoStringFromDate(lhd);rhd.setHours(23);rhd.setMinutes(59);rhd.setSeconds(59);rhs=util.Convert.toIsoStringFromDate(rhd);_1f75={field:conds[i].fieldname,leftOp:"gt",leftVal:lhs,rightOp:"lt",rightVal:rhs,join:"and"};if(conds[i].operator==="ne"){_1f75.leftOp="lt";_1f75.rightOp="gt";_1f75.join="or";}_1f72.push(dojo.string.substitute("(${field} ${leftOp} '${leftVal}' ${join} ${field} ${rightOp} '${rightVal}')",_1f75));continue;}else{if(conds[i].operator==="le"||conds[i].operator==="gt"){_1f73.setHours(23);_1f73.setMinutes(59);_1f73.setSeconds(59);}else{if(conds[i].operator==="ge"||conds[i].operator==="lt"){_1f73.setHours(0);_1f73.setMinutes(0);_1f73.setSeconds(0);}}}_1f73=util.Convert.toIsoStringFromDate(_1f73);}_1f74={field:conds[i].fieldname,op:conds[i].operator,val:_1f73};var fld=this.getField(conds[i].fieldname);if(fld&&fld.propertyType==="SalesLogix.PickList"){if(typeof _1f73==="object"&&_1f73[0]){_1f74.val=_1f73[0];}}if(_1f74.op==="like"){_1f74.val=["%",_1f74.val,"%"].join("");}else{if(_1f74.op==="sw"){_1f74.op="like";_1f74.val+="%";}}if(typeof _1f74.val==="string"){_1f74.val=["\"",_1f74.val.toUpperCase(),"\""].join("");_1f74.field=["upper(",_1f74.field,")"].join("");}_1f72.push([_1f74.field," ",_1f74.op," ",_1f74.val].join(""));}return _1f72.join(" and ");},getField:function(_1f76){if(this.fieldsHash&&this.fieldsHash.hasOwnProperty(_1f76)){return this.fieldsHash[_1f76];}return false;},getConditionsJSON:function(){var i=0,_1f77=this.getConditions(),_1f78,_1f79;for(i=0;i<_1f77.length;i++){_1f79=_1f77[i];_1f78=_1f77[i].val;if(_1f78.constructor===Date){_1f78=util.Convert.toIsoStringFromDate(_1f78);}_1f77[i].val=_1f78;}return Sys.Serialization.JavaScriptSerializer.serialize(_1f77);},getConditions:function(){var conds=[],wid,c;for(wid in this.conditionWidgets){if(this.conditionWidgets.hasOwnProperty(wid)){if(this.conditionWidgets[wid].getCondition){c=this.conditionWidgets[wid].getCondition();if(c){conds.push(c);}}}}return conds;},resetConditions:function(){var wid,i;for(i=0;i<this.widgetConnects.length;i++){dojo.disconnect(this.widgetConnects[i]);}for(wid in this.conditionWidgets){if(this.conditionWidgets.hasOwnProperty(wid)){if(this.conditionWidgets[wid].getCondition){this._removeCondition(this.conditionWidgets[wid]);}}}this._setInitialCondition();},_doSearch:function(){this.onDoSearch(this.getConditions());},_setFieldsAttr:function(_1f7a){var i;this.fields=_1f7a;this.fieldsHash={};for(i=0;i<_1f7a.length;i++){this.fieldsHash[_1f7a[i][this.fieldNameProperty]]=_1f7a[i];}this.resetConditions();},setFirstConditionValue:function(field,op,value){var prop,wid;for(prop in this.conditionWidgets){if(this.conditionWidgets.hasOwnProperty(prop)){wid=this.conditionWidgets[prop];if(wid.isFirstCondition){wid.defaultOperator=op;wid.defaultField=field;wid.defaultValue=value;wid.refreshDefaults();}}}},addCondition:function(field,op,value,_1f7b){var count=this._conditionCount(),_1f7c=new _1f6a({conditionManager:this,label:this.hiderowlabel,isFirstCondition:false,defaultField:field,defaultOperator:op,defaultValue:value,id:this.id+"-SearchCondition"+count,visible:_1f7b});this.widgetConnects.push(dojo.connect(_1f7c,"onRemoveLookupCondition",this,"_removeCondition"));dojo.place(_1f7c.domNode,this.conditions);_1f7c.startup();this.conditionWidgets[_1f7c.id]=_1f7c;},_setInitialCondition:function(){var self=this,wid=new _1f6a({conditionManager:self,label:self.addrowlabel,isFirstCondition:true,id:self.id+"-SearchCondition0",visible:true});this.widgetConnects.push(dojo.connect(wid,"onAddLookupCondition",self,"_addCondition"));self.conditionWidgets[wid.id]=wid;dojo.place(wid.domNode,self.conditions);wid.startup();},_addCondition:function(){var count=this._conditionCount(),_1f7d=new _1f6a({conditionManager:this,label:this.hiderowlabel,isFirstCondition:false,id:this.id+"-SearchCondition"+count,visible:true});this.widgetConnects.push(dojo.connect(_1f7d,"onRemoveLookupCondition",this,"_removeCondition"));this.conditionWidgets[_1f7d.id]=_1f7d;dojo.place(_1f7d.domNode,this.conditions);_1f7d.startup();},_removeCondition:function(_1f7e){var id=_1f7e.id;_1f7e.destroyRecursive();delete (this.conditionWidgets[id]);},_conditionCount:function(){var count=0,wid;for(wid in this.conditionWidgets){if(this.conditionWidgets.hasOwnProperty(wid)){count+=1;}}return count;},onDoSearch:function(args){}});return _1f6c;});},"Sage/UI/SearchMenuItem":function(){require({cache:{"url:Sage/templates/GridMenuItem.html":"<tr class=\"dijitGridMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-event=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"4\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\" style=\"display:none\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"display:none\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n    <td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\" style=\"display:none\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t</td>\n</tr>\n"}});define("Sage/UI/SearchMenuItem",["dojo/_base/declare","dijit/MenuItem","dijit/form/TextBox","dijit/form/CheckBox","dijit/form/Button","Sage/UI/ImageButton","dojo/dom-construct","dojo/_base/lang","dojo/has","dojo/_base/sniff","Sage/UI/Controls/_DialogHelpIconMixin","dojo/text!../templates/GridMenuItem.html","dojo/i18n!./nls/SearchMenuItem","dojo/topic"],function(_1f7f,_1f80,_1f81,_1f82,_1f83,_1f84,_1f85,lang,has,sniff,_1f86,_1f87,nls,topic){var _1f88=_1f7f("Sage.UI.SearchMenuItem",_1f80,{id:"groupSearchMenuItem",templateString:_1f87,seedQuery:"",findText:"Find: ",showHiddenText:"Show Hidden: ",clearText:"Clear",textBox:null,findButton:null,clearButton:null,showHiddenCheck:null,registeredWidgets:null,startup:function(){this.inherited(arguments);var _1f89=lang.hitch(this,function(event){if(event.keyCode===9){event.cancelBubble=true;}});if(nls){this.findText=nls.findText;this.showHiddenText=nls.showHiddenText;this.clearText=nls.clearText;}this.getParent().on("open",lang.hitch(this,this.init));if(has("mozilla")){this.getParent().on("keyPress",_1f89);}else{this.getParent().on("keyDown",_1f89);}},init:function(){if(!this.started){topic.subscribe("sage/ui/groups/gridMenuStarted",lang.hitch(this,function(_1f8a){this.registeredWidgets=[];this._createSearchTextBox();this._createShowHidden();this._setQuery();this.started=true;}));}var fn=lang.hitch(this,function(){this.focusText();});setTimeout(fn,100);},focusText:function(){if(this.textBox&&this.textBox.focus){this.textBox.focus();}},_createSearchTextBox:function(){this.textBox=new _1f81();this.textBox.startup();this.registeredWidgets.push(this.textBox);var _1f8b=lang.hitch(this,function(event){if(event.keyCode===13){this._setQuery();}if(event.keyCode===37||event.keyCode===39||event.keyCode===9){event.cancelBubble=true;}});if(has("mozilla")){this.textBox.on("keyPress",_1f8b);}else{this.textBox.on("keyDown",_1f8b);}_1f85.place(this.textBox.domNode,this.containerNode,"only");_1f85.create("label",{"for":this.textBox.id,"innerHTML":this.findText+": ","class":"groupMenuLabel"},this.containerNode,"first");this.findButton=new _1f84({imageClass:"icon_Find_16x16","class":"groupMenuButton","title":this.findText,onClick:lang.hitch(this,function(){this._setQuery();})});this.clearButton=new _1f83({label:this.clearText,"class":"groupMenuButton","title":this.clearText,onClick:lang.hitch(this,function(){this.textBox.set("value","");this._setQuery();})});_1f85.place(this.findButton.domNode,this.containerNode,"last");_1f85.place(this.clearButton.domNode,this.containerNode,"last");this.titleBar=this.containerNode;lang.mixin(this,new _1f86());this.createHelpIconByTopic("Group_Manager");_1f85.place(this.helpIcon,this.containerNode,"last");this.registeredWidgets.push(this.findButton);this.registeredWidgets.push(this.clearButton);},_createShowHidden:function(){var key="GroupMenuShowHidden",_1f8c=sessionStorage.getItem(key);if(_1f8c===null){sessionStorage.setItem(key,"false");_1f8c="false";}this.showHiddenCheck=new _1f82();this.showHiddenCheck.set("checked",_1f8c==="true"?true:false);this.registeredWidgets.push(this.showHiddenCheck);this.showHiddenCheck.on("click",lang.hitch(this,function(event){this._setQuery();var grid=dijit.byId("groupsGridInMenu");if(grid){if(this.showHiddenCheck.checked){sessionStorage.setItem(key,"true");grid.structure[1].width="205px";}else{sessionStorage.setItem(key,"false");grid.structure[1].width="260px";}grid.setStructure(grid.structure);grid.layout.setColumnVisibility(2,this.showHiddenCheck.checked);}}));var _1f8d=_1f85.create("p",null,this.containerNode,"last");_1f85.place(this.showHiddenCheck.domNode,_1f8d,"last");_1f85.create("label",{"for":this.showHiddenCheck.id,"innerHTML":this.showHiddenText,"class":"groupMenuLabel"},this.showHiddenCheck.domNode,"before");},_setQuery:function(){var grid=dijit.byId("groupsGridInMenu"),_1f8e=this.textBox.get("value").replace(/'/g,"''"),_1f8f=[];if(grid){if(!this.seedQuery){this.seedQuery=grid.get("query");}_1f8f.push(this.seedQuery);if(_1f8e){_1f8e=this._escapeSearchText(_1f8e);_1f8f.push("and upper(displayName) like '%"+_1f8e.toUpperCase()+"%'");}if(!this.showHiddenCheck.checked){_1f8f.push("and not isHidden");}grid.set("query",_1f8f.join(" "));grid._refresh();}},_escapeSearchText:function(_1f90){_1f90=_1f90.replace(/\[/g,"[[]").replace(/_/g,"[_]").replace(/%/g,"[%]");return _1f90;},_onClick:function(e){e.cancelBubble=true;},destroy:function(){var i;if(this.registeredWidgets!==null){for(i=0;i<this.registeredWidgets.length;i++){this.registeredWidgets[i].destroy(false);this.registeredWidgets.splice(i,1);}}this.inherited(arguments);}});return _1f88;});},"Sage/Utility/nls/Dashboard":function(){define("Sage/Utility/nls/Dashboard",["Sage/LanguageList","dojo/_base/lang"],function(_1f91,lang){var nls={root:{pageText:"Page"}};return lang.mixin(_1f91,nls);});},"Sage/QuickForms/Design/PropertyValueError":function(){define("Sage/QuickForms/Design/PropertyValueError",["dojo/string","dojo/_base/lang"],function(_1f92,lang){var _1f93=function(_1f94,value,_1f95){this.result=_1f94;this.value=value;this.message=_1f95||_1f92.substitute(this.messageText,[value]);};lang.extend(_1f93,{messageText:"The value ${0} is not allowed.",toString:function(){return this.message;}});return lang.setObject("Sage.QuickForms.Design.PropertyValueError",_1f93);});}}});require(["dojo/i18n"],function(i18n){i18n._preloadLocalizations("Sage/nls/Sage",["et","en-tt","eu","ar-sy","xh","en-nz","fa","es-uy","es-cl","rm","ro","fr-be","es-co","fi","es-cr","sv-fi","ar-tn","en-bz","ru","es-ve","es-pa","zh-hk","lt","fo","zh-tw","lv","es-pe","en-ca","fr","en-us","es-pr","sk","fr-ca","de-ch","sl","gd","mk","es-py","sq","sr","fr-ch","pt-pt","af","sv","ms","mt","zh-cn","ar","en-jm","zh","es-ec","nb","th","az","tn","he","zu","nl","tr","hi","ts","be","bg","hr","hu","ar-jo","uk","id","ca","ar-dz","ur","is","it","cs","ve","de-li","vi","ja","da","pl","ar-lb","nl-be","de","es-gt","it-ch","es-ar","pt","fr-lu","en-gb","en-za","zh-sg","es-hn","ar-ma","es-bo","en-au","kk","ko","el","de-at","en","pt-br","es"]);});define("Sage/Sage",[],1);